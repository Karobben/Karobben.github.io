"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const tslib_1 = require("tslib");
const fs = tslib_1.__importStar(require("fs-extra"));
const axios_1 = tslib_1.__importDefault(require("axios"));
async function run(name, file, version, registry) {
    await fs.outputJSON(file, { current: version }); // touch file with current version to prevent multiple updates
    const { data } = await axios_1.default.get(`${registry}/${name.replace('/', '%2f')}`, { timeout: 5000 });
    await fs.outputJSON(file, Object.assign({}, data['dist-tags'], { current: version }));
    process.exit(0);
}
run(process.argv[2], process.argv[3], process.argv[4], process.argv[5])
    .catch(require('@oclif/errors/handle'));
