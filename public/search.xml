<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>test</title>
      <link href="/2020/06/30/tmp/"/>
      <url>/2020/06/30/tmp/</url>
      
        <content type="html"><![CDATA[<p><a href="https://karobben.github.io/">Home</a><br><a href="https://karobben.github.io/R/R-index.html">R</a><br><a href="https://karobben.github.io/Python/index.html">Python</a><br><a href="https://karobben.github.io/Linux/index.html">Linux</a><br><a href="https://karobben.github.io/Bioinfor/index.html">Bio infr</a><br><a href="https://karobben.github.io/LearnNotes/index.html">Notes</a><br><a href="https://karobben.github.io/Blog/index.html">Blog</a></p>]]></content>
      
      
      
    </entry>
    
    
  
  
    
    
    <entry>
      <title></title>
      <link href="/Gene.html"/>
      <url>/Gene.html</url>
      
        <content type="html"><![CDATA[<p>|Gene|ID|Tissue|Type|<br>|:—:|:—:|:—:|:—:|:—:|<br>|TnC|TRINITY_DN83393_c1_g1_i1|M|G|<br>|TnT|TRINITY_DN89393_c0_g2_i2|M|G|<br>|MYSS|TRINITY_DN21595_c0_g1_i1|M|G|<br>|myosin light chain 2|TRINITY_DN83363_c0_g1_i1|M|G|<br>|myosin light chain 3|TRINITY_DN92543_c6_g2_i1|M|G|<br>|alpha-actinin-2|TRINITY_DN100505_c0_g1_i1|M|G|<br>|ncoa4|TRINITY_DN97047_c5_g3_i2|M|G|<br>|fhl1|TRINITY_DN94944_c1_g1_i2|M|G|<br>|eIF4E|TRINITY_DN99228_c0_g1_i4|M|G|<br>|calpain|TRINITY_DN71874_c0_g1_i2|M|G|<br>|P38|TRINITY_DN99300_c0_g2_i3|M|G|<br>|cathepsin|TRINITY_DN99807_c0_g1_i2|M|G|<br>|atrogin|TRINITY_DN96210_c0_g1_i2|M|G|<br>|MuRF1|TRINITY_DN90991_c0_g1_i1|M|G|<br>|MPO|TRINITY_DN97641_c0_g1_i2|M|G|<br>|ALT|TRINITY_DN97960_c5_g1_i1|M|G|<br>|glyA|TRINITY_DN105439_c3_g2_i1|M|A|<br>|metH|TRINITY_DN106297_c0_g1_i1|M|A|<br>|alaA|TRINITY_DN83833_c0_g1_i1|M|A|<br>|argG|TRINITY_DN93528_c0_g1_i1|M|A|<br>|TAT|TRINITY_DN93082_c1_g2_i2|M|A|<br>|phhA|TRINITY_DN93082_c1_g2_i2|M|A|<br>|Bcat|TRINITY_DN99298_c1_g2_i1|L|A|<br>|Asl|TRINITY_DN100244_c0_g2_i4|L|A|<br>|CPT1A|TRINITY_DN104672_c2_g1_i1|L|Fatty acid|<br>|THIM|TRINITY_DN98244_c0_g1_i1|L|Fatty acid|<br>|AMYP|TRINITY_DN91679_c0_g1_i1|I|M|<br>|PLRP1|TRINITY_DN86593_c1_g1_i1|I|M|<br>|CEL|TRINITY_DN100786_c3_g1_i1|I|M|<br>|PLA2|TRINITY_DN82906_c0_g1_i1|I|M|<br>|apoB|TRINITY_DN107691_c2_g1_i1|I|M|<br>|ApoA-1|TRINITY_DN91748_c4_g1_i1|I|M|<br>|ApoA-4|TRINITY_DN95544_c0_g1_i1|I|M|<br>|mtp|TRINITY_DN104118_c1_g1_i1|I|M|<br>|chk|TRINITY_DN103751_c0_g1_i1|I|M|<br>|pcyt1a|TRINITY_DN98929_c0_g1_i2|I|M|<br>|cd36|TRINITY_DN95454_c0_g1_i1|I|M|<br>|fabp-7|TRINITY_DN73732_c1_g1_i1|I|M|<br>|fabp-10A|TRINITY_DN104519_c0_g1_i1|I|M|<br>|ApoB-1|TRINITY_DN91748_c4_g1_i1|I|M|<br>|leptin|TRINITY_DN106451_c0_g1_i1|L|I|<br>|cdipt|TRINITY_DN104559_c1_g1_i3|L|I|<br>|Sec63|TRINITY_DN106159_c3_g1_i1|L|I|<br>|IL-8_1|TRINITY_DN92154_c0_g1_i1|I|I|<br>|IL-8_2|TRINITY_DN106095_c2_g1_i2|I|I|<br>|FHC|TRINITY_DN68053_c0_g1_i1|I|I|</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/index.html"/>
      <url>/index.html</url>
      
        <content type="html"><![CDATA[<!DOCTYPE html><html lang="en">  <head>    <meta charset="UTF-8">    <title>Karobben blog</title>    <link rel="icon" href="Home/img/tag.png" type="image/gif" />    <!-- Baidu Search; Start-->    <meta name="baidu-site-verification" content="RcyozL6CoC" />    <!-- Baidu Search; Donw -->    <!-- 360 -->    <meta name="360-site-verification" content="c6adb9b2118cd448791bf5a840fcf58d" />    <!-- Bootstrap CSS -->    <link rel="stylesheet" href="Home/css/bootstrap.min.css">    <link rel="stylesheet" href="Home/css/main.css">    <script>      var _hmt = _hmt || [];      (function() {        var hm = document.createElement("script");        hm.src = "https://hm.baidu.com/hm.js?8442e6ecc87d878298ba7d3bd0a5484c";        var s = document.getElementsByTagName("script")[0];        s.parentNode.insertBefore(hm, s);      })();    </script>          <img src='Home/img/bg.jpg' style="width:100%;">    <!--Profile start-->    <div class='profile'>      <img class='profile' src="Home/img/Profile.jpg" style="width:100%;border-radius:100px;border:solid" alt=""/>      <p  align="center" style="padding-top:10px; font-size: 45px;color: rgb(255, 255, 255); ">Karobben</p>    </div>    <!--Profile End-->  <meta name="generator" content="Hexo 4.2.1"></head>  <body><pre><code>&lt;!-- Header Section Start --&gt;&lt;header id=&quot;slider-area&quot;&gt;  &lt;nav class=&quot;navbar navbar-expand-md fixed-top scrolling-navbar bg-white&quot;&gt;    &lt;div class=&quot;container&quot;&gt;      &lt;div class=&quot;collapse navbar-collapse&quot; id=&quot;navbarCollapse&quot;&gt;        &lt;ul class=&quot;navbar-nav mr-auto w-100 justify-content-end&quot;&gt;          &lt;li class=&quot;nav-item&quot;&gt;            &lt;a class=&quot;nav-link page-scroll&quot; href=&quot;#&quot;&gt;Home&lt;/a&gt;          &lt;/li&gt;          &lt;li class=&quot;nav-item&quot;&gt;            &lt;a class=&quot;nav-link page-scroll&quot; href=&quot;R/R-index.html&quot;&gt;R&lt;/a&gt;          &lt;/li&gt;          &lt;li class=&quot;nav-item&quot;&gt;            &lt;a class=&quot;nav-link page-scroll&quot; href=&quot;Python/index.html&quot;&gt;Python&lt;/a&gt;          &lt;/li&gt;          &lt;li class=&quot;nav-item&quot;&gt;            &lt;a class=&quot;nav-link page-scroll&quot; href=&quot;Linux/index.html&quot;&gt;Linux&lt;/a&gt;          &lt;/li&gt;          &lt;li class=&quot;nav-item&quot;&gt;            &lt;a class=&quot;nav-link page-scroll&quot; href=&quot;Bioinfor/index.html&quot;&gt;Bio-Protocal&lt;/a&gt;          &lt;/li&gt;          &lt;li class=&quot;nav-item&quot;&gt;            &lt;a class=&quot;nav-link page-scroll&quot; href=&quot;LearnNotes/index.html&quot;&gt;Notes&lt;/a&gt;          &lt;/li&gt;          &lt;li class=&quot;nav-item&quot;&gt;            &lt;a class=&quot;nav-link page-scroll&quot; href=&quot;Blog/index.html&quot;&gt;Others&lt;/a&gt;          &lt;/li&gt;        &lt;/ul&gt;      &lt;/div&gt;    &lt;/div&gt;  &lt;/nav&gt;&lt;/header&gt;&lt;!-- Header Section End --&gt;&lt;!-- Blog Section --&gt;&lt;section id=&quot;blog&quot; class=&quot;section&quot;&gt;  &lt;!-- Container Starts --&gt;  &lt;div class=&quot;container&quot;&gt;    &lt;div class=&quot;section-header&quot;&gt;      &lt;h2 class=&quot;section-title&quot;&gt;Why am i running this blog&lt;/h2&gt;&lt;br&gt;      &lt;span&gt;Karobben&lt;/span&gt;      &lt;p class=&quot;section-subtitle&quot; style=&quot;font-size: 15px;line-height:25px&quot; &gt;        &lt;a href=&quot;Others/Whyblog.html&quot; title=&quot;click to see full story&quot;&gt;Why do I start a blog?&lt;/a&gt;&lt;br&gt;        At first, I just wanted  to write an &lt;i&gt;html&lt;/i&gt; report.&lt;br&gt;        Soon, I found it interesting!&lt;br&gt;        So, I&apos;d like to continue to write something to help people.&lt;br&gt;        &lt;br&gt;        Currently, most of my posts are related to &lt;i&gt;ggplot&lt;/i&gt;.&lt;br&gt;        Click on the img &quot;R&quot; or title &quot;R&quot; below to have more information.&lt;br&gt;      &lt;/p&gt;    &lt;/div&gt;    &lt;div class=&quot;row&quot;&gt;      &lt;!-- Python - Blog Item Starts --&gt;      &lt;div class=&quot;col-lg-4 col-md-6 col-xs-12 blog-item&quot;&gt;        &lt;div class=&quot;blog-item-wrapper&quot;&gt;          &lt;table&gt;            &lt;tr&gt;              &lt;td&gt;                &lt;div class=&quot;blog-item-img&quot;&gt;                  &lt;a href=&quot;Python/index.html&quot;&gt;                    &lt;img  src=&quot;Home/img/python.png&quot; alt=&quot;&quot; &gt;                  &lt;/a&gt;                &lt;/div&gt;              &lt;/td&gt;               &lt;td  align=&apos;left&apos; style=&apos;width:100pt;height: 100%;&apos;&gt;                  &lt;div class=&quot;blog-item-text&quot;&gt;                  &lt;h3&gt;&lt;a href=&quot;Python/index.html&quot;&gt;Python&lt;/a&gt;&lt;/h3&gt;                  &lt;div class=&quot;date&quot;&gt;21 Jan 2020&lt;/div&gt;                  &lt;div class=&quot;meta-tags&quot;&gt;                    &lt;span&gt;&lt;a href=&quot;https://www.yuque.com/liuwenkan/python&quot;&gt;Yuque&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;/Python/urwid.html&quot;&gt;urwid&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;/Python/Crawler.html&quot;&gt;crawler&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                  &lt;/div&gt;                  &lt;/div&gt;                &lt;/td&gt;              &lt;/tr&gt;            &lt;/table&gt;          &lt;/div&gt;        &lt;!-- Blog Item Wrapper Ends--&gt;      &lt;/div&gt;      &lt;!-- R Blog Item Starts --&gt;      &lt;div class=&quot;col-lg-4 col-md-6 col-xs-12 blog-item&quot;&gt;        &lt;div class=&quot;blog-item-wrapper&quot;&gt;          &lt;table&gt;            &lt;tr&gt;              &lt;td&gt;                &lt;div class=&quot;blog-item-img&quot;&gt;                  &lt;a href=&quot;R/R-index.html&quot;&gt;                    &lt;img  src=&quot;Home/img/R.png&quot; alt=&quot;&quot; &gt;                  &lt;/a&gt;                &lt;/div&gt;              &lt;/td&gt;               &lt;td  align=&apos;left&apos; style=&apos;width:100pt;height: 100%;&apos;&gt;                  &lt;div class=&quot;blog-item-text&quot;&gt;                  &lt;h3&gt;&lt;a href=&quot;R/R-index.html&quot;&gt;R&lt;/a&gt;&lt;/h3&gt;                  &lt;div class=&quot;date&quot;&gt;21 Jan 2020&lt;/div&gt;                  &lt;div class=&quot;meta-tags&quot;&gt;                    &lt;span&gt;&lt;a href=&quot;R/R-gitgg.html&quot;&gt;gitlist&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;R/GGplot.html&quot;&gt;ggplot&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;R/GGmap_polygon.html&quot;&gt;Maps&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                  &lt;/div&gt;                  &lt;/div&gt;                &lt;/td&gt;              &lt;/tr&gt;            &lt;/table&gt;          &lt;/div&gt;        &lt;!-- Blog Item Wrapper Ends--&gt;      &lt;/div&gt;      &lt;!-- Bash Blog Item Starts --&gt;      &lt;div class=&quot;col-lg-4 col-md-6 col-xs-12 blog-item&quot;&gt;        &lt;div class=&quot;blog-item-wrapper&quot;&gt;          &lt;table&gt;            &lt;tr&gt;              &lt;td&gt;                &lt;div class=&quot;blog-item-img&quot;&gt;                  &lt;a href=&quot;Linux/index.html&quot;&gt;                    &lt;img  src=&quot;Home/img/bash.png&quot; alt=&quot;&quot; &gt;                  &lt;/a&gt;                &lt;/div&gt;              &lt;/td&gt;              &lt;td  align=&apos;left&apos; style=&apos;width:100pt;&apos;&gt;                &lt;div class=&quot;blog-item-text&quot;&gt;                &lt;h3&gt;&lt;a href=&quot;Linux/index.html&quot;&gt;Linux&lt;/a&gt;&lt;/h3&gt;                &lt;div class=&quot;date&quot;&gt;21 Jan 2020&lt;/div&gt;                &lt;div class=&quot;meta-tags&quot;&gt;                  &lt;span&gt;&lt;a href=&quot;Linux/grep.html&quot;&gt;grep&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                  &lt;span&gt;&lt;a href=&quot;Linux/sed.html&quot;&gt;sed&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                  &lt;span&gt;&lt;a href=&quot;Linux/awk.html&quot;&gt;awk&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                &lt;/div&gt;                &lt;/div&gt;              &lt;/td&gt;              &lt;/tr&gt;            &lt;/table&gt;          &lt;/div&gt;        &lt;!-- Blog Item Wrapper Ends--&gt;      &lt;/div&gt;      &lt;!-- Notes Blog Item Starts --&gt;      &lt;div class=&quot;col-lg-4 col-md-6 col-xs-12 blog-item&quot;&gt;        &lt;div class=&quot;blog-item-wrapper&quot;&gt;          &lt;table&gt;            &lt;tr&gt;              &lt;td&gt;                &lt;div class=&quot;blog-item-img&quot;&gt;                  &lt;a href=&quot;LearnNotes/index.html&quot;&gt;                    &lt;img  src=&quot;Home/img/notebooks.png&quot; alt=&quot;&quot; &gt;                  &lt;/a&gt;                &lt;/div&gt;              &lt;/td&gt;               &lt;td  align=&apos;left&apos; style=&apos;width:100pt;&apos;&gt;                  &lt;div class=&quot;blog-item-text&quot;&gt;                  &lt;h3&gt;&lt;a href=&quot;LearnNotes/index.html&quot;&gt;Notes&lt;/a&gt;&lt;/h3&gt;                  &lt;div class=&quot;date&quot;&gt;21 Jan 2020&lt;/div&gt;                  &lt;div class=&quot;meta-tags&quot;&gt;                    &lt;span&gt;&lt;a href=&quot;LearnNotes/Super-Conductor.html&quot;&gt;Super Conductor&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;LearnNotes/Eng.html&quot;&gt;English Sentences&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;#&quot;&gt; &lt;/a&gt;&lt;/span&gt;&lt;br&gt;                  &lt;/div&gt;                  &lt;/div&gt;                &lt;/td&gt;              &lt;/tr&gt;            &lt;/table&gt;          &lt;/div&gt;        &lt;!-- Blog Item Wrapper Ends--&gt;      &lt;/div&gt;      &lt;!-- Protocols Blog Item Starts --&gt;      &lt;div class=&quot;col-lg-4 col-md-6 col-xs-12 blog-item&quot;&gt;        &lt;div class=&quot;blog-item-wrapper&quot;&gt;          &lt;table&gt;            &lt;tr&gt;              &lt;td&gt;                &lt;div class=&quot;blog-item-img&quot;&gt;                  &lt;a href=&quot;Bioinfor/index.html&quot;&gt;                    &lt;img  src=&quot;Home/img/protocol.png&quot; alt=&quot;&quot; &gt;                  &lt;/a&gt;                &lt;/div&gt;              &lt;/td&gt;               &lt;td  align=&apos;left&apos; style=&apos;width:100pt;&apos;&gt;                  &lt;div class=&quot;blog-item-text&quot;&gt;                  &lt;h3&gt;&lt;a href=&quot;Bioinfor/index.html&quot;&gt;Bio-Protocols&lt;/a&gt;&lt;/h3&gt;                  &lt;div class=&quot;date&quot;&gt;21 Jan 2020&lt;/div&gt;                  &lt;div class=&quot;meta-tags&quot;&gt;                    &lt;span&gt;&lt;a href=&quot;Bioinfor/RNA-seq-with-Trinity.html&quot;&gt;RNA-seq&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;Bioinfor/Denove-Prokaryotic-Genome-with-Spader.html&quot;&gt;Prokaryotic Genome&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                  &lt;/div&gt;                  &lt;/div&gt;                &lt;/td&gt;              &lt;/tr&gt;            &lt;/table&gt;          &lt;/div&gt;        &lt;!-- Blog Item Wrapper Ends--&gt;      &lt;/div&gt;      &lt;!-- Others Blog Item Starts --&gt;      &lt;div class=&quot;col-lg-4 col-md-6 col-xs-12 blog-item&quot;&gt;        &lt;div class=&quot;blog-item-wrapper&quot;&gt;          &lt;table&gt;            &lt;tr&gt;              &lt;td&gt;                &lt;div class=&quot;blog-item-img&quot;&gt;                  &lt;a href=&quot;Blog/index.html&quot;&gt;                    &lt;img  src=&quot;Home/img/share.png&quot; alt=&quot;&quot; &gt;                  &lt;/a&gt;                &lt;/div&gt;              &lt;/td&gt;               &lt;td align=&apos;left&apos; style=&apos;width:100pt;&apos;&gt;                  &lt;div class=&quot;blog-item-text&quot;&gt;                  &lt;h3&gt;&lt;a href=&quot;Blog/index.html&quot;&gt;Others&lt;/a&gt;&lt;/h3&gt;                  &lt;div class=&quot;date&quot;&gt;21 Jan 2020&lt;/div&gt;                  &lt;div class=&quot;meta-tags&quot;&gt;                    &lt;span&gt;&lt;a href=&quot;#&quot;&gt;Why Blog&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;#&quot;&gt;Epidemic 2019&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;Linux/Deepin_scrcpy.html&quot;&gt;Scrcpy install&lt;/a&gt;&lt;/span&gt;&lt;br&gt;                    &lt;span&gt;&lt;a href=&quot;#&quot;&gt; &lt;/a&gt;&lt;/span&gt;&lt;br&gt;                  &lt;/div&gt;                  &lt;/div&gt;                &lt;/td&gt;              &lt;/tr&gt;            &lt;/table&gt;          &lt;/div&gt;        &lt;!-- Blog Item Wrapper Ends--&gt;      &lt;/div&gt;      &lt;pre  class=&apos;code&apos; style=&quot;height: 300px;margin:auto;&quot;&gt;        &lt;b style=&quot;font-size: 40px;&quot;&gt;&lt;/b&gt;        &lt;code&gt;        &lt;/code&gt;      &lt;/pre&gt;    &lt;/div&gt;  &lt;/div&gt;&lt;/section&gt;&lt;!-- blog Section End --&gt;&lt;!-- Footer Section Start --&gt;  &lt;!-- Copyright Start  --&gt;  &lt;div id=&quot;copyright&quot;&gt;    &lt;div class=&quot;container&quot;&gt;      &lt;div class=&quot;row&quot;&gt;        &lt;div class=&quot;col-md-12&quot;&gt;          &lt;div class=&quot;site-info float-left&quot;&gt;            &lt;li&gt;Karobben  2020&lt;/li&gt;          &lt;/div&gt;          &lt;div class=&quot;float-right&quot;&gt;            &lt;li&gt;contack me: &lt;a href=&quot;mailto:a591465908@outlook.com&quot;&gt;a591465908@outlook.com&lt;/a&gt; &lt;/li&gt;          &lt;/div&gt;          &lt;li align = &quot;center&quot;&gt;            &lt;script async src=&quot;//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js&quot;&gt;&lt;/script&gt;            &lt;span id=&quot;busuanzi_container_site_pv&quot;&gt;~&lt;span id=&quot;busuanzi_value_site_pv&quot;&gt;&lt;/span&gt;~&lt;/span&gt;          &lt;/span&gt;          &lt;/li&gt;        &lt;/div&gt;      &lt;/div&gt;    &lt;/div&gt;  &lt;/div&gt;  &lt;!-- Copyright End --&gt;&lt;/footer&gt;&lt;!-- Footer Section End --&gt;&lt;!-- Go To Top Link --&gt;&lt;a href=&quot;#&quot; class=&quot;back-to-top&quot;&gt;  &lt;i class=&quot;lni-arrow-up&quot;&gt;&lt;/i&gt;&lt;/a&gt;&lt;div id=&quot;loader&quot;&gt;  &lt;div class=&quot;spinner&quot;&gt;    &lt;div class=&quot;double-bounce1&quot;&gt;&lt;/div&gt;    &lt;div class=&quot;double-bounce2&quot;&gt;&lt;/div&gt;  &lt;/div&gt;&lt;/div&gt;&lt;!-- jQuery first, then Tether, then Bootstrap JS. --&gt;</code></pre>  </body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Bioconda</title>
      <link href="/Bioinfor/Bioconda.html"/>
      <url>/Bioinfor/Bioconda.html</url>
      
        <content type="html"><![CDATA[<h1 id="Bioconda"><a href="#Bioconda" class="headerlink" title="Bioconda"></a>Bioconda</h1><h1 id="1-Install"><a href="#1-Install" class="headerlink" title="1. Install"></a>1. Install</h1><p>Location: <a href="https://bioconda.github.io/user/install.html" target="_blank" rel="noopener">link</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh</span><br><span class="line">sh Miniconda3-latest-Linux-x86_64.sh</span><br></pre></td></tr></table></figure></div><h1 id="2-Setup-Channels"><a href="#2-Setup-Channels" class="headerlink" title="2. Setup Channels"></a>2. Setup Channels</h1><p>You may need to add the bin file in your environment</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">conda config --add channels defaults</span><br><span class="line">conda config --add channels bioconda</span><br><span class="line">conda config --add channels conda-forge</span><br></pre></td></tr></table></figure></div><h1 id="Virtual-Environment"><a href="#Virtual-Environment" class="headerlink" title="Virtual Environment"></a>Virtual Environment</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Create an environment</span><br><span class="line">conda create -n Biostation python&#x3D;3.7</span><br><span class="line"></span><br><span class="line"># Check the env list</span><br><span class="line">conda env list</span><br><span class="line"></span><br><span class="line"># 激活工作环境，需要几十秒</span><br><span class="line">source activate Biostation</span><br><span class="line">#or</span><br><span class="line">conda activate Biostation</span><br><span class="line"></span><br><span class="line"># 关闭工作环境：不用时关闭，不然你其它程序可能会出错</span><br><span class="line">source deactivate</span><br><span class="line"># Or</span><br><span class="line">conda deactivate</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Calcium Competent Cells</title>
      <link href="/Bioinfor/Competent_c.html"/>
      <url>/Bioinfor/Competent_c.html</url>
      
        <content type="html"><![CDATA[<h1 id="Making-Calcium-Competent-Cells"><a href="#Making-Calcium-Competent-Cells" class="headerlink" title="Making Calcium Competent Cells"></a>Making Calcium Competent Cells</h1><pre class="mermaid">graph TBDH5((DH5α))LB_p(LB plate)LB_l(LB starter)LB(LB 1 L)Centrifuge2(Centrifuge)ice(ice bath 20-30 minutes)ice2(ice bath 20 minutes)Ca(CaCl2)CaCl2(85 mM CaCl2, 15% glycero)Eptube(1.5 ml Ep tube )     subgraph Day 1     DH5-->|Streak & over night|LB_p     end     subgraph Day 2     LB_p-->|over night| LB_l     end     subgraph Day 3     LB_l-->|10 ml 37C|LB     LB-->|OD600 reaches 0.35-0.4|ice     ice-->|Harvest: 3000g, 15 min, 4C|Centrifuge     Centrifuge-->|Decant the supernatant|pellet     MgCl2-->|100 mL resuspend|pellet     pellet-->|Harvest: 2000g, 15 min, 4C|Centrifuge2     Centrifuge2-->|Decant the supernatant|pellet2     Ca-->|100 mL resuspend|pellet2     pellet2-->ice2     ice2 --> |Harvest: 2000g, 15 min, 4C|Centrifuge3     Centrifuge3-->|Decant the supernatant|pellet3     CaCl2-->|50 mL resuspend|pellet3     pellet3-->|Harvest: 1000g, 15 min, 4C,Decant the supernatant|pellet4     CaCl2-->|2 ml|pellet4     pellet4-->|OD600|200-250     200-250-->|Aliquot 50 μL|Eptube     Eptube-->|liquid nitrogen to -80C|Store     end</pre><p>Preparing for Day 2:</p><p><strong>Chill overnight at 4°C</strong>:<br>100 mM CaCl2<br>100 mM MgCl2<br>85 mM CaCl2, 15% gly  cerol v/v<br>Centrifuge rotor  </p><h1 id="Day-1"><a href="#Day-1" class="headerlink" title="Day 1"></a>Day 1</h1><ol><li>Streak out frozen glycerol stock of bacterial cells (Top10, DH5α, etc.) onto an LB plate (<span style="background:salmon">no antibiotics since these cells do not have a plasmid in them</span>). Work sterile. Grow plate overnight at 37°C.</li></ol><h1 id="Day-2"><a href="#Day-2" class="headerlink" title="Day 2"></a>Day 2</h1><ol><li><p><strong>Autoclave</strong>:<br>1 L LB (or your preferred media)<br>1 L of 100 mM CaCl2<br>1 L of 100 mM MgCl2<br>100 mL of 85 mM CaCl2, 15% glycerol v/v<br>4 centrifuge bottles and caps<br>Lots of microfuge tubes</p></li><li><p><strong>Chill overnight at 4°C</strong>:<br>100 mM CaCl2<br>100 mM MgCl2<br>85 mM CaCl2, 15% glycerol v/v<br>Centrifuge rotor</p></li><li><p>Prepare starter culture of cells<br>Select a single colony of E. coli from fresh LB plate and inoculate a 10 mL starter culture of LB (or your preferred media – no antibiotics). Grow culture at 37°C in shaker overnight.</p></li></ol><p>Notes:<br>• You will have extra CaCl2 and MgCl2. These solutions can be saved and reautoclaved for the next time you make competent cells.<br>• You can also substitute other media like SOB, 2xYT, etc. for the LB if you prefer.<br>• All glassware should be detergent free. Presence of detergent reduces<br>competency of cells.</p><h1 id="Day-3"><a href="#Day-3" class="headerlink" title="Day 3"></a>Day 3</h1><ol><li><p>Inoculate 1 L of LB media with 10 mL starter culture and grow in 37°C shaker. Measure the OD600 every hour, then every 15-20 minutes when the OD gets above 0.2.</p></li><li><p>When the OD600 reaches 0.35-0.4, immediately put the cells on ice. Chill the culture for 20-30 minutes, swirling occasionally to ensure even cooling. Place centrifuge bottles on ice at this time.</p><p> <span style="background:salmon"><strong>IMPORTANT NOTES</strong></span>:<br> • It is important not to let the OD get any higher than 0.4. The OD should be carefully monitored and checked often, especially when it gets above 0.2, as the cells grow exponentially. It usually takes about 3 hours to reach an OD of 0.35 when using a 10 mL starter culture.<br> • It is also very important to keep the cells at 4°C for the remainder of the procedure. The cells, and any bottles or solutions that they come in contact with, must be pre-chilled to 4°C.</p></li><li><p>(Spin #1) Split the 1 L culture into four parts by pouring about 250 mL into ice cold centrifuge bottles. Harvest the cells by centrifugation at 3000g (~4000 rpm in the Beckman JA-10 rotor) for 15 minutes at 4°C.</p></li><li><p>Decant the supernatant and gently resuspend each pellet in about 100 mL of ice cold MgCl2. Combine all suspensions into one centrifuge bottle. Make sure to prepare a blank bottle as a balance.</p></li><li><p>(Spin #2) Harvest the cells by centrifugation at 2000g (~3000 rpm in the Beckman JA-10 rotor) for 15 minutes at 4°C.</p></li><li><p>Decant the supernatant and resuspend the pellet in about 200 mL of ice cold CaCl2. Keep this suspension on ice for at least 20 minutes. Start putting 1.5 mL microfuge tubes on ice if not already chilled.</p></li><li><p>(Spin #3) Harvest the cells by centrifugation at 2000g (~3000 rpm in the Beckman JA-10 rotor) for 15 minutes at 4°C. At this step, rinse a 50 mL conical tube with ddH2O and chill on ice.</p></li><li><p>Decant the supernatant and resuspend the pellet in ~50 mL of ice cold 85 mM CaCl2, 15% glycerol. Transfer the suspension to the 50 mL conical tube.</p></li><li><p>(Spin #4) Harvest the cells by centrifugation at 1000g (~2100 rpm in the Beckman GH-3.8 rotor) for 15 minutes at 4°C.</p></li><li><p>Decant the supernatant and resuspend the pellet in 2 mL of ice cold 85 mM CaCl2, 15% glycerol. The final OD600 of the suspended cells should be ~ 200-250.</p></li><li><p>Aliquot 50 μL into sterile 1.5 mL microfuge tubes and snap freeze with liquid nitrogen. Store frozen cells in the -80°C freezer.</p></li></ol><hr><p>Advocation:</p><p>This protocol belongs to <a href="http://mcb.berkeley.edu/labs/krantz/protocols/calcium_comp_cells.pdf" target="_blank" rel="noopener">berkeley.edu 2008</a>. I just gently reset part of the sentences.<br>If there are any offensive behaviors, please contact <a mailto="a591465908@outlook.com">me</a> and I’ll delete it</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Index of Bio-Database</title>
      <link href="/Bioinfor/BioDB.html"/>
      <url>/Bioinfor/BioDB.html</url>
      
        <content type="html"><![CDATA[<h1>Index of Bio-Database</h1><h1>综合数据库</h1><ol><li><p><a href="http://www.insdc.org/" target="_blank" rel="noopener">International Nucleotide Sequence Databank</a> (Update:06/06/20; 1.022914s)</p><ul><li>INSD (国际核酸序列数据库）</li><li>DDBJ(日) + EMBL(欧) + GenBank(美)</li></ul></li><li><p><a href="http://www.ncbi.nlm.nih.gov/Web/Genbank/" target="_blank" rel="noopener">GenBank</a> (Update:06/06/20; 4.43913s)</p><ul><li>美国国家生物技术信息中心（NCBI）所维护的供公众自由读取的、带注释的DNA序列的总数据库。</li></ul></li><li><p><a href="http://www.ebi.ac.uk/embl.html" target="_blank" rel="noopener">EMBL</a> (Update:06/06/20; 1.129585s)</p><ul><li>欧洲分子生物学实验室的DNA和RNA 序列库。</li></ul></li><li><p><a href="http://www.ddbj.nig.ac.jp/" target="_blank" rel="noopener">DNA Databank of Japan</a> (Update:06/06/20; 0.163173s)</p><ul><li>DDBJ, 日本核酸数据库</li></ul></li><li><p><a href="http://www.ncgr.org/gsdb/" target="_blank" rel="noopener">Genome Sequence DataBase</a> (Update:06/06/20; OutOfTime)</p><ul><li>GSDB, 由美国国家基因组资源中心（NCGR）维护的DNA序列关系数据库</li></ul></li><li><p><a href="http://www.tigr.org/tdb/hcd/overview.html" target="_blank" rel="noopener">TIGR DATAbase</a> (Update:06/06/20; OutOfTime)</p><ul><li>是世界上最大的cDNA数据库，还有大量的EST序列和人类基因索引（HGI）。</li></ul></li></ol><h1>DNA Sequence Database</h1><p>包括与DNA的复制、转录、修复等有密切关系的蛋白质因子。</p><p><a href="http://www.biosino.org/" target="_blank" rel="noopener">BioSino</a> (Update:06/06/20; 4.282226s) – 中国自主开发的核酸序列公共数据库。</p><p><a href="http://www.kazusa.or.jp/codon/" target="_blank" rel="noopener">CUTG</a> (Update:06/06/20; 0.308161s) – Codon Usage, MM子使用频度表。</p><p><a href="https://epd.epfl.ch//index.php" target="_blank" rel="noopener">EPD</a>  (123) – Eukaryotic Promotor Database, 真核生物启动子数据库</p><p><a href="http://gene-regulation.com/pub/databases.html" target="_blank" rel="noopener">TRANSFAC</a> (Update:06/06/20; 5.599736s) – <b title="TRANSFAC® provides data on eukaryotic transcription factors, their experimentally-proven binding sites, consensus binding sequences (positional weight matrices) and regulated genes. TRANSCompel contains data on eukaryotic transcription factors experimentally proven to act together in a synergistic or antagonistic manner.">eukaryotic transcription factors, 真核生物基因表达调控因子的数据库</b></p><p><a href="http://wwwmgs.bionet.nsc.ru/mgs/gnw/trrd/" target="_blank" rel="noopener">TRRD</a> (Update:06/06/20; 0.817254s) – <b title="TRRD is a unique information resource, accumulating information on structural and functional organization of transcription regulatory regions of eukaryotic genes. Only experimentally confirmed information is included into TRRD."> transcription regulatory regions of eukaryotic genes, 真核生物基因组转录调控区数据库。</b></p><p><a href="http://www.ifti.org/" target="_blank" rel="noopener">OOTFD</a> (Update:06/06/20; 11.796405s) – <b title ="MIRAGE (Molecular Informatics Resource for the Analysis of Gene Expression) is a web site dedicated to methodologies, tools, and technologies relating to gene expression information. MIRAGE is a web resource of the Institute for Transcriptional Informatics. Buttons to the right link to IFTI sequence analysis and database services. Buttons in the lower frame offer links to other resources in the area of gene expression and regulation. For information on bioinformatics products using IFTI materials, please visit the Products page. For questions and comments regarding this web resource, please send a message to IFTI.  ">Molecular Informatics Resource for the Analysis of Gene Expression, 转录因子和基因表达数据库</b></p><p><a href="http://www.girinst.org/server/repbase.html" target="_blank" rel="noopener">RepBase</a> (Update:06/06/20; 6.943897s) – <b title="Repbase Update is an Electronic Journal established in 1997 by Genetic Information Research Institute with partial grant support from the NIH (grant 1 P41 LM062252), and it is based on our previous work (Jurka et al., 1992; Jurka, 1993, 1994, 1995, NCBI Repository) which originated thanks to the support from the Department of Energy. The new format is designed to institutionalize this publication, in order to provide an uninterrupted supply of quality information to the genome sequencing communities.Our goal is to collect, review and systematically organize representative examples or consensus sequences of repetitive elements from all eukaryotic species. Currently, Repbase Update is being updated several times a year based on cumulative submissions from individual researchers. Many entries represent original information not published anywhere else. The sequence data and other information is organized in a computer-readable format.">sequences of repetitive elements from all eukaryotic species, 真核生物DNA中重复序列数据库</b></p><p><a href="https://academic.oup.com/nar/article/48/D1/D155/5584837" target="_blank" rel="noopener">MicroSatellite (paper)</a> (Update:06/06/20; OutOfTime) – 微衛星片段數據</p><ul><li><a href="http://minisatellites.u-psud.fr" target="_blank" rel="noopener">MTRD: Microorganism Tandem Repeats Database</a> (Update:06/06/20; 3.29666s)</li><li><a href="http://veenuash.info/web1/index.html" target="_blank" rel="noopener">UgMSD: UgMicro SatDb</a> (Update:06/06/20; 4.966076s)</li><li><a href="http://marker.kazusa.or.jp/" target="_blank" rel="noopener">KMD: Kazusa Marker Database</a> (Update:06/06/20; 2.40133s)</li><li><a href="http://www.sesame-bioinfo.org/PMDBase/index.html" target="_blank" rel="noopener">PMDBase: Plant Microsatellite DNAs Database</a> (Update:06/06/20; OutOfTime)</li><li><a href="https://tandem.bu.edu/cgi-bin/trdb/trdb.exe" target="_blank" rel="noopener">TRDB: Tandem Repeats Database</a> (Update:06/06/20; 12.875825s)</li><li><a href="http://mail.nbfgr.res.in/fishmicrosat/" target="_blank" rel="noopener">FMS: FishMicro Sat</a> (Update:06/06/20; OutOfTime)</li><li><a href="http://www.mcr.org.in/micas/" target="_blank" rel="noopener">MICAS</a> (Update:06/06/20; 4.741937s)</li><li><a href="http://www.veenuash.info/" target="_blank" rel="noopener">EMSDb (EuMicroSat Db)</a> (Update:06/06/20; 7.845543s)</li><li><a href="http://mggm-lab.easyomics.org/" target="_blank" rel="noopener">SSRome</a> (Update:06/06/20; 4.832473s)</li><li><a href="https://data.ccmb.res.in/msdb" target="_blank" rel="noopener">MSDB: MicroSatellite DataBase</a> (Update:06/06/20; 0.293712s)</li></ul><p><a href="http://www.ncbi.nlm.nih.gov/dbSTS/" target="_blank" rel="noopener">dbSTS</a> (Update:06/06/20; 1.178256s) – Sequence Tagged Sites, 序列标记位点数据库。</p><p><a href="http://www.ncbi.nlm.nih.gov/dbEST/" target="_blank" rel="noopener">dbEST</a> (Update:06/06/20; OutOfTime) – 这是GenBank的重要组成部分,它包含若干物种的已表达的序列标记信息.</p><p><a href="ftp://ftp.ebi.ac.uk/pub/databases/nucleosomal_dna/">NUCLEOSOME</a> – 数据库,收集实验测定的核小体数据,用于预测DNA中与组蛋白八聚体结合的位点.</p><p>RNA序列和核糖体数据库:</p><p><a href="http://www.callisto.si.usherb.ca/~jpperra/" target="_blank" rel="noopener">l 类病毒和类病毒样RNA数据库</a> (123)<br>★UTRdb和UTRsite。UTRdb是真核生物mRNA的5’端和3’端非翻译区序列的非冗余数据库，UTRsite搜集这些非翻译区序列中的功能片段。<br><a href="http://bigarea.area.ba.cnr.it:8000/EmbIT/UTRHome/" target="_blank" rel="noopener">UTRdb</a> (Update:06/06/20; OutOfTime)<br>★ncRNA,似mRNA的非编码RNA数据库。<br><a href="http://www.man.poznan.pl/5Sdata/ncRNA/index.html" target="_blank" rel="noopener">http://www.man.poznan.pl/5Sdata/ncRNA/index.html</a><br>★RNAmods,RNA修饰数据库。<br><a href="http://www-medlib.med.utah.edu/RNAmods/RNAmods.html" target="_blank" rel="noopener">http://www-medlib.med.utah.edu/RNAmods/RNAmods.html</a><br><a href="ftp://medlib.med.utah.edu/library/RNAmods">ftp://medlib.med.utah.edu/library/RNAmods</a><br>★AARSDB,酰氨基tRNA合成酶数据库。<br><a href="http://rose.man.poznan.pl/aars/index.html" target="_blank" rel="noopener">http://rose.man.poznan.pl/aars/index.html</a><br>★tRNA序列和基因、结构与功能数据库。<br><a href="http://www.uni-bayreuth.de/departments/biochemie/trna/" target="_blank" rel="noopener">http://www.uni-bayreuth.de/departments/biochemie/trna/</a><br>★PLMItRNA基于FastA的绿色植物线粒体tRNA分子和tRNA基因的数据库。<br><a href="http://www.ebi.ac.uk/services/" target="_blank" rel="noopener">http://www.ebi.ac.uk/services/</a><br>★16SMDB、16S-likeMDB 、16SMDBexp 、23SMDB、 23S-likeMDBexp数据库，是一批16S和23S核糖体RNA突变数据库。<br><a href="http://www.fandm.edu/departments/biology/databasee/rna.html" target="_blank" rel="noopener">http://www.fandm.edu/departments/biology/databasee/rna.html</a><br><a href="ftp://acad.fandm.edu/nar/">ftp://acad.fandm.edu/nar/</a><br>★RNA www,RNA二级结构网页，也有16S RNA和23S RNA的数据。<br><a href="http://pundit.colorado.edu:8080/RNA/" target="_blank" rel="noopener">http://pundit.colorado.edu:8080/RNA/</a><br>★uRNADB,已经联配好的、加有注释的、按亲缘关系排列的uRNA序列数据。<br><a href="http://psyche.uthct.edu/dbs/uRNADB/uRNADB.html" target="_blank" rel="noopener">http://psyche.uthct.edu/dbs/uRNADB/uRNADB.html</a><br>★U-insertion/deletion,编辑序列数据库，包含5个无脊椎动质体目物种的线粒体基因和编辑后的mRNA序列。<br><a href="http://www.lifesci.ucla.edu/RNA/trypanosome/database.html" target="_blank" rel="noopener">http://www.lifesci.ucla.edu/RNA/trypanosome/database.html</a><br>★PseudoBase,假扭结数据库。<br><a href="http://www.bio.leidenuniv.nl/~Batenburg/PKB.html" target="_blank" rel="noopener">http://www.bio.leidenuniv.nl/~Batenburg/PKB.html</a><br>★RDP,核糖体数据库计划。包含小亚基和大亚基的两部分rRNA,由已联配的RNA序列以及亲缘树组成。<br><a href="http://www.cme.smu.edu/RDP/" target="_blank" rel="noopener">http://www.cme.smu.edu/RDP/</a><br><a href="http://rdpwww.life.uiuc.edu/" target="_blank" rel="noopener">http://rdpwww.life.uiuc.edu/</a><br><a href="http://rdp.life.uiuc.edu/pub/" target="_blank" rel="noopener">http://rdp.life.uiuc.edu/pub/</a><br>★SSU rRNA欧洲核糖体小亚基RNA结构数据库。<br><a href="http://rrna.uia.ac.be/ssu/" target="_blank" rel="noopener">http://rrna.uia.ac.be/ssu/</a><br>★LSU rRNA欧洲核糖体大亚基RNA结构数据库。<br><a href="http://rrna.uia.ac.be/lsu/" target="_blank" rel="noopener">http://rrna.uia.ac.be/lsu/</a><br>★5S rRNA数据库。<br><a href="http://rose.man.poznan.pl/5Sdata/index.html" target="_blank" rel="noopener">http://rose.man.poznan.pl/5Sdata/index.html</a><br>★DRC,核糖体交链数据库。<br><a href="http://www.mpimg-berlin-dahlem.mpg.de/~ag_ribo/ag_brimacombe/drc/" target="_blank" rel="noopener">http://www.mpimg-berlin-dahlem.mpg.de/~ag_ribo/ag_brimacombe/drc/</a><br>★ACTIVITY,DNA和RNA中功能位点数据库。<br><a href="http://www.mgs.bionet.nsu.ru/systems/Activity/" target="_blank" rel="noopener">http://www.mgs.bionet.nsu.ru/systems/Activity/</a><br>★RNA非正则配对数据库。<br><a href="http://prion.bchs.uh.edu/bp_type/" target="_blank" rel="noopener">http://prion.bchs.uh.edu/bp_type/</a></p><p>基因图谱数据库:</p><p>★Rhdb,辐射杂交数据库。<br><a href="http://www.ebi.ac.uk/RHdb" target="_blank" rel="noopener">http://www.ebi.ac.uk/RHdb</a><br><a href="http://corbra.ebi.ac.uk/Rhdb/species/HUMAN/gm99.html" target="_blank" rel="noopener">http://corbra.ebi.ac.uk/Rhdb/species/HUMAN/gm99.html</a><br><a href="ftp://ftp.ebi.ac.uk/pub/databases/RHdb">ftp://ftp.ebi.ac.uk/pub/databases/RHdb</a></p><p>★Mouse RH数据库。<br><a href="http://www-genome.wi.mit.edu/mouse_rh/" target="_blank" rel="noopener">http://www-genome.wi.mit.edu/mouse_rh/</a></p><p>★GDB,人类基因组数据库。<br><a href="http://www.gdb.org/" target="_blank" rel="noopener">http://www.gdb.org/</a><br><a href="ftp://ftp.gdb.org">ftp://ftp.gdb.org</a></p><p>★GeneMap’99,人类基因图谱1999年版。<br><a href="http://www.ncbi.nih.gov/genemap/" target="_blank" rel="noopener">http://www.ncbi.nih.gov/genemap/</a></p><p>★HuGeMap,人类基因遗传图谱和物理图谱的分布式集成数据库。<br><a href="ftp://ftp.ebi.ac.uk/pub/databases/RHdb/gm99.map">ftp://ftp.ebi.ac.uk/pub/databases/RHdb/gm99.map</a></p><p>人类基因组测序中心:<br>★HUGO是人类基因组组织的缩写。<br><a href="http://hugo.gdb.org/" target="_blank" rel="noopener">http://hugo.gdb.org/</a></p><p>★HUGO Pacific GENOME Newsletter 是HUGO在太平洋部分，其中反映中国情况的短文在：<br><a href="http://hugo-pacific.genome.ac.jp/3_2contents/china.html" target="_blank" rel="noopener">http://hugo-pacific.genome.ac.jp/3_2contents/china.html</a></p><p>★美国能源部支持的人类基因组计划<br><a href="http://www.er.doe.gov/production/ober/hug_top.html" target="_blank" rel="noopener">http://www.er.doe.gov/production/ober/hug_top.html</a></p><p>★美国国家卫生署对人类基因组计划的支持，通过NHGRI即国家人类基因组研究所（National Human Genome Research Institute）体现。<br><a href="http://www.nhgri.nih.gov/" target="_blank" rel="noopener">http://www.nhgri.nih.gov/</a></p><p>★英国Wellcome Trust是人类基因组计划的另一个主要资助者。<br><a href="http://www.wellcome.ac.uk/" target="_blank" rel="noopener">http://www.wellcome.ac.uk/</a></p><p>★百慕大原则：测序的中间和最终结果都必须迅速的公开。<br><a href="http://www.gene.ucl.ac.uk/hugo/bermuda.html" target="_blank" rel="noopener">http://www.gene.ucl.ac.uk/hugo/bermuda.html</a></p><p>★世界上主要人类基因组测序中心的名单。<br><a href="http://www-hgc.lbl.gov/inf/Hgcenters.html" target="_blank" rel="noopener">http://www-hgc.lbl.gov/inf/Hgcenters.html</a></p><p><a href="http://www.ornl.gov/hgmis/centers.html" target="_blank" rel="noopener">http://www.ornl.gov/hgmis/centers.html</a></p><p>★NCBI的GenBank数据库从1999年10月起，建立了智人基因组子目录，其下按染色体编号设子目录。<br><a href="http://ncbi.nlm.nih.gov/genbank/genomes/H_sapiens/" target="_blank" rel="noopener">http://ncbi.nlm.nih.gov/genbank/genomes/H_sapiens/</a></p><p>★英国的Sanger中心的人类基因组计划网页，不仅有它们负责测序的染色体数据，还有到其他染色体数据的链接。<br><a href="http://www.sanger.ac.uk/HGP/" target="_blank" rel="noopener">http://www.sanger.ac.uk/HGP/</a><br>★日本的DDBJ和信息生物学中心（CIB）联合建立了一个Human Genomics Studio，可以按染色体编号检索和查找基因序列。<br><a href="http://studio.nig.ac.jp/" target="_blank" rel="noopener">http://studio.nig.ac.jp/</a></p><p>★ Sanger 中心是世界上最大的DAN测序中心之一。承担人类基因组计划的三分之一，集中在1、6、9、10、13、20、22和X。<br><a href="http://www.sanger.ac.uk/HGP/stats.html" target="_blank" rel="noopener">http://www.sanger.ac.uk/HGP/stats.html</a></p><p>★ LBNL，Lawrence Berkeley 国家实验室。<br><a href="http://www-hgc.lbl.gov/GenomeHome.html" target="_blank" rel="noopener">http://www-hgc.lbl.gov/GenomeHome.html</a></p><p>★LLNL，Lawrence Livermore 国家实验室。<br><a href="http://www-bio.llnl.gov/bbrp/genome/genome.html" target="_blank" rel="noopener">http://www-bio.llnl.gov/bbrp/genome/genome.html</a></p><p>★LANL，美国洛斯阿拉莫斯国家实验室。<br><a href="http://www-ls.lanl.gov/index.html" target="_blank" rel="noopener">http://www-ls.lanl.gov/index.html</a></p><p>★JGI，由美国能源部支持的，依托LBNL、LLNL和LANL三个国家实验室的人类基因组研究部门建的联合基因组研究所（Joint Genome Institute）。<br><a href="http://jgi.doe.gov/" target="_blank" rel="noopener">http://jgi.doe.gov/</a></p><p>★UWGC，华盛顿大学基因中心，是国际上最活跃的测序中心之一。<br><a href="http://www.genome.washington.edu/" target="_blank" rel="noopener">http://www.genome.washington.edu/</a></p><p><a href="ftp://ftp.genome.washington.edu/">ftp://ftp.genome.washington.edu/</a></p><p>★SHGC，斯坦福大学人类基因中心，主要做高分辨率辐射杂交图谱，以及人类第四号染色体BAC克隆的测序。<br><a href="http://www-shgc.stanford.edu/" target="_blank" rel="noopener">http://www-shgc.stanford.edu/</a></p><p>★DOGS，基因组尺寸数据库。<br><a href="http://www.cbs.dtu.dk" target="_blank" rel="noopener">http://www.cbs.dtu.dk</a></p><p>★GenBank的/genomes/子目录：<br><a href="ftp://ftp.cbi.pku.edu.cn/pub/databases/genband/genomes/">ftp://ftp.cbi.pku.edu.cn/pub/databases/genband/genomes/</a></p><p>★ EuGenes,真核生物基因综合知识库，目前包括果蝇、人、小鼠、拟南芥、线虫、酵母、和斑马鱼的数据。<br><a href="http://iubio.bio.indiana.edu/eugenes" target="_blank" rel="noopener">http://iubio.bio.indiana.edu/eugenes</a></p><p>原核生物基因组:<br>★细菌基因组计划的进展情况，可从以下网站查询：<br><a href="http://www.ncbi.nlm.nih.gov/PMGifs/Genomes/bact.html" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/PMGifs/Genomes/bact.html</a></p><p>★MOT ，欧洲生物信息研究所EBI的基因组测序进展表。<br><a href="http://www.ebi.ac.uk/~sterk/genome-MOT/" target="_blank" rel="noopener">http://www.ebi.ac.uk/~sterk/genome-MOT/</a></p><p>★GIB，日本DDBJ设立的Genome Information Broker for microbial genomes 的缩写。<br><a href="http://mol.genes.nig.ac.jp/gib/" target="_blank" rel="noopener">http://mol.genes.nig.ac.jp/gib/</a></p><p>★MAGPIE测序计划清单也可以参考。<br><a href="http://www-fp.mcs.anl.gov/~gaasterland/genomes.html" target="_blank" rel="noopener">http://www-fp.mcs.anl.gov/~gaasterland/genomes.html</a></p><p>★EMGLib,增补微生物基因组库。<br><a href="http://pbil.univ-lyon1.fr/emglib/emglib.html" target="_blank" rel="noopener">http://pbil.univ-lyon1.fr/emglib/emglib.html</a></p><p>★大肠杆菌K12菌株的完全基因组序列，可由GenBank的子目录/genomes/获取，或从华盛顿大学大肠杆菌基因组中心，即Blattner实验室的网页读取：<br><a href="http://www.genetics.wisc.edu/pub/sequence/" target="_blank" rel="noopener">http://www.genetics.wisc.edu/pub/sequence/</a></p><p>★ECDC,大肠杆菌菌株K12的基因序列库，包括基因、读框、调控区、启动子、终止子、tRNA和rRNA等。<br><a href="http://susi.bio.uni-giessen.de/ecdc/ecdc.html" target="_blank" rel="noopener">http://susi.bio.uni-giessen.de/ecdc/ecdc.html</a></p><p><a href="ftp://ftp.ebi.ac.uk/pub/databases/ecdc">ftp://ftp.ebi.ac.uk/pub/databases/ecdc</a></p><p>★EcoGene和EcoWeb,大肠杆菌K12菌株基因组数据库，包括基因、蛋白质、基因间蛋白质组信息。<br><a href="http://bmb.med.miami.edu/EcoGene/EcoWeb/" target="_blank" rel="noopener">http://bmb.med.miami.edu/EcoGene/EcoWeb/</a></p><p>★RegulonDB,大肠杆菌转录调控和操作子数据库。<br><a href="http://www.cifn.unam.mx/Computational_Biology/regulondb/" target="_blank" rel="noopener">http://www.cifn.unam.mx/Computational_Biology/regulondb/</a></p><p>★NRSub,非冗余枯草芽孢杆菌DNA数据库，包括完全基因组、MM子使用表、基因图谱和基因家族。<br><a href="http://acnuc.univ-lyon1.fr/nrsub/nrsub.html" target="_blank" rel="noopener">http://acnuc.univ-lyon1.fr/nrsub/nrsub.html</a></p><p><a href="ftp://ftplnig.ac.jp/pub/db/nrsub">ftp://ftplnig.ac.jp/pub/db/nrsub</a></p><p>★HIDB,流感嗜血菌完全基因组的原始数据库。<br><a href="http://www.tigr.org:80/tdb/mdb/hidb/hidb.html" target="_blank" rel="noopener">http://www.tigr.org:80/tdb/mdb/hidb/hidb.html</a></p><p><a href="ftp://ftp.tigr.org/pub/data/h_influenzae">ftp://ftp.tigr.org/pub/data/h_influenzae</a></p><p>★HIDC,流感署血菌基因序列库。<br><a href="http://susi.bio.uni-giessen.de/ecdc/hidc.html" target="_blank" rel="noopener">http://susi.bio.uni-giessen.de/ecdc/hidc.html</a></p><p>★CyanoBase,蓝细菌数据库，实际上是集胞蓝细菌的基因组数据库。蓝细菌具有氧化和光合作用所需的全套基因。<br><a href="http://www.kazusa.or.jp/cyano/cyano.html" target="_blank" rel="noopener">http://www.kazusa.or.jp/cyano/cyano.html</a></p><p>★MJDB,詹氏甲烷球菌基因组数据库。<br><a href="ftp://ftp.tigr.org/pub/data/m_jannaschii">ftp://ftp.tigr.org/pub/data/m_jannaschii</a></p><p><a href="http://www.tigr.org/tdb/mdb/mjdb/mjdb.html" target="_blank" rel="noopener">http://www.tigr.org/tdb/mdb/mjdb/mjdb.html</a></p><p>★MycDB,分枝杆菌数据库。<br><a href="http://www.biochem.kth.se/MycDB.html" target="_blank" rel="noopener">http://www.biochem.kth.se/MycDB.html</a></p><p>★PGI,疫霉属基因预研究计划的数据库。<br><a href="http://www.ncgr.org/pgi/" target="_blank" rel="noopener">http://www.ncgr.org/pgi/</a></p><p>真菌基因组:</p><p>★LISTA,LISTA-HOP和LISTA-HON是酿酒酵母基因组中蛋白质编码序列及其同源性的数据库。<br><a href="http://www.ch.embnet.org/" target="_blank" rel="noopener">http://www.ch.embnet.org/</a></p><p><a href="ftp://bioftp.unibas.ch">ftp://bioftp.unibas.ch</a></p><p>★MYGD,酵母基因组、蛋白质和同源关系的数据库。<br><a href="http://www.mips.biochem.mpg.de/proj/yeast/" target="_blank" rel="noopener">http://www.mips.biochem.mpg.de/proj/yeast/</a></p><p>★YIDB,酵母内含子数据库。<br><a href="http://www.EMBL-Heidelberg.DE/ExternalInfo/seraphin/yidb.html" target="_blank" rel="noopener">http://www.EMBL-Heidelberg.DE/ExternalInfo/seraphin/yidb.html</a></p><p>★MNCDB,由德国MIPS所维护的粗糙链孢霉基因组数据库。<br><a href="http://www.mips.biochem.mpg.de/desc/neurospora/" target="_blank" rel="noopener">http://www.mips.biochem.mpg.de/desc/neurospora/</a></p><p>★真菌基因组资源的网址：<br><a href="http://fungus.genetics.uga.edu:5080/main.html" target="_blank" rel="noopener">http://fungus.genetics.uga.edu:5080/main.html</a></p><p>★FGSC,真菌遗传学信息中心。<br><a href="http://www.fgsc.net/" target="_blank" rel="noopener">http://www.fgsc.net/</a></p><p>原生生物和线虫基因组:<br>★欧洲生物信息研究所EBI的原生生物网页：<br><a href="http://www.ebi.ac.uk/Projects/Protozoa/" target="_blank" rel="noopener">http://www.ebi.ac.uk/Projects/Protozoa/</a></p><p>★ AceDB,线虫综合数据库。<br><a href="ftp://sanger.ac.uk/pub/acedb">ftp://sanger.ac.uk/pub/acedb</a></p><p><a href="ftp://ncbi.nlm.nih.govrepository/acedb">ftp://ncbi.nlm.nih.govrepository/acedb</a></p><p><a href="ftp://lirmm.lirmm.fr/pub/acedb">ftp://lirmm.lirmm.fr/pub/acedb</a></p><p>★关于线虫发育特别是化学感觉神经的研究。<br><a href="http://devbio-mac1.ucsf.edu/" target="_blank" rel="noopener">http://devbio-mac1.ucsf.edu/</a></p><p>昆虫基因组:<br>★斯坦福大学的果蝇基因组中心。<br><a href="http://www.fruitfly.org/" target="_blank" rel="noopener">http://www.fruitfly.org/</a></p><p>★FlyBase,果蝇胚胎发育过程中基因相互作用的WWW数据库。<br><a href="http://www-biol.univ-mrs.fr/~lgpd/GIFTS_home_page.html" target="_blank" rel="noopener">http://www-biol.univ-mrs.fr/~lgpd/GIFTS_home_page.html</a></p><p>★哈佛大学的果蝇网页。<br><a href="http://morgan.harvard.edu/" target="_blank" rel="noopener">http://morgan.harvard.edu/</a></p><p>★MsqDB,蚊子基因数据库。<br><a href="http://klab.agsci.colostate.edu/acedb/MsqDB-acedb.html" target="_blank" rel="noopener">http://klab.agsci.colostate.edu/acedb/MsqDB-acedb.html</a></p><p><a href="ftp://klab.agsci.colostate.edu">ftp://klab.agsci.colostate.edu</a></p><p>鱼类数据库:<br>★ 美国国家卫生署1997年建立的斑马鱼网页。<br><a href="http://www.nih.gov/science/models/zebrafish/" target="_blank" rel="noopener">http://www.nih.gov/science/models/zebrafish/</a></p><p>★ ZFIN,斑马鱼基因组、发育突变和野生种系数据库。<br><a href="http://zfish.uoregon.edu/ZFIN/" target="_blank" rel="noopener">http://zfish.uoregon.edu/ZFIN/</a></p><p>★ Fugu是河豚的数据库。<br><a href="http://fugu.hgmp.mrc.ac.uk/" target="_blank" rel="noopener">http://fugu.hgmp.mrc.ac.uk/</a></p><p>★RainMap彩虹鳟鱼基因图谱数据库。<br><a href="http://locus.jouy.inra.fr/" target="_blank" rel="noopener">http://locus.jouy.inra.fr/</a></p><p>★ 另一个鳟鱼科基因数据库在美国华盛顿州立大学：<br><a href="http://www.wsu.edu:8000/~thorglab/DATA.html" target="_blank" rel="noopener">http://www.wsu.edu:8000/~thorglab/DATA.html</a></p><p>啮齿动物基因组(主要是有关家鼠的数据库):<br>★ M.Musculus基因组库。<br><a href="ftp://ncbi.nlm.mih.gov/genbank/genomes/M_muslulus">ftp://ncbi.nlm.mih.gov/genbank/genomes/M_muslulus</a></p><p>★ MGD,家鼠基因组库，现在又称MGI即家鼠基因组信息库。<br><a href="http://www.informatics.jax.org/mgd.html" target="_blank" rel="noopener">http://www.informatics.jax.org/mgd.html</a></p><p><a href="ftp://ftp.informatics.jax.org/">ftp://ftp.informatics.jax.org/</a></p><p>★ Cre转基因家鼠系的数据库。<br><a href="http://www.chinainfo.gov.cn/periodical/yc/yc9903/990314html" target="_blank" rel="noopener">http://www.chinainfo.gov.cn/periodical/yc/yc9903/990314html</a></p><p>★ RatMap,大鼠基因图谱数据库。<br><a href="http://ratmap.gen.gu.se/" target="_blank" rel="noopener">http://ratmap.gen.gu.se/</a></p><p>细胞器数据库:<br>主要是线粒体和叶绿体基因的数据。<br>★ MitoNuc<br><a href="http://megasun.bch.umontreal.ca/gobase/" target="_blank" rel="noopener">http://megasun.bch.umontreal.ca/gobase/</a></p><p>★ MitBASE,线粒体DNA数据库，集成所有已知线粒体基因信息。<br><a href="http://www3.ebi.ac.uk/Research/Mitbase/mitbase.pl/" target="_blank" rel="noopener">http://www3.ebi.ac.uk/Research/Mitbase/mitbase.pl/</a></p><p>★ MitBASE Pilot,酵母线粒体中核基因数据库。<br><a href="http://www3.ebi.ac.uk/Research/Mitbase/mitbase.pl/" target="_blank" rel="noopener">http://www3.ebi.ac.uk/Research/Mitbase/mitbase.pl/</a></p><p>★ 脊椎动物线粒体数据库。<br><a href="http://www.ba.cnr.it:8000/Tutorials/MitBASE/vertebrate.html" target="_blank" rel="noopener">http://www.ba.cnr.it:8000/Tutorials/MitBASE/vertebrate.html</a></p><p>拟南芥基因组:<br>★ MATDB,国际拟南芥基因组计划的数据汇总。<br><a href="http://www.mips.biochem.mrg.de/desc/thal/" target="_blank" rel="noopener">http://www.mips.biochem.mrg.de/desc/thal/</a></p><p>★ AtDB,拟南芥基因组数据库。<br><a href="http://genome-www.stanford.edu/Arabidopsis/" target="_blank" rel="noopener">http://genome-www.stanford.edu/Arabidopsis/</a></p><p><a href="ftp://genome-ftp.stanford.edu/pub/arabidopsis">ftp://genome-ftp.stanford.edu/pub/arabidopsis</a></p><p>★ DatA,拟南芥基因组注释库。<br><a href="http://luggagefast.Stanford.edu/group/arabprotein/" target="_blank" rel="noopener">http://luggagefast.Stanford.edu/group/arabprotein/</a></p><p>★ TAIR,拟南芥信息资源。<br><a href="http://www.arabidopsis.org/" target="_blank" rel="noopener">http://www.arabidopsis.org/</a></p><p>★ AGR,拟南芥基因组资源。<br><a href="http://synteny.nott.ac.uk/agr/agr.html" target="_blank" rel="noopener">http://synteny.nott.ac.uk/agr/agr.html</a></p><p>★ TIGR-AT，TIGR研究所的似南芥EST和基因序列数据库。<br><a href="http://www.tigr.org/tdb/at/at.html" target="_blank" rel="noopener">http://www.tigr.org/tdb/at/at.html</a></p><p>病毒数据库:<br>★ICTVdB,病毒数据库。<br><a href="http://life.anu.edu.au/viruses/ICTVdB/ictvdb.html" target="_blank" rel="noopener">http://life.anu.edu.au/viruses/ICTVdB/ictvdb.html</a></p><p>★VIDEdB,病毒鉴定交换数据库。<br><a href="http://biology.anu.edu.au/research-groups/MES/vide/" target="_blank" rel="noopener">http://biology.anu.edu.au/research-groups/MES/vide/</a></p><p>★RDV,水稻矮缩病毒基因组数据库。<br><a href="http://www.cbi.pku.edu.cn/rdv/" target="_blank" rel="noopener">http://www.cbi.pku.edu.cn/rdv/</a></p><p>蛋白质序列数据库:<br>★SWISS-PROT是对数据人工审读很严格的库。<br><a href="http://www.expasy.ch/sprot/" target="_blank" rel="noopener">http://www.expasy.ch/sprot/</a></p><p>★TrEMBL是从EMBL库中的核酸序列翻译出来的氨基酸序列，已经完成了自动注释。<br><a href="http://www.ebi.ac.uk:5000" target="_blank" rel="noopener">http://www.ebi.ac.uk:5000</a></p><p>★PIR是蛋白质信息资源的缩写。<br><a href="http://www-nbrf.georgetown.edu/pir/" target="_blank" rel="noopener">http://www-nbrf.georgetown.edu/pir/</a></p><p><a href="http://www.mips.biochem.mpg.de/proj/protseqdb/" target="_blank" rel="noopener">http://www.mips.biochem.mpg.de/proj/protseqdb/</a></p><p>★GenBank是由GenBank中的DNA序列翻译得到的蛋白质序列，与TrEMBL相似、但没有像后者那样经专家审读。<br><a href="http://www.infobiogen.fr/srs/" target="_blank" rel="noopener">http://www.infobiogen.fr/srs/</a></p><p>★PROSITE,由专家根据生物知识审编的SWISS-PROT蛋白质序列中有生物意义的位点、模式和轮廓的数据库。<br><a href="http://www.expasy.ch/prosite/" target="_blank" rel="noopener">http://www.expasy.ch/prosite/</a></p><p>★PrositeScan服务器，根据用户填表提交的蛋白质序列搜索PROSITE模式。<br><a href="http://www.isrec.isb-sib.ch/software/PSTSCAN_form.html" target="_blank" rel="noopener">http://www.isrec.isb-sib.ch/software/PSTSCAN_form.html</a></p><p>★PSD,蛋白质序列数据库，是PIR的主体。<br><a href="http://pir.georgetown.edu/pirwww/dbinfo/texpsd.html" target="_blank" rel="noopener">http://pir.georgetown.edu/pirwww/dbinfo/texpsd.html</a></p><p>★PATCHX,PIR的子库之一，收入尚未纳入PIR库的蛋白质序列。<br><a href="http://pir.georgetown.edu/pirwww/dbinfo/patchx.html" target="_blank" rel="noopener">http://pir.georgetown.edu/pirwww/dbinfo/patchx.html</a></p><p>★ARCHIVE,PIR的子库之一，保存PIR库中条目的原始文献或最初提交的序列。<br><a href="http://pir.georgetown.edu/pirwww/dbinfo/achive.html" target="_blank" rel="noopener">http://pir.georgetown.edu/pirwww/dbinfo/achive.html</a></p><p>★ProClass,蛋白质类数据库，是根据PROSITE库和PIR库中超家族的关系组织起来的非冗余蛋白质库。<br><a href="http://pir.georgetown.edu/gsfserver/prolclass.html" target="_blank" rel="noopener">http://pir.georgetown.edu/gsfserver/prolclass.html</a></p><p><a href="http://diana.uthct.edu/proclass.html" target="_blank" rel="noopener">http://diana.uthct.edu/proclass.html</a></p><p>★PIR-ASDB,PIR的注释和相似性数据库。<br><a href="http://www-nbrf.georgetown.edu/por/" target="_blank" rel="noopener">http://www-nbrf.georgetown.edu/por/</a></p><p>★KIND,瑞典斯德哥尔摩生物信息中心维护的非冗余蛋白质序列库。<br><a href="ftp://ftp.mbb.ki.se/pub/KIND">ftp://ftp.mbb.ki.se/pub/KIND</a></p><p>★ENZYME,基于命名系统的酶数据库。<br><a href="http://www.expasy.ch/enzyme/" target="_blank" rel="noopener">http://www.expasy.ch/enzyme/</a></p><p>★BRENDA,这是一个内容广泛的酶的信息库。<br><a href="http://www.brenda.uni-koeln.de/" target="_blank" rel="noopener">http://www.brenda.uni-koeln.de/</a></p><p>★OWL,蛋白质序列库，是由SWISS-PROT，PIR，GenBank翻译序列和PDB等数据库产生的非冗余的蛋白质序列库。<br><a href="http://bmbsgi11.leeds.ac.uk/bmb5dp/owl.html" target="_blank" rel="noopener">http://bmbsgi11.leeds.ac.uk/bmb5dp/owl.html</a></p><p>★GeneCards,由以色列魏茨曼科学研究所维护的关于基因及其产物，以及它们的生物医学应用的文献库。<br><a href="http://bioinfo.weizmann.ac.il/cards" target="_blank" rel="noopener">http://bioinfo.weizmann.ac.il/cards</a></p><p>★SWISS-2DPAGE,由二维聚丙烯酰胺凝胶电泳所确定的蛋白质的参考图谱数据库，包括文本和图象信息，通向其他2D-PAGE数据库的链接等。<br><a href="http://www.expasy.ch/ch2d/" target="_blank" rel="noopener">http://www.expasy.ch/ch2d/</a></p><p>★HDB,组蛋白数据库，包括联配好的组蛋白序列以及已确认包含有组蛋白折叠模体的非蛋白序列，以及所有已知组蛋白和组蛋白质折叠的结构，同时指出不同数据库中类似序列的差异。<br><a href="http://genome.nhgri.nih.gov/histones/" target="_blank" rel="noopener">http://genome.nhgri.nih.gov/histones/</a></p><p>★HOBACGEN数据库，包含按家族组织的所有细菌的蛋白质序列，有助于从各种细菌选取同源家族，作多序列联配和构建亲缘树。<br><a href="http://pbil.univ-lyon1.fr/databases/hobacgen.html" target="_blank" rel="noopener">http://pbil.univ-lyon1.fr/databases/hobacgen.html</a></p><p>★MITOP,线粒体蛋白质组数据库，包括线粒体有关的基因、蛋白质和疾病信息。<br><a href="http://www3.ebi.ac.uk/Research/Mitbase/mitbase.pl/" target="_blank" rel="noopener">http://www3.ebi.ac.uk/Research/Mitbase/mitbase.pl/</a></p><p>★MITOMAP,人类线粒体基因组数据库。<br><a href="http://www.gen.emory.edu/mitomap.html" target="_blank" rel="noopener">http://www.gen.emory.edu/mitomap.html</a></p><p>★REBASE,限制性内切酶和甲基化酶数据库。<br><a href="http://www.neb.com/rebase" target="_blank" rel="noopener">http://www.neb.com/rebase</a></p><p>★ProtoMap,蛋白质分类数据库。<br><a href="http://www.protomap.cs.huji.ac.il/" target="_blank" rel="noopener">http://www.protomap.cs.huji.ac.il/</a></p><p>★ISSD蛋白质序列数据库。<br><a href="http://www.protein.bio.msu.su/issd/" target="_blank" rel="noopener">http://www.protein.bio.msu.su/issd/</a></p><p>★PRF,日本蛋白质研究基金会维护着三个蛋白质和多肽数据库：PRF/LITDB文献库、PRF/SEQDB序列库及PRF/SYNDB合成产物库。<br><a href="http://prfsun2.prf.or.jp/" target="_blank" rel="noopener">http://prfsun2.prf.or.jp/</a></p><p>★MEROPS,肽酶数据库。<br><a href="http://www.bi.bbsrc.ac.uk/Merops/Merops.html" target="_blank" rel="noopener">http://www.bi.bbsrc.ac.uk/Merops/Merops.html</a></p><p>★PKR,蛋白激酶信息库。<br><a href="http://www.sdsc.edu/Kinases/pkr/pkk_catalytic/pk_cat_list.html" target="_blank" rel="noopener">http://www.sdsc.edu/Kinases/pkr/pkk_catalytic/pk_cat_list.html</a></p><p>★Wnt基因网页。<br><a href="http://vonbaer.ana.ed.ac.uk/rnusse/wntwindow.html" target="_blank" rel="noopener">http://vonbaer.ana.ed.ac.uk/rnusse/wntwindow.html</a></p><p>★PhosphoBase,磷酸化位点数据库。<br><a href="http://www.cbs.dtu.dk/databases/PhosphoBase/" target="_blank" rel="noopener">http://www.cbs.dtu.dk/databases/PhosphoBase/</a></p><p>★SYSTERS,蛋白质集团数据库。<br><a href="http://www.dkfz-heidelberg.de/tbi/services/cluster/" target="_blank" rel="noopener">http://www.dkfz-heidelberg.de/tbi/services/cluster/</a></p><p>★DIP蛋白质相互作用数据库<br><a href="http://URLdip.doe-mbi.ucla.edu/" target="_blank" rel="noopener">http://URLdip.doe-mbi.ucla.edu/</a></p><p>★DexH/D数据库。<br><a href="http://www.columbia.edu/~ej67/dbhome.htm" target="_blank" rel="noopener">http://www.columbia.edu/~ej67/dbhome.htm</a></p><p>★ Homeodomain,同源异形结构域数据库。<br><a href="http://genome.nhgri.gov/homeodomain/" target="_blank" rel="noopener">http://genome.nhgri.gov/homeodomain/</a></p><p>★InBase,新英格兰生物实验公司的蛋白质剪接数据库。<br><a href="http://www.neb.com/neb/inteins.html" target="_blank" rel="noopener">http://www.neb.com/neb/inteins.html</a></p><p>★LGICdb,配体门控离子通道数据库。<br><a href="http://www.pasteur.fr/recherche/banques/LGIC/LGIC.html" target="_blank" rel="noopener">http://www.pasteur.fr/recherche/banques/LGIC/LGIC.html</a></p><p>★SENTRA,信号传递蛋白质数据库。<br><a href="http://wit.mcs.anl.gov/WIT2/Sentra/" target="_blank" rel="noopener">http://wit.mcs.anl.gov/WIT2/Sentra/</a></p><p>★ICN,离子通道网络，是由美国神经科学数据库中心等单位联合建立的一个内容丰富的网页。<br><a href="http://pain.med.umn.edu/csn/" target="_blank" rel="noopener">http://pain.med.umn.edu/csn/</a></p><p>★Aaindex,氨基酸索引数据库。<br><a href="http://www.genome.ad.jp/aaindex/" target="_blank" rel="noopener">http://www.genome.ad.jp/aaindex/</a></p><p>蛋白质结构和分类数据库:<br>★ PDB,蛋白质结构数据库。<br><a href="http://www.rcsb.org/pdb/" target="_blank" rel="noopener">http://www.rcsb.org/pdb/</a></p><p>★ RCSB,结构生物信息学信息学合作研究组织。<br><a href="http://www.rcsb.org/" target="_blank" rel="noopener">http://www.rcsb.org/</a></p><p>★PDBNEW,下一版PDB库正式发布前收到的全新或更新条目。<br><a href="http://www.pdb.bnl.gov/" target="_blank" rel="noopener">http://www.pdb.bnl.gov/</a></p><p>★ PDBFinder,在PDB、DSSP、HSSP、基础上建立的二级库，包含PDB序列、作者、R因子、分辨率、二级结构等。<br><a href="http://www.sander.embl-heidelberg.de/pdbfinder/" target="_blank" rel="noopener">http://www.sander.embl-heidelberg.de/pdbfinder/</a></p><p><a href="ftp://swift/embl-heidelberg.de/pdbfinder">ftp://swift/embl-heidelberg.de/pdbfinder</a></p><p>★ PDB at a Glance清单。<br><a href="http://cmm.info.nih.gov/modeling/pdb_at_a_glance.html" target="_blank" rel="noopener">http://cmm.info.nih.gov/modeling/pdb_at_a_glance.html</a></p><p>★ PDBselect数据库。<br><a href="http://swift.embl-heidelberg.de/pdbsel/" target="_blank" rel="noopener">http://swift.embl-heidelberg.de/pdbsel/</a></p><p>★ PDBsum是PDB库中数据的更便于阅读的总结和分析，以及一些衍生数据。<br><a href="http://www.biochem.ucl.ac.uk/bsm/pdbsum/index.html" target="_blank" rel="noopener">http://www.biochem.ucl.ac.uk/bsm/pdbsum/index.html</a></p><p>★ BioMagResBank简称BMRB，是关于多肽、蛋白质和核酸的核磁共振数据库。<br><a href="http://www.bmrb.wisc.edu/" target="_blank" rel="noopener">http://www.bmrb.wisc.edu/</a></p><p>★ CSD,剑桥结构数据库。<br><a href="http://www.ccdc.cam.ac.uk/prods/csd.html" target="_blank" rel="noopener">http://www.ccdc.cam.ac.uk/prods/csd.html</a></p><p>★ NRL-3D,三维结构已经确定的蛋白质序列库。<br><a href="http://www.gdb.org/Dan/proteins/nr13d.html" target="_blank" rel="noopener">http://www.gdb.org/Dan/proteins/nr13d.html</a></p><p>★ FAMBASE,是每个蛋白质家族的代表序列的集合，它有助于加速同源性搜索。<br><a href="http://pir.georgetown.edu/pirwww/dbinfo/fambase.html" target="_blank" rel="noopener">http://pir.georgetown.edu/pirwww/dbinfo/fambase.html</a></p><p>★ ProtFam,蛋白质超家族的序列联配数据库。<br><a href="http://www.mips.biochem.mpg.de/proj/protfam/protfam/" target="_blank" rel="noopener">http://www.mips.biochem.mpg.de/proj/protfam/protfam/</a></p><p>★ SCOP,蛋白质结构分类数据库。<br><a href="http://www.ipc.pku.edu.cn/scop/" target="_blank" rel="noopener">http://www.ipc.pku.edu.cn/scop/</a></p><p>★ CATH,蛋白质结构与功能关系分类数据库。<br><a href="http://www.biochem.ucl.ac.uk/bsm/cath/" target="_blank" rel="noopener">http://www.biochem.ucl.ac.uk/bsm/cath/</a></p><p>★ PIR-ALN,蛋白质序列联配数据库。<br><a href="http://www-nbrf.georgetown.edu/pir/alndb.html" target="_blank" rel="noopener">http://www-nbrf.georgetown.edu/pir/alndb.html</a></p><p>★ 3Dee,蛋白质结构域定义的数据库。<br><a href="http://circinus.ebi.ac.uk:8080/3Dee/" target="_blank" rel="noopener">http://circinus.ebi.ac.uk:8080/3Dee/</a></p><p>★ ProTherm,蛋白质及其变异体热力学数据库。<br><a href="http://www.rtc.riken.go.jp/protherm.html" target="_blank" rel="noopener">http://www.rtc.riken.go.jp/protherm.html</a></p><p>★ ASTRAL是基于SCOP数据库的一组分析蛋白质结构和蛋白质序列的数据库和工具。<br><a href="http://astral.stanford.edu/" target="_blank" rel="noopener">http://astral.stanford.edu/</a></p><p>★ RESID,蛋白质翻译后修饰情况的数据库。<br><a href="http://pir.georgetown.edu/pirwww/search/textresid.html" target="_blank" rel="noopener">http://pir.georgetown.edu/pirwww/search/textresid.html</a></p><p>★ SMART是简单模块构架搜索工具的缩写。<br><a href="http://SMART.embl-heidelberg.de/" target="_blank" rel="noopener">http://SMART.embl-heidelberg.de/</a></p><p>★ PROMISE数据库。<br><a href="http://bmbsgi11.leeds.ac.uk/bmbknd/promise/MAIN.html" target="_blank" rel="noopener">http://bmbsgi11.leeds.ac.uk/bmbknd/promise/MAIN.html</a></p><p>★ MMDB蛋白质分子模型数据库。<br><a href="http://www.ncbi.nlm.nih.gov/Structure/" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/Structure/</a></p><p>★ VAST矢量联配搜索工具。<br><a href="http://swift.embl-heidelberg.de/dssp/" target="_blank" rel="noopener">http://swift.embl-heidelberg.de/dssp/</a></p><p>★ DSSP,PDB库中所有蛋白质条目的二级结构归属数据库。<br><a href="http://swift.embl-heidelberg.de/dssp/" target="_blank" rel="noopener">http://swift.embl-heidelberg.de/dssp/</a></p><p>★ HSSP,按同源性导出的蛋白质二级结构数据库。<br><a href="http://www.sander.embl-heidelberg.de/hssp/" target="_blank" rel="noopener">http://www.sander.embl-heidelberg.de/hssp/</a></p><p>★ Dali/FSSP,基于PDB数据库中现有蛋白质三维结构，用自动结构对比程序Dali逐一比较而形成的折叠单元和家族分类库。<br><a href="http://www.embl-ebi.ac.ul/dali/" target="_blank" rel="noopener">http://www.embl-ebi.ac.ul/dali/</a></p><p><a href="http://croma.ebi.ac.uk/dali/fssp/" target="_blank" rel="noopener">http://croma.ebi.ac.uk/dali/fssp/</a></p><p>★ 3d_ali数据库，搜集彼此相关的蛋白质序列和结构数据。<br><a href="http://www.embl-heidelberg.de/argos/ali/ali.html" target="_blank" rel="noopener">http://www.embl-heidelberg.de/argos/ali/ali.html</a></p><p>★ DEF蛋白质折叠类的预测数据库。<br><a href="http://zeus.cs.uoi.gr/neural/biocomputing/def.html" target="_blank" rel="noopener">http://zeus.cs.uoi.gr/neural/biocomputing/def.html</a></p><p>★ INFOGENE,Sanger中心计算基因组学小组维护的、各基因组测序计划所提供的序列中已知的蛋白质和预测出的基因与蛋白质的数据库。<br><a href="http://genomic.sanger.ac.uk/inf/infodb.html" target="_blank" rel="noopener">http://genomic.sanger.ac.uk/inf/infodb.html</a></p><p>★ TMBase,跨膜蛋白数据库。<br><a href="ftp://ulrec3.unil.ch/pub/tmbase">ftp://ulrec3.unil.ch/pub/tmbase</a></p><p>★ PRESAGE是关于结构基因组学的一个数据库，它为库中每个蛋白质搜集了反映当前实验状况、结构、模型和研究建议的注释。<br><a href="http://presage.stanford.edu/" target="_blank" rel="noopener">http://presage.stanford.edu/</a></p><p>★ SBASE,带有注释的蛋白质序列片、即蛋白质结构域的数据库，由ICGEB建立和维护。<br><a href="http://www.icgeb.trieste.it/sbase/" target="_blank" rel="noopener">http://www.icgeb.trieste.it/sbase/</a></p><p>★ InterPro,集成的蛋白质结构域和功能位点数据库。<br><a href="http://www.ebi.ac.uk/interpro/" target="_blank" rel="noopener">http://www.ebi.ac.uk/interpro/</a></p><p>★ HITS,瑞士新近建立的一个蛋白质结构域数据库。<br><a href="http://www.isrec.isb-sib.ch/cgi-bin/hits/hits_index" target="_blank" rel="noopener">http://www.isrec.isb-sib.ch/cgi-bin/hits/hits_index</a></p><p>★ BLOCKS,蛋白质分类与同源性数据库，包含蛋白质家族中保守区域的组块多序列联配的数据。<br><a href="http://www.blocks.fhcrc.org/" target="_blank" rel="noopener">http://www.blocks.fhcrc.org/</a></p><p>★ BLOCKS+数据库。<br><a href="http://www.blocks.fhcrc.org/" target="_blank" rel="noopener">http://www.blocks.fhcrc.org/</a></p><p>★ PFAM高质量的蛋白质结构域家族数据库。<br><a href="http://www.sanger.ac.uk/Sorfware/Wise2/" target="_blank" rel="noopener">http://www.sanger.ac.uk/Sorfware/Wise2/</a></p><p>★ PRINTS数据库最近改名为PRINTS-S，这是一个蛋白质家族的指纹和模体数据库。<br><a href="http://www.bioinfo.man.ac.uk/dbbrowser/PRINTS/" target="_blank" rel="noopener">http://www.bioinfo.man.ac.uk/dbbrowser/PRINTS/</a></p><p>★ ProDom自动产生的蛋白质结构域家族数据库。<br><a href="http://www.toulouse.inra.fr/prodom.html" target="_blank" rel="noopener">http://www.toulouse.inra.fr/prodom.html</a></p><p>★ DOMO,蛋白质结构域数据库。<br><a href="http://www.infobiogen.fr/services/domo/" target="_blank" rel="noopener">http://www.infobiogen.fr/services/domo/</a></p><p>★ GRBase,这是参与基因调控的蛋白质的数据库。<br><a href="http://www.access.digex.net/~regulate/" target="_blank" rel="noopener">http://www.access.digex.net/~regulate/</a></p><p>★ PMD,蛋白质突变体数据库。<br><a href="http://pmd.ddbj.nig.ac.jp/" target="_blank" rel="noopener">http://pmd.ddbj.nig.ac.jp/</a></p><p>★ GLYCBASE,蛋白质糖基化位点数据库。<br><a href="http://www.cbs.dtu.dk/databases/OGLYCBASE/" target="_blank" rel="noopener">http://www.cbs.dtu.dk/databases/OGLYCBASE/</a></p><p>★ ORDB嗅觉受体蛋白质序列数据库。<br><a href="http://ycmi.med.yale.edu/senselab/ordb/" target="_blank" rel="noopener">http://ycmi.med.yale.edu/senselab/ordb/</a></p><p>★ CarbBank亦称CCSD，复杂碳水化合物结构数据库，通常与蛋白质结构数据库归在一起。<br><a href="http://www.ccrc.uga.edu" target="_blank" rel="noopener">http://www.ccrc.uga.edu</a></p><p>★ SWISS-3DIMAGE,蛋白质三维图象和PDB浏览器。<br><a href="http://www.expasy.ch/sw3d/" target="_blank" rel="noopener">http://www.expasy.ch/sw3d/</a></p><p>★ IMB,大分子三维图象库。<br><a href="http://www.imb-jena.de/IMAGE.html" target="_blank" rel="noopener">http://www.imb-jena.de/IMAGE.html</a></p><p>★ BioImage,多维生物学数据库。<br><a href="http://www-embl.bioimage.org/" target="_blank" rel="noopener">http://www-embl.bioimage.org/</a></p><p>★ MolMovDB,耶鲁大学的生物信息学研究室维护的分子运动数据库。<br><a href="http://bioinfo.mbb.yale.edu/MolMovDB/" target="_blank" rel="noopener">http://bioinfo.mbb.yale.edu/MolMovDB/</a></p><p>★ ModBase,蛋白质结构模型比较数据库。<br><a href="http://pipe.ruckefeller.edu/modbase/" target="_blank" rel="noopener">http://pipe.ruckefeller.edu/modbase/</a></p><p>比较基因组学和蛋白质组学数据库:<br>★COG直系同源聚类数据库。<br><a href="http://www.ncbi.nlm.nih.gov/COG/" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/COG/</a></p><p>★GeneCensus,耶鲁大学生物信息学研究室维护的各物种基因组的比较数据库，着重于折叠单元的结构对比。<br><a href="http://ncbi.nlm.nih.gov/XREFdb/" target="_blank" rel="noopener">http://ncbi.nlm.nih.gov/XREFdb/</a></p><p>★XREFdb,哺乳动物和模式生物的基因和遗传学交叉引用数据库。<br><a href="http://ncbi.nlm.nih.gov/XREFdb/" target="_blank" rel="noopener">http://ncbi.nlm.nih.gov/XREFdb/</a></p><p>★YPD,酿酒酵母蛋白质组数据库。<br><a href="http://www.proteome.com/YPDhome.html" target="_blank" rel="noopener">http://www.proteome.com/YPDhome.html</a></p><p>★WormPD,线虫蛋白质组学数据库。<br><a href="http://www.proteome.com/YPDhome.html" target="_blank" rel="noopener">http://www.proteome.com/YPDhome.html</a><br>基因表达数据库:<br>★Flyview,果蝇基因表达数据库。<br><a href="http://flyview.uni-muenster.de/" target="_blank" rel="noopener">http://flyview.uni-muenster.de/</a></p><p>★Flybrain,果蝇神经系统图谱和数据库。<br><a href="http://flybrain.uni-freiburg.de/" target="_blank" rel="noopener">http://flybrain.uni-freiburg.de/</a></p><p>★NEXTDB,线虫基因表达模式数据库。<br><a href="http://watsom.genes.nig.ac.jp:8080/db/" target="_blank" rel="noopener">http://watsom.genes.nig.ac.jp:8080/db/</a></p><p>★MAGEST数据库，其名字来自Maboya Gene Expression patters and Sequence Tags 短语的缩写。<br><a href="http://star.scl.kyoto-u.ac.jp/magest/" target="_blank" rel="noopener">http://star.scl.kyoto-u.ac.jp/magest/</a></p><p>★BodyMap,人类和家鼠基因表达数据库。<br><a href="http://bodymap.ims.u-tokyo.ac.jp/" target="_blank" rel="noopener">http://bodymap.ims.u-tokyo.ac.jp/</a></p><p>★Axeldb,非洲爪蟾基因表达数据库。<br><a href="http://www.dkfz-heidelberg.de/abt0135/axeldb.html" target="_blank" rel="noopener">http://www.dkfz-heidelberg.de/abt0135/axeldb.html</a></p><p>★XMMR,非洲爪分子标记资源。<br><a href="http://vize222.zo.utexas.edu/" target="_blank" rel="noopener">http://vize222.zo.utexas.edu/</a></p><p>★TRIPLES,酵母基因功能数据库，设在耶鲁大学医学院的基因组分析中心。<br><a href="http://ygac.med.yale.edu/triples/" target="_blank" rel="noopener">http://ygac.med.yale.edu/triples/</a></p><p>★MGEIR,集成的家鼠基因表达信息资源。<br><a href="http://genex.hgu.mrc.ac.uk/" target="_blank" rel="noopener">http://genex.hgu.mrc.ac.uk/</a></p><p>★GXD,家鼠基因表达数据库。<br><a href="http://www.informatics.jax.org/searches/gxdindex_form.html" target="_blank" rel="noopener">http://www.informatics.jax.org/searches/gxdindex_form.html</a></p><p>★EpoDB,脊椎动物红细胞生成基因表达分析数据库。<br><a href="http://cbil.humgen.upenn.edu/epodb/" target="_blank" rel="noopener">http://cbil.humgen.upenn.edu/epodb/</a></p><p>★KidneyDB,肾脏发育数据库。<br><a href="http://www.ana.ed.ac.uk/anatomy/kidbase/kidhome.html" target="_blank" rel="noopener">http://www.ana.ed.ac.uk/anatomy/kidbase/kidhome.html</a></p><p>★ToothExp,牙齿基因表达数据库。<br><a href="http://honeybee.helsinki.fi/toothexp/toothexp.html" target="_blank" rel="noopener">http://honeybee.helsinki.fi/toothexp/toothexp.html</a></p><p>基因突变、病理和免疫数据库:<br>★HGMD人类基因突变数据库，可用于预测基因疾病。<br><a href="http://uwcm.web.cf.ac.uk/uwcm/mg/hgmd0.html" target="_blank" rel="noopener">http://uwcm.web.cf.ac.uk/uwcm/mg/hgmd0.html</a></p><p>★Marfan人类FBN1基因突变数据库及分析软件。<br><a href="http://uwcm.web.cf.ac.uk/uwcm/mg/hgmd0.html" target="_blank" rel="noopener">http://uwcm.web.cf.ac.uk/uwcm/mg/hgmd0.html</a></p><p>★Collagen人类胶原数据库。<br><a href="http://www.le.ac.uk//genetics/collagen/" target="_blank" rel="noopener">http://www.le.ac.uk//genetics/collagen/</a></p><p>★人类PAX2等位基因变异数据库。<br><a href="http://www.hgu.mrc.ac.uk/Softdata/PAX2/" target="_blank" rel="noopener">http://www.hgu.mrc.ac.uk/Softdata/PAX2/</a></p><p>★人类PAX6等位基因突变数据库。<br><a href="http://www.hgu.mrc.ac.uk/Softdata/PAX6/" target="_blank" rel="noopener">http://www.hgu.mrc.ac.uk/Softdata/PAX6/</a></p><p>★Androgen雄激素受体突变数据库，包含与男性性器官发育不良、前列腺癌等有关图谱，密度、频度以及基因型和表现型关联数据。<br><a href="http://www.mcgill.ca/androgendb/" target="_blank" rel="noopener">http://www.mcgill.ca/androgendb/</a></p><p>★ALFRED为Allele FREquency Database 的缩写。这是由耶鲁大学K.K.Kidd实验室维护的一个针对人口多样性和DNA多态性的等位基因数据库。<br><a href="http://alfred.med.yale.edu/alfred/" target="_blank" rel="noopener">http://alfred.med.yale.edu/alfred/</a></p><p>★CD40LBASE,CD40L基因突变数据库。<br><a href="http://www.expasy.ch/cd40lbase/" target="_blank" rel="noopener">http://www.expasy.ch/cd40lbase/</a></p><p>★KMDB由日本庆应义塾大学医学院建立的一组与人类疾病有关的基因突变数据库。<br><a href="http://mutview.dmb.med.keio.ac.jp/" target="_blank" rel="noopener">http://mutview.dmb.med.keio.ac.jp/</a></p><p>★KMeyeDB人类疾病和眼病基因突变人类心脏病基因突变数据库。<br><a href="http://mutview.dmb.med.keio.ac.jp/mutview3/kmeyedb/" target="_blank" rel="noopener">http://mutview.dmb.med.keio.ac.jp/mutview3/kmeyedb/</a></p><p>★KMearDB人类耳病基因突变数据库。<br><a href="http://mutview.dmb.med.keio.ac.jp/" target="_blank" rel="noopener">http://mutview.dmb.med.keio.ac.jp/</a></p><p>★KMbrainDB人类脑病基因突变数据库。<br><a href="http://mutview.dmb.med.keio.ac.jp/" target="_blank" rel="noopener">http://mutview.dmb.med.keio.ac.jp/</a></p><p>★KMcancerDB人类癌症基因突变数据库。<br><a href="http://mutview.dmb.med.keio.ac.jp/" target="_blank" rel="noopener">http://mutview.dmb.med.keio.ac.jp/</a></p><p>★OMIA是一大批动物的孟德尔遗传、疾病、基因型和表现型的数据库。<br><a href="http://wwwlangis.su.oz.au/BIRX/omia/omia_form.html" target="_blank" rel="noopener">http://wwwlangis.su.oz.au/BIRX/omia/omia_form.html</a></p><p>★Atlas法国建立的针对肿瘤学和血液学的遗传与细胞遗传交互数据库。<br><a href="http://www.infobiogen.fr/services/chromcancer/" target="_blank" rel="noopener">http://www.infobiogen.fr/services/chromcancer/</a></p><p>★HAMSTeRS凝血因子VIII结构和突变位点数据库。<br><a href="http://europium.mrc.rpms.ac.uk/" target="_blank" rel="noopener">http://europium.mrc.rpms.ac.uk/</a></p><p>★HaemB,B型血友病凝血因子IX点突变和短插入或删除序列的数据库。<br><a href="http://www.umsd.ac.uk/molgen/haemBdbatabase.html" target="_blank" rel="noopener">http://www.umsd.ac.uk/molgen/haemBdbatabase.html</a></p><p>★TTMD转基因动物和靶突变数据库。<br><a href="http://tbase.jax.org/" target="_blank" rel="noopener">http://tbase.jax.org/</a></p><p>★FIMM功能分子免疫学数据库。<br><a href="http://sdmc.krdl.org.sg:8080/fimm/" target="_blank" rel="noopener">http://sdmc.krdl.org.sg:8080/fimm/</a></p><p>MTB家鼠肿瘤生物学数据库。<br><a href="http://tumor.informatics.jax.org/" target="_blank" rel="noopener">http://tumor.informatics.jax.org/</a></p><p>★BCGD人类乳腺癌基因数据库。<br><a href="http://condor.bcm.tmc.edu/ermb/bcgd/bcgd.html" target="_blank" rel="noopener">http://condor.bcm.tmc.edu/ermb/bcgd/bcgd.html</a></p><p>★PAH是导致人类苯丙酮尿症的苯丙氨酸羟化酶特异位点数据库。<br><a href="http://www.mcgill.ca/pahdb/" target="_blank" rel="noopener">http://www.mcgill.ca/pahdb/</a></p><p>★CFTR,囊性纤维变跨膜调控子突变数据库。<br><a href="http://genet.sickkids.on.ca/cftr/" target="_blank" rel="noopener">http://genet.sickkids.on.ca/cftr/</a></p><p>★NRR核受体资源计划，包括糖类皮酯激素、矿质肾上腺皮质激素、甲状腺激素、维生素D受体、类固醇受体等信息的数据库。<br><a href="http://nrr.georgetown.edu/nrr/nrr.html" target="_blank" rel="noopener">http://nrr.georgetown.edu/nrr/nrr.html</a></p><p>★IMGT1989年建立的国际免疫遗传学数据库。<br><a href="http://imgt.cines.fr:8104/" target="_blank" rel="noopener">http://imgt.cines.fr:8104/</a></p><p>★HIG,Anthony Nolan 骨髓和白血病基金会的人类白细胞抗体HLA住处30年前由E.A.Kabat建立的具有免疫学意义的蛋白质序列数据库。<br><a href="http://www.anthonynolan.com/HIG/" target="_blank" rel="noopener">http://www.anthonynolan.com/HIG/</a></p><p>★PEDB前列腺表达数据库。<br><a href="http://www.mbt.washington.edu/PEDB/" target="_blank" rel="noopener">http://www.mbt.washington.edu/PEDB/</a></p><p>★HIV,艾滋病分子免疫学数据库。<br><a href="http://hiv-web.lanl.gov/immunology/immuno-main.html" target="_blank" rel="noopener">http://hiv-web.lanl.gov/immunology/immuno-main.html</a></p><p>★斯坦福大学的HIV RT数据库，包含几乎全部已发表的HIV　ＲＴ和蛋白酶序列，是研究抗HIV药物靶分子演化和与药物有关变化的原始资料。<br><a href="http://hivdb.stanford.edu.hiv/" target="_blank" rel="noopener">http://hivdb.stanford.edu.hiv/</a></p><p>代谢途径和细胞调控数据库:<br>★ WIT是Ｗhat Is There的缩写。是美国阿贡国家实验室的一个集成的重构代谢途径和模型的系统。<br><a href="http://www.cme.msu.edu/WIT/" target="_blank" rel="noopener">http://www.cme.msu.edu/WIT/</a></p><p>★ EMP是酶与代谢途径的缩写。<br><a href="http://biobase.com/emphome.html/" target="_blank" rel="noopener">http://biobase.com/emphome.html/</a></p><p>★ MPW代谢途径数据库，是EMP库的一个子集。<br><a href="http://www.cme.msu.edu/MPW/" target="_blank" rel="noopener">http://www.cme.msu.edu/MPW/</a></p><p>★ PUGA原是单细胞生物代谢途径亲缘联配数据库。<br><a href="http://www.msc.anl.gov/home/compbio/PUMA/" target="_blank" rel="noopener">http://www.msc.anl.gov/home/compbio/PUMA/</a></p><p>★ EcoCyc数据库和MetaCyc数据库。<br><a href="http://ecocyc.panbio.com/ecocyc/" target="_blank" rel="noopener">http://ecocyc.panbio.com/ecocyc/</a></p><p>★ PathDB,代谢途径数据库。<br><a href="http://www.ncgr.org/Software/pathdb/" target="_blank" rel="noopener">http://www.ncgr.org/Software/pathdb/</a></p><p>★ KEGG,京都基因与基因组百科全书，它包含核酸分子、蛋白质序列、基因表达、基因组图谱、代谢途径图等。<br><a href="http://www.genome.ac.jp/kegg/" target="_blank" rel="noopener">http://www.genome.ac.jp/kegg/</a></p><p>★ 由Boehringer Mannheim公司提供的代谢途径图，悬挂在许多生化实验室的墙壁上。<br><a href="http://www.expasy.ch/cgi-bin/search-biochem-index/" target="_blank" rel="noopener">http://www.expasy.ch/cgi-bin/search-biochem-index/</a></p><p>★ SMILES是一个辅助性数据库，它搜集与代谢途径有关的化合物名称。<br><a href="http://www.daylight.com/dayhtml/smiles/" target="_blank" rel="noopener">http://www.daylight.com/dayhtml/smiles/</a></p><p>★ LIGAND,酶反应化学数据库，由日本京都大学化学研究所维护。<br><a href="http://www.genome.ad.jp/htbin/show_man?ligand" target="_blank" rel="noopener">http://www.genome.ad.jp/htbin/show_man?ligand</a></p><p>★ CSNDB细胞中信号网络的数据库。<br><a href="http://geo.nihs.Go.jp/csndb/" target="_blank" rel="noopener">http://geo.nihs.Go.jp/csndb/</a></p><p>★ Biocatalysis/Biodegradation生物催化和生物降解数据库。<br><a href="http://dragon.labmed.umn.edu/~lynda/index.html" target="_blank" rel="noopener">http://dragon.labmed.umn.edu/~lynda/index.html</a></p><p>★美国农业部国家农业图书馆基因组信息系统，它本身的服务器基于AceDB。<br><a href="http://probe.nalusda.gov:8000/" target="_blank" rel="noopener">http://probe.nalusda.gov:8000/</a></p><p>★ARS农业研究服务处新设立在康奈尔大学的USDA-ARS生物信息学和比较基因组学中心，ARS是Agricultural Research Service的缩写。<br><a href="http://ars-genome.cornell.edu/" target="_blank" rel="noopener">http://ars-genome.cornell.edu/</a></p><p>★AgDB农业数据库和信息资源总清单。<br><a href="http://www.agnic.org/agdb/" target="_blank" rel="noopener">http://www.agnic.org/agdb/</a></p><p>★设在英国爱丁堡的Roslin研究所的生物信息组，发展了名为“方舟”的系统来搜集和比较各种动物基因图谱。<br><a href="http://www.ri.rrsrc.ac.uk/cgi-bi" target="_blank" rel="noopener">http://www.ri.rrsrc.ac.uk/cgi-bi</a> … <a href="http://swer.sh?species=pig" target="_blank" rel="noopener">swer.sh?species=pig</a></p><p>★INRA法国国家农业研究所。<br><a href="http://locus.joun.inra.fr/" target="_blank" rel="noopener">http://locus.joun.inra.fr/</a></p><p>★美国得克萨斯A&amp;M大学是牛类基因图谱数据库的原始网址和绵羊、马数据库的镜象点：<br><a href="http://bos.cvm.tamu.edu" target="_blank" rel="noopener">http://bos.cvm.tamu.edu</a></p><p>★美国衣阿华州立大学有猪和鸡基因图谱数据库的镜象点：<br><a href="http://www.genome.iastats.edu" target="_blank" rel="noopener">http://www.genome.iastats.edu</a></p><p>农作物:<br>★UK CropNet英国农作物植物生物信息网络。<br><a href="http://synteny.nott.ac.uk/" target="_blank" rel="noopener">http://synteny.nott.ac.uk/</a></p><p>★INE水稻基因数据库。<br><a href="http://www.staff.or.jp/giot/INE.html" target="_blank" rel="noopener">http://www.staff.or.jp/giot/INE.html</a></p><p>★我国水稻基因组计划针对水稻的籼稻亚种。<br><a href="http://www.ncgr.ac.cn/" target="_blank" rel="noopener">http://www.ncgr.ac.cn/</a></p><p>★美国TIGR研究所维护着几个与水稻基因组有关的数据库，包括基因组注释库、重复序列库，以及基因索引。<br><a href="http://www.tigr.org/tdb/rice/" target="_blank" rel="noopener">http://www.tigr.org/tdb/rice/</a></p><p>★RiceGenes是美国康奈尔大学的水稻基因组数据库。<br><a href="http://ars-genome.cornell.edu/ricd/" target="_blank" rel="noopener">http://ars-genome.cornell.edu/ricd/</a></p><p>★GrainGenes是美国农业部和国家农业图书馆的植物基因组计划支持的麦、燕麦和甘蔗遗传数据库。<br><a href="http://ars-genome.cornell.edu/" target="_blank" rel="noopener">http://ars-genome.cornell.edu/</a></p><p>★关于世界范围的水稻生产和市场等情况。<br><a href="http://www.riceweb.org/" target="_blank" rel="noopener">http://www.riceweb.org/</a></p><p>★ WHEAT小麦基因图谱数据库。<br><a href="http://wheat.pw.usda.gov/" target="_blank" rel="noopener">http://wheat.pw.usda.gov/</a></p><p>★KOMUGI日本小麦网。是由6所大学和研究所联合维护。<br><a href="http://www.shigen.nig.ac.jp/wheat/top.html" target="_blank" rel="noopener">http://www.shigen.nig.ac.jp/wheat/top.html</a></p><p>★MaizeDB玉米基因组数据库。<br><a href="http://www.agron.misouri.edu/top.html" target="_blank" rel="noopener">http://www.agron.misouri.edu/top.html</a></p><p>★ZmDB玉米基因组数据库。<br><a href="http://zmdb.iasstate.edu/" target="_blank" rel="noopener">http://zmdb.iasstate.edu/</a></p><p>★ILDIS国际豆科植物数据库和信息服务。<br><a href="http://www.ildis.org/LegumeWeb/" target="_blank" rel="noopener">http://www.ildis.org/LegumeWeb/</a></p><p>★豆类基因图谱：<br><a href="http://scaffold.biologie.uni-kl.de/Beanref/" target="_blank" rel="noopener">http://scaffold.biologie.uni-kl.de/Beanref/</a></p><p>★MGI,NCGR和Samuel Roberts Noble基金会联合开展的豆科苜蓿属植物Medicago truncatula的基因组研究，在2000年４月已经提交15000多条EST。<br><a href="http://www.ncgr.org/research/mgi/" target="_blank" rel="noopener">http://www.ncgr.org/research/mgi/</a></p><p>★cottonDB美国南方平原农业研究中心所维护的棉花数据库。<br><a href="http://algodon.tamu.edu/" target="_blank" rel="noopener">http://algodon.tamu.edu/</a></p><p>★TreeGenes树木遗传图谱数据库。<br><a href="http://probe.nalusda.gov:8000/plant/abouttreegenes.html" target="_blank" rel="noopener">http://probe.nalusda.gov:8000/plant/abouttreegenes.html</a></p><p>基因组信息分析<br>1．基因组序列信息的提取和分析<br>dbEST<br><a href="http://www.ncbi.nlm.nih.gov/dbEST/index.html" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/dbEST/index.html</a><br>UniGene<br><a href="http://www.ncbi.nlm.nih.gov/entr" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/entr</a> … arch&amp;DB=unigene<br>Transcription factor database<br><a href="http://transfac.gdb.de/TRANSFAC/" target="_blank" rel="noopener">http://transfac.gdb.de/TRANSFAC/</a><br>基因组信息分析<br>2．功能基因组相关信息分析<br>NCBI<br><a href="http://www.ncbi.nlm.nih.gov/" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/</a><br>Entrez<br><a href="http://www.ncbi.nlm.nih.gov/Entrez" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/Entrez</a><br>OMIM<br><a href="http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?db=OMIM" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/entrez/query.fcgi?db=OMIM</a></p><p>蛋白质组学相关信息分析<br>SWISS-2DPAGE<br><a href="http://us.expasy.org/ch2d/" target="_blank" rel="noopener">http://us.expasy.org/ch2d/</a><br>SIENA-2DPAGE<br><a href="http://www.bio-mol.unisi.it/2d/2d.html" target="_blank" rel="noopener">http://www.bio-mol.unisi.it/2d/2d.html</a><br>Human 2D-PAGE Databases<br><a href="http://proteomics.cancer.dk/" target="_blank" rel="noopener">http://proteomics.cancer.dk/</a><br>PROSITE<br><a href="http://us.expasy.org/prosite/" target="_blank" rel="noopener">http://us.expasy.org/prosite/</a><br>PRINTS<br><a href="http://bioinf.man.ac.uk/dbbrowser/PRINTS/" target="_blank" rel="noopener">http://bioinf.man.ac.uk/dbbrowser/PRINTS/</a><br>Pfam<br>http:// <a href="http://www.sanger.ac.uk/Software/Pfam/" target="_blank" rel="noopener">www.sanger.ac.uk/Software/Pfam/</a><br>Blocks<br>http:// <a href="http://www.blocks.fhcrc.org/" target="_blank" rel="noopener">www.blocks.fhcrc.org/</a><br>SWISS-PROT蛋白质序列库<br><a href="http://us.expasy.org/sprot/" target="_blank" rel="noopener">http://us.expasy.org/sprot/</a></p><p>大分子结构模拟和药物设计生物信息分析<br>PDB<br><a href="http://www.rcsb.org/pdb/" target="_blank" rel="noopener">http://www.rcsb.org/pdb/</a><br>SCOP<br><a href="http://scop.mrc-lmb.cam.ac.uk/scop/" target="_blank" rel="noopener">http://scop.mrc-lmb.cam.ac.uk/scop/</a><br>CATH<br><a href="http://www.biochem.ucl.ac.uk/bsm/cath/" target="_blank" rel="noopener">http://www.biochem.ucl.ac.uk/bsm/cath/</a><br>SWISS-3DIMAGE<br><a href="http://us.expasy.org/sw3d/" target="_blank" rel="noopener">http://us.expasy.org/sw3d/</a><br>DSSP<br><a href="http://www.sander.ebi.ac.uk/dssp/" target="_blank" rel="noopener">http://www.sander.ebi.ac.uk/dssp/</a></p><p>PDBsum<br><a href="http://www.biochem.ucl.ac.uk/bsm/pdbsum/" target="_blank" rel="noopener">http://www.biochem.ucl.ac.uk/bsm/pdbsum/</a></p><p>核酸序列的预测分析</p><ol><li>重复序列分析<br>CENSOR<br><a href="http://www.girinst.org/" target="_blank" rel="noopener">http://www.girinst.org/</a><br>RepeatMasker<br><a href="http://ftp.genome.washington.edu/cgi-bin/RepeatMasker" target="_blank" rel="noopener">http://ftp.genome.washington.edu/cgi-bin/RepeatMasker</a><br>XBLAST程序<br><a href="http://www.ncbi.nlm.nih.gov/BLAST/" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/BLAST/</a></li></ol><p>核酸序列的预测分析<br>2. 数据库搜索<br>NCBI的BLAST<br><a href="http://www.ncbi.nlm.nih.gov/BLAST/" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/BLAST/</a></p><ol start="3"><li>编码区统计特性分析:<br>GRAIL<br><a href="http://compbio.ornl.gov/Grail-1.3/" target="_blank" rel="noopener">http://compbio.ornl.gov/Grail-1.3/</a><br>GenMARK<br><a href="http://www.genmarkag.com/" target="_blank" rel="noopener">http://www.genmarkag.com/</a><br>tRNAscan-SE<br><a href="http://www.genetics.wustl.edu/eddy/tRNAscan-SE/" target="_blank" rel="noopener">http://www.genetics.wustl.edu/eddy/tRNAscan-SE/</a><br>GENSCAN<br><a href="http://genes.mit.edu/GENSCAN.html" target="_blank" rel="noopener">http://genes.mit.edu/GENSCAN.html</a><br>蛋白质结构和功能的预测分析<br>预测蛋白质的物理性质<br>ExPASy<br><a href="http://www.expasy.ch/tools/" target="_blank" rel="noopener">http://www.expasy.ch/tools/</a><br>PROPSEARCH<br><a href="http://www.embl-heidelberg.de/prs.htm" target="_blank" rel="noopener">http://www.embl-heidelberg.de/prs.htm</a><br>SAPS<br><a href="http://www.isrec.isb-sib.ch/software/SAPS_form.html" target="_blank" rel="noopener">http://www.isrec.isb-sib.ch/software/SAPS_form.html</a><br>蛋白质结构和功能的预测分析<br>蛋白质二级结构预测 :<br>NnPredict<br><a href="http://www.cmpharm.ucsf.edu/~nomi/nnpredict.html" target="_blank" rel="noopener">http://www.cmpharm.ucsf.edu/~nomi/nnpredict.html</a><br>PredictProtein（国内镜像）：<br><a href="http://www.cbi.pku.edu.cn/predictprotein/" target="_blank" rel="noopener">http://www.cbi.pku.edu.cn/predictprotein/</a></li></ol><p>Tmpred<br><a href="http://www.ch.embnet.org/software/TMPRED_form.html" target="_blank" rel="noopener">http://www.ch.embnet.org/software/TMPRED_form.html</a><br>SignalP<br><a href="http://www.cbs.dtu.dk/services/SignalP/" target="_blank" rel="noopener">http://www.cbs.dtu.dk/services/SignalP/</a><br>蛋白质结构和功能的预测分析<br>蛋白质三维结构预测 :<br>SWISS-MODEL<br><a href="http://www.expasy.ch/swissmod/SWISS-MODEL.html" target="_blank" rel="noopener">http://www.expasy.ch/swissmod/SWISS-MODEL.html</a><br>PSI-BLAST<br><a href="http://www.ncbi.nlm.nih.gov/BLAST/" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/BLAST/</a></p><p>家畜和家禽:<br>★ChickGBASE鸡基因图谱计划，搜集全世界鸡基因图谱信息。<br><a href="http://www.ri.bbsrc.ac.uk/chickmap/chickgbase/manager.html" target="_blank" rel="noopener">http://www.ri.bbsrc.ac.uk/chickmap/chickgbase/manager.html</a></p><p>★Swimemap猪基因图谱计划，饮食店染色体图谱和标记。<br><a href="http://sol.marc.usda.gov/genome/swine/swine.html" target="_blank" rel="noopener">http://sol.marc.usda.gov/genome/swine/swine.html</a></p><p>★PiGBASE,猪基因图谱信息库。<br><a href="http://www.ri.bbsrc.ac.uk/pigmap/arkpig/" target="_blank" rel="noopener">http://www.ri.bbsrc.ac.uk/pigmap/arkpig/</a></p><p>★SheepBase已发表的绵羊基因位点数据库。<br><a href="http://dirk.invermay.cri.nz/" target="_blank" rel="noopener">http://dirk.invermay.cri.nz/</a></p><p>★Goatmap,山羊基因图谱数据库。<br><a href="http://locus.jouy.inra.fr/" target="_blank" rel="noopener">http://locus.jouy.inra.fr/</a></p><p>★HorseMap马基因图谱数据库。<br><a href="http://locus.jouy.inra.fr/" target="_blank" rel="noopener">http://locus.jouy.inra.fr/</a></p><p>★Bovmap法国的牛基因图谱数据库。<br><a href="http://locus.jouy.inra.fr/cgi-bin/bovmap/intro.pl" target="_blank" rel="noopener">http://locus.jouy.inra.fr/cgi-bin/bovmap/intro.pl</a></p><p>★BovBase英国的牛基因图谱数据库。<br><a href="http://www.ri.bbsrc.ac.uk/bovmap/arkbov/" target="_blank" rel="noopener">http://www.ri.bbsrc.ac.uk/bovmap/arkbov/</a></p><p>★BovGBASE美国农业部的家畜基因组图谱计划中的牛基因数据库。<br><a href="http://probe.nalusda.gov:8000/animal/aboutbovgbase.html" target="_blank" rel="noopener">http://probe.nalusda.gov:8000/animal/aboutbovgbase.html</a></p><p>★Buffmap水牛基因图谱数据库。<br><a href="http://locus.jouy.inra.fr/" target="_blank" rel="noopener">http://locus.jouy.inra.fr/</a></p><p>★DogMap狗基因图谱数据库。<br><a href="http://ubeclu.unibe.ch/itz/dogmap.html" target="_blank" rel="noopener">http://ubeclu.unibe.ch/itz/dogmap.html</a></p><p>★CatMap猫基因图谱数据库。<br><a href="http://www.ri.bbsrc.ac.uk/catmap/ark/" target="_blank" rel="noopener">http://www.ri.bbsrc.ac.uk/catmap/ark/</a></p><p>生物医学文献数据库<br>★MEDLINE是美国国家医学图书馆的文献摘要库，反映美国及其他国家3800多种医学和生物期刊的作者摘要和引用情况。<br><a href="http://www.nlm.nih.gov/dtabases/medline.html" target="_blank" rel="noopener">http://www.nlm.nih.gov/dtabases/medline.html</a><br>★最为方便的查询MEDLINE的方式，是通过NCBI的PubMed服务：<br><a href="http://www.ncbi.nlm.nih.gov/PubMed/" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/PubMed/</a><br>★SeqAnalRef这是由A.Bairoch个人维护的有关序列分析的文献目录。<br><a href="http://www.espasy.ch/seqanalref/" target="_blank" rel="noopener">http://www.espasy.ch/seqanalref/</a><br>★SCI是设在美国费城的科学信息研究所所提供的文献引用情况的检索服务。<br><a href="http://webofscience.com/" target="_blank" rel="noopener">http://webofscience.com/</a><br>★CancerWeb癌症网页：<br><a href="http://www.graylab.ac.uk/cancerweb.html" target="_blank" rel="noopener">http://www.graylab.ac.uk/cancerweb.html</a><br>★HUMAT人体解剖学数据库。<br><a href="http://ed.ac.uk/anatomy/database/humat/" target="_blank" rel="noopener">http://ed.ac.uk/anatomy/database/humat/</a><br>★KeyNet按生物序列功能组织的基因和蛋白质名称关键字库。<br><a href="http://www.ba.cnr.it/keynet.html/" target="_blank" rel="noopener">http://www.ba.cnr.it/keynet.html/</a><br>★BioABACUS生物学与生物技术以及计算机科学缩写字表。<br><a href="http://www.nmsu.edu/~molbio/bioABACUShome.html" target="_blank" rel="noopener">http://www.nmsu.edu/~molbio/bioABACUShome.html</a><br>其他数据库:<br>★ Taxonomy分类学数据库。<br><a href="http://www3.ncbi.nlm.nih.gov/Taxonomy/tax.html" target="_blank" rel="noopener">http://www3.ncbi.nlm.nih.gov/Taxonomy/tax.html</a></p><p>★ ETI世界生物多样性数据库设在荷兰的分类鉴定专家中心。<br><a href="http://www.eti.uva.nl/" target="_blank" rel="noopener">http://www.eti.uva.nl/</a></p><p>★ 位于美国麻省的Woods Hole海洋生物研究室有一个海洋动物数据库。<br><a href="http://www.mbl.edu/" target="_blank" rel="noopener">http://www.mbl.edu/</a></p><p>★ TAED适应性演化数据库。<br><a href="http://www.sbc.su.se/~liberles/TAED.html" target="_blank" rel="noopener">http://www.sbc.su.se/~liberles/TAED.html</a></p><p>★Integrated Database Retrieval Systems</p><p>★Entrez<br><a href="http://www.ncbi.nlm.nih.gov/Entrez/default.htm" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/Entrez/default.htm</a></p><p>★Sequence Retrieval System (SRS)<br><a href="http://www.seqnet.dl.ac.uk/srs/srsc" target="_blank" rel="noopener">http://www.seqnet.dl.ac.uk/srs/srsc</a></p><p>★The Institute for Genomic Research (TIGR), Human Gene Index (HGI) Sequence Search<br>4-1-2-DDPDE/USA<br><a href="http://www.tigr.org/tdb/hgi/searching/hgi_seq_search.html" target="_blank" rel="noopener">http://www.tigr.org/tdb/hgi/searching/hgi_seq_search.html</a><br>Search for nucleotides and peptides.</p><p>★TIGR HGI Reports<br>3-1-2-DDcW/USA<br><a href="http://www.tigr.org/tdb/hgi/searching/hgi_info.html" target="_blank" rel="noopener">http://www.tigr.org/tdb/hgi/searching/hgi_info.html</a><br>Retrieve sequences identified by EST ID, GenBank number etc.</p><p>★TIGR HGI Gene Expression Data<br>4-2-1-DDcW/USA<br><a href="http://www.tigr.org/tdb/hgi/searching/hgi_xpress_search.html" target="_blank" rel="noopener">http://www.tigr.org/tdb/hgi/searching/hgi_xpress_search.html</a><br>Search for tissue specific transcripts e.g. “lung”. cDNA libraries can also be searched.</p><p>★TIGR HGI Name Search<br>5-1-2-DDW/USA<br><a href="http://www.tigr.org/tdb/hgi/searching/hgi_name_search.html" target="_blank" rel="noopener">http://www.tigr.org/tdb/hgi/searching/hgi_name_search.html</a><br>Search for a sequence by the name of a gene product e.g. insulin.</p><p>★Genome Database (GDB)<br><a href="http://hgmp.mrc.ac.uk/gdb" target="_blank" rel="noopener">http://hgmp.mrc.ac.uk/gdb</a><br><a href="http://gdbwww.gdb.org/default.htm" target="_blank" rel="noopener">http://gdbwww.gdb.org/default.htm</a><br>Funding for this project has been withdrawn. This valuable database will remain online, but it should be noted that no new entries will be recorded after 31st July 1998.</p><p>序列列线<br>★Analysis and Annotation Tool for Finding Genes in Genomic Sequences<br>5-3-2-DcDPDFWE/USA<br><a href="http://genome.cs.mtu.edu/aat.html" target="_blank" rel="noopener">http://genome.cs.mtu.edu/aat.html</a><br>Identifies genes in a DNA sequence by comparing it to cDNA and protein sequence databases (including those at HGI, TIGR, dbEST, Swiss-Prot and nr).</p><p>★Pairwise Sequence Alignment<br>3-4-2-DcUPUFWE/USA<br><a href="http://genome.cs.mtu.edu/align/align.html" target="_blank" rel="noopener">http://genome.cs.mtu.edu/align/align.html</a><br>Computes the global alignment between two sequences. Compare DNA with DNA, cDNA or protein. For DNA and cDNA, settings (gap open penalty, gap extension etc.) can be defined.</p><p>★Multiple Sequence Alignemnt with MAP<br>4-3-2-DcUPUFWE/USA<br><a href="http://genome.cs.mtu.edu/map/map.html" target="_blank" rel="noopener">http://genome.cs.mtu.edu/map/map.html</a><br>Calculates the global alignment of DNA or protein sequences using an algorithm which computes the best overlapping alignment without penalising terminal gaps. Long internal gaps in short sequences are not penalised.</p><p>★Network Protein Sequence Analysis<br>5-4-1-PUW/France<br><a href="http://pbil.ibcp.fr/NPSA/npsa_clustalw.html" target="_blank" rel="noopener">http://pbil.ibcp.fr/NPSA/npsa_clustalw.html</a><br>ClustalW multiple sequence alignment.</p><p>★ALIGN<br>5-1-1-DUPUWE/France<br><a href="http://www2.igh.cnrs.fr/bin/align-guess.cgi" target="_blank" rel="noopener">http://www2.igh.cnrs.fr/bin/align-guess.cgi</a><br><a href="http://genome.eerie.fr/fasta/align-query.html" target="_blank" rel="noopener">http://genome.eerie.fr/fasta/align-query.html</a><br>Applies the BLOSUM50 matrix to deduce the optimal alignment between two sequences.</p><p>★Multiple Sequence Alignment with Hierarchial Clustering<br>5-5-3-PUW/France<br><a href="http://www.toulouse.inra.fr/multalin.html" target="_blank" rel="noopener">http://www.toulouse.inra.fr/multalin.html</a><br>Sequence alignment with a colour output where differing or similar amino acids in the alignment can be highlighted.</p><p>★Colour INteractive Editor for Multiple Alignments (CINEMA)<br><a href="http://www.biochem.ucl.ac.uk/bsm/dbbrowser/CINEMA2.1/default.htm" target="_blank" rel="noopener">http://www.biochem.ucl.ac.uk/bsm/dbbrowser/CINEMA2.1/default.htm</a><br>A comprehensive and popular site. Allows the user to visualise and manipulate aligned protein sequences.<br>Makes use of Java. I recommend you access this site from a fast workstation!</p><p>★VSNS BioComputing Division Multiple Alignment Resource Page<br><a href="http://www.techfak.uni-bielefeld.de/bcd/Curric/MulAli/default.htm" target="_blank" rel="noopener">http://www.techfak.uni-bielefeld.de/bcd/Curric/MulAli/default.htm</a><br>An excellent, comprehensive resource for multiple sequence alignment, software and tutorials.</p><p>新序列发送:</p><p>★EMBL<br><a href="http://www.ebi.ac.uk/subs/emblsubs.html" target="_blank" rel="noopener">http://www.ebi.ac.uk/subs/emblsubs.html</a></p><p>★BankIt (GenBank)<br><a href="http://www.ncbi.nlm.nih.gov/default.htm" target="_blank" rel="noopener">http://www.ncbi.nlm.nih.gov/default.htm</a></p><hr><p>Reference:</p><ul><li><a href="https://blog.csdn.net/g863402758/article/details/52957299" target="_blank" rel="noopener">g863402758, 2016-10-28</a></li></ul><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Chip-seq (black)</title>
      <link href="/Bioinfor/Chip-seq_Con.html"/>
      <url>/Bioinfor/Chip-seq_Con.html</url>
      
        <content type="html"><![CDATA[<h1 id="Chip-seq-black"><a href="#Chip-seq-black" class="headerlink" title="Chip-seq (black)"></a>Chip-seq (black)</h1><p><a href="http://www.cd-genomics.org/wp-content/themes/v1/pdf/Genome-Wide-Profiling-of-Histone-Modifications-with-ChIP-Seq.pdf" target="_blank" rel="noopener">http://www.cd-genomics.org/wp-content/themes/v1/pdf/Genome-Wide-Profiling-of-Histone-Modifications-with-ChIP-Seq.pdf</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>DNA Mathylation</title>
      <link href="/Bioinfor/DNA-Mathylation.html"/>
      <url>/Bioinfor/DNA-Mathylation.html</url>
      
        <content type="html"><![CDATA[<h1 id="DNA-Mathylation"><a href="#DNA-Mathylation" class="headerlink" title="DNA Mathylation"></a>DNA Mathylation</h1><p>==</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Entrez Direct: E-utilities on the UNIX Command Line</title>
      <link href="/Bioinfor/E-utilities.html"/>
      <url>/Bioinfor/E-utilities.html</url>
      
        <content type="html"><![CDATA[<h1>Entrez Direct: E-utilities on the UNIX Command Line</h1><h1>Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~</span><br><span class="line">/bin/bash</span><br><span class="line">perl -MNet::FTP -e \</span><br><span class="line">    <span class="string">'$ftp = new Net::FTP("ftp.ncbi.nlm.nih.gov", Passive =&gt; 1);</span></span><br><span class="line"><span class="string">    $ftp-&gt;login; $ftp-&gt;binary;</span></span><br><span class="line"><span class="string">    $ftp-&gt;get("/entrez/entrezdirect/edirect.tar.gz");'</span></span><br><span class="line">gunzip -c edirect.tar.gz | tar xf -</span><br><span class="line">rm edirect.tar.gz</span><br><span class="line"><span class="built_in">builtin</span> <span class="built_in">exit</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:<span class="variable">$HOME</span>/edirect &gt;&amp; /dev/null || setenv PATH <span class="string">"<span class="variable">$&#123;PATH&#125;</span>:<span class="variable">$HOME</span>/edirect"</span></span><br><span class="line">./edirect/setup.sh</span><br></pre></td></tr></table></figure></div><p>or, you can using <strong>Bioconda</strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">conda install -c bioconda entrez-direct</span><br></pre></td></tr></table></figure></div><h1>Cookbook</h1><p>Origin: <a href="https://github.com/NCBI-Hackathons/EDirectCookbook" target="_blank" rel="noopener">NCBI-Hackathons (Archive)<br></a></p><h2 id="Best-Practices-for-EDirect"><a class="header-anchor" href="#Best-Practices-for-EDirect"></a>Best Practices for EDirect:</h2><ul><li>Please keep to &lt;50,000 expected hits (it simply won’t work)</li><li>Please do not run from multiple processors on a compute farm</li><li>Update to latest version</li></ul><p>For more information and documentation on EDirect, please see:</p><ul><li><a href="https://www.ncbi.nlm.nih.gov/books/NBK179288/" target="_blank" rel="noopener">Entrez Direct: E-utilities on the Unix Command Line</a></li><li><a href="https://dataguide.nlm.nih.gov/edirect/overview.html" target="_blank" rel="noopener">Insiders Guide to Accessing NLM Data: EDirect Overview</a></li></ul><p><strong>All items below come with no explicit or implicit warranty.</strong></p><p><strong>All code is as-is and produced for the bioinformatics community, from the bioinformatics community.</strong></p><h2 id="EDirect-Scripts"><a class="header-anchor" href="#EDirect-Scripts"></a>EDirect Scripts</h2><h2 id="1-Protein"><a class="header-anchor" href="#1-Protein"></a>1. Protein</h2><p>Description (optional):<br>Written by: Peter Cooper<br>Confirmed by: Ben Busby<br>Databases: Taxonomy</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">efetch -db nuccore -id NZ_AZKP01000022.1 -seq_start 149413 -seq_stop 154038 -format gbc | xtract -insd CDS INSDInterval_from INSDInterval_to protein_id product</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NZ_AZKP01000022.1  1  480  WP_024797446.1  DEAD/DEAH box helicase</span><br><span class="line">NZ_AZKP01000022.1  501  3626  WP_024797445.1  site-specific DNA-methyltransferase</span><br><span class="line">NZ_AZKP01000022.1  3629  4626  WP_024797444.1  DEAD/DEAH box helicase family protein</span><br></pre></td></tr></table></figure></div><h2 id="2-taxids-of-taxonomy"><a class="header-anchor" href="#2-taxids-of-taxonomy"></a>2. taxids of taxonomy</h2><p>Description (optional):  Note:  Options for parsing nodes.dmp from NCBI Taxonomy are cited in issue #25, intentionally left open<br>Written by: Scott McGinnis (11/17/2017)<br>Confirmed by:<br>Databases: Taxonomy</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esearch -db taxonomy -query &quot;vertebrata[orgn]&quot; | efetch -db taxonomy -format docsum | xtract -pattern DocumentSummary -if Rank -equals family -element Id,Division,ScientificName,CommonName | more</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h2 id="3-SRA-from-BioProject"><a class="header-anchor" href="#3-SRA-from-BioProject"></a>3. SRA from BioProject</h2><p>Description: Given an SRA Run ID (e.g. SRR532256) that is a member of a BioProject that has additional runs, retrieve all the other run IDs. This is a variant of the BioProject call below.<br>Written by: Rob Edwards (1/11/2018)<br>Confirmed by:<br>Databases: SRA, BioProject</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esearch -db sra -query &quot;SRR532256&quot; |  efetch -format docsum | xtract -pattern Runs -ACC @acc  -element &quot;&amp;ACC&quot;</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to SRA list:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">SRR545469  SRR539813  SRR532971  SRR532256  SRR532204  SRR532200  SRR532194  SRR532250</span><br></pre></td></tr></table></figure></div><h3 id="3-1-Get-all-SRA-for-a-BioProject"><a class="header-anchor" href="#3-1-Get-all-SRA-for-a-BioProject"></a>3.1 Get all SRA for a BioProject</h3><p>Description (optional):<br>Written by: Bob Sanders (3/22/2017)<br>Confirmed by:<br>Databases: SRA, BioProject</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">esearch -db bioproject -query &quot;PRJNA356464&quot; | elink -target sra | efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -ACC @acc -block DocumentSummary -element &quot;&amp;ACC&quot;</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to SRA list:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SRA507436  SRX2439829  SRP095511  SRS1874418  SRR5125027</span><br><span class="line">SRA507436  SRX2439828  SRP095511  SRS1874418  SRR5125026</span><br><span class="line">SRA507436  SRX2439826  SRP095511  SRS1874418  SRR5125024</span><br></pre></td></tr></table></figure></div><h3 id="3-2-Get-latitiude-and-longitude-for-SRA-Datasets-e-g-outbreaks-and-metagenomes"><a class="header-anchor" href="#3-2-Get-latitiude-and-longitude-for-SRA-Datasets-e-g-outbreaks-and-metagenomes"></a>3.2 Get latitiude and longitude for SRA Datasets (e.g. outbreaks and metagenomes)</h3><p>Description (optional):<br>Written by: BB, Mike D, Rob Edwards (4/12/2017)<br>Confirmed by:<br>Databases: SRA, BioSample</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># make a ID list</span><br><span class="line">echo &quot;SRA507436SRX2439829SRP095511SRS1874418SRR5125027&quot; |sed &#39;s&#x2F;SR&#x2F; SR&#x2F;g&#39;| tr &quot; &quot; &#39;\n&#39; | sed &#39;&#x2F;^$&#x2F;d&#39; &gt; sra_ids.txt</span><br><span class="line"># run</span><br><span class="line">for i in $(cat sra_ids.txt); do ll&#x3D;$(esearch -db sra -query $i | \</span><br><span class="line">elink -target biosample | efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -block Attribute -if Attribute@attribute_name -equals lat_lon -element Attribute); \</span><br><span class="line">echo -e &quot;$i\t$ll&quot;; done</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SRA507436</span><br><span class="line">SRX2439829</span><br><span class="line">SRP095511</span><br><span class="line">SRS1874418</span><br><span class="line">SRR5125027</span><br></pre></td></tr></table></figure></div><p>returns nothing - -</p><h3 id="3-3-SRA-sizes"><a class="header-anchor" href="#3-3-SRA-sizes"></a>3.3 SRA sizes</h3><p>Description (optional): This retrieves the SRR id and the size in bp of the run from a file (<code>ids.txt</code>) of SRR IDs. You can also change <code>bases</code> to <code>size_MB</code>to get the size of the dataset in MB. <em>Question: Does the size in MB include the sequence identifiers (i.e. the size of the file) or just the sequences?</em><br>Written by: Rob Edwards (7/6/2017)<br>Confirmed by:<br>Databases: SRA</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># make a ID list</span><br><span class="line">echo &quot;SRA507436SRX2439829SRP095511SRS1874418SRR5125027&quot; |sed &#39;s&#x2F;SR&#x2F; SR&#x2F;g&#39;| tr &quot; &quot; &#39;\n&#39; | sed &#39;&#x2F;^$&#x2F;d&#39; &gt; ids.txt</span><br><span class="line"># Run</span><br><span class="line">epost -db sra -input ids.txt -format acc | esummary -format runinfo -mode xml | xtract -pattern Row -element Run,bases</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SRR5125024  36123158012</span><br><span class="line">SRR5125026  44717689640</span><br><span class="line">SRR5125027  26480446596</span><br></pre></td></tr></table></figure></div><h2 id="4-Gene"><a class="header-anchor" href="#4-Gene"></a>4 Gene</h2><h3 id="4-1-Gene-Aliases"><a class="header-anchor" href="#4-1-Gene-Aliases"></a>4.1 Gene Aliases</h3><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: gene</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">esearch -db gene -query &quot;Liver cancer AND Homo sapiens&quot; | \</span><br><span class="line">efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -element Name OtherAliases OtherDesignations</span><br></pre></td></tr></table></figure></div><h3 id="4-2-Genomic-fa-Download"><a class="header-anchor" href="#4-2-Genomic-fa-Download"></a>4.2 Genomic.fa Download</h3><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by: Peter Cooper (NCBI) and Wayne Matten (NCBI) (12/29/2016, v6.00)<br>Databases: assembly</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget &#96;esearch -db assembly -query &quot;Leptospira alstonii[ORGN] AND latest[SB]&quot; | \</span><br><span class="line">efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -element FtpPath_RefSeq | \</span><br><span class="line">awk -F&quot;&#x2F;&quot; &#39;&#123;print $0&quot;&#x2F;&quot;$NF&quot;_genomic.fna.gz&quot;&#125;&#39;&#96;</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">(For larger sets of data the above may fail as wget may not accept a very large number of arguments.</span><br><span class="line">The command below should work for all.)</span><br><span class="line"></span><br><span class="line">esearch -db assembly -query &quot;Leptospira alstonii[ORGN] AND latest[SB]&quot; | \</span><br><span class="line">efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -element FtpPath_RefSeq | \</span><br><span class="line">awk -F&quot;&#x2F;&quot; &#39;&#123;print $0&quot;&#x2F;&quot;$NF&quot;_genomic.fna.gz&quot;&#125;&#39; | \</span><br><span class="line">xargs wget</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">--2020-05-18 17:45:54--  ftp:&#x2F;&#x2F;ftp.ncbi.nlm.nih.gov&#x2F;genomes&#x2F;all&#x2F;GCF&#x2F;001&#x2F;569&#x2F;445&#x2F;GCF_001569445.1_ASM156944v1&#x2F;GCF_001569445.1_ASM156944v1_genomic.fna.gz</span><br><span class="line">  (try: 2) &#x3D;&gt; ‘GCF_001569445.1_ASM156944v1_genomic.fna.gz’</span><br><span class="line">Connecting to ftp.ncbi.nlm.nih.gov (ftp.ncbi.nlm.nih.gov)|130.14.250.13|:21... connected.</span><br><span class="line">Logging in as anonymous ... Logged in!</span><br><span class="line">&#x3D;&#x3D;&gt; SYST ... done.    &#x3D;&#x3D;&gt; PWD ... done.</span><br><span class="line">&#x3D;&#x3D;&gt; TYPE I ... done.  &#x3D;&#x3D;&gt; CWD (1) &#x2F;genomes&#x2F;all&#x2F;GCF&#x2F;001&#x2F;569&#x2F;445&#x2F;GCF_001569445.1_ASM156944v1 ... done.</span><br><span class="line">&#x3D;&#x3D;&gt; SIZE GCF_001569445.1_ASM156944v1_genomic.fna.gz ... 1311014</span><br><span class="line">&#x3D;&#x3D;&gt; PASV ... done.    &#x3D;&#x3D;&gt; REST 870800 ... done.    </span><br><span class="line">&#x3D;&#x3D;&gt; RETR GCF_001569445.1_ASM156944v1_genomic.fna.gz ... done.</span><br><span class="line">Length: 1311014 (1.2M), 440214 (430K) remaining (unauthoritative)</span><br><span class="line"></span><br><span class="line">GCF_001569445.1_ASM156944v1_genomic.fna.gz                 68%[+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++&#x3D;&#x3D;&gt;                                          ] 880.29K   404 B&#x2F;s    eta 6m 49s</span><br></pre></td></tr></table></figure></div><h3 id="4-3-organellar-contigs-from-genbank"><a class="header-anchor" href="#4-3-organellar-contigs-from-genbank"></a>4.3 organellar contigs from genbank</h3><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: nuccore</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esearch -db nuccore -query &quot;LKAM01&quot; | efetch -format fasta</span><br></pre></td></tr></table></figure></div><h3 id="4-4-Get-protein-sequences-from-nucleotide-accessions"><a class="header-anchor" href="#4-4-Get-protein-sequences-from-nucleotide-accessions"></a>4.4 Get protein sequences from nucleotide accessions</h3><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: nuccore, protein</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cat accs_file | epost -db nuccore -format acc | \</span><br><span class="line">elink -target protein | efetch -format fasta</span><br></pre></td></tr></table></figure></div><h3 id="4-5-taxonomy-KPCOFG-for-taxids"><a class="header-anchor" href="#4-5-taxonomy-KPCOFG-for-taxids"></a>4.5 taxonomy (KPCOFG) for taxids</h3><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: taxonomy</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">efetch -db taxonomy -id 9606,1234,81726 -format xml | \</span><br><span class="line">xtract -pattern Taxon -tab &quot;,&quot; -first TaxId ScientificName \</span><br><span class="line">-group Taxon -KING &quot;(-)&quot; -PHYL &quot;(-)&quot; -CLSS &quot;(-)&quot; -ORDR &quot;(-)&quot; -FMLY &quot;(-)&quot; -GNUS &quot;(-)&quot; \</span><br><span class="line">-block &quot;*&#x2F;Taxon&quot; -match &quot;Rank:kingdom&quot; -KING ScientificName \</span><br><span class="line">-block &quot;*&#x2F;Taxon&quot; -match &quot;Rank:phylum&quot; -PHYL ScientificName \</span><br><span class="line">-block &quot;*&#x2F;Taxon&quot; -match &quot;Rank:class&quot; -CLSS ScientificName \</span><br><span class="line">-block &quot;*&#x2F;Taxon&quot; -match &quot;Rank:order&quot; -ORDR ScientificName \</span><br><span class="line">-block &quot;*&#x2F;Taxon&quot; -match &quot;Rank:family&quot; -FMLY ScientificName \</span><br><span class="line">-block &quot;*&#x2F;Taxon&quot; -match &quot;Rank:genus&quot; -GNUS ScientificName \</span><br><span class="line">-group Taxon -tab &quot;,&quot; -element &quot;&amp;KING&quot; &quot;&amp;PHYL&quot; &quot;&amp;CLSS&quot; &quot;&amp;ORDR&quot; &quot;&amp;FMLY&quot; &quot;&amp;GNUS&quot;</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">9606,Homo sapiens,Metazoa,Chordata,Mammalia,Primates,Hominidae,Homo</span><br><span class="line">1234,Nitrospira,-,Nitrospirae,Nitrospira,Nitrospirales,Nitrospiraceae,-</span><br><span class="line">81726,unidentified microorganism,-,-,-,-,-,-</span><br></pre></td></tr></table></figure></div><h2 id="5-Obtain-UniProt-IDs-from-gene-symbols"><a class="header-anchor" href="#5-Obtain-UniProt-IDs-from-gene-symbols"></a>5 Obtain UniProt IDs from gene symbols</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: gene, protein</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">esearch -db gene -query &quot;tp53[preferred symbol] AND human[organism]&quot; | \</span><br><span class="line">elink -target protein | \</span><br><span class="line">esummary | \</span><br><span class="line">xtract -pattern DocumentSummary -element Caption SourceDb | \</span><br><span class="line">grep -E &#39;^[OPQ][0-9][A-Z0-9]&#123;3&#125;[0-9]\|^[A-NR-Z][0-9]([A-Z][A-Z0-9]&#123;2&#125;[0-9])&#123;1,2&#125;&#39;</span><br></pre></td></tr></table></figure></div><h2 id="6-Taxon-IDs-from-genome-accession-numbers"><a class="header-anchor" href="#6-Taxon-IDs-from-genome-accession-numbers"></a>6. Taxon IDs from genome accession numbers</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: nuccore</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cat genome_accession.txt | \</span><br><span class="line">epost -db nuccore -format acc | \</span><br><span class="line">esummary | \</span><br><span class="line">xtract -pattern DocumentSummary -element AccessionVersion TaxId</span><br></pre></td></tr></table></figure></div><h2 id="7-Convert-article-DOI-to-PMID"><a class="header-anchor" href="#7-Convert-article-DOI-to-PMID"></a>7. Convert article DOI to PMID</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by: Mike Davidson (NLM) (12/16/2016, v5.80)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">esearch -db pubmed -query &quot;10.1111&#x2F;j.1468-3083.2012.04708.x&quot; | \</span><br><span class="line">esummary | \</span><br><span class="line">xtract -pattern DocumentSummary -block ArticleId -sep &quot;\t&quot; -tab &quot;\n&quot; -element IdType,Value | \</span><br><span class="line">grep -E &#39;^pubmed|doi&#39;</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pubmed  23004926</span><br><span class="line">doi  10.1111/j.1468-3083.2012.04708.x</span><br></pre></td></tr></table></figure></div><h2 id="8-Access-organism-specific-meta-data-from-NCBI-genome-database"><a class="header-anchor" href="#8-Access-organism-specific-meta-data-from-NCBI-genome-database"></a>8. Access organism specific meta-data from NCBI genome database</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: genome, bioproject</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">esearch -db genome -query &quot;22954[uid]&quot; | \</span><br><span class="line">elink -target bioproject | \</span><br><span class="line">efetch -format xml | \</span><br><span class="line">xtract -pattern DocumentSummary -element Salinity OxygenReq OptimumTemperature TemperatureRange Habitat</span><br></pre></td></tr></table></figure></div><h2 id="9-Get-the-status-of-records-from-PubMed-search"><a class="header-anchor" href="#9-Get-the-status-of-records-from-PubMed-search"></a>9. Get the status of records from PubMed search</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by: Mike Davidson (NLM) (12/16/2016, v5.80)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">esearch -db pubmed -query &quot;pde3a AND 2016[dp]&quot; | \</span><br><span class="line">esummary | \</span><br><span class="line">xtract -pattern DocumentSummary -element Id RecordStatus</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">28959341  PubMed</span><br><span class="line">28060719  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27975297  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27927168  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27865066  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27053290  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27765510  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27524442  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27662514  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27647936  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27633875  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27610941  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27502037  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">27180831  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">28959563  PubMed</span><br><span class="line">26934198  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">26926596  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">26656089  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">26628038  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">26460717  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br><span class="line">26374610  PubMed - indexed <span class="keyword">for</span> MEDLINE</span><br></pre></td></tr></table></figure></div><h3 id="9-1-Conduct-a-PubMed-search-and-retrieve-the-results-as-a-list-of-PMIDs"><a class="header-anchor" href="#9-1-Conduct-a-PubMed-search-and-retrieve-the-results-as-a-list-of-PMIDs"></a>9.1 Conduct a PubMed search and retrieve the results as a list of PMIDs</h3><p>Description (optional):<br>Written by: Mike Davidson (2/22/2017)<br>Confirmed by: Mike Davidson (NLM) (2/22/2017, v6.30)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esearch -db pubmed -query &quot;seasonal affective disorder&quot; | efetch -format uid</span><br></pre></td></tr></table></figure></div><p><strong><span style="Background:salmon">backs to:</span></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">32277035</span><br><span class="line">32252583</span><br><span class="line">32163458</span><br><span class="line">32111489</span><br><span class="line">32108162</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><h2 id="10-Sort-the-hits-by-sequence-length-in-nucleotide-database"><a class="header-anchor" href="#10-Sort-the-hits-by-sequence-length-in-nucleotide-database"></a>10. Sort the hits by sequence length in nucleotide database</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: nuccore</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">esearch -db nuccore -query &quot;bacillus[orgn] AND biomol_rRNA[prop] AND 1500:1560[slen]&quot; | \</span><br><span class="line">esummary | \</span><br><span class="line">xtract -pattern DocumentSummary -element Slen Extra | \</span><br><span class="line">sort -rnk 1</span><br></pre></td></tr></table></figure></div><h2 id="11-Getting-meta-data-from-assembly"><a class="header-anchor" href="#11-Getting-meta-data-from-assembly"></a>11. Getting meta data from assembly</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: assembly</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">esearch -db assembly -query &quot;mammals[orgn] AND latest[filter]&quot; | \</span><br><span class="line">efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -element Organism,SpeciesName,BioSampleAccn,LastMajorReleaseAccession \</span><br><span class="line">-block Stat -if &quot;@category&quot; -equals chromosome_count -element Stat | \</span><br><span class="line">grep -Pv &quot;\t0$&quot;</span><br></pre></td></tr></table></figure></div><h2 id="12-Fetch-HSPs-from-a-BLAST-hit-in-FASTA"><a class="header-anchor" href="#12-Fetch-HSPs-from-a-BLAST-hit-in-FASTA"></a>12. Fetch HSPs from a BLAST hit in FASTA</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: nuccore</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blastn -db nr -query in.fna -remote -outfmt &quot;6 sacc sstart send&quot; | \</span><br><span class="line">xargs -n 3 sh -c &#39;efetch -db nuccore -id &quot;$0&quot; -seq_start &quot;$1&quot; -seq_stop &quot;$2&quot; -format fasta&#39;</span><br></pre></td></tr></table></figure></div><h2 id="13-Get-all-Gene-Ontology-IDs-for-a-given-protein-accession"><a class="header-anchor" href="#13-Get-all-Gene-Ontology-IDs-for-a-given-protein-accession"></a>13. Get all Gene Ontology IDs for a given protein accession</h2><p>Description (optional):<br>Written by: NCBI Folks (12/14/2016)<br>Confirmed by:<br>Databases: protien, biosystems</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">epost -db protein -id BAD92651.1 -format acc | \</span><br><span class="line">elink -target biosystems | \</span><br><span class="line">efetch -format docsum | \</span><br><span class="line">xtract -pattern externalid -element externalid | \</span><br><span class="line">awk &#39;&#123;if ($0 ~ &#x2F;GO&#x2F;) print $0&#125;&#39;</span><br></pre></td></tr></table></figure></div><h2 id="14-Get-the-ten-most-frequently-occurring-authors-for-a-set-of-articles"><a class="header-anchor" href="#14-Get-the-ten-most-frequently-occurring-authors-for-a-set-of-articles"></a>14. Get the ten most frequently-occurring authors for a set of articles</h2><p>Description (optional): Searches PubMed for the string “traumatic brain injury athletes”, restricts results to those published in 2015 and 2016, retrieves the full XML records for each of the search results, extracts the last name and initials of every author on every record, sorts the authors by frequency of occurrence in the results set, and presents the top ten most frequently-occurring authors, along with the number of times that author appeared.<br>Written by: Mike Davidson (NLM) (12/15/2016)<br>Confirmed by: Mike Davidson (NLM) (12/16/2016)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">esearch -db pubmed -query &quot;traumatic brain injury athletes&quot; -datetype PDAT -mindate 2015 -maxdate 2016 | \</span><br><span class="line">efetch -format xml | \</span><br><span class="line">xtract -pattern Author -sep &quot; &quot; -element LastName,Initials | \</span><br><span class="line">sort-uniq-count-rank | \</span><br><span class="line">head -n 10</span><br></pre></td></tr></table></figure></div><h2 id="15-Get-the-ten-funding-agencies-who-are-most-active-in-funding-articles-on-a-particular-topic"><a class="header-anchor" href="#15-Get-the-ten-funding-agencies-who-are-most-active-in-funding-articles-on-a-particular-topic"></a>15. Get the ten funding agencies who are most active in funding articles on a particular topic</h2><p>Description (optional): Searches PubMed for the string “diabetes AND pregnancy”, restricts results to those published in 2014 through 2016, retrieves the full XML records for each of the search results, extracts the funding agencies for every  grant on every record, sorts the agencies by frequency of occurrence in the results set, and presents the top ten most frequently-occurring agencies, along with the number of times that agency appeared.<br>Written by: Mike Davidson (2/17/2017)<br>Confirmed by:  Mike Davidson (NLM) (v6.30, 2/17/2017)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">esearch -db pubmed -query &quot;diabetes AND pregnancy&quot; -datetype PDAT -mindate 2014 -maxdate 2016 | \</span><br><span class="line">efetch -format xml | \</span><br><span class="line">xtract -pattern Grant -element Agency | \</span><br><span class="line">sort-uniq-count-rank | \</span><br><span class="line">head -n 10</span><br></pre></td></tr></table></figure></div><h2 id="16-Look-up-the-publication-date-for-thousands-of-PMIDs-option-one"><a class="header-anchor" href="#16-Look-up-the-publication-date-for-thousands-of-PMIDs-option-one"></a>16. Look up the publication date for thousands of PMIDs (option one)</h2><p>Description (optional):  Takes a file which contains a list of PMIDs (table_of_pubmed_ids) and uses <code>cat</code> to access the contents of the file, <code>epost</code> to post the PMIDs to the history server, <code>efetch</code> to retrieve the records and <code>xtract</code> to extract PMID and Publication Date.<br>Written by: NCBI Folks (12/15/2016)<br>Confirmed by:  Mike Davidson (NLM) (v6.30, 2/17/2017)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat table_of_pubmed_ids | \</span><br><span class="line">epost -db pubmed | \</span><br><span class="line">efetch -format xml | \</span><br><span class="line">xtract -pattern PubmedArticle -element MedlineCitation&#x2F;PMID \</span><br><span class="line">-block PubDate -sep &quot; &quot; -element Year,Month MedlineDate</span><br></pre></td></tr></table></figure></div><h2 id="17-Look-up-the-publication-date-for-thousands-of-PMIDs-option-two"><a class="header-anchor" href="#17-Look-up-the-publication-date-for-thousands-of-PMIDs-option-two"></a>17. Look up the publication date for thousands of PMIDs (option two)</h2><p>Description (optional): Takes a file which contains a list of PMIDs (table_of_pubmed_ids) and <code>epost -input</code> to access the contents of the file and post the PMIDs to the history server, <code>efetch</code> to retrieve the records and <code>xtract</code> to extract PMID and Publication Date.<br>Written by: Mike Davidson (2/17/2017)<br>Confirmed by:  Mike Davidson (NLM) (v6.30, 2/17/2017)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">epost -input table_of_pubmed_ids -db pubmed | \</span><br><span class="line">efetch -format xml | \</span><br><span class="line">xtract -pattern PubmedArticle -element MedlineCitation&#x2F;PMID \</span><br><span class="line">-block PubDate -sep &quot; &quot; -element Year,Month MedlineDate</span><br></pre></td></tr></table></figure></div><h2 id="18-Find-the-first-author-for-a-set-of-PubMed-records"><a class="header-anchor" href="#18-Find-the-first-author-for-a-set-of-PubMed-records"></a>18. Find the first author for a set of PubMed records</h2><p>Description (optional): Outputs the PMID and first author’s last name and initials for one or more PubMed records<br>Written by: Mike Davidson (2/17/2017)<br>Confirmed by:  Mike Davidson (NLM) (v6.30, 2/17/2017)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">efetch -db pubmed -id 16940437 -format xml | \</span><br><span class="line">xtract -pattern PubmedArticle -element MedlineCitation&#x2F;PMID \</span><br><span class="line">-block Author -position first -sep &quot; &quot; -element LastName,Initials</span><br></pre></td></tr></table></figure></div><h2 id="19-Find-the-first-author-and-any-other-authors-who-contributed-equally-for-a-set-of-PubMed-records"><a class="header-anchor" href="#19-Find-the-first-author-and-any-other-authors-who-contributed-equally-for-a-set-of-PubMed-records"></a>19. Find the first author and any other authors who contributed equally for a set of PubMed records</h2><p>Description (optional): Outputs the PMID and first author’s last name and initials for one or more PubMed records. If the record indicates equal contributors to the first author, the last name and initials for all equal contributors will also be output, separated by commas.<br>Written by: Mike Davidson (10/27/2017)<br>Confirmed by:  Mike Davidson (NLM) (v7.40, 10/27/2017)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">efetch -db pubmed -id 22358458,26877147 -format xml | \</span><br><span class="line">xtract -pattern PubmedArticle -element MedlineCitation&#x2F;PMID \</span><br><span class="line">-block Author -position first -sep &quot; &quot; -tab &quot;, &quot; -element LastName,Initials -EQUAL Author@EqualContrib \</span><br><span class="line">-block Author -if &quot;+&quot; -is-not 1 \</span><br><span class="line">-and Author@EqualContrib -equals Y \</span><br><span class="line">-and &quot;&amp;EQUAL&quot; -equals Y \</span><br><span class="line">-sep &quot; &quot; -tab &quot;, &quot; -element LastName,Initials</span><br></pre></td></tr></table></figure></div><h2 id="20-Download-GEO-Data-from-a-BioProject-Accession"><a class="header-anchor" href="#20-Download-GEO-Data-from-a-BioProject-Accession"></a>20 Download GEO Data from a BioProject Accession</h2><p>Description (optional):<br>Written by: NCBI Folks (12/16/2016)<br>Confirmed by:<br>Databases: gds</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">esearch -db gds -query &quot;PRJNA313294[ACCN]&quot; | \</span><br><span class="line">efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -element FTPLink</span><br></pre></td></tr></table></figure></div><h2 id="21-Extract-all-MeSH-Headings-from-a-given-PMID"><a class="header-anchor" href="#21-Extract-all-MeSH-Headings-from-a-given-PMID"></a>21 Extract all MeSH Headings from a given PMID</h2><p>Description (optional): Retrieves the PMID of a PubMed record, followed by a pipe-delimitted list of MeSH Descriptors for a PMID.<br>Written by: Mike Davidson (10/02/2017)<br>Confirmed by: Mike Davidson (NLM) (v7.30, 10/02/2017)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">efetch -db pubmed -id 24102982 -format xml | \</span><br><span class="line">xtract -pattern PubmedArticle -tab &quot;|&quot; -element MedlineCitation&#x2F;PMID \</span><br><span class="line">-block MeshHeading -tab &quot;|&quot; -element DescriptorName</span><br></pre></td></tr></table></figure></div><h3 id="Extract-all-MeSH-Headings-and-Subheadings-from-a-given-PMID"><a class="header-anchor" href="#Extract-all-MeSH-Headings-and-Subheadings-from-a-given-PMID"></a>Extract all MeSH Headings and Subheadings from a given PMID</h3><p>Description (optional): Retrieves the PMID of a PubMed record, followed by a pipe-delimitted list of MeSH Descriptors and Qualifiers for a PMID. Each Descriptor is followed by any attached qualifiers, separated by “/”.<br>Written by: Mike Davidson (10/02/2017)<br>Confirmed by: Mike Davidson (NLM) (v7.30, 10/02/2017)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">efetch -db pubmed -id 24102982 -format xml | \</span><br><span class="line">xtract -pattern PubmedArticle -tab &quot;|&quot; -element MedlineCitation&#x2F;PMID \</span><br><span class="line">-block MeshHeading -tab &quot;|&quot; -sep &quot;&#x2F;&quot; -element DescriptorName,QualifierName</span><br></pre></td></tr></table></figure></div><h3 id="Search-for-articles-by-authors-affiliated-with-a-specific-institution-by-matching-two-partial-affiliation-strings"><a class="header-anchor" href="#Search-for-articles-by-authors-affiliated-with-a-specific-institution-by-matching-two-partial-affiliation-strings"></a>Search for articles by authors affiliated with a specific institution by matching two partial affiliation strings.</h3><p>Description (optional): Searching PubMed for two affiliation strings ANDed together (e.g. “translational medicine[AD] AND thomas jefferson[AD]”) will retrieve all records that have both strings listed somewhere in the record’s Affiliation data, but does not require both strings be listed on the same author’s affiliation. To generate a list of PMIDs where both strings are present in the same affiliation element, use the following script.<br>Written by: Mike Davidson (4/2/2018)<br>Confirmed by:  Mike Davidson (NLM) (v8.10, 4/2/2018)<br>Databases: pubmed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">esearch -db pubmed -query &quot;translational medicine[ad] AND thomas jefferson[ad]&quot; | \</span><br><span class="line">efetch -format xml | \</span><br><span class="line">xtract -pattern PubmedArticle -PMID MedlineCitation&#x2F;PMID \</span><br><span class="line">-block Affiliation -if Affiliation -contains &quot;translational medicine&quot; -and Affiliation -contains &quot;thomas jefferson&quot; \</span><br><span class="line">-tab &quot;\n&quot; -element &quot;&amp;PMID&quot; | \</span><br><span class="line">sort -n | uniq</span><br></pre></td></tr></table></figure></div><h3 id="Search-for-PMC-articles-citing-a-gived-PubMed-articler-retrieve-title-source-ID"><a class="header-anchor" href="#Search-for-PMC-articles-citing-a-gived-PubMed-articler-retrieve-title-source-ID"></a>Search for PMC articles citing a gived PubMed articler; retrieve title, source, ID</h3><p>Description: Retrieve information about all PMC articles (wihich have free fulltext available) which cite a gived PubMed article<br>Written by: Lukas Wagner (08/16/2018)<br>Databases: pubmed, pmc</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">esearch -db pubmed -query 23618408 | elink -name pubmed_pmc_refs -target pmc | \</span><br><span class="line">efetch -format docsum | \</span><br><span class="line">xtract -pattern DocumentSummary -element Title -element Source -block ArticleId -if &quot;IdType&quot; -equals pmcid -element Value</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Denove Prokaryotic Genome with Spader</title>
      <link href="/Bioinfor/Denove-Prokaryotic-Genome-with-Spader.html"/>
      <url>/Bioinfor/Denove-Prokaryotic-Genome-with-Spader.html</url>
      
        <content type="html"><![CDATA[<h1 id="Denove-Prokaryotic-Genome-with-Spader"><a href="#Denove-Prokaryotic-Genome-with-Spader" class="headerlink" title="Denove Prokaryotic Genome with Spader"></a>Denove Prokaryotic Genome with Spader</h1><h1 id="Data-Download"><a href="#Data-Download" class="headerlink" title="Data Download"></a>Data Download</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">a paired fastq file:</span><br><span class="line">  ERS011978_pass_1.fastq</span><br><span class="line">  ERS011978_pass_2.fastq</span><br></pre></td></tr></table></figure></div><h1 id="Filter-low-quality-reads"><a href="#Filter-low-quality-reads" class="headerlink" title="Filter low quality reads"></a>Filter low quality reads</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fastp -u 15 -i ERS011978_pass_1.fastq -I ERS011978_pass_2.fastq -o cut_ERS011978_pass_1.fastq -O cut_ERS011978_pass_2.fastq</span><br></pre></td></tr></table></figure></div><h1 id="cut-adapter-on-the-end"><a href="#cut-adapter-on-the-end" class="headerlink" title="cut adapter on the end"></a>cut adapter on the end</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#java -jar ~&#x2F;Biosoft&#x2F;Trimmomatic-0.38&#x2F;trimmomatic-0.38.jar PE \</span><br><span class="line">-threads 8 -phred33 input_forward.fq.gz input_reverse.fq.gz   \</span><br><span class="line">output_forward_paired.fq.gz output_forward_unpaired.fq.gz     \</span><br><span class="line">output_reverse_paired.fq.gz output_reverse_unpaired.fq.gz     \</span><br><span class="line">ILLUMINACLIP:TruSeq3-PE.fa:2:30:10 LEADING:3 TRAILING:3       \</span><br><span class="line">SLIDINGWINDOW:4:15 MINLEN:36</span><br></pre></td></tr></table></figure></div><h1 id="cut-the-adapter-tail-on-the-1-fastq"><a href="#cut-the-adapter-tail-on-the-1-fastq" class="headerlink" title="cut the adapter tail on the 1.fastq"></a>cut the adapter tail on the 1.fastq</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">java -jar  ~/Biosoft/Trimmomatic-0.38/trimmomatic-0.38.jar SE -threads 8 -phred33 cut_ERS011978_pass_1.fastq cut2_ERS011978_pass_1.fastq CROP:76</span><br><span class="line">mv cut2_ERS011978_pass_1.fastq cut_ERS011978_pass_1.fastq</span><br></pre></td></tr></table></figure></div><h1 id="spade"><a href="#spade" class="headerlink" title="spade:"></a>spade:</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo /home/ken/Biosoft/SPAdes-3.12.0-Linux/bin/spades.py -1 fastq/cut_ERS011978_pass_1.fastq -2 fastq/cut_ERS011978_pass_2.fastq -o /home/ken/ComGE/assembly3</span><br></pre></td></tr></table></figure></div><h1 id="state-information"><a href="#state-information" class="headerlink" title="state information"></a>state information</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Biosoft/bbmap/stats.sh assembly3/scaffolds.fasta</span><br></pre></td></tr></table></figure></div><h1 id="Predicted-the-genes-by-prodigal"><a href="#Predicted-the-genes-by-prodigal" class="headerlink" title="Predicted the genes by prodigal"></a>Predicted the genes by prodigal</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prodigal -i scaffolds.fasta -o my.genes -a Protein.fa</span><br></pre></td></tr></table></figure></div><h1 id="Predicted-the-rRNA-by-barrnap"><a href="#Predicted-the-rRNA-by-barrnap" class="headerlink" title="Predicted the rRNA by barrnap"></a>Predicted the rRNA by barrnap</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">barrnap --quiet scaffolds.fasta</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Go Ontology</title>
      <link href="/Bioinfor/GO_ontology.html"/>
      <url>/Bioinfor/GO_ontology.html</url>
      
        <content type="html"><![CDATA[<h1 id="Go-Ontology"><a href="#Go-Ontology" class="headerlink" title="Go Ontology"></a>Go Ontology</h1><p>general infr: <a href="https://www.jianshu.com/p/09eaa9048e0f" target="_blank" rel="noopener">happyxhz 2019</a></p><h1 id="Uniprot-to-GO"><a href="#Uniprot-to-GO" class="headerlink" title="Uniprot to GO"></a>Uniprot to GO</h1><p>reference 1 : <a href="https://www.cnblogs.com/wangshicheng/p/11171033.html" target="_blank" rel="noopener">wangshicheng 2017</a></p><h1 id="Enrichment"><a href="#Enrichment" class="headerlink" title="Enrichment"></a>Enrichment</h1><p>Reference: <a href="https://zhuanlan.zhihu.com/p/43651419" target="_blank" rel="noopener">既见君子</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Genome-Wide Profiling of Histone Modification with Chip-Seq (CD Genomics)</title>
      <link href="/Bioinfor/Genome_Histone_Chip-Seq_CD-Genomics.html"/>
      <url>/Bioinfor/Genome_Histone_Chip-Seq_CD-Genomics.html</url>
      
        <content type="html"><![CDATA[<h1 id="Genome-Wide-Profiling-of-Histone-Modification-with-Chip-Seq-CD-Genomics"><a href="#Genome-Wide-Profiling-of-Histone-Modification-with-Chip-Seq-CD-Genomics" class="headerlink" title="Genome-Wide Profiling of Histone Modification with Chip-Seq (CD Genomics)"></a>Genome-Wide Profiling of Histone Modification with Chip-Seq (CD Genomics)</h1><p>reference: CD genimics, <strong>Genom-Wide Profiling of Histone Modifications with ChIP-Seq</strong><br />**<br><a name="Ri2QX"></a></p><h1 id="Introduction-to-Histone-Modifications"><a href="#Introduction-to-Histone-Modifications" class="headerlink" title="Introduction to Histone Modifications"></a>Introduction to Histone Modifications</h1><p>There are at least <strong>9 different types</strong> of post-translational modifications (<strong>PTM</strong>) have been found.<br /><br><br /></p><table><thead><tr><th align="center">Examples of Modeification</th><th align="center">Functions of PTM</th></tr></thead><tbody><tr><td align="center"><strong>methylation</strong><br /><strong>acetylation</strong><br /><strong>phosphorylation</strong><br /><strong>ubiquitylation</strong><br /><strong>sumoylation</strong></td><td align="center"><strong>Change chromatin structures</strong><br /><strong>Recruit histone modifiers</strong><br /><strong>change in gene expression</strong><br /><strong>Transcriptional regulation</strong><br /><strong>chromosome packaging</strong><br />** DNA damage/repair**</td></tr></tbody></table><p><a name="lIZSv"></a></p><h1 id="Major-Types-of-Modification"><a href="#Major-Types-of-Modification" class="headerlink" title="Major Types of Modification"></a>Major Types of Modification</h1><p><a name="rPOVj"></a></p><h2 id="1-Methylation"><a href="#1-Methylation" class="headerlink" title="1. Methylation"></a>1. Methylation</h2><p><img src="https://s1.ax1x.com/2020/06/26/NroPbR.png" alt="NroPbR.png"></p><h2 id="2-Acetylation"><a href="#2-Acetylation" class="headerlink" title="2. Acetylation"></a>2. Acetylation</h2><p><img src="https://s1.ax1x.com/2020/06/26/NroCr9.png" alt="NroCr9.png"></p><h2 id="3-Phosphorylation"><a href="#3-Phosphorylation" class="headerlink" title="3. Phosphorylation"></a>3. Phosphorylation</h2><p><img src="https://s1.ax1x.com/2020/06/26/Nro9KJ.png" alt="Nro9KJ.png"></p><h2 id="4-Ubiquitylation"><a href="#4-Ubiquitylation" class="headerlink" title="4. Ubiquitylation"></a>4. Ubiquitylation</h2><p><img src="https://s1.ax1x.com/2020/06/26/NrokUx.png" alt="NrokUx.png"></p><p>ubiquitin moiety (76-amino-acid peptide.)<br /></p><p><a name="olIqU"></a></p><h2 id="5-Sumoylation"><a href="#5-Sumoylation" class="headerlink" title="5. Sumoylation"></a>5. Sumoylation</h2><p><img src="https://s1.ax1x.com/2020/06/26/NroFV1.png" alt="NroFV1.png"></p><h1 id="CHIP-SEQ-DATA-ANALYSIS"><a href="#CHIP-SEQ-DATA-ANALYSIS" class="headerlink" title="CHIP-SEQ DATA ANALYSIS"></a>CHIP-SEQ DATA ANALYSIS</h1><p><img src="https://s1.ax1x.com/2020/06/26/NroA56.png" alt="NroA56.png"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Odds Ratio</title>
      <link href="/Bioinfor/OddsRatio.html"/>
      <url>/Bioinfor/OddsRatio.html</url>
      
        <content type="html"><![CDATA[<h1 id="Odds-Ratio"><a href="#Odds-Ratio" class="headerlink" title="Odds Ratio"></a>Odds Ratio</h1><p><img src="https://psychscenehub.com/wp-content/uploads/2016/09/Screenshot-2016-09-03-16.30.35.png" alt="img"><br><a href="https://psychscenehub.com/psychpedia/odds-ratio-2/" target="_blank" rel="noopener">© psychscenehub 2020</a>  </p><p>#Odds ratio</p><p>Odds of an event happening is defined as the likelihood that an event will occur, expressed as a proportion of the likelihood that the event will not occur. Therefore, if A is the probability of subjects affected and B is probability of subjects not affected, then odds = A /B.</p><p>Therefore, the odds of rolling four on a dice are 1/5 or 20%.</p><p>Odds Ratio (OR) is a measure of association between exposure and an outcome. The OR represents the odds that an outcome will occur given a particular exposure, compared to the odds of the outcome occurring in the absence of that exposure.</p><p>Important points about Odds ratio:</p><ul><li>Calculated in case-control studies as incidence of outcome is not known</li><li>OR &gt;1 indicates increased occurrence of event</li><li>OR &lt;1 indicates decreased occurrence of event (protective exposure)</li><li>Look at CI and P value for statistical significance of value</li><li>In rare outcomes OR = RR   (RR = Relative Risk). This applies when the incidence of disease is &lt; 10%</li></ul><h2 id="CLINICAL-EXAMPLE-AND-CALCULATION"><a href="#CLINICAL-EXAMPLE-AND-CALCULATION" class="headerlink" title="CLINICAL EXAMPLE AND CALCULATION"></a>CLINICAL EXAMPLE AND CALCULATION</h2><p>In a study examining the association between estrogen (exposure) and endometrial carcinoma (outcome), the two by two table is shown below.</p><p>Learning point: In a two by two table, for ease of calculation ensure that the outcome of interest is always at the top and the exposure on the left.</p><h2 id="annotations"><a href="#annotations" class="headerlink" title="annotations:"></a>annotations:</h2><p>cite from: <a href="https://psychscenehub.com/psychpedia/odds-ratio-2/" target="_blank" rel="noopener">psychscenehub</a><br>copyright belongs to the psychscenehub.com</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>QIIME2</title>
      <link href="/Bioinfor/QIIME2.html"/>
      <url>/Bioinfor/QIIME2.html</url>
      
        <content type="html"><![CDATA[<h1 id="QIIME2"><a href="#QIIME2" class="headerlink" title="QIIME2"></a>QIIME2</h1><h1 id="還沒更新"><a href="#還沒更新" class="headerlink" title="還沒更新"></a>還沒更新</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># 激活工作环境，需要几十秒</span><br><span class="line">source activate qiime2-2017.6</span><br><span class="line"></span><br><span class="line"># 检查是否安装成功，弹出程序帮助即成功</span><br><span class="line">qiime --help</span><br><span class="line"></span><br><span class="line"># 关闭工作环境：不用时关闭，不然你其它程序可能会出错</span><br><span class="line">source deactivate</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>RNA-seq with Trinity</title>
      <link href="/Bioinfor/RNA-seq-with-Trinity.html"/>
      <url>/Bioinfor/RNA-seq-with-Trinity.html</url>
      
        <content type="html"><![CDATA[<h1 id="RNA-seq-with-Trinity"><a href="#RNA-seq-with-Trinity" class="headerlink" title="RNA-seq with Trinity"></a>RNA-seq with Trinity</h1><p><img src="https://s1.ax1x.com/2020/06/26/Nro4d1.png" alt="Nro4d1.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#### Downloading the RNA-seq</span></span><br><span class="line">prefetch  --ascp-path <span class="string">"/usr/bin/ascp|/home/ken/.aspera/connect/etc/asperaweb_id_dsa.putty"</span> ERR025599</span><br><span class="line"></span><br><span class="line"><span class="comment">#### Split SSR to fastq</span></span><br><span class="line">fastq-dump --defline-seq <span class="string">'@$sn[_$rn]/$ri'</span> --split-files SRR77600*</span><br><span class="line"></span><br><span class="line"><span class="comment">#### cut the low quality reads</span></span><br><span class="line"><span class="comment">#basic command</span></span><br><span class="line"><span class="comment">#fastp -u 15 -w 8 -i SRR7760055_1.fastq -o cut_SRR7760055_1.fastq</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls *.fastq);<span class="keyword">do</span>  fastp -u 15 -w 8 -i <span class="variable">$i</span> -o cut_<span class="variable">$i</span>; mv fastp.html <span class="variable">$i</span>.html;<span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#### Trimmomatic cut the lower grade head or tail jodged by the quality report</span></span><br><span class="line">java -jar  trimmomatic-0.38.jar SE -threads 8 -phred33 SRR771602.fastq 2.fq ILLUMINACLIP:TruSeq3-SE:2:30:10 LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36 HEADCROP:10 CROP:87</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls cut_SRR77600*);<span class="keyword">do</span></span><br><span class="line">  java -jar  trimmomatic-0.38.jar SE -threads 8 -phred33 <span class="variable">$i</span> 2_<span class="variable">$i</span> ILLUMINACLIP:TruSeq3-SE:2:30:10 LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36 HEADCROP:10 CROP:87</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Trnity</span></span><br><span class="line">Trinity --seqType fq --max_memory 55G --single ../cut_SRR7760072_1.fastq --CPU 8 --full_cleanup</span><br><span class="line">Trinity --seqType fq --max_memory 55G --single 2_cut_SRR7760055_1.fastq --CPU 8 --full_cleanup</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls 2_cut_SRR77600*); <span class="keyword">do</span></span><br><span class="line">Trinity --seqType fq --max_memory 40G --single <span class="variable">$i</span> --CPU 8 --full_cleanup</span><br><span class="line">mv trinity_out_dir.Trinity.fasta <span class="variable">$i</span>.fa</span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Skill NetWork</title>
      <link href="/Bioinfor/SkillNet.html"/>
      <url>/Bioinfor/SkillNet.html</url>
      
        <content type="html"><![CDATA[<h1 id="Skill-NetWork"><a href="#Skill-NetWork" class="headerlink" title="Skill NetWork"></a>Skill NetWork</h1><pre class="mermaid">graph TB;   START(Bioinformatics)   A1(Sequencing)     A_A1(High-Throughput)  AltS((Alternative Splicing))  WGCNA((WGCNA))  GeneFa((Gene Family))  SNP((SNP))  GO((GO))  KEGG((KEGG))  GSEA((GSEA))START  --> A1A1 --> A_A1  A_A1 --> DNA-Seq  A_A1 --> RNA-Seq  A_A1 --> miRNA-Seq  A_A1 --> Chip-Seq  DNA-Seq --> Genome  Genome --> SNP  RNA-Seq    RNA-Seq --> SNP    RNA-Seq --> AltS    RNA-Seq --> GeneFa    RNA-Seq --> Expression    Expression      Expression --> WGCNA      Expression --> GSEA      Expression --> DEGs    DEGs      DEGs --> KEGG      DEGs --> GO    WGCNA      GO -.-> WGCNA      KEGG -.-> WGCNA  DNA-Seq</pre><p>DEGs: Differential Expression Genes<br>SNP: Single Nuclear polymorphism</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Tophat</title>
      <link href="/Bioinfor/Tophat.html"/>
      <url>/Bioinfor/Tophat.html</url>
      
        <content type="html"><![CDATA[<h1 id="Tophat"><a href="#Tophat" class="headerlink" title="Tophat"></a>Tophat</h1><h1 id="build-a-index"><a href="#build-a-index" class="headerlink" title="build a index"></a>build a index</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bowtie2-build seaGenome.fna seaGenome.fna</span><br></pre></td></tr></table></figure></div><p>#run tophat2</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tophat2 -p 8 -i 20 -I 4000 --min-segment-intron 20 --max-segment-intron 4000 --min-coverage-intron 20 --max-coverage-intron 4000 --coverage-search --microexon-search -G Apostichopus_japonicus.gff --library-type fr-firststrand seaGenome.fna SRR771602.fastq</span><br><span class="line"></span><br><span class="line">~/Biosoft/cufflinks-2.2.1.Linux_x86_64/cufflinks -p 8 -b ../tophat/erecta.fna -u -o sample1 ../tophat/tophat_out/accepted_hits.bam</span><br></pre></td></tr></table></figure></div><h1 id="merge-the-transcripts-gtf"><a href="#merge-the-transcripts-gtf" class="headerlink" title="merge the transcripts.gtf"></a>merge the transcripts.gtf</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cuffmerge -o merged_asm -p 8 -s ../../tophat/erecta.fna list</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>TransDecoder</title>
      <link href="/Bioinfor/TransDecoder.html"/>
      <url>/Bioinfor/TransDecoder.html</url>
      
        <content type="html"><![CDATA[<h1 id="TransDecoder"><a href="#TransDecoder" class="headerlink" title="TransDecoder"></a>TransDecoder</h1><p><a href="https://github.com/TransDecoder/TransDecoder" target="_blank" rel="noopener">github</a><br><a href="https://github.com/TransDecoder/TransDecoder/releases" target="_blank" rel="noopener">latest release</a></p><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><p>Downloading the file and make a test (16M)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://github.com/TransDecoder/TransDecoder/archive/TransDecoder-v5.5.0.tar.gz</span><br><span class="line">tar -zxvf TransDecoder-v5.5.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> TransDecoder-TransDecoder-v5.5.0/</span><br><span class="line">make <span class="built_in">test</span></span><br></pre></td></tr></table></figure></div><p>You are supposed to see the code below after execute <code>make test</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">-Fasta_retriever:: begin initializing <span class="keyword">for</span> supertranscripts.fasta</span><br><span class="line">-Fasta_retriever:: <span class="keyword">done</span> initializing <span class="keyword">for</span> supertranscripts.fasta</span><br><span class="line"></span><br><span class="line">+ <span class="built_in">echo</span> Done</span><br><span class="line">Done</span><br><span class="line">make[2]: Leaving directory <span class="string">'/home/ken/Bio/TransDecoder-TransDecoder-v5.5.0/sample_data/supertranscripts_example'</span></span><br><span class="line">make[1]: Leaving directory <span class="string">'/home/ken/Bio/TransDecoder-TransDecoder-v5.5.0/sample_data'</span></span><br></pre></td></tr></table></figure></div><p><span style="color:salmon;"><b>If it comes with any <code>Error</code> during the <code>make test</code>,<br><br>please see the ‘Debug’ at the end.</b></span></p><p>Now, add the current directory to your <code>$PATH</code>:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> -e <span class="string">"\n#TransDecoder\n export PATH=\$PATH:<span class="variable">$(pwd)</span>"</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span>  ~/.bashrc</span><br></pre></td></tr></table></figure></div><p>So, it will add the line below to the end of the <code>~/.bashrc</code> file.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">#TransDecoder</span></span><br><span class="line"> <span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/home/ken/Bio/TransDecoder-TransDecoder-v5.5.0</span><br></pre></td></tr></table></figure></div><p>Now, you can ENJOY the TransDecoder.</p><h1 id="Running-TransDecoder"><a href="#Running-TransDecoder" class="headerlink" title="Running TransDecoder"></a>Running TransDecoder</h1><p>Preparing a fasta file as <code>HitMe.fa</code></p><h2 id="1-Extract-the-long-open-reading-frames"><a href="#1-Extract-the-long-open-reading-frames" class="headerlink" title="1 Extract the long open reading frames"></a>1 Extract the long open reading frames</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TransDecoder.LongOrfs -t HitMe.fa</span><br></pre></td></tr></table></figure></div><h1 id="Debug"><a href="#Debug" class="headerlink" title="Debug"></a>Debug</h1><h2 id="E1-makeblastdb-command-not-found"><a href="#E1-makeblastdb-command-not-found" class="headerlink" title="E1; makeblastdb: command not found"></a>E1; makeblastdb: command not found</h2><h3 id="code"><a href="#code" class="headerlink" title="code"></a>code</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./runMe.sh: line 49: makeblastdb: <span class="built_in">command</span> not found</span><br><span class="line">make[2]: *** [Makefile:2: <span class="built_in">test</span>] Error 127</span><br><span class="line">make[2]: Leaving directory <span class="string">'/home/ken/Bio/TransDecoder-TransDecoder-v5.5.0/sample_data/cufflinks_example'</span></span><br><span class="line">make[1]: *** [Makefile:5: <span class="built_in">test</span>] Error 2</span><br><span class="line">make[1]: Leaving directory <span class="string">'/home/ken/Bio/TransDecoder-TransDecoder-v5.5.0/sample_data'</span></span><br><span class="line">make: *** [Makefile:10: <span class="built_in">test</span>] Error 2</span><br></pre></td></tr></table></figure></div><p><code>./runMe.sh: line 49: makeblastdb: command not found</code></p><h3 id="Why-amp-How"><a href="#Why-amp-How" class="headerlink" title="Why&amp;How"></a>Why&amp;How</h3><p>Lake of blast+</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ncbi-blast+</span><br></pre></td></tr></table></figure></div><h2 id="E2-hmmpress-command-not-found"><a href="#E2-hmmpress-command-not-found" class="headerlink" title="E2; hmmpress: command not found"></a>E2; hmmpress: command not found</h2><h3 id="code-1"><a href="#code-1" class="headerlink" title="code"></a>code</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">./runMe.sh: line 56: hmmpress: <span class="built_in">command</span> not found</span><br><span class="line">make[2]: *** [Makefile:2: <span class="built_in">test</span>] Error 127</span><br><span class="line">make[2]: Leaving directory <span class="string">'/home/ken/Bio/TransDecoder-TransDecoder-v5.5.0/sample_data/cufflinks_example'</span></span><br><span class="line">make[1]: *** [Makefile:5: <span class="built_in">test</span>] Error 2</span><br><span class="line">make[1]: Leaving directory <span class="string">'/home/ken/Bio/TransDecoder-TransDecoder-v5.5.0/sample_data'</span></span><br><span class="line">make: *** [Makefile:10: <span class="built_in">test</span>] Error 2</span><br></pre></td></tr></table></figure></div><h3 id="Why-amp-How-1"><a href="#Why-amp-How-1" class="headerlink" title="Why&amp;How"></a>Why&amp;How</h3><p>Lake of hammper2</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install hammper2</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Trimmomatic</title>
      <link href="/Bioinfor/Trimmomatic.html"/>
      <url>/Bioinfor/Trimmomatic.html</url>
      
        <content type="html"><![CDATA[<h1 id="Trimmomatic"><a href="#Trimmomatic" class="headerlink" title="Trimmomatic"></a>Trimmomatic</h1><h1 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h1><h2 id="Paired-End"><a href="#Paired-End" class="headerlink" title="Paired End:"></a>Paired End:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar ~/Biosoft/Trimmomatic-0.38/trimmomatic-0.38.jar PE -threads 8 -phred33 input_forward.fq.gz input_reverse.fq.gz output_forward_paired.fq.gz output_forward_unpaired.fq.gz output_reverse_paired.fq.gz output_reverse_unpaired.fq.gz ILLUMINACLIP:TruSeq3-PE.fa:2:30:10 LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36</span><br></pre></td></tr></table></figure></div><h2 id="Single-End"><a href="#Single-End" class="headerlink" title="Single End:"></a>Single End:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar  ~/Biosoft/Trimmomatic-0.38/trimmomatic-0.38.jar SE -threads 8 -phred33 SRR771602.fastq 2.fq ILLUMINACLIP:TruSeq3-SE:2:30:10 LEADING:3 TRAILING:3 SLIDINGWINDOW:4:15 MINLEN:36</span><br></pre></td></tr></table></figure></div><h2 id="Args"><a href="#Args" class="headerlink" title="Args"></a>Args</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">HEADCROP:13  <span class="comment">#Dorp 13 head base</span></span><br><span class="line">phred33    设置碱基的质量格式,如果不设置，默认的是-phred64</span><br><span class="line">trimlog file就是产生日志，包括如下部分内容：<span class="built_in">read</span>的名字，留下来的序列的长度，第一个碱基的起始位置，从开始trimmed的长度，最后的一个碱基位于初始<span class="built_in">read</span>的位置，最后trimmed的数量，其他步骤产生的日志</span><br><span class="line">LEADING:3   切除首端碱基质量小于3的碱基或者N</span><br><span class="line">TRAILING:3   切除末端碱基质量小于3的碱基或者</span><br><span class="line">ILLUMINACLIP: 1.adapter.lis:2:30:10 1.adapter.list为adapter文件，允许的最大mismatch 数，palindrome模式下匹配碱基数阈值：simple模式下的匹配碱基数阈值</span><br><span class="line">SLIDINGWINDOW:4:15  Windows的size是4个碱基，其平均碱基质量小于15，则切除</span><br><span class="line">MINLEN:36  最低reads长度为36</span><br><span class="line">CROP:  保留的reads长度</span><br><span class="line">HEADCROP: 在reads的首端切除指定的长度</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Trinity</title>
      <link href="/Bioinfor/Trinity.html"/>
      <url>/Bioinfor/Trinity.html</url>
      
        <content type="html"><![CDATA[<h1 id="Trinity"><a href="#Trinity" class="headerlink" title="Trinity"></a>Trinity</h1><h1 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">~/Biosoft/trinityrnaseq-Trinity-v2.5.1/Trinity --seqType fq  --max_memory 50G  --single(--samples_file)  --CPU 8  --full_cleanup</span><br><span class="line">~/Biosoft/trinityrnaseq-Trinity-v2.5.1/Analysis/DifferentialExpression/run_DE_analysis.pl --matrix MA-all-t0.01.matrix --method edgeR --samples sample</span><br></pre></td></tr></table></figure></div><h1 id="library-R"><a href="#library-R" class="headerlink" title="library R"></a>library R</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">BiocManager::install(<span class="string">'edgeR'</span>)</span><br><span class="line">BiocManager::install(<span class="string">'limma'</span>)</span><br><span class="line">BiocManager::install(<span class="string">"qvalue"</span>)</span><br><span class="line">BiocManager::install(<span class="string">'DESeq2'</span>)</span><br><span class="line">BiocManager::install(<span class="string">'ctc'</span>)</span><br><span class="line">BiocManager::install(<span class="string">"Biobase"</span>)</span><br><span class="line">install.packages(<span class="string">'gplots'</span>)</span><br><span class="line">install.packages(<span class="string">'ape'</span>)</span><br></pre></td></tr></table></figure></div><h1 id="Non-repeats-Experiment-edgeR"><a href="#Non-repeats-Experiment-edgeR" class="headerlink" title="Non-repeats Experiment (edgeR)"></a>Non-repeats Experiment (edgeR)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Biosoft/trinityrnaseq-Trinity-v2.8.4/Analysis/DifferentialExpression/run_DE_analysis.pl  --matrix Intest.table  --method edgeR --min_reps_min_cpm --dispersion 0.1</span><br></pre></td></tr></table></figure></div><h1 id="Volcano-Plot-and-Heatmap"><a href="#Volcano-Plot-and-Heatmap" class="headerlink" title="Volcano Plot and Heatmap"></a>Volcano Plot and Heatmap</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Biosoft/trinityrnaseq-Trinity-v2.8.4/Analysis/DifferentialExpression/analyze_diff_expr.pl --matrix ../Trinity_trans.TMM.EXPR.matrix -P 1e-3 -C 2</span><br></pre></td></tr></table></figure></div><h1 id="Sample-file"><a href="#Sample-file" class="headerlink" title="Sample file"></a>Sample file</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#      --samples_file &lt;string&gt;         tab-delimited text file indicating biological replicate relationships.</span></span><br><span class="line"><span class="comment">#                                   ex.</span></span><br><span class="line"><span class="comment">#                                        cond_A    cond_A_rep1    A_rep1_left.fq    A_rep1_right.fq</span></span><br><span class="line"><span class="comment">#                                        cond_A    cond_A_rep2    A_rep2_left.fq    A_rep2_right.fq</span></span><br><span class="line"><span class="comment">#                                        cond_B    cond_B_rep1    B_rep1_left.fq    B_rep1_right.fq</span></span><br><span class="line"><span class="comment">#                                        cond_B    cond_B_rep2    B_rep2_left.fq    B_rep2_right.fq</span></span><br></pre></td></tr></table></figure></div><h1 id="Tricks"><a href="#Tricks" class="headerlink" title="Tricks"></a>Tricks</h1><p>If you don’t like the color of heatmap, you can can change the below lines in file:<br><code>$TrinityFile/Analysis/DifferentialExpression/R/heatmap.3.R</code></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>WGCNA</title>
      <link href="/Bioinfor/WGCNA.html"/>
      <url>/Bioinfor/WGCNA.html</url>
      
        <content type="html"><![CDATA[<h1 id="WGCNA"><a href="#WGCNA" class="headerlink" title="WGCNA"></a>WGCNA</h1><h1 id="Lecture-by-Steven-Horvath-2013-UCLA"><a href="#Lecture-by-Steven-Horvath-2013-UCLA" class="headerlink" title="Lecture by Steven Horvath 2013, UCLA"></a>Lecture by Steven Horvath 2013, UCLA</h1><p>Though, it was designed for microarray data, but it applied in DNA methylation  data, RNA-seq, miRNA-seq, Peptide Count data…</p><ol><li>NetWork: the value between notes is either 0 or 1</li><li>weighted network: the value is variable between notes (Connection is weighted).</li></ol><h2 id="Unsigned-Network-and-Signed-Network"><a href="#Unsigned-Network-and-Signed-Network" class="headerlink" title="Unsigned Network and Signed Network"></a>Unsigned Network and Signed Network</h2><ol><li>Unsigned network:<ul><li>The value is from -1 to 1. (Both -1 and 1 means adjacent is 0, strongly correlated)</li><li>Both high value and low (nagetive) value are correlated because of adjacent.</li></ul></li><li>Singed network:<ul><li>The correlation value is form 0-1.</li></ul></li></ol><p>From unsigned correlation to singed network,</p><h1 id="Q-amp-A"><a href="#Q-amp-A" class="headerlink" title="Q&amp;A"></a>Q&amp;A</h1><p>Reference: <a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/faq.html" target="_blank" rel="noopener">Peter 2017</a></p><h2 id="Data-Analysis-Questions"><a href="#Data-Analysis-Questions" class="headerlink" title="Data Analysis Questions"></a>Data Analysis Questions</h2><ol><li><p><strong>How many samples</strong> do I need?<br>At least for <span style="background:salmon"><strong>15 samples</strong></span>. More samples could robust and refined results. Noises may can’t be removed if you have less samples.</p><br></li><li><p>Should I filter <strong>probesets or genes</strong>?</p></li></ol><ul><li><span style="background:salmon"><strong>Filtering genes by DEGs</strong></span> is not recommended since it <strong>completely</strong> <span style="background:salmon">invalidates</span> the <strong>scale-free topology assumption</strong>, which is the indicator of the <strong>soft thresholding power</strong>.</li><li>On the other hand, filtering gene by DE will lead to a set of correlated genes that will essentially form a single (or few high correlated) module respectively.<br></li></ul><ol start="3"><li>What <strong>argument</strong> (option) settings are recommended?<br>In general, we attempt to select suitable default which feat multiple applications and also, it is high reproducible.<br>While for new calculations, you can customize argument.</li></ol><ul><li><strong>Signed Network</strong><br>  The choice of <strong><em>Signed</em></strong> or <strong><em>Unsigned</em></strong> network is complicate, but generally, we prefer the <span  style="color:darkred">Signed network</span>.<br>  To construct <em>Signed Networks</em>, we usring:<br>  <code>type = &quot;signed&quot;</code> or <code>type = &quot;signed hybrid&quot;</code> in function such as <code>accuracyMeasures</code>, <code>adjacency</code>, <code>chooseOneHubInEachModule</code>, <code>chooseTopHubInEachModule</code>, <code>nearestNeighborConnectivity</code>, <code>nearestNeighborConnectivityMS</code>, <code>orderBranchesUsingHubGenes</code>, <code>softConnectivity</code>. Some functions useing <code>networkType</code> to select the <code>signed</code>.</li><li><strong>Robust correlation</strong><br>  Generaly, we recommend to using default arguments to detect the correlation unless you have enough reason to believe there is no outlier measurment. You can using <code>corFnc</code>, <code>cor</code>, et al. to customizing your own detective. For more, please go to <a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/faq.html" target="_blank" rel="noopener">Tutorial</a></li></ul><ol start="4"><li><p>Can WGCNA be used to analyze <strong>RNA-Seq data</strong>?<br><strong>Peter</strong>： <span style="background:salmon">Yes</span>. As far as WGCNA is concerned, working with (<strong>properly normalized</strong>) RNA-seq data isn’t really any different from working with (<strong>properly normalized</strong>) microarray data.<br><strong>Suggestion</strong>:</p><ul><li>Removing <strong>low hits</strong> transcripts.<br>Low counting transcripts tend to reflect noise. (for example, removing all features that have a count of less than say 10 in more than 90% of the samples)</li><li><strong>Normalization</strong><br><code>varianceStabilizingTransformation</code> from <em>DESeq2</em> is really useful.<br>RPKM and FPKM is helpful, too.<br>We can also using <code>log2(x+1)</code>.<br><span style="color:salmon"><b>Notions</b></span>:<ol><li>Different algorithms have huge impact on the result of expression change, but have limit affect on WGCNA.</li><li>Id data comes from different batch, We can use <code>ComBat</code> (Exp: <a href="http://blog.sina.com.cn/s/blog_70a5f5210102wibx.html" target="_blank" rel="noopener">木头的博客</a>) for batch effect removal.</li><li>Finally, we usually check quantile scatterplots to make sure there are no <strong>systematic shifts</strong> between samples; if sample quantiles show correlations (which they usually do), quantile normalization can be used to remove this effect.</li></ol></li></ul></li><li><p>Data heterogeneous<br>Data heterogeneous can effect any statistical analysis. (Skip)</p></li><li><p><strong>Soft-thresholding power</strong><br>can’t get a good scale-free topology index no matter how high I set the soft-thresholding power.</p><ol><li>First, the user should ensure that <span style='background:salmon'> variables (probesets, genes etc.) have not been filtered by differential expression</span> with respect to a sample trait.<br>Probability: Checking the clustering tree (<a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/FemaleLiver-01-dataInput.pdf" target="_blank" rel="noopener">exp</a>); strong clusters in the tree indicates globally different groups of sample. It may caused by batch effects or heterogenous. Carefully adjust the samples before building topology index.</li></ol><p>If the one causing heterogenous you don’t remove, you can still chosen the soft thresholding power by the number of samples at table below.</p></li></ol><table><thead><tr><th align="center">Number of samples</th><th align="center">Unsigned and signed hybrid networks</th><th align="center">Signed networks</th></tr></thead><tbody><tr><td align="center">Less than 20</td><td align="center">9</td><td align="center">18</td></tr><tr><td align="center">20-30</td><td align="center">8</td><td align="center">16</td></tr><tr><td align="center">30-40</td><td align="center">7</td><td align="center">14</td></tr><tr><td align="center">more than 40</td><td align="center">6</td><td align="center">12</td></tr></tbody></table><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Blast+</title>
      <link href="/Bioinfor/blast.html"/>
      <url>/Bioinfor/blast.html</url>
      
        <content type="html"><![CDATA[<h1 id="Blast"><a href="#Blast" class="headerlink" title="Blast+"></a>Blast+</h1><p><a href="https://ftp.ncbi.nlm.nih.gov/blast/executables/blast+/LATEST/" target="_blank" rel="noopener">latest release</a></p><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><p>For Ubuntu or Debian (Deepin, like me)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install ncbi-blast+</span><br></pre></td></tr></table></figure></div><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><h2 id="make-blast-base"><a href="#make-blast-base" class="headerlink" title="make blast base"></a>make blast base</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">makeblastdb -<span class="keyword">in</span> db.fasta -dbtype prot/nucl -parse_seqids -out dbname</span><br></pre></td></tr></table></figure></div><h2 id="model-of-uniprot-annotation"><a href="#model-of-uniprot-annotation" class="headerlink" title="model of uniprot annotation"></a>model of uniprot annotation</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">blastx -query T0.05.fa -out blast.out -db /media/ken/Base/blastdb/uniprot_sprot.fasta -outfmt <span class="string">"6 qacc sacc evalue stitle sblastname"</span> -evalue 1e-5 -max_target_seqs 1 -num_threads 8 -max_hsps 1</span><br></pre></td></tr></table></figure></div><h1 id="Output-format"><a href="#Output-format" class="headerlink" title="Output format"></a>Output format</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">Options 6, 7 and 10 can be additionally configured to produce</span><br><span class="line">a custom format specified by space delimited format specifiers.</span><br><span class="line">The supported format specifiers are:</span><br><span class="line">     qseqid means Query Seq-id</span><br><span class="line">        qgi means Query GI</span><br><span class="line">       qacc means Query accesion</span><br><span class="line">    qaccver means Query accesion.version</span><br><span class="line">       qlen means Query sequence length</span><br><span class="line">     sseqid means Subject Seq-id</span><br><span class="line">  sallseqid means All subject Seq-id(s), separated by a <span class="string">';'</span></span><br><span class="line">        sgi means Subject GI</span><br><span class="line">     sallgi means All subject GIs</span><br><span class="line">       sacc means Subject accession</span><br><span class="line">    saccver means Subject accession.version</span><br><span class="line">    sallacc means All subject accessions</span><br><span class="line">       slen means Subject sequence length</span><br><span class="line">     qstart means Start of alignment <span class="keyword">in</span> query</span><br><span class="line">       qend means End of alignment <span class="keyword">in</span> query</span><br><span class="line">     sstart means Start of alignment <span class="keyword">in</span> subject</span><br><span class="line">       send means End of alignment <span class="keyword">in</span> subject</span><br><span class="line">       qseq means Aligned part of query sequence</span><br><span class="line">       sseq means Aligned part of subjecnit sequence</span><br><span class="line">     evalue means Expect value</span><br><span class="line">   bitscore means Bit score</span><br><span class="line">      score means Raw score</span><br><span class="line">     length means Alignment length</span><br><span class="line">     pident means Percentage of identical matches</span><br><span class="line">     nident means Number of identical matches</span><br><span class="line">   mismatch means Number of mismatches</span><br><span class="line">   positive means Number of positive-scoring matches</span><br><span class="line">    gapopen means Number of gap openings</span><br><span class="line">       gaps means Total number of gaps</span><br><span class="line">       ppos means Percentage of positive-scoring matches</span><br><span class="line">     frames means Query and subject frames separated by a <span class="string">'/'</span></span><br><span class="line">     qframe means Query frame</span><br><span class="line">     sframe means Subject frame</span><br><span class="line">       btop means Blast traceback operations (BTOP)</span><br><span class="line">     staxid means Subject Taxonomy ID</span><br><span class="line">   ssciname means Subject Scientific Name</span><br><span class="line">   scomname means Subject Common Name</span><br><span class="line"> sblastname means Subject Blast Name</span><br><span class="line">  sskingdom means Subject Super Kingdom</span><br><span class="line">    staxids means unique Subject Taxonomy ID(s), separated by a <span class="string">';'</span></span><br><span class="line">      (<span class="keyword">in</span> numerical order)</span><br><span class="line">  sscinames means unique Subject Scientific Name(s), separated by a <span class="string">';'</span></span><br><span class="line">  scomnames means unique Subject Common Name(s), separated by a <span class="string">';'</span></span><br><span class="line"> sblastnames means unique Subject Blast Name(s), separated by a <span class="string">';'</span></span><br><span class="line">      (<span class="keyword">in</span> alphabetical order)</span><br><span class="line"> sskingdoms means unique Subject Super Kingdom(s), separated by a <span class="string">';'</span></span><br><span class="line">      (<span class="keyword">in</span> alphabetical order)</span><br><span class="line">     stitle means Subject Title</span><br><span class="line"> salltitles means All Subject Title(s), separated by a <span class="string">'&lt;&gt;'</span></span><br><span class="line">    sstrand means Subject Strand</span><br><span class="line">      qcovs means Query Coverage Per Subject</span><br><span class="line">    qcovhsp means Query Coverage Per HSP</span><br><span class="line">     qcovus means Query Coverage Per Unique Subject (blastn only)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>CPAT</title>
      <link href="/Bioinfor/cpat.html"/>
      <url>/Bioinfor/cpat.html</url>
      
        <content type="html"><![CDATA[<h1 id="CPAT"><a href="#CPAT" class="headerlink" title="CPAT"></a>CPAT</h1><h1 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cpat.py  -g Tinity.fna -d ~/Biosoft/CPAT-1.2.4/dat/Human_logitModel.RData -x ~/Biosoft/CPAT-1.2.4/dat/Human_Hexamer.tsv -o output</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">-r 指定参考基因组  </span><br><span class="line">-g 输入的转录本序列。如果是BED格式，必须-r指定参考基因组；如果是FASTA格式，不需要指定参考基因组，即使使用-r参数也会被忽略。  </span><br><span class="line">-d 预制好的模型（Prebuilt training model）（CPAT自带人、鼠、果蝇、斑马鱼的模型）  </span><br><span class="line">-x 预制好的六聚体频率表（Prebuilt hexamer frequency table）（CPAT自带人、鼠、果蝇、斑马鱼的六聚体频率表）  </span><br><span class="line">-o 输出</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>cufflinks</title>
      <link href="/Bioinfor/cufflinks.html"/>
      <url>/Bioinfor/cufflinks.html</url>
      
        <content type="html"><![CDATA[<h1 id="cufflinks"><a href="#cufflinks" class="headerlink" title="cufflinks"></a>cufflinks</h1><h2 id="run-cufflinks"><a href="#run-cufflinks" class="headerlink" title="run cufflinks"></a>run cufflinks</h2><p>the result of tophat is needed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Biosoft/cufflinks-2.2.1.Linux_x86_64/cufflinks -p 8 -b ../tophat/erecta.fna -u -o sample1 ../tophat/tophat_out/accepted_hits.bam</span><br></pre></td></tr></table></figure></div><h2 id="gtf-merging"><a href="#gtf-merging" class="headerlink" title="gtf merging"></a>gtf merging</h2><p>(without fasta.file result)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cuffmerge -o merged_asm -p 8 -s ../../tophat/erecta.fna list</span><br></pre></td></tr></table></figure></div><h2 id="cuffquant"><a href="#cuffquant" class="headerlink" title="cuffquant"></a>cuffquant</h2><p>(For count the reads)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cuffquant -o cuffquant2 -p 8 -b Genome.fna -u Genome.gff tophat.bam</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">cuffquant -o cuffquant2 -p 8 -b ../../data/Genome/A.japonicus/Apostichopus_japonicus.fna -u ../../data/Genome/A.japonicus/Apostichopus_japonicus.gff 2dpe/accepted_hits.bam                                      (the result of cuffquant is binary file you can run cuffnorm to transfor this binary file to readable file.)</span><br></pre></td></tr></table></figure></div><h2 id="cuffcompare"><a href="#cuffcompare" class="headerlink" title="cuffcompare"></a>cuffcompare</h2><p>for stattistics (useless)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">cuffcompare -o cuffcmp -r genome.gtf -s genome.fasta sample1.gtf</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">cuffcompare -o cuffcmp2 -r ../../data/Genome/A.japonicus/Apostichopus_japonicus.gff -s ../../data/Genome/A.japonicus/Apostichopus_japonicus.fna cufflinks2/transcripts.gtf</span><br></pre></td></tr></table></figure></div><h2 id="merge-the-fpkm"><a href="#merge-the-fpkm" class="headerlink" title="merge the fpkm"></a>merge the fpkm</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cuffnorm -L 0dpe,3dpe,7dpe,14dpe,21dpe -p 8 ../../data/Genome/A.japonicus/Apostichopus_japonicus.gff cuffquant2/abundances.cxb cuffquant3/abundances.cxb cuffquant4/abundances.cxb cuffquant5/abundances.cxb cuffquant6/abundances.cxb  -o cuffnorm</span><br></pre></td></tr></table></figure></div><h2 id="cuffdiff"><a href="#cuffdiff" class="headerlink" title="cuffdiff"></a>cuffdiff</h2><p> …. similar to the same as the cuffnorm.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cuffdiff -L A1,B2 -o cuffdiff2 -p 8 -u -b ../../data/Genome/A.japonicus/Apostichopus_japonicus.fna ../../data/Genome/A.japonicus/Apostichopus_japonicus.gff cuffquant2/abundances.cxb cuffquant2/abundances.cxb</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>表观基因组介绍</title>
      <link href="/Bioinfor/epigenome.html"/>
      <url>/Bioinfor/epigenome.html</url>
      
        <content type="html"><![CDATA[<h1 id="表观基因组介绍"><a href="#表观基因组介绍" class="headerlink" title="表观基因组介绍"></a>表观基因组介绍</h1><p><img src="https://s1.ax1x.com/2020/06/26/Nr4jZq.png" alt="Nr4jZq.png"><a name="dYbYE"></a></p><h1 id="1-DNA"><a href="#1-DNA" class="headerlink" title="1. DNA"></a>1. DNA</h1>  <br /><table><thead><tr><th align="center">5mC (5-methylcytosine)</th><th align="center">6mA (6-Methyladenine)</th></tr></thead><tbody><tr><td align="center"><img src="https://s1.ax1x.com/2020/06/26/Nr4qMj.png" alt="Nr4qMj.png"></td><td align="center"><img src="https://s1.ax1x.com/2020/06/26/Nr4vd0.png" alt="Nr4vd0.png"></td></tr><tr><td align="center">基因表达调控, 染色体失活,<br />等位基因, 印记基因,<br />胚胎发育, 细胞全能性, 癌症.</td><td align="center">1, 细菌防御机制.<br />2, 环境压力,<br />    胚胎发育.</td></tr></tbody></table><p><a name="ioOSv"></a></p><h2 id="案例"><a href="#案例" class="headerlink" title="案例:"></a>案例:</h2><p><a name="SGn4T"></a></p><h3 id="1-果蝇"><a href="#1-果蝇" class="headerlink" title="1. 果蝇"></a>1. 果蝇</h3><p><img src="https://s1.ax1x.com/2020/06/26/Nr59WF.png" alt="Nr59WF.png"><br><strong>PRE</strong> (<strong>polycomb response element</strong>): 招募组蛋白, H3K27me3, 而达到抑制表达效果<br /><br><br /><strong>细胞印记</strong>: 在果蝇发育转录因子会调节某些蛋白表达, 并甲基化作为记号. 后期, 转录因子不在表达, 有甲基化的记号的基因, 继续表达.</p><p><a name="rnSC8"></a></p><h3 id="2-开放染色质区-于调节蛋白结合-从而调控表达"><a href="#2-开放染色质区-于调节蛋白结合-从而调控表达" class="headerlink" title="2. 开放染色质区, 于调节蛋白结合, 从而调控表达"></a>2. 开放染色质区, 于调节蛋白结合, 从而调控表达</h3><p>MEISI, HOXA9, PUI<br /></p><p><a name="yYcMJ"></a></p><h1 id="2-RNA"><a href="#2-RNA" class="headerlink" title="2. RNA"></a>2. RNA</h1><p>m6A: 基因表达, 可变剪切, mRNA寿命, 影响翻译<br />m5A<br /></p><p><a name="dVpB2"></a></p><h1 id="3-液体活检的应用"><a href="#3-液体活检的应用" class="headerlink" title="3. 液体活检的应用"></a>3. 液体活检的应用</h1><p><img src="https://s1.ax1x.com/2020/06/26/Nr5pJU.png" alt="Nr5pJU.png"></p><p>cfDNA Methylation 在癌症患者中普遍低<br />通过血液中的 cfDNA Methylation 值, 来逆推器官Methylation 值<br /></p><p><a name="SNPTZ"></a></p><h1 id="4-发育"><a href="#4-发育" class="headerlink" title="4. 发育"></a>4. 发育</h1><table><thead><tr><th align="center"><img src="https://s1.ax1x.com/2020/06/26/Nr4OLn.png" alt="Nr4OLn.png"></th><th align="center"><img src="https://s1.ax1x.com/2020/06/26/Nr4xoV.jpg" alt="Nr4xoV.jpg"></th></tr></thead><tbody><tr><td align="center">Hongshan Gou et al. The DNA methylation landscape of human early embryos. Nature. 2014; 511</td><td align="center">Stubbs et al. Multi-tissue DNA methylation age predictor in mouse. Genome Biology. 2017; 18:68.</td></tr></tbody></table><p><a name="vXhIG"></a></p><h1 id="5-神经"><a href="#5-神经" class="headerlink" title="5. 神经"></a>5. 神经</h1><p>羟甲基化: 脑部, 神经<br /></p><p><a name="aomJ2"></a></p><h1 id="6-测序原理"><a href="#6-测序原理" class="headerlink" title="6. 测序原理"></a>6. 测序原理</h1><p><a name="Wmbgi"></a></p><h2 id="重亚硫酸盐测序基本原理"><a href="#重亚硫酸盐测序基本原理" class="headerlink" title="重亚硫酸盐测序基本原理"></a>重亚硫酸盐测序基本原理</h2><p><img src="https://s1.ax1x.com/2020/06/26/Nr5SiT.png" alt="Nr5SiT.png"></p><table><thead><tr><th>WGBS</th><th>RRBC</th></tr></thead><tbody><tr><td>随机打碎, 全基因组测序</td><td>酶切富集, 高CG区</td></tr></tbody></table><p><a name="aPU11"></a></p><h2 id="氧化-重亚硫酸盐测序"><a href="#氧化-重亚硫酸盐测序" class="headerlink" title="氧化-重亚硫酸盐测序"></a>氧化-重亚硫酸盐测序</h2><p><img src="https://s1.ax1x.com/2020/06/26/Nr4Lss.png" alt="Nr4Lss.png"><a name="5MgOk"></a></p><h2 id="转座酶已接近染色质测序"><a href="#转座酶已接近染色质测序" class="headerlink" title="转座酶已接近染色质测序"></a>转座酶已接近染色质测序</h2><p>Tn5 转座酶, 接切割富集基因组开放部分(没有与组蛋白结合的DNA)<br /></p><p><a name="l5SiE"></a></p><h2 id="DNA免疫共沉淀"><a href="#DNA免疫共沉淀" class="headerlink" title="DNA免疫共沉淀"></a>DNA免疫共沉淀</h2><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>FastQC</title>
      <link href="/Bioinfor/fastqc.html"/>
      <url>/Bioinfor/fastqc.html</url>
      
        <content type="html"><![CDATA[<h1 id="FastQC"><a href="#FastQC" class="headerlink" title="FastQC"></a>FastQC</h1><h1 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ./fastQC/</span><br><span class="line">~/Biosoft/FastQC/fastqc -o ./fastQC/ -t 7 reads.fq</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>IGV</title>
      <link href="/Bioinfor/igv.html"/>
      <url>/Bioinfor/igv.html</url>
      
        <content type="html"><![CDATA[<h1 id="IGV"><a href="#IGV" class="headerlink" title="IGV"></a>IGV</h1><h1 id="build-index"><a href="#build-index" class="headerlink" title="build index"></a>build index</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bowtie2-build --threads 8 genome.fa genome.fa</span><br></pre></td></tr></table></figure></div><h1 id="build-sam-file"><a href="#build-sam-file" class="headerlink" title="build sam file"></a>build sam file</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">bowtie2 -p 8 -q --no-unal -k 20 -x genome.fa -U reads.fq   -S  bowtie2.sam</span><br><span class="line">bowtie2 -p 8 -q --no-unal -k 20 -x genome.fa -1 reads_1.fq -2 reads_2.fq  -S  bowtie2.sam</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">bowtie2 -p 8 -q --no-unal -k 20 -x Trinity.fasta -U SRR771602.fastq   -S  bowtie2.sam</span><br></pre></td></tr></table></figure></div><h2 id="sam-to-bam"><a href="#sam-to-bam" class="headerlink" title="sam to bam"></a>sam to bam</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">samtools view -b -S bowtie2.sam &gt; bowtie2.bam</span><br><span class="line">samtools sort bowtie2.bam -o bowtie2.coordSorted.bam &gt; bowtie2.coordSorted.bam</span><br><span class="line">samtools index bowtie2.coordSorted.bam</span><br><span class="line">samtools faidx Trinity.fasta</span><br></pre></td></tr></table></figure></div><h1 id="IGV-1"><a href="#IGV-1" class="headerlink" title="IGV"></a>IGV</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/Biosoft/IGV_2.4.10/igv.sh -g Trinity.fasta bowtie2.coordSorted.bam</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>miRNA pipeline</title>
      <link href="/Bioinfor/miRNA_pipleine.html"/>
      <url>/Bioinfor/miRNA_pipleine.html</url>
      
        <content type="html"><![CDATA[<h1 id="miRNA-pipeline"><a href="#miRNA-pipeline" class="headerlink" title="miRNA pipeline"></a>miRNA pipeline</h1><h1 id="1-fastq-dum"><a href="#1-fastq-dum" class="headerlink" title="1 fastq dum"></a>1 fastq dum</h1><p>fastq-dump *</p><h2 id="reads-length-distribution"><a href="#reads-length-distribution" class="headerlink" title="reads length distribution"></a>reads length distribution</h2><p>from intetnet<br>python scripts</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> collections <span class="keyword">import</span> Counter</span><br><span class="line">Seq_read = <span class="string">"fastp_cut.fq"</span></span><br><span class="line">output = <span class="string">"fastp.distribution"</span></span><br><span class="line"><span class="keyword">with</span> open(Seq_read,<span class="string">'r'</span>) <span class="keyword">as</span> Fileout, open(<span class="string">'srg1.r1.paired.results.txt'</span>,<span class="string">'w'</span>) <span class="keyword">as</span> Filein:</span><br><span class="line">  i = <span class="number">4</span></span><br><span class="line">  dic, arr = &#123;&#125;, []</span><br><span class="line">  <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    line = Fileout.readline()</span><br><span class="line">    i += <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> i%<span class="number">4</span> == <span class="number">2</span>:</span><br><span class="line">      arr.append(len(str(line)))</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> line:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">  dic = Counter(arr)</span><br><span class="line"></span><br><span class="line">result = <span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> k,v <span class="keyword">in</span> dic.items():</span><br><span class="line">  result = result +str(k)+<span class="string">"\t"</span>+str(v)+<span class="string">"\n"</span></span><br><span class="line"></span><br><span class="line">fo = open(output, <span class="string">"w"</span>)</span><br><span class="line">fo.write(result)</span><br></pre></td></tr></table></figure></div><p>R scripts</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">save_name=<span class="string">"fastp.pdf"</span></span><br><span class="line">table_name = <span class="string">"fastp.distribution"</span></span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">A &lt;- read.table(table_name)</span><br><span class="line">ggplot(A,aes(x=V1,y=V2)) +geom_bar(stat=<span class="string">"identity"</span>)</span><br><span class="line">ggsave(save_name)</span><br></pre></td></tr></table></figure></div><h1 id="2-fastQC"><a href="#2-fastQC" class="headerlink" title="2 fastQC"></a>2 fastQC</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls *.fastq);<span class="keyword">do</span></span><br><span class="line">mkdir QC_<span class="variable">$i</span></span><br><span class="line">~/Biosoft/FastQC/fastqc -o QC_<span class="variable">$i</span> -t 7 <span class="variable">$i</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line">mkdir 2-QC</span><br><span class="line">mv QC* 2-QC/</span><br><span class="line">mkdir 1-reads</span><br><span class="line">mv E* 1-reads/</span><br></pre></td></tr></table></figure></div><h1 id="3-alignment"><a href="#3-alignment" class="headerlink" title="3 alignment"></a>3 alignment</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">mkdir 3-align</span><br><span class="line"><span class="built_in">cd</span> 3-align</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls ../1-reads/ERR219785*.fastq);<span class="keyword">do</span></span><br><span class="line">bowtie2 -p 8 -x /media/ken/Data/CrippsLab/DB_D.melanogaster/Genome -U ../1-reads/<span class="variable">$i</span>   -S <span class="variable">$i</span>.Genome.sam</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">mv ../1-reads/*.sam .</span><br><span class="line"><span class="built_in">cd</span> ..</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls ERR219785*.fastq);<span class="keyword">do</span></span><br><span class="line">bowtie2 -p 8 -x /media/ken/Data/DB/miRNA/hairpin -U <span class="variable">$i</span>   -S <span class="variable">$i</span>.hairpin.sam</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">mv *.sam 3-align</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls ERR219785*.fastq);<span class="keyword">do</span></span><br><span class="line">bowtie2 -p 8 -x /media/ken/Data/DB/miRNA/mature -U <span class="variable">$i</span>   -S <span class="variable">$i</span>.hairpin.sam</span><br><span class="line"><span class="keyword">done</span></span><br><span class="line">mv *.sam 3-align</span><br></pre></td></tr></table></figure></div><h2 id="4-counts"><a href="#4-counts" class="headerlink" title="4 counts"></a>4 counts</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">samtools view  -SF 4 2.sam |perl -alne <span class="string">'&#123;$h&#123;$F[2]&#125;++&#125;END&#123;print "$_\t$h&#123;$_&#125;" foreach sort keys %h &#125;'</span>  &gt; 2-hairpin.counts</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>samtools</title>
      <link href="/Bioinfor/samtools.html"/>
      <url>/Bioinfor/samtools.html</url>
      
        <content type="html"><![CDATA[<h1 id="samtools"><a href="#samtools" class="headerlink" title="samtools"></a>samtools</h1><h1 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start"></a>Quick start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">samtools tview sorted.bam Trinity.fasta   -p <span class="string">"ID:35"</span> -d T &gt; result</span><br><span class="line"></span><br><span class="line">samtools tview sorted.bam ../../2-Trinity/Trinity.fasta   -p <span class="string">"comp0_c0_seq1:35"</span> -d H &gt; 123.html</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">*.bam file *.fasta file  -p  posation, fasta name and star posation of the fasta :</span><br></pre></td></tr></table></figure></div><h1 id="Sorting-by-bam-files"><a href="#Sorting-by-bam-files" class="headerlink" title="Sorting by bam files"></a>Sorting by bam files</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">samtools sort bwa.bam -o bwa.sorted.bam &gt; bwa.sorted.bam</span><br></pre></td></tr></table></figure></div><h1 id="Index"><a href="#Index" class="headerlink" title="Index"></a>Index</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">samtools faidx genome.fna</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Bioinfor/index.html"/>
      <url>/Bioinfor/index.html</url>
      
        <content type="html"><![CDATA[<ul><li><h1 id="Software"><a href="#Software" class="headerlink" title="Software"></a>Software</h1><p><strong>Reads</strong></p><ul><li><a href="sratools.html">sratools</a></li><li><a href="fastqc.html">fastqc</a></li><li><a href="fastp.html">fastp</a></li><li><a href="Trimmomatic.html">Trimmomatic</a></li></ul><p><strong>Reads Align</strong></p><ul><li><a href="Tophat.html">Tophat</a></li></ul><p><strong>De-novo</strong></p><ul><li><a href="cufflinks.html">cufflinks</a></li><li><a href="Trinity.html">Trinity</a></li></ul><p><strong>Post De-novo</strong></p><ul><li><a href="cpat.html">cpat</a></li></ul><p><strong>After De-novo</strong></p><ul><li><a href="samtools.html">samtools</a></li><li><a href="TransDecoder.html">TransDecoder</a></li><li><a href="blast.html">blast</a></li></ul><p><strong>Visualization</strong></p><ul><li><a href="igv.html">igv</a></li></ul><p><strong>Fasta Align</strong></p><ul><li><a href="faAlign.html">ClustelW2 &amp; Muscle</a></li></ul><p><strong>Others</strong></p><ul><li><a href="Bioconda.html">Bioconda</a></li><li><a href="E-utilities.html">NCBI: E-utilities</a></li></ul></li><li><h1 id="Protocols"><a href="#Protocols" class="headerlink" title="Protocols"></a>Protocols</h1><p><strong>Genome</strong></p><ul><li><a href="QIIME2.html">QIIME2: Mate Genome</a></li><li><a href="Denove-Prokaryotic-Genome-with-Spader.html">Spader: Prokaryotic Genome</a></li></ul><p><strong>RNA-Seq</strong></p><ul><li><a href="RNA-seq-with-Trinity.html">Trinity: RNA-seq de-nove</a></li><li><a href="miRNA_pipleine.html">miRNA_pipleine</a></li><li><a href="GO_ontology.html">GO ontology</a></li></ul><p><strong>SNP</strong></p><ul><li><a href="snp_samtools.html">samtools: SNP Calling</a></li><li><a href="snp_gatk.html">GATK: SNP Calling</a></li></ul><p><strong>DNA Methylation</strong></p><ul><li><a href="BatMeth2.html">BatMeth2</a></li></ul><p><strong>Others</strong></p><ul><li><a href="Competent_c.html">Calcium Competent Cells</a></li></ul></li><li><h1 id="Notes"><a href="#Notes" class="headerlink" title="Notes"></a>Notes</h1><ul><li><a href="BioDB.html">Biology Database</a></li><li><a href="SkillNet.html">SkillNet</a></li><li><a href="DNA-Mathylation.html">DNA-Mathylation</a></li><li><a href="epigenome.html">Epigenome</a></li><li><a href="Chip-seq_Con.html">Chip-seq_Con</a></li><li><a href="test2.html">test2</a></li><li><a href="WGCNA.html">WGCNA</a></li><li><a href="Genome_Histone_Chip-Seq_CD-Genomics.html">Genome_Histone_Chip-Seq_CD-Genomics</a></li></ul><p><strong>Match</strong></p><ul><li><a href="OddsRatio.html">OddsRatio</a></li></ul></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>SNP Calling: GATK</title>
      <link href="/Bioinfor/snp_gatk.html"/>
      <url>/Bioinfor/snp_gatk.html</url>
      
        <content type="html"><![CDATA[<h1 id="SNP-Calling-GATK"><a href="#SNP-Calling-GATK" class="headerlink" title="SNP Calling: GATK"></a>SNP Calling: GATK</h1><h2 id="1-build-bwa-index"><a href="#1-build-bwa-index" class="headerlink" title="1. build bwa index"></a>1. build bwa index</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">bwa index genome.fna</span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">bwa index Apostichopus_japonicus.fna</span><br></pre></td></tr></table></figure></div><h2 id="2-reads-Mapping"><a href="#2-reads-Mapping" class="headerlink" title="2. reads Mapping"></a>2. reads Mapping</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">bwa mem -t 4 -R <span class="string">'@RG\tID:foo\tPL:illumina\tSM:E.coli_K12'</span> genome.fna reada_1.fq reads_2.fq | samtools view -Sb - &gt; bwa.bam</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">bwa mem -t 4 -R <span class="string">'@RG\tID:foo\tPL:illumina\tSM:E.coli_K12'</span> Apostichopus_japonicus.fna SRR771602.fastq | samtools view -Sb - &gt; AJ.bam</span><br></pre></td></tr></table></figure></div><h2 id="3-sort-by-samtools"><a href="#3-sort-by-samtools" class="headerlink" title="3. sort by samtools"></a>3. sort by samtools</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">samtools sort bwa.bam -o bwa.sorted.bam &gt; bwa.sorted.bam</span><br><span class="line">samtools faidx genome.fna</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">samtools sort AJ.bam -o AJ.sorted.bam &gt; AJ.sorted.bam</span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">samtools faidx Apostichopus_japonicus.fna</span><br></pre></td></tr></table></figure></div><h2 id="4-Maker-PCR-repeats"><a href="#4-Maker-PCR-repeats" class="headerlink" title="4. Maker PCR repeats"></a>4. Maker PCR repeats</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">gatk MarkDuplicates -I bwa.sorted.bam -O bwa.sorted.markdup.bam   -M bwa.sorted.markdup_metrics.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">gatk MarkDuplicates -I AJ.sorted.bam -O AJ.sorted.markdup.bam   -M AJ.sorted.markdup_metrics.txt</span><br><span class="line"></span><br><span class="line">samtools index bwa.sorted.markdup.bam</span><br></pre></td></tr></table></figure></div><h2 id="5-Prepare-a-dict-file"><a href="#5-Prepare-a-dict-file" class="headerlink" title="5. Prepare a dict file"></a>5. Prepare a dict file</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gatk CreateSequenceDictionary -R genome.fna -O genome.dict</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">gatk CreateSequenceDictionary -R Apostichopus_japonicus.fna -O Apostichopus_japonicus.dict</span><br></pre></td></tr></table></figure></div><h2 id="6-Build-intermidia-file-gvcf-file"><a href="#6-Build-intermidia-file-gvcf-file" class="headerlink" title="6. Build intermidia file, gvcf file"></a>6. Build intermidia file, gvcf file</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gatk HaplotypeCaller -R genome.fna --emit-ref-confidence GVCF -I bwa.sorted.markdup.bam -O  bwa.g.vcf</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">gatk HaplotypeCaller -R Apostichopus_japonicus.fna --emit-ref-confidence GVCF -I AJ.sorted.markdup.bam -O  AJ.g.vcf</span><br></pre></td></tr></table></figure></div><h2 id="7-Finally"><a href="#7-Finally" class="headerlink" title="7. Finally"></a>7. Finally</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">gatk GenotypeGVCFs -R genome.fna -V bwa.g.vcf -O bwa.vcf</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">gatk GenotypeGVCFs -R Apostichopus_japonicus.fna -V AJ.g.vcf -O AJ.vcf</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>SNP Calling: samtools</title>
      <link href="/Bioinfor/snp_samtools.html"/>
      <url>/Bioinfor/snp_samtools.html</url>
      
        <content type="html"><![CDATA[<h1 id="SNP-Calling-samtools"><a href="#SNP-Calling-samtools" class="headerlink" title="SNP Calling: samtools"></a>SNP Calling: samtools</h1><h1 id="1-sort-by-samtools"><a href="#1-sort-by-samtools" class="headerlink" title="1. sort by samtools"></a>1. sort by samtools</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">samtools sort bwa.bam -o bwa.sorted.bam &gt; bwa.sorted.bam</span><br><span class="line">samtools faidx genome.fna</span><br><span class="line"></span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">samtools sort AJ.bam -o AJ.sorted.bam &gt; AJ.sorted.bam</span><br><span class="line"><span class="comment">#Exp:</span></span><br><span class="line">samtools faidx Apostichopus_japonicus.fna</span><br></pre></td></tr></table></figure></div><h2 id="2-SNP-calling"><a href="#2-SNP-calling" class="headerlink" title="2. SNP calling"></a>2. SNP calling</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">samtools mpileup -guSDf genome.fasta abc.bam | bcftools view -cvNg - &gt; abc.vcf</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>sratools</title>
      <link href="/Bioinfor/sratools.html"/>
      <url>/Bioinfor/sratools.html</url>
      
        <content type="html"><![CDATA[<h1 id="sratools"><a href="#sratools" class="headerlink" title="sratools"></a>sratools</h1><h1 id="SRA-data-download"><a href="#SRA-data-download" class="headerlink" title="SRA data download"></a>SRA data download</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">prefetch  --ascp-path <span class="string">"/usr/bin/ascp|/home/ken/.aspera/connect/etc/asperaweb_id_dsa.putty"</span> ERR025599</span><br></pre></td></tr></table></figure></div><h1 id="For-trinity"><a href="#For-trinity" class="headerlink" title="For trinity"></a>For trinity</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fastq-dump --defline-seq <span class="string">'@$sn[_$rn]/$ri'</span> --split-files file.sra</span><br><span class="line"></span><br><span class="line">Trinity --seqType fq --max_memory 55G --single Seq.fastq --CPU 8 --full_cleanup</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Bioinfor/summary.html"/>
      <url>/Bioinfor/summary.html</url>
      
        <content type="html"><![CDATA[<ul><li><p><a href="#">Software</a></p><ul><li><p><a href="#">Reads</a></p><ul><li><a href="sratools">sratools</a></li><li><a href="fastqc">FastQC</a></li><li><a href="fastp.html">Fastp</a></li><li><a href="trimmomatic">Trimmomatic</a></li></ul></li><li><p><a href="#">Reads align</a></p><ul><li><a href="tophat">Tophat</a></li></ul></li><li><p><a href="#">De-novo</a></p><ul><li><a href="cufflinks">cufflinks</a></li><li><a href="trinity">Trinity</a></li></ul></li><li><p><a href="#">After de-novo</a></p><ul><li><a href="cpat">CPAT</a></li><li><a href="samtools">samtools</a></li><li><a href="transdecoder">TransDecoder</a></li><li><a href="blast">Blast+</a></li></ul></li><li><p><a href="#">Visualization</a></p><ul><li><a href="igv">igv</a></li></ul></li><li><p><a href="#">Fasta Align</a></p><ul><li><a href="faalign">ClustelW2 &amp; Muscle</a></li></ul></li><li><p><a href="#">Others</a></p><ul><li><a href="bioconda">Bioconda</a></li><li><a href="esearch">NCBI tool: Edirect</a></li></ul></li></ul></li><li><p><a href="#">Protocals</a></p><ul><li><a href="#">Genome</a><ul><li><a href="genom_spider">Spader: Denove Prokaryotic Genome</a></li><li><a href="qiime2">QIIME2</a></li></ul></li><li><a href="#">RNA-Seq</a><ul><li><a href="trinity_rna_seq">Trinity: RNA-seq</a></li><li><a href="mirna_pip">miRNA pipeline</a></li><li><a href="go">Go ontology</a></li></ul></li><li><a href="#">SNP Calling</a><ul><li><a href="snp_gatk">GATK: SNP Calling</a></li><li><a href="snp_samtools">samtools: SNP Calling</a></li></ul></li><li><a href="#">DNA Methylation</a><ul><li><a href="batmeth2">BatMeth2</a></li></ul></li><li><a href="#">Others</a><ul><li><a href="ca_competent">Calcium Competent Cells</a></li></ul></li></ul></li><li><p><a href="#">Notes</a></p><ul><li><a href="biodb">Bio database</a></li><li><a href="dnamathy">DNA Mathylation</a></li><li><a href="skills">Skills</a></li><li><a href="wgcna">WGCNA</a></li><li><a href="oerkke2">表观基因组介绍</a></li><li><a href="niil32">Chip-seq(Black)</a></li><li><a href="chm_modei2">Genome-Wide Profiling of Histone Modification with Chip-Seq (CD Genomics)</a></li><li><a href="#">Math</a><ul><li><a href="odds">Odds Ratio</a></li></ul></li></ul></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Index of Bio-Database</title>
      <link href="/Bioinfor/test2.html"/>
      <url>/Bioinfor/test2.html</url>
      
        <content type="html"><![CDATA[<h1>Index of Bio-Database</h1><h1>综合数据库</h1><ol><li><p><a href="http://www.insdc.org/" target="_blank" rel="noopener">International Nucleotide Sequence Databank</a> (Update:06/06/20; 1.539582s)</p><ul><li>INSD (国际核酸序列数据库）</li><li>DDBJ(日) + EMBL(欧) + GenBank(美)</li></ul></li><li><p><a href="http://www.ncbi.nlm.nih.gov/Web/Genbank/" target="_blank" rel="noopener">GenBank</a> (Update:06/06/20; 1.319294s)</p><ul><li>美国国家生物技术信息中心（NCBI）所维护的供公众自由读取的、带注释的DNA序列的总数据库。</li></ul></li><li><p><a href="http://www.ebi.ac.uk/embl.html" target="_blank" rel="noopener">EMBL</a> (Update:06/06/20; 1.264116s)</p><ul><li>欧洲分子生物学实验室的DNA和RNA 序列库。</li></ul></li><li><p><a href="http://www.ddbj.nig.ac.jp/" target="_blank" rel="noopener">DNA Databank of Japan</a> (Update:06/06/20; 0.706016s)</p><ul><li>DDBJ, 日本核酸数据库</li></ul></li><li><p><a href="http://www.ncgr.org/gsdb/" target="_blank" rel="noopener">Genome Sequence DataBase</a> (Update:06/06/20; OutOfTime)</p><ul><li>GSDB, 由美国国家基因组资源中心（NCGR）维护的DNA序列关系数据库</li></ul></li><li><p><a href="http://www.tigr.org/tdb/hcd/overview.html" target="_blank" rel="noopener">TIGR DATAbase</a> (Update:06/06/20; OutOfTime)</p><ul><li>是世界上最大的cDNA数据库，还有大量的EST序列和人类基因索引（HGI）。</li></ul></li></ol><h1>DNA Sequence Database</h1><p>包括与DNA的复制、转录、修复等有密切关系的蛋白质因子。</p><p><a href="http://www.biosino.org/" target="_blank" rel="noopener">BioSino</a> (Update:06/06/20; 4.264297s) – 中国自主开发的核酸序列公共数据库。</p><p><a href="http://www.kazusa.or.jp/codon/" target="_blank" rel="noopener">CUTG</a> (Update:06/06/20; 0.319547s) – Codon Usage, MM子使用频度表。</p><p><a href="https://epd.epfl.ch//index.php" target="_blank" rel="noopener">EPD</a> (Update:06/06/20; 4.441536s) – Eukaryotic Promotor Database, 真核生物启动子数据库</p><p><a href="http://gene-regulation.com/pub/databases.html" target="_blank" rel="noopener">TRANSFAC</a> (Update:06/06/20; 4.482692s) – <b title="TRANSFAC® provides data on eukaryotic transcription factors, their experimentally-proven binding sites, consensus binding sequences (positional weight matrices) and regulated genes. TRANSCompel contains data on eukaryotic transcription factors experimentally proven to act together in a synergistic or antagonistic manner.">eukaryotic transcription factors, 真核生物基因表达调控因子的数据库</b></p><p><a href="http://wwwmgs.bionet.nsc.ru/mgs/gnw/trrd/" target="_blank" rel="noopener">TRRD</a> (Update:06/06/20; 1.182319s) – <b title="TRRD is a unique information resource, accumulating information on structural and functional organization of transcription regulatory regions of eukaryotic genes. Only experimentally confirmed information is included into TRRD."> transcription regulatory regions of eukaryotic genes, 真核生物基因组转录调控区数据库。</b></p><p><a href="http://www.ifti.org/" target="_blank" rel="noopener">OOTFD</a> (Update:06/06/20; 1.553894s) – <b title ="MIRAGE (Molecular Informatics Resource for the Analysis of Gene Expression) is a web site dedicated to methodologies, tools, and technologies relating to gene expression information. MIRAGE is a web resource of the Institute for Transcriptional Informatics. Buttons to the right link to IFTI sequence analysis and database services. Buttons in the lower frame offer links to other resources in the area of gene expression and regulation. For information on bioinformatics products using IFTI materials, please visit the Products page. For questions and comments regarding this web resource, please send a message to IFTI.  ">Molecular Informatics Resource for the Analysis of Gene Expression, 转录因子和基因表达数据库</b></p><p><a href="http://www.girinst.org/server/repbase.html" target="_blank" rel="noopener">RepBase</a> (Update:06/06/20; 5.79244s) – <b title="Repbase Update is an Electronic Journal established in 1997 by Genetic Information Research Institute with partial grant support from the NIH (grant 1 P41 LM062252), and it is based on our previous work (Jurka et al., 1992; Jurka, 1993, 1994, 1995, NCBI Repository) which originated thanks to the support from the Department of Energy. The new format is designed to institutionalize this publication, in order to provide an uninterrupted supply of quality information to the genome sequencing communities.Our goal is to collect, review and systematically organize representative examples or consensus sequences of repetitive elements from all eukaryotic species. Currently, Repbase Update is being updated several times a year based on cumulative submissions from individual researchers. Many entries represent original information not published anywhere else. The sequence data and other information is organized in a computer-readable format.">sequences of repetitive elements from all eukaryotic species, 真核生物DNA中重复序列数据库</b></p><p><a href="https://academic.oup.com/nar/article/48/D1/D155/5584837" target="_blank" rel="noopener">MicroSatellite (paper)</a> (Update:06/06/20; OutOfTime) – 微衛星片段數據</p><ul><li><a href="http://minisatellites.u-psud.fr" target="_blank" rel="noopener">MTRD: Microorganism Tandem Repeats Database</a> (Update:06/06/20; 2.717098s)</li><li><a href="http://veenuash.info/web1/index.html" target="_blank" rel="noopener">UgMSD: UgMicro SatDb</a> (Update:06/06/20; 4.506668s)</li><li><a href="http://marker.kazusa.or.jp/" target="_blank" rel="noopener">KMD: Kazusa Marker Database</a> (Update:06/06/20; 1.380331s)</li><li><a href="http://www.sesame-bioinfo.org/PMDBase/index.html" target="_blank" rel="noopener">PMDBase: Plant Microsatellite DNAs Database</a> (Update:06/06/20; OutOfTime)</li><li><a href="https://tandem.bu.edu/cgi-bin/trdb/trdb.exe?taskid=0" target="_blank" rel="noopener">TRDB: Tandem Repeats Database</a></li><li><a href="http://mail.nbfgr.res.in/fishmicrosat/" target="_blank" rel="noopener">FMS: FishMicro Sat</a> (Update:06/06/20; OutOfTime)</li><li><a href="http://www.mcr.org.in/micas/" target="_blank" rel="noopener">MICAS</a> (Update:06/06/20; 4.733194s)</li><li><a href="http://www.veenuash.info/" target="_blank" rel="noopener">EMSDb (EuMicroSat Db)</a> (Update:06/06/20; 4.511092s)</li><li><a href="http://mggm-lab.easyomics.org/" target="_blank" rel="noopener">SSRome</a> (Update:06/06/20; OutOfTime)</li><li><a href="https://data.ccmb.res.in/msdb" target="_blank" rel="noopener">MSDB: MicroSatellite DataBase</a> (Update:06/06/20; 0.365515s)</li></ul><p><a href="http://www.ncbi.nlm.nih.gov/dbSTS/" target="_blank" rel="noopener">dbSTS</a> (Update:06/06/20; 2.3515s) – Sequence Tagged Sites, 序列标记位点数据库。</p><p><a href="http://www.ncbi.nlm.nih.gov/dbEST/" target="_blank" rel="noopener">dbEST</a> (Update:06/06/20; 0.456846s) – 这是GenBank的重要组成部分,它包含若干物种的已表达的序列标记信息.</p><p><a href="ftp://ftp.ebi.ac.uk/pub/databases/nucleosomal_dna/">NUCLEOSOME</a> – 数据库,收集实验测定的核小体数据,用于预测DNA中与组蛋白八聚体结合的位点.</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Bioinfor/yuque.json"/>
      <url>/Bioinfor/yuque.json</url>
      
        <content type="html"><![CDATA[{"repo":"liuwenkan/bioinf","pattern":"**/*.md"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>百度统计 API</title>
      <link href="/Blog/Baidu_statistic.html"/>
      <url>/Blog/Baidu_statistic.html</url>
      
        <content type="html"><![CDATA[<h1>百度统计 API</h1><p>详细介绍:<br /><a href="https://tongji.baidu.com/api/manual/Chapter2/openapi.html" target="_blank" rel="noopener">https://tongji.baidu.com/api/manual/Chapter2/openapi.html</a></p><p><a name="WjQRg"></a></p><h1>1. 登录<a href="http://developer.baidu.com/console#app/project" target="_blank" rel="noopener">百度开发者中心控制台</a>,获取code</h1><p>将</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://openapi.baidu.com/oauth/2.0/authorize?response_type=code&amp;</span><br><span class="line">  client_id=&#123;CLIENT_ID&#125;&amp;</span><br><span class="line">  redirect_uri=&#123;REDIRECT_URI&#125;&amp;</span><br><span class="line">  scope=basic&amp;display=popup</span><br></pre></td></tr></table></figure></div><p>按照对应关系</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">设置信息       对应参数</span><br><span class="line">API Key      &#123;CLIENT_ID&#125;</span><br><span class="line">Secret Key   &#123;CLIENT_SECRET&#125;</span><br><span class="line">回调URI       &#123;REDIRECT_URI&#125;</span><br></pre></td></tr></table></figure></div><p>填入对应信息</p><p>注意:     1.&quot;{}&quot; <strong>不能保留, 直接删掉</strong>. 我之前卡了好久, 就是因为没有删去中括号.<br />2.REDIRECT_URI 建议使用活网站, 不然跳转的时候, 会等很久很久.<br />然后直接黏贴在浏览器里,便可<br />Example:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http://openapi.baidu.com/oauth/2.0/authorize?response_type=code&amp;</span><br><span class="line">  client_id=m2OY4t4oBs59XG2Sasdads&amp;</span><br><span class="line">  redirect_uri=https://www.baidu.com&amp;</span><br><span class="line">  scope=basic&amp;display=popup</span><br></pre></td></tr></table></figure></div><p>第一次会显示登录的信息, 登陆后,会跳转到你的REDIRECT_URI. 死网站则会是空白页面. 这时候, 查看地址<img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1582598175959-edffed6e-c5a6-4017-a43a-067c2dc14558.png#align=left&amp;display=inline&amp;height=167&amp;name=image.png&amp;originHeight=167&amp;originWidth=527&amp;size=20227&amp;status=done&amp;style=none&amp;width=527" alt="image.png"><br />后面会多出一个 ?code=XXXXXX<br /><strong>这个code很重要</strong>.<br /></p><p><a name="Fzaon"></a></p><h1>2. 获取 token</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">http://openapi.baidu.com/oauth/2.0/token?grant_type=authorization_code&amp;</span><br><span class="line">  code=&#123;CODE&#125;&amp;</span><br><span class="line">  client_id=&#123;CLIENT_ID&#125;&amp;</span><br><span class="line">  client_secret=&#123;CLIENT_SECRET&#125;&amp;</span><br><span class="line">  redirect_uri=&#123;REDIRECT_URI&#125;</span><br></pre></td></tr></table></figure></div><p>这一步, code 填上 刚刚获取的code, 然后下面三个和之前一样. 黏贴如浏览器<br />这样就可以获得access_token 了, 有的access_token, 就可以为所欲为了~<br /><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1582598956253-eacb2fce-d2f3-4218-b235-368b3077839e.png#align=left&amp;display=inline&amp;height=466&amp;name=image.png&amp;originHeight=466&amp;originWidth=1914&amp;size=80628&amp;status=done&amp;style=none&amp;width=1914" alt="image.png"><br><a name="JTEqX"></a></p><h1>3. API 使用</h1><p>获取url 地址:<a href="https://tongji.baidu.com/api/debug/#" target="_blank" rel="noopener">https://tongji.baidu.com/api/debug/#</a></p><p><a name="NOjVF"></a></p><h2 id="3-1-获取设置网站的-ID"><a class="header-anchor" href="#3-1-获取设置网站的-ID"></a>3.1 获取设置网站的 ID:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://openapi.baidu.com/rest/2.0/tongji/config/getSiteList?</span><br><span class="line">  access_token=&#123;you_token&#125;</span><br></pre></td></tr></table></figure></div><p><img src="https://cdn.nlark.com/yuque/0/2020/jpeg/691897/1582599246003-9ee8bf4c-1716-4ef3-a189-89c313b445d7.jpeg#align=left&amp;display=inline&amp;height=141&amp;name=123.jpg&amp;originHeight=141&amp;originWidth=400&amp;size=23063&amp;status=done&amp;style=none&amp;width=400" alt="123.jpg"><br /><br><br /></p><p><a name="5L5v1"></a></p><h1>4. 打包成Python函數</h1><p>python API 打包函數:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time, requests</span><br><span class="line">TOKEN = <span class="string">""</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Tongji</span><span class="params">(TOKEN)</span>:</span></span><br><span class="line">    TIME =time.strftime(<span class="string">"%Y%m%d"</span>, time.localtime())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Get_UV</span><span class="params">(TOKEN,ID,TIME)</span>:</span></span><br><span class="line">        <span class="comment">#Aquiring PV and UV inform mation by ID (History and today)</span></span><br><span class="line">        A = <span class="string">"https://openapi.baidu.com/rest/2.0/tongji/report/getData?access_token="</span> + TOKEN</span><br><span class="line">        B = <span class="string">"&amp;site_id="</span>+str(ID)</span><br><span class="line">        C = <span class="string">"&amp;start_date=20200120&amp;end_date="</span>+TIME</span><br><span class="line">        D = <span class="string">"&amp;metrics=pv_count%2Cvisitor_count&amp;method=overview%2FgetTimeTrendRpt"</span></span><br><span class="line">        url = A+B+C+D</span><br><span class="line">        Data = requests.get(url).json()</span><br><span class="line">        UVPV_list = Data[<span class="string">'result'</span>][<span class="string">'items'</span>][<span class="number">1</span>]</span><br><span class="line">        PV_T = UVPV_list[<span class="number">-1</span>][<span class="number">0</span>]</span><br><span class="line">        <span class="keyword">if</span> PV_T ==<span class="string">"--"</span>:</span><br><span class="line">            PV_T = <span class="number">0</span></span><br><span class="line">        UV_T = UVPV_list[<span class="number">-1</span>][<span class="number">1</span>]</span><br><span class="line">        <span class="keyword">if</span> UV_T ==<span class="string">"--"</span>:</span><br><span class="line">            UV_T = <span class="number">0</span></span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        PV = []</span><br><span class="line">        UV = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> UVPV_list:</span><br><span class="line">            <span class="keyword">if</span> i[<span class="number">0</span>] != <span class="string">"--"</span>:</span><br><span class="line">                PV+=[i[<span class="number">0</span>]]</span><br><span class="line">            <span class="keyword">if</span> i[<span class="number">1</span>] != <span class="string">"--"</span>:</span><br><span class="line">                UV+=[i[<span class="number">1</span>]]</span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        PV = str(sum(PV))+<span class="string">"+"</span>+str(PV_T)</span><br><span class="line">        UV = str(sum(UV))+<span class="string">"+"</span>+str(UV_T)</span><br><span class="line">        <span class="keyword">return</span> PV,UV</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Location_Get</span><span class="params">(TOKEN, TIME)</span>:</span></span><br><span class="line">        <span class="comment"># aquiring location-distribution information by province today</span></span><br><span class="line">      url1 = <span class="string">"https://openapi.baidu.com/rest/2.0/tongji/report/getData?access_token="</span></span><br><span class="line">      url2 = TOKEN +<span class="string">"&amp;site_id=14350939&amp;start_date="</span></span><br><span class="line">      url3 = TIME + <span class="string">"&amp;end_date="</span>+TIME+<span class="string">"&amp;metrics=pv_count&amp;method=overview%2FgetDistrictRpt"</span></span><br><span class="line">      url = url1+url2+url3</span><br><span class="line">      Data = requests.get(url).json()</span><br><span class="line">      Location = <span class="string">""</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> Data[<span class="string">'result'</span>][<span class="string">'items'</span>][<span class="number">0</span>]:</span><br><span class="line">        Location += i[<span class="number">0</span>] +<span class="string">'\n'</span></span><br><span class="line">      Location_N = <span class="string">""</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> Data[<span class="string">'result'</span>][<span class="string">'items'</span>][<span class="number">1</span>]:</span><br><span class="line">        Location_N += str(i[<span class="number">0</span>]) +<span class="string">'\n'</span></span><br><span class="line">      <span class="keyword">return</span> Location,Location_N</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Location_Get_C</span><span class="params">(TOKEN, TIME)</span>:</span></span><br><span class="line">        <span class="comment"># Aquring location-distribution information by Country today</span></span><br><span class="line">      url1 = <span class="string">"https://openapi.baidu.com/rest/2.0/tongji/report/getData?access_token="</span></span><br><span class="line">      url2 = TOKEN +<span class="string">"&amp;site_id=14350939&amp;start_date="</span></span><br><span class="line">      url3 = TIME + <span class="string">"&amp;end_date="</span>+TIME+<span class="string">"&amp;metrics=pv_count&amp;method=visit%2Fworld%2Fa"</span></span><br><span class="line">      url = url1+url2+url3</span><br><span class="line">      Data = requests.get(url).json()</span><br><span class="line">      Location = <span class="string">""</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> Data[<span class="string">'result'</span>][<span class="string">'items'</span>][<span class="number">0</span>]:</span><br><span class="line">        Location += i[<span class="number">0</span>][<span class="string">'name'</span>] +<span class="string">'\n'</span></span><br><span class="line">      Location_N = <span class="string">""</span></span><br><span class="line">      <span class="keyword">for</span> i <span class="keyword">in</span> Data[<span class="string">'result'</span>][<span class="string">'items'</span>][<span class="number">1</span>]:</span><br><span class="line">        Location_N += str(i[<span class="number">0</span>]) +<span class="string">'\n'</span></span><br><span class="line">      <span class="keyword">return</span> Location,Location_N</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">New_Visitor_Get</span><span class="params">(TOKEN, TIME)</span>:</span></span><br><span class="line">        <span class="comment"># Aquring the ratio of the new visiter today</span></span><br><span class="line">      url1 = <span class="string">"https://openapi.baidu.com/rest/2.0/tongji/report/getData?access_token="</span></span><br><span class="line">      url2 = TOKEN + <span class="string">"&amp;site_id=14350939&amp;start_date="</span></span><br><span class="line">      url3 = TIME + <span class="string">"&amp;end_date="</span> + TIME + <span class="string">"&amp;metrics=new_visitor_ratio&amp;method=source%2Fall%2Fa"</span></span><br><span class="line">      url = url1 + url2 +url3</span><br><span class="line">      Data = requests.get(url).json()</span><br><span class="line">      <span class="comment">#</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">"新訪客比例 "</span>+str(Data[<span class="string">'result'</span>][<span class="string">'sum'</span>][<span class="number">0</span>][<span class="number">0</span>])+<span class="string">"%"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">        <span class="comment"># Aquiring Domains' Name and ID</span></span><br><span class="line">        url1= <span class="string">"https://openapi.baidu.com/rest/2.0/tongji/config/getSiteList?access_token="</span>+TOKEN</span><br><span class="line">        List = requests.get(url1).json()</span><br><span class="line">        Domain = List[<span class="string">'list'</span>][<span class="number">0</span>][<span class="string">'domain'</span>]</span><br><span class="line">        Domain_ID = List[<span class="string">'list'</span>][<span class="number">0</span>][<span class="string">'site_id'</span>]</span><br><span class="line">        Sub_domain = [[Domain,Domain_ID]]</span><br><span class="line">        Sub_List = List[<span class="string">'list'</span>][<span class="number">0</span>][<span class="string">'sub_dir_list'</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> Sub_List:</span><br><span class="line">            Sub_domain += [[i[<span class="string">'name'</span>],i[<span class="string">'sub_dir_id'</span>]]]</span><br><span class="line">        Result = &#123;&#125;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> Sub_domain:</span><br><span class="line">            PV,UV = Get_UV(TOKEN,i[<span class="number">1</span>],TIME)</span><br><span class="line">            Result.update(&#123;i[<span class="number">0</span>]:&#123;<span class="string">"PV"</span>:PV,<span class="string">"UV"</span>:UV&#125;&#125;)</span><br><span class="line">        Name = <span class="string">""</span></span><br><span class="line">        PV   = <span class="string">""</span></span><br><span class="line">        UV   = <span class="string">""</span></span><br><span class="line">        <span class="keyword">for</span>  i  <span class="keyword">in</span> Result:</span><br><span class="line">            Name += i + <span class="string">"\n"</span></span><br><span class="line">            PV   += Result[i][<span class="string">'PV'</span>]+<span class="string">"\n"</span></span><br><span class="line">            UV   += Result[i][<span class="string">'UV'</span>]+<span class="string">"\n"</span></span><br><span class="line">        New_Vis_N = New_Visitor_Get(TOKEN, TIME)</span><br><span class="line">        Location,Location_N = Location_Get(TOKEN, TIME)</span><br><span class="line">        Location_C,Location_C_N = Location_Get_C(TOKEN, TIME)</span><br><span class="line">        <span class="keyword">return</span> Name,PV,UV,Location,Location_N,Location_C,Location_C_N,New_Vis_N</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Name,PV,UV,Location,Location_N,Location_C,Location_C_N,New_Vis_N = Tongji(TOKEN)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NrTVwn.jpg" alt="NrTVwn.jpg"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>BiliBili API</title>
      <link href="/Blog/BiliBili-API.html"/>
      <url>/Blog/BiliBili-API.html</url>
      
        <content type="html"><![CDATA[<h1 id="BiliBili-API"><a href="#BiliBili-API" class="headerlink" title="BiliBili API"></a>BiliBili API</h1><p>来源:<a href="https://github.com/StuPeter/Bilibili_Views_spider/blob/master/BiliSpider.py" target="_blank" rel="noopener">https://github.com/StuPeter/Bilibili_Views_spider/blob/master/BiliSpider.py</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python  </span></span><br><span class="line"><span class="comment"># _*_ coding:utf-8 _*_  </span></span><br><span class="line"><span class="comment"># @Version : 1.0  </span></span><br><span class="line"><span class="comment"># @Time    : 2018/10/25</span></span><br><span class="line"><span class="comment"># @Author  : 圈圈烃</span></span><br><span class="line"><span class="comment"># @File    : BiliSpider</span></span><br><span class="line"><span class="comment"># @Description:</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BiliSpider</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.online_api = <span class="string">"https://api.bilibili.com/x/web-interface/online"</span>  <span class="comment"># 在线人数</span></span><br><span class="line">        self.video_api = <span class="string">"https://api.bilibili.com/x/web-interface/archive/stat?&amp;aid=%s"</span>    <span class="comment"># 视频信息</span></span><br><span class="line">        self.newlist_api = <span class="string">"https://api.bilibili.com/x/web-interface/newlist?&amp;rid=%s&amp;pn=%s&amp;ps=%s"</span>     <span class="comment"># 最新视频信息</span></span><br><span class="line">        self.region_api = <span class="string">"https://api.bilibili.com/x/web-interface/dynamic/region?&amp;rid=%s&amp;pn=%s&amp;ps=%s"</span>  <span class="comment"># 最新动态信息</span></span><br><span class="line">        self.member_api = <span class="string">"http://space.bilibili.com/ajax/member/GetInfo"</span>  <span class="comment"># 用户信息</span></span><br><span class="line">        self.stat_api = <span class="string">"https://api.bilibili.com/x/relation/stat?vmid=%s"</span>  <span class="comment"># 用户关注数和粉丝总数</span></span><br><span class="line">        self.upstat_api = <span class="string">"https://api.bilibili.com/x/space/upstat?mid=%s"</span>     <span class="comment"># 用户总播放量和总阅读量</span></span><br><span class="line">        self.follower_api = <span class="string">"https://api.bilibili.com/x/relation/followings?vmid=%s&amp;pn=%s&amp;ps=%s"</span>    <span class="comment"># 用户关注信息</span></span><br><span class="line">        self.fans_api = <span class="string">"https://api.bilibili.com/x/relation/followers?vmid=%s&amp;pn=%s&amp;ps=%s"</span>    <span class="comment"># 用户粉丝信息</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_api</span><span class="params">(api_url)</span>:</span></span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">"Accept"</span>: <span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"</span>,</span><br><span class="line">            <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip, deflate, br"</span>,</span><br><span class="line">            <span class="string">"Accept-Language"</span>: <span class="string">"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2"</span>,</span><br><span class="line">            <span class="string">"Host"</span>: <span class="string">"api.bilibili.com"</span>,</span><br><span class="line">            <span class="string">"Referer"</span>: <span class="string">"https://www.bilibili.com/"</span>,</span><br><span class="line">            <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36"</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        res = requests.get(api_url, headers=headers)</span><br><span class="line">        res_dict = res.json()</span><br><span class="line">        <span class="keyword">return</span> res_dict</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_online</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取在线信息</span></span><br><span class="line"><span class="string">        all_count: 最新投稿</span></span><br><span class="line"><span class="string">        web_online: 在线人数</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        online_dic = BiliSpider.get_api(self.online_api)</span><br><span class="line">        <span class="keyword">return</span> online_dic</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_video_info</span><span class="params">(self, aid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取视频信息</span></span><br><span class="line"><span class="string">        :param aid: 视频id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.video_api %aid)</span><br><span class="line">        <span class="comment"># print(res)</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_newlist_info</span><span class="params">(self, rid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取最新视频信息</span></span><br><span class="line"><span class="string">        :param rid: 二级标题的id (详见tid_info.txt)</span></span><br><span class="line"><span class="string">        :param pn:  页数</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.newlist_api %(rid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_region_info</span><span class="params">(self, rid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取最新视频信息</span></span><br><span class="line"><span class="string">        :param rid: 二级标题的id (详见tid_info.txt)</span></span><br><span class="line"><span class="string">        :param pn:  页数</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.region_api %(rid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_member_info</span><span class="params">(self, mid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取用户信息</span></span><br><span class="line"><span class="string">        :param mid:用户id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        post_data = &#123;</span><br><span class="line">            <span class="string">"crsf"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="string">"mid"</span>: mid,</span><br><span class="line">        &#125;</span><br><span class="line">        header = &#123;</span><br><span class="line">            <span class="string">"Host"</span>: <span class="string">"space.bilibili.com"</span>,</span><br><span class="line">            <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:63.0) Gecko/20100101 Firefox/63.0"</span>,</span><br><span class="line">            <span class="string">"Accept"</span>: <span class="string">"application/json, text/plain, */*"</span>,</span><br><span class="line">            <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip, deflate, br"</span>,</span><br><span class="line">            <span class="string">"Accept-Language"</span>: <span class="string">"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2"</span>,</span><br><span class="line">            <span class="string">"Referer"</span>: <span class="string">"https://www.bilibili.com/"</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        res = requests.post(self.member_api, data=post_data, headers=header)</span><br><span class="line">        member_dic = json.dumps(res.json(), ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> member_dic</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_stat_info</span><span class="params">(self, vmid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户的关注数和粉丝总数</span></span><br><span class="line"><span class="string">        :param vmid: 用户id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.stat_api % vmid)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_upstat_info</span><span class="params">(self, mid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户的总播放量和总阅读量</span></span><br><span class="line"><span class="string">        :param mid: 用户id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.upstat_api % mid)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_follower_info</span><span class="params">(self, vmid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户关注者信息</span></span><br><span class="line"><span class="string">        :param vmid:用户id</span></span><br><span class="line"><span class="string">        :param pn:  页数 最多5页</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.follower_api %(vmid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_fans_info</span><span class="params">(self, vmid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户粉丝信息</span></span><br><span class="line"><span class="string">        :param vmid:用户id</span></span><br><span class="line"><span class="string">        :param pn:  页数 最多5页</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.fans_api %(vmid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    bili = BiliSpider()</span><br><span class="line">    res = bili.get_member_info(<span class="string">"330626607"</span>)</span><br><span class="line">    print(res)</span><br></pre></td></tr></table></figure></div><h2 id="Enjoy"><a href="#Enjoy" class="headerlink" title="Enjoy ~"></a>Enjoy ~</h2><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Covid: nCov Data by Python</title>
      <link href="/Blog/ConvData_python.html"/>
      <url>/Blog/ConvData_python.html</url>
      
        <content type="html"><![CDATA[<h1 id="Covid-nCov-Data-by-Python"><a href="#Covid-nCov-Data-by-Python" class="headerlink" title="Covid: nCov Data by Python"></a>Covid: nCov Data by Python</h1><p><a href="https://pypi.org/project/covid" target="_blank" rel="noopener">Websites</a></p><h1 id="Intsall"><a href="#Intsall" class="headerlink" title="Intsall"></a>Intsall</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install Covid</span><br></pre></td></tr></table></figure></div><p>Python package to get information regarding the novel corona virus provided by <span style="background:salmon"><strong>Johns Hopkins university</strong></span> and <span style="background:salmon"><strong>worldometers.info</strong></span></p><h1 id="1-John-Hopkins-University-API"><a href="#1-John-Hopkins-University-API" class="headerlink" title="1. John Hopkins University API"></a>1. John Hopkins University API</h1><p>優點：<br>  有經緯度信息，方便畫地圖<br>缺點：<br>  國內鏈接速度較慢</p><h2 id="Get-All-Data"><a href="#Get-All-Data" class="headerlink" title="Get All Data"></a>Get All Data</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> covid <span class="keyword">import</span> Covid</span><br><span class="line"></span><br><span class="line">covid = Covid()</span><br><span class="line">covid.get_data()</span><br></pre></td></tr></table></figure></div><p>理論上你將獲得：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[</span><br><span class="line">    &#123;</span><br><span class="line">        &#39;id&#39;: &#39;53&#39;,</span><br><span class="line">        &#39;country&#39;: &#39;China&#39;,</span><br><span class="line">        &#39;confirmed&#39;: 81020,</span><br><span class="line">        &#39;active&#39;: 9960,</span><br><span class="line">        &#39;deaths&#39;: 3217,</span><br><span class="line">        &#39;recovered&#39;: 67843,</span><br><span class="line">        &#39;latitude&#39;: 30.5928,</span><br><span class="line">        &#39;longitude&#39;: 114.3055,</span><br><span class="line">        &#39;last_update&#39;: 1584097775000</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;...</span><br></pre></td></tr></table></figure></div><p>實際上：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Traceback (most recent call last):</span><br><span class="line">  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</span><br><span class="line">  File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;covid&#x2F;john_hopkins&#x2F;covid.py&quot;, line 137, in get_data</span><br><span class="line">    return [CovidModel(**case[&quot;attributes&quot;]).dict() for case in cases]</span><br><span class="line">  File &quot;&#x2F;usr&#x2F;local&#x2F;lib&#x2F;python3.7&#x2F;site-packages&#x2F;covid&#x2F;john_hopkins&#x2F;covid.py&quot;, line 137, in &lt;listcomp&gt;</span><br><span class="line">    return [CovidModel(**case[&quot;attributes&quot;]).dict() for case in cases]</span><br><span class="line">  File &quot;pydantic&#x2F;main.py&quot;, line 338, in pydantic.main.BaseModel.__init__</span><br><span class="line">pydantic.error_wrappers.ValidationError: 1 validation error for CovidModel</span><br><span class="line">Recovered</span><br><span class="line">  none is not an allowed value (type&#x3D;type_error.none.not_allowed)</span><br></pre></td></tr></table></figure></div><p>不過並不影響你獲取單個國際或地區的數據：</p><h2 id="Get-Data-by-Country"><a href="#Get-Data-by-Country" class="headerlink" title="Get Data by Country"></a>Get Data by Country</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">italy_cases = covid.get_status_by_country_id(<span class="number">115</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &#39;id&#39;: &#39;115&#39;,</span><br><span class="line">    &#39;country&#39;: &#39;Italy&#39;,</span><br><span class="line">    &#39;confirmed&#39;: 24747,</span><br><span class="line">    &#39;active&#39;: 20603,</span><br><span class="line">    &#39;deaths&#39;: 1809,</span><br><span class="line">    &#39;recovered&#39;: 2335,</span><br><span class="line">    &#39;latitude&#39;: 41.8719,</span><br><span class="line">    &#39;longitude&#39;: 12.5674,</span><br><span class="line">    &#39;last_update&#39;: 1584318130000</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>國家編號獲取：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">countries = covid.list_countries()</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;&#39;id&#39;: &#39;18&#39;, &#39;name&#39;: &#39;US&#39;&#125;, &#123;&#39;id&#39;: &#39;22&#39;, &#39;name&#39;: &#39;Brazil&#39;&#125;,...</span><br></pre></td></tr></table></figure></div><h2 id="Other-Datas"><a href="#Other-Datas" class="headerlink" title="Other Datas"></a>Other Datas</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Get Total Active cases</span></span><br><span class="line">active = covid.get_total_active_cases()</span><br><span class="line"><span class="comment">#Get Total Confirmed cases</span></span><br><span class="line">confirmed = covid.get_total_confirmed_cases()</span><br><span class="line"><span class="comment">#Get Total Recovered cases</span></span><br><span class="line">recovered = covid.get_total_recovered()</span><br><span class="line"><span class="comment">#Get Total Deaths</span></span><br><span class="line">deaths = covid.get_total_deaths()</span><br></pre></td></tr></table></figure></div><h1 id="2-Worldometers-info"><a href="#2-Worldometers-info" class="headerlink" title="2. Worldometers.info"></a>2. Worldometers.info</h1><p>速度快，但是沒有經緯度信息</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">covid = Covid(source=<span class="string">"worldometers"</span>)</span><br><span class="line"><span class="comment">#Get Data</span></span><br><span class="line">covid.get_data()</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[&#123;&#39;country&#39;: &#39;North America&#39;, &#39;confirmed&#39;: 2258033, &#39;new_cases&#39;: 4166, &#39;deaths&#39;: 135128, &#39;rec...</span><br></pre></td></tr></table></figure></div><h1 id="畫圖"><a href="#畫圖" class="headerlink" title="畫圖"></a>畫圖</h1><p>因爲種種原因- - 我放棄使用python了，<br>還是用R的ggplot的好。 哼哼 =  =</p><h2 id="1-數據獲取"><a href="#1-數據獲取" class="headerlink" title="1. 數據獲取"></a>1. 數據獲取</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> covid <span class="keyword">import</span> Covid</span><br><span class="line"></span><br><span class="line">covid = Covid()</span><br><span class="line">countries = covid.list_countries()</span><br><span class="line">covid.get_status_by_country_id(int(countries[<span class="number">0</span>][<span class="string">'id'</span>]))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多線程快速獲取</span></span><br><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">worker</span><span class="params">(i, return_dict)</span>:</span></span><br><span class="line">  <span class="string">'''worker function'''</span></span><br><span class="line">  Result = covid.get_status_by_country_id(int(countries[i][<span class="string">'id'</span>]))</span><br><span class="line">  return_dict[Result] = Result</span><br><span class="line">  print(Result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multicore</span><span class="params">(Pool=<span class="number">10</span>)</span>:</span></span><br><span class="line">  pool = mp.Pool(processes=Pool)</span><br><span class="line">  <span class="comment">#return_dict = manager.dict()</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    <span class="comment"># Working function "echo" and the arg 'i'</span></span><br><span class="line">    multi_res = [pool.apply_async(worker,(i,return_dict))]</span><br><span class="line">  pool.close()</span><br><span class="line">  pool.join()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">  manager = mp.Manager()</span><br><span class="line">  return_dict = manager.dict()</span><br><span class="line">  jobs = []</span><br><span class="line">  Num = <span class="number">0</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    Num +=<span class="number">1</span></span><br><span class="line">    <span class="keyword">print</span> (Num)</span><br><span class="line">    p = mp.Process(target=worker, args=(i,return_dict))</span><br><span class="line">    jobs.append(p)</span><br><span class="line">    p.start()</span><br><span class="line">  <span class="keyword">for</span> proc <span class="keyword">in</span> jobs:</span><br><span class="line">    proc.join()</span><br></pre></td></tr></table></figure></div><p> = =</p><p> 放棄了- - 太慢了</p><hr><p> github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br> blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br> R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Graphviz</title>
      <link href="/Blog/Graphviz.html"/>
      <url>/Blog/Graphviz.html</url>
      
        <content type="html"><![CDATA[<h1>Graphviz</h1><p><a name="XsnEk"></a></p><h1>1 Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">digraph <span class="literal">F</span> &#123;</span><br><span class="line">    rankdir = LR;</span><br><span class="line">    edge [style=solid];</span><br><span class="line">    node [style=filled, font=Courier];</span><br><span class="line"></span><br><span class="line">    subgraph M &#123;</span><br><span class="line">        rank = same;</span><br><span class="line">        Start [label = <span class="string">"Lamp doesn't work"</span>, shape = box, fillcolor = <span class="string">"#FF0000"</span> ];</span><br><span class="line">        End   [label = <span class="string">"Repair lamp"</span>      , shape = box, color = coral];</span><br><span class="line"></span><br><span class="line">        Con1 [label = <span class="string">"Lamp plugged in?"</span>, shape = diamond, color = green, size = <span class="number">3</span>];</span><br><span class="line">        Con2 [label = <span class="string">"Bulb burned out?"</span>, shape = diamond, color = green, size = <span class="number">3</span>];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    subgraph C &#123;</span><br><span class="line">        rank = same;</span><br><span class="line">        RB [label = <span class="string">"Replace bulb"</span>, shape = box, color = deepskyblue1];</span><br><span class="line">        AP [label = <span class="string">"Plug in lamp"</span>, shape = box, color = deepskyblue1];</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Start -&gt; Con1;</span><br><span class="line">    Con1 -&gt; AP   [label = <span class="string">"No"</span>];</span><br><span class="line">    Con1 -&gt; Con2 [label = <span class="string">"Yes"</span>];</span><br><span class="line"></span><br><span class="line">    Con2 -&gt; RB  [label = <span class="string">"Yes"</span>];</span><br><span class="line">    Con2 -&gt; End [label = <span class="string">"No"</span>];</span><br><span class="line"></span><br><span class="line">    AP -&gt; End</span><br><span class="line">    RB -&gt; End</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NrHdqH.png" alt="NrHdqH.png"></p><p><a name="DshML"></a></p><h2 id="More-exemples"><a class="header-anchor" href="#More-exemples"></a>More exemples:</h2><p><a href="http://graphviz.org/gallery/" target="_blank" rel="noopener">http://graphviz.org/gallery/</a></p><p><a name="gPUU1"></a></p><h1>2 Parameters</h1><p><a name="rv6r4"></a></p><h2 id="2-1-Structure"><a class="header-anchor" href="#2-1-Structure"></a>2.1 Structure</h2><p>Source:<a href="https://graphviz.gitlab.io/_pages/doc/info/lang.html" target="_blank" rel="noopener">https://graphviz.gitlab.io/_pages/doc/info/lang.html</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">graph  :  [ strict ] (graph | digraph) [ ID ] <span class="string">'&#123;'</span> stmt_list <span class="string">'&#125;'</span></span><br><span class="line">stmt_list  :  [ stmt [ <span class="string">';'</span> ] stmt_list ]</span><br><span class="line">stmt  :  node_stmt</span><br><span class="line">|  edge_stmt</span><br><span class="line">|  attr_stmt</span><br><span class="line">|  ID <span class="string">'='</span> ID</span><br><span class="line">|  subgraph</span><br><span class="line">attr_stmt  :  (graph | node | edge) attr_list</span><br><span class="line">attr_list  :  <span class="string">'['</span> [ a_list ] <span class="string">']'</span> [ attr_list ]</span><br><span class="line">a_list  :  ID <span class="string">'='</span> ID [ (<span class="string">';'</span> | <span class="string">','</span>) ] [ a_list ]</span><br><span class="line">edge_stmt  :  (node_id | subgraph) edgeRHS [ attr_list ]</span><br><span class="line">edgeRHS  :  edgeop (node_id | subgraph) [ edgeRHS ]</span><br><span class="line">node_stmt  :  node_id [ attr_list ]</span><br><span class="line">node_id  :  ID [ port ]</span><br><span class="line">port  :  <span class="string">':'</span> ID [ <span class="string">':'</span> compass_pt ]</span><br><span class="line">|  <span class="string">':'</span> compass_pt</span><br><span class="line">subgraph  :  [ subgraph [ ID ] ] <span class="string">'&#123;'</span> stmt_list <span class="string">'&#125;'</span></span><br><span class="line">compass_pt  :  (n | ne | e | se | s | sw | w | nw | c | _)</span><br></pre></td></tr></table></figure></div><p>A -&gt; {B C}<br />is equivalent to<br />A -&gt; B<br />A -&gt; C</p><p><a name="pYvmH"></a></p><h2 id="color-for-edge"><a class="header-anchor" href="#color-for-edge"></a>color for edge</h2><p><img src="https://s1.ax1x.com/2020/06/26/NrHtxO.png" alt="NrHtxO.png"></p><p><a name="UebHR"></a></p><h1>Official Documentation</h1><p>Source: <a href="http://graphviz.org/documentation/" target="_blank" rel="noopener">http://graphviz.org/documentation/</a></p><p><a name="EvAhI"></a></p><h2 id="Nodes-edges-…"><a class="header-anchor" href="#Nodes-edges-…"></a>Nodes,edges …</h2><p>Souce: <a href="https://graphviz.gitlab.io/_pages/doc/info/attrs.html" target="_blank" rel="noopener">https://graphviz.gitlab.io/_pages/doc/info/attrs.html</a></p><p>Node shapes</p><p>Source: <a href="https://graphviz.gitlab.io/_pages/doc/info/shapes.html" target="_blank" rel="noopener">https://graphviz.gitlab.io/_pages/doc/info/shapes.html</a><br><img src="https://s1.ax1x.com/2020/06/26/NrHUMD.png" alt="NrHUMD.png"></p><p><a name="L3B7Z"></a></p><h2 id="Edge-shapes"><a class="header-anchor" href="#Edge-shapes"></a>Edge shapes</h2><p>Source: <a href="https://graphviz.gitlab.io/_pages/doc/info/arrows.html" target="_blank" rel="noopener">https://graphviz.gitlab.io/_pages/doc/info/arrows.html</a><br><img src="https://s1.ax1x.com/2020/06/26/NrHase.png" alt="NrHase.png"></p><p><a name="MndZU"></a></p><h2 id="Color"><a class="header-anchor" href="#Color"></a>Color</h2><p>Source: <a href="https://graphviz.gitlab.io/_pages/doc/info/colors.html" target="_blank" rel="noopener">https://graphviz.gitlab.io/_pages/doc/info/colors.html</a><br><img src="https://s1.ax1x.com/2020/06/26/NrH0Zd.png" alt="NrH0Zd.png"></p><p><a name="lu47q"></a></p><h1>For more</h1><p>please visit:</p><p>使用graphviz绘制流程图（2015版）<br /><a href="http://icodeit.org/2015/11/using-graphviz-drawing/" target="_blank" rel="noopener">http://icodeit.org/2015/11/using-graphviz-drawing/</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo with Github</title>
      <link href="/Blog/Hexo_gitpage.html"/>
      <url>/Blog/Hexo_gitpage.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何优雅的白嫖博客服务-hexo-github"><a href="#如何优雅的白嫖博客服务-hexo-github" class="headerlink" title="如何优雅的白嫖博客服务 (hexo + github)"></a>如何优雅的白嫖博客服务 (hexo + github)</h1><p>Date: 2020/6/14<br><a href="https://blog.csdn.net/muzilanlan/article/details/81542917" target="_blank" rel="noopener">Main Tutorial</a></p><p>原博客已经写的很清楚了， 这里我只记录一下我遇到的问题。</p><h1 id="1-npm-error"><a href="#1-npm-error" class="headerlink" title="1. npm error"></a>1. npm error</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm ERR! code EINTEGRITY</span><br><span class="line">npm ERR! sha512-XlPzRtnsdrUfTSkLJPACQgWByybB56E79H8xIjGWj0GL+J/VqENsgc+GER0ytFwrP/6YKCerXdaUWOYMcv6aiA== integrity checksum failed when using sha512: wanted sha512-XlPzRtnsdrUfTSkLJPACQgWByybB56E79H8xIjGWj0GL+J/VqENsgc+GER0ytFwrP/6YKCerXdaUWOYMcv6aiA== but got sha512-BdyVintFFu5qQX0AtuwgmXxphBU1V+VL9+8GPemcM9Q86MPG+MCTA26bCyEyzUqDPVBm7xF3gjACaOwMBEmAZQ==. (653 bytes)</span><br><span class="line"></span><br><span class="line">npm ERR! A complete <span class="built_in">log</span> of this run can be found <span class="keyword">in</span>:</span><br><span class="line">npm ERR!     /home/ken/.npm/_logs/2020-06-14T05_36_46_129Z-debug.log</span><br></pre></td></tr></table></figure></div><p><strong>Solution:</strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm cache verify</span><br><span class="line">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></div><p>reference: <a href="https://www.jianshu.com/p/2899bd2a0a20" target="_blank" rel="noopener">天魂_TH 2017</a></p><h1 id="2-npm-Download"><a href="#2-npm-Download" class="headerlink" title="2. npm Download"></a>2. npm Download</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></div><p>reference: <a href="https://blog.csdn.net/ibmall/article/details/81390639" target="_blank" rel="noopener">慢读慢写 2018</a></p><h1 id="3-Start-the-Service"><a href="#3-Start-the-Service" class="headerlink" title="3. Start the Service:"></a>3. Start the Service:</h1><p><a href="https://imgchr.com/i/tztLw9" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/14/tztLw9.jpg" alt="tztLw9.jpg"></a></p><h1 id="4-Director-Structure"><a href="#4-Director-Structure" class="headerlink" title="4. Director Structure"></a>4. Director Structure</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">├── 1</span><br><span class="line">├── _config.yml</span><br><span class="line">├── db.json</span><br><span class="line">├── node_modules</span><br><span class="line">├── package.json</span><br><span class="line">├── package-lock.json</span><br><span class="line">├── public</span><br><span class="line">├── scaffolds</span><br><span class="line">├── <span class="built_in">source</span></span><br><span class="line">└── themes</span><br></pre></td></tr></table></figure></div><p>After you run <code>hexo g</code>, all <code>.md</code> files in <code>source</code> directory would be turned to <code>html</code> files and stored at <code>publish</code> directory which you can upload to GitHub.</p><p>the home page <code>public/index.html</code> is stored at <code>source/_posts/hello-world.md</code>.</p><h1 id="5-Plunges"><a href="#5-Plunges" class="headerlink" title="5. Plunges"></a>5. Plunges</h1><h2 id="flow-and-mermaid-support"><a href="#flow-and-mermaid-support" class="headerlink" title="flow and mermaid support"></a>flow and mermaid support</h2><p>reference: <a href="https://www.liuyude.com/How_to_make_your_HEXO_blog_support_handwriting_flowchart.html" target="_blank" rel="noopener">慧行说 2018</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-filter-flowchart</span><br><span class="line">npm install --save hexo-filter-mermaid-diagrams</span><br><span class="line">npm install --save hexo-filter-sequence</span><br></pre></td></tr></table></figure></div><p>If you have any trouble with <strong>mermaid</strong>, please went to see: <a href="https://blog.csdn.net/qq_36347375/article/details/90478335" target="_blank" rel="noopener">荒野之萍 2019</a></p><h2 id="RSS-feed"><a href="#RSS-feed" class="headerlink" title="RSS feed"></a>RSS feed</h2><p>reference: <a href="https://www.jianshu.com/p/2aaac7a19736" target="_blank" rel="noopener">試毅_思伟 2019</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-generator-feed</span><br></pre></td></tr></table></figure></div><p><code>_config.yml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Extensions</span></span><br><span class="line">plugins:</span><br><span class="line">  hexo-generator-feed</span><br><span class="line"><span class="comment">#Feed Atom</span></span><br><span class="line">feed:</span><br><span class="line">  <span class="built_in">type</span>: atom</span><br><span class="line">  path: atom.xml</span><br><span class="line">  <span class="built_in">limit</span>: 20</span><br></pre></td></tr></table></figure></div><h2 id="Word-count"><a href="#Word-count" class="headerlink" title="Word count"></a>Word count</h2><p>reference: <a href="https://lruihao.cn/posts/hexo-wordcount.html" target="_blank" rel="noopener">李瑞豪 2018</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i --save hexo-wordcount</span><br></pre></td></tr></table></figure></div><p>Other tutorials:<a href="https://cloud.tencent.com/developer/article/1381382" target="_blank" rel="noopener">IT自学不成才 2019</a></p><h2 id="Comments"><a href="#Comments" class="headerlink" title="Comments"></a>Comments</h2><p>utterances: <a href="https://litstronger.github.io/2020/04/03/hexo-fluid%E6%B7%BB%E5%8A%A0utterances%E8%AF%84%E8%AE%BA%E5%8A%9F%E8%83%BD/#" target="_blank" rel="noopener">LitStronger 2020</a></p><h1 id="6-New-Category"><a href="#6-New-Category" class="headerlink" title="6. New Category:"></a>6. New Category:</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page categories</span><br></pre></td></tr></table></figure></div><p>A new directory <code>categories</code> would be create in <code>source</code></p><h1 id="Customize-your-theme"><a href="#Customize-your-theme" class="headerlink" title="Customize your theme"></a>Customize your theme</h1><p>reference: <a href="https://www.cnblogs.com/d-xs/p/6891647.html" target="_blank" rel="noopener">dxs雪松 2017</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">~/hexofolder$ tree -L 1 themes/landscape/</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">themes&#x2F;landscape&#x2F;</span><br><span class="line">├── _config.yml</span><br><span class="line">├── Gruntfile.js</span><br><span class="line">├── languages</span><br><span class="line">├── layout</span><br><span class="line">├── LICENSE</span><br><span class="line">├── package.json</span><br><span class="line">├── README.md</span><br><span class="line">├── scripts</span><br><span class="line">└── source</span><br></pre></td></tr></table></figure></div><h1 id="Adding-head-index"><a href="#Adding-head-index" class="headerlink" title="Adding head index"></a>Adding head index</h1><p>reference: <a href="http://kuangqi.me/tricks/enable-table-of-contents-on-hexo/" target="_blank" rel="noopener">锦瑟华年 2015</a></p><p>Insert the codes below after <code>&lt;%- post.content %&gt;</code> in the file <code>themes/landscape/layout/_partial/article.ejs</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Table of Contents --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (!<span class="attr">index</span>)&#123; %&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"toc"</span> <span class="attr">class</span>=<span class="string">"toc-article"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span> <span class="attr">class</span>=<span class="string">"toc-title"</span>&gt;</span>文章目录<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">%-</span> <span class="attr">toc</span>(<span class="attr">post.content</span>) %&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure></div><p>Adding codes below at <code>themes/landscape/source/css/_partial/article.styl</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*toc*/</span></span><br><span class="line"><span class="selector-class">.toc-article</span></span><br><span class="line">  <span class="selector-tag">z-index</span><span class="selector-pseudo">:999</span>;</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-id">#eee</span>;</span><br><span class="line">  <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#bbb</span>;</span><br><span class="line">  <span class="selector-tag">border-radius</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">margin</span>: 1<span class="selector-class">.5em</span> 0 0<span class="selector-class">.3em</span> 1<span class="selector-class">.5em</span>;</span><br><span class="line">  <span class="selector-tag">padding</span>: 0<span class="selector-tag">em</span> 1<span class="selector-tag">em</span> 0 1<span class="selector-tag">em</span>;</span><br><span class="line">  <span class="selector-tag">max-width</span>: 400<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">max-height</span>: 500<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">overflow</span>: <span class="selector-tag">auto</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.toc-title</span></span><br><span class="line">  <span class="selector-tag">font-size</span>: 120%;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#toc</span></span><br><span class="line">  <span class="selector-tag">line-height</span>: 1<span class="selector-tag">em</span>;</span><br><span class="line">  <span class="selector-tag">font-size</span>: 0<span class="selector-class">.9em</span>;</span><br><span class="line">  <span class="selector-tag">padding-top</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">float</span>: <span class="selector-tag">right</span></span><br><span class="line"><span class="selector-class">.toc</span></span><br><span class="line">  <span class="selector-tag">padding-top</span>: 10<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">margin</span>: 1<span class="selector-tag">em</span>;</span><br><span class="line">  <span class="selector-tag">line-height</span>: 1<span class="selector-class">.8em</span>;</span><br><span class="line"><span class="selector-class">.toc-child</span></span><br><span class="line">  <span class="selector-tag">margin-left</span>: 1<span class="selector-tag">em</span></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title_index</span> <span class="selector-tag">li</span></span><br><span class="line">    <span class="selector-tag">list-style-type</span><span class="selector-pseudo">:none</span>;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span></span><br><span class="line">  <span class="selector-tag">display</span><span class="selector-pseudo">:block</span>;</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-tag">salmon</span>;</span><br><span class="line">  <span class="selector-tag">border</span>: 1<span class="selector-tag">px</span> <span class="selector-tag">solid</span> <span class="selector-id">#bbb</span>;</span><br><span class="line">  <span class="selector-tag">border-radius</span>: 100<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">max-width</span>: 100%;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span></span><br><span class="line">    <span class="selector-tag">display</span><span class="selector-pseudo">:block</span>;</span><br><span class="line">    <span class="selector-tag">max-width</span>: 100%;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">li</span> <span class="selector-tag">ul</span></span><br><span class="line">    <span class="selector-tag">position</span>: <span class="selector-tag">fixed</span>;</span><br><span class="line">    <span class="selector-tag">right</span>: 0;</span><br><span class="line">    <span class="selector-tag">bottom</span><span class="selector-pseudo">:5</span>%;</span><br><span class="line">    <span class="selector-tag">display</span><span class="selector-pseudo">:none</span>;</span><br><span class="line">    <span class="selector-tag">width</span><span class="selector-pseudo">:80</span>%;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">ul</span></span><br><span class="line">    <span class="selector-tag">display</span><span class="selector-pseudo">:block</span>;</span><br></pre></td></tr></table></figure></div><h1 id="final-style-css-file"><a href="#final-style-css-file" class="headerlink" title="final style.css file"></a>final style.css file</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* -2.5 Scroll To Up */</span></span><br><span class="line"><span class="selector-class">.back-to-top</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>:<span class="number">1000px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.back-to-top</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">36px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="number">#F97794</span>;</span><br><span class="line">  <span class="attribute">-webkit-transition</span>: all <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-moz-transition</span>: all <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">-o-transition</span>: all <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">  <span class="attribute">transition</span>: all <span class="number">0.3s</span> ease-in-out;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.title_index</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: fixed;</span><br><span class="line">  <span class="attribute">z-index</span>:<span class="number">999</span>;</span><br><span class="line">  <span class="attribute">bottom</span>: <span class="number">40px</span>;</span><br><span class="line">  <span class="attribute">right</span>: -<span class="number">9px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*toc*/</span></span><br><span class="line"><span class="selector-class">.toc-article</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#eee</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#bbb</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1.5em</span> <span class="number">0</span> <span class="number">0.3em</span> <span class="number">1.5em</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0em</span> <span class="number">1em</span> <span class="number">0</span> <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">500px</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: auto</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.toc-title</span> &#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">120%</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#toc</span> &#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0.9em</span>;</span><br><span class="line">  <span class="attribute">float</span>: right</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.toc</span>&#123;</span><br><span class="line">  <span class="attribute">padding-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">1em</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">1.8em</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.toc-child</span> &#123;</span><br><span class="line">  <span class="attribute">margin-left</span>: <span class="number">1em</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.title_index</span> <span class="selector-tag">li</span> &#123;</span><br><span class="line">    <span class="attribute">list-style-type</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-id">#nav</span> &#123;</span><br><span class="line">  <span class="attribute">display</span>:block;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">10</span>;</span><br><span class="line">  <span class="attribute">background</span>: salmon;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#bbb</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">100px</span>;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">100%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">li</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">position</span>: fixed;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">bottom</span>:<span class="number">5%</span>;</span><br><span class="line">    <span class="attribute">display</span>:none;</span><br><span class="line">    <span class="attribute">width</span>:<span class="number">80%</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-id">#nav</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">ul</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>:block;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>最终效果:</p><p><img src="https://s1.ax1x.com/2020/06/26/NrbUf0.png" alt="NrbUf0.png"></p><p><a href="http://kuangqi.me/tricks/enable-table-of-contents-on-hexo/" target="_blank" rel="noopener">http://kuangqi.me/tricks/enable-table-of-contents-on-hexo/</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo 正文部分的編號消失</title>
      <link href="/Blog/Hexo_list.html"/>
      <url>/Blog/Hexo_list.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-正文部分列表編號消失"><a href="#Hexo-正文部分列表編號消失" class="headerlink" title="Hexo 正文部分列表編號消失"></a>Hexo 正文部分列表編號消失</h1><p>Date: 24 June 2020</p><p>在atom本地插件中， 看起來是這樣的， 有序號的話， 看起來比較有條理。</p><p><a href="https://imgchr.com/i/NaLp4O" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/24/NaLp4O.png" alt="NaLp4O.png"></a></p><p>hexo 以後， 就不對勁了， 序號都消失了， 問題是還，到處都找不到攻略， 似乎就我一個人有這樣的問題<br><a href="https://imgchr.com/i/NaLSUK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/24/NaLSUK.png" alt="NaLSUK.png"></a></p><p>查看控制檯，可以發現， 明明是<code>&lt;li&gt;</code>， 但是卻沒有li的<strong>圓點</strong>標誌，所以肯定是css設置了什麼。<br>最後在<code>themes/landscape/source/css/_partial/archive.styl</code>中找到了:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">li</span></span><br><span class="line">    <span class="selector-tag">list-style-type</span><span class="selector-pseudo">:none</span>;</span><br></pre></td></tr></table></figure></div><p>刪掉以後，才發現 = =這個代碼， 是我自己加的。。。<br>當時做title的時候，發現前面有個小點， 就直接加了個全局 - -<br>在前面加上 title 的標籤後， 就一切正常了。 唉- -哭了</p><p><a href="https://imgchr.com/i/NaqzE6" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/24/NaqzE6.png" alt="NaqzE6.png"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title_index</span> <span class="selector-tag">li</span></span><br><span class="line">    <span class="selector-tag">list-style-type</span><span class="selector-pseudo">:none</span>;</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo: Make a Post</title>
      <link href="/Blog/Hexo_post.html"/>
      <url>/Blog/Hexo_post.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-Make-a-Post"><a href="#Hexo-Make-a-Post" class="headerlink" title="Hexo: Make a Post"></a>Hexo: Make a Post</h1><p>Date: 30 June 2020</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new page post</span><br></pre></td></tr></table></figure></div><p>It will make <code>source/post</code> and <code>source/post/index.md</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo new <span class="built_in">test</span></span><br></pre></td></tr></table></figure></div><p><code>source/_posts/test.md</code> is build</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo: local search</title>
      <link href="/Blog/Hexo_search.html"/>
      <url>/Blog/Hexo_search.html</url>
      
        <content type="html"><![CDATA[<h1 id="Local-search-for-hexo-blog"><a href="#Local-search-for-hexo-blog" class="headerlink" title="Local search for hexo blog"></a>Local search for hexo blog</h1><p>hexo 配置本地搜索</p><p>Date: 2020/6/23</p><p>Main Tutorial: <a href="https://www.jianshu.com/p/436faaf55ae9" target="_blank" rel="noopener">梦中程序员</a></p><ol><li><p>進入博客根目錄， 然後下載插件</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm isntall hexo-generator-search --save</span><br></pre></td></tr></table></figure></div></li><li><p>下載配置文件</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://gitee.com/sjclub/hexo-search-plugin.git</span><br></pre></td></tr></table></figure></div></li><li><p>部署配置文件<br>複製<code>js</code>腳本到主題的<code>source/js/</code>目錄下</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp hexo-search-plugin/plugin/*.js themes/landscape/<span class="built_in">source</span>/js/</span><br></pre></td></tr></table></figure></div><p>並添加入配置中。 我的例子：<br>編輯 <code>themes/landscape/layout/_partial/after-footer.ejs</code><br>在最後行加入</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Searche Module--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"&lt;%- config.root %&gt;js/search.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"&lt;%- config.root %&gt;js/load.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div></li><li><p>把<code>search.styl</code>放到主题下的source文件夹下的css目录下</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp hexo-search-plugin/plugin/search.styl themes/landscape/<span class="built_in">source</span>/css</span><br></pre></td></tr></table></figure></div><p>插入<code>styl</code><br>在<code>themes/landscape/layout/_partial/head.ejs</code>文件的<code>&lt;%- css(&#39;css/style&#39;) %&gt;</code>後面， 加上</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%- css(<span class="string">'css/search'</span>) %&gt;</span><br></pre></td></tr></table></figure></div></li><li><p>插入<code>search.ejs</code></p></li></ol><p>這樣就就能看見了</p><ol start="6"><li><p>最後配置 config</p></li><li><p>1 更目錄 <code>_config.yml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search:</span><br><span class="line">    path: search.xml</span><br><span class="line">    field: post</span><br><span class="line">    content: <span class="literal">true</span></span><br></pre></td></tr></table></figure></div></li><li><p>2 主題下的 <code>_config.yml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">local_search:</span><br><span class="line">    <span class="built_in">enable</span>: <span class="literal">true</span>  <span class="comment">#搜索开关</span></span><br><span class="line">    location: <span class="string">"right: 50px;top: 30px;"</span> <span class="comment">#搜索框位置top/left/bottom/right</span></span><br><span class="line">    facade: <span class="string">""</span>  <span class="comment">#搜索框样式</span></span><br></pre></td></tr></table></figure></div></li><li><p><code>hexo g</code> 就可以了看見了<br><code>public</code> 下多了一個 <code>search.xml</code>。 這個就是搜索的文件了。<br>不過，我在 <code>hexo s -g</code>的狀態下， 搜索是無效的。<br>上傳了以後， 反而可以了。 23333</p></li></ol><p>上一張效果圖, 搜個函數試試～<br><img src="https://s1.ax1x.com/2020/06/23/NNvrY8.png" alt="NNvrY8.png"></p><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a><strong>最后</strong></h1><p>直接使用的話，移動版網頁是無法使用這個功能的。 猜測應該是， 作者認爲在手小屏幕的情況下彈出這個框太醜了， 所以就關掉了。<br>如果想要打開這個功能， 只需要在 <code>load.js</code>中的21行，<br><code>if ($(&#39;.local-search&#39;).size() &amp;&amp; !isMobile.any()) {</code><br>把<code>&amp;&amp; !isMobile.any()</code>刪除， 手機端就也能正常使用了！</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo Weather Widget</title>
      <link href="/Blog/Hexo_widget_weather.html"/>
      <url>/Blog/Hexo_widget_weather.html</url>
      
        <content type="html"><![CDATA[<h1 id="1min-Hexo-博客添加天氣插件"><a href="#1min-Hexo-博客添加天氣插件" class="headerlink" title="1min Hexo 博客添加天氣插件"></a>1min Hexo 博客添加天氣插件</h1><p>Date: 20 June 2020<br>Reference: <a href="https://blog.csdn.net/cungudafa/article/details/104312892" target="_blank" rel="noopener">cungudafa</a></p><h1 id="代碼獲取"><a href="#代碼獲取" class="headerlink" title="代碼獲取"></a>代碼獲取</h1><p>進入<a href="https://cj.weather.com.cn/plugin/pc" target="_blank" rel="noopener">中國天氣官網</a>，免費登錄後就可以直接獲取代碼,(可用微信，QQ等三方登錄)<br>頁面如下，支持半個性化定製:<br><img src="https://i.loli.net/2020/06/20/lzYDUXoNb1erqRB.png" alt="DeepinScreenshot_select-area_20200620184308"></p><h1 id="代碼插入"><a href="#代碼插入" class="headerlink" title="代碼插入"></a>代碼插入</h1><p>我的是默認landscape主題，我選擇自己寫個小文件，然後導入。</p><p>複製代碼後， 寫入了 <code>themes/landscape/layout/_partial/Weather.ejs</code>文件。<br>之後在<code>themes/landscape/layout/layout.ejs</code>文件中，插入位置如下。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">%</span> <span class="attr">if</span> (<span class="attr">theme.sidebar</span> &amp;&amp; <span class="attr">theme.sidebar</span> !== <span class="string">'bottom'</span>)&#123; %&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">sidebar</span>', <span class="attr">null</span>, &#123;<span class="attr">cache:</span> !<span class="attr">config.relative_link</span>&#125;) %&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- Weather Plug--&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">%-</span> <span class="attr">partial</span>('<span class="attr">_partial</span>/<span class="attr">Weather</span>', <span class="attr">null</span>, &#123;<span class="attr">cache:</span> !<span class="attr">config.relative_link</span>&#125;) %&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">%</span> &#125; %&gt;</span></span><br></pre></td></tr></table></figure></div><p>小調一下位置， 最終顯示結果：<br><img src="https://i.loli.net/2020/06/20/iV6W8P31bIDCYqv.png" alt="DeepinScreenshot_select-area_20200620185110"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Html 杂记</title>
      <link href="/Blog/Html.html"/>
      <url>/Blog/Html.html</url>
      
        <content type="html"><![CDATA[<h1>Html 杂记</h1><p><a name="y46Sl"></a></p><h1>1. 文字</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 颜色 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"color:black;"</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 大小 --&gt;</span></span><br><span class="line">~<span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"font-size:100px;"</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 行间距 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"line-height:20px;"</span>&gt;</span>文字<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 换行 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 加粗 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span><span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 傾斜 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 下划线 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">u</span>&gt;</span><span class="tag">&lt;/<span class="name">u</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 右上角 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sup</span>&gt;</span><span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 右下角 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">sub</span>&gt;</span><span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 穿越横线 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">s</span>&gt;</span><span class="tag">&lt;/<span class="name">s</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">strike</span>&gt;</span><span class="tag">&lt;/<span class="name">strike</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="Iqend"></a></p><h2 id="1-1-标签横向排列"><a class="header-anchor" href="#1-1-标签横向排列"></a>1.1 标签横向排列</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="css"><span class="selector-id">#nav</span>  <span class="selector-tag">li</span>&#123; <span class="attribute">float</span>:right; <span class="attribute">list-style</span>: none;</span></span><br><span class="line"><span class="css">   <span class="selector-tag">margin</span><span class="selector-pseudo">:10px</span>; <span class="comment">/*左右间隔*/</span></span></span><br><span class="line"><span class="css">   <span class="selector-tag">padding</span>"0; <span class="comment">/*上下*/</span></span></span><br><span class="line">  &#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"nav-top"</span>;&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">li</span>&gt;</span>1<span class="tag">&lt;/<span class="name">li</span>&gt;</span> <span class="tag">&lt;<span class="name">li</span>&gt;</span>2<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="C5HpP"></a></p><h1>2.图片</h1><p>在img标签里面只设置宽，不设置高，图片就会等比例缩放。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 等比例缩放 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"/i/mouse.jpg"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 拉伸 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">"width:100%; height:100%;"</span> <span class="attr">src</span>=<span class="string">"2.jpg"</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 旋转 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">"transform: rotate(90deg);"</span> <span class="attr">src</span>=<span class="string">"2.jpg"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>复杂模块<br><a name="fhYVv"></a></p><h2 id="2-1-图片点击放大"><a class="header-anchor" href="#2-1-图片点击放大"></a>2.1 图片点击放大</h2><p>HTML 点击悬屏放大, 再点击退出。鼠标悬停有提示</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-lg-4 col-md-6 col-xs-12 mix development print"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"portfolio-item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"shot-item"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"Linkercare/Clients/总览/crop3.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span>  </span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"single-content"</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"fancy-table"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"table-cell"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"zoom-icon"</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">"lightbox"</span> <span class="attr">href</span>=<span class="string">"Linkercare/Clients/总览/crop3.png"</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"lni-zoom-in item-icon"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>View Project<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span>               </span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>JS 点击原地放大，并挤压其他图片/文字空间造成重排，再次点击恢复原来打小。鼠标悬停无提示</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">'jquery-1.8.0.js'</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"img1"</span> <span class="attr">src</span>=<span class="string">"11.jpg"</span> <span class="attr">style</span>=<span class="string">"width:100px;height:150px"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="javascript">            $(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                $(<span class="string">"#img1"</span>).click(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span></span><br><span class="line"><span class="javascript">                    <span class="keyword">var</span> width = $(<span class="keyword">this</span>).width();</span></span><br><span class="line">                    if(width==100)</span><br><span class="line">                    &#123;</span><br><span class="line"><span class="javascript">                        $(<span class="keyword">this</span>).width(<span class="number">200</span>);</span></span><br><span class="line"><span class="javascript">                        $(<span class="keyword">this</span>).height(<span class="number">300</span>);</span></span><br><span class="line">                    &#125;</span><br><span class="line"><span class="actionscript">                    <span class="keyword">else</span></span></span><br><span class="line">                    &#123;</span><br><span class="line"><span class="javascript">                        $(<span class="keyword">this</span>).width(<span class="number">100</span>);</span></span><br><span class="line"><span class="javascript">                        $(<span class="keyword">this</span>).height(<span class="number">150</span>);</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;);</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="GdPN0"></a></p><h2 id="2-2-图片圆角"><a class="header-anchor" href="#2-2-图片圆角"></a>2.2 图片圆角</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">"border-radius:1000px;"</span> <span class="attr">src</span>=<span class="string">"Linkercare/Clients/总览/crop3.png"</span> <span class="attr">alt</span>=<span class="string">""</span> /&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="qE5dH"></a></p><h2 id="2-3-图片边框"><a class="header-anchor" href="#2-3-图片边框"></a>2.3 图片边框</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">style</span>=<span class="string">"border:solid;"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="rhYz5"></a></p><h1>3.超链接</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 页面内超链接 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#tips"</span>&gt;</span>Text<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span> <span class="attr">id</span>=<span class="string">"h1anchor"</span>&gt;</span>标题一<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--在新的标签打开本链接--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">'test.html'</span> <span class="attr">target</span>=<span class="string">"_blank"</span> &gt;</span>链接文字<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="nEqgY"></a></p><h1>4.插入别的页面</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">name</span>=<span class="string">"myiframe"</span> <span class="attr">id</span>=<span class="string">"myrame"</span> <span class="attr">src</span>=<span class="string">"test.html"</span>  <span class="attr">width</span>=<span class="string">"1100"</span> <span class="attr">height</span>=<span class="string">"600"</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 额外参数 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">frameborder</span>=<span class="string">"0"</span> <span class="attr">align</span>=<span class="string">"left"</span> <span class="attr">width</span>=<span class="string">"200"</span> <span class="attr">height</span>=<span class="string">"200"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="cXPrD"></a></p><h1>5.Table</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>title1<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">th</span>&gt;</span>title2<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tr</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">test1.jpg</span> <span class="attr">border</span>=<span class="string">0</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">test2.jpg</span> <span class="attr">border</span>=<span class="string">0</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- table可以并列很多东西 --&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">&lt;!--加背景色--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">bgcolor</span>=<span class="string">#rrggbb</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">tr</span> <span class="attr">height</span>=<span class="string">'100px'</span>&gt;</span><span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"></span><br><span class="line">/*边框:http://blog.sina.com.cn/s/blog_6721f25c0101e0l8.html */</span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">lign</span>=<span class="string">"center"</span> <span class="attr">frame</span>=<span class="string">below</span> <span class="attr">rules</span>=<span class="string">rows</span> <span class="attr">border</span>=<span class="string">"1"</span></span></span><br><span class="line"><span class="tag">       <span class="attr">cellpadding</span>=<span class="string">"2"</span> <span class="attr">cellspacing</span>=<span class="string">"0"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="MbaiS"></a></p><h1>6 菜单</h1><p><a name="QZjbF"></a></p><h2 id="6-1-下拉菜单"><a class="header-anchor" href="#6-1-下拉菜单"></a>6.1 下拉菜单</h2><p><a name="7qpeO"></a></p><h3 id="a-JS"><a class="header-anchor" href="#a-JS"></a>a. JS</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--来源:https://zhidao.baidu.com/question/1110427647137965899.html --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="css">*&#123;<span class="attribute">margin</span>:<span class="number">0</span>;<span class="attribute">padding</span>:<span class="number">0</span>;&#125; <span class="selector-tag">ul</span>,<span class="selector-tag">li</span></span></span><br><span class="line"><span class="css">       &#123; <span class="attribute">list-style-type</span>:none; <span class="attribute">padding</span>:<span class="number">0</span>; <span class="attribute">margin</span>:<span class="number">0</span>; &#125; <span class="selector-id">#nav</span> <span class="selector-tag">li</span> <span class="selector-tag">a</span></span></span><br><span class="line"><span class="css">       &#123; <span class="attribute">display</span>:block; <span class="attribute">width</span>:<span class="number">40px</span>; <span class="attribute">text-align</span>:center; <span class="attribute">text-decoration</span>:none; <span class="attribute">color</span>:<span class="number">#ffffff</span>; <span class="attribute">background-color</span>:<span class="number">#3ee27d</span>; &#125; <span class="selector-id">#nav</span> <span class="selector-tag">li</span></span></span><br><span class="line"><span class="css">      &#123; <span class="attribute">position</span>:relative; <span class="attribute">margin-bottom</span>:<span class="number">2px</span>;<span class="attribute">float</span>:left;<span class="attribute">margin-right</span>:<span class="number">0px</span>; &#125; <span class="selector-id">#nav</span> <span class="selector-tag">li</span> <span class="selector-tag">ul</span></span></span><br><span class="line"><span class="css">      &#123; <span class="attribute">position</span>:absolute; <span class="attribute">left</span>:<span class="number">10px</span>; <span class="attribute">top</span>:<span class="number">30px</span>; <span class="attribute">display</span>:none;<span class="attribute">width</span>:<span class="number">100px</span>; &#125; <span class="selector-id">#nav</span> <span class="selector-tag">li</span><span class="selector-pseudo">:hover</span> <span class="selector-tag">ul</span></span></span><br><span class="line"><span class="css">      &#123; <span class="attribute">display</span>:block; &#125;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">ul</span> <span class="attr">id</span>=<span class="string">"nav"</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>关于我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>我们的故事<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>我们的团队<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>我们的服务<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>网页设计<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>页面制作<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>程序开发<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"#"</span>&gt;</span>联系我们<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>团队主力<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">li</span>&gt;</span>团队成员<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>效果：<br><img src="https://s1.ax1x.com/2020/06/26/Nrv2hd.gif" alt="Nrv2hd.gif"></p><p><a name="nOJaB"></a></p><h3 id="b-HTML"><a class="header-anchor" href="#b-HTML"></a>b. HTML</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--来源:https://www.php.cn/div-tutorial-412558.html--&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.dropbtn</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    background-color: black;</span><br><span class="line"></span><br><span class="line">    color: white;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">padding</span>: <span class="selector-id">#px</span>;</span></span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">font-size</span>: <span class="selector-id">#px</span>;</span></span><br><span class="line"></span><br><span class="line">    border: none;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.dropdown</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    position: relative;</span><br><span class="line"></span><br><span class="line">    display: inline-block;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.dropdown-content</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    display: none;</span><br><span class="line"></span><br><span class="line">    position: absolute;</span><br><span class="line"></span><br><span class="line">    background-color: lightgrey;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">min-width</span>: <span class="selector-id">#px</span>;</span></span><br><span class="line"></span><br><span class="line">    z-index: 1;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.dropdown-content</span> <span class="selector-tag">a</span> &#123;</span></span><br><span class="line"></span><br><span class="line">    color: black;</span><br><span class="line"></span><br><span class="line"><span class="css">    <span class="selector-tag">padding</span>: <span class="selector-id">#px</span> <span class="selector-id">#px</span>;</span></span><br><span class="line"></span><br><span class="line">    text-decoration: none;</span><br><span class="line"></span><br><span class="line">    display: block;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.dropdown-content</span> <span class="selector-tag">a</span><span class="selector-pseudo">:hover</span> &#123;<span class="attribute">background-color</span>: white;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.dropdown</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.dropdown-content</span> &#123;<span class="attribute">display</span>: block;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="css"><span class="selector-class">.dropdown</span><span class="selector-pseudo">:hover</span> <span class="selector-class">.dropbtn</span> &#123;<span class="attribute">background-color</span>: grey;&#125;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"dropdown"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">class</span>=<span class="string">"dropbtn"</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"dropdown-content"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.php.cn/"</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.php.cn/"</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"http://www.php.cn/"</span>&gt;</span>Name<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>效果：<br><img src="https://s1.ax1x.com/2020/06/26/NrvcAe.gif" alt="NrvcAe.gif"><br><a name="6iPpw"></a></p><h1>7.杂记</h1><p><a name="S01tI"></a></p><h2 id="7-1-align"><a class="header-anchor" href="#7-1-align"></a>7.1 align</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">align</span>=<span class="string">"left"</span> <span class="attr">src</span>=<span class="string">"/i/mouse.jpg"</span> <span class="attr">height</span>=<span class="string">"200"</span>&gt;</span></span><br></pre></td></tr></table></figure></div><table><thead><tr><th><strong>值</strong></th><th><strong>描述</strong></th></tr></thead><tbody><tr><td>left</td><td>左对齐内容。</td></tr><tr><td>right</td><td>右对齐内容。</td></tr><tr><td>center</td><td>居中对齐内容。</td></tr><tr><td>justify</td><td>对行进行伸展，这样每行都可以有相等的长度（就像在报纸和杂志中）。</td></tr></tbody></table><p><a name="PtUiR"></a></p><h2 id="7-2-Span"><a class="header-anchor" href="#7-2-Span"></a>7.2 Span</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">"position: relative; width: 170px; height: 89px;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"loading.gif"</span> <span class="attr">width</span>=<span class="string">"170"</span> <span class="attr">height</span>=<span class="string">"89"</span> <span class="attr">alt</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">"position: absolute; top: 0; left: 0;"</span>&gt;</span>添加文字...添加文字...添加文字...<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="iGIa1"></a></p><h2 id="7-3-Coding-Bar"><a class="header-anchor" href="#7-3-Coding-Bar"></a>7.3 Coding Bar</h2><p>source:<a href="https://www.bootcdn.cn/highlight.js/" target="_blank" rel="noopener">https://www.bootcdn.cn/highlight.js/</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"https://cdn.bootcss.com/highlight.js/9.15.10/styles/a11y-dark.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/highlight.js/9.15.10/highlight.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>  &gt;</span>hljs.initHighlightingOnLoad();<span class="tag">&lt;/<span class="name">script</span>&gt;</span>  </span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">"lang-javascript"</span>&gt;</span></span><br><span class="line">for(ii in 1:ncol(a))&#123;</span><br><span class="line">a[,ii][which(a[,ii]&gt;0)] <span class="tag">&lt;<span class="name">-</span> <span class="attr">log</span>(<span class="attr">a</span>[,<span class="attr">ii</span>][<span class="attr">which</span>(<span class="attr">a</span>[,<span class="attr">ii</span>]&gt;</span>0)],10)/log(max(a[,ii]),10)</span><br><span class="line">a[,ii][which(a[,ii]&lt;0)] &lt;- log(a[,ii][which(a[,ii]&lt;0)](-1),10)(-1)/log(mean(a[,ii]) *(-1))</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>效果:<br><img src="https://s1.ax1x.com/2020/06/26/Nrvs0O.png" alt="Nrvs0O.png"></p><p><a name="l9BRm"></a></p><h3 id="7-32-Terminal"><a class="header-anchor" href="#7-32-Terminal"></a>7.32 Terminal</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.Terminal</span>&#123;</span><br><span class="line">  <span class="attribute">max-width</span>: <span class="number">900px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: black;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#ffffff</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: large;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: monospace;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.code</span>&#123;</span><br><span class="line">  <span class="attribute">max-width</span>:  <span class="number">900px</span>;</span><br><span class="line">  <span class="attribute">background-color</span>: <span class="built_in">rgb</span>(<span class="number">65</span>, <span class="number">65</span>, <span class="number">65</span>);</span><br><span class="line">  <span class="attribute">color</span>: <span class="built_in">rgb</span>(<span class="number">0</span>, <span class="number">205</span>, <span class="number">0</span>);</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">font-family</span>: monospace;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">18px</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">0px</span> <span class="number">0px</span> <span class="number">10px</span> <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"Terminal"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../Home/img/Terminal.png"</span> <span class="attr">height</span>=<span class="string">"30px"</span>&gt;</span></span><br><span class="line">  Terminal</span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">"../Home/img/Terminal2.png"</span> <span class="attr">height</span>=<span class="string">"30px"</span> <span class="attr">align</span>=<span class="string">'right'</span> <span class="attr">img</span> <span class="attr">src</span>=<span class="string">"../Home/img/Terminal2.png"</span> <span class="attr">height</span>=<span class="string">"30px"</span> <span class="attr">align</span>=<span class="string">'right'</span> <span class="attr">style</span>=<span class="string">"padding-right:5px;"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">pre</span> <span class="attr">class</span>=<span class="string">'code'</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">code</span> <span class="attr">class</span>=<span class="string">"lang-javascript"</span>&gt;</span></span><br><span class="line">## Generated by deepin-installer</span><br><span class="line">deb [by-hash=force] http://ftp.sjtu.edu.cn/deepin panda main contrib non-free</span><br><span class="line">#deb-src http://ftp.sjtu.edu.cn/deepin panda main contrib non-free</span><br><span class="line"><span class="tag">&lt;/<span class="name">code</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>效果：<br><img src="https://s1.ax1x.com/2020/06/26/Nrvy7D.png" alt="Nrvy7D.png"></p><p>图片元素:<img src="https://s1.ax1x.com/2020/06/26/NrvW9A.png" alt="NrvW9A.png"> <img src="https://s1.ax1x.com/2020/06/26/NrxYKP.png" alt="NrxYKP.png"></p><p><a name="JtSw6"></a></p><h2 id="7-4-鼠标悬停显示文字"><a class="header-anchor" href="#7-4-鼠标悬停显示文字"></a>7.4 鼠标悬停显示文字</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript;"</span> <span class="attr">title</span>=<span class="string">"悬停的文字"</span>&gt;</span>将鼠标移到这个标签上，就会显示"悬停的文字"<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NrvgtH.gif" alt="NrvgtH.gif"></p><p><a name="AxwZt"></a></p><h2 id="7-5-每秒刷新一次"><a class="header-anchor" href="#7-5-每秒刷新一次"></a>7.5 每秒刷新一次</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"refresh"</span> <span class="attr">content</span>=<span class="string">"1"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p>方便排版的时候预览界面</p><p><a name="iG0aK"></a></p><h2 id="7-6-实时预览"><a class="header-anchor" href="#7-6-实时预览"></a>7.6 实时预览</h2><p>VS 插件： Live Server<br />Location: <a href="https://blog.csdn.net/sinat_34104446/article/details/83051052" target="_blank" rel="noopener">https://blog.csdn.net/sinat_34104446/article/details/83051052</a><br />亲测有效</p><p><a name="2WgQN"></a></p><h2 id="7-7-统计访问量"><a class="header-anchor" href="#7-7-统计访问量"></a>7.7 统计访问量</h2><p>不蒜子：<a href="http://busuanzi.ibruce.info/" target="_blank" rel="noopener">http://busuanzi.ibruce.info/</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">async</span> <span class="attr">src</span>=<span class="string">"//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_container_site_pv"</span>&gt;</span>本站总访问量<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"busuanzi_value_site_pv"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span>次<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br></pre></td></tr></table></figure></div><p><a name="sxLdt"></a></p><h2 id="7-8-免除loft影响-重开一行"><a class="header-anchor" href="#7-8-免除loft影响-重开一行"></a>7.8 免除loft影响, 重开一行</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">div style="clear:both;"&gt;<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>在博客下面添加评论区gittack</title>
      <link href="/Blog/Html_gittalk.html"/>
      <url>/Blog/Html_gittalk.html</url>
      
        <content type="html"><![CDATA[<h1 id="在博客下面添加评论区gittack"><a href="#在博客下面添加评论区gittack" class="headerlink" title="在博客下面添加评论区gittack"></a>在博客下面添加评论区gittack</h1><div id="flowchart-0" class="flow-chart"></div><p>主流程： <a href="https://www.jianshu.com/p/4242bb065550" target="_blank" rel="noopener">https://www.jianshu.com/p/4242bb065550</a></p><p>如何注册一个Github Application：<a href="https://blog.csdn.net/xingkaifan/article/details/81105352" target="_blank" rel="noopener">https://blog.csdn.net/xingkaifan/article/details/81105352</a></p><p>代码配置：<a href="https://blog.csdn.net/Madridcrls7/article/details/80871596" target="_blank" rel="noopener">https://blog.csdn.net/Madridcrls7/article/details/80871596</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- Link Gitalk 的支持文件  --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"https://unpkg.com/gitalk/dist/gitalk.css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://unpkg.com/gitalk@latest/dist/gitalk.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"gitalk-container"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>     <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">var</span> gitalk = <span class="keyword">new</span> Gitalk(&#123;</span></span><br><span class="line"></span><br><span class="line"><span class="actionscript">    <span class="comment">// gitalk的主要参数</span></span></span><br><span class="line"><span class="actionscript">        clientID: <span class="string">'复制刚才生成的clientID'</span>,</span></span><br><span class="line"><span class="actionscript">        clientSecret: <span class="string">'复制刚才生成的clientSecret'</span>,</span></span><br><span class="line"><span class="actionscript">        repo: <span class="string">'用于存放的仓库'</span>,</span></span><br><span class="line"><span class="actionscript">        owner: <span class="string">'GitHub的用户名'</span>,</span></span><br><span class="line"><span class="actionscript">        admin: [<span class="string">'Github的用户名'</span>],</span></span><br><span class="line"><span class="javascript">        id:<span class="built_in">window</span>.location.pathname,</span></span><br><span class="line"></span><br><span class="line">    &#125;);</span><br><span class="line"><span class="actionscript">    gitalk.render(<span class="string">'gitalk-container'</span>);</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- Gitalk end --&gt;</span></span><br></pre></td></tr></table></figure></div><p>配置成功后， 会显示<br><img src="https://s1.ax1x.com/2020/06/26/Nrj7WR.png" alt="Nrj7WR.png"></p><p>这时候只要登录，留下评论，就可以初始化了～！！<br><img src="https://s1.ax1x.com/2020/06/26/NrjbS1.png" alt="NrjbS1.png"></p><h2 id="Enjoy"><a href="#Enjoy" class="headerlink" title="Enjoy!~"></a>Enjoy!~</h2><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: 登录GitHubop1=>operation: 新建一个Repositoryop2=>operation: 打开主页设置op3=>operation: 选择开发者设置op4=>operation: 创建OAuth appop5=>operation: 添加代码op5=>operation: 初始化评论e=>end: 完成!! Enjoy！st->op1(right);op1->op2op2(right)->op3op3->op4op4(right)->op5op5->e</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Latex</title>
      <link href="/Blog/Latex.html"/>
      <url>/Blog/Latex.html</url>
      
        <content type="html"><![CDATA[<h1 id="Latex"><a href="#Latex" class="headerlink" title="Latex"></a>Latex</h1><h1 id="Editor"><a href="#Editor" class="headerlink" title="Editor"></a>Editor</h1><h2 id="atom"><a href="#atom" class="headerlink" title="atom"></a>atom</h2><p>3 latex packages for atom:</p><ul><li>language-latex（latex高亮）</li><li>latex</li><li>pdf-view（可视化显示）</li></ul><p>reference: <a href="https://blog.csdn.net/violet_echo_0908/article/details/78160273" target="_blank" rel="noopener">Violet-Guo</a></p><p><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcxMDA1MDkxNjM4ODYy" alt="img"><br>© <a href="https://blog.csdn.net/violet_echo_0908/article/details/78160273" target="_blank" rel="noopener">Violet-Guo</a> 2017</p><p>按<code>Ctrl+Alt+B</code>預覽<br><img src="https://imgconvert.csdnimg.cn/aHR0cDovL2ltZy5ibG9nLmNzZG4ubmV0LzIwMTcxMDA1MDkyMjA5Mjk2" alt="img"><br>© <a href="https://blog.csdn.net/violet_echo_0908/article/details/78160273" target="_blank" rel="noopener">Violet-Guo</a> 2017</p><h2 id="more-editors"><a href="#more-editors" class="headerlink" title="more editors"></a>more editors</h2><p><a href="https://www.zhihu.com/question/19954023" target="_blank" rel="noopener">https://www.zhihu.com/question/19954023</a></p><ul><li>Lyx</li><li>TexStudio</li><li>Sublime Text</li><li>Emacs</li></ul><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Blog/Online_tools.html"/>
      <url>/Blog/Online_tools.html</url>
      
        <content type="html"><![CDATA[<hr><hr><p>Cleverpdf Tools:</p><p>PDF images extraction: <a href="https://www.cleverpdf.com/cn/extract-pdf-images" target="_blank" rel="noopener">Cleverpdf</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Nothing Worth for Looking</title>
      <link href="/Blog/Post_1.html"/>
      <url>/Blog/Post_1.html</url>
      
        <content type="html"><![CDATA[<h1 id="Nothing-Worth-for-Looking"><a href="#Nothing-Worth-for-Looking" class="headerlink" title="Nothing Worth for Looking"></a>Nothing Worth for Looking</h1><p><img src="https://s1.ax1x.com/2020/06/23/NtIjMT.jpg" alt="NtIjMT.jpg"><br><a href="http://wx.7399.com/jiaoyu/869683.html" target="_blank" rel="noopener">© 千里马校园网</a></p><p><em>date: 2020/6/22</em></p><p>Today, I just finished the subject-1 of my license.</p><p>There’s been a lot of episodes before I finish it. But whatever, the result is good, I passed the exam.</p><p>But what made me writing is nothing about the license, it’s something connected to my academic career, and it’ll definitely affect me in the future.</p><p>I was writing a paper with my ex-teacher who is a very kind and tolerant person and focusing on Aquatics. If it is accepted, it’ll be my first paper in my academic career. As you can see, how significant it is for me. We agreed on most parts of the paper except one, which I devoted lots of time and energy to and felt very satisfied with it. As a result, I lost myself and believe that I must be right about it and this part would be the shiniest section of the whole paper. So, instead of deleting them, I asked one more time for perfecting this section and hoped that maybe she would concede my idea after I polished it.</p><p>So, I started to google and read more papers to find evidence to strengthen my hypothesis. After about a half-hour, I looked back at my data and just realized that I dug it too deep to find the way home. It reminded me of common scenes in WuXia World that someone who gained the secret scroll which records the best KunFu in the world. But because it was the best, it was the hardest, too. It takes time to accept and digest them before they can really muster it. But they were desperate to muster it in a short time. So, they can not learn it well and result in hurting themselves or even becoming mad.</p><p>As for me, I just believed that I was pretty close to doing something like that, too. Bioinformatics is a very powerful skill that I’d like to learn. It’s not hard to follow the pipeline, but it’s hard to make your own pipe to match your data. Though the connection of genes was revealed well according to cited papers, the expression changes and limited morphology data indicate that the relationships in this experiment were way complicated than I believed.</p><p>So, I quickly re-adjusted myself and conceded my mistake. Luckily, she was so patient with me rather than directly against and denying me. Because if she did that and it definitely evokes my reverse. Then, I’ll dig the hole far deeper than this time and stack myself in it.</p><p>I’m lucky at this time.  But I may not have the same fortunes every time. So, I need to keep wise and clear to avoid this. Hoping it’ll never happen again.</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>When I want to suicide myself</title>
      <link href="/Blog/Post_2.html"/>
      <url>/Blog/Post_2.html</url>
      
        <content type="html"><![CDATA[<h1 id="When-I-want-to-suicide-myself"><a href="#When-I-want-to-suicide-myself" class="headerlink" title="When I want to suicide myself"></a>When I want to suicide myself</h1><p><em>date: 2020/07/14</em></p><p>This morning, I woke up early with a stomachache which is caused by the chilies I consumed last night.</p><p>After I left the bed, I was struggling with the cell phone because I know that spending too much time on the cell phone for watching short videos is a waste of time. But you know, some videos like Japanese animation can always catch your attention and surprise you by exhibiting some strange or even insane characters. One of the characters is a girl who wants to die and wants to be killed by others. The reason it attracts me is that I heard more than one person who wants or even tried to suicide before. Two of them are suffering from depression, two of them are just had period unhappy. Because of my age limit (I am 24 now), all those friends are teenagers or even kids.</p><p>I didn’t trace those stores further because my cat noticed that I stopped looking at the cell phone and was trying to urge me to feed him. I looked at his yellow eyes which looked like golden coins. Talking about the golden coins, I remembered that Jack Chen had a moving in which he died and then was brought back by a Buddhist child with a mystery magic coin. Oh, by the way, Jack Chen’s wife in this movie has a secret small arsenal behind the hovel. I like the scene that how surprising Jack’s partner was when he saw it during the fire contact with the bad guys. Then, more images or pieces of this or other movies by Jack Chen have emerged in my mind. Finally, one scene attracted my attention and made me fell into pondering. It comes from the same movie which has the magic coin. The magic coin not only brought Jack back but also gave superpowers like super speed, regeneration, strength to Jack. So, when a bad guy found out the truth and kidnapped the child with the coin, he copied Jack Chen’s experience by drinking poisoned wine and brought back by the magic coin, gained the superpowers.</p><p>What caught my attention was not the coin, but the behavior, the suicide behavior, the scene of drinking the poisoned wine. I was about 10 when I first saw this plot. And I just remembered that a huge wave of pleasure surged out of my whole body when I saw it. I have no idea why and I was shy or afraid to ask. But this kind of feeling or pleasure is the one that I had never experienced. I can’t remember exactly how it feels now, but I know it was special at the time for a 10-year-old boy.</p><p>For a moment, I think that maybe I can understand a little about the feeling of the girl in the animation I mentioned before. To have further self-validation, I recalled the first time when I had this kind of idea or feeling. I think it was at the age of 6 or 7 because, during the age of 5, my family moved to a new house. I still remember that it was summer, I was watching the TV, a circus show. It was a foreign female trainer who wore very little and hot and played the show with lions. I was too young to understand what I was thinking, but I know that it made me feel very strange but pleasant. A very weird and horrible idea emerged to my mind, I want to feed the lions with myself, I mean, my body, my blood, and my flesh. I felt terrible after the fade of this impulse because I know it is not right. But this impulse emerged a few times after that day. I thought that I must be insane. Luckily, I forget this soon.</p><p>For now, I am very interested in why am I interested in death or how could it bring me mental pleasure when I was 7. Maybe I was interested in death. But I think maybe it was another kind of sexual impulse, immature sexual impulse, of course. The evidence was that the first impulse was emerging with the show of a hot female trainer. But I was too young to understand the sexual impulse. As a result, I connected this impulse to death. So, this impulse reappeared when I saw the man who was drinking the poisoned wine. I don’t know if it makes sense or not, but it looks plausible. The feeling I had at the age of 7 and 10 is very similar to the sexual impulse: heartbeat speed-up, flushed, and some other wired feelings with pleasure though I can’t remember the details. And this is the only reason I can recall.</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>How to Using Python to Acquire Websites&#39; Responding Time</title>
      <link href="/Blog/Py_url_Rtime.html"/>
      <url>/Blog/Py_url_Rtime.html</url>
      
        <content type="html"><![CDATA[<h1>How to Using Python to Acquire Websites’ Responding Time</h1><h1>1. Acquiring Responding Time</h1><p>reference:<a href="https://blog.csdn.net/weixin_41787887/article/details/82660467" target="_blank" rel="noopener">子黍</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line">r = requests.get(<span class="string">"http://www.cnblogs.com/yoyoketang/"</span>)</span><br><span class="line">print(r.elapsed.total_seconds())</span><br></pre></td></tr></table></figure></div><h1>2. Multiprocessing</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">import</span> time, re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line">List = [<span class="string">"www.baidu.com"</span>, <span class="string">"https://tongji.baidu.com/web/10000138058/overview/index?siteId=14350939"</span>,<span class="string">"https://karobben.github.io/"</span>,<span class="string">"https://space.bilibili.com/393056819"</span>,<span class="string">"https://github.com/Karobben"</span>,<span class="string">"https://www.yuque.com/dashboard/books"</span>,<span class="string">"haishdiashdiahsdiuhsaiudha"</span>]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RespTime</span><span class="params">(url)</span>:</span></span><br><span class="line">  <span class="comment"># Page is exist or not</span></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    r = requests.get(url, timeout=<span class="number">20</span>)</span><br><span class="line">    print(<span class="string">"("</span>+url+<span class="string">")(Update:"</span>+time.strftime(<span class="string">"%D"</span>)+ <span class="string">" "</span>+ str(r.elapsed.total_seconds())+<span class="string">"s)"</span></span><br><span class="line">)</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    print(url+<span class="string">"\tFailed"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multicore</span><span class="params">(List, Pool=<span class="number">10</span>)</span>:</span></span><br><span class="line">  pool = mp.Pool(processes=Pool)</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">    multi_res = [pool.apply_async(RespTime,(i,))]</span><br><span class="line">  pool.close()</span><br><span class="line">  pool.join()</span><br></pre></td></tr></table></figure></div><h1>3. Extract urls from Markdonw File</h1><h2 id="1-Extract-and-Calculates-Responding-Time"><a class="header-anchor" href="#1-Extract-and-Calculates-Responding-Time"></a>1. Extract and Calculates Responding Time</h2><p>Using this Script to test the links in Markdonw file<br>reference: <a href="https://www.jb51.net/article/153432.htm" target="_blank" rel="noopener">张土豆</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">import</span> time, re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Input = <span class="string">"/media/ken/Data/Github/Yuque/Bioinfor/test2.md"</span></span><br><span class="line">F = open(Input,<span class="string">'r'</span>)</span><br><span class="line">File = F.read()</span><br><span class="line"></span><br><span class="line">pattern = re.compile(<span class="string">r'\(http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+\)'</span>) <span class="comment"># 匹配模式</span></span><br><span class="line">List = pattern.findall(File)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RespTime</span><span class="params">(url,return_dict)</span>:</span></span><br><span class="line">  <span class="comment"># Page is exist or not</span></span><br><span class="line">  url = url.replace(<span class="string">'('</span>,<span class="string">''</span>).replace(<span class="string">")"</span>,<span class="string">""</span>)</span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    r = requests.get(url, timeout=<span class="number">20</span>)</span><br><span class="line">    Result = url+<span class="string">"\t"</span>+str(r.elapsed.total_seconds())</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    Result = url+<span class="string">"\tFailed"</span></span><br><span class="line">  return_dict[Result] = Result</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager = mp.Manager()</span><br><span class="line">    return_dict = manager.dict()</span><br><span class="line">    jobs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        p = mp.Process(target=RespTime, args=(i,return_dict))</span><br><span class="line">        jobs.append(p)</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> proc <span class="keyword">in</span> jobs:</span><br><span class="line">        proc.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> return_dict.values():</span><br><span class="line">  print(i)</span><br></pre></td></tr></table></figure></div><p>It backs to:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">http:&#x2F;&#x2F;www.kazusa.or.jp&#x2F;codon&#x2F;  0.721183</span><br><span class="line">http:&#x2F;&#x2F;wwwmgs.bionet.nsc.ru&#x2F;mgs&#x2F;gnw&#x2F;trrd&#x2F;  1.616894</span><br><span class="line">http:&#x2F;&#x2F;www.ncbi.nlm.nih.gov&#x2F;dbSTS&#x2F;  1.460668</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><h2 id="2-Update-the-Markdonw-File"><a class="header-anchor" href="#2-Update-the-Markdonw-File"></a>2. Update the Markdonw File</h2><h3 id="1-Format-your-markdown-file-url-as"><a class="header-anchor" href="#1-Format-your-markdown-file-url-as"></a>1. Format your markdown file url as:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[Title](http:&#x2F;&#x2F;www.sssss.com) (Oct; 0.888888s)</span><br></pre></td></tr></table></figure></div><p>You can format your file with codes below:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line"></span><br><span class="line">Input = <span class="string">"/media/ken/Data/Github/Yuque/Bioinfor/test2.md"</span></span><br><span class="line">F = open(Input,<span class="string">'r'</span>)</span><br><span class="line">File = F.read()</span><br><span class="line"></span><br><span class="line">pattern = re.compile(<span class="string">r'\(http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+\)'</span>) <span class="comment"># 匹配模式</span></span><br><span class="line">List = pattern.findall(File)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">  i2 = i.replace(<span class="string">")"</span>,<span class="string">''</span>).replace(<span class="string">"("</span>,<span class="string">''</span>)</span><br><span class="line">  File = re.sub(i, i2+<span class="string">") (test"</span>, File)</span><br><span class="line"></span><br><span class="line">F = open(Input,<span class="string">'w'</span>)</span><br><span class="line">F.write(File)</span><br><span class="line">F.close()</span><br></pre></td></tr></table></figure></div><p>As a result, your url will look like:<br><a href="http://www.sssss.com" target="_blank" rel="noopener">Title</a>(test)</p><h3 id="2-Replace"><a class="header-anchor" href="#2-Replace"></a>2. Replace</h3><h4 id="Basic-rule-of-substitude"><a class="header-anchor" href="#Basic-rule-of-substitude"></a>Basic rule of substitude</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br><span class="line">url = <span class="string">'https://113.215.20.136:9011/113.215.6.77/c3pr90ntcya0/youku/6981496DC9913B8321BFE4A4E73/0300010E0C51F10D86F80703BAF2B1ADC67C80-E0F6-4FF8-B570-7DC5603F9F40.flv'</span></span><br><span class="line">pattern = re.compile(<span class="string">r'(?&lt;![\.\d])(?:\d&#123;1,3&#125;\.)&#123;3&#125;\d&#123;1,3&#125;(?![\.\d])'</span>)</span><br><span class="line"><span class="keyword">print</span> pattern.findall(url)</span><br><span class="line">out = re.sub(pattern, <span class="string">'127.0.0.1'</span>, url)</span><br><span class="line"><span class="keyword">print</span> out</span><br></pre></td></tr></table></figure></div><p>Cite: <a href="https://www.cnblogs.com/prometheus-python-xshell/p/7646965.html" target="_blank" rel="noopener">那年花开月正圆</a></p><h4 id="Replace"><a class="header-anchor" href="#Replace"></a>Replace</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">import</span> time, re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Input = <span class="string">"/media/ken/Data/Github/Yuque/Bioinfor/test2.md"</span></span><br><span class="line">F = open(Input,<span class="string">'r'</span>)</span><br><span class="line">File = F.read()</span><br><span class="line"></span><br><span class="line">pattern = re.compile(<span class="string">r'\(http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+\) \((?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F])| )+'</span>+<span class="string">"\)"</span>) <span class="comment"># 匹配模式</span></span><br><span class="line">List = pattern.findall(File)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RespTime</span><span class="params">(url,return_dict)</span>:</span></span><br><span class="line">  <span class="comment"># Page is exist or not</span></span><br><span class="line">  url = url.split(<span class="string">')'</span>)[<span class="number">0</span>].replace(<span class="string">"("</span>,<span class="string">""</span>)</span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">      r = requests.get(url, timeout=<span class="number">20</span>)</span><br><span class="line">      rtime = str(r.elapsed.total_seconds())+<span class="string">"s)"</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">      rtime = <span class="string">"OutOfTime)"</span></span><br><span class="line">    Result = <span class="string">"("</span>+url+<span class="string">") (Update:"</span>+time.strftime(<span class="string">"%D"</span>)+ <span class="string">"; "</span>+ rtime</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    Result = <span class="string">"("</span>+url+<span class="string">") (Update:"</span>+time.strftime(<span class="string">"%D"</span>)+ <span class="string">"; Failed)"</span></span><br><span class="line">  return_dict[Result] = Result</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager = mp.Manager()</span><br><span class="line">    return_dict = manager.dict()</span><br><span class="line">    jobs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        p = mp.Process(target=RespTime, args=(i,return_dict))</span><br><span class="line">        jobs.append(p)</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> proc <span class="keyword">in</span> jobs:</span><br><span class="line">        proc.join()</span><br><span class="line"></span><br><span class="line">DB=<span class="string">"\n"</span>.join(return_dict.values())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">  Str = i.split(<span class="string">")"</span>)[<span class="number">0</span>].replace(<span class="string">"("</span>,<span class="string">''</span>)</span><br><span class="line">  <span class="comment">#pattern = re.compile(Str+r"\)[ ]\((?:[a-zA-Z]|[0-9]|[:/|\.]|;)+[ ][0-9]|[a-zA-Z]|\.?+")</span></span><br><span class="line">  pattern = re.compile(Str+<span class="string">"\) \(.+"</span>)</span><br><span class="line">  i2 = <span class="string">"("</span>+pattern.findall(DB)[<span class="number">0</span>]</span><br><span class="line">  print(i,i2,sep=<span class="string">'\n'</span>)</span><br><span class="line">  File = File[:File.find(i)] + i2+ File[File.find(i)+len(i):]</span><br><span class="line"></span><br><span class="line">F = open(Input,<span class="string">'w'</span>)</span><br><span class="line">F.write(File)</span><br><span class="line">F.close()</span><br></pre></td></tr></table></figure></div><h1>4. Final Script</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-o'</span>,<span class="string">'-U'</span>,<span class="string">'--output'</span>)     <span class="comment">#输入文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line">OUTPUT = args.output</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">import</span> time, re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">F = open(INPUT,<span class="string">'r'</span>)</span><br><span class="line">File = F.read()</span><br><span class="line"></span><br><span class="line">pattern = re.compile(<span class="string">r'\(http[s]?://(?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F]))+\) \((?:[a-zA-Z]|[0-9]|[$-_@.&amp;+]|[!*\(\),]|(?:%[0-9a-fA-F][0-9a-fA-F])| )+'</span>+<span class="string">"\)"</span>) <span class="comment"># 匹配模式</span></span><br><span class="line">List = pattern.findall(File)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">RespTime</span><span class="params">(url,return_dict)</span>:</span></span><br><span class="line">  <span class="comment"># Page is exist or not</span></span><br><span class="line">  url = url.split(<span class="string">')'</span>)[<span class="number">0</span>].replace(<span class="string">"("</span>,<span class="string">""</span>)</span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">      r = requests.get(url, timeout=<span class="number">20</span>)</span><br><span class="line">      rtime = str(r.elapsed.total_seconds())+<span class="string">"s)"</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">      rtime = <span class="string">"OutOfTime)"</span></span><br><span class="line">    Result = <span class="string">"("</span>+url+<span class="string">") (Update:"</span>+time.strftime(<span class="string">"%D"</span>)+ <span class="string">"; "</span>+ rtime</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    Result = <span class="string">"("</span>+url+<span class="string">") (Update:"</span>+time.strftime(<span class="string">"%D"</span>)+ <span class="string">"; Failed)"</span></span><br><span class="line">  return_dict[Result] = Result</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager = mp.Manager()</span><br><span class="line">    return_dict = manager.dict()</span><br><span class="line">    jobs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        p = mp.Process(target=RespTime, args=(i,return_dict))</span><br><span class="line">        jobs.append(p)</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> proc <span class="keyword">in</span> jobs:</span><br><span class="line">        proc.join()</span><br><span class="line"></span><br><span class="line">DB=<span class="string">"\n"</span>.join(return_dict.values())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">  Str = i.split(<span class="string">")"</span>)[<span class="number">0</span>].replace(<span class="string">"("</span>,<span class="string">''</span>)</span><br><span class="line">  <span class="comment">#pattern = re.compile(Str+r"\)[ ]\((?:[a-zA-Z]|[0-9]|[:/|\.]|;)+[ ][0-9]|[a-zA-Z]|\.?+")</span></span><br><span class="line">  pattern = re.compile(Str+<span class="string">"\) \(.+"</span>)</span><br><span class="line">  i2 = <span class="string">"("</span>+pattern.findall(DB)[<span class="number">0</span>]</span><br><span class="line">  print(i,i2,sep=<span class="string">'\n'</span>)</span><br><span class="line">  File = File[:File.find(i)] + i2+ File[File.find(i)+len(i):]</span><br><span class="line"></span><br><span class="line">F = open(OUTPUT,<span class="string">'w'</span>)</span><br><span class="line">F.write(File)</span><br><span class="line">F.close()</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Python 爬虫 -- 新闻爬取</title>
      <link href="/Blog/Python-crawl_news.html"/>
      <url>/Blog/Python-crawl_news.html</url>
      
        <content type="html"><![CDATA[<h1>Python 爬虫 – 新闻爬取</h1><p><a name="KzDXU"></a></p><h1>1. 科技快讯</h1><p>网址:<a href="http://www.citreport.com/" target="_blank" rel="noopener">http://www.citreport.com/</a></p><p><img src="https://s1.ax1x.com/2020/06/26/Nsi6fS.png" alt="Nsi6fS.png"></p><p>以科技快报为目标</p><p><a name="mQNML"></a></p><h2 id="1-首先-获取整个页面信息"><a class="header-anchor" href="#1-首先-获取整个页面信息"></a>1. 首先, 获取整个页面信息</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">from urllib.request import urlopen</span><br><span class="line">import re</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># Starting resuqest</span></span><br><span class="line">html = urlopen(<span class="string">"http://www.citreport.com/"</span>).<span class="built_in">read</span>()</span><br><span class="line">soup = BeautifulSoup(html, features=<span class="string">'lxml'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="wtYUI"></a></p><h2 id="2-查看网页源码"><a class="header-anchor" href="#2-查看网页源码"></a>2. 查看网页源码</h2><p>ctrl+shit+c 查看网页源码</p><p><img src="https://s1.ax1x.com/2020/06/26/NsisFf.png" alt="NsisFf.png"></p><p><a name="SK2Oq"></a></p><h2 id="3-复制框内的信息-匹配一下"><a class="header-anchor" href="#3-复制框内的信息-匹配一下"></a>3. 复制框内的信息, 匹配一下:</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Paper = soup.find(<span class="string">'div'</span>,&#123;<span class="string">'class'</span>:<span class="string">"right-item news-flash-box"</span>&#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 检查一下</span></span><br><span class="line"><span class="built_in">print</span>(Paper.get_text())</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsiBwt.png" alt="NsiBwt.png"><br>就这么简单2333</p><p><a name="7gtdC"></a></p><h2 id="4-获取快讯文字链接"><a class="header-anchor" href="#4-获取快讯文字链接"></a>4. 获取快讯文字链接</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 检查一下</span></span><br><span class="line">print(soup.find(<span class="string">'div'</span>,&#123;<span class="string">'class'</span>:<span class="string">"right-item news-flash-box"</span>&#125;).get_text())</span><br><span class="line"></span><br><span class="line"><span class="comment">#获得快讯文字的链接</span></span><br><span class="line">Links = Paper.find_all(<span class="string">"a"</span>, &#123;<span class="string">"href"</span>: re.compile(<span class="string">'http://..*?\.html'</span>)&#125;)</span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> Links:</span><br><span class="line">    print(link[<span class="string">'href'</span>]) <span class="comment"># pic locationg</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsiDTP.png" alt="NsiDTP.png"></p><p>成功获得快讯文字的链接</p><p><a name="hfWrS"></a></p><h2 id="5-以第一篇为模板进行文章抓取"><a class="header-anchor" href="#5-以第一篇为模板进行文章抓取"></a>5. 以第一篇为模板进行文章抓取</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">url = Links[<span class="number">1</span>][<span class="string">'href'</span>]</span><br><span class="line">html = urlopen(url).read()</span><br><span class="line">soup = BeautifulSoup(html, features=<span class="string">'lxml'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="EbG2t"></a></p><h2 id="6-继续查看码源-获取标题和文字格式"><a class="header-anchor" href="#6-继续查看码源-获取标题和文字格式"></a>6. 继续查看码源, 获取标题和文字格式</h2><p>发现,标题的标签为:<br><code>&lt;br /&gt;&lt;h1 class=&quot;ph&quot;</code></p><p>文章主题标签为:<br><code>&lt;br /&gt;&lt;div class=&quot;d&quot;&gt;</code></p><p>则,代码如下</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">P_title = soup.find(<span class="string">'div'</span>,&#123;<span class="string">"class"</span>:<span class="string">"h hm cl"</span>&#125;).get_text()</span><br><span class="line">P_body  = soup.find(<span class="string">'td'</span>,&#123;<span class="string">"id"</span>:<span class="string">"article_content"</span>&#125;).get_text()</span><br></pre></td></tr></table></figure></div><p>这就成功啦<br><img src="https://s1.ax1x.com/2020/06/26/NsiyY8.png" alt="NsiyY8.png"></p><p><a name="pmjx3"></a></p><h2 id="7-整合一下-并且-循环抓取本小模块的所有paper"><a class="header-anchor" href="#7-整合一下-并且-循环抓取本小模块的所有paper"></a>7. 整合一下,并且, 循环抓取本小模块的所有paper</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">from urllib.request import urlopen</span><br><span class="line">import re</span><br><span class="line">import requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># Starting resuqest</span></span><br><span class="line">html = urlopen(<span class="string">"http://www.citreport.com/"</span>).<span class="built_in">read</span>()</span><br><span class="line">soup = BeautifulSoup(html, features=<span class="string">'lxml'</span>)</span><br><span class="line">Paper = soup.find(<span class="string">'div'</span>,&#123;<span class="string">'class'</span>:<span class="string">"right-item news-flash-box"</span>&#125;)</span><br><span class="line"></span><br><span class="line">Links = Paper.find_all(<span class="string">"a"</span>, &#123;<span class="string">"href"</span>: re.compile(<span class="string">'http://..*?\.html'</span>)&#125;)</span><br><span class="line"></span><br><span class="line">Paper = Paper.get_text()</span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> Links:</span><br><span class="line">  url = link[<span class="string">'href'</span>]</span><br><span class="line">  html = urlopen(url).<span class="built_in">read</span>()</span><br><span class="line">  soup = BeautifulSoup(html, features=<span class="string">'lxml'</span>)</span><br><span class="line">  P_title = soup.find(<span class="string">'div'</span>,&#123;<span class="string">"class"</span>:<span class="string">"h hm cl"</span>&#125;).get_text()</span><br><span class="line">  P_body  = soup.find(<span class="string">'td'</span>,&#123;<span class="string">"id"</span>:<span class="string">"article_content"</span>&#125;).get_text()</span><br><span class="line">  Paper += P_title + P_body</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(Paper)</span><br></pre></td></tr></table></figure></div><p><a name="BXq7e"></a></p><h1>2 NPR News Head Line</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">from bs4 import BeautifulSoup</span><br><span class="line">import requests</span><br><span class="line">from urllib.request import urlopen</span><br><span class="line">import time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">url= <span class="string">"https://www.npr.org/"</span></span><br><span class="line">html = urlopen(url).<span class="built_in">read</span>().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">soup = BeautifulSoup(html, <span class="string">'lxml'</span>)</span><br><span class="line"></span><br><span class="line">story_today = soup.find_all(<span class="string">'div'</span>,&#123;<span class="string">"class"</span>:<span class="string">"story-wrap"</span>&#125;)</span><br><span class="line"></span><br><span class="line">HeadLine =<span class="string">""</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> story_today:</span><br><span class="line">    HeadLine += i.get_text()</span><br></pre></td></tr></table></figure></div><p><a name="3z1ri"></a></p><h1>3. 爬取B站空间主页信息</h1><p>参考: <a href="https://zhuanlan.zhihu.com/p/34716924" target="_blank" rel="noopener">https://zhuanlan.zhihu.com/p/34716924</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ast</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ID = <span class="string">"86328254"</span></span><br><span class="line">url = <span class="string">"http://api.bilibili.com/archive_stat/stat?aid="</span> + ID</span><br><span class="line">html = urlopen(url).read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">d = ast.literal_eval(html)</span><br><span class="line">Cont = d[<span class="string">'data'</span>]</span><br><span class="line">View    = <span class="string">"观看量: "</span> + str(Cont[<span class="string">'view'</span>])</span><br><span class="line">Like    = <span class="string">"点赞: "</span> + str(Cont[<span class="string">'like'</span>])</span><br><span class="line">Reply   = <span class="string">"回复: "</span> + str(Cont[<span class="string">'reply'</span>])</span><br><span class="line">Coin    = <span class="string">"硬币: "</span> + str(Cont[<span class="string">'coin'</span>])</span><br><span class="line">Result = <span class="string">"\n"</span>.join([View, Like, Reply, Coin])</span><br><span class="line">print(Result)</span><br></pre></td></tr></table></figure></div><p><a name="qdYiN"></a></p><h1>更多, 见博客: <a href="https://www.yuque.com/liuwenkan/blog/pn5boe" target="_blank" rel="noopener">BiliBili API</a></h1><p>Enjoy ~</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用Python管理邮件 -- Python TUI 邮箱</title>
      <link href="/Blog/Python-TUI-mailbox.html"/>
      <url>/Blog/Python-TUI-mailbox.html</url>
      
        <content type="html"><![CDATA[<h1 id="用Python管理邮件-–-Python-TUI-邮箱"><a href="#用Python管理邮件-–-Python-TUI-邮箱" class="headerlink" title="用Python管理邮件 – Python TUI 邮箱"></a>用Python管理邮件 – Python TUI 邮箱</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/pazz/alot.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> alot</span><br><span class="line"></span><br><span class="line">python3.7 setup.py install</span><br></pre></td></tr></table></figure></div><p><a name="k35MJ"></a></p><h2 id="错误："><a href="#错误：" class="headerlink" title="错误："></a>错误：</h2><p><a name="27jVX"></a></p><h3 id="1-libgpgme"><a href="#1-libgpgme" class="headerlink" title="1 libgpgme"></a>1 libgpgme</h3><p>error: Setup script exited with Could not find gpgme-config.  Please install the libgpgme development package.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Writing /tmp/easy_install-jevj4foo/gpg-1.10.0/setup.cfg</span><br><span class="line">Running gpg-1.10.0/setup.py -q bdist_egg --dist-dir /tmp/easy_install-jevj4foo/gpg-1.10.0/egg-dist-tmp-qpuy_731</span><br><span class="line">error: Setup script exited with Could not find gpgme-config.  Please install the libgpgme development package.</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install libgpgme-dev</span><br><span class="line">python3.7 setup.py install</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/Nskcrj.png" alt="Nskcrj.png"><br><br /></p><p><a name="mezds"></a></p><h3 id="2-cannot-import-name-‘gpgme’-from-‘gpg’"><a href="#2-cannot-import-name-‘gpgme’-from-‘gpg’" class="headerlink" title="2 cannot import name ‘gpgme’ from ‘gpg’"></a>2 cannot import name ‘gpgme’ from ‘gpg’</h3><ul><li>+<br />出不来  - - 放弃了- - 日后再来 </li></ul><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Python 缩小图片轮廓</title>
      <link href="/Blog/Python-resizeOutline.html"/>
      <url>/Blog/Python-resizeOutline.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python-缩小图片轮廓"><a href="#Python-缩小图片轮廓" class="headerlink" title="Python 缩小图片轮廓"></a>Python 缩小图片轮廓</h1><p><img src="https://s1.ax1x.com/2020/06/26/NsFi1e.png" alt="NsFi1e.png"><br><img src="https://s1.ax1x.com/2020/06/26/NsFPpD.png" alt="NsFPpD.png"></p><p>原图轮廓太粗，希望细一些- -但是不会PS GIMP。所以想用Python解决。<br />思路： 保留四周都有有效颜色的点</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Reduice</span><span class="params">(img)</span>:</span></span><br><span class="line">    Result=[]</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,H<span class="number">-1</span>):</span><br><span class="line">        <span class="keyword">for</span> ii <span class="keyword">in</span> range(<span class="number">1</span>,W<span class="number">-1</span>):</span><br><span class="line">            pix = [list(img[i<span class="number">-1</span>][ii]), <span class="comment"># LEFT</span></span><br><span class="line">                   list(img[i+<span class="number">1</span>][ii]), <span class="comment"># RIGHT</span></span><br><span class="line">                   list(img[i][ii<span class="number">-1</span>]), <span class="comment"># UP</span></span><br><span class="line">                   list(img[i][ii+<span class="number">1</span>]), <span class="comment"># DOWN</span></span><br><span class="line">                   list(img[i<span class="number">-1</span>][ii<span class="number">-1</span>]), <span class="comment"># LU</span></span><br><span class="line">                   list(img[i+<span class="number">1</span>][ii<span class="number">-1</span>]), <span class="comment"># RU</span></span><br><span class="line">                   list(img[i<span class="number">-1</span>][ii+<span class="number">1</span>]), <span class="comment"># LD</span></span><br><span class="line">                   list(img[i+<span class="number">1</span>][ii+<span class="number">1</span>]), <span class="comment"># RD</span></span><br><span class="line">                  ]</span><br><span class="line">            <span class="keyword">if</span> pix ==[[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,], [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,], [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,], [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,], [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,], [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,], [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,], [<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,]]:</span><br><span class="line">                Result +=[[i,ii]]</span><br><span class="line">    <span class="keyword">return</span> Result</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'111.png'</span>)</span><br><span class="line">H = len(img)</span><br><span class="line">W = len(img[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#赋值到另一个图片：</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    Result = Reduice(img)</span><br><span class="line">    img2 = np.array(img)</span><br><span class="line">    img2[img2!=<span class="number">254</span>]=<span class="number">254</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> Result:</span><br><span class="line">        img2[i[<span class="number">0</span>],i[<span class="number">1</span>]]=img[i[<span class="number">0</span>],i[<span class="number">1</span>]]</span><br><span class="line">    img =np.array(img2)</span><br><span class="line"></span><br><span class="line">cv2.imwrite(<span class="string">'5.png'</span>,img)</span><br><span class="line"><span class="comment"># 接下来，减一次，输出一张图</span></span><br><span class="line"></span><br><span class="line">Num = <span class="number">5</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">    Num +=<span class="number">1</span></span><br><span class="line">    Result = Reduice(img)</span><br><span class="line">    img2 = np.array(img)</span><br><span class="line">    img2[img2!=<span class="number">254</span>]=<span class="number">254</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> Result:</span><br><span class="line">        img2[i[<span class="number">0</span>],i[<span class="number">1</span>]]=img[i[<span class="number">0</span>],i[<span class="number">1</span>]]</span><br><span class="line">    img =np.array(img2)</span><br><span class="line">    cv2.imwrite(str(Num)+<span class="string">'.png'</span>,img)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">View</span><span class="params">(img)</span>:</span></span><br><span class="line">    <span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">        <span class="comment">#img = cv2.imread('111.png')</span></span><br><span class="line">        cv2.imshow(<span class="string">'image'</span>,img)</span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">            cv2.destroyAllWindows()</span><br><span class="line">            <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsFF6H.png" alt="NsFF6H.png"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Python- IP 地址转地址信息</title>
      <link href="/Blog/Python_IP_Loc.html"/>
      <url>/Blog/Python_IP_Loc.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python-IP-地址转地址信息"><a href="#Python-IP-地址转地址信息" class="headerlink" title="Python- IP 地址转地址信息"></a>Python- IP 地址转地址信息</h1><p>最近看看服務器的<code>/var/log/secure</code>文件發現, 每天居然都收到了好幾千的攻擊 .<br>抱着好奇的心態, 我想統計一下攻擊都來自哪裏. 因此寫一個跑一趟hon腳本, 畫個地圖.</p><h1 id="1-網站"><a href="#1-網站" class="headerlink" title="1. 網站"></a>1. 網站</h1><p>“<a href="https://cn.bing.com/search?mkt=zh-cn&amp;h_IpInput=ctxtb&amp;q=59.173.18.251&amp;submit=%E6%9F%A5%E8%AF%A2&quot;" target="_blank" rel="noopener">https://cn.bing.com/search?mkt=zh-cn&amp;h_IpInput=ctxtb&amp;q=59.173.18.251&amp;submit=%E6%9F%A5%E8%AF%A2&quot;</a><br>網站查詢方便, 不僅告訴你歸屬地, 還可以告訴你運營商.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"></span><br><span class="line"><span class="comment"># Starting resuqest</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">IP_get</span><span class="params">(IP)</span>:</span></span><br><span class="line">  url = <span class="string">"https://ipchaxun.com/"</span>+ IP +<span class="string">"/"</span></span><br><span class="line">  Cookies = &#123;</span><br><span class="line">  <span class="string">"Accept"</span>: <span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3"</span>,</span><br><span class="line">  <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip, deflate, br"</span>,</span><br><span class="line">  <span class="string">"Accept-Language"</span>: <span class="string">"en-CN,en;q=0.9,zh-CN;q=0.8,zh;q=0.7,en-US;q=0.6"</span>,</span><br><span class="line">  <span class="string">"Connection"</span>: <span class="string">"keep-alive"</span>,</span><br><span class="line">  <span class="string">"Cookie"</span>: <span class="string">"PHPSESSID=t9dsgluabl4hs1vnneog2fi91d; Hm_lvt_22d5503e9164951ac850495fe15447a7=1588438128; Hm_lpvt_22d5503e9164951ac850495fe15447a7=1588438769"</span>,</span><br><span class="line">  <span class="string">"Host"</span>: <span class="string">"ipchaxun.com"</span>,</span><br><span class="line">  <span class="string">"Referer"</span>: url,</span><br><span class="line">  <span class="string">"Upgrade-Insecure-Requests"</span>: <span class="string">"1"</span>,</span><br><span class="line">  <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (iPhone; CPU iPhone OS 11_0 like Mac OS X) AppleWebKit/604.1.38 (KHTML, like Gecko) Version/11.0 Mobile/15A372 Safari/604.1"</span></span><br><span class="line">  &#125;</span><br><span class="line">  res = requests.get(url, headers=Cookies, timeout=<span class="number">30</span>)</span><br><span class="line">      <span class="comment"># 设置页面编码格式</span></span><br><span class="line">  res.encoding = <span class="string">"utf-8"</span></span><br><span class="line">  soup = BeautifulSoup(res.text, <span class="string">"html.parser"</span>)</span><br><span class="line">  Location = soup.find_all(<span class="string">"label"</span>)[<span class="number">-2</span>].get_text().split(<span class="string">"："</span>)[<span class="number">-1</span>].replace(<span class="string">"\n"</span>,<span class="string">""</span>)</span><br><span class="line">  Suplyer = soup.find_all(<span class="string">"label"</span>)[<span class="number">-1</span>].get_text().split(<span class="string">"："</span>)[<span class="number">-1</span>].replace(<span class="string">"\n"</span>,<span class="string">""</span>)</span><br><span class="line">  <span class="keyword">return</span> IP, Location, Suplyer</span><br><span class="line"></span><br><span class="line">IPlist = open(<span class="string">"TB_IP"</span>,<span class="string">'r'</span>).read().split(<span class="string">"\n"</span>)[:<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">Result = []</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> IPlist:</span><br><span class="line">  A,B,C = IP_get(i)</span><br><span class="line">  print(<span class="string">"\t"</span>.join([A,B,C]))</span><br><span class="line">  Result += [<span class="string">"\t"</span>.join([A,B,C])]</span><br><span class="line"></span><br><span class="line">F = open(<span class="string">"IP_location"</span>,<span class="string">"w"</span>)</span><br><span class="line">F.write(<span class="string">"\n"</span>.join(Result))</span><br><span class="line">F.close()</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Analyzing DNA/Protein Band with Opencv, Python</title>
      <link href="/Blog/Python_WBA.html"/>
      <url>/Blog/Python_WBA.html</url>
      
        <content type="html"><![CDATA[<h1 id="Analyzing-DNA-Protein-Band-with-Opencv-Python"><a href="#Analyzing-DNA-Protein-Band-with-Opencv-Python" class="headerlink" title="Analyzing DNA/Protein Band with Opencv, Python"></a>Analyzing DNA/Protein Band with Opencv, Python</h1><p>Before starting:<br>You can find some fundamental codes of Opencv at: <a href="https://karobben.github.io/Python/OpenCV.html">My Blog</a><br>You can also find the image <code>img1.tif</code> at <a href="https://github.com/Karobben/Western_blot/tree/master/img" target="_blank" rel="noopener">My GitHub</a></p><h1 id="Loading-img"><a href="#Loading-img" class="headerlink" title="Loading img"></a>Loading img</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'img/img1.tif'</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">   cv2.imshow(<span class="string">'image'</span>,img)</span><br><span class="line">   <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">       cv2.destroyAllWindows()</span><br><span class="line">       <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div><h1 id="Selecting-the-Bands"><a href="#Selecting-the-Bands" class="headerlink" title="Selecting the Bands"></a>Selecting the Bands</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Draw_rect</span><span class="params">(img, X,Y,width=<span class="number">100</span>,height=<span class="number">50</span>)</span>:</span></span><br><span class="line">  <span class="comment"># This function is for plot an rectangle by giving perimeters</span></span><br><span class="line">  ptLeftTop = (X, Y)</span><br><span class="line">  ptRightBottom = (X+width, Y+height)</span><br><span class="line">  point_color = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>) <span class="comment"># BGR</span></span><br><span class="line">  thickness = <span class="number">2</span></span><br><span class="line">  lineType = <span class="number">8</span></span><br><span class="line">  img = cv2.rectangle(img, ptLeftTop, ptRightBottom, point_color, thickness, lineType)</span><br><span class="line">  <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Rect_listP</span><span class="params">(img,List,W,H)</span>:</span></span><br><span class="line">  <span class="comment"># This function is for plot a group of equality rectangles by giving perimeters</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">    img = Draw_rect(img,i[<span class="number">0</span>],i[<span class="number">1</span>],W,H)</span><br><span class="line">  <span class="keyword">return</span> img</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">List_M</span><span class="params">(X1, X2, Y, Num)</span>:</span></span><br><span class="line">  Result = []</span><br><span class="line">  Inter = int((X2-X1)/Num)</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(Num):</span><br><span class="line">    Result += [[X1+i*Inter,Y]]</span><br><span class="line">  <span class="keyword">return</span> Result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Band_list</span><span class="params">(List,W,H)</span>:</span></span><br><span class="line">    <span class="comment"># Create The list for the Bands</span></span><br><span class="line">    Result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">      Result += [[i[<span class="number">0</span>],i[<span class="number">1</span>],W,H]]</span><br><span class="line">    <span class="keyword">return</span> Result</span><br></pre></td></tr></table></figure></div><h1 id="Targeting-the-Bands"><a href="#Targeting-the-Bands" class="headerlink" title="Targeting the Bands"></a>Targeting the Bands</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'img/img1.tif'</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">X1, X2, Y, Num, W, H = (<span class="number">275</span>,<span class="number">1985</span>,<span class="number">280</span>,<span class="number">10</span>, <span class="number">170</span>, <span class="number">70</span>)</span><br><span class="line">img = Rect_listP(img,List_M(X1, X2, Y, Num),W,H)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">   cv2.imshow(<span class="string">'image'</span>,img)</span><br><span class="line">   <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">       cv2.destroyAllWindows()</span><br><span class="line">       <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div><p>Result:<br><a href="https://imgchr.com/i/U0d41I" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/15/U0d41I.md.png" alt="U0d41I.md.png"></a></p><h1 id="Calculating-the-Grey-Grades"><a href="#Calculating-the-Grey-Grades" class="headerlink" title="Calculating the Grey-Grades"></a>Calculating the Grey-Grades</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">Bands = Band_list( List_M(X1, X2, Y, Num),W,H)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Bands:</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'img/img1.tif'</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">X1, X2, Y, Num = (<span class="number">275</span>,<span class="number">1985</span>,<span class="number">280</span>,<span class="number">10</span>)</span><br><span class="line"><span class="comment">#img = Rect_listP(img,List_M(X1, X2, Y, Num),170,70)</span></span><br><span class="line"></span><br><span class="line">Grey = []</span><br><span class="line">N_tmp = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> Bands:</span><br><span class="line">  N_tmp += <span class="number">1</span></span><br><span class="line">  img2 = img[i[<span class="number">1</span>]:i[<span class="number">1</span>]+H,i[<span class="number">0</span>]:i[<span class="number">0</span>]+W]</span><br><span class="line">  <span class="comment"># Saving the sliced bands</span></span><br><span class="line">  cv2.imwrite(<span class="string">"bands_"</span>+str(N_tmp)+<span class="string">'.png'</span>,img2)</span><br><span class="line">  Grey += [img2.sum()]</span><br><span class="line"></span><br><span class="line">print(Grey)</span><br></pre></td></tr></table></figure></div><p>Result:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[2317178, 2927580, 2033594, 2125166, 2420660, 2427925, 2370562, 2135051, 1559149, 1549062]</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/07/15/U0dh9A.png" alt="Sliced Bands.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">TB = c(<span class="number">2317178</span>, <span class="number">2927580</span>, <span class="number">2033594</span>, <span class="number">2125166</span>, <span class="number">2420660</span>, <span class="number">2427925</span>, <span class="number">2370562</span>, <span class="number">2135051</span>, <span class="number">1559149</span>, <span class="number">1549062</span>)</span><br><span class="line">TB = abs(TB[<span class="number">2</span>] - TB)</span><br><span class="line"></span><br><span class="line">A = data.frame(TB)</span><br><span class="line">A$ID = factor(row.names(A),levels = c(<span class="number">1</span>:<span class="number">10</span>))</span><br><span class="line">ggplot(A,aes(ID,TB)) + geom_bar(stat = <span class="string">'identity'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/07/15/U0d5ct.png" alt="U0d5ct.png"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili：<a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Python 用 urwid 快速搭建 terminal TUI 交互应用</title>
      <link href="/Blog/Python-urwid-Quick.html"/>
      <url>/Blog/Python-urwid-Quick.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python-用-urwid-快速搭建-terminal-TUI-交互应用"><a href="#Python-用-urwid-快速搭建-terminal-TUI-交互应用" class="headerlink" title="Python 用 urwid 快速搭建 terminal TUI 交互应用"></a>Python 用 urwid 快速搭建 terminal TUI 交互应用</h1><p>更多资料：<a href="https://www.yuque.com/liuwenkan/python/urwid" target="_blank" rel="noopener">https://www.yuque.com/liuwenkan/python/urwid</a><br />本文主要用到了urwid 库， 更多关于TUI库介绍请看：<a href="https://www.yuque.com/liuwenkan/python/nff2r2" target="_blank" rel="noopener">https://www.yuque.com/liuwenkan/python/nff2r2</a></p><p><a name="UjumW"></a></p><h1 id="Hollow-world"><a href="#Hollow-world" class="headerlink" title="Hollow world"></a>Hollow world</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line"></span><br><span class="line">txt = urwid.Text((<span class="string">'banner'</span>, <span class="string">u" Hello World "</span>), align=<span class="string">'center'</span>)</span><br><span class="line">map1 = urwid.AttrMap(txt, <span class="string">'streak'</span>)</span><br><span class="line">fill = urwid.Filler(map1)</span><br><span class="line">map2 = urwid.AttrMap(fill, <span class="string">'bg'</span>)</span><br><span class="line">loop = urwid.MainLoop(map2, palette, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NskWaq.png" alt="NskWaq.png"><br><br /></p><p><a name="CHIs1"></a></p><h1 id="加上-按钮"><a href="#加上-按钮" class="headerlink" title="加上 按钮"></a>加上 按钮</h1><p>Text，Button 等， 在Pile中排序， 然后添加入 Filler， 再丢进loop中</p><p><a href="https://www.yuque.com/liuwenkan/python/urwid#S8n5a" target="_blank" rel="noopener">代码地址</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># button function</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># button Name</span></span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># align button and Text</span></span><br><span class="line">fill = urwid.Pile([map1, button])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Connect the signal</span></span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br></pre></td></tr></table></figure></div><p>完全代码：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line"></span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">txt = urwid.Text((<span class="string">'banner'</span>, <span class="string">u" Hello World "</span>), align=<span class="string">'center'</span>)</span><br><span class="line">map1 = urwid.AttrMap(txt, <span class="string">'streak'</span>)</span><br><span class="line">fill = urwid.Pile([map1, button])</span><br><span class="line">fill = urwid.Filler(fill)</span><br><span class="line"></span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line">loop = urwid.MainLoop(map2, palette, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p>其实我挺讨厌这个背景色的 2333<br><img src="https://s1.ax1x.com/2020/06/26/NskfI0.png" alt="NskfI0.png"><br>成功加入 退出</p><p><a name="WIxwr"></a></p><h1 id="干脆添加一个菜单吧～"><a href="#干脆添加一个菜单吧～" class="headerlink" title="干脆添加一个菜单吧～"></a>干脆添加一个菜单吧～</h1><p>菜单代码地址</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用Python快速批量压缩图片</title>
      <link href="/Blog/Python_imgResize.html"/>
      <url>/Blog/Python_imgResize.html</url>
      
        <content type="html"><![CDATA[<h1>用Python快速批量压缩图片</h1><div id="flowchart-0" class="flow-chart"></div><a name="TmQUo"></a># Structure<a name="4K9LJ"></a>## 1 Arguments<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>)  <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-o'</span>,<span class="string">'-O'</span>,<span class="string">'--output'</span>,default = <span class="string">"OUT"</span>)  <span class="comment">#输出文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-r'</span>,<span class="string">'-R'</span>,<span class="string">'--ratio'</span>, type = int,default = <span class="number">2</span>)  <span class="comment">#resize ratio</span></span><br><span class="line">parser.add_argument(<span class="string">'-w'</span>,<span class="string">'-W'</span>,<span class="string">'--width'</span>,default = <span class="string">"NA"</span>)  <span class="comment">#resize by width</span></span><br><span class="line">parser.add_argument(<span class="string">'-t'</span>,<span class="string">'-T'</span>,<span class="string">'--height'</span>,default = <span class="string">"NA"</span>)  <span class="comment">#resize by Height</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line">OUTPUT = args.output</span><br><span class="line">R_img = args.ratio</span><br><span class="line">W_img = args.width</span><br><span class="line">H_img = args.height</span><br></pre></td></tr></table></figure></div><p><a name="i7RXm"></a></p><h2 id="2-File-Director-Judgement"><a class="header-anchor" href="#2-File-Director-Judgement"></a>2 File/Director Judgement</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">FD_judge</span><span class="params">(path)</span>:</span></span><br><span class="line">  result = <span class="string">""</span></span><br><span class="line">  <span class="keyword">if</span> <span class="string">"*"</span> <span class="keyword">in</span> path:</span><br><span class="line">    result = <span class="string">"Files"</span></span><br><span class="line">  <span class="keyword">elif</span> os.path.isdir(path):</span><br><span class="line">    result = <span class="string">"Directory"</span></span><br><span class="line">  <span class="keyword">elif</span> os.path.isfile(path):</span><br><span class="line">    result = <span class="string">"File"</span></span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    result = <span class="string">"path is incorrect"</span></span><br><span class="line">  <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">print(FD_judge(INPUT))</span><br><span class="line">Typ_in = FD_judge(INPUT)</span><br></pre></td></tr></table></figure></div><p><a name="E5sLS"></a></p><h2 id="3-Resize-Determine"><a class="header-anchor" href="#3-Resize-Determine"></a>3 Resize Determine</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PIL.Image <span class="keyword">as</span> Image</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Calc_WH</span><span class="params">(w,h,W_img,H_img,R_img)</span>:</span></span><br><span class="line">  <span class="keyword">if</span> W_img != <span class="string">"NA"</span> <span class="keyword">and</span> H_img == <span class="string">"NA"</span>:  <span class="comment">#Resize by Width</span></span><br><span class="line">    print(<span class="string">'Resize by Width'</span>)</span><br><span class="line">    R = w/ int(W_img)</span><br><span class="line">    w=int(w/R)</span><br><span class="line">    h=int(h/R)</span><br><span class="line">  <span class="keyword">elif</span> H_img != <span class="string">"NA"</span> <span class="keyword">and</span> W_img == <span class="string">"NA"</span>:  <span class="comment">#Resize by Height</span></span><br><span class="line">    print(<span class="string">"Resize by Height"</span>)</span><br><span class="line">    R = h/ int(H_img)</span><br><span class="line">    w=int(w/R)</span><br><span class="line">    h=int(h/R)</span><br><span class="line">  <span class="keyword">elif</span> H_img != <span class="string">"NA"</span> <span class="keyword">and</span> W_img != <span class="string">"NA"</span>:  <span class="comment">#Resize by Width and Height</span></span><br><span class="line">    print(<span class="string">'Resize by Width and Height'</span>)</span><br><span class="line">    w=int(W_img)</span><br><span class="line">    h=int(H_img)</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">    print(<span class="string">"Resize by ratio, R="</span>+str(R_img))</span><br><span class="line">    w=int(w/R_img)</span><br><span class="line">    h=int(h/R_img)</span><br><span class="line">  <span class="keyword">return</span> w,h</span><br></pre></td></tr></table></figure></div><p><a name="8huLH"></a></p><h2 id="4-Resize-function"><a class="header-anchor" href="#4-Resize-function"></a>4 Resize function</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Resize</span><span class="params">(path,W_img,H_img,R_img)</span>:</span></span><br><span class="line">  Img=Image.open(path)</span><br><span class="line">  w,h=Img.size</span><br><span class="line">  w,h=Calc_WH(w,h,W_img,H_img,R_img)</span><br><span class="line">  Img_out=Img.resize((w,h),Image.ANTIALIAS)</span><br><span class="line">  <span class="keyword">return</span> Img_out</span><br></pre></td></tr></table></figure></div><p><a name="e03og"></a></p><h2 id="5-logic"><a class="header-anchor" href="#5-logic"></a>5 logic</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> Typ_in==<span class="string">"File"</span> <span class="keyword">and</span> OUTPUT == <span class="string">"OUT"</span>:</span><br><span class="line">  OUTPUT = <span class="string">"Re_"</span> + INPUT</span><br><span class="line"><span class="keyword">elif</span> Typ_in==<span class="string">"File"</span> <span class="keyword">and</span> OUTPUT != <span class="string">"OUT"</span>:</span><br><span class="line">  OUTPUT = OUTPUT</span><br><span class="line"><span class="keyword">else</span>:</span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(OUTPUT):</span><br><span class="line">    os.makedirs(OUTPUT)</span><br><span class="line">  OUTPUT = OUTPUT +<span class="string">"/"</span></span><br></pre></td></tr></table></figure></div><p>test result:<br /><br><img src="https://s1.ax1x.com/2020/06/26/Ns99MR.png" alt="Ns99MR.png"></p><p><a name="O7xWv"></a></p><h1>Whole Scripts:<a href="https://www.yuque.com/liuwenkan/pwh0c8/pwm2gg" target="_blank" rel="noopener">link</a></h1><p><a name="klIGH"></a></p><h1>Result</h1><p><a name="Z32ZF"></a></p><h1>Single file</h1><p>Reading img infor With package “imagemagick”. If you doesn’t have this lib, for debian, please execute:<br />**sudo apt install ****imagemagick</p><p><a name="0HsKy"></a></p><h2 id="Running-with-default-argument"><a class="header-anchor" href="#Running-with-default-argument"></a>Running with default argument</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">../test.py -i 1.png</span><br><span class="line"><span class="comment">#Outfile: Re_1.png</span></span><br><span class="line"></span><br><span class="line">identify 1.png Re_1.png</span><br><span class="line"></span><br><span class="line"><span class="comment"># 1.png PNG 2666x1827 2666x1827+0+0 8-bit sRGB 295921B 0.000u 0:00.010</span></span><br><span class="line"><span class="comment"># Re_1.png PNG 1333x913 1333x913+0+0 8-bit sRGB 203679B 0.000u 0:00.000</span></span><br><span class="line"></span><br><span class="line">../test.py -i 1.png -o my.png</span><br><span class="line"><span class="comment">#Outfile: my.png</span></span><br><span class="line"></span><br><span class="line">identify 1.png my.png</span><br><span class="line"><span class="comment">#1.png PNG 2666x1827 2666x1827+0+0 8-bit sRGB 295921B 0.000u 0:00.000</span></span><br><span class="line"><span class="comment">#my.png PNG 1333x913 1333x913+0+0 8-bit sRGB 203679B 0.000u 0:00.000</span></span><br></pre></td></tr></table></figure></div><p><a name="jFLlM"></a></p><h2 id="Resize-by-width"><a class="header-anchor" href="#Resize-by-width"></a>Resize by width</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">../test.py -i 1.png -w 300</span><br><span class="line"></span><br><span class="line">identify 1.png Re_1.png</span><br><span class="line"><span class="comment">#1.png PNG 2666x1827 2666x1827+0+0 8-bit sRGB 295921B 0.000u 0:00.000</span></span><br><span class="line"><span class="comment">#Re_1.png PNG 300x205 300x205+0+0 8-bit sRGB 27338B 0.000u 0:00.000</span></span><br></pre></td></tr></table></figure></div><p><a name="Z1Pwd"></a></p><h2 id="Resize-by-Height"><a class="header-anchor" href="#Resize-by-Height"></a>Resize by Height</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">../test.py -i 1.png -t 300</span><br><span class="line"></span><br><span class="line">identify 1.png Re_1.png</span><br><span class="line"><span class="comment">#1.png PNG 2666x1827 2666x1827+0+0 8-bit sRGB 295921B 0.000u 0:00.000</span></span><br><span class="line"><span class="comment">#Re_1.png PNG 437x300 437x300+0+0 8-bit sRGB 44276B 0.000u 0:00.000</span></span><br></pre></td></tr></table></figure></div><p><a name="YQmGR"></a></p><h2 id="Resize-by-Ratio"><a class="header-anchor" href="#Resize-by-Ratio"></a>Resize by Ratio</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">../test.py -i 1.png -r 10</span><br><span class="line"></span><br><span class="line">identify 1.png Re_1.png</span><br><span class="line"><span class="comment">#1.png PNG 2666x1827 2666x1827+0+0 8-bit sRGB 295921B 0.000u 0:00.000</span></span><br><span class="line"><span class="comment">#Re_1.png PNG 266x182 266x182+0+0 8-bit sRGB 23398B 0.000u 0:00.000</span></span><br></pre></td></tr></table></figure></div><p><a name="3sPlw"></a></p><h1>Resize by Height and Width</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">../test.py -i 1.png  -t 200 -w 10</span><br><span class="line"></span><br><span class="line"><span class="comment">#1.png PNG 2666x1827 2666x1827+0+0 8-bit sRGB 295921B 0.000u 0:00.000</span></span><br><span class="line"><span class="comment">#Re_1.png PNG 10x200 10x200+0+0 8-bit sRGB 2186B 0.000u 0:00.000</span></span><br></pre></td></tr></table></figure></div><p><a name="QHhlD"></a></p><h1>Resize Multiple files</h1><p><a name="1TAZK"></a></p><h2 id="Resize-multiple-file"><a class="header-anchor" href="#Resize-multiple-file"></a>Resize multiple file</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">../test.py -i <span class="string">"*.png"</span></span><br></pre></td></tr></table></figure></div><p>All result will be printed to “OUT” director.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">../test.py -i OUT -o <span class="built_in">test</span> -w 100</span><br></pre></td></tr></table></figure></div><p>reading all pictures from OUT directory, and all result where out put to test file</p><p><a name="BKexU"></a></p><h1>update</h1><p><a name="yFwCg"></a></p><h2 id="Print-information"><a class="header-anchor" href="#Print-information"></a>Print information</h2><p>2020/2/9<br>Adding arguments</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">parser.add_argument(<span class="string">'-inf'</span>,<span class="string">'-INF'</span>,<span class="string">'--infor'</span>,default = <span class="string">"None"</span>)    <span class="comment">#resize by Height</span></span><br><span class="line"></span><br><span class="line">INFORM = args.infor</span><br></pre></td></tr></table></figure></div><p><a name="g4W1b"></a></p><h3 id="Def-functions："><a class="header-anchor" href="#Def-functions："></a>Def functions：</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Resize_loop</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="keyword">if</span> Typ_in == <span class="string">"File"</span>:</span><br><span class="line">        Result = Resize(INPUT,W_img,H_img,R_img)</span><br><span class="line">        Result.save(OUTPUT, quality=Quality)</span><br><span class="line">    <span class="keyword">elif</span> Typ_in == <span class="string">"Files"</span>:</span><br><span class="line">        List = os.popen(<span class="string">"ls "</span>+INPUT).read().split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">            Result = Resize(i,W_img,H_img,R_img)</span><br><span class="line">            Result.save(OUTPUT + i.split(<span class="string">'/'</span>)[<span class="number">-1</span>], quality=Quality)</span><br><span class="line">    <span class="keyword">elif</span> Typ_in == <span class="string">"Directory"</span>:</span><br><span class="line">        List = os.popen(<span class="string">"ls "</span>+INPUT+<span class="string">"/*"</span>).read().split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">            Result = Resize(i,W_img,H_img,R_img)</span><br><span class="line">            Result.save(OUTPUT+i.split(<span class="string">'/'</span>)[<span class="number">-1</span>], quality=Quality)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">IMG_inf</span><span class="params">(INPUT)</span>:</span></span><br><span class="line">    Space = size_format(getsize(INPUT))</span><br><span class="line">    Img = Image.open(INPUT)</span><br><span class="line">    Name    = Img.filename</span><br><span class="line">    Format  = Img.format_description</span><br><span class="line">    Mode    = Img.mode</span><br><span class="line"></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Bit     = <span class="string">"bit:"</span> + str(Img.bits)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        Bit     = <span class="string">"bit:NA"</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Dpi     = <span class="string">"dpi:"</span> + <span class="string">'x'</span>.join([str(x) <span class="keyword">for</span> x <span class="keyword">in</span> Img.info[<span class="string">'dpi'</span>]])</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        Dpi     = <span class="string">"dpi: NA"</span></span><br><span class="line">    Size    = <span class="string">"size:"</span> + <span class="string">'x'</span>.join([str(x) <span class="keyword">for</span> x <span class="keyword">in</span> Img.size])</span><br><span class="line">    Result = Name +<span class="string">"\t"</span>+<span class="string">"    "</span>.join([Space, Size, Dpi, Format,Mode,Bit])</span><br><span class="line">    <span class="keyword">return</span> Result</span><br></pre></td></tr></table></figure></div><p><a name="DUklk"></a></p><h3 id="Logic"><a class="header-anchor" href="#Logic"></a>Logic:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> INFORM == <span class="string">"None"</span>: <span class="comment"># Resize</span></span><br><span class="line">    Typ_in = FD_judge(INPUT)</span><br><span class="line">    print(Typ_in)</span><br><span class="line">    OUTPUT = OUT_fig(INPUT,OUTPUT)</span><br><span class="line">    Resize_loop()</span><br><span class="line"><span class="keyword">else</span>:  <span class="comment"># img information</span></span><br><span class="line">    Typ_in = FD_judge(INPUT)</span><br><span class="line">    <span class="keyword">if</span> Typ_in == <span class="string">"File"</span>:</span><br><span class="line">        print(IMG_inf(INPUT))</span><br><span class="line">    <span class="keyword">elif</span> Typ_in == <span class="string">"Files"</span>:</span><br><span class="line">        <span class="comment">#List = os.popen("ls "+INPUT).read().split('\n')[:-1]</span></span><br><span class="line">        List = os.popen(<span class="string">"ls "</span>+INPUT).read().split(<span class="string">'\n\n'</span>)[<span class="number">0</span>].split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">            print(IMG_inf(i))</span><br><span class="line">    <span class="keyword">elif</span> Typ_in == <span class="string">"Directory"</span>:</span><br><span class="line">        List = os.popen(<span class="string">"ls "</span>+INPUT+<span class="string">"/*"</span>).read().split(<span class="string">'\n\n'</span>)[<span class="number">0</span>].split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">            print(IMG_inf(i))</span><br></pre></td></tr></table></figure></div><p><a name="JZkRM"></a></p><h3 id="Usage"><a class="header-anchor" href="#Usage"></a>Usage:</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Imresize.py -i <span class="string">"*"</span> -inf 1</span><br></pre></td></tr></table></figure></div><p>output:<br><img src="https://s1.ax1x.com/2020/06/26/NspOaT.png" alt="NspOaT.png"></p><p><strong>Details</strong>:</p><table><thead><tr><th style="text-align:center">Name</th><th style="text-align:center">Size</th><th style="text-align:center">Width&amp;height</th><th style="text-align:center">DPI</th><th style="text-align:center">format</th><th style="text-align:center">mode</th><th style="text-align:center">Bit</th></tr></thead><tbody><tr><td style="text-align:center">bash.jpg</td><td style="text-align:center">16.8KB</td><td style="text-align:center">size:800x450</td><td style="text-align:center">dpi: NA</td><td style="text-align:center">JPEG (ISO 10918)</td><td style="text-align:center">RGB</td><td style="text-align:center">bit:8</td></tr></tbody></table><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Python readop1=>operation: Target(s)c1=>condition: Print infc2=>condition: File/Directoryc3=>condition: Single Fileop2=>operation: Fileop3=>operation: Filesop4=>operation: Riszeop5=>operation: 添加代码op5=>operation: 初始化评论e=>end: 完成!! Enjoy！st->op1op1->c1c1(yes,right)->c2c1(no)->ec2(yes,right)->c3c3(yes)->op2c3(no)->op3op2(left)->op4op3->op4c2(no)->op4op4(left)->e</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用python寫一個B站彈幕聊天機器人腳本</title>
      <link href="/Blog/Python_Bilibot.html"/>
      <url>/Blog/Python_Bilibot.html</url>
      
        <content type="html"><![CDATA[<h1 id="用python寫一個B站彈幕聊天機器人腳本"><a href="#用python寫一個B站彈幕聊天機器人腳本" class="headerlink" title="用python寫一個B站彈幕聊天機器人腳本"></a>用python寫一個B站彈幕聊天機器人腳本</h1><p><a name="HeSJr"></a></p><h1 id="1-回覆B站彈幕基本框架"><a href="#1-回覆B站彈幕基本框架" class="headerlink" title="1 回覆B站彈幕基本框架:"></a>1 回覆B站彈幕基本框架:</h1><p>(當時bing出來抄人家的, 能用- -但是忘記表明出處了, 實在是抱歉- -)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3.7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> requests, sys  <span class="comment">#网络请求</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Cookies = "LIVE_BUVID=AUTO3715382739921424; buvid3=71AC02C7-EF25-46A5-9A2F-DB1CB10744F71607infoc; rpdid=oopmqlpqkmdoskqimpwww; stardustvideo=1; CURRENT_FNVAL=16; dssid=8aabde0ff0f7f1621; dsess=BAh7CkkiD3Nlc3Npb25faWQGOgZFVEkiFWRlMGZmMGY3ZjE2MjE3MWMGOwBG%0ASSIJY3NyZgY7AEZJIiUxYTM3YTg4MTY2NzZhNWZkNjYyODAyOWQwODk1NTlh%0AMgY7AEZJIg10cmFja2luZwY7AEZ7B0kiFEhUVFBfVVNFUl9BR0VOVAY7AFRJ%0AIi1lZjFkZjRjZTdiMWE2Y2JkZmQyZjRkMzA2OGYyMGI0NzhjYjU1OGEzBjsA%0ARkkiGUhUVFBfQUNDRVBUX0xBTkdVQUdFBjsAVEkiLWRkMDY1ZWQyNjNjNjdk%0ANzk5Zjk0M2FiNmMzOWI1NWM1ZTAwOGNiYjUGOwBGSSIKY3RpbWUGOwBGbCsH%0Aj3a9W0kiCGNpcAY7AEYiEjY4LjEwNy4xMjQuNTM%3D%0A--b5b62086b230a085ae65aee9304d7f14ca8a07ad; fts=1539143396; CURRENT_QUALITY=64; _uuid=547F11BE-9B64-40CC-37DE-6B95B010429C05405infoc; INTVER=1; sid=9onpe38s; DedeUserID=393056819; DedeUserID__ckMd5=43771d91224c7285; SESSDATA=d1486084%2C1576633926%2Ca277c9b1; bili_jct=b29db4670b4f9967fb2921a0fc878950; UM_distinctid=16e7c3622401e-01fbe0ab154c45-76256753-1fa400-16e7c362241181; laboratory=1-1"</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B_send</span><span class="params">(MSG)</span>:</span></span><br><span class="line">    Cookies =  <span class="string">"LIVE_BUVID=AUTO5015807896693605; _uuid=58C69C39-C741-47C7-0E98-A379326816DE70318infoc; buvid3=3B00857F-A757-4982-9792-4B46DEC0BB12155821infoc; sid=bejf3qns; LIVE_ROOM_ADMIN_UP_TIP=1; CURRENT_FNVAL=16; rpdid=|(k|k)k|))Y)0J'ul)|~mYmk|; im_notify_type_393056819=0; _ga=GA1.2.517604625.1581950019; dy_spec_agreed=1; GIFT_BLOCK_COOKIE=GIFT_BLOCK_COOKIE; INTVER=1; stardustpgcv=0606; DedeUserID=393056819; DedeUserID__ckMd5=43771d91224c7285; SESSDATA=bb15b3a2%2C1598937340%2C37fab*31; bili_jct=e8377d560fe3434ffd36531d323df842; CURRENT_QUALITY=80; bp_t_offset_393056819=365856292215780322; _dfcaptcha=08c1c131463a58b5c74c50f3d9eaed6d; Hm_lvt_8a6e55dbd2870f0f5bc9194cddf32a02=1583825216,1583853309,1583925148,1584087368; Hm_lpvt_8a6e55dbd2870f0f5bc9194cddf32a02=1584087368; PVID=15"</span></span><br><span class="line">    cookie = &#123;<span class="string">'Cookie'</span>: Cookies&#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">    <span class="string">'color'</span>:<span class="string">'16777215'</span>,</span><br><span class="line">    <span class="string">'fontsize'</span>:<span class="string">'25'</span>,</span><br><span class="line">    <span class="string">'mode'</span>:<span class="string">'1'</span>,</span><br><span class="line">    <span class="string">'msg'</span>:MSG,</span><br><span class="line">    <span class="string">'rnd'</span>:<span class="string">'1584087359'</span>,</span><br><span class="line">    <span class="string">'roomid'</span>:<span class="string">'21154895'</span>,</span><br><span class="line">    <span class="string">'bubble'</span>:<span class="string">'0'</span>,</span><br><span class="line">    <span class="string">'aid'</span>:<span class="string">'56737027'</span>,</span><br><span class="line">    <span class="string">'csrf_token'</span>:<span class="string">'e8377d560fe3434ffd36531d323df842'</span>,</span><br><span class="line">    <span class="string">'csrf'</span>:<span class="string">'e8377d560fe3434ffd36531d323df842'</span></span><br><span class="line">    &#125;</span><br><span class="line">    requests.post(<span class="string">'https://api.live.bilibili.com/msg/send'</span>, cookies=cookie, data=data)</span><br><span class="line"><span class="comment">#senddanmu.sendDM(data) #&lt;Response [200]&gt; 200是状态码 表示pass</span></span><br></pre></td></tr></table></figure></div><p>獲取cookies 方法見視屏:….[還沒上傳]</p><p><a name="POfJs"></a></p><h1 id="2-獲取彈幕的方法"><a href="#2-獲取彈幕的方法" class="headerlink" title="2 獲取彈幕的方法:"></a>2 獲取彈幕的方法:</h1><p>用github的項目吧, <a href="https://github.com/xfgryujk" target="_blank" rel="noopener">xfgryujk</a>/<a href="https://github.com/xfgryujk/blivedm" target="_blank" rel="noopener">blivedm</a><br />這是我已知的, 最好的彈幕獲取項目</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/xfgryujk/blivedm.git</span><br></pre></td></tr></table></figure></div><p><a name="uztyh"></a></p><h1 id="3-聊天模塊"><a href="#3-聊天模塊" class="headerlink" title="3 聊天模塊"></a>3 聊天模塊</h1><p>用: <a href="https://blog.csdn.net/qq_29129381/article/details/82865617" target="_blank" rel="noopener">https://blog.csdn.net/qq_29129381/article/details/82865617</a><br />這個是最簡單的<br />抄來的代碼<del>, 感謝<a href="http://api.qingyunke.com/" target="_blank" rel="noopener">青云客智能聊天机器人</a>的奉獻</del></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">airoot</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment">#This function is original from:https://blog.csdn.net/qq_29129381/article/details/82865617</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.url = <span class="string">r'http://api.qingyunke.com/api.php?%s'</span></span><br><span class="line">        self.data = &#123;</span><br><span class="line">            <span class="string">'key'</span>:<span class="string">'free'</span>,</span><br><span class="line">            <span class="string">'appid'</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>:<span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getword</span><span class="params">(self, word=<span class="string">''</span>)</span>:</span></span><br><span class="line">        self.data[<span class="string">'msg'</span>] = word</span><br><span class="line">        <span class="keyword">if</span> self.data[<span class="string">'msg'</span>] == <span class="string">''</span>:</span><br><span class="line">            self.data[<span class="string">'msg'</span>] = <span class="string">'你不说话, 我来撩你吧'</span></span><br><span class="line">        self.params = urllib.parse.urlencode(self.data)</span><br><span class="line">        self.url = self.url % self.params</span><br><span class="line">        self.page = urllib.request.urlopen(self.url,timeout=<span class="number">15</span>).read()</span><br><span class="line">        self.res = json.loads(self.page)</span><br><span class="line">        self.res[<span class="string">'content'</span>] = self.res[<span class="string">'content'</span>].replace(<span class="string">'&#123;br&#125;'</span>,<span class="string">' '</span>)</span><br><span class="line">        <span class="keyword">return</span> self.res</span><br></pre></td></tr></table></figure></div><p><a name="iu4Rt"></a></p><h1 id="4-在blivedm裏面-加入聊天機器人的代碼"><a href="#4-在blivedm裏面-加入聊天機器人的代碼" class="headerlink" title="4 在blivedm裏面, 加入聊天機器人的代碼"></a>4 在blivedm裏面, 加入聊天機器人的代碼</h1><p><a name="pt8sn"></a></p><h2 id="修改sample-py"><a href="#修改sample-py" class="headerlink" title="修改sample.py"></a>修改sample.py</h2><p>把client ID改成要回覆彈幕的ID<br><img src="https://s1.ax1x.com/2020/06/26/NrxI2R.png" alt="NrxI2R.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_danmaku</span><span class="params">(self, danmaku: blivedm.DanmakuMessage)</span>:</span></span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>：<span class="subst">&#123;danmaku.msg&#125;</span>'</span>)</span><br></pre></td></tr></table></figure></div><p>這兩行是彈幕, 直接用後面的{danmaku.msg}就好,<br />這裏, 我們改成</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_danmaku</span><span class="params">(self, danmaku: blivedm.DanmakuMessage)</span>:</span></span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>：<span class="subst">&#123;danmaku.msg&#125;</span>'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>'</span> != <span class="string">"史上最不正經的生物狗"</span>:<span class="comment">#這裏是我的名字, 不把自己排除, 會自己套娃, 無限自嗨的= =</span></span><br><span class="line">        B_send(airoot().getword(str(<span class="string">f'<span class="subst">&#123;danmaku.msg&#125;</span>'</span>))[<span class="string">'content'</span>])</span><br></pre></td></tr></table></figure></div><p><a name="TL6fr"></a></p><h2 id="彈幕分割"><a href="#彈幕分割" class="headerlink" title="彈幕分割"></a>彈幕分割</h2><p>因爲普通人員, 一個彈幕只能發20個字節, 字數多了, 會自動忽略, 所以需要分割分佈發送</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B_Slice</span><span class="params">(MSG)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range((len(MSG)//<span class="number">20</span>)+<span class="number">1</span>):</span><br><span class="line">        B_send(MSG[i*<span class="number">20</span>:(i+<span class="number">1</span>)*<span class="number">20</span>])</span><br></pre></td></tr></table></figure></div><p>把分割套進去</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_danmaku</span><span class="params">(self, danmaku: blivedm.DanmakuMessage)</span>:</span></span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>：<span class="subst">&#123;danmaku.msg&#125;</span>'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>'</span> != <span class="string">"史上最不正經的生物狗"</span>:</span><br><span class="line">        B_Slice(airoot().getword(str(<span class="string">f'<span class="subst">&#123;danmaku.msg&#125;</span>'</span>))[<span class="string">'content'</span>])</span><br></pre></td></tr></table></figure></div><p><a name="Lp4df"></a></p><h2 id="鏈接超時"><a href="#鏈接超時" class="headerlink" title="鏈接超時"></a>鏈接超時</h2><p>發現經常連接超時, 然後卡在了那裏. 我設置了一個timeout=15, 在前面, 已更新<br />後面老地方, 加一個try</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_danmaku</span><span class="params">(self, danmaku: blivedm.DanmakuMessage)</span>:</span></span><br><span class="line">    print(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>：<span class="subst">&#123;danmaku.msg&#125;</span>'</span>)</span><br><span class="line">    <span class="keyword">if</span> <span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>'</span> != <span class="string">"史上最不正經的生物狗"</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            MSG = airoot().getword(str(<span class="string">f'<span class="subst">&#123;danmaku.msg&#125;</span>'</span>))[<span class="string">'content'</span>]</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            MSG = <span class="string">"鏈接超時了 = =(自動回覆)"</span></span><br><span class="line">        B_Slice(MSG)</span><br></pre></td></tr></table></figure></div><p><a name="CiMm7"></a></p><h2 id="发送太快而被吞"><a href="#发送太快而被吞" class="headerlink" title="发送太快而被吞"></a>发送太快而被吞</h2><p>加一个1s延迟,发送弹幕过多的时候</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B_Slice</span><span class="params">(MSG)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range((len(MSG)//<span class="number">20</span>)+<span class="number">1</span>):</span><br><span class="line">        B_send(MSG[i*<span class="number">20</span>:(i+<span class="number">1</span>)*<span class="number">20</span>])</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br></pre></td></tr></table></figure></div><p>娛樂而已, 應該不會載更新了, /摔板凳</p><p><a name="BB8A3"></a></p><h1 id="Sample-py"><a href="#Sample-py" class="headerlink" title="Sample.py"></a>Sample.py</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio,requests, sys, time</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> blivedm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyBLiveClient</span><span class="params">(blivedm.BLiveClient)</span>:</span></span><br><span class="line">    <span class="comment"># 演示如何自定义handler</span></span><br><span class="line">    _COMMAND_HANDLERS = blivedm.BLiveClient._COMMAND_HANDLERS.copy()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">__on_vip_enter</span><span class="params">(self, command)</span>:</span></span><br><span class="line">        print(command)</span><br><span class="line">    _COMMAND_HANDLERS[<span class="string">'WELCOME'</span>] = __on_vip_enter  <span class="comment"># 老爷入场</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_popularity</span><span class="params">(self, popularity: int)</span>:</span></span><br><span class="line">        <span class="comment">#print(f'当前人气值：&#123;popularity&#125;')</span></span><br><span class="line">        AAAAAAAA = <span class="number">1</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_danmaku</span><span class="params">(self, danmaku: blivedm.DanmakuMessage)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>：<span class="subst">&#123;danmaku.msg&#125;</span>'</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>'</span> != <span class="string">"史上最不正經的生物狗"</span>:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                MSG = airoot().getword(str(<span class="string">f'<span class="subst">&#123;danmaku.msg&#125;</span>'</span>))[<span class="string">'content'</span>]</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                MSG = <span class="string">"鏈接超時了 = =(自動回覆)"</span></span><br><span class="line">            B_Slice(MSG)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_gift</span><span class="params">(self, gift: blivedm.GiftMessage)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;gift.uname&#125;</span> 赠送<span class="subst">&#123;gift.gift_name&#125;</span>x<span class="subst">&#123;gift.num&#125;</span> （<span class="subst">&#123;gift.coin_type&#125;</span>币x<span class="subst">&#123;gift.total_coin&#125;</span>）'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_buy_guard</span><span class="params">(self, message: blivedm.GuardBuyMessage)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;message.username&#125;</span> 购买<span class="subst">&#123;message.gift_name&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_super_chat</span><span class="params">(self, message: blivedm.SuperChatMessage)</span>:</span></span><br><span class="line">        print(<span class="string">f'醒目留言 ¥<span class="subst">&#123;message.price&#125;</span> <span class="subst">&#123;message.uname&#125;</span>：<span class="subst">&#123;message.message&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">airoot</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment">#This function is original from:https://blog.csdn.net/qq_29129381/article/details/82865617</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.url = <span class="string">r'http://api.qingyunke.com/api.php?%s'</span></span><br><span class="line">        self.data = &#123;</span><br><span class="line">            <span class="string">'key'</span>:<span class="string">'free'</span>,</span><br><span class="line">            <span class="string">'appid'</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>:<span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getword</span><span class="params">(self, word=<span class="string">''</span>)</span>:</span></span><br><span class="line">        self.data[<span class="string">'msg'</span>] = word</span><br><span class="line">        <span class="keyword">if</span> self.data[<span class="string">'msg'</span>] == <span class="string">''</span>:</span><br><span class="line">            self.data[<span class="string">'msg'</span>] = <span class="string">'你不说话, 我来撩你吧'</span></span><br><span class="line">        self.params = urllib.parse.urlencode(self.data)</span><br><span class="line">        self.url = self.url % self.params</span><br><span class="line">        self.page = urllib.request.urlopen(self.url,timeout=<span class="number">15</span>).read()</span><br><span class="line">        self.res = json.loads(self.page)</span><br><span class="line">        self.res[<span class="string">'content'</span>] = self.res[<span class="string">'content'</span>].replace(<span class="string">'&#123;br&#125;'</span>,<span class="string">' '</span>)</span><br><span class="line">        <span class="keyword">return</span> self.res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B_send</span><span class="params">(MSG)</span>:</span></span><br><span class="line">    Cookies =  <span class="string">""</span><span class="comment">#自己的</span></span><br><span class="line">    cookie = &#123;<span class="string">'Cookie'</span>: Cookies&#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">    <span class="string">'color'</span>:<span class="string">'16777215'</span>,</span><br><span class="line">    <span class="string">'fontsize'</span>:<span class="string">'25'</span>,</span><br><span class="line">    <span class="string">'mode'</span>:<span class="string">'1'</span>,</span><br><span class="line">    <span class="string">'msg'</span>:MSG,</span><br><span class="line">    <span class="string">'rnd'</span>:<span class="string">'1584087359'</span>,</span><br><span class="line">    <span class="string">'roomid'</span>:<span class="string">'21154895'</span>,</span><br><span class="line">    <span class="string">'bubble'</span>:<span class="string">'0'</span>,</span><br><span class="line">    <span class="string">'aid'</span>:<span class="string">'56737027'</span>,</span><br><span class="line">    <span class="string">'csrf_token'</span>:<span class="string">'e8377d560fe3434ffd36531d323df842'</span>,</span><br><span class="line">    <span class="string">'csrf'</span>:<span class="string">'e8377d560fe3434ffd36531d323df842'</span></span><br><span class="line">    &#125;</span><br><span class="line">    requests.post(<span class="string">'https://api.live.bilibili.com/msg/send'</span>, cookies=cookie, data=data)</span><br><span class="line"><span class="comment">#senddanmu.sendDM(data) #&lt;Response [200]&gt; 200是状态码 表示pass</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B_Slice</span><span class="params">(MSG)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range((len(MSG)//<span class="number">20</span>)+<span class="number">1</span>):</span><br><span class="line">        B_send(MSG[i*<span class="number">20</span>:(i+<span class="number">1</span>)*<span class="number">20</span>])</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 参数1是直播间ID</span></span><br><span class="line">    <span class="comment"># 如果SSL验证失败就把ssl设为False</span></span><br><span class="line">    client = MyBLiveClient(<span class="number">21154895</span>, ssl=<span class="literal">True</span>)</span><br><span class="line">    future = client.start()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 5秒后停止，测试用</span></span><br><span class="line">        <span class="comment"># await asyncio.sleep(5)</span></span><br><span class="line">        <span class="comment"># future = client.stop()</span></span><br><span class="line">        <span class="comment"># 或者</span></span><br><span class="line">        <span class="comment"># future.cancel()</span></span><br><span class="line">        <span class="keyword">await</span> future</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">await</span> client.close()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    asyncio.get_event_loop().run_until_complete(main())</span><br></pre></td></tr></table></figure></div><p><a name="UqplL"></a></p><h1 id="用戶自主開啓關閉機器人"><a href="#用戶自主開啓關閉機器人" class="headerlink" title="用戶自主開啓關閉機器人"></a>用戶自主開啓關閉機器人</h1><p>有時候機器人實在是太煩了, 簡直煩到想取關<br />這裏, 我們可以添加一個屏蔽名單, 並用簡單的命令判斷,讓發彈幕的人, 自主選擇, 打開或者關閉機器人回答<br />爲了長久有效, 我們最好是, 把這個名單存入本地文件. 這裏, 取名IgnoreList,我直接把他放進同樣的路徑, 方便讀取.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">IgnoreList</span><span class="params">(USER,MSG)</span>:</span></span><br><span class="line">    Ignore_List = open(sys.path[<span class="number">0</span>]+<span class="string">"/IgnoreList"</span>,<span class="string">'r'</span>).read().split(<span class="string">"\n"</span>)[:<span class="number">-1</span>]</span><br><span class="line">    <span class="comment"># 設定屏蔽規則</span></span><br><span class="line">    <span class="keyword">if</span> str(MSG) == <span class="string">"菲菲辛苦啦~"</span>:</span><br><span class="line">        B_Slice(<span class="string">"好的,菲菲先行告退了,愛你呦,木木噠~"</span>)</span><br><span class="line">        Ignore_List += [USER]</span><br><span class="line">    <span class="keyword">elif</span> str(MSG) == <span class="string">"菲菲快回來~"</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            Ignore_List.remove(USER)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            B_Slice(<span class="string">"你一直都在菲菲心里哟~"</span>)</span><br><span class="line">    Update = <span class="string">"\n"</span>.join(Ignore_List)+<span class="string">"\n"</span></span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/IgnoreList"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Update)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="keyword">return</span> Ignore_List</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/Nrxox1.png" alt="Nrxox1.png"></p><p><a name="l8uBi"></a></p><h1 id="防沉迷程序"><a href="#防沉迷程序" class="headerlink" title="防沉迷程序"></a>防沉迷程序</h1><p>爲了防止惡意刷屏,或者過於小盆友沉迷而耽誤學習, 因此在學習/工作時間內, 限制每分鐘內響應次數. 若超過, 則忽視多少分鐘<br />時間設定在早上9點,到晚上9點之間</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Bubling_List = &#123;&#125;</span><br><span class="line">Bubling_ban = &#123;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ToBubling_detect</span><span class="params">(User,Bubling_List,Bubling_ban,Times,TimeOut)</span>:</span></span><br><span class="line">    Times -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> User != <span class="string">'史上最不正經的生物狗'</span> <span class="keyword">and</span> User <span class="keyword">not</span> <span class="keyword">in</span> Bubling_ban.keys():</span><br><span class="line">        <span class="keyword">if</span> User <span class="keyword">not</span> <span class="keyword">in</span> Bubling_List.keys():</span><br><span class="line">            Bubling_List.update(&#123;User:&#123;<span class="string">'Time'</span>: time.time(), <span class="string">'Num'</span>: <span class="number">1</span>&#125;&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            Time_endur = time.time() - Bubling_List[User][<span class="string">'Time'</span>]</span><br><span class="line">            <span class="keyword">if</span> Time_endur &lt; <span class="number">60</span> <span class="keyword">and</span> Bubling_List[User][<span class="string">'Num'</span>] &gt; Times:</span><br><span class="line">                Bubling_ban.update(&#123;User:time.time()&#125;)</span><br><span class="line">                B_Slice(User+<span class="string">" 因調戲菲菲過於頻繁,而被選擇性忽略5min, 略略略~"</span>)</span><br><span class="line">                Bubling_List[User][<span class="string">'Num'</span>] = <span class="number">0</span></span><br><span class="line">                Bubling_List[User][<span class="string">'Time'</span>] = time.time()</span><br><span class="line">            <span class="keyword">elif</span> Time_endur &lt; <span class="number">60</span> <span class="keyword">and</span> Bubling_List[User][<span class="string">'Num'</span>] &lt;= Times:</span><br><span class="line">                Bubling_List[User][<span class="string">'Num'</span>] +=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                Bubling_List[User][<span class="string">'Num'</span>] =<span class="number">1</span></span><br><span class="line">                Bubling_List[User][<span class="string">'Time'</span>] = time.time()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> time.time() - Bubling_ban[User] &gt; TimeOut*<span class="number">60</span>:</span><br><span class="line">                Bubling_ban.pop(User)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            Bubling_ban = Bubling_ban</span><br><span class="line">    <span class="keyword">return</span> Bubling_List, Bubling_ban</span><br></pre></td></tr></table></figure></div><p>到此, 全程序爲: (自己加cookies)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> asyncio,requests, sys, time</span><br><span class="line"><span class="keyword">import</span> urllib.request</span><br><span class="line"><span class="keyword">import</span> urllib.parse</span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> blivedm</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyBLiveClient</span><span class="params">(blivedm.BLiveClient)</span>:</span></span><br><span class="line">    <span class="comment"># 演示如何自定义handler</span></span><br><span class="line">    _COMMAND_HANDLERS = blivedm.BLiveClient._COMMAND_HANDLERS.copy()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">__on_vip_enter</span><span class="params">(self, command)</span>:</span></span><br><span class="line">        print(command)</span><br><span class="line">    _COMMAND_HANDLERS[<span class="string">'WELCOME'</span>] = __on_vip_enter  <span class="comment"># 老爷入场</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_popularity</span><span class="params">(self, popularity: int)</span>:</span></span><br><span class="line">        <span class="comment">#print(f'当前人气值：&#123;popularity&#125;')</span></span><br><span class="line">        AAAAAAAA = <span class="number">1</span></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_danmaku</span><span class="params">(self, danmaku: blivedm.DanmakuMessage)</span>:</span></span><br><span class="line">        <span class="keyword">global</span> Bubling_List, Bubling_ban</span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>：<span class="subst">&#123;danmaku.msg&#125;</span>'</span>)</span><br><span class="line">        <span class="comment"># Bubuling test</span></span><br><span class="line">        Bubling_List, Bubling_ban = ToBubling_detect(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>'</span>,Bubling_List,Bubling_ban,<span class="number">10</span>,<span class="number">5</span>)</span><br><span class="line">        <span class="comment"># IgnoreList</span></span><br><span class="line">        Ignore_List = IgnoreList(<span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>'</span>,<span class="string">f'<span class="subst">&#123;danmaku.msg&#125;</span>'</span>)</span><br><span class="line">        Ignore_List += list(Bubling_ban.keys())</span><br><span class="line">        <span class="comment">#print(Ignore_List)</span></span><br><span class="line">        <span class="comment">#print(Bubling_List)</span></span><br><span class="line">        <span class="keyword">if</span> <span class="string">f'<span class="subst">&#123;danmaku.uname&#125;</span>'</span> <span class="keyword">not</span> <span class="keyword">in</span> Ignore_List:</span><br><span class="line">            <span class="keyword">try</span>:</span><br><span class="line">                MSG = airoot().getword(str(<span class="string">f'<span class="subst">&#123;danmaku.msg&#125;</span>'</span>))[<span class="string">'content'</span>]</span><br><span class="line">            <span class="keyword">except</span>:</span><br><span class="line">                MSG = <span class="string">"鏈接超時了 = =(自動回覆)"</span></span><br><span class="line">            B_Slice(MSG)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_receive_gift</span><span class="params">(self, gift: blivedm.GiftMessage)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;gift.uname&#125;</span> 赠送<span class="subst">&#123;gift.gift_name&#125;</span>x<span class="subst">&#123;gift.num&#125;</span> （<span class="subst">&#123;gift.coin_type&#125;</span>币x<span class="subst">&#123;gift.total_coin&#125;</span>）'</span>)</span><br><span class="line">        B_Slice(str(<span class="string">f'谢谢<span class="subst">&#123;gift.uname&#125;</span> 赠送的<span class="subst">&#123;gift.gift_name&#125;</span>'</span>))</span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_buy_guard</span><span class="params">(self, message: blivedm.GuardBuyMessage)</span>:</span></span><br><span class="line">        print(<span class="string">f'<span class="subst">&#123;message.username&#125;</span> 购买<span class="subst">&#123;message.gift_name&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">_on_super_chat</span><span class="params">(self, message: blivedm.SuperChatMessage)</span>:</span></span><br><span class="line">        print(<span class="string">f'醒目留言 ¥<span class="subst">&#123;message.price&#125;</span> <span class="subst">&#123;message.uname&#125;</span>：<span class="subst">&#123;message.message&#125;</span>'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">airoot</span><span class="params">(object)</span>:</span></span><br><span class="line">    <span class="comment">#This function is original from:https://blog.csdn.net/qq_29129381/article/details/82865617</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.url = <span class="string">r'http://api.qingyunke.com/api.php?%s'</span></span><br><span class="line">        self.data = &#123;</span><br><span class="line">            <span class="string">'key'</span>:<span class="string">'free'</span>,</span><br><span class="line">            <span class="string">'appid'</span>:<span class="number">0</span>,</span><br><span class="line">            <span class="string">'msg'</span>:<span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">getword</span><span class="params">(self, word=<span class="string">''</span>)</span>:</span></span><br><span class="line">        self.data[<span class="string">'msg'</span>] = word</span><br><span class="line">        <span class="keyword">if</span> self.data[<span class="string">'msg'</span>] == <span class="string">''</span>:</span><br><span class="line">            self.data[<span class="string">'msg'</span>] = <span class="string">'你不说话, 我来撩你吧'</span></span><br><span class="line">        self.params = urllib.parse.urlencode(self.data)</span><br><span class="line">        self.url = self.url % self.params</span><br><span class="line">        self.page = urllib.request.urlopen(self.url,timeout=<span class="number">20</span>).read()</span><br><span class="line">        self.res = json.loads(self.page)</span><br><span class="line">        self.res[<span class="string">'content'</span>] = self.res[<span class="string">'content'</span>].replace(<span class="string">'&#123;br&#125;'</span>,<span class="string">' '</span>)</span><br><span class="line">        <span class="keyword">return</span> self.res</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">IgnoreList</span><span class="params">(USER,MSG)</span>:</span></span><br><span class="line">    Ignore_List = open(sys.path[<span class="number">0</span>]+<span class="string">"/IgnoreList"</span>,<span class="string">'r'</span>).read().split(<span class="string">"\n"</span>)[:<span class="number">-1</span>]</span><br><span class="line">    <span class="comment"># 設定屏蔽規則</span></span><br><span class="line">    <span class="keyword">if</span> str(MSG) == <span class="string">"菲菲辛苦啦~"</span>:</span><br><span class="line">        B_Slice(<span class="string">"好的,菲菲先行告退了,愛你呦,木木噠~"</span>)</span><br><span class="line">        Ignore_List += [USER]</span><br><span class="line">    <span class="keyword">elif</span> str(MSG) == <span class="string">"菲菲快回來~"</span>:</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            Ignore_List.remove(USER)</span><br><span class="line">        <span class="keyword">except</span>:</span><br><span class="line">            B_Slice(<span class="string">"你一直都在菲菲心里哟~"</span>)</span><br><span class="line">    Update = <span class="string">"\n"</span>.join(Ignore_List)+<span class="string">"\n"</span></span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/IgnoreList"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Update)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="keyword">return</span> Ignore_List</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B_send</span><span class="params">(MSG)</span>:</span></span><br><span class="line">    Cookies =  <span class="string">""</span></span><br><span class="line">    cookie = &#123;<span class="string">'Cookie'</span>: Cookies&#125;</span><br><span class="line">    data = &#123;</span><br><span class="line">    <span class="string">'color'</span>:<span class="string">'16777215'</span>,</span><br><span class="line">    <span class="string">'fontsize'</span>:<span class="string">'25'</span>,</span><br><span class="line">    <span class="string">'mode'</span>:<span class="string">'1'</span>,</span><br><span class="line">    <span class="string">'msg'</span>:MSG,</span><br><span class="line">    <span class="string">'rnd'</span>:<span class="string">'1584087359'</span>,</span><br><span class="line">    <span class="string">'roomid'</span>: str(ROOM_ID),</span><br><span class="line">    <span class="string">'bubble'</span>:<span class="string">'0'</span>,</span><br><span class="line">    <span class="string">'aid'</span>:<span class="string">'56737027'</span>,</span><br><span class="line">    <span class="string">'csrf_token'</span>:<span class="string">'e8377d560fe3434ffd36531d323df842'</span>,</span><br><span class="line">    <span class="string">'csrf'</span>:<span class="string">'e8377d560fe3434ffd36531d323df842'</span></span><br><span class="line">    &#125;</span><br><span class="line">    requests.post(<span class="string">'https://api.live.bilibili.com/msg/send'</span>, cookies=cookie, data=data)</span><br><span class="line"><span class="comment">#senddanmu.sendDM(data) #&lt;Response [200]&gt; 200是状态码 表示pass</span></span><br><span class="line"></span><br><span class="line">Bubling_List = &#123;&#125;</span><br><span class="line">Bubling_ban = &#123;&#125;</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">ToBubling_detect</span><span class="params">(User,Bubling_List,Bubling_ban,Times,TimeOut)</span>:</span></span><br><span class="line">    Times -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> User != <span class="string">'史上最不正經的生物狗'</span> <span class="keyword">and</span> User <span class="keyword">not</span> <span class="keyword">in</span> Bubling_ban.keys():</span><br><span class="line">        <span class="keyword">if</span> User <span class="keyword">not</span> <span class="keyword">in</span> Bubling_List.keys():</span><br><span class="line">            Bubling_List.update(&#123;User:&#123;<span class="string">'Time'</span>: time.time(), <span class="string">'Num'</span>: <span class="number">1</span>&#125;&#125;)</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            Time_endur = time.time() - Bubling_List[User][<span class="string">'Time'</span>]</span><br><span class="line">            <span class="keyword">if</span> Time_endur &lt; <span class="number">60</span> <span class="keyword">and</span> Bubling_List[User][<span class="string">'Num'</span>] &gt; Times:</span><br><span class="line">                Bubling_ban.update(&#123;User:time.time()&#125;)</span><br><span class="line">                B_Slice(User+<span class="string">" 因調戲菲菲過於頻繁,而被選擇性忽略5min, 略略略~"</span>)</span><br><span class="line">                Bubling_List[User][<span class="string">'Num'</span>] = <span class="number">0</span></span><br><span class="line">                Bubling_List[User][<span class="string">'Time'</span>] = time.time()</span><br><span class="line">            <span class="keyword">elif</span> Time_endur &lt; <span class="number">60</span> <span class="keyword">and</span> Bubling_List[User][<span class="string">'Num'</span>] &lt;= Times:</span><br><span class="line">                Bubling_List[User][<span class="string">'Num'</span>] +=<span class="number">1</span></span><br><span class="line">            <span class="keyword">else</span>:</span><br><span class="line">                Bubling_List[User][<span class="string">'Num'</span>] =<span class="number">1</span></span><br><span class="line">                Bubling_List[User][<span class="string">'Time'</span>] = time.time()</span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            <span class="keyword">if</span> time.time() - Bubling_ban[User] &gt; TimeOut*<span class="number">60</span>:</span><br><span class="line">                Bubling_ban.pop(User)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:</span><br><span class="line">            Bubling_ban = Bubling_ban</span><br><span class="line">    <span class="keyword">return</span> Bubling_List, Bubling_ban</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ROOM_ID = <span class="number">21154895</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">B_Slice</span><span class="params">(MSG)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range((len(MSG)//<span class="number">20</span>)+<span class="number">1</span>):</span><br><span class="line">        B_send(MSG[i*<span class="number">20</span>:(i+<span class="number">1</span>)*<span class="number">20</span>])</span><br><span class="line">        time.sleep(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="comment"># 参数1是直播间ID</span></span><br><span class="line">    <span class="comment"># 如果SSL验证失败就把ssl设为False</span></span><br><span class="line">    client = MyBLiveClient(ROOM_ID, ssl=<span class="literal">True</span>)</span><br><span class="line">    future = client.start()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="comment"># 5秒后停止，测试用</span></span><br><span class="line">        <span class="comment"># await asyncio.sleep(5)</span></span><br><span class="line">        <span class="comment"># future = client.stop()</span></span><br><span class="line">        <span class="comment"># 或者</span></span><br><span class="line">        <span class="comment"># future.cancel()</span></span><br><span class="line">        <span class="keyword">await</span> future</span><br><span class="line">    <span class="keyword">finally</span>:</span><br><span class="line">        <span class="keyword">await</span> client.close()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    asyncio.get_event_loop().run_until_complete(main())</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Python 下载html 为PDF, 再转成PNG</title>
      <link href="/Blog/Python_down_ht2pdf2png.html"/>
      <url>/Blog/Python_down_ht2pdf2png.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python-下载html-为PDF-再转成PNG"><a href="#Python-下载html-为PDF-再转成PNG" class="headerlink" title="Python 下载html 为PDF, 再转成PNG"></a>Python 下载html 为PDF, 再转成PNG</h1><p>html ot PDF: <a href="https://www.jb51.net/article/160638.htm" target="_blank" rel="noopener">https://www.jb51.net/article/160638.htm</a><br />PDF to PNG: <a href="https://cloud.tencent.com/developer/article/1481641" target="_blank" rel="noopener">https://cloud.tencent.com/developer/article/1481641</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pdfkit, sys</span><br><span class="line"><span class="keyword">import</span> sys, fitz</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> datetime</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PATH = sys.path[<span class="number">0</span>]</span><br><span class="line">print(PATH)</span><br><span class="line">pdfkit.from_url(<span class="string">'https://www.nature.com/subjects/biological-sciences'</span>, PATH+<span class="string">'/out.pdf'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">pyMuPDF2_fitz</span><span class="params">(pdfPath, imagePath)</span>:</span></span><br><span class="line">    pdfDoc = fitz.open(pdfPath) <span class="comment"># open document</span></span><br><span class="line">    <span class="keyword">for</span> pg <span class="keyword">in</span> range(pdfDoc.pageCount): <span class="comment"># iterate through the pages</span></span><br><span class="line">        page = pdfDoc[pg]</span><br><span class="line">        rotate = int(<span class="number">0</span>)</span><br><span class="line">        <span class="comment"># 每个尺寸的缩放系数为1.3，这将为我们生成分辨率提高2.6的图像</span></span><br><span class="line">        <span class="comment"># 此处若是不做设置，默认图片大小为：792X612, dpi=96</span></span><br><span class="line">        zoom_x = <span class="number">1.33333333</span> <span class="comment">#(1.33333333--&gt;1056x816)   (2--&gt;1584x1224)</span></span><br><span class="line">        zoom_y = <span class="number">1.33333333</span></span><br><span class="line">        mat = fitz.Matrix(zoom_x, zoom_y).preRotate(rotate) <span class="comment"># 缩放系数1.3在每个维度  .preRotate(rotate)是执行一个旋转</span></span><br><span class="line">        rect = page.rect                         <span class="comment"># 页面大小</span></span><br><span class="line">        mp = rect.tl + (rect.bl - (<span class="number">0</span>,<span class="number">1224</span>/zoom_x)) <span class="comment"># 矩形区域    56=75/1.3333</span></span><br><span class="line">        clip = fitz.Rect(mp, rect.br)            <span class="comment"># 想要截取的区域</span></span><br><span class="line">        pix = page.getPixmap(matrix=mat, alpha=<span class="literal">False</span>, clip=clip) <span class="comment"># 将页面转换为图像</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(imagePath):</span><br><span class="line">            os.makedirs(imagePath)</span><br><span class="line">        pix.writePNG(imagePath+<span class="string">'/'</span>+<span class="string">'psReport_%s.png'</span> % pg)<span class="comment"># store image as a PNG</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    pdfPath = PATH+<span class="string">'/out.pdf'</span></span><br><span class="line">    imagePath = PATH+<span class="string">'/../Nature'</span></span><br><span class="line">    <span class="comment">#pyMuPDF_fitz(pdfPath, imagePath)#只是转换图片</span></span><br><span class="line">    pyMuPDF2_fitz(pdfPath, imagePath)<span class="comment">#指定想要的区域转换成图片</span></span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用Python接收邮件和附件</title>
      <link href="/Blog/Python_email.html"/>
      <url>/Blog/Python_email.html</url>
      
        <content type="html"><![CDATA[<h1 id="用Python接收邮件和附件"><a href="#用Python接收邮件和附件" class="headerlink" title="用Python接收邮件和附件"></a>用Python接收邮件和附件</h1><p>接收邮件的服务又好几种， 这里主要用到pop3 协议， 关于开通和，请看百度经验，获取授权码，<a href="https://service.mail.qq.com/cgi-bin/help?subtype=1&&id=28&&no=1001256" target="_blank" rel="noopener">点击这里</a><br />基础脚本：<a href="https://www.yuque.com/liuwenkan/pwh0c8/qqmail_r" target="_blank" rel="noopener">https://www.yuque.com/liuwenkan/pwh0c8/qqmail_r</a></p><p>加入删除和查看上一封功能：</p><p><a name="26K7T"></a></p><h1 id="添加了一些小functions"><a href="#添加了一些小functions" class="headerlink" title="添加了一些小functions"></a>添加了一些小functions</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 从List中寻找匹配</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grep</span><span class="params">(Str,List)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        <span class="keyword">if</span> Str <span class="keyword">in</span> str(i):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line"><span class="comment"># 汉字解码</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Decode</span><span class="params">(STR)</span>:</span></span><br><span class="line">    head = <span class="string">"=?gb2312?b?"</span></span><br><span class="line">    tail = <span class="string">"?="</span></span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">in</span> STR:</span><br><span class="line">        H = STR.find(head) + len(head)</span><br><span class="line">        T = STR.find(tail)</span><br><span class="line">        Result = base64.b64decode(STR[H:T]).decode(<span class="string">"GBK"</span>)</span><br><span class="line">        STR = STR[:H- len(head)] + Result + STR[T+ len(tail):]</span><br><span class="line">    <span class="keyword">return</span> STR</span><br><span class="line"></span><br><span class="line"><span class="comment"># 读取邮件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_read</span><span class="params">(index)</span>:</span></span><br><span class="line">    resp, lines, octets = server.retr(index)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        msg_content = <span class="string">b'\r\n'</span>.join(lines).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">        msg = Parser().parsestr(msg_content)</span><br><span class="line">        print_info(msg)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        From= Decode(str(grep(<span class="string">"b'From:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        To= Decode(str(grep(<span class="string">"b'To:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        Subject= Decode(str(grep(<span class="string">"b'Subject:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        print(<span class="string">""</span>,From,To,<span class="string">"\n"</span>,Subject,<span class="string">'\n\n'</span>,<span class="string">"this mail are purely composed by img or html"</span>,sep=<span class="string">'\n'</span>)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 按键对应事件</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Action</span><span class="params">(Press)</span>:</span></span><br><span class="line">    <span class="keyword">global</span> index</span><br><span class="line">    <span class="keyword">global</span> Num_mail</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"q"</span>:</span><br><span class="line">        server.quit()</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"7"</span>:</span><br><span class="line">        server.dele(index)</span><br><span class="line">        index -=<span class="number">1</span></span><br><span class="line">        Num_mail -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"8"</span>:</span><br><span class="line">        index -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"5"</span>:</span><br><span class="line">        index +=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> index &lt; <span class="number">0</span>:</span><br><span class="line">        index =<span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> index &gt; Num_mail:</span><br><span class="line">        index -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">"No more new e-mails"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        M_read(index)</span><br></pre></td></tr></table></figure></div><p><a name="xR66z"></a></p><h1 id="主逻辑"><a href="#主逻辑" class="headerlink" title="主逻辑"></a>主逻辑</h1><p>def M_read(index):<br />   resp, lines, octets = server.retr(index)<br />   try:<br />       Date= str(grep(“b’Date:”,lines)).replace(“b’”,’’)<br />       msg_content = b’\r\n’.join(lines).decode(‘utf-8’)<br />       msg = Parser().parsestr(msg_content)<br />       print_info(msg)<br />       print(‘\n\n’+Date)<br />   except:<br />       Date= str(grep(“b’Date:”,lines)).replace(“b’”,’’)<br />       From= Decode(str(grep(“b’From:”,lines)).replace(“b’”,’’))<br />       To= Decode(str(grep(“b’To:”,lines)).replace(“b’”,’’))<br />       Subject= Decode(str(grep(“b’Subject:”,lines)).replace(“b’”,’’))<br />       print(“”,From,To,”\n”,Subject,’\n\n’,”this mail are purely composed by img or html”,sep=’\n’)<br />       print(‘\n\n’+Date)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    Press = input()</span><br><span class="line">    os.system(<span class="string">'clear'</span>)</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"q"</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> Num_mail == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">"No New E-mails"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        Action(Press)</span><br><span class="line">        print(<span class="string">"index="</span>,index,<span class="string">"; all="</span>,Num_mail)</span><br></pre></td></tr></table></figure></div><p>案件说明：<br />8：上一封<br />5：下一封<br />7：删除此封<br />q：退出<br />注： 只有正常退出，才能够同时删除邮箱中的邮件。删除后在垃圾箱中，不会永久删除。</p><p><a name="ROIgN"></a></p><h1 id="下载附件"><a href="#下载附件" class="headerlink" title="下载附件"></a>下载附件</h1><p>function： <a href="https://www.jb51.net/article/142236.htm" target="_blank" rel="noopener">Source</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_email_content</span><span class="params">(byte_lines, savepath)</span>:</span></span><br><span class="line">    str_lines = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> byte_lines:</span><br><span class="line">        str_lines.append(x.decode())</span><br><span class="line">    <span class="comment"># 拼接邮件内容</span></span><br><span class="line">    msg_content = <span class="string">'\n'</span>.join(str_lines)</span><br><span class="line">    <span class="comment"># 把邮件内容解析为Message对象</span></span><br><span class="line">    message = Parser().parsestr(msg_content)</span><br><span class="line">    attachments = []</span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> message.walk():</span><br><span class="line">        filename = part.get_filename()</span><br><span class="line">        <span class="comment">#附件名字</span></span><br><span class="line">        <span class="keyword">if</span> filename:</span><br><span class="line">            print(filename)</span><br><span class="line">            filename = decode_str(filename)</span><br><span class="line">            data = part.get_payload(decode=<span class="literal">True</span>)</span><br><span class="line">            abs_filename = os.path.join(savepath, filename)</span><br><span class="line">            attach = open(abs_filename, <span class="string">'wb'</span>)</span><br><span class="line">            attachments.append(filename)</span><br><span class="line">            attach.write(data)</span><br><span class="line">            attach.close()</span><br><span class="line">    <span class="keyword">return</span> attachments</span><br></pre></td></tr></table></figure></div><p>添加入action，按9下载：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">elif</span> Press == <span class="string">"9"</span>:        </span><br><span class="line">    attach = get_email_content(M_read(index), <span class="string">'.'</span>)</span><br></pre></td></tr></table></figure></div><p>加个获取附件名称， 发现中文乱码问题， 加个decode</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_attach_name</span><span class="params">(byte_lines)</span>:</span></span><br><span class="line">    str_lines = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> byte_lines:</span><br><span class="line">        str_lines.append(x.decode())</span><br><span class="line">    <span class="comment"># 拼接邮件内容</span></span><br><span class="line">    msg_content = <span class="string">'\n'</span>.join(str_lines)</span><br><span class="line">    <span class="comment"># 把邮件内容解析为Message对象</span></span><br><span class="line">    message = Parser().parsestr(msg_content)</span><br><span class="line">    attachments = []</span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> message.walk():</span><br><span class="line">        filename = part.get_filename()</span><br><span class="line">        <span class="comment">#附件名字</span></span><br><span class="line">        <span class="keyword">if</span> filename:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">"=?UTF-8?"</span> <span class="keyword">in</span> filename:</span><br><span class="line">                filename = base64.b64decode(filename[<span class="number">9</span>:<span class="number">-2</span>]).decode(<span class="string">"utf8"</span>)</span><br><span class="line">            attachments.append(filename)</span><br><span class="line">    <span class="keyword">return</span> attachments</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_read</span><span class="params">(index)</span>:</span></span><br><span class="line">    resp, lines, octets = server.retr(index)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Attachment = get_attach_name(lines)</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        msg_content = <span class="string">b'\r\n'</span>.join(lines).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">        msg = Parser().parsestr(msg_content)</span><br><span class="line">        print_info(msg)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line">        print(<span class="string">"Attachment:"</span>,Attachment)</span><br><span class="line"><span class="comment">#    try:</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        From= Decode(str(grep(<span class="string">"b'From:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        To= Decode(str(grep(<span class="string">"b'To:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        Subject= Decode(str(grep(<span class="string">"b'Subject:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        print(<span class="string">""</span>,From,To,<span class="string">"\n"</span>,Subject,<span class="string">'\n\n'</span>,<span class="string">"this mail are purely composed by img or html"</span>,sep=<span class="string">'\n'</span>)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line">    <span class="keyword">return</span> lines</span><br></pre></td></tr></table></figure></div><p>完整版：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3.7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> poplib</span><br><span class="line"><span class="keyword">import</span> os, sys, base64</span><br><span class="line"><span class="keyword">from</span> email.parser <span class="keyword">import</span> Parser</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> decode_header</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> parseaddr</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decode_str</span><span class="params">(s)</span>:</span></span><br><span class="line">    value, charset = decode_header(s)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> charset:</span><br><span class="line">        value = value.decode(charset)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_info</span><span class="params">(msg, indent=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> indent == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> header <span class="keyword">in</span> [<span class="string">'From'</span>, <span class="string">'To'</span>, <span class="string">'Subject'</span>]:</span><br><span class="line">            value = msg.get(header, <span class="string">''</span>)</span><br><span class="line">            <span class="keyword">if</span> value:</span><br><span class="line">                <span class="keyword">if</span> header==<span class="string">'Subject'</span>:</span><br><span class="line">                    value = decode_str(value)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    hdr, addr = parseaddr(value)</span><br><span class="line">                    name = decode_str(hdr)</span><br><span class="line">                    value = <span class="string">u'%s &lt;%s&gt;'</span> % (name, addr)</span><br><span class="line">            print(<span class="string">'%s%s: %s'</span> % (<span class="string">'  '</span> * indent, header, value))</span><br><span class="line">    <span class="keyword">if</span> (msg.is_multipart()):</span><br><span class="line">        parts = msg.get_payload()[:<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> n, part <span class="keyword">in</span> enumerate(parts):</span><br><span class="line">            print(<span class="string">'%spart %s'</span> % (<span class="string">'  '</span> * indent, n))</span><br><span class="line">            print(<span class="string">'%s--------------------'</span> % (<span class="string">'  '</span> * indent))</span><br><span class="line">            print_info(part, indent + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        content_type = msg.get_content_type()</span><br><span class="line">        <span class="keyword">if</span> content_type==<span class="string">'text/plain'</span> <span class="keyword">or</span> content_type==<span class="string">'text/html'</span>:</span><br><span class="line">            content = msg.get_payload(decode=<span class="literal">True</span>)</span><br><span class="line">            charset = guess_charset(msg)</span><br><span class="line">            <span class="keyword">if</span> charset:</span><br><span class="line">                content = content.decode(charset)</span><br><span class="line">            print(<span class="string">'%sText: %s'</span> % (<span class="string">'  '</span> * indent, content + <span class="string">'...'</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'%sAttachment: %s'</span> % (<span class="string">'  '</span> * indent, content_type))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">guess_charset</span><span class="params">(msg)</span>:</span></span><br><span class="line">    charset = msg.get_charset()</span><br><span class="line">    <span class="keyword">if</span> charset <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        content_type = msg.get(<span class="string">'Content-Type'</span>, <span class="string">''</span>).lower()</span><br><span class="line">        pos = content_type.find(<span class="string">'charset='</span>)</span><br><span class="line">        <span class="keyword">if</span> pos &gt;= <span class="number">0</span>:</span><br><span class="line">            charset = content_type[pos + <span class="number">8</span>:].strip()</span><br><span class="line">    <span class="keyword">return</span> charset</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grep</span><span class="params">(Str,List)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        <span class="keyword">if</span> Str <span class="keyword">in</span> str(i):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_attach_name</span><span class="params">(byte_lines)</span>:</span></span><br><span class="line">    str_lines = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> byte_lines:</span><br><span class="line">        str_lines.append(x.decode())</span><br><span class="line">    <span class="comment"># 拼接邮件内容</span></span><br><span class="line">    msg_content = <span class="string">'\n'</span>.join(str_lines)</span><br><span class="line">    <span class="comment"># 把邮件内容解析为Message对象</span></span><br><span class="line">    message = Parser().parsestr(msg_content)</span><br><span class="line">    attachments = []</span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> message.walk():</span><br><span class="line">        filename = part.get_filename()</span><br><span class="line">        <span class="comment">#附件名字</span></span><br><span class="line">        <span class="keyword">if</span> filename:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">"=?UTF-8?"</span> <span class="keyword">in</span> filename:</span><br><span class="line">                filename = base64.b64decode(filename[<span class="number">9</span>:<span class="number">-2</span>]).decode(<span class="string">"utf8"</span>)</span><br><span class="line">            attachments.append(filename)</span><br><span class="line">    <span class="keyword">return</span> attachments</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_read</span><span class="params">(index)</span>:</span></span><br><span class="line">    resp, lines, octets = server.retr(index)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Attachment = get_attach_name(lines)</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        msg_content = <span class="string">b'\r\n'</span>.join(lines).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">        msg = Parser().parsestr(msg_content)</span><br><span class="line">        print_info(msg)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line">        print(<span class="string">"Attachment:"</span>,Attachment)</span><br><span class="line"><span class="comment">#    try:</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        From= Decode(str(grep(<span class="string">"b'From:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        To= Decode(str(grep(<span class="string">"b'To:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        Subject= Decode(str(grep(<span class="string">"b'Subject:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        print(<span class="string">""</span>,From,To,<span class="string">"\n"</span>,Subject,<span class="string">'\n\n'</span>,<span class="string">"this mail are purely composed by img or html"</span>,sep=<span class="string">'\n'</span>)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line">    <span class="keyword">return</span> lines</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Action</span><span class="params">(Press)</span>:</span></span><br><span class="line">    attach =<span class="string">""</span></span><br><span class="line">    <span class="keyword">global</span> index</span><br><span class="line">    <span class="keyword">global</span> Num_mail</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"q"</span>:</span><br><span class="line">        server.quit()</span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"7"</span>:</span><br><span class="line">        server.dele(index)</span><br><span class="line">        index -=<span class="number">1</span></span><br><span class="line">        Num_mail -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"9"</span>:</span><br><span class="line">        attach = get_email_content(M_read(index), <span class="string">'.'</span>)</span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"8"</span>:</span><br><span class="line">        index -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"5"</span>:</span><br><span class="line">        index +=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> index &lt; <span class="number">0</span>:</span><br><span class="line">        index =<span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> index &gt; Num_mail:</span><br><span class="line">        index -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">"No more new e-mails"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        M_read(index)</span><br><span class="line">    <span class="keyword">return</span> attach</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Decode</span><span class="params">(STR)</span>:</span></span><br><span class="line">    head = <span class="string">"=?gb2312?b?"</span></span><br><span class="line">    tail = <span class="string">"?="</span></span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">in</span> STR:</span><br><span class="line">        H = STR.find(head) + len(head)</span><br><span class="line">        T = STR.find(tail)</span><br><span class="line">        Result = base64.b64decode(STR[H:T]).decode(<span class="string">"GBK"</span>)</span><br><span class="line">        STR = STR[:H- len(head)] + Result + STR[T+ len(tail):]</span><br><span class="line">    <span class="keyword">return</span> STR</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_email_content</span><span class="params">(byte_lines, savepath)</span>:</span></span><br><span class="line">    str_lines = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> byte_lines:</span><br><span class="line">        str_lines.append(x.decode())</span><br><span class="line">    <span class="comment"># 拼接邮件内容</span></span><br><span class="line">    msg_content = <span class="string">'\n'</span>.join(str_lines)</span><br><span class="line">    <span class="comment"># 把邮件内容解析为Message对象</span></span><br><span class="line">    message = Parser().parsestr(msg_content)</span><br><span class="line">    attachments = []</span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> message.walk():</span><br><span class="line">        filename = part.get_filename()</span><br><span class="line">        <span class="keyword">if</span> filename:</span><br><span class="line">            print(filename)</span><br><span class="line">            filename = decode_str(filename)</span><br><span class="line">            data = part.get_payload(decode=<span class="literal">True</span>)</span><br><span class="line">            abs_filename = os.path.join(savepath, filename)</span><br><span class="line">            attach = open(abs_filename, <span class="string">'wb'</span>)</span><br><span class="line">            attachments.append(filename)</span><br><span class="line">            attach.write(data)</span><br><span class="line">            attach.close()</span><br><span class="line">    <span class="keyword">return</span> attachments</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入邮件地址, 口令和POP3服务器地址:</span></span><br><span class="line">email = <span class="string">'591465908@qq.com'</span></span><br><span class="line">password = <span class="string">''</span></span><br><span class="line">pop3_server = <span class="string">'pop.qq.com'</span></span><br><span class="line">port = <span class="number">995</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接到POP3服务器:</span></span><br><span class="line">server = poplib.POP3_SSL(pop3_server, port)</span><br><span class="line">server.user(email)</span><br><span class="line">server.pass_(password)</span><br><span class="line"></span><br><span class="line"><span class="comment"># stat()返回邮件数量和占用空间:</span></span><br><span class="line">print(<span class="string">'Messages: %s. Size: %s'</span> % server.stat())</span><br><span class="line"><span class="comment"># list()返回所有邮件的编号:</span></span><br><span class="line">resp, mails, octets = server.list()</span><br><span class="line"><span class="comment"># 可以查看返回的列表类似[b'1 82923', b'2 2184', ...]</span></span><br><span class="line">Num_mail = len(mails)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取最新一封邮件, 注意索引号从1开始:</span></span><br><span class="line">index = len(mails)</span><br><span class="line"></span><br><span class="line"><span class="comment">#M_read(index)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    Press = input()</span><br><span class="line">    os.system(<span class="string">'clear'</span>)</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"q"</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> Num_mail == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">"No New E-mails"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        Action(Press)</span><br><span class="line">        print(<span class="string">"index="</span>,index,<span class="string">"; all="</span>,Num_mail)</span><br><span class="line"></span><br><span class="line"><span class="comment"># lines存储了邮件的原始文本的每一行,</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以根据邮件索引号直接从服务器删除邮件:</span></span><br><span class="line"><span class="comment"># server.dele(index)</span></span><br><span class="line"><span class="comment"># 关闭连接:</span></span><br><span class="line">server.quit()</span><br></pre></td></tr></table></figure></div><p>效果：</p><p><a href="https://imgchr.com/i/NrxxGd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/26/NrxxGd.gif" alt="NrxxGd.gif"></a></p><p><a name="g4iaJ"></a></p><h1 id="删除邮件后保存并刷新"><a href="#删除邮件后保存并刷新" class="headerlink" title="删除邮件后保存并刷新"></a>删除邮件后保存并刷新</h1><p>经过几次测试，我发现， 被删除的index并不会重拍，而是就空载那里了， 再次返回查看邮件的时候， 就会出现错误。 因此，最保险的方法，自然是保存和刷新了。同理，如果不保存，只刷新，那么就可以“撤销” 以删除的邮件。</p><p>开始想Action那里加上一个，退出，再重连就好～ <br />但是server套在函数里面刷新的时候会报错， = =这样就麻烦了， 所以直接都在mainloop了- -反正 - -以后应该不会debug什么的了。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> Press == <span class="string">"s"</span>:</span><br><span class="line">    print(<span class="string">"ReFreshing..."</span>)</span><br><span class="line">    server.quit()</span><br><span class="line">    server, resp, mails, octets, Num_mail = Refresh()</span><br></pre></td></tr></table></figure></div><p>删除以后保存</p><p>完整代码</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3.7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> poplib</span><br><span class="line"><span class="keyword">import</span> os, sys, base64</span><br><span class="line"><span class="keyword">from</span> email.parser <span class="keyword">import</span> Parser</span><br><span class="line"><span class="keyword">from</span> email.header <span class="keyword">import</span> decode_header</span><br><span class="line"><span class="keyword">from</span> email.utils <span class="keyword">import</span> parseaddr</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">decode_str</span><span class="params">(s)</span>:</span></span><br><span class="line">    value, charset = decode_header(s)[<span class="number">0</span>]</span><br><span class="line">    <span class="keyword">if</span> charset:</span><br><span class="line">        value = value.decode(charset)</span><br><span class="line">    <span class="keyword">return</span> value</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">print_info</span><span class="params">(msg, indent=<span class="number">0</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> indent == <span class="number">0</span>:</span><br><span class="line">        <span class="keyword">for</span> header <span class="keyword">in</span> [<span class="string">'From'</span>, <span class="string">'To'</span>, <span class="string">'Subject'</span>]:</span><br><span class="line">            value = msg.get(header, <span class="string">''</span>)</span><br><span class="line">            <span class="keyword">if</span> value:</span><br><span class="line">                <span class="keyword">if</span> header==<span class="string">'Subject'</span>:</span><br><span class="line">                    value = decode_str(value)</span><br><span class="line">                <span class="keyword">else</span>:</span><br><span class="line">                    hdr, addr = parseaddr(value)</span><br><span class="line">                    name = decode_str(hdr)</span><br><span class="line">                    value = <span class="string">u'%s &lt;%s&gt;'</span> % (name, addr)</span><br><span class="line">            print(<span class="string">'%s%s: %s'</span> % (<span class="string">'  '</span> * indent, header, value))</span><br><span class="line">    <span class="keyword">if</span> (msg.is_multipart()):</span><br><span class="line">        parts = msg.get_payload()[:<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">for</span> n, part <span class="keyword">in</span> enumerate(parts):</span><br><span class="line">            print(<span class="string">'%spart %s'</span> % (<span class="string">'  '</span> * indent, n))</span><br><span class="line">            print(<span class="string">'%s--------------------'</span> % (<span class="string">'  '</span> * indent))</span><br><span class="line">            print_info(part, indent + <span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        content_type = msg.get_content_type()</span><br><span class="line">        <span class="keyword">if</span> content_type==<span class="string">'text/plain'</span> <span class="keyword">or</span> content_type==<span class="string">'text/html'</span>:</span><br><span class="line">            content = msg.get_payload(decode=<span class="literal">True</span>)</span><br><span class="line">            charset = guess_charset(msg)</span><br><span class="line">            <span class="keyword">if</span> charset:</span><br><span class="line">                content = content.decode(charset)</span><br><span class="line">            print(<span class="string">'%sText: %s'</span> % (<span class="string">'  '</span> * indent, content + <span class="string">'...'</span>))</span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print(<span class="string">'%sAttachment: %s'</span> % (<span class="string">'  '</span> * indent, content_type))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">guess_charset</span><span class="params">(msg)</span>:</span></span><br><span class="line">    charset = msg.get_charset()</span><br><span class="line">    <span class="keyword">if</span> charset <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">        content_type = msg.get(<span class="string">'Content-Type'</span>, <span class="string">''</span>).lower()</span><br><span class="line">        pos = content_type.find(<span class="string">'charset='</span>)</span><br><span class="line">        <span class="keyword">if</span> pos &gt;= <span class="number">0</span>:</span><br><span class="line">            charset = content_type[pos + <span class="number">8</span>:].strip()</span><br><span class="line">    <span class="keyword">return</span> charset</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">grep</span><span class="params">(Str,List)</span>:</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        <span class="keyword">if</span> Str <span class="keyword">in</span> str(i):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">return</span> i</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_attach_name</span><span class="params">(byte_lines)</span>:</span></span><br><span class="line">    str_lines = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> byte_lines:</span><br><span class="line">        str_lines.append(x.decode())</span><br><span class="line">    <span class="comment"># 拼接邮件内容</span></span><br><span class="line">    msg_content = <span class="string">'\n'</span>.join(str_lines)</span><br><span class="line">    <span class="comment"># 把邮件内容解析为Message对象</span></span><br><span class="line">    message = Parser().parsestr(msg_content)</span><br><span class="line">    attachments = []</span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> message.walk():</span><br><span class="line">        filename = part.get_filename()</span><br><span class="line">        <span class="comment">#附件名字</span></span><br><span class="line">        <span class="keyword">if</span> filename:</span><br><span class="line">            <span class="keyword">if</span> <span class="string">"=?UTF-8?"</span> <span class="keyword">in</span> filename:</span><br><span class="line">                filename = base64.b64decode(filename[<span class="number">9</span>:<span class="number">-2</span>]).decode(<span class="string">"utf8"</span>)</span><br><span class="line">            attachments.append(filename)</span><br><span class="line">    <span class="keyword">return</span> attachments</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">M_read</span><span class="params">(index)</span>:</span></span><br><span class="line">    resp, lines, octets = server.retr(index)</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        Attachment = get_attach_name(lines)</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        msg_content = <span class="string">b'\r\n'</span>.join(lines).decode(<span class="string">'utf-8'</span>)</span><br><span class="line">        msg = Parser().parsestr(msg_content)</span><br><span class="line">        print_info(msg)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line">        print(<span class="string">"Attachment:"</span>,Attachment)</span><br><span class="line"><span class="comment">#    try:</span></span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        Date= str(grep(<span class="string">"b'Date:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>)</span><br><span class="line">        From= Decode(str(grep(<span class="string">"b'From:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        To= Decode(str(grep(<span class="string">"b'To:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        Subject= Decode(str(grep(<span class="string">"b'Subject:"</span>,lines)).replace(<span class="string">"b'"</span>,<span class="string">''</span>))</span><br><span class="line">        print(<span class="string">""</span>,From,To,<span class="string">"\n"</span>,Subject,<span class="string">'\n\n'</span>,<span class="string">"this mail are purely composed by img or html"</span>,sep=<span class="string">'\n'</span>)</span><br><span class="line">        print(<span class="string">'\n\n'</span>+Date)</span><br><span class="line">    <span class="keyword">return</span> lines</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Action</span><span class="params">(Press,server)</span>:</span></span><br><span class="line">    attach =<span class="string">""</span></span><br><span class="line">    <span class="keyword">global</span> index</span><br><span class="line">    <span class="keyword">global</span> Num_mail</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"q"</span>:</span><br><span class="line">        server.quit()</span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"7"</span>:</span><br><span class="line">        server.dele(index)</span><br><span class="line">        index -=<span class="number">1</span></span><br><span class="line">        Num_mail -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"9"</span>:</span><br><span class="line">        attach = get_email_content(M_read(index), <span class="string">'.'</span>)</span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"8"</span>:</span><br><span class="line">        index -=<span class="number">1</span></span><br><span class="line">    <span class="keyword">elif</span> Press == <span class="string">"5"</span>:</span><br><span class="line">        index +=<span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> index &lt; <span class="number">0</span>:</span><br><span class="line">        index =<span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> index &gt; Num_mail:</span><br><span class="line">        index -= <span class="number">1</span></span><br><span class="line">    <span class="keyword">if</span> index == <span class="number">0</span>:</span><br><span class="line">        print(<span class="string">"No more new e-mails"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        M_read(index)</span><br><span class="line">    <span class="keyword">return</span> attach</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Decode</span><span class="params">(STR)</span>:</span></span><br><span class="line">    head = <span class="string">"=?gb2312?b?"</span></span><br><span class="line">    tail = <span class="string">"?="</span></span><br><span class="line">    <span class="keyword">if</span> head <span class="keyword">in</span> STR:</span><br><span class="line">        H = STR.find(head) + len(head)</span><br><span class="line">        T = STR.find(tail)</span><br><span class="line">        Result = base64.b64decode(STR[H:T]).decode(<span class="string">"GBK"</span>)</span><br><span class="line">        STR = STR[:H- len(head)] + Result + STR[T+ len(tail):]</span><br><span class="line">    <span class="keyword">return</span> STR</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_email_content</span><span class="params">(byte_lines, savepath)</span>:</span></span><br><span class="line">    str_lines = []</span><br><span class="line">    <span class="keyword">for</span> x <span class="keyword">in</span> byte_lines:</span><br><span class="line">        str_lines.append(x.decode())</span><br><span class="line">    <span class="comment"># 拼接邮件内容</span></span><br><span class="line">    msg_content = <span class="string">'\n'</span>.join(str_lines)</span><br><span class="line">    <span class="comment"># 把邮件内容解析为Message对象</span></span><br><span class="line">    message = Parser().parsestr(msg_content)</span><br><span class="line">    attachments = []</span><br><span class="line">    <span class="keyword">for</span> part <span class="keyword">in</span> message.walk():</span><br><span class="line">        filename = part.get_filename()</span><br><span class="line">        <span class="keyword">if</span> filename:</span><br><span class="line">            print(filename)</span><br><span class="line">            filename = decode_str(filename)</span><br><span class="line">            data = part.get_payload(decode=<span class="literal">True</span>)</span><br><span class="line">            abs_filename = os.path.join(savepath, filename)</span><br><span class="line">            attach = open(abs_filename, <span class="string">'wb'</span>)</span><br><span class="line">            attachments.append(filename)</span><br><span class="line">            attach.write(data)</span><br><span class="line">            attach.close()</span><br><span class="line">    <span class="keyword">return</span> attachments</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Refresh</span><span class="params">()</span>:</span></span><br><span class="line">    server = poplib.POP3_SSL(pop3_server, port)</span><br><span class="line">    server.user(email)</span><br><span class="line">    server.pass_(password)</span><br><span class="line">    resp, mails, octets = server.list()</span><br><span class="line">    <span class="comment"># 可以查看返回的列表类似[b'1 82923', b'2 2184', ...]</span></span><br><span class="line">    Num_mail = len(mails)</span><br><span class="line">    <span class="comment"># 获取最新一封邮件, 注意索引号从1开始:</span></span><br><span class="line">    index = len(mails)</span><br><span class="line">    <span class="keyword">return</span> server, resp, mails, octets, Num_mail</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">INPUT_delay</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">InputTimeoutError</span><span class="params">(Exception)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">interrupted</span><span class="params">(signum, frame)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> InputTimeoutError</span><br><span class="line">  signal.signal(signal.SIGALRM, interrupted)</span><br><span class="line">  signal.alarm(<span class="number">60</span>)</span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    BB = input()</span><br><span class="line">    signal.alarm(<span class="number">0</span>)  <span class="comment"># 读到输入的话重置信号</span></span><br><span class="line">  <span class="keyword">except</span> InputTimeoutError:</span><br><span class="line">    BB = <span class="string">'Fresh'</span></span><br><span class="line">  <span class="keyword">return</span> BB</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入邮件地址, 口令和POP3服务器地址:</span></span><br><span class="line">email = <span class="string">'591465908@qq.com'</span></span><br><span class="line">password = <span class="string">''</span></span><br><span class="line">pop3_server = <span class="string">'pop.qq.com'</span></span><br><span class="line">port = <span class="number">995</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接到POP3服务器:</span></span><br><span class="line">server = poplib.POP3_SSL(pop3_server, port)</span><br><span class="line">server.user(email)</span><br><span class="line">server.pass_(password)</span><br><span class="line"></span><br><span class="line"><span class="comment"># stat()返回邮件数量和占用空间:</span></span><br><span class="line">print(<span class="string">'Messages: %s. Size: %s'</span> % server.stat())</span><br><span class="line"><span class="comment"># list()返回所有邮件的编号:</span></span><br><span class="line">resp, mails, octets = server.list()</span><br><span class="line"><span class="comment"># 可以查看返回的列表类似[b'1 82923', b'2 2184', ...]</span></span><br><span class="line">Num_mail = len(mails)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 获取最新一封邮件, 注意索引号从1开始:</span></span><br><span class="line">index = len(mails)</span><br><span class="line"></span><br><span class="line"><span class="comment">#M_read(index)</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    Press = INPUT_delay()</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"q"</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"Fresh"</span> <span class="keyword">or</span> Press == <span class="string">"f"</span>:</span><br><span class="line">        print(<span class="string">"ReFreshing..."</span>)</span><br><span class="line">        server, resp, mails, octets, Num_mail = Refresh()</span><br><span class="line">    <span class="keyword">if</span> Press == <span class="string">"s"</span>:</span><br><span class="line">        print(<span class="string">"Save &amp; ReFreshing..."</span>)</span><br><span class="line">        server.quit()</span><br><span class="line">        server, resp, mails, octets, Num_mail = Refresh()</span><br><span class="line">    <span class="keyword">if</span> Num_mail == <span class="number">0</span>:</span><br><span class="line">        os.system(<span class="string">'clear'</span>)</span><br><span class="line">        print(<span class="string">"No New E-mails"</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        os.system(<span class="string">'clear'</span>)</span><br><span class="line">        Action(Press,server)</span><br><span class="line">        print(<span class="string">"index="</span>,index,<span class="string">"; all="</span>,Num_mail)</span><br><span class="line"></span><br><span class="line"><span class="comment"># lines存储了邮件的原始文本的每一行,</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 可以根据邮件索引号直接从服务器删除邮件:</span></span><br><span class="line"><span class="comment"># server.dele(index)</span></span><br><span class="line"><span class="comment"># 关闭连接:</span></span><br><span class="line">server.quit()</span><br></pre></td></tr></table></figure></div><p>Gitub 链接： <a href="https://github.com/Karobben/Karobben-Work-Station/blob/master/QQmail_recive.py" target="_blank" rel="noopener">https://github.com/Karobben/Karobben-Work-Station/blob/master/QQmail_recive.py</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>How to build index in one line codes</title>
      <link href="/Blog/build_index.html"/>
      <url>/Blog/build_index.html</url>
      
        <content type="html"><![CDATA[<h1 id="How-to-build-index-in-one-line-codes"><a href="#How-to-build-index-in-one-line-codes" class="headerlink" title="How to build index in one line codes"></a>How to build index in one line codes</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls | awk <span class="string">'&#123;print "["$1"]("$i")"&#125;'</span>| sed <span class="string">'s/\.md]/]/;s/\.md)/\.html)/;/yuque.yml/d;/(summary.html)/d'</span>  &gt; Blog_index.md</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Urwid B站 up主信息实时显示的TUI应用 updating...</title>
      <link href="/Blog/Urwid-Biliboard.html"/>
      <url>/Blog/Urwid-Biliboard.html</url>
      
        <content type="html"><![CDATA[<h1 id="Urwid-B站-up主信息实时显示的TUI应用-updating…"><a href="#Urwid-B站-up主信息实时显示的TUI应用-updating…" class="headerlink" title="Urwid B站 up主信息实时显示的TUI应用 updating…"></a>Urwid B站 up主信息实时显示的TUI应用 updating…</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid, time, sys, ast, requests, json</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BiliSpider</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.online_api = <span class="string">"https://api.bilibili.com/x/web-interface/online"</span>  <span class="comment"># 在线人数</span></span><br><span class="line">        self.video_api = <span class="string">"https://api.bilibili.com/x/web-interface/archive/stat?&amp;aid=%s"</span>    <span class="comment"># 视频信息</span></span><br><span class="line">        self.newlist_api = <span class="string">"https://api.bilibili.com/x/web-interface/newlist?&amp;rid=%s&amp;pn=%s&amp;ps=%s"</span>     <span class="comment"># 最新视频信息</span></span><br><span class="line">        self.region_api = <span class="string">"https://api.bilibili.com/x/web-interface/dynamic/region?&amp;rid=%s&amp;pn=%s&amp;ps=%s"</span>  <span class="comment"># 最新动态信息</span></span><br><span class="line">        self.member_api = <span class="string">"http://space.bilibili.com/ajax/member/GetInfo"</span>  <span class="comment"># 用户信息</span></span><br><span class="line">        self.stat_api = <span class="string">"https://api.bilibili.com/x/relation/stat?vmid=%s"</span>  <span class="comment"># 用户关注数和粉丝总数</span></span><br><span class="line">        self.upstat_api = <span class="string">"https://api.bilibili.com/x/space/upstat?mid=%s"</span>     <span class="comment"># 用户总播放量和总阅读量</span></span><br><span class="line">        self.follower_api = <span class="string">"https://api.bilibili.com/x/relation/followings?vmid=%s&amp;pn=%s&amp;ps=%s"</span>    <span class="comment"># 用户关注信息</span></span><br><span class="line">        self.fans_api = <span class="string">"https://api.bilibili.com/x/relation/followers?vmid=%s&amp;pn=%s&amp;ps=%s"</span>    <span class="comment"># 用户粉丝信息</span></span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_api</span><span class="params">(api_url)</span>:</span></span><br><span class="line">        headers = &#123;</span><br><span class="line">            <span class="string">"Accept"</span>: <span class="string">"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"</span>,</span><br><span class="line">            <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip, deflate, br"</span>,</span><br><span class="line">            <span class="string">"Accept-Language"</span>: <span class="string">"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2"</span>,</span><br><span class="line">            <span class="string">"Host"</span>: <span class="string">"api.bilibili.com"</span>,</span><br><span class="line">            <span class="string">"Referer"</span>: <span class="string">"https://www.bilibili.com/"</span>,</span><br><span class="line">            <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/70.0.3538.77 Safari/537.36"</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        res = requests.get(api_url, headers=headers)</span><br><span class="line">        res_dict = res.json()</span><br><span class="line">        <span class="keyword">return</span> res_dict</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_online</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取在线信息</span></span><br><span class="line"><span class="string">        all_count: 最新投稿</span></span><br><span class="line"><span class="string">        web_online: 在线人数</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        online_dic = BiliSpider.get_api(self.online_api)</span><br><span class="line">        <span class="keyword">return</span> online_dic</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_video_info</span><span class="params">(self, aid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取视频信息</span></span><br><span class="line"><span class="string">        :param aid: 视频id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.video_api %aid)</span><br><span class="line">        <span class="comment"># print(res)</span></span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_newlist_info</span><span class="params">(self, rid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取最新视频信息</span></span><br><span class="line"><span class="string">        :param rid: 二级标题的id (详见tid_info.txt)</span></span><br><span class="line"><span class="string">        :param pn:  页数</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.newlist_api %(rid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_region_info</span><span class="params">(self, rid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取最新视频信息</span></span><br><span class="line"><span class="string">        :param rid: 二级标题的id (详见tid_info.txt)</span></span><br><span class="line"><span class="string">        :param pn:  页数</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.region_api %(rid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_member_info</span><span class="params">(self, mid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取用户信息</span></span><br><span class="line"><span class="string">        :param mid:用户id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        post_data = &#123;</span><br><span class="line">            <span class="string">"crsf"</span>: <span class="string">""</span>,</span><br><span class="line">            <span class="string">"mid"</span>: mid,</span><br><span class="line">        &#125;</span><br><span class="line">        header = &#123;</span><br><span class="line">            <span class="string">"Host"</span>: <span class="string">"space.bilibili.com"</span>,</span><br><span class="line">            <span class="string">"User-Agent"</span>: <span class="string">"Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:63.0) Gecko/20100101 Firefox/63.0"</span>,</span><br><span class="line">            <span class="string">"Accept"</span>: <span class="string">"application/json, text/plain, */*"</span>,</span><br><span class="line">            <span class="string">"Accept-Encoding"</span>: <span class="string">"gzip, deflate, br"</span>,</span><br><span class="line">            <span class="string">"Accept-Language"</span>: <span class="string">"zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2"</span>,</span><br><span class="line">            <span class="string">"Referer"</span>: <span class="string">"https://www.bilibili.com/"</span>,</span><br><span class="line">        &#125;</span><br><span class="line">        res = requests.post(self.member_api, data=post_data, headers=header)</span><br><span class="line">        member_dic = json.dumps(res.json(), ensure_ascii=<span class="literal">False</span>)</span><br><span class="line">        <span class="keyword">return</span> member_dic</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_stat_info</span><span class="params">(self, vmid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户的关注数和粉丝总数</span></span><br><span class="line"><span class="string">        :param vmid: 用户id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.stat_api % vmid)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_upstat_info</span><span class="params">(self, mid)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户的总播放量和总阅读量</span></span><br><span class="line"><span class="string">        :param mid: 用户id</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.upstat_api % mid)</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_follower_info</span><span class="params">(self, vmid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户关注者信息</span></span><br><span class="line"><span class="string">        :param vmid:用户id</span></span><br><span class="line"><span class="string">        :param pn:  页数 最多5页</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.follower_api %(vmid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line">    <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_fans_info</span><span class="params">(self, vmid, pn, ps)</span>:</span></span><br><span class="line">        <span class="string">"""</span></span><br><span class="line"><span class="string">        获取某用户粉丝信息</span></span><br><span class="line"><span class="string">        :param vmid:用户id</span></span><br><span class="line"><span class="string">        :param pn:  页数 最多5页</span></span><br><span class="line"><span class="string">        :param ps:  每页条目数 1-50</span></span><br><span class="line"><span class="string">        :return:</span></span><br><span class="line"><span class="string">        """</span></span><br><span class="line">        res = BiliSpider.get_api(self.fans_api %(vmid, pn, ps))</span><br><span class="line">        <span class="keyword">return</span> res</span><br><span class="line"></span><br><span class="line">bili = BiliSpider()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Bili_v</span><span class="params">(Title,ID)</span>:</span></span><br><span class="line">    ID = str(ID)</span><br><span class="line">    url = <span class="string">"http://api.bilibili.com/archive_stat/stat?aid="</span> + ID</span><br><span class="line">    html = urlopen(url).read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">    d = ast.literal_eval(html)</span><br><span class="line">    Cont = d[<span class="string">'data'</span>]</span><br><span class="line">    View    = str(Cont[<span class="string">'view'</span>])</span><br><span class="line">    Like    = str(Cont[<span class="string">'like'</span>])</span><br><span class="line">    Reply   = str(Cont[<span class="string">'reply'</span>])</span><br><span class="line">    Coin    = str(Cont[<span class="string">'coin'</span>])</span><br><span class="line">    Result = <span class="string">"\n"</span>.join([Title,View, Like, Reply, Coin])</span><br><span class="line">    <span class="keyword">return</span> Result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line">A = <span class="string">'Test'</span></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Refresh</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keypress</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">            <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup_view</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment">#Self infor</span></span><br><span class="line">        mid = <span class="number">393056819</span></span><br><span class="line">        AA = bili.get_member_info(mid)</span><br><span class="line">        粉丝 = urwid.Text(str(bili.get_stat_info(mid)[<span class="string">'data'</span>][<span class="string">'follower'</span>]))</span><br><span class="line">        <span class="comment">#Veido Infor</span></span><br><span class="line">        Title = urwid.Text(<span class="string">"\n"</span>.join([<span class="string">""</span>,<span class="string">"观看量:"</span>,<span class="string">"点赞:"</span>,<span class="string">"回复:"</span>,<span class="string">"硬币:"</span> ]))</span><br><span class="line">        Bv1 = urwid.Text(Bili_v(<span class="string">"Python色差"</span>,<span class="number">86328254</span>))</span><br><span class="line">        Bv2 = urwid.Text(Bili_v(<span class="string">"汪汪洗澡"</span>,<span class="number">89026731</span>))</span><br><span class="line">        Bv3 = urwid.Text(Bili_v(<span class="string">"大生态缸"</span>,<span class="number">61040198</span>))</span><br><span class="line">        Bv4 = urwid.Text(Bili_v(<span class="string">"OneNote记"</span>,<span class="number">44637823</span>))</span><br><span class="line">        Bv5 = urwid.Text(Bili_v(<span class="string">"OneNote2"</span>,<span class="number">45117221</span>))</span><br><span class="line">        self.Vedio_inf = urwid.Columns([Title,Bv1,Bv2,Bv3,Bv4,Bv5])</span><br><span class="line"></span><br><span class="line">        Fan = urwid.AttrWrap( 粉丝,<span class="string">'header'</span>)</span><br><span class="line">        self.Vedio_inf = urwid.AttrWrap(self.Vedio_inf, <span class="string">'body'</span>)</span><br><span class="line"></span><br><span class="line">        self.view = urwid.Padding(self.Vedio_inf, <span class="string">'left'</span>)</span><br><span class="line">        <span class="comment">#self.view = urwid.ListBox(urwid.SimpleListWalker([self.Vedio_inf,urwid.Divider(),self.Vedio_inf]))</span></span><br><span class="line">        self.view = urwid.AttrMap(self.view, <span class="string">'body'</span>)</span><br><span class="line">        self.view = urwid.Filler(self.Vedio_inf, <span class="string">'middle'</span>)</span><br><span class="line">        <span class="comment">#self.view = urwid.Frame(header=粉丝, body=self.Vedio_inf)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.setup_view()</span><br><span class="line">        loop = urwid.MainLoop(</span><br><span class="line">            self.view, palette=[(<span class="string">'body'</span>, <span class="string">'dark cyan'</span>, <span class="string">''</span>)],</span><br><span class="line">            unhandled_input=self.keypress)</span><br><span class="line">        loop.set_alarm_in(<span class="number">1</span>, self.refresh)</span><br><span class="line">        loop.run()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">refresh</span><span class="params">(self, loop=None, data=None)</span>:</span></span><br><span class="line">        self.setup_view()</span><br><span class="line">        loop.widget = self.view</span><br><span class="line">        loop.set_alarm_in(<span class="number">5</span>, self.refresh)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    refresh = Refresh()</span><br><span class="line">    sys.exit(refresh.main())</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NskXIx" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/26/NskXIx.png" alt="NskXIx.png"></a><br>= = <br />实时刷新有了 = =不过排版一加东西就错误= = <br />下次再来</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用Python 写一个日程表</title>
      <link href="/Blog/Python_todolist.html"/>
      <url>/Blog/Python_todolist.html</url>
      
        <content type="html"><![CDATA[<h1>用Python 写一个日程表</h1><p>依赖: urwid;</p><p><a name="6Fm19"></a></p><h1>1 基本框架</h1><p><a name="tRQdB"></a></p><h2 id="main-py"><a class="header-anchor" href="#main-py"></a><a href="http://main.py" target="_blank" rel="noopener">main.py</a></h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line"></span><br><span class="line">txt = urwid.Text((<span class="string">'banner'</span>, <span class="string">u" Hello World "</span>), align=<span class="string">'center'</span>)</span><br><span class="line">map1 = urwid.AttrMap(txt, <span class="string">'streak'</span>)</span><br><span class="line">fill = urwid.Filler(map1)</span><br><span class="line">map2 = urwid.AttrMap(fill, <span class="string">'bg'</span>)</span><br><span class="line">loop = urwid.MainLoop(map2, palette, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsPaV0.png" alt="NsPaV0.png"><br><a name="MuI57"></a></p><h2 id="ToDolist"><a class="header-anchor" href="#ToDolist"></a>ToDolist</h2><p>文本文件, 用tab分隔</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">语文  10  0</span><br><span class="line">数学  10  0</span><br><span class="line">英语  10  0</span><br></pre></td></tr></table></figure></div><p><a name="mEq1j"></a></p><h1>2 读取内容从ToDolist</h1><p>加入下文的第一行, 并在上文的12行, 改成下文第二行</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">TODO = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'r'</span>).read()</span><br><span class="line">txt = urwid.Text((<span class="string">'banner'</span>, TODO), align=<span class="string">'center'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsPtrn.png" alt="NsPtrn.png"><br>当然, 这不是想要效果, 2333. 最好的是用numpy或者pandas来读成表格, matrix 的数据结构, 但是我不想为这么点点东西来费这么大的力气, 所以我就全用list了.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Read_ToDolsit</span><span class="params">()</span>:</span></span><br><span class="line">    TODO = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'r'</span>).read().split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">    Result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> TODO:</span><br><span class="line">        Result += [i.split()]</span><br><span class="line">    <span class="keyword">return</span> Result</span><br></pre></td></tr></table></figure></div><p>这样, 之前的 open, 就直接改成</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TODO = Read_ToDolsit()</span><br></pre></td></tr></table></figure></div><p>输出的TODO变成了:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[[<span class="string">'语文'</span>, <span class="string">'10'</span>, <span class="string">'0'</span>], [<span class="string">'数学'</span>, <span class="string">'10'</span>, <span class="string">'0'</span>], [<span class="string">'英语'</span>, <span class="string">'10'</span>, <span class="string">'0'</span>]]</span><br></pre></td></tr></table></figure></div><p><a name="B3tnr"></a></p><h1>3 放入列表</h1><p>写一个循环读取, 并放入columns, columns 叠入Pile</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">TODO_col</span><span class="params">(TODO)</span>:</span></span><br><span class="line">    Column_list = []</span><br><span class="line">    <span class="keyword">for</span> Sub <span class="keyword">in</span> TODO:</span><br><span class="line">        Sub_list = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> Sub:</span><br><span class="line">            Sub_list += [urwid.Text(i)]</span><br><span class="line">        Column_list += [urwid.Columns(Sub_list)]</span><br><span class="line">    A = urwid.Pile(Column_list)</span><br><span class="line">    <span class="keyword">return</span> A</span><br></pre></td></tr></table></figure></div><p><strong>这样的话, 自动读取结果就是</strong>:<br><img src="https://s1.ax1x.com/2020/06/26/NsPw5T.png" alt="NsPw5T.png"></p><p><strong>增加修改按钮</strong>:<br><img src="https://s1.ax1x.com/2020/06/26/NsPdaV.png" alt="NsPdaV.png"></p><p><br />如何做到按钮对应每一列的操作, 我想的解决方案是,按钮直接操作ToDolist, 然后刷新整个页面. 反正都是小文本, 整个过程都是毫秒级的.<br /></p><p><a name="NHNUy"></a></p><h1>4 添加计数按钮</h1><p>想了好久= = 么有好方法= =只好预写一堆的button signal 放在 另一个页面, 然后丢在list里面 调用= = 唉, 虽然蠢, 但是有效就好.<br /><br><br />不管怎么样- - 反正, 我算是成功了- - 唉… 虽然代码很丑<br /><br><img src="https://s1.ax1x.com/2020/06/26/NsPNbq.gif" alt="NsPNbq.gif"><br><br />这个时候的代码: (非常丑= =)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urwid, sys, buttons</span><br><span class="line"></span><br><span class="line"><span class="comment"># exit the program</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">bottons</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_1P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">0</span>][<span class="number">2</span>] = str(int(List[<span class="number">0</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"> <span class="comment">#    loop.set_alarm_in(1,Setupview)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_1M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">0</span>][<span class="number">2</span>] = str(int(List[<span class="number">0</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_2P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">1</span>][<span class="number">2</span>] = str(int(List[<span class="number">1</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_2M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">1</span>][<span class="number">2</span>] = str(int(List[<span class="number">1</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_3P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">2</span>][<span class="number">2</span>] = str(int(List[<span class="number">2</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_3M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">2</span>][<span class="number">2</span>] = str(int(List[<span class="number">2</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_4P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">3</span>][<span class="number">2</span>] = str(int(List[<span class="number">3</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_4M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">3</span>][<span class="number">2</span>] = str(int(List[<span class="number">3</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_5P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">4</span>][<span class="number">2</span>] = str(int(List[<span class="number">4</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_5M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">4</span>][<span class="number">2</span>] = str(int(List[<span class="number">4</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_6P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">5</span>][<span class="number">2</span>] = str(int(List[<span class="number">5</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_6M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">5</span>][<span class="number">2</span>] = str(int(List[<span class="number">5</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_7P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">6</span>][<span class="number">2</span>] = str(int(List[<span class="number">6</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_7M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">6</span>][<span class="number">2</span>] = str(int(List[<span class="number">6</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_8P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">7</span>][<span class="number">2</span>] = str(int(List[<span class="number">7</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_8M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">7</span>][<span class="number">2</span>] = str(int(List[<span class="number">7</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_9P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">8</span>][<span class="number">2</span>] = str(int(List[<span class="number">8</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_9M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">8</span>][<span class="number">2</span>] = str(int(List[<span class="number">8</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line">Botton_listP = [bottons_1P,bottons_2P,bottons_3P]</span><br><span class="line">Botton_listM = [bottons_1M,bottons_2M,bottons_3M]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_resbond</span><span class="params">(a)</span>:</span></span><br><span class="line">    TODO = Read_ToDolsit()</span><br><span class="line">    fill = urwid.Filler(urwid.Pile([TODO_col(TODO),Fresh]))</span><br><span class="line">    loop.widget = fill</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Botton is done</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">List2str</span><span class="params">(List)</span>:</span></span><br><span class="line">    Result2 = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        Result2 += <span class="string">'\t'</span>.join(i) + <span class="string">'\n'</span></span><br><span class="line">    <span class="keyword">return</span> Result2</span><br><span class="line"></span><br><span class="line"><span class="comment"># reading Task from ToDoList</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Read_ToDolsit</span><span class="params">()</span>:</span></span><br><span class="line">    TODO = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'r'</span>).read().split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">    Result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> TODO:</span><br><span class="line">        Result += [i.split()]</span><br><span class="line">    <span class="keyword">return</span> Result</span><br><span class="line"></span><br><span class="line"><span class="comment">#bottons_resbond = bottons_resbond("P_line1")</span></span><br><span class="line"><span class="comment">#A = urwid.Columns([urwid.Text(TODO[0][0]),urwid.Text(TODO[0][1]),urwid.Text(TODO[0][2])])</span></span><br><span class="line"><span class="comment">#A = urwid.Pile([A,A])</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">TODO_col</span><span class="params">(TODO)</span>:</span></span><br><span class="line">    Num = <span class="number">0</span></span><br><span class="line">    Column_list = []</span><br><span class="line">    <span class="keyword">for</span> Sub <span class="keyword">in</span> TODO:</span><br><span class="line">        Num += <span class="number">1</span></span><br><span class="line">        Sub_list = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> Sub:</span><br><span class="line">            Sub_list += [urwid.Text(i)]</span><br><span class="line">        <span class="comment"># bottons:</span></span><br><span class="line">        locals()[<span class="string">"P_line"</span>+str(Num)]= urwid.Button(<span class="string">u'+'</span>)</span><br><span class="line">        locals()[<span class="string">"M_line"</span>+str(Num)]= urwid.Button(<span class="string">u'-'</span>)</span><br><span class="line">        <span class="comment"># resbond:</span></span><br><span class="line">        urwid.connect_signal(locals()[<span class="string">"P_line"</span>+str(Num)], <span class="string">'click'</span>, Botton_listP[Num<span class="number">-1</span>])</span><br><span class="line">        urwid.connect_signal(locals()[<span class="string">"M_line"</span>+str(Num)], <span class="string">'click'</span>, Botton_listM[Num<span class="number">-1</span>])</span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        Sub_list += [locals()[<span class="string">"P_line"</span>+str(Num)],locals()[<span class="string">"M_line"</span>+str(Num)]]</span><br><span class="line">        Column_list += [urwid.Columns(Sub_list)]</span><br><span class="line">    A = urwid.Pile(Column_list)</span><br><span class="line">    <span class="keyword">return</span> A</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Setupview</span><span class="params">()</span>:</span></span><br><span class="line">    TODO = Read_ToDolsit()</span><br><span class="line">    <span class="comment">#Fresh = urwid.Button('fresh')</span></span><br><span class="line">    fill = urwid.Filler(TODO_col(TODO))</span><br><span class="line">    <span class="keyword">return</span> fill</span><br><span class="line">TODO = Read_ToDolsit()</span><br><span class="line">fill = urwid.Filler(TODO_col(TODO))<span class="comment">#Setupview()</span></span><br><span class="line">loop = urwid.MainLoop(fill, palette, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><a name="iWnus"></a></p><h1>5 将数字改成长条</h1><p>我们把按钮左移, 然后加一个10个单位的进度条, 底色为红色</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Bar_line</span><span class="params">(Sub,Bar_Max=<span class="number">20</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> int(Sub[<span class="number">2</span>])&lt;= int(Sub[<span class="number">1</span>]):</span><br><span class="line">        Bar_G = int(int(Sub[<span class="number">2</span>])*Bar_Max/int(Sub[<span class="number">1</span>]))</span><br><span class="line">        Bar_R = Bar_Max - Bar_G</span><br><span class="line">        Bar_B = <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> int(Sub[<span class="number">2</span>]) &gt; int(Sub[<span class="number">1</span>]):</span><br><span class="line">        Bar_G = Bar_Max<span class="number">-1</span></span><br><span class="line">        Bar_R = <span class="number">1</span></span><br><span class="line">        Bar_B = int((int(Sub[<span class="number">2</span>])-int(Sub[<span class="number">1</span>]))*Bar_Max/int(Sub[<span class="number">1</span>]))</span><br><span class="line">        <span class="comment">#print(int((int(Sub[2])-int(Sub[1]))*Bar_Max/int(Sub[1])))</span></span><br><span class="line">    Sub_bar  = [(<span class="string">'fixed'</span>,<span class="number">40</span>,urwid.Text([(<span class="string">'Green_BG'</span>, <span class="string">" "</span>* Bar_G),(<span class="string">'Red_BG'</span>, <span class="string">" "</span>*Bar_R),(<span class="string">'Blue_BG'</span>, <span class="string">" "</span>*Bar_B)]))]</span><br><span class="line">    <span class="keyword">return</span> Sub_bar</span><br></pre></td></tr></table></figure></div><p>到此, 最简单的日程表, 就已经做好啦!</p><p><img src="https://s1.ax1x.com/2020/06/26/NsPBPU.png" alt="NsPBPU.png"><br>完全代码:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urwid, sys, buttons</span><br><span class="line"></span><br><span class="line"><span class="comment"># exit the program</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">bottons</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_1P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">0</span>][<span class="number">2</span>] = str(int(List[<span class="number">0</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"> <span class="comment">#    loop.set_alarm_in(1,Setupview)</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_1M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">0</span>][<span class="number">2</span>] = str(int(List[<span class="number">0</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_2P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">1</span>][<span class="number">2</span>] = str(int(List[<span class="number">1</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_2M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">1</span>][<span class="number">2</span>] = str(int(List[<span class="number">1</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_3P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">2</span>][<span class="number">2</span>] = str(int(List[<span class="number">2</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_3M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">2</span>][<span class="number">2</span>] = str(int(List[<span class="number">2</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_4P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">3</span>][<span class="number">2</span>] = str(int(List[<span class="number">3</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_4M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">3</span>][<span class="number">2</span>] = str(int(List[<span class="number">3</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_5P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">4</span>][<span class="number">2</span>] = str(int(List[<span class="number">4</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_5M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">4</span>][<span class="number">2</span>] = str(int(List[<span class="number">4</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_6P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">5</span>][<span class="number">2</span>] = str(int(List[<span class="number">5</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_6M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">5</span>][<span class="number">2</span>] = str(int(List[<span class="number">5</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_7P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">6</span>][<span class="number">2</span>] = str(int(List[<span class="number">6</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_7M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">6</span>][<span class="number">2</span>] = str(int(List[<span class="number">6</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_8P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">7</span>][<span class="number">2</span>] = str(int(List[<span class="number">7</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_8M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">7</span>][<span class="number">2</span>] = str(int(List[<span class="number">7</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_9P</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">8</span>][<span class="number">2</span>] = str(int(List[<span class="number">8</span>][<span class="number">2</span>])+<span class="number">1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">bottons_9M</span><span class="params">(button)</span>:</span></span><br><span class="line">    List = Read_ToDolsit()</span><br><span class="line">    List[<span class="number">8</span>][<span class="number">2</span>] = str(int(List[<span class="number">8</span>][<span class="number">2</span>])<span class="number">-1</span>)</span><br><span class="line">    Str_list = List2str(List)</span><br><span class="line">    F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">    F.write(Str_list)</span><br><span class="line">    F.close()</span><br><span class="line">    <span class="comment"># refresh</span></span><br><span class="line">    loop.widget = Setupview()</span><br><span class="line"></span><br><span class="line">Botton_listP = [bottons_1P,bottons_2P,bottons_3P,bottons_4P,bottons_5P,bottons_6P,bottons_7P,bottons_8P,bottons_9P]</span><br><span class="line">Botton_listM = [bottons_1M,bottons_2M,bottons_3M,bottons_4M,bottons_5M,bottons_6M,bottons_7M,bottons_8M,bottons_9M]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">Botton is done</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">List2str</span><span class="params">(List)</span>:</span></span><br><span class="line">    Result2 = <span class="string">""</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">        Result2 += <span class="string">'\t'</span>.join(i) + <span class="string">'\n'</span></span><br><span class="line">    <span class="keyword">return</span> Result2</span><br><span class="line"></span><br><span class="line"><span class="comment"># reading Task from ToDoList</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Read_ToDolsit</span><span class="params">()</span>:</span></span><br><span class="line">    TODO = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'r'</span>).read().split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">    Result = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> TODO:</span><br><span class="line">        Result += [i.split()]</span><br><span class="line">    <span class="keyword">return</span> Result</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Bar_line</span><span class="params">(Sub,Bar_Max=<span class="number">20</span>)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> int(Sub[<span class="number">2</span>])&lt;= int(Sub[<span class="number">1</span>]):</span><br><span class="line">        Bar_G = int(int(Sub[<span class="number">2</span>])*Bar_Max/int(Sub[<span class="number">1</span>]))</span><br><span class="line">        Bar_R = Bar_Max - Bar_G</span><br><span class="line">        Bar_B = <span class="number">0</span></span><br><span class="line">    <span class="keyword">elif</span> int(Sub[<span class="number">2</span>]) &gt; int(Sub[<span class="number">1</span>]):</span><br><span class="line">        Bar_G = Bar_Max<span class="number">-1</span></span><br><span class="line">        Bar_R = <span class="number">1</span></span><br><span class="line">        Bar_B = int((int(Sub[<span class="number">2</span>])-int(Sub[<span class="number">1</span>]))*Bar_Max/int(Sub[<span class="number">1</span>]))</span><br><span class="line">        <span class="comment">#print(int((int(Sub[2])-int(Sub[1]))*Bar_Max/int(Sub[1])))</span></span><br><span class="line">    Sub_bar  = [(<span class="string">'fixed'</span>,<span class="number">40</span>,urwid.Text([(<span class="string">'Green_BG'</span>, <span class="string">" "</span>* Bar_G),(<span class="string">'Red_BG'</span>, <span class="string">" "</span>*Bar_R),(<span class="string">'Blue_BG'</span>, <span class="string">" "</span>*Bar_B)]))]</span><br><span class="line">    <span class="keyword">return</span> Sub_bar</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">TODO_col</span><span class="params">(TODO)</span>:</span></span><br><span class="line">    Num = <span class="number">0</span></span><br><span class="line">    Column_list = []</span><br><span class="line">    <span class="keyword">for</span> Sub <span class="keyword">in</span> TODO:</span><br><span class="line">        Num += <span class="number">1</span></span><br><span class="line">        Sub_list = []</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> Sub:</span><br><span class="line">            Sub_list += [urwid.Text(i)]</span><br><span class="line">        <span class="comment"># bottons:</span></span><br><span class="line">        locals()[<span class="string">"P_line"</span>+str(Num)]= urwid.Button(<span class="string">u'+'</span>)</span><br><span class="line">        locals()[<span class="string">"M_line"</span>+str(Num)]= urwid.Button(<span class="string">u'-'</span>)</span><br><span class="line">        <span class="comment"># resbond:</span></span><br><span class="line">        urwid.connect_signal(locals()[<span class="string">"P_line"</span>+str(Num)], <span class="string">'click'</span>, Botton_listP[Num<span class="number">-1</span>])</span><br><span class="line">        urwid.connect_signal(locals()[<span class="string">"M_line"</span>+str(Num)], <span class="string">'click'</span>, Botton_listM[Num<span class="number">-1</span>])</span><br><span class="line">        <span class="comment">#</span></span><br><span class="line">        Sub_list = [(<span class="string">'fixed'</span>,<span class="number">5</span>,locals()[<span class="string">"P_line"</span>+str(Num)]),(<span class="string">'fixed'</span>,<span class="number">5</span>,locals()[<span class="string">"M_line"</span>+str(Num)])] + Sub_list</span><br><span class="line">        <span class="comment"># Bar determination:</span></span><br><span class="line">        Sub_bar  = Bar_line(Sub)</span><br><span class="line">        Column_list += [urwid.Columns(Sub_list + Sub_bar)]</span><br><span class="line">    A = urwid.Pile(Column_list)</span><br><span class="line">    <span class="keyword">return</span> A</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Setupview</span><span class="params">()</span>:</span></span><br><span class="line">    TODO = Read_ToDolsit()</span><br><span class="line">    <span class="comment">#Fresh = urwid.Button('fresh')</span></span><br><span class="line">    fill = urwid.Filler(TODO_col(TODO))</span><br><span class="line">    <span class="keyword">return</span> fill</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'Red_BG'</span>, <span class="string">'dark red'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'Green_BG'</span>, <span class="string">'dark green'</span>, <span class="string">'dark green'</span>),</span><br><span class="line">    (<span class="string">'Blue_BG'</span>, <span class="string">'dark blue'</span>, <span class="string">'dark blue'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fill = Setupview()</span><br><span class="line">loop = urwid.MainLoop(fill, palette, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><a name="VlQY3"></a></p><h1>6 加一個title＆ Clean 按鈕</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">BigTxt</span><span class="params">(TXT)</span>:</span></span><br><span class="line">    txt = urwid.BigText(</span><br><span class="line">                (<span class="string">'banner'</span>,TXT), urwid.font.HalfBlock5x4Font())</span><br><span class="line">    view = urwid.Padding(txt, <span class="string">'center'</span>, width=<span class="string">'clip'</span>)</span><br><span class="line">    view = urwid.AttrMap(view, <span class="string">'Blue_BG'</span>)</span><br><span class="line">    <span class="keyword">return</span> view<span class="comment">#urwid.Columns([view])</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Button_C</span><span class="params">()</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">Clean</span><span class="params">(botton)</span>:</span></span><br><span class="line">        List = Read_ToDolsit()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">            i[<span class="number">2</span>] = str(<span class="number">0</span>)</span><br><span class="line">        Str_list = List2str(List)</span><br><span class="line">        F = open(sys.path[<span class="number">0</span>]+<span class="string">"/ToDolist"</span>,<span class="string">'w'</span>)</span><br><span class="line">        F.write(Str_list)</span><br><span class="line">        F.close()</span><br><span class="line">        <span class="comment"># refresh</span></span><br><span class="line">        loop.widget = Setupview()</span><br><span class="line">    Button_clean = urwid.Button(<span class="string">u"Clear"</span>)</span><br><span class="line">    urwid.connect_signal(Button_clean, <span class="string">'click'</span>, Clean)</span><br><span class="line">    <span class="keyword">return</span> Button_clean</span><br></pre></td></tr></table></figure></div><p>Setview改一下:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Setupview</span><span class="params">()</span>:</span></span><br><span class="line">    Header = BigTxt(<span class="string">"What's Next???"</span>)</span><br><span class="line">    TODO = Read_ToDolsit()</span><br><span class="line">    ToDOcol_list = TODO_col(TODO)</span><br><span class="line">    Button_clean = Button_C()</span><br><span class="line">    ToDoWidget = urwid.Pile([Header] + ToDOcol_list+[Button_clean])</span><br><span class="line">    fill = urwid.Filler(ToDoWidget)</span><br><span class="line">    <span class="keyword">return</span> fill</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsPDGF.gif" alt="NsPDGF.gif"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>刪除第map的reads</title>
      <link href="/Blog/fasta_counts_ex.html"/>
      <url>/Blog/fasta_counts_ex.html</url>
      
        <content type="html"><![CDATA[<h1 id="刪除第map的reads"><a href="#刪除第map的reads" class="headerlink" title="刪除第map的reads"></a>刪除第map的reads</h1><h1 id="1-讀取counts文件並篩選"><a href="#1-讀取counts文件並篩選" class="headerlink" title="1. 讀取counts文件並篩選"></a>1. 讀取counts文件並篩選</h1><h2 id="1-1-頻率分佈統計"><a href="#1-1-頻率分佈統計" class="headerlink" title="1.1 頻率分佈統計"></a>1.1 頻率分佈統計</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Trintiy 腳本獲取的counts文件</span></span><br><span class="line">A &lt;- read.csv(<span class="string">"/media/ken/Data/Yan/RNA-seq/report/4.exprs//All_isoform.COUNT.matrix.anno.xls"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line">head(A)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">X.ID1                       ID2 Liver_CK Intest_CK Muscle_CK Liver_30 Intest_30 Muscle_30 Liver_75 Intest_75 Muscle_75</span><br><span class="line">1 TRINITY_DN100000_c1_g1 TRINITY_DN100000_c1_g1_i1      212       331        89      128       401       223      310       407       130</span><br><span class="line">2 TRINITY_DN100001_c0_g1 TRINITY_DN100001_c0_g1_i1       35      1244         1       14       609       261       12      1085         0</span><br><span class="line">3 TRINITY_DN100002_c0_g1 TRINITY_DN100002_c0_g1_i1       27         4         2       38         7         3       19        16         7</span><br><span class="line">4 TRINITY_DN100002_c1_g1 TRINITY_DN100002_c1_g1_i1       23         2        34        4         6        18        8         5        51</span><br><span class="line">5 TRINITY_DN100002_c2_g2 TRINITY_DN100002_c2_g2_i1        0         1         0        0         0         0        1         1         0</span><br><span class="line">6 TRINITY_DN100002_c2_g3 TRINITY_DN100002_c2_g3_i1        0         0        40        0         0        62        0         1        84</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">row.names(A)=A[[<span class="number">2</span>]]</span><br><span class="line">A$Sum = rowSums(A[-c(<span class="number">1</span>:<span class="number">2</span>)])</span><br></pre></td></tr></table></figure></div><h2 id="1-2-繪圖"><a href="#1-2-繪圖" class="headerlink" title="1.2 繪圖"></a>1.2 繪圖</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line"></span><br><span class="line">ggplot(A[c(<span class="string">"ID2"</span>,<span class="string">"Sum"</span>)])+ geom_density(aes(x=Sum)) + xlim(c(<span class="number">0</span>,<span class="number">25</span>)) + theme_linedraw()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/Chmd1WI8z3TFjfX.png" alt="test"><br>如圖所示， 大部分的hit總和小於等於3。<br>應爲有9個樣本， 所以我們把閾值設置在10，則：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">A_sub = A[which(A$Sum&gt;<span class="number">10</span>),]</span><br><span class="line">paste(round((nrow(A_sub)/nrow(A))*<span class="number">100</span>,<span class="number">2</span>),<span class="string">"%"</span>,sep=<span class="string">""</span>)</span><br></pre></td></tr></table></figure></div><p>可知， 剩餘<code>&quot;52.86%%&quot;</code>的reads被保存了</p><p>輸出ID：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">write.table(A_sub[[<span class="number">2</span>]],<span class="string">"filt.list"</span>,row.names = <span class="literal">F</span>,quote=<span class="literal">F</span>,col.names=<span class="literal">F</span>)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ggplot畫斷層圖</title>
      <link href="/Blog/ggplot_split.html"/>
      <url>/Blog/ggplot_split.html</url>
      
        <content type="html"><![CDATA[<h1 id="ggplot畫斷層圖"><a href="#ggplot畫斷層圖" class="headerlink" title="ggplot畫斷層圖"></a>ggplot畫斷層圖</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">data(cars)</span><br><span class="line">cars[<span class="number">1</span>,<span class="number">2</span>] =<span class="number">100000</span></span><br><span class="line"></span><br><span class="line">p &lt;- ggplot(cars,aes(x=speed,y=dist)) + geom_bar(stat=<span class="string">'identity'</span>)</span><br></pre></td></tr></table></figure></div><p>通過patchwork， 拼接得到想要的圖</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">p1 &lt;- p + coord_cartesian(ylim = c(<span class="number">0</span>,<span class="number">400</span>))</span><br><span class="line">p2 &lt;- p + coord_cartesian(ylim = c(<span class="number">99998</span>,<span class="number">100020</span>))+ theme(axis.text.x = element_blank(), axis.title = element_blank(), axis.ticks.x = element_blank())</span><br><span class="line">layout &lt;- <span class="string">'A\nB\nB\nB'</span></span><br><span class="line">p2/p1 + plot_layout(design = layout)</span><br></pre></td></tr></table></figure></div><table><thead><tr><th>原圖</th><th>拼接圖</th></tr></thead><tbody><tr><td><a href="https://imgchr.com/i/tbJxSI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/11/tbJxSI.png" alt="tbJxSI.png"></a></td><td><img src="https://i.loli.net/2020/06/11/bHMgopUWjXSDNAh.png" alt="2"></td></tr></tbody></table><h1 id="函數封裝"><a href="#函數封裝" class="headerlink" title="函數封裝"></a>函數封裝</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SplitBar &lt;-  <span class="keyword">function</span>(p, Y1,Y2,Y3, Y0=<span class="number">0</span>,R=c(<span class="number">1</span>,<span class="number">1</span>))&#123;</span><br><span class="line">  Lay = c(rep(<span class="string">"A"</span>,R[<span class="number">1</span>]),rep(<span class="string">"B"</span>,R[<span class="number">2</span>]))</span><br><span class="line">  layout=<span class="string">""</span></span><br><span class="line">  <span class="keyword">for</span>( i <span class="keyword">in</span> Lay)&#123;</span><br><span class="line">    layout=paste(layout,i,sep=<span class="string">"\n"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">  p1 &lt;- p +  coord_cartesian(ylim = c(Y2,Y3))+</span><br><span class="line">    theme(axis.text.x = element_blank(),</span><br><span class="line">    axis.title = element_blank(), axis.ticks.x = element_blank(),</span><br><span class="line">    legend.position =   <span class="string">'none'</span>)</span><br><span class="line">  p2 &lt;- p +  coord_cartesian(ylim = c(Y0,Y1))+ theme(title = element_blank(), plot.title = element_blank())</span><br><span class="line">  p1/p2 + plot_layout(design = layout)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">SplitBar(p,<span class="number">450</span>,<span class="number">99998</span>,<span class="number">100011</span>,<span class="number">0</span>,c(<span class="number">1</span>,<span class="number">10</span>))</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p &lt;- ggplot(cars,aes(x=speed,y=dist)) + geom_bar(,fill=cars$speed,stat=<span class="string">'identity'</span>) +</span><br><span class="line">  theme_light()+ ggtitle(<span class="string">'哈哈哈哈'</span>) + theme( plot.title  = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">SplitBar(p,<span class="number">450</span>,<span class="number">99998</span>,<span class="number">100021</span>,<span class="number">0</span>,c(<span class="number">1</span>,<span class="number">5</span>))</span><br></pre></td></tr></table></figure></div><table><thead><tr><th>原圖</th><th>拼接圖</th></tr></thead><tbody><tr><td><a href="https://imgchr.com/i/tbUS61" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/11/tbUS61.md.png" alt="tbUS61.md.png"></a></td><td><a href="https://imgchr.com/i/tbUCm6" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/11/tbUCm6.md.png" alt="tbUCm6.md.png"></a></td></tr></tbody></table><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>KEGG result visualization by ggplot</title>
      <link href="/Blog/ggplot_KEGG.html"/>
      <url>/Blog/ggplot_KEGG.html</url>
      
        <content type="html"><![CDATA[<h1 id="KEGG-result-visualization-by-ggplot"><a href="#KEGG-result-visualization-by-ggplot" class="headerlink" title="KEGG result visualization by ggplot"></a>KEGG result visualization by ggplot</h1><p>用ggplot画KEGG结果</p><h1 id="Data"><a href="#Data" class="headerlink" title="Data"></a>Data</h1><p>Before running the codes, I’d like to have a brief introduces about my data.</p><p>As you can see codes below, <code>List</code> has all files I need.<br>Take <code>Intest_30_vs_Intest_75</code> as an example:</p><table><thead><tr><th align="center">#KEGGid</th><th align="center">KEGGdescription</th><th align="center">KEGGclass</th><th align="center">KEGGsubclass</th><th align="center">Oddsratio</th><th align="center">p-value</th><th align="center">q-value</th><th align="center">Gene_numbers</th></tr></thead><tbody><tr><td align="center">04610</td><td align="center">Complement and coagulation cascades</td><td align="center">Organismal Systems</td><td align="center">Immune system</td><td align="center">11.7158541941</td><td align="center">6.30141083687e-10</td><td align="center">1.18731846295e-07</td><td align="center">14</td></tr><tr><td align="center">04977</td><td align="center">Vitamin digestion and absorption</td><td align="center">Organismal Systems</td><td align="center">Digestive system</td><td align="center">11.1739766082</td><td align="center">0.000269773611998</td><td align="center">0.0254155139724</td><td align="center">5</td></tr><tr><td align="center">04974</td><td align="center">Protein digestion and absorption</td><td align="center">Organismal Systems</td><td align="center">Digestive system</td><td align="center">3.73319892473</td><td align="center">0.000445170135803</td><td align="center">0.0279598085294</td><td align="center">11</td></tr></tbody></table><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">List = c(<span class="string">'Intest_30_vs_Intest_75'</span>,<span class="string">'Intest_CK_vs_Intest_30'</span>,<span class="string">'Intest_CK_vs_Intest_75'</span>,<span class="string">'Liver_30_vs_Liver_75'</span>,<span class="string">'Liver_CK_vs_Liver_30'</span>,<span class="string">'Liver_CK_vs_Liver_75'</span>,<span class="string">'Muscle_30_vs_Muscle_75'</span>,<span class="string">'Muscle_CK_vs_Muscle_30'</span>,<span class="string">'Muscle_CK_vs_Muscle_75'</span>)</span><br><span class="line"></span><br><span class="line">TB = data.frame()</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> List)&#123;</span><br><span class="line">  A &lt;- read.table(paste(<span class="string">"../"</span>,i,<span class="string">"/kegg_annotation/Diff_exprs.KEGG_enrich.lst.network"</span>, sep = <span class="string">""</span>), sep = <span class="string">'\t'</span>)</span><br><span class="line">  A$Group=i</span><br><span class="line">  print(dim(A))</span><br><span class="line">  TB = rbind(TB,A)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TB$SubG = <span class="string">"Intest"</span></span><br><span class="line">TB$SubG[grep( <span class="string">"Muscle"</span>, TB$Group)] = <span class="string">"Muscle"</span></span><br><span class="line">TB$SubG[grep( <span class="string">"Liver"</span>, TB$Group)]  = <span class="string">"Liver"</span></span><br><span class="line"><span class="comment"># KEGG Dots</span></span><br><span class="line">p1&lt;- ggplot(TB)+ geom_point(aes(x=Group,y=V2,size=V8,color=V6)) +</span><br><span class="line">     theme(axis.text.x =  element_text(angle = <span class="number">45</span>,hjust = <span class="number">1</span>)) +</span><br><span class="line">     facet_grid(~SubG, scales = <span class="string">'free'</span>)</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot(TB)+ geom_point(aes(x=Group,y=V2,size=V8,color=V6)) +</span><br><span class="line">      theme(axis.text.x =  element_text(angle = <span class="number">45</span>,hjust = <span class="number">1</span>), strip.text.y = element_text(size=<span class="number">12</span>, face=<span class="string">"bold"</span>, angle = <span class="number">0</span>), strip.background.y = element_blank())  +</span><br><span class="line">      facet_grid(V3~SubG, scales = <span class="string">'free'</span>, space = <span class="string">'free'</span>)</span><br><span class="line"></span><br><span class="line">p3 &lt;- ggplot(TB)+ geom_point(aes(x=Group,y=V2,size=V8,color=V6)) +</span><br><span class="line">      theme(axis.text.x =  element_text(angle = <span class="number">45</span>,hjust = <span class="number">1</span>), strip.text.y = element_text(size=<span class="number">12</span>, face=<span class="string">"bold"</span>, angle = <span class="number">0</span>), strip.background.y = element_blank())  +</span><br><span class="line">      facet_grid(V4~SubG, scales = <span class="string">'free'</span>, space = <span class="string">'free'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># KEGG subclass_bar</span></span><br><span class="line">p4 &lt;- ggplot(TB)+ geom_bar(aes(x=V3,fill=Group), ,position = <span class="string">'dodge'</span>) +</span><br><span class="line">      theme(axis.text.x =  element_text(angle = <span class="number">45</span>,hjust = <span class="number">1</span>))+</span><br><span class="line">      facet_wrap(~SubG, scales = <span class="string">'free'</span>)</span><br><span class="line">LL &lt;- <span class="string">'A</span></span><br><span class="line"><span class="string">A</span></span><br><span class="line"><span class="string">A</span></span><br><span class="line"><span class="string">A</span></span><br><span class="line"><span class="string">B'</span></span><br><span class="line">p2+p4  +plot_layout(design = LL)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/C2H9jhuJfz4MX6V.jpg" alt="Re_tmp"></p><h1 id="More-complicate-plot"><a href="#More-complicate-plot" class="headerlink" title="More complicate plot"></a>More complicate plot</h1><p>Functions <code>TreePlot</code> and <code>LS_judg</code> could be found at: <a href="https://karobben.github.io/Blog/ggplot_hclust.html">Blog</a>/<a href="https://www.yuque.com/liuwenkan/blog/ggplot_hclust" target="_blank" rel="noopener">Yueque</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line">clust_TB &lt;- reshape(TB[c(<span class="string">"V4"</span>,<span class="string">"V8"</span>,<span class="string">"Group"</span>)],timevar=<span class="string">'Group'</span>, idvar=c(<span class="string">'V4'</span>),direction=<span class="string">'wide'</span>)</span><br><span class="line">row.names(clust_TB)=clust_TB[[<span class="number">1</span>]]</span><br><span class="line">clust_TB= clust_TB[-<span class="number">1</span>]</span><br><span class="line">clust_TB[is.na(clust_TB)] = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">hc &lt;- hclust(dist(clust_TB))</span><br><span class="line">dendr    &lt;- dendro_data(hc, type=<span class="string">"rectangle"</span>) <span class="comment"># convert for ggplot</span></span><br><span class="line">dendr$labels$cluster &lt;- TB$V3[match(dendr$labels$label,TB$V4)]</span><br><span class="line"><span class="comment"># plot the dendrogram; note use of color=cluster in geom_text(...)</span></span><br><span class="line">p_tree &lt;- ggplot() +</span><br><span class="line">  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">  geom_text(data=label(dendr), aes(x, y, label=label, hjust=<span class="number">0</span>, color=cluster),</span><br><span class="line">           size=<span class="number">3</span>) +</span><br><span class="line">  coord_flip() + <span class="comment">#scale_y_reverse(expand=c(0.2, 0)) +</span></span><br><span class="line">  theme(axis.line.y=element_blank(),</span><br><span class="line">        axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.y=element_blank(),</span><br><span class="line">        axis.title.y=element_blank(),</span><br><span class="line">        panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">        panel.grid=element_blank())</span><br><span class="line"></span><br><span class="line">TB$V4 = factor(TB$V4,levels(dendr$labels$label))</span><br><span class="line">TB = TB[order(TB$V4),]</span><br><span class="line">TB$V2 = factor(TB$V2,levels=(unique(TB$V2)))</span><br><span class="line"></span><br><span class="line">TB_mbar = data.frame(table(unique(TB[c(<span class="string">"V2"</span>,<span class="string">"V4"</span>)])$V4))</span><br><span class="line">TB_mbar$hei = TB_mbar$Freq[<span class="number">1</span>]/<span class="number">2</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">2</span>:nrow(TB_mbar)))&#123;</span><br><span class="line">  TB_mbar$hei[i] =sum(TB_mbar$Freq[<span class="number">1</span>:i-<span class="number">1</span>])+ (TB_mbar$Freq[i]/<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">Width_tree = TB_mbar$hei</span><br><span class="line">den_2 &lt;- TreePlot(dendr, Width_tree)</span><br><span class="line"></span><br><span class="line">Result = c()</span><br><span class="line">C_list=c(<span class="string">'#178c60'</span>,<span class="string">'#B4292C'</span>)</span><br><span class="line">TB_mbar = data.frame(table(TB$V4))</span><br><span class="line">Num = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> TB_mbar$Freq)&#123;</span><br><span class="line">  Result = c(Result,rep(C_list[Num%%<span class="number">2</span>+<span class="number">1</span>],i))</span><br><span class="line">  Num = Num +<span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">p_dot &lt;- ggplot(TB)+ geom_point(aes(x=Group,y=V2,size=V8,color=V6)) +</span><br><span class="line">              labs(y=<span class="string">"Pathway"</span>)+</span><br><span class="line">              theme(axis.text.x =  element_text(angle = <span class="number">45</span>,hjust = <span class="number">1</span>),</span><br><span class="line">                axis.text = element_text(size=<span class="number">10</span>),</span><br><span class="line">                strip.text.y = element_text(size=<span class="number">12</span>, face=<span class="string">"bold"</span>, angle = <span class="number">0</span>),</span><br><span class="line">                strip.background.y = element_blank(),</span><br><span class="line">                legend.position=<span class="string">'left'</span>,</span><br><span class="line">                panel.background = element_blank(),</span><br><span class="line">                panel.grid.major= element_line(linetype=<span class="number">2</span>,color=<span class="string">'grey'</span>),   </span><br><span class="line">                panel.grid.minor= element_blank())+   </span><br><span class="line">              geom_tile(aes(x=<span class="number">10</span>,y=V2), fill= Result)+</span><br><span class="line">              scale_color_gradient(low = <span class="string">"salmon"</span>,high = <span class="string">"steelblue"</span>)</span><br><span class="line"></span><br><span class="line">p_tree &lt;- ggplot() +</span><br><span class="line">          geom_segment(data=segment(den_2), aes(x=x, y=y, xend=xend,</span><br><span class="line">            yend=yend)) +</span><br><span class="line">          geom_text(data=label(dendr), aes(Width_tree, y,</span><br><span class="line">            label=levels(dendr$labels$label), hjust=<span class="number">1</span>,</span><br><span class="line">            color=cluster),size=<span class="number">4</span>) +</span><br><span class="line">          coord_flip() + <span class="comment">#scale_y_reverse(expand=c(0.2, 0)) +</span></span><br><span class="line">          labs(y=<span class="string">'Distance'</span>)+</span><br><span class="line">          theme(axis.line.y=element_blank(),</span><br><span class="line">            axis.ticks.y=element_blank(),</span><br><span class="line">            axis.text.y=element_blank(),</span><br><span class="line">            axis.title.y=element_blank(),</span><br><span class="line">            panel.background=element_blank(),</span><br><span class="line">            panel.grid=element_blank()) + expand_limits(y=c(-<span class="number">80</span>,<span class="number">10</span>),x=c(<span class="number">0</span>,<span class="number">68</span>))</span><br><span class="line"></span><br><span class="line">ggdraw() + draw_plot(p_dot,<span class="number">0</span>,<span class="number">0.007</span>,<span class="number">0.4</span>)+  </span><br><span class="line">           draw_plot(p_tree,<span class="number">0.4</span>,<span class="number">0.068</span>,<span class="number">0.6</span>,<span class="number">0.98</span>)</span><br><span class="line"></span><br><span class="line">ggsave(<span class="string">'KEGG_tree.png'</span>,wi=<span class="number">20.4</span>,hei=<span class="number">11</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NlG6Ag" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlG6Ag.md.png" alt="NlG6Ag.md.png"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>HTML Infinite Scroll</title>
      <link href="/Blog/html_infscroll.html"/>
      <url>/Blog/html_infscroll.html</url>
      
        <content type="html"><![CDATA[<h1 id="HTML-Infinite-Scroll"><a href="#HTML-Infinite-Scroll" class="headerlink" title="HTML Infinite Scroll"></a>HTML Infinite Scroll</h1><p>Github: <a href="https://github.com/janpaepke/ScrollMagic" target="_blank" rel="noopener">janpaepke</a></p><p>an example you can find at <code>examples/advanced/infinite_scrolling.html</code>.<br>By deleting codes line by line, we can figure out that three lines below are essential for achieving this function.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"../../assets/css/examples.css"</span> <span class="attr">type</span>=<span class="string">"text/css"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../../assets/js/lib/jquery.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"../../scrollmagic/uncompressed/ScrollMagic.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用 ggplot 畫 hclust 的結果</title>
      <link href="/Blog/ggplot_hclust.html"/>
      <url>/Blog/ggplot_hclust.html</url>
      
        <content type="html"><![CDATA[<h1>用 ggplot 畫 hclust 的結果</h1><p>drawing hclust result with ggplot</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">data(mtcars)</span><br><span class="line"></span><br><span class="line">Tree  &lt;- hclust(dist(mtcars))</span><br><span class="line">plot(Tree)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/07/23/UOWJA0.png" alt="UOWJA0.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggdendro)</span><br><span class="line"></span><br><span class="line">hc       &lt;- hclust(dist(mtcars))           <span class="comment"># heirarchal clustering</span></span><br><span class="line">dendr    &lt;- dendro_data(hc, type=<span class="string">"rectangle"</span>) <span class="comment"># convert for ggplot</span></span><br><span class="line">clust    &lt;- cutree(hc,k=<span class="number">5</span>)                    <span class="comment"># find 2 clusters</span></span><br><span class="line">clust.df &lt;- data.frame(label=names(clust), cluster=factor(clust))</span><br><span class="line"><span class="comment"># dendr[["labels"]] has the labels, merge with clust.df based on label column</span></span><br><span class="line">dendr[[<span class="string">"labels"</span>]] &lt;- merge(dendr[[<span class="string">"labels"</span>]],clust.df, by=<span class="string">"label"</span>)</span><br><span class="line"><span class="comment"># plot the dendrogram; note use of color=cluster in geom_text(...)</span></span><br><span class="line">ggplot() +</span><br><span class="line">  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">  geom_text(data=label(dendr), aes(x, y, label=label, hjust=<span class="number">0</span>, color=cluster),</span><br><span class="line">           size=<span class="number">3</span>) +</span><br><span class="line">  coord_flip() + scale_y_reverse(expand=c(<span class="number">0.2</span>, <span class="number">0</span>)) +</span><br><span class="line">  theme(axis.line.y=element_blank(),</span><br><span class="line">        axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.y=element_blank(),</span><br><span class="line">        axis.title.y=element_blank(),</span><br><span class="line">        panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">        panel.grid=element_blank())</span><br></pre></td></tr></table></figure></div><p>美美噠！<br><img src="https://s1.ax1x.com/2020/07/23/UOWQXj.png" alt="UOWQXj.png"></p><p>自定義間距：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggdendro)</span><br><span class="line"></span><br><span class="line">hc       &lt;- hclust(dist(head(mtcars)))</span><br><span class="line">dendr    &lt;- dendro_data(hc, type=<span class="string">"rectangle"</span>) <span class="comment"># convert for ggplot</span></span><br><span class="line">clust    &lt;- cutree(hc,k=<span class="number">2</span>)                    <span class="comment"># find 2 clusters</span></span><br><span class="line">clust.df &lt;- data.frame(label=names(clust), cluster=factor(clust))</span><br><span class="line"><span class="comment"># dendr[["labels"]] has the labels, merge with clust.df based on label column</span></span><br><span class="line">dendr[[<span class="string">"labels"</span>]] &lt;- merge(dendr[[<span class="string">"labels"</span>]],clust.df, by=<span class="string">"label"</span>)</span><br><span class="line"><span class="comment"># plot the dendrogram; note use of color=cluster in geom_text(...)</span></span><br><span class="line">ggplot() +</span><br><span class="line">  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">  geom_text(data=label(dendr), aes(x, y, label=label, hjust=<span class="number">0</span>, color=cluster),</span><br><span class="line">           size=<span class="number">3</span>) +</span><br><span class="line">  coord_flip() + scale_y_reverse(expand=c(<span class="number">0.2</span>, <span class="number">0</span>)) +</span><br><span class="line">  theme(axis.line.y=element_blank(),</span><br><span class="line">        axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.y=element_blank(),</span><br><span class="line">        axis.title.y=element_blank(),</span><br><span class="line">        panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">        panel.grid=element_blank())</span><br></pre></td></tr></table></figure></div><p>觀察數據可知， 樹圖數據在<code>dendr$segment</code>裏面， 名字在<code>dendr$label</code>裏面。<br>先給定一個list<code>Width_tree = c(1,2,5,10,11,20)</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">hc       &lt;- hclust(dist(head(mtcars)))</span><br><span class="line"></span><br><span class="line">dendr    &lt;- dendro_data(hc, type=<span class="string">"rectangle"</span>) <span class="comment"># convert for ggplot</span></span><br><span class="line">clust    &lt;- cutree(hc,k=<span class="number">2</span>)                    <span class="comment"># find 2 clusters</span></span><br><span class="line">clust.df &lt;- data.frame(label=names(clust), cluster=factor(clust))</span><br><span class="line"><span class="comment"># dendr[["labels"]] has the labels, merge with clust.df based on label column</span></span><br><span class="line">dendr[[<span class="string">"labels"</span>]] &lt;- merge(dendr[[<span class="string">"labels"</span>]],clust.df, by=<span class="string">"label"</span>)</span><br><span class="line"><span class="comment"># plot the dendrogram; note use of color=cluster in geom_text(...)</span></span><br><span class="line">ggplot() +</span><br><span class="line">  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">  geom_text(data=label(dendr), aes(x, y, label=label, hjust=<span class="number">0</span>, color=cluster),</span><br><span class="line">           size=<span class="number">3</span>) +</span><br><span class="line">  scale_y_reverse(expand=c(<span class="number">0.2</span>, <span class="number">0</span>)) +</span><br><span class="line">  theme(axis.line.y=element_blank(),</span><br><span class="line">        axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.y=element_blank(),</span><br><span class="line">        axis.title.y=element_blank(),</span><br><span class="line">        panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">        panel.grid=element_blank())</span><br><span class="line"></span><br><span class="line">Width_tree = c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">dendr$labels$x = Width_tree[dendr$labels$x]</span><br><span class="line">dendr$segments = dendr$segments[order(dendr$segments$x),]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 做個list</span></span><br><span class="line">List = c()</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:length(Width_tree)))&#123;</span><br><span class="line">  List = c(List, which(dendr$segments$x==i))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>打包一個函數，方便重複畫圖</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">PLOT &lt;- <span class="keyword">function</span>(dendr)&#123;</span><br><span class="line">  ggplot() +</span><br><span class="line">    geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">    geom_text(data=label(dendr), aes(x, y, label=label, hjust=<span class="number">0</span>, color=cluster),</span><br><span class="line">             size=<span class="number">3</span>) +</span><br><span class="line">    scale_y_reverse(expand=c(<span class="number">0.2</span>, <span class="number">0</span>)) +</span><br><span class="line">    theme(axis.line.y=element_blank(),</span><br><span class="line">          axis.ticks.y=element_blank(),</span><br><span class="line">          axis.text.y=element_blank(),</span><br><span class="line">          axis.title.y=element_blank(),</span><br><span class="line">          panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">          panel.grid=element_blank())</span><br><span class="line">&#125;</span><br><span class="line">PLOT2 &lt;- <span class="keyword">function</span>(dendr)&#123;</span><br><span class="line">  ggplot() +</span><br><span class="line">  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">  geom_text(data=label(dendr), aes(x, y, label=label, hjust=<span class="number">0</span>, color=cluster),</span><br><span class="line">           size=<span class="number">3</span>) +</span><br><span class="line">  coord_flip() + scale_y_reverse(expand=c(<span class="number">0.2</span>, <span class="number">0</span>)) +</span><br><span class="line">  theme(axis.line.y=element_blank(),</span><br><span class="line">        axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.y=element_blank(),</span><br><span class="line">        axis.title.y=element_blank(),</span><br><span class="line">        panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">        panel.grid=element_blank())</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>調整豎線</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>( i <span class="keyword">in</span> c(<span class="number">1</span>:<span class="number">6</span>))&#123;</span><br><span class="line">Dif_tmp = Width_tree[i]- dendr$segments$x[List[i]]</span><br><span class="line"></span><br><span class="line">dendr$segments$x[List[i]:nrow(dendr$segments)] = dendr$segments$x[List[i]:nrow(dendr$segments)]+Dif_tmp</span><br><span class="line">dendr$segments$xend[List[i]:nrow(dendr$segments)] = dendr$segments$xend[List[i]:nrow(dendr$segments)]+Dif_tmp</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PLOT(dendr)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/07/23/UOWK1g.png" alt="UOWK1g.png"></p><p>鏈接橫線</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#刪除橫線</span></span><br><span class="line">dendr$segments = dendr$segments[dendr$segments$x == dendr$segments$xend,]</span><br><span class="line"></span><br><span class="line">Y_list = dendr$segments$y[duplicated(dendr$segments$y)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> Y_list)&#123;  </span><br><span class="line">tmp = (dendr$segments$x[dendr$segments$y  == i])</span><br><span class="line">dendr$segments = rbind(dendr$segments, data.frame(x=tmp[<span class="number">1</span>],y=i,xend=tmp[<span class="number">2</span>],yend=i))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PLOT(dendr)</span><br></pre></td></tr></table></figure></div><p>能用。。。但是好像會有bug。。唉= =<br><img src="https://s1.ax1x.com/2020/07/23/UOW3Bn.png" alt="UOW3Bn.png"></p><p>修正</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">LS_judg&lt;- <span class="keyword">function</span>(TB)&#123;</span><br><span class="line">  <span class="keyword">if</span> (TB[<span class="string">'x'</span>] == TB[<span class="string">'xend'</span>])&#123;</span><br><span class="line">    R = <span class="string">'v'</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    R = <span class="string">'h'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>(R)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#修正竖线</span></span><br><span class="line">Seg = dendr$segments</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>( i <span class="keyword">in</span> c(nrow(dendr$segments):<span class="number">1</span>))&#123;</span><br><span class="line">  <span class="keyword">if</span>(LS_judg(dendr$segments[i,]) == <span class="string">'h'</span>)&#123;</span><br><span class="line">    tmpy = dendr$segments[i,]$y</span><br><span class="line">    tmpTB = Seg[Seg$yend== tmpy,]</span><br><span class="line">      <span class="keyword">for</span>( ii <span class="keyword">in</span> c(<span class="number">1</span>:nrow(tmpTB)))&#123;</span><br><span class="line">      <span class="keyword">if</span>(LS_judg(tmpTB[ii,]) == <span class="string">'v'</span>)&#123;</span><br><span class="line">        Num = rownames(tmpTB[<span class="number">1</span>,])</span><br><span class="line">        dendr$segments[match(Num, row.names(dendr$segments)),][c(<span class="number">1</span>,<span class="number">3</span>)] = sum(Seg[i,c(<span class="string">'x'</span>,<span class="string">'xend'</span>)])/<span class="number">2</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># 重画横线：</span></span><br><span class="line">dendr$segments = dendr$segments[dendr$segments$x == dendr$segments$xend,]</span><br><span class="line"></span><br><span class="line">Y_list = dendr$segments$y[duplicated(dendr$segments$y)]</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> Y_list)&#123;  </span><br><span class="line">tmp = (dendr$segments$x[dendr$segments$y  == i])</span><br><span class="line">dendr$segments = rbind(dendr$segments, data.frame(x=tmp[<span class="number">1</span>],y=i,xend=tmp[<span class="number">2</span>],yend=i))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PLOT(dendr)</span><br></pre></td></tr></table></figure></div><p>整合一下：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line">Width_tree = c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line">LS_judg&lt;- <span class="keyword">function</span>(TB)&#123;</span><br><span class="line">  <span class="keyword">if</span> (TB[<span class="string">'x'</span>] == TB[<span class="string">'xend'</span>])&#123;</span><br><span class="line">    R = <span class="string">'v'</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    R = <span class="string">'h'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>(R)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TreePlot &lt;- <span class="keyword">function</span>(dendr, Width_tree)&#123;</span><br><span class="line">  dendr$labels$x = Width_tree[dendr$labels$x]</span><br><span class="line">  dendr$segments = dendr$segments[order(dendr$segments$x),]</span><br><span class="line">  <span class="comment"># 做個list</span></span><br><span class="line">  List = c()</span><br><span class="line">  <span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:length(Width_tree)))&#123;</span><br><span class="line">    List = c(List, which(dendr$segments$x==i))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># 調整豎線</span></span><br><span class="line">  <span class="keyword">for</span>( i <span class="keyword">in</span> c(<span class="number">1</span>:length(dendr$labels$label)))&#123;</span><br><span class="line">  Dif_tmp = Width_tree[i]- dendr$segments$x[List[i]]</span><br><span class="line">  dendr$segments$x[List[i]:nrow(dendr$segments)] = dendr$segments$x[List[i]:nrow(dendr$segments)]+Dif_tmp</span><br><span class="line">  dendr$segments$xend[List[i]:nrow(dendr$segments)] = dendr$segments$xend[List[i]:nrow(dendr$segments)]+Dif_tmp</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># 刪除添加新的橫線</span></span><br><span class="line">  dendr$segments = dendr$segments[dendr$segments$x == dendr$segments$xend,]</span><br><span class="line">  Y_list = dendr$segments$y[duplicated(dendr$segments$y)]</span><br><span class="line">  <span class="keyword">for</span>(i <span class="keyword">in</span> Y_list)&#123;  </span><br><span class="line">  tmp = (dendr$segments$x[dendr$segments$y  == i])</span><br><span class="line">  dendr$segments = rbind(dendr$segments, data.frame(x=tmp[<span class="number">1</span>],y=i,xend=tmp[<span class="number">2</span>],yend=i))</span><br><span class="line">  &#125;</span><br><span class="line">  Seg = dendr$segments</span><br><span class="line">  <span class="keyword">for</span>( i <span class="keyword">in</span> c(nrow(dendr$segments):<span class="number">1</span>))&#123;</span><br><span class="line">    <span class="keyword">if</span>(LS_judg(dendr$segments[i,]) == <span class="string">'h'</span>)&#123;</span><br><span class="line">      tmpy = dendr$segments[i,]$y</span><br><span class="line">      tmpTB = Seg[Seg$yend== tmpy,]</span><br><span class="line">        <span class="keyword">for</span>( ii <span class="keyword">in</span> c(<span class="number">1</span>:nrow(tmpTB)))&#123;</span><br><span class="line">        <span class="keyword">if</span>(LS_judg(tmpTB[ii,]) == <span class="string">'v'</span>)&#123;</span><br><span class="line">          Num = rownames(tmpTB[<span class="number">1</span>,])</span><br><span class="line">          dendr$segments[match(Num, row.names(dendr$segments)),][c(<span class="number">1</span>,<span class="number">3</span>)] = sum(Seg[i,c(<span class="string">'x'</span>,<span class="string">'xend'</span>)])/<span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># 重画横线：</span></span><br><span class="line">  dendr$segments = dendr$segments[dendr$segments$x == dendr$segments$xend,]</span><br><span class="line">  Y_list = dendr$segments$y[duplicated(dendr$segments$y)]</span><br><span class="line">  <span class="keyword">for</span>(i <span class="keyword">in</span> Y_list)&#123;  </span><br><span class="line">  tmp = (dendr$segments$x[dendr$segments$y  == i])</span><br><span class="line">  dendr$segments = rbind(dendr$segments, data.frame(x=tmp[<span class="number">1</span>],y=i,xend=tmp[<span class="number">2</span>],yend=i))</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">return</span>(dendr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><table><thead><tr><th><img src="https://s1.ax1x.com/2020/07/23/UOWYNV.png" alt="UOWYNV.png"></th><th><img src="https://s1.ax1x.com/2020/07/23/UOWK1g.png" alt="UOWK1g.png"></th><th><img src="https://s1.ax1x.com/2020/07/23/UOW3Bn.png" alt="UOW3Bn.png"></th><th><img src="https://s1.ax1x.com/2020/07/23/UOW1ns.png" alt="UOW1ns.png"></th></tr></thead><tbody></tbody></table><p>再來試一下：</p><ol><li>正常情況:</li></ol><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggdendro)</span><br><span class="line"></span><br><span class="line">hc       &lt;- hclust(dist(mtcars))           <span class="comment"># heirarchal clustering</span></span><br><span class="line">dendr    &lt;- dendro_data(hc, type=<span class="string">"rectangle"</span>) <span class="comment"># convert for ggplot</span></span><br><span class="line">clust    &lt;- cutree(hc,k=<span class="number">5</span>)                    <span class="comment"># find 2 clusters</span></span><br><span class="line">clust.df &lt;- data.frame(label=names(clust), cluster=factor(clust))</span><br><span class="line"><span class="comment"># dendr[["labels"]] has the labels, merge with clust.df based on label column</span></span><br><span class="line">dendr[[<span class="string">"labels"</span>]] &lt;- merge(dendr[[<span class="string">"labels"</span>]],clust.df, by=<span class="string">"label"</span>)</span><br><span class="line"><span class="comment"># plot the dendrogram; note use of color=cluster in geom_text(...)</span></span><br><span class="line">PLOT2(dendr)</span><br></pre></td></tr></table></figure></div><p>轉化後：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Width_tree =c(<span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">10</span>, <span class="number">12</span>, <span class="number">13</span>, <span class="number">16</span>, <span class="number">20</span>, <span class="number">23</span>, <span class="number">24</span>, <span class="number">29</span>, <span class="number">37</span>, <span class="number">41</span>, <span class="number">42</span>, <span class="number">45</span>, <span class="number">47</span>, <span class="number">51</span>, <span class="number">53</span>, <span class="number">54</span>, <span class="number">57</span>, <span class="number">60</span>, <span class="number">61</span>, <span class="number">63</span>, <span class="number">67</span>, <span class="number">70</span>, <span class="number">173</span>, <span class="number">175</span>, <span class="number">276</span>, <span class="number">280</span>, <span class="number">281</span>, <span class="number">287</span>, <span class="number">593</span>)</span><br><span class="line"></span><br><span class="line">AA &lt;- TreePlot(dendr,Width_tree)</span><br><span class="line">PLOT2(AA)</span><br></pre></td></tr></table></figure></div><table><thead><tr><th>原圖</th><th>後圖</th></tr></thead><tbody><tr><td><img src="https://s1.ax1x.com/2020/07/23/UOh9Ld.png" alt="UOh9Ld.png"></td><td><img src="https://s1.ax1x.com/2020/07/23/UOWMcQ.png" alt="UOWMcQ.png"></td></tr><tr><td></td><td></td></tr></tbody></table><p>终于- - 终于终于， 修正好了， 最终版本<br><img src="https://s1.ax1x.com/2020/07/23/UOWMcQ.png" alt="UOWMcQ.png"></p><p>else: <a href="https://www.datanovia.com/en/lessons/examples-of-dendrograms-visualization/" target="_blank" rel="noopener">factoextra+dendextend</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Blog/index.html"/>
      <url>/Blog/index.html</url>
      
        <content type="html"><![CDATA[<ul><li><h1>R</h1><ul><li><a href="fasta_counts_ex.html">fasta_counts_ex</a></li><li><a href="heatmap.html">heatmap</a></li><li><h2 id="GGplot"><a class="header-anchor" href="#GGplot"></a>GGplot</h2><ul><li><a href="ggplot_KEGG.html">ggplot: KEGG plot</a></li><li><a href="ggplot_hclust.html">ggplot: hclust (dendrogram)</a></li><li><a href="ggplot_split.html">ggplot: break bar plot</a></li><li><a href="ggplot_NRPlot.html">ggplot: Complicate matrix</a></li></ul></li></ul></li><li><h1>Python</h1><ul><li><a href="python_seqlen.html">Biology: extract fasta by seq’s length</a></li><li><a href="Python-crawl_news.html">Crawl: crawl news</a></li><li><a href="Python_cw_book.html">Crawl: 高中課本下載</a></li><li><a href="ConvData_python.html">Data:  ConvData</a></li><li><a href="Python_email.html">Email: email(popmail)</a></li><li><a href="Python_down_ht2pdf2png.html">HTML:  download html to pdf to png</a></li><li><a href="Py_url_Rtime.html">Internet:  url Responding time acquiring</a></li><li><a href="Python_IP_Loc.html">IP:  IP to Loc(scripts)</a></li><li><a href="Python-resizeOutline.html">OpenCV:  resize the Outline of Icons</a></li><li><a href="Python_WBA.html">OpenCV:  Western Blot; Grey-grades Analysis</a></li><li><a href="Py_openCV_speed.html">OpenCV:  Video Speed up</a></li><li><a href="Py_img2video.html">OpenCV:  img to video</a></li><li><a href="pdf2txt.html">PDF: pdf2txt</a></li><li><a href="Python_imgResize.html">PIL: imgResize(script)</a></li><li><a href="Python-QQbot.html">QQ:  QQbot</a></li><li><a href="Python-urwid-Quick.html">Urwid: urwid, Quick Start</a></li><li><a href="Python_todolist.html">Urwid: todolist(TUI app)</a></li><li><a href="Python-TUI-mailbox.html">Urwid: mailbox(TUI app)</a></li><li><a href="Urwid-Biliboard.html">Urwid: Biliboard(TUI app)</a></li><li><a href="Python_Bilibot.html">Urwid: Bilibili bot</a></li></ul></li><li><h1>Bash</h1><ul><li><a href="build_index.html">build_index</a></li><li><a href="Baidu_statistic.html">Baidu_statistic</a></li><li><a href="BiliBili-API.html">BiliBili-API</a></li></ul></li><li><h1>Html</h1><ul><li><a href="Html.html">Html</a></li><li><a href="Html_gittalk.html">Html: gittalk</a></li><li><a href="Hexo_gitpage.html">Hexo Is Fun!</a></li><li><a href="Hexo_widget_weather.html">Hexo: Weather Widget</a></li><li><a href="Hexo_search.html">Hexo: Local Search</a></li><li><a href="Hexo_code.html">Hexo: Code Block-- Mac style code block</a></li><li><a href="Hexo_list.html">Hexo: 消失的編號</a></li><li><a href="Hexo_live2d.html">Hexo: live2d</a></li><li><a href="Hexo_footnotes.html">Hexo: footntoes</a></li></ul></li><li><h1>Other</h1><ul><li><a href="Graphviz.html">Graphviz</a></li><li><a href="Latex.html">Latex</a></li><li><a href="submit_baidu.html">submit_baidu</a></li><li><a href="waque.html">waque| <span style="background:salmon"><strong>Markdown语法大全</strong></span></a></li><li><a href="yuque_API.html">yuque_API</a></li><li><a href="tank_notes.html">鱼缸除藻生物工具</a></li><li><a href="test.html">test</a></li></ul><details  ><summary>Have a good Day ~ </summary><li>  <a href="Post_1.html">= =; My bad 2020/6/22</a></li><li>  <a href="Post_2.html">When I want to die 2020/7/14</a></li></details><style type='text/css'>nav a {  display: block;}summary {  cursor: pointer;}summary::-webkit-details-marker {  display: none;}</style></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>pdf to txt| txt to pdf</title>
      <link href="/Blog/pdf2txt.html"/>
      <url>/Blog/pdf2txt.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何用python提取pdf的文本內容"><a href="#如何用python提取pdf的文本內容" class="headerlink" title="如何用python提取pdf的文本內容"></a>如何用python提取pdf的文本內容</h1><p>pdf2txt.py; extract the txt from pdf files.</p><p>github: <a href="https://github.com/pdfminer/pdfminer.six" target="_blank" rel="noopener">pdfminer</a><br>reference: <a href="https://blog.csdn.net/m0_37952030/article/details/85041434" target="_blank" rel="noopener">Mr_Vague</a></p><h1 id="PDF-to-text"><a href="#PDF-to-text" class="headerlink" title="PDF to text"></a>PDF to text</h1><h2 id="1-Install"><a href="#1-Install" class="headerlink" title="1.Install"></a>1.Install</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/pdfminer/pdfminer.six.git</span><br><span class="line">python3 setup.py install</span><br></pre></td></tr></table></figure></div><p><strong>or</strong><br>you can use pip</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3.7  install -i https://pypi.tuna.tsinghua.edu.cn/simple pdfminer.six</span><br></pre></td></tr></table></figure></div><h2 id="2-Run"><a href="#2-Run" class="headerlink" title="2. Run"></a>2. Run</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pdf2txt.py Papers/vilhelmsson2004.pdf| tail</span><br></pre></td></tr></table></figure></div><p><span style="background:salmon"><strong>backs to</strong></span>:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">ken@ken-PC:~/Desktop$ pdf2txt.py Papers/vilhelmsson2004.pdf| tail -n 20</span><br><span class="line">Fotsis T &amp; Mann M (1996) Femtomole sequencing of proteins</span><br><span class="line">from polyacrylamide gels by nano-electrospray mass spec-</span><br><span class="line">trometry. Nature 379, 466– 469.</span><br><span class="line"></span><br><span class="line">Wilson RP &amp; Cowey CB (1985) Amino acid composition of</span><br><span class="line">whole-body tissue of rainbow trout and Atlantic salmon. Aqua-</span><br><span class="line">culture 48, 373– 376.</span><br><span class="line"></span><br><span class="line">Wing SS, Haas AL &amp; Goldberg AL (1995) Increase <span class="keyword">in</span> ubiquitin –</span><br><span class="line">protein conjugates concomitant with the increase <span class="keyword">in</span> proteolysis</span><br><span class="line"><span class="keyword">in</span> rat skeletal muscle during starvation and atrophy denerva-</span><br><span class="line">tion. Biochem J 307, 639–645.</span><br><span class="line"></span><br><span class="line">Yamamoto T, Shima T, Furuita H &amp; Suzuki N (2002) Inﬂuence of</span><br><span class="line">feeding diets with and without ﬁsh meal by hand and by self-</span><br><span class="line">feeders on feed intake, growth and nutrient utilization of juven-</span><br><span class="line">ile rainbow trout (Oncorhynchus mykiss). Aquaculture 214,</span><br><span class="line">289– 305.</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><p>Compare to raw file:<br><img src="https://s1.ax1x.com/2020/05/22/YLZMxf.png" alt="YLZMxf.png"><br>© vilhelmsson 2004</p><h2 id="PDF-to-html"><a href="#PDF-to-html" class="headerlink" title="PDF to html"></a>PDF to html</h2><p>output as html file:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pdf2txt.py -o test.html Papers/vilhelmsson2004.pdf</span><br></pre></td></tr></table></figure></div><h1 id="Text-to-PDF"><a href="#Text-to-PDF" class="headerlink" title="Text to PDF"></a>Text to PDF</h1><p>Profile: <a href="https://www.geeksforgeeks.org/convert-text-and-text-file-to-pdf-using-python/" target="_blank" rel="noopener">mkumarchaudhary06</a></p><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3.7  install -i https://pypi.tuna.tsinghua.edu.cn/simple fpdf</span><br></pre></td></tr></table></figure></div><h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> fpdf <span class="keyword">import</span> FPDF</span><br><span class="line"></span><br><span class="line">pdf = FPDF()   <span class="comment"># save FPDF() class into a variable pdf</span></span><br><span class="line">pdf.add_page() <span class="comment"># Add a page</span></span><br><span class="line"></span><br><span class="line">pdf.set_font(<span class="string">"Arial"</span>, size = <span class="number">15</span>) <span class="comment"># set style and size of font that you want in the pdf</span></span><br><span class="line"></span><br><span class="line">pdf.cell(<span class="number">200</span>, <span class="number">10</span>, txt = <span class="string">"GeeksforGeeks"</span>,  </span><br><span class="line">         ln = <span class="number">1</span>, align = <span class="string">'C'</span>) <span class="comment"># create a cell</span></span><br><span class="line">pdf.cell(<span class="number">200</span>, <span class="number">10</span>, txt = <span class="string">"A Computer Science portal for geeks."</span>,</span><br><span class="line">         ln = <span class="number">2</span>, align = <span class="string">'C'</span>) <span class="comment"># add another cell</span></span><br><span class="line"></span><br><span class="line">pdf.output(<span class="string">"GFG.pdf"</span>)         <span class="comment"># save the pdf with name .pdf</span></span><br></pre></td></tr></table></figure></div><p><strong>Output</strong>:<br><img src="https://media.geeksforgeeks.org/wp-content/uploads/20200108153749/GFG201.jpg" alt="GFG.pdf"></p><p>It works, but you need to slicing the sentences before running this codes or the contents will <strong>run out of the page</strong>.</p><p>By solving this problem, there is a script in github: <a href="https://github.com/baruchel/txt2pdf" target="_blank" rel="noopener">baruchel</a>. It’s not perfect but it works.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/baruchel/txt2pdf.git</span><br><span class="line">txt2pdf -s 12 -o document.pdf document.txt</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用biopython抽取特定長度的序列</title>
      <link href="/Blog/python_seqlen.html"/>
      <url>/Blog/python_seqlen.html</url>
      
        <content type="html"><![CDATA[<h1 id="用biopython抽取特定長度的序列"><a href="#用biopython抽取特定長度的序列" class="headerlink" title="用biopython抽取特定長度的序列"></a>用biopython抽取特定長度的序列</h1><h1 id="1-fasta-讀取和長度統計"><a href="#1-fasta-讀取和長度統計" class="headerlink" title="1. fasta 讀取和長度統計"></a>1. fasta 讀取和長度統計</h1><h2 id="1-1-統計"><a href="#1-1-統計" class="headerlink" title="1.1 統計"></a>1.1 統計</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio <span class="keyword">import</span> SeqIO</span><br><span class="line"></span><br><span class="line">Seq = <span class="string">'/media/ken/Data/Yan/RNA-seq/report/2.assembly/out.fa'</span></span><br><span class="line">Seq = SeqIO.parse(Seq, <span class="string">"fasta"</span>)</span><br><span class="line"></span><br><span class="line">Len_Seq = []</span><br><span class="line"><span class="keyword">for</span> seq_record <span class="keyword">in</span> Seq:</span><br><span class="line">  Num =  len(str(seq_record.seq))</span><br><span class="line">  Len_Seq += [Num]</span><br></pre></td></tr></table></figure></div><h2 id="1-2-統計圖"><a href="#1-2-統計圖" class="headerlink" title="1.2 統計圖"></a>1.2 統計圖</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line">plt.ion()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">4</span>))</span><br><span class="line">plt.hist(Len_Seq, label=[<span class="string">'1st'</span>, <span class="string">'2nd'</span>], bins=<span class="number">900</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.legend(loc=<span class="number">0</span>)</span><br><span class="line">plt.xlim(xmax=<span class="number">1000</span>,xmin=<span class="number">0</span>)</span><br><span class="line">plt.xlabel(<span class="string">'value'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'frequency'</span>)</span><br><span class="line">plt.title(<span class="string">'Histogram'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/Rhle6H7x9rMQJWu.png" alt="Figure_1"><br>ummm, 決定篩掉30000bp一下的reads</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio <span class="keyword">import</span> SeqIO</span><br><span class="line"></span><br><span class="line">Seq = <span class="string">'/media/ken/Data/Yan/RNA-seq/report/2.assembly/out.fa'</span></span><br><span class="line">Seq = SeqIO.parse(Seq, <span class="string">"fasta"</span>)</span><br><span class="line"></span><br><span class="line">Num = <span class="number">4000</span></span><br><span class="line">Result = []</span><br><span class="line"><span class="keyword">for</span> seq_record <span class="keyword">in</span> Seq:</span><br><span class="line">  <span class="keyword">if</span> len(str(seq_record.seq)) &gt; Num:</span><br><span class="line">    Result +=[<span class="string">"&gt;"</span>+seq_record.id]</span><br><span class="line">    Result +=[str(seq_record.seq)]</span><br><span class="line"></span><br><span class="line">Fasta = <span class="string">"\n"</span>.join(Result)</span><br><span class="line">F = open(<span class="string">"out.fa"</span>,<span class="string">'w'</span>)</span><br><span class="line">F.write(Fasta)</span><br><span class="line">F.close()</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>无标题</title>
      <link href="/Blog/test.html"/>
      <url>/Blog/test.html</url>
      
        <content type="html"><![CDATA[<h1 id="无标题"><a href="#无标题" class="headerlink" title="无标题"></a>无标题</h1><!doctype html><div data-lake-element="root" class="lake-engine lake-typography-traditional" data-parser-by="lake2html"></div><div id="flowchart-0" class="flow-chart"></div><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Starte=>endop1=>operation: My Operationsub1=>subroutine: My Subroutinecond=>condition: Yes or No?io=>inputoutput: catch something...para=>parallel: parallel tasksst->op1->condcond(yes)->io->econd(no)->parapara(path1, bottom)->sub1(right)->op1para(path2, top)->op1</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>如何向百度提交自己的博客网站</title>
      <link href="/Blog/submit_baidu.html"/>
      <url>/Blog/submit_baidu.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何向百度提交自己的博客网站"><a href="#如何向百度提交自己的博客网站" class="headerlink" title="如何向百度提交自己的博客网站"></a>如何向百度提交自己的博客网站</h1><p>2020/2/9 </p><p>最新地址: <a href="https://ziyuan.baidu.com/linksubmit/url" target="_blank" rel="noopener">https://ziyuan.baidu.com/linksubmit/url</a></p><p>进入链接， 非常慢， 等他转开就好了<br><img src="https://s1.ax1x.com/2020/06/26/Nsk7M4.jpg" alt="Nsk7M4.jpg"><br><br />输入链接， 直接选提交就好了<br><img src="https://s1.ax1x.com/2020/06/26/NskIRU.jpg" alt="NskIRU.jpg"><br><br />链接提交的官方解释：</p><ul><li><ol><li>链接提交工具是网站主动向百度搜索推送数据的工具，本工具可缩短爬虫发现网站链接时间，网站时效性内容建议使用链接提交工具，实时向搜索推送数据。本工具可加快爬虫抓取速度，无法解决网站内容是否收录问题</li></ol></li><li><ol start="2"><li>百度搜索资源平台为站长提供链接提交通道，您可以提交想被百度收录的链接，百度搜索引擎会按照标准处理，但不保证一定能够收录您提交的链接。</li></ol></li></ul><p>除了提交，这个网站还能给网站和服务器做简单或者深度安全检测， 可以随便玩玩。</p><p><img src="https://s1.ax1x.com/2020/06/26/NskozF.jpg" alt="NskozF.jpg"></p><p>主要参考：<a href="https://jingyan.baidu.com/article/b24f6c820c449d86bfe5dafe.html" target="_blank" rel="noopener">百度经验</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Blog/yuque.json"/>
      <url>/Blog/yuque.json</url>
      
        <content type="html"><![CDATA[{"repo":"liuwenkan/blog","pattern":"**/*.md"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>为什么我要使用瓦雀| markdown 语法大全</title>
      <link href="/Blog/waque.html"/>
      <url>/Blog/waque.html</url>
      
        <content type="html"><![CDATA[<h1>为什么我要使用瓦雀</h1><h1>爲什麼使用瓦雀</h1><p>瓦雀是<a href="https://www.yuque.com/yuque/help/third-party-tools#waque" target="_blank" rel="noopener">官方又推薦</a>的一個，三方<a href="https://github.com/yesmeck/waque" target="_blank" rel="noopener">開源程序</a>。方便本地管理，編輯，下載，上傳markdown語法的文件<br>具體可以看<a href="https://www.yuque.com/waquehq/docs/getting-started" target="_blank" rel="noopener">官方文檔</a></p><h1>哪些人適合使用瓦雀</h1><ul><li>想要在本地直接備份，想類似git一樣管理自己的筆記</li><li>希望在本地用markdown語法編輯記錄</li><li>希望用自己喜歡的編輯器的人</li><li>希望自由插入html語法(部分)的人</li><li>希望可以方便存入其他庫備份的人(比如, 百度雲, github)</li><li>喜歡用代碼畫流程圖的人</li></ul><h1>不適合人羣</h1><ul><li>不熟悉markdown語法的人</li><li>不會用代碼畫流程圖/腦圖</li><li>討厭命令行的人</li></ul><p>Markdown 語法雖然輕量, 但是足夠強大. 不過, 語雀, GIthub等, <b>並不是就能完美支持</b>markdown和html的所有語法. 因此, 還請<span style="color:salmon;">跟具自己的實際情況</span>來選擇個人所需.</p><h1>使用方式</h1><p><font s><a scr="https://www.yuque.com/waquehq/docs/getting-started">詳情點擊</a></font></p><h2 id="安裝"><a class="header-anchor" href="#安裝"></a>安裝</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo npm i -g waque</span><br></pre></td></tr></table></figure></div><h2 id="登錄"><a class="header-anchor" href="#登錄"></a>登錄</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">waque login</span><br></pre></td></tr></table></figure></div><p>這個時候彈出一張網頁, 掃碼登錄授權就好</p><h2 id="初始化配置"><a class="header-anchor" href="#初始化配置"></a>初始化配置</h2><p>創建一個文件夾(倉庫), 進入後,初始化</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">waque init</span><br></pre></td></tr></table></figure></div><p>選擇一個 Repository</p><h2 id="使用"><a class="header-anchor" href="#使用"></a>使用</h2><p>然後就可以通過<code>waque export</code>下載本倉庫所有的文本<br>通過<code>waque export ***.md</code> 便可以上傳同步筆記了!</p><p style="color:salmon;">注意:</p> 直接編輯文檔並上傳, 會出現:<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">✖  error     更新 安卓手机 Turmux 搭建博客[is3vdm]</span><br><span class="line">&#123; status: 400,</span><br><span class="line">  message: <span class="string">'抱歉，语雀不允许通过 API 修改 Lake 格式文档，请到语雀进行操作。'</span> &#125;</span><br></pre></td></tr></table></figure></div><p>只需要去網頁上, 把該文檔刪除, 然後就可以上傳了.</p><h1>已知問題</h1><p>大部分和簡書顯示類似: <a href="https://www.jianshu.com/p/ebe52d2d468f" target="_blank" rel="noopener">择势勤 2019</a><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><h3 id="在语雀無法使用-hexo-可以"><a class="header-anchor" href="#在语雀無法使用-hexo-可以"></a>在语雀無法使用(hexo 可以):</h3><ul><li>腦圖;流程圖等語法</li><li><code>&lt;details&gt;</code>或region 摺疊標籤</li><li>html 的 height 屬性</li><li><code>&lt;font-size=&quot;100px&quot;&gt;</code> style font-size 無效</li><li><code>&lt;font&gt;&lt;/font&gt;</code> font 屬性標籤</li><li><code>&lt;i&gt;</code></li><li><code>&lt;p style=&quot;...&quot;&gt;</code></li><li>代碼摺疊</li></ul><h3 id="可"><a class="header-anchor" href="#可"></a>可</h3><h4 id="文字"><a class="header-anchor" href="#文字"></a>文字</h4><ul><li>註釋<code>[\\]:#</code> <code>&lt;div style='display: none'&gt;</code></li><li><code>&lt;img&gt;</code> 標籤</li><li><code>&lt;div align=right&gt;</code> 排版標籤</li><li><code>这是*倾斜*的文字</code> 这是<em>倾斜</em>的文字</li><li><code>这是**加粗**的文字</code> 这是<strong>加粗</strong>的文字</li><li><code>这是 ***斜体加粗*** 的文字</code> 这是 <em><strong>斜体加粗</strong></em> 的文字</li><li><code>这是文字^右上角^</code> 这是文字<sup>右上角</sup></li><li><code>这是文字~右下角~</code> 这是文字<sub>右下角</sub></li><li><code>这是==高亮==文字</code> 这是==高亮==文字 (<strong>hexo 失效</strong>)</li><li><code>这是加~~删除线~~的文字</code> 这是加<s>删除线</s>的文字</li><li><code>![图片alt](图片地址 ''图片title'')</code></li><li><code>&lt;s&gt;&lt;sub&gt;&lt;sup&gt;&lt;u&gt;&lt;b&gt;</code></li><li><code>flow</code></li><li><code>mermaid</code></li></ul><h4 id="缩写"><a class="header-anchor" href="#缩写"></a>缩写</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">convert to HTML</span><br><span class="line">*[HTML]: HyperText Markup Language</span><br></pre></td></tr></table></figure></div><p>convert to <abbr title="HyperText Markup Language">HTML</abbr></p><h4 id="待办事项-hexo-失效"><a class="header-anchor" href="#待办事项-hexo-失效"></a>待办事项 (<strong>hexo 失效</strong>)</h4><p><code>- [ ] item</code></p><ul><li>[ ] item</li></ul><p><code>- [x] item2</code></p><ul><li>[x] item2</li></ul><h4 id="公式-hexo-失效"><a class="header-anchor" href="#公式-hexo-失效"></a>公式 (<strong>hexo 失效</strong>)</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MD"><figure class="iseeu highlight /md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$$</span><br><span class="line">\Gamma(z) = \int_0^\infty t^&#123;z-1&#125;e^&#123;-t&#125;dt\,.</span><br><span class="line">$$</span><br></pre></td></tr></table></figure></div><p>$$<br>\Gamma(z) = \int_0^\infty t<sup>{z-1}e</sup>{-t}dt,.<br>$$</p><h4 id="表格"><a class="header-anchor" href="#表格"></a>表格</h4><table><thead><tr><th>表头1</th><th>表头2</th><th style="text-align:left">表头3</th><th style="text-align:right">表头4</th><th style="text-align:center">5</th></tr></thead><tbody><tr><td>普通</td><td>加宽</td><td style="text-align:left">靠左对齐</td><td style="text-align:right">靠右对齐</td><td style="text-align:center">居中</td></tr><tr><td>普普通通</td><td>宽</td><td style="text-align:left">我从左边开始</td><td style="text-align:right">我向右看齐</td><td style="text-align:center">我在中间</td></tr></tbody></table><p>更多: <a href="https://blog.csdn.net/sunbocong/article/details/81033915" target="_blank" rel="noopener">复杂表格 aladdin_sun 2018</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#flow codes for below</span></span><br><span class="line">st=&gt;start: Start|past:&gt;http://www.google.com[blank]</span><br><span class="line">e=&gt;end: End:&gt;http://www.google.com</span><br><span class="line">op1=&gt;operation: My Operation|past</span><br><span class="line">op2=&gt;operation: Stuff|current</span><br><span class="line">sub1=&gt;subroutine: 这啥啊|invalid</span><br><span class="line">cond=&gt;condition: Yes or No?|approved:&gt;http://www.google.com</span><br><span class="line">c2=&gt;condition: Good idea|rejected</span><br><span class="line">io=&gt;inputoutput: catch something...|request</span><br><span class="line"></span><br><span class="line">st-&gt;op1(right)-&gt;cond</span><br><span class="line">cond(yes, right)-&gt;c2</span><br><span class="line">cond(no)-&gt;sub1(left)-&gt;op1</span><br><span class="line">c2(yes)-&gt;io-&gt;e</span><br><span class="line">c2(no)-&gt;op2(right)-&gt;op1</span><br></pre></td></tr></table></figure></div><div id="flowchart-0" class="flow-chart"></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#mermaid codes for below</span></span><br><span class="line">graph LR;</span><br><span class="line">　　Portal--&gt;|发布/更新配置|Apollo配置中心;</span><br><span class="line">　　Apollo配置中心--&gt;|实时推送|App;</span><br><span class="line">　　App--&gt;|实时查询|Apollo配置中心;</span><br></pre></td></tr></table></figure></div><p>Citation: <a href="https://www.cnblogs.com/nanqiang/p/8244309.html" target="_blank" rel="noopener">cicero 2018</a></p><pre class="mermaid">graph LR;　　Portal-->|发布/更新配置|Apollo配置中心;　　Apollo配置中心-->|实时推送|App;　　App-->|实时查询|Apollo配置中心;</pre><p>更多mermaid例子：<br><a href="https://www.cnblogs.com/dao0/p/4489837.html" target="_blank" rel="noopener">道隐无名 2015</a><br><a href="https://cloud.tencent.com/developer/article/1334691" target="_blank" rel="noopener">七适散人 2018</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Start|past:>http://www.google.com[blank]e=>end: End:>http://www.google.comop1=>operation: My Operation|pastop2=>operation: Stuff|currentsub1=>subroutine: 这啥啊|invalidcond=>condition: Yes or No?|approved:>http://www.google.comc2=>condition: Good idea|rejectedio=>inputoutput: catch something...|requestst->op1(right)->condcond(yes, right)->c2cond(no)->sub1(left)->op1c2(yes)->io->ec2(no)->op2(right)->op1</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>择势勤; Markdown语法大全(超级版); 简书; 2019.05.02 16:37:47. <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>语雀AIP 配置和简单使用</title>
      <link href="/Blog/yuque_API.html"/>
      <url>/Blog/yuque_API.html</url>
      
        <content type="html"><![CDATA[<h1>语雀AIP 配置和简单使用</h1><p><a name="wC8XQ"></a></p><h1>1. 设置 TOKEN号</h1><p>进入<a href="https://www.yuque.com/settings" target="_blank" rel="noopener">个人设置</a> , <br /><br><img src="https://s1.ax1x.com/2020/06/26/NsAkdI.png" alt="NsAkdI.png"><br><br />Terminal 内 输入</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">"X-Auth-Token: 你的token "</span> https://www.yuque.com/api/v2/hello</span><br></pre></td></tr></table></figure></div><p>返回:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"data"</span>:&#123;<span class="string">"message"</span>:<span class="string">"Hello Karroben"</span>&#125;&#125;</span><br></pre></td></tr></table></figure></div><p><a name="IwjFB"></a></p><h1>2. 获取用户信息:</h1><p><a href="https://www.yuque.com/yuque/developer/user" target="_blank" rel="noopener">https://www.yuque.com/yuque/developer/user</a></p><p>官方例子:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">GET /users/:login</span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">GET /users/:id</span><br></pre></td></tr></table></figure></div><p>说明: GET = curl -H &quot;X-Auth-Token: 你的token &quot; <a href="https://www.yuque.com/api/v2" target="_blank" rel="noopener">https://www.yuque.com/api/v2</a>  这一串</p><p>使用方法:<br />把<a href="https://www.yuque.com/api/v2/hello" target="_blank" rel="noopener">https://www.yuque.com/api/v2/hello</a> 的 hello 去掉<br />加上users/, 再加上你的ID</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">"X-Auth-Token: 你的token "</span> https://www.yuque.com/api/v2/users/liuwenkan</span><br></pre></td></tr></table></figure></div><p>返回:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"data"</span>:</span><br><span class="line">  &#123;<span class="string">"id"</span>:691897,</span><br><span class="line">    <span class="string">"type"</span>:<span class="string">"User"</span>,</span><br><span class="line">    <span class="string">"space_id"</span>:0,</span><br><span class="line">    <span class="string">"account_id"</span>:494138,</span><br><span class="line">    <span class="string">"login"</span>:<span class="string">"liuwenkan"</span>,</span><br><span class="line">    <span class="string">"name"</span>:<span class="string">"Karroben"</span>,</span><br><span class="line">    <span class="string">"avatar_url"</span>:<span class="string">"https://cdn.nlark.com/yuque/0/2019/jpeg/anonymous/1576914522864-5dabd37e-9a90-4ee4-96b4-a1973dbcede4.jpeg"</span>,</span><br><span class="line">    <span class="string">"books_count"</span>:8,</span><br><span class="line">    <span class="string">"public_books_count"</span>:8,</span><br><span class="line">    <span class="string">"followers_count"</span>:1,</span><br><span class="line">    <span class="string">"following_count"</span>:2,</span><br><span class="line">    <span class="string">"public"</span>:1,</span><br><span class="line">    <span class="string">"description"</span>:<span class="string">"R 语言作图索引:https://karobben.github.io/R/R-index.html"</span>,</span><br><span class="line">    <span class="string">"created_at"</span>:<span class="string">"2019-12-21T07:49:03.000Z"</span>,<span class="string">"updated_at"</span>:<span class="string">"2020-02-14T02:57:36.000Z"</span>,</span><br><span class="line">    <span class="string">"_serializer"</span>:<span class="string">"v2.user_detail"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><a name="PPUvP"></a></p><h1>3. 获取repository信息</h1><p><a href="https://www.yuque.com/yuque/developer/repo" target="_blank" rel="noopener">https://www.yuque.com/yuque/developer/repo</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for User</span></span><br><span class="line">GET /users/:login/repos</span><br><span class="line"><span class="comment"># for Group</span></span><br><span class="line">GET /groups/:login/repos</span><br><span class="line"></span><br><span class="line"><span class="comment"># 或</span></span><br><span class="line">GET /users/:id/repos</span><br><span class="line">GET /groups/:id/repos</span><br></pre></td></tr></table></figure></div><p>一样, Get = 前面一大串</p><p>例子:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">"X-Auth-Token: 你的token "</span> https://www.yuque.com/api/v2/repos/liuwenkan/python</span><br></pre></td></tr></table></figure></div><p>返回太多, 不在这里赘述</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Digestion System of Fish</title>
      <link href="/LearnNotes/Fish_dygestion.html"/>
      <url>/LearnNotes/Fish_dygestion.html</url>
      
        <content type="html"><![CDATA[<h1 id="Digestion-System-of-Fish"><a href="#Digestion-System-of-Fish" class="headerlink" title="Digestion System of Fish"></a>Digestion System of Fish</h1><h1 id="General"><a href="#General" class="headerlink" title="General"></a>General</h1><h2 id="Digestion-tracks"><a href="#Digestion-tracks" class="headerlink" title="Digestion tracks"></a>Digestion tracks</h2><ol><li>Mouth</li><li>Buccal cavity</li><li>Pharynx</li><li>Oesophagus</li><li>Stomach</li><li>Intestine</li><li>Anus</li><li>Cloaca</li></ol><p><img src="http://ourmarinespecies.com/wp-content/uploads/2019/01/salmon_3-e1547995330751.jpg" alt="avatar"><br>img from <a href="https://ourmarinespecies.com/c-fishes/salmon/" target="_blank" rel="noopener">ourmarinespecies.com</a>, copyright belongs to author</p><h1 id="Sharks"><a href="#Sharks" class="headerlink" title="Sharks"></a>Sharks</h1><p>reference:<a href="https://www.youtube.com/watch?v=ELIGC3vDFeo" target="_blank" rel="noopener">The Shark Digestive System</a></p><h2 id="Digestive-Tracks"><a href="#Digestive-Tracks" class="headerlink" title="Digestive Tracks"></a>Digestive Tracks</h2><ol><li>Mouth<br>Grain Foods<br>Lack of salivary amylase</li><li>Esophagus</li><li>Stomach</li><li>Spiral Intestine (small intestine)<br>The place absorption and nutrients and toxins take palce<blockquote><ul><li>Duodenum (the first part of the spiral intestine)<blockquote><ul><li>pyloric sphincter/ pylorus (First part of Duodenum)<br>The muscle expands and contrast to control the food into the duodenum<br>(Spiral valve in the inside of intestine)</li></ul></blockquote></li></ul></blockquote></li><li>Colon (an enlarged Intestine)<blockquote><ul><li>water absorption</li></ul></blockquote></li><li>Rectum and Cloaca (the waste expelled)</li></ol><h2 id="Digestive-Organ"><a href="#Digestive-Organ" class="headerlink" title="Digestive Organ"></a>Digestive Organ</h2><h3 id="Liver"><a href="#Liver" class="headerlink" title="Liver"></a>Liver</h3><ul><li>detoxification (hepatic portal system)<blockquote><ul><li>HPS: gathering the blood from the GI track and taking it back to the liver to be detox.</li></ul></blockquote></li><li>storage Clucose</li><li>produces vile</li><li>Squalene (Shark)<br>It allows buoyancy because the oil is lighter than water</li><li>bile (looks like green blister)<br>stores at gallbladder</li></ul><h3 id="Spleen"><a href="#Spleen" class="headerlink" title="Spleen"></a>Spleen</h3><p>Produces, stores, and breaks down blood cells<br>** Major Part of Immune system** for shark(fish)</p><h3 id="Pancreas"><a href="#Pancreas" class="headerlink" title="Pancreas"></a>Pancreas</h3><ul><li>exocrine function: Pancreatic juices.</li><li>endocrine function: regulating blood sugar (insulin).</li></ul><h3 id="Rectal-Gland"><a href="#Rectal-Gland" class="headerlink" title="Rectal Gland"></a>Rectal Gland</h3><p>salt gland: salty homeostasis</p><h1 id="Digestive-System-and-Physiology-of-Digestion-in-Fishes"><a href="#Digestive-System-and-Physiology-of-Digestion-in-Fishes" class="headerlink" title="Digestive System and Physiology of Digestion in Fishes"></a>Digestive System and Physiology of Digestion in Fishes</h1><p>reference:<a href="https://www.youtube.com/watch?v=27Z8gEFeOAk" target="_blank" rel="noopener">Video</a></p><h2 id="Pancrease"><a href="#Pancrease" class="headerlink" title="Pancrease"></a>Pancrease</h2><ol><li>exocrine secretion into Intestine</li><li>Endocrine secretion of the hormones insulin and glucagon</li></ol><h2 id="Liver-1"><a href="#Liver-1" class="headerlink" title="Liver"></a>Liver</h2><ol><li>Priduce <strong>bile</strong></li><li>synthesis and stores <strong>glycogen</strong></li></ol><h2 id="Other-Glands"><a href="#Other-Glands" class="headerlink" title="Other Glands"></a>Other Glands</h2><ol><li>Mucosal &amp; sybmucosal lining of the fish contain some glands</li><li>Glandular structure of stomach comprises the gastric glands in the cardiac and the pyloric regions</li></ol><h2 id="Gastric-Phase-of-Digestion"><a href="#Gastric-Phase-of-Digestion" class="headerlink" title="Gastric Phase of Digestion"></a>Gastric Phase of Digestion</h2><h3 id="Pepesin"><a href="#Pepesin" class="headerlink" title="Pepesin"></a>Pepesin</h3><p><em>predominant gastric enzyme</em></p><h3 id="Trypsin"><a href="#Trypsin" class="headerlink" title="Trypsin"></a>Trypsin</h3><h3 id="Carbohydrases"><a href="#Carbohydrases" class="headerlink" title="Carbohydrases"></a>Carbohydrases</h3><hr><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference:"></a>Reference:</h1><p><a href="https://www.youtube.com/watch?v=jKA5Fxcw120" target="_blank" rel="noopener">Fish digestive system| scoliodon digestive system</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>TED听抄1: Four Billion years of evolution in six minutes</title>
      <link href="/LearnNotes/Four-Billion-years-of-evolution-in-six-minutes.html"/>
      <url>/LearnNotes/Four-Billion-years-of-evolution-in-six-minutes.html</url>
      
        <content type="html"><![CDATA[<h1 id="TED听抄1-Four-Billion-years-of-evolution-in-six-minutes"><a href="#TED听抄1-Four-Billion-years-of-evolution-in-six-minutes" class="headerlink" title="TED听抄1: Four Billion years of evolution in six minutes"></a>TED听抄1: Four Billion years of evolution in six minutes</h1><p><a href="https://www.youtube.com/watch?v=XyTcINLKq4c&t=191s" target="_blank" rel="noopener">Source</a>  </p><p>If we evolved from monkeys, why are there still monkeys?</p><p>Will, because we are not monkeys, we are fish.<br><img src="https://s1.ax1x.com/2020/06/26/NsAeW8.png" alt="NsAeW8.png"></p><p>Now, knowing you are a fish and not a monkey is actually really important to understanding where we came from.</p><p>I teach one of the largest evolution biological class in the US, and when my students finally understand why I am call them fish all the time, then, I know, I am getting my job done.</p><p>But I always have to start my classes by dispelling something hardwired myth, because that was really knowing it, many of us were taught evolution wrong.</p><p>For instance, we are taught to say the theory of evolution, there are actually many theories, and just like the process itself, the one that best fit the data are the one that survive to this day. The one we know best it Darwin Natural Selection. That’s the processes by which organism that best fit the environment to survive and get to reproduce, while those that are less fitted, slowly die off. And that’s it. Evolution as simple as that, And it is the facts.</p><p>Evolution is a facts as much as the theory of gravity. You can prove it just easily. You just need to look at your bellybutton that you share with other placental mammals, or your backbone that you share with other vertebrates, or your DNA that you share with all other life on Earth.</p><p>Those trace doesn’t pop up in humans. There are past down from different ancestor to all the descendants, not just us. But that’s not really how we learn biology early on, isn’t? We learn plants and bacteria are primitive things, fish give rise to amphibians, followed by reptiles and mammals, then, you get you, this perfectly evolved creature at the end of the line. The life doesn’t evolve in a line and it doesn’t end with us. But we’re always shown evolution portraits something like this. From monkeys into chimpanzee, some extinct humans, all on a forward in steady march to becoming us. But they don’t become us any more then we would become them. We also not the goal of evolution.</p><p>But why does it matter? Why do we need to understand evolution the right way? Well, misunderstanding evolution has led to many problems, but you can’t ask that question, that age-old question that, where are we from, without understanding evolution the right way. Misunderstanding it has let to many <strong>convoluted</strong> and <strong>corrupted</strong> views of how we should tread other life on the earth and how we should treat each other in terms of race and gender. So, let’s go back, 4 billion years.</p><p>This is the single-cell organism we all came from. At first, it give rise to other single-cell of life. But these are still evolving to this day. and some would say the Archaea and bacteria that make up most of this group is the most successful on the planet. They are certainly going to be here well after us.</p><p>About three billion years ago, multicellularity evolved. This includes fungi, plants, and animals. The first animals to develop a backbone were fishes. So, technically, all vertebrates are fishes. So, technically, you and I are fish. So, don’t said I didn’t warn you.</p><p>One fish lineage came into the land and give rise to among other things, the mammals and reptiles. Some reptiles become birds, some mammals become primates. Some primates become monkeys with tail, And others become the great apes, including variety of human species. So, you see, we didn’t evolve from monkeys, but we do share a common ancestor. All the whole, life around us kept evolving. More bacteria, more fungi, lots of fish, fish, fish, if you couldn’t tell, yes, they’re my favorite group. As life evolves, it also goes extinct. Most species just last for a few million years. So, you see most life on earth that we see around us today are about the same age as our species. So, is <strong>hubris</strong>, is <strong>self-centered</strong> to think, Oh, plants and bacteria are <u>primitive</u>. And we’ve been here for an evolutionary minute, so  we are somehow special.  </p><p>Think of life as being this book, and unfinished book for sure. We are just seeing the last few pages of each chapter. If you look out on the 8 million species that we share this planet with, think of them all being 4 billion years of evolution. They are all the product of that. Think of us all as young leaves on this ancient and gigantic tree of life. All of us are connected by invisible branches, not just to each other, but to our extincted relatives, and our evolutionary ancestors.</p><p>As an biologist, I am still trying to learn with others, how everyone’s related to each other, who is related to whom. Perhaps, it is batter still to think us as a little fish out of the water. Yes, the one that learned walk and talk. The one that still has a lot of learning to do about who we are, and where we came from. Thank you!!!  </p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Liver and Steroid Hormones—Can a Touch of p53 Make a Difference?</title>
      <link href="/LearnNotes/Paper_Charni2019.html"/>
      <url>/LearnNotes/Paper_Charni2019.html</url>
      
        <content type="html"><![CDATA[<h1 id="Liver-and-Steroid-Hormones—Can-a-Touch-of-p53-Make-a-Difference"><a href="#Liver-and-Steroid-Hormones—Can-a-Touch-of-p53-Make-a-Difference" class="headerlink" title="Liver and Steroid Hormones—Can a Touch of p53 Make a Difference?"></a>Liver and Steroid Hormones—Can a Touch of p53 Make a Difference?</h1><p>Cite: Charni-Natan M, Aloni-Grinstein R, Osher E and Rotter V (2019) Liver and Steroid Hormones—Can a Touch of p53 Make a Difference? Front. Endocrinol. 10:374. doi: 10.3389/fendo.2019.00374</p><p><a href="https://www.frontiersin.org/articles/10.3389/fendo.2019.00374/full" target="_blank" rel="noopener">Read the full paper</a></p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><strong><em>Liver</em></strong>:<br><img src="https://s1.ax1x.com/2020/05/21/Yqgjuq.png" alt="Yqgjuq.png"><br>© Charni 2019</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>Liver serving as a hormonal secretory gland.</li><li>Steroid hormones is important</li><li>Liver is important to Steroid hormones homeostasis</li><li>P53 has impact on Liver</li><li>Hypothesis: P53-&gt; Liver -&gt; Steroid hormones -&gt; Diseases</li><li>New way to diseases treatment (Maybe)</li></ol><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><h2 id="P1-BG"><a href="#P1-BG" class="headerlink" title="P1: BG"></a>P1: BG</h2><p>Steroid hormones:</p><ul><li>reproductive</li><li>metabolic homeostasis</li></ul><p>Steroid hormones synthesis</p><ul><li>derived from cholesterol</li><li>synthesized by adrenal cortex, gonads, and placenta.</li></ul><p>Five groups: (<strong>based on nuclear receptor</strong>)<sup id="b_p1"><a href="#p1">(1–5)</a></sup></p><ol><li>mineralocoriticoids</li><li>glucocorticoids</li><li>androgens</li><li>estrogens</li><li>progestogens</li></ol><p>P53</p><ul><li>Responding for stress</li><li>Regulating hormones expression</li></ul><p>This discuss is focus on bidirectional relationship between different steroid hormones and liver and dependently on p53.</p><h2 id="Steroid-Hormones-Homeostasis-Regulation-by-the-Liver"><a href="#Steroid-Hormones-Homeostasis-Regulation-by-the-Liver" class="headerlink" title="Steroid Hormones Homeostasis Regulation by the Liver"></a>Steroid Hormones Homeostasis Regulation by the Liver</h2><h3 id="Cholesterol"><a href="#Cholesterol" class="headerlink" title="Cholesterol"></a>Cholesterol</h3><p>Cholesterol Genesis<sup id="b_p2"><a href="#p2">(15)</a></sup></p><ul><li>de-novo production</li><li>hydrolysis of stored cholesterol</li><li>interiorization of plasma membrane cholesterol</li><li>from LDL and HDL</li></ul><h3 id="Metabolism"><a href="#Metabolism" class="headerlink" title="Metabolism"></a>Metabolism</h3><p>Metabolism<sup id="b_p3"><a href="#p3">(16, 17)</a></sup></p><ul><li>5αR1 (liver enzyme 5α-reductase 1)<ul><li>5αR1-KO mice exhibited augmented mRNA levels of various hepatic metabolic regulators genes (e.g., Acc1, Agpat2, Cpt2, and Dgat2) in comparison to WT mice<sup id="b_p4"><a href="#p4">(18)</a></sup>.</li></ul></li><li>CYP (cytochromes P450 enzymes)<ul><li>metabolism of many drugs and lipophilic compounds<sup id="b_p5"><a href="#p5">(19)</a></sup></li><li>CYP3A4, CYP19, CYP2C2B1, and CYP2C11 are the liver CYPs and take part in steroid hormones hydroxylation and processing</li><li>CYP3A4<sup id="b_p6"><a href="#p6">(20,21)</a></sup><ul><li>hydroxylases several steroids such as cortisol, androstenedione, testosterone, and progesterone</li></ul></li><li>CYP19 (Aromatase)<sup id="b_p7"><a href="#p7">(10)</a></sup><ul><li>transforms androgens to estrogens by the removal of C19 carbon and the aromatization of the steroid A ring.</li></ul></li><li>CYP2C11 and CYP2B1<sup><a href="#p7">(10)</a></sup><ul><li>regulate hydroxylation of testosterone</li></ul></li><li>Nuclear receptors complexes<ul><li>NRC such as PXR, VDR, RXR were also found to bind CYP3A4 chromatin and affect its expression <sup id="b_p8"><a href="#p8">(23, 24)</a></sup></li></ul></li></ul></li></ul><h3 id="Steroids-Conjunction"><a href="#Steroids-Conjunction" class="headerlink" title="Steroids Conjunction"></a>Steroids Conjunction</h3><ul><li>exerted by such as sulfotransferare and uridine diphosphate-glucuronosyltransferases (UGT)<ul><li>ransfer the steroid hormones into higher polarity metabolites that are better suited to be excreted from the body<sup><a href="#p7">(10)</a></sup>.</li><li>The sulfotransferases that are expressed by hepatic cells and are related to steroids conjugations are HSST, EST, SULT 2A1, and SULT 1E1 <sup id="b_p9"><a href="#p9">(25)</a></sup>.</li><li>be regulated by androgens, GCs, and nuclear receptors such as PXR<sup id="b_p11"><a href="#p11">(27)</a></sup>.</li></ul></li><li>sulfotransferase inhibition<ul><li>as well as EST KO, led to the acceleration of free steroids and thus to sexual abnormalities <sup id="b_p10"><a href="#p7">(10</a>,<a href="#p10">26)</a></sup>.</li></ul></li></ul><h3 id="UGTs"><a href="#UGTs" class="headerlink" title="UGTs"></a>UGTs</h3><ul><li>Two subfamilies<ul><li>UGT2B<ul><li>mainly expressed in the liver and is related the processing of steroid hormones<sup id="b_p12"><a href="#p12">(28)</a></sup>.</li></ul></li></ul></li><li>UGT<ul><li>it induce <strong>glucuronidation</strong> of steroids, a process that <strong>interrupts steroids activity</strong>, and enables their <strong>elimination</strong>.</li><li>Tegulated by several xenobiotics compounds (e.g., PCN, PB), which were reported to increase their mRNA expression levels in rats’ livers <sup id="b_p13"><a href="#p13">(29)</a></sup>.</li></ul></li></ul><h3 id="Transportation"><a href="#Transportation" class="headerlink" title="Transportation"></a>Transportation</h3><p>As steroids, these hormones are lipophilic thus, when secreted into the blood stream they need to be bound to carrier proteins</p><ul><li>SHBG (Sex hormone binding globulin)</li><li>CBG (Corticosteroid binding globulin)</li><li>This carriers are glycoproteins which are mainly secreted by liver.<sup id="b_p14"><a href="#p14">(30, 31)</a></sup>.</li><li>Carrier proteins bind steroids and turn them to be biologically inactive <sup id="b_p15"><a href="#p15">(32)</a></sup>.</li><li>effect different molecular pathways and signaling such as apoptosis <sup id="b_p16"><a href="#p16">(33, 34)</a></sup></li><li>Regulation:<ul><li>factors such as glucose <sup id="b_p17"><a href="#p17">(35)</a></sup>, thyroid hormone &lt; id=”b_p18”sup&gt;<a href="#p18">(36)</a></sup>, and other factors such as the hepatocyte nuclear factor 4α (HNF-4α) <sup id="b_p19"><a href="#p19">(37)</a></sup>, PPAR-γ <sup id="b_p20"><a href="#p20">(38)</a></sup>, and p53 <sup id="b_p21"><a href="#p21">(14)</a></sup>.</li></ul></li></ul><h2 id="Glucocorticoids-GC"><a href="#Glucocorticoids-GC" class="headerlink" title="Glucocorticoids (GC)"></a>Glucocorticoids (GC)</h2><p>Glucocorticoids are vital <strong><em>endocrine regulators</em></strong> of homeostasis and adaptation to environmental variations.<br><strong>potent anti-inflammatory</strong> and <strong>immunosuppressive agents</strong><sup id="b_p22"><a href="#p22">(40)</a></sup></p><ul><li>Cortisol<sup id="b_p23"><a href="#p23">(42)</a></sup><ul><li>a main glucocorticoid secreted by the adrenal cortex</li><li>essential for immune system, vascular tone maintance</li><li>etc<br>Played a major role during stress and severe illness by increasing cardiac output and vascular tonus and decreasing pro-inflammatory cytokines release<sup id="b_p24"><a href="#p24">(43,44)</a></sup></li><li>under the control of: <sup id="b_p23"><a href="#p23">(42)</a></sup><ul><li>HPA (hypothalamus-pituitary-adrenal )</li><li>ACTH (adrenocorticotropic hormone)</li><li>CRH (corticotropin-releasing hormone)</li><li>low-density lipoproteins (LDL) cholesterol insufficiency impair the production of cortisol <sup id="b_p25"><a href="#p25">(45)</a></sup></li></ul></li></ul></li></ul><h2 id="NAFLD-Non-alcoholic-fatty-liver-disease"><a href="#NAFLD-Non-alcoholic-fatty-liver-disease" class="headerlink" title="NAFLD (Non-alcoholic fatty liver disease)"></a>NAFLD (Non-alcoholic fatty liver disease)</h2><p>Metabolic disorder, characterized by hepatic steatosis, the presence of free fatty acids or triglycerides in the liver<sup>(46)</sup>.  </p><ul><li>Mice:<ul><li>high fat diets &amp; chronically elevated GC<sup>(47)</sup></li></ul></li><li>Patients:<ul><li>elevated GC levels<sup>(48)</sup></li></ul></li></ul><p>(<strong>Skip</strong>)</p><h2 id="Mineralocorticoids"><a href="#Mineralocorticoids" class="headerlink" title="Mineralocorticoids"></a>Mineralocorticoids</h2><p>synthesized by the <strong>adrenal cortex</strong> that influence <strong>salt and water</strong> balance.</p><p>(<strong>Skip</strong>)</p><h2 id="Androgens"><a href="#Androgens" class="headerlink" title="Androgens"></a>Androgens</h2><p>Androgens are the principal male sex hormones that regulated masculinizing (雄性化作用) effects and male sexual behavior.</p><ul><li>DHT(dehydroepiandrosterone)<ul><li>it can bind androgen receptor(AR) as well as <strong><em>testosterone</em></strong>(82)</li></ul></li></ul><h2 id="Estrogens"><a href="#Estrogens" class="headerlink" title="Estrogens"></a>Estrogens</h2><p>Estrogens are female principal sex hormone.</p><ul><li>E2 (17β estradiol) is essential for human</li></ul><p>…</p><hr><h1 id="Citation"><a href="#Citation" class="headerlink" title="Citation"></a>Citation</h1><ol><li><p><a href="#b_p1">1. </a>Falkenstein E, Tillmann HC, Christ M, Feuring M, Wehling M. Multiple actions of steroid hormones–a focus on rapid, non-genomic effects. Pharmacol Rev. (2000) 52:513–56.  </p></li><li><p><a href="#b_p1">2. </a>Becker KL. Principles and Practice of Endocrinology and Metabolism. Lippincott Williams &amp; Wilkins (2001).</p></li><li><p><a href="#b_p1">3. </a>Holst JP, Soldin OP, Guo T, Soldin SJ. Steroid hormones: relevance and measurement in the clinical laboratory. Clin Lab Med. (2004) 24:105–18. doi: 10.1016/j.cll.2004.01.004</p></li><li><p><a href="#b_p1">4. </a>Frye CA. Steroids, reproductive endocrine function, and affect. A review. Minerva Ginecol. (2009) 61:541–62.</p></li><li><p><a href="#b_p1">5. </a>Birzniece V. Hepatic actions of androgens in the regulation of metabolism. Curr Opin Endocrinol Diabetes Obes.(2018) 25:201–8. doi: 10.1097/MED.0000000000000405<p id="p2"></p></p></li><li><p><a href="#b_p2">15. </a>Hu J, Zhang Z, Shen WJ, Azhar S. Cellular cholesterol delivery, intracellular<br>processing and utilization for biosynthesis of steroid hormones. Nutr Metab.<br>(2010) 7:47. doi: 10.1186/1743-7075-7-47<p id="p3"></p></p></li><li><p><a href="#b_p3">16. </a>Thigpen AE, Silver RI, Guileyardo JM, Casey ML, Mcconnell JD, Russell DW. Tissue distribution and ontogeny of steroid 5α-reductase isozyme expression. J Clin Invest. (1993) 92:903–10. doi: 10.1172/JCI116665</p></li><li><p><a href="#b_p3">17. </a>El-Awady MK, El-Garf W, El-Houssieny L. Steroid 5α reductase mRNA type 1 is differentially regulated by androgens and glucocorticoids in the rat liver. Endocr J. (2004) 51:37–46. doi: 10.1507/endocrj.51.37<p id="p4"></p></p></li><li><p><a href="#b_p4">18. </a>Livingstone DE, Di Rollo EM, Mak TC, Sooy K, Walker BR, Andrew R. Metabolic dysfunction in female mice with disruption of 5α-reductase 1. J Endocrinol. (2017) 232:29–36. doi: 10.1530/JOE-16-0125<p id="p5"></p></p></li><li><p><a href="#b_p5">19. </a>Zimniak P, Waxman DJ. Liver cytochrome P450 metabolism of endogenous steroid hormones, bile acids, and fatty acids. In: Schenkman JB, Greim H, editors. Cytochrome P450. Berlin, Heidelberg: Springer Berlin Heidelberg (1993) p. 123–44. doi: 10.1007/978-3-642-77763-9_8<p id="p6"></p></p></li><li><p><a href="#b_p6">20. </a>Waxman DJ, Attisano C, Guengerich FP, Lapenson DP. Human liver microsomal steroid metabolism: identification of the major microsomal steroid hormone 6 β-hydroxylase cytochrome P-450 enzyme. Arch Biochem Biophys. (1988) 263:424–36. doi: 10.1016/0003-9861(88)90655-8</p></li><li><p><a href="#b_p6">21. </a>Niwa T, Murayama N, Imagawa Y, Yamazaki H. Regioselective hydroxylation of steroid hormones by human cytochromes P450. Drug Metab Rev. (2015) 47:89–110. doi: 10.3109/03602532.2015.1011658<p id="p7"></p></p></li><li><p><a href="#b_p7">10. </a>You L. Steroid hormone biotransformation and xenobiotic induction of hepatic steroid metabolizing enzymes. Chem Biol Interact. (2004) 147:233–46. doi: 10.1016/j.cbi.2004.01.006<p id="p8"></p></p></li><li><p><a href="#b_p8">23. </a>Wang K, Chen S, Xie W, Wan YJ. Retinoids induce cytochrome P450 3A4 through RXR/VDR-mediated pathway. Biochem Pharmacol. (2008) 75:2204–13. doi: 10.1016/j.bcp.2008.02.030</p></li><li><p><a href="#b_p8">24. </a>Istrate MA, Nussler AK, Eichelbaum M, Burk O. Regulation of CYP3A4 by pregnane X receptor: The role of nuclear receptors competing for response element binding. Biochem Biophys Res Commun. (2010) 393:688–93. doi: 10.1016/j.bbrc.2010.02.058<p id="p9"></p></p></li><li><p><a href="#b_p9">25. </a>Strott CA. Sulfonation and molecular action. Endocr Rev. (2002) 23:703–32. doi: 10.1210/er.2001-0040<p id="p10"></p></p></li><li><p><a href="#b_p10">26. </a>Strott CA. Sulfonation and molecular action. Endocr Rev. (2002) 23:703–32. doi: 10.1210/er.2001-0040<p id="p11"></p></p></li><li><p><a href="#b_p11">27. </a>Runge-Morris M, Wu W, Kocarek TA. Regulation of rat hepatic hydroxysteroid sulfotransferase (SULT2-40/41) gene expression by glucocorticoids: evidence for a dual mechanism of transcription<p id="p12"></p></p></li><li><p><a href="#b_p12">28. </a>Girard C, Barbier O, Veilleux G, El-Alfy M, Belanger A. Human uridine diphosphate-glucuronosyltransferase UGT2B7 conjugates mineralocorticoid and glucocorticoid metabolites. Endocrinology. (2003) 144:2659–68. doi: 10.1210/en.2002-0052<p id="p13"></p></p></li><li><p><a href="#b_p13">29. </a>Vansell NR, Klaassen CD. Increase in rat liver UDP glucuronosyltransferase mRNA by microsomal enzyme inducers that enhance thyroid hormone glucuronidation. Drug Metab Dispos. (2002) 30:240–6. doi: 10.1124/dmd.30.3.240<p id="p14"></p></p></li><li><p><a href="#b_p14">30. </a>Avvakumov GV, Cherkasov A, Muller YA, Hammond GL. Structural analyses of sex hormone-binding globulin reveal novel ligands and function. Mol Cell Endocrinol. (2010) 316:13–23. doi: 10.1016/j.mce.2009.09.005</p></li><li><p><a href="#b_p14">31. </a>Lin HY, Muller YA, Hammond GL. Molecular and structural basis of steroid hormone binding and release from corticosteroid-binding globulin. Mol Cell Endocrinol. (2010) 316:3–12. doi: 10.1016/j.mce.2009.06.015<p id="p15"></p></p></li><li><p><a href="#b_p15">32. </a> Mendel CM. The free hormone hypothesis: a physiologically based mathematical model. Endocr Rev. (1989) 10:232–74. doi: 10.1210/edrv-10-3-232<p id="p16"></p></p></li><li><p><a href="#b_p16">33. </a>Fortunati N, Catalano MG, Boccuzzi G, Frairia R. Sex hormone-binding globulin (SHBG), estradiol and breast cancer. Mol Cell Endocrinol. (2010) 316:86–92. doi: 10.1016/j.mce.2009.09.012</p></li><li><p><a href="#b_p16">34. </a>Hammond GL. Plasma steroid-binding proteins: primary gatekeepers of steroid hormone action. J Endocrinol. (2016) 230:R13–25. doi: 10.1530/JOE-16-0070<p id="p17"></p></p></li><li><p><a href="#b_p17">35. </a>De Moor P, Joossens JV. An inverse relation between body weight and the activity of the steroid binding -globulin in human plasma. Steroidologia. (1970) 1:129–36.<p id="p18"></p></p></li><li><p><a href="#b_p18">36. </a>Javitt NB. Hep G2 cells as a resource for metabolic studies: lipoprotein, cholesterol, and bile acids. FASEB J. (1990) 4:161–8. doi: 10.1096/fasebj.4.2.2153592<p id="p19"></p></p></li><li><p><a href="#b_p19">37. </a>Selva DM, Hogeveen KN, Innis SM, Hammond GL. Monosaccharideinduced lipogenesis regulates the human hepatic sex hormone-binding globulin gene. J Clin Invest. (2007) 117:3979–87. doi: 10.1172/JCI32249<p id="p20"></p></p></li><li><p><a href="#b_p20">38. </a>Selva DM, Hammond GL. Peroxisome-proliferator receptor γ represses hepatic sex hormone-binding globulin expression. Endocrinology. (2009) 150:2183–9. doi: 10.1210/en.2008-1289<p id="p21"></p></p></li><li><p><a href="#b_p21">14. </a>Charni M, Molchadsky A, Goldstein I, Solomon H, Tal P, Goldfinger N, et al. Novel p53 target genes secreted by the liver are involved in non-cell-autonomous regulation. Cell Death Differ. (2016) 23:509–20. doi: 10.1038/cdd.2015.119<p id="p22"></p></p></li><li><p><a href="#b_p22">40. </a> Vandewalle J, Luypaert A, De Bosscher K, Libert C. Therapeutic Mechanisms of Glucocorticoids. Trends Endocrinol Metab. (2018) 29:42–54. doi: 10.1016/j.tem.2017.10.010<p id="p23"></p></p></li><li><p><a href="#b_p23">42. </a>Arlt W, Stewart PM. Adrenal corticosteroid biosynthesis, metabolism, and action. Endocrinol Metab Clin North Am. (2005) 34:293–313. doi: 10.1016/j.ecl.2005.01.002<p id="p24"></p></p></li><li><p><a href="#b_p24">43. </a>Snijdewint FG, Kapsenberg ML, Wauben-Penris PJ, Bos JD. Corticosteroids class-dependently inhibit in vitro Th1- and Th2- type cytokine production. Immunopharmacology. (1995) 29:93–101. doi: 10.1016/0162-3109(94)00048-K</p></li><li><p><a href="#b_p24">44. </a>Yang S, Zhang L. Glucocorticoids and vascular reactivity. Curr Vasc Pharmacol. (2004) 2:1–12. doi: 10.2174/1570161043476483<p id="p25"></p></p></li><li><p><a href="#b_p25">45. </a>Cicognani C, Malavolti M, Morselli-Labate AM, Zamboni L, Sama C, Barbara L. Serum lipid and lipoprotein patterns in patients with liver cirrhosis and chronic active hepatitis. Arch Intern Med. (1997) 157:792–6. doi: 10.1001/archinte.1997.00440280120012<p id="p26"></p></p></li></ol><ol><li><p><a href="#b_p25">45. </a>Cicognani C, Malavolti M, Morselli-Labate AM, Zamboni L, Sama C, Barbara L. Serum lipid and lipoprotein patterns in patients with liver cirrhosis and chronic active hepatitis. Arch Intern Med. (1997) 157:792–6. doi: 10.1001/archinte.1997.00440280120012<p id="p26"></p></p></li><li><p>Tsochatzis EA, Newsome PN. Non-alcoholic fatty liver disease and the interface between primary and secondary care. Lancet Gastroenterol Hepatol. (2018) 3:509–17. doi: 10.1016/S2468-1253(18)30077-3</p></li><li><p>D’souza AM, Beaudry JL, Szigiato AA, Trumble SJ, Snook LA, Bonen A, et al. Consumption of a high-fat diet rapidly exacerbates the development of fatty liver disease that occurs with chronically elevated glucocorticoids. Am J Physiol Gastrointest Liver Physiol. (2012) 302:G850–63. doi: 10.1152/ajpgi.00378.2011</p></li><li><p>Rockall AG, Sohaib SA, Evans D, Kaltsas G, Isidori AM, Monson JP, et al. Hepatic steatosis in Cushing’s syndrome: a radiological assessment using computed tomography. Eur J Endocrinol. (2003) 149:543–8. doi: 10.1530/eje.0.1490543</p></li><li><p>Shen M, Shi H. Sex hormones and their receptors regulate liver energy homeostasis. Int J Endocrinol. (2015) 2015:294278. doi: 10.1155/2015/294278</p></li></ol><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>English Sentences Collection for Sencond Language Learner</title>
      <link href="/LearnNotes/Eng.html"/>
      <url>/LearnNotes/Eng.html</url>
      
        <content type="html"><![CDATA[<h1 id="English-Sentences-Collection-for-Sencond-Language-Learner"><a href="#English-Sentences-Collection-for-Sencond-Language-Learner" class="headerlink" title="English Sentences Collection for Sencond Language Learner"></a>English Sentences Collection for Sencond Language Learner</h1><style type='text/css'>details {  font-size:20px;  padding-top:20px;}details div{  padding-top:10px;  background:#ffe3e0;}details fb{  background:#77C5DB;}details fr{  background:salmon;}details fg{  background:#C1EE91;}</style><p align="center">I am collecting some English sentences for second language learner.<br>Chinese translation where pop up when you click the sentence</p>  <details><summary>    <fb>1.</fb> Gutman <b>gives</b> plantation owners <b>little credit for</b> these achievement.  </summary>                <div class="dropdown_En">                Gutman 没有把这些成功归功于地主们 (GRE Reading)  </div>  </details>  <details><summary>    <fg>2.</fg> He's always trying to <b><a href="https://www.merriam-webster.com/dictionary/ingratiate" target="_blank" rel="noopener">ingratiate</a> himself with</b> the teacher.  </summary>                <div class="dropdown_En">                他总是设法讨好老师 (Shanpei)  </div>  </details>  <details><summary>    <fb>3.</fb> As my won studies <b>have advanced</b>, I have been increasingly impressed.  </summary>                <div class="dropdown_En">                当我的研究取得进展时，我被惊艳到了 (Scientific American)  </div>  </details>  <details><summary>    <fg>4.</fg> The country's population <b>has dwindled to</b> half of its former size.  </summary>                <div class="dropdown_En">                这个国家的人口已经缩减到了从前的一半 (Shanbei)  </div>  </details>  <details><summary>    <fg>5.</fg> His grandfather hired two <b><a href="https://www.merriam-webster.com/dictionary/itinerate" target="_blank" rel="noopener">itinerate</a> farm workers</b>.  </summary>                <div class="dropdown_En">                他祖父雇佣了两名农场短工 (Shanbei)  </div>  </details>  <details><summary>    <fr>6.</fr> Unhappily, some of <a href="https://www.merriam-webster.com/dictionary/frailties" target="_blank" rel="noopener">frailties</a>—our need for <b>ever-increasing security</b> among them—are presently <a href="https://www.merriam-webster.com/dictionary/maladaptive" target="_blank" rel="noopener">maladaptive</a> today.  </summary>                <div class="dropdown_En">                不幸的是，这些弱点中的一些弱点——包括我们对不断增加的安全感的需求——目前不适应人类发展 (GRE Reading, Adapted)<br>  </div>  </details>  <details><summary>    <fb>7.</fb> He has showed <b><a href="https://www.merriam-webster.com/dictionary/xenophobic" target="_blank" rel="noopener">xenophobic</a> sentiment</b> to <b>bitterly oppose</b> immigration policy.  </summary>                <div class="dropdown_En">                他强烈反对移民政策, 表现出了排外情绪 (Shanbei)<br>  </div>  </details>  <details><summary>    <fr>8.</fr> <b>Whether</b>  this  resistance  <b>results</b> (resistence the growth of harmful fungi)  <b>from</b>  exclusion  of  harmful  fungi  through competition  for  sites<b>,  from</b>  metabolic  change  involving  antibiotic  production<b>,  or  from</b> increased <a href="https://www.merriam-webster.com/dictionary/vigor" target="_blank" rel="noopener">vigor</a>  <B>is undetermined</B>.  </summary>                <div class="dropdown_En">                植物抵抗力的增加是来自地盘的争夺以抵抗有害真菌，来自抗菌素产生的变化，还是来自活力的增强，这到现在还未确定 (GRE Reading)<br>    Wheter xxx results from xxx, from xxx, or from xxx is undetermined.<br>  </div>  </details>  <details><summary>    <fg>9.</fg> Mycorrhizal fungi <b>have escaped</b> widespread investigation until recently for two    reasons.  </summary>                <div class="dropdown_En">                根菌由于一下俩个原因而未被广泛研究 (GRE, Adapted)<br>    Generaly, fungi can not escape from the research. So, it is an rhetorical style.<br>    真菌是无法主动逃脱研究员的调查, 因此这里可以算一种拟人修饰.  </div>  </details>  <details><summary>    <fg>10.</fg> The fungi cannot <b>as yet</b> be cultivated in the absence of living root.  </summary>                <div class="dropdown_En">                这种真菌目前还<b>不能</b>在没有活根的情况下所培养(GRE Reading)<br>    As yet, 目前为止<br>  </div>  </details>  <details><summary>    <fg>11.</fg> Your refusal to answer will <b>be regarded as tantamount to</b> an admission of guilt.  </summary>                <div class="dropdown_En">                你拒绝回答将被视作等同于承认有罪(Shanbei)<br>    1. regard as...  2. tantamount to...<br>  </div>  </details>  <details><summary>    <fr>12.</fr> <b>Not even remotely</b>, the additional input of thermal energy into the circulating    refrigerant via the evaporator <u>accounts for</u> the difference in the energy equation.  </summary>                <div class="dropdown_En">                一点也没有. 额外通过蒸发机而输入到循环流动制冷剂中的热量,就使得输入能量与输出能量不对等(输入大于输出)(GRE Reading)<br>    accounts for... the difference in the energy equation.<br>    注:全句的动词为accounts  </div>  </details>  <details><summary>    <fg>13.</fg> Demand for new machine is <b>outstripping</b> supply.  </summary>                <div class="dropdown_En">                新机器目前供不应求<br>    outstripping supply  </div>  </details>  <details><summary>    <fr>14.</fr> Even the requirement that biomaterials processed from these materials be    nontoxic to host tissue <b>can be meet by</b> techniques derived from studying the    reactions of tissue cultures to biomaterials or from short-term implants.  </summary>                <div class="dropdown_En">                即使生物材料对宿主的无毒性也<b>可以通过</b>观察培养组织对生物材料的反应,或者短期移植的应激反应    的技术手段<b>来实现</b>(GRE Reading)<br>    "A can be meet by B" mean by doing B, we could achive or aquire A.<br>    可以通过做 A(a perpose, result, commodity, etc. ) 来实现/获得 B  </div>  </details>  <details><summary>    <fg>15.</fg> Our fundamental understanding of how implant devices adhere to tissues    <b>remains woefully incomplete</b>.  </summary>                <div class="dropdown_En">                我们对于移植材料和(受体)组织是如何粘合的基础认识都是非常不完善的 (GRE Reading)<br>    woefully 做程度副词 表示负状态的 "非常的"...  </div>  </details>  <details><summary>    <fg>16.</fg> I used to <b>be petrified of</b> spiders when I was a kid.  </summary>                <div class="dropdown_En">                我小时候只要看见蜘蛛就会被吓的僵硬(Shanbei)<br>    Notice: be petrified <b>of</b>; <s>be petrified by/with</s><pre><code>&lt;br&gt;</code></pre>  </div>  </details>  <details><summary>    <fg>17.</fg> He drank <b>copious amounts of</b> beer.  </summary>                <div class="dropdown_En">                他喝了大量的酒(Shanbei)<br>    <br>  </div>  </details>  <details><summary>    <fr>18.</fr> Jean Wagner's most <b>enduring contribution</b> to the study of    Afro-American poetry is his <b>insistence</b> that it be analyzed in a    religious, <b>as well as</b> secular, frame of reference.  </summary>      <div class="dropdown_En">                Jean  Wagner在黑人诗歌方面最深远的贡献是他的主张:    这些诗歌应该拿宗教和世俗的的框架来参考(他们的价值) (GRE Reading)<br>    <u>endring contribution</u>, long-lasting contribution...<br>    <u>his insistence</u>, his idea, his perspective, his piontview, his standpoint...    <br>  </div>  </details>  <details><summary>    <fr>19.</fr> The two, he argued, form a symbiotic union in which religious    feelings are often applied to racial issues and racial problems are often      <b>projected onto a metaphysical plane</b>.  </summary>                <div class="dropdown_En">                他认为, 这两个手法被变成老人一个共生体:    用宗教的情感去述说种族问题,    把种族问题投射到形而上学的层面,    (GRE Reading)<br>    <u>endring contribution</u>, long-lasting contribution...<br>    his <u>insistence</u>, his idea, his perspective, his piontview, his standpoint...    <br>  </div>  </details>  <details><summary>    <fg>20.</fg> No matter what happens, he always has <b>an air of detachment</b>.  </summary>                <div class="dropdown_En">                無論發生了什麼, 他都是一副事不關己的態度.    (Shanbei)  </div>  </details>  <details><summary>    <fg>21.</fg> Due to <b>a slight technical hitch</b> the meeting will be starting fifteen    minutes later.  </summary>                <div class="dropdown_En">                由於技術故障的原因,會議將會被推遲15min.    (Shanbei)  </div>  </details>  <details><summary>    <fg>22.</fg> She didn't want to take on a job that would <b>entail</b> a lot of travelling.  </summary>                <div class="dropdown_En">                她不想找一個經常出差的工作.    (Shanbei)  </div>  </details>  <details><summary>    <fg>23.</fg> My interest in painting was purely <b>perfunctory</b>.  </summary>                <div class="dropdown_En">                我對畫畫完全只有3分熱度.(我只是不得以才敷衍一下隨便畫畫)    (Shanbei)  </div>  </details>  <details><summary>    <fg>24.</fg> My time is too valuanle to waste on <b>frivolous</b> games.  </summary>                <div class="dropdown_En">                我的時間非常寶貴,纔不能浪費在遊戲上.    (Shanbei)  </div>  </details>  <details><summary>    <fg>25.</fg> We're all impressed by her <b>ebullient</b> personality.  </summary>                <div class="dropdown_En">                我們都被她元氣滿滿的性格給驚豔到了.    (Shanbei)<br>    ebullient: 充滿自信的, 熱情洋溢的,精力充沛的  </div>  </details>  <details><summary>    <fg>26.</fg> The charming <b>pastoral</b> scenery attracted plenty of tourists.  </summary>                <div class="dropdown_En">                迷人的田園風景吸引來了很多遊客.    (Shanbei)<br>    有了 PASTORAL, 再也不用寫the scenery of village 了  </div>  </details>  <details><summary>    <fg>27.</fg> I <b>balked</b> at <u>the prospect of</u> spending over 12 hours on the train.  </summary>                <div class="dropdown_En">                想到要在火車上呆12個多小時, 我猶豫了.    (Shanbei)<br>    <b>Balk</b>: hesitate. Balked at<br>    the prospect of....  </div>  </details>  <details><summary>    <fb>28.</fb> Sushi is a <b>quintessential</b> Japanesse <b>cuisine</b>.  </summary>                <div class="dropdown_En">                壽司是一種典型的日料.    (Shanbei)<br>    <b>Quintissential</b>: typical, essentric<br>    <b>Cuisine</b>:\ kwi-ˈzēn \, style of cooking.  </div>  </details>  <details><summary>    <fg>29.</fg> Is English a <b>compulsory</b> subject?  </summary>  <div class="dropdown_En">    英語是必修科目嘛？    (Shanbei)<br>    <b>Compulsory</b>: 必修的，強制執行的<br>    <b>Compulsory Subject</b>: 必修課  </div></details>  <details><summary>    <fg>30.</fg> The loss of protein is an obvious feature during <b>senescence</b>.  </summary>  <div class="dropdown_En">    蛋白質流失是衰老過程中的典型特徵。    (Shanbei)<br>    <b>Senescence</b> aging 的最好替代辭  </div></details>  <details><summary>    <fg>31.</fg> Having <b>surfeited</b> himself on ice cream, he skipped the dinner.  </summary>  <div class="dropdown_En">    由於吃冰太多淇淋吃到噁心了，他不吃晚飯了。    (Shanbei)<br>    <b>Sufeit</b>: 1, an overabundant supply; 2, disgust casued by excess<br>  </div></details>  <details><summary>    <fg>32.</fg> My friends keep <b>badgering</b> me to buy that washing machine.  </summary>  <div class="dropdown_En">    我的朋友不斷的纏著讓我買洗衣機。    (Shanbei)<br>    <b>Bagering</b>: 1,to harass or urge persistently; pester; nag.<br>  </div></details>  <details><summary>    <fb>33.</fb> The overall task looks forbidding, but the stakes are <b>too high not to</b> undertake.  </summary>  <div class="dropdown_En">    整個任務看起來幾乎做不到，但是由于他的代價太高而(我們)不得不做到。    (GRE Reading)<br>  </div></details>  <details><summary>          <fg>34.</fg> The new drug has an <b>adverse impact</b> on human healt.  </summary>  <div class="dropdown_En">    這個新藥有損健康(副作用)    (Shanbei)<br>    <b>Adverse impact</b>: side effect<br>  </div></details>  <details><summary>    <fg>35.</fg> The sun <b>dissipated</b> the mist.  </summary>  <div class="dropdown_En">    陽光把霧驅散了。    (Shanbei)<br>  </div></details>  <details><summary>    <fg>36.</fg> It would be <b>imprudent</b> to put all your eggs in one basket.  </summary>  <div class="dropdown_En">    把所有雞蛋放在一個籃子裏是不明智的.    (Shanbei)<br>    <b>Imprudent</b>:  </div></details>  <details><summary>    <fr>37.</fr> The food spplies necessary to sustain the large vent communities, <b>however</b>, must be many times the ordinary fallout.  </summary>  <div class="dropdown_En">    热泉口的生物群落所需的食物是正常掉落食物量的好几倍.    (GRE Reading)<br>    <b>Ordinary order</b>: The food must be many times the ordinary fallout <b>supplies necessary</b> to sustain the large vent communities.<br>    Verb: Supplies  </div></details>  <details><summary>    <fb>38.</fb> <b>If</b> such astonishing concentrations of bacteria were typical of vent outflow,    <b>then</b> food within the vent would dwarf any contributions from advection.  </summary>  <div class="dropdown_En">    如果如此大量的细菌是热泉的典型特征的话,那么漂流对热泉中总食物量的贡献几乎为零    (GRE Reading)<br>    <b>If...than</b>; <b>dwarf any contributions</b>  </div></details>  <details><summary>    <fb>39.</fb> No other communities on Earth are <b>independent of</b> photosythesis.  </summary>  <div class="dropdown_En">    地球上没有除此外的群落可以独立于光合作用(营生).    (GRE Reading)<br>    <b>independent of</b>:  </div></details>  <details><summary>    <fb>40.</fb> Why, then, was it Friedan who became <b>the prophet of women's emancipation</b> in the United States?  </summary>  <div class="dropdown_En">    那麼爲什麼Friedan成了美國的婦女解放者先驅?    (GRE Reading)<br>    <b>the prophet of women's emancipation</b>: prophet 常用的意思是 on who foretells future events;<br>    這裏的意思爲: an effective or leading spokesman for a cause, doctrine, or group. 先驅, 領頭人, 發言人.<br>    因此這裏爲, 女性解放的先驅(領導者, 倡導者)  </div></details>  <details><summary>    <fb>41.</fb> The country had entered the silent, fearful fortress of the anticommunist McCarthy years,    and Beauvoir was suspected of <b>Marxist sympathies</b>.  </summary>  <div class="dropdown_En">    整個國家陷入了沉默,恐慌的反共產主義的堡壘中 McCarthy 年代, 而 Beauvoir 被懷疑成了馬克思主義信仰者.    (GRE Reading)<br>  </div></details>  <details><summary>    <fb>42.</fb> A good dictionary is <b>indispensable</b> for learning a foreign languiage.  </summary>  <div class="dropdown_En">    一個好的詞典對於學一門外語來說, 是不可或缺的.    (Shanbei)<br>    <b>indispensable</b>: 不可或缺的  </div></details>  <details><summary>    <fb>43.</fb> The educationist advocates analytical thinking, rather than <b>rote</b> learning.  </summary>  <div class="dropdown_En">    這個教育家提倡用分析性的思維學些, 而不是死記硬背型的學習    (Shanbei)<br>    <b>rote learning</b>  </div></details>  <details><summary>    <fr>44.</fr> The growing emphasis on <b>deterrence</b> is bound to offer <b>increasing scope</b>    for women to become involved in novel types of <b>noncombat military assignments</b>.  </summary>  <div class="dropdown_En">    軍事威懾重要性的增強, 增加了 女性 在典型的非戰鬥方面的軍事任務 的用武之地 的範圍.    (GRE)<br>  </div></details>  <details><summary>    <fr>45.</fr> Why then the two years that passed before he translated his <b>private misgivings</b> into <b>public dissent</b>.  </summary>  <div class="dropdown_En">    爲什麼過了兩年, 他(馬丁路德金)才把他的個人懷疑(異議)轉化成了公衆異議?    <b>misgiving</b>: A feeling of doubt or suspicion especially concerning a future event.</br>    <b>dissent</b>: To differ in opinion    (GRE)<br>  </div></details>  <details><summary>    <fb>46.</fb> Members of the union's negotiating team insisted on several changes to the company's proposal before they would support it,    making it clear that they would <b>brook no compromise</b>.  </summary>  <div class="dropdown_En">    聯會的談判隊伍的人員堅持改變公司的幾個提議才能獲得他們的支持, 並且很清楚的表示沒有妥協的餘地.<br>    <b>brook no compromise</b>: 忍受沒有的妥協 -- 無法忍受(自己)妥協;不可能做出妥協. (GRE)<br>    相似表達: touch nothing! (什麼都別碰)    <br>  </div></details>  <details><summary>    <fb>47.</fb> Films that critics have slumbered through rarely generate industry excitement, even though the critics' <b>somnolent/lethargic</b>    reception may be less the fault of the movie than of its unfortunate time slot near a fatiguing film festival's conclusion.  </summary>  <div class="dropdown_En">    Ummmmm, 我先多看幾遍.<br>    (GRE 填空)<br>  </div></details>  <details><summary>    <fb>48.</fb> Even though women in U.S. <b>would not</b> gain right to vote <b>until</b> 1920, throughout the 19-century many feminist goals were gradually    realized/achieved, especially the right of married women to control their own property.  </summary>  <div class="dropdown_En">    19世紀, 女權主義開始慢慢的形成, 尤其是婚後女性的財產所有權, 儘管1920年, 美國才通過了女性投標選舉的權利<br>    <b>would not... until</b><br>(GRE 填空)  </div></details>  <details><summary>    <fr>49.</fr> A new television documentary focuses on one of the prime minister's defining contradiction portraying her as a woman who cultivated an image    of <b>abstemiousness</b>, but who liked to live grandly.  </summary>  <div class="dropdown_En">    一個新的電視紀錄片專注於一個首相的矛盾, 並把她描繪成一個被培養成了一個有節制的人, 但是她卻想過非常grandly的生活<br>    <b>gradnly / abstemiousness</b> 這裏做了一組反義詞. 但是我, 想不出, 太好的, 翻譯 - - 唉...<br>(GRE 填空)  </div></details>  <details><summary>    <fr>50.</fr> So far, researchers have found no evidence of seasonal breading among vent-dewlling species that provide their offspring with yolk to    sustain them or among vent-dwelling species found in areas of the ocean with not seasonal algae blooms.  </summary>  <div class="dropdown_En">    哈哈哈, 反正我看懂了, 你們先自己想一下<br>(GRE Reading)  </div></details>  <details><summary>    <fg>51.</fg> who's up, who's down and who's chiseling on the side.  </summary>  <div class="dropdown_En">    誰得誰失,誰在背後操盤<br>(James Reston)  </div></details>  <details><summary>    <fg>52.</fg> <b>By sheer fluke</b>, one of the shipowner's epmployees was in the city.  </summary>  <div class="dropdown_En">    <b>非常湊巧的是</b>, 船主人的一個水手就在這個城<br>(Shanbei)  </div></details>  <details><summary><fb>53.</fb> Of course, there is <b>far more oil underground than can be recovered</b>. It may be in a pool too small or too far from a potential market to <b>justify</b> the expense of drilling.</summary><div class="dropdown_En">  事實上，未被開採的油田遠比被開採的多。他們可能因量太少，或者太偏僻而使得開採成本高於投入(而未被開採)<br>  (TOEFL Reading 4-3)</div></details><details><summary>  <fg>54.</fg> To indicate that supposed proof for Heyerdahl’s theory has <b>an alternative explanation</b>.</summary><div class="dropdown_En">  爲了表明，Heyerdahl的假說的論點有其他可選方案<br>  (說明，Heyerdahl 的假說， 可能是錯誤的， 或可能性很低)  (TOEFL Reading 5-2)</div></details><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili: <a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</title>
      <link href="/LearnNotes/Paper_RNASeq_Fish1.html"/>
      <url>/LearnNotes/Paper_RNASeq_Fish1.html</url>
      
        <content type="html"><![CDATA[<h1 id="Transcriptomic-analysis-of-juvenile-Chinese-sea-bass-Lateolabrax-maculatus-anesthetized-by-MS-222-tricaine-methanesulfonate-and-eugenol"><a href="#Transcriptomic-analysis-of-juvenile-Chinese-sea-bass-Lateolabrax-maculatus-anesthetized-by-MS-222-tricaine-methanesulfonate-and-eugenol" class="headerlink" title="Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol"></a>Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</h1><p>Cite: Dong, H., Wang, W., Duan, Y. et al. Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol. Fish Physiol Biochem (2020). <a href="https://doi.org/10.1007/s10695-019-00755-x" target="_blank" rel="noopener">https://doi.org/10.1007/s10695-019-00755-x</a></p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="Statistic-information"><a href="#Statistic-information" class="headerlink" title="Statistic information"></a>Statistic information</h2><table><thead><tr><th align="center">Content</th><th align="center">Words</th><th align="center">Ratio</th></tr></thead><tbody><tr><td align="center">Total Words</td><td align="center">3624</td><td align="center">100%</td></tr><tr><td align="center">Abstract</td><td align="center">306</td><td align="center">8.43%</td></tr><tr><td align="center">Introduction</td><td align="center">512</td><td align="center">14.11%</td></tr><tr><td align="center">M&amp;M</td><td align="center">685</td><td align="center">18.88%</td></tr><tr><td align="center">Results</td><td align="center">821</td><td align="center">22.63%</td></tr><tr><td align="center"><strong>Discussion</strong></td><td align="center">1300</td><td align="center">35.83%</td></tr></tbody></table><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a href="https://baike.baidu.com/item/%E8%8A%B1%E9%B2%88/901118?fromtitle=%E4%B8%AD%E5%9B%BD%E8%8A%B1%E9%B2%88&fromid=9645483" target="_blank" rel="noopener"><em>Lateolabrax maculatus</em></a>:</p><p><img src="http://m.qpic.cn/psc?/V12yEYVQ115d6d/PH*WNmm91dtUAbGDTrti4QL8R.ktu3X7BJDL02jmjA*XIDyh7*.gFdYmEl7FFvTGBwaPM.fYmAF83sghSqkqug!!/b&bo=gALqAAAAAAARB1g!&rf=viewer_4" alt="avatar"><br>(copyright: <a href="http://pic.cas.cn" target="_blank" rel="noopener">http://pic.cas.cn</a>)</p><p>MS-222 &amp; eugenol: Fish anesthetics.</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>M &amp; E are two widely used fish anesthetics.</li><li>This experiment reveals the transcriptomic changing during the recovering from fish anesthetics (6h after treated).</li><li>RNA from gills and livers were extracted and compared.</li><li>Non essential data filled here.</li><li>Some DEGs participated in human disease and metabolism.(ps: ummmm…WHAT? = =)</li><li>Two treatment interested different pathways.</li><li>MS-222 may affect metabolism and immunity and more harmful than eugenol.</li></ol><p>PS: <em>Abstract</em> briefly introduced the purpose &amp; results of the experiment. First, it revealed the toxicity of two anesthetics, and second, it can improve our understanding on some human diseases(maybe??) and the detoxification of the fish in the transcription level.</p><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>P1: What is anesthetics; The contribution of anesthetics; Which anesthetics are available; How do them work;  </p><p>P2: Wide geography-distribution(It’s an important commercial species). Anesthetic could reduce the mortality during transportation.</p><p>P3: Some related experiments had done but not on the same page. So, with the evidences of this experiment, people can make a better choice between MS-222 and eugenol.  </p><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><p>Skip (^ ^ )</p><ul><li>Animal</li><li>Sample extraction</li><li>RNA extraction, library preparation, and Illumina Hiseq<br>sequencing</li><li>De novo assembly and annotation</li><li>Differentially expressed genes</li><li>Single nucleotide polymorphism and simple sequence<br>repeat detection</li></ul><h1 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h1><ul><li>Transcriptome sequence assembly</li><li>Annotation and function analysis</li><li>Differentially expressed genes</li><li>SNP and SSR detection</li></ul><blockquote><h2 id="Transcriptome-sequence-assembly"><a href="#Transcriptome-sequence-assembly" class="headerlink" title="Transcriptome sequence assembly"></a>Transcriptome sequence assembly</h2><ul><li>Raw reads<ul><li>Clean reads</li><li>Unigenes</li><li>Annotated Genes</li></ul></li></ul><h2 id="Annotation-and-function-analysis"><a href="#Annotation-and-function-analysis" class="headerlink" title="Annotation and function analysis"></a>Annotation and function analysis</h2><ul><li>COG (p1)</li><li>GO (p2)</li><li>KEGG (p3)  </li></ul><p>Table (sample, Raw reads)</p><h2 id="Differentially-expressed-genes"><a href="#Differentially-expressed-genes" class="headerlink" title="Differentially expressed genes"></a>Differentially expressed genes</h2><ul><li>Unigenes  <ul><li>DEGs count(unique genes, annotated genes)</li><li>(Charts &amp; tables)</li></ul></li><li>GO<ul><li>Unique/interested  Go-Terms</li><li>Charts</li></ul></li><li>KEGG<ul><li>Unique/interested pathways  </li></ul></li></ul><h2 id="SNP-and-SSR-detection"><a href="#SNP-and-SSR-detection" class="headerlink" title="SNP and SSR detection"></a>SNP and SSR detection</h2><p>Skip</p></blockquote><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><h2 id="P1-General-result-from-DEGs"><a href="#P1-General-result-from-DEGs" class="headerlink" title="P1-General result from DEGs"></a>P1-General result from DEGs</h2><ol><li><strong>Less DEGs</strong> found in eugenol-treated livers sample</li><li>Pathways associated with human diseases and metabolism were found in <strong>both samples</strong>.  </li><li>E group is intrested in <strong>detoxification</strong> and <strong>xenobiotics</strong>; M group is interested in <strong>organismal system</strong></li></ol><h2 id="P2-Comparative"><a href="#P2-Comparative" class="headerlink" title="P2-Comparative"></a>P2-Comparative</h2><ol><li><strong>Stress</strong><pre class="mermaid">graph LR;Stress-->|Stress Related|Diseases;Diseases-->|Change|Oxidants;Diseases-->|Change|Anesthetic;Diseases-->|Change|Antioxidants;Antioxidants-.->|Reduce|Stress;</pre></li><li><strong>Eugenol is less harmful than MS-222</strong></li></ol><ul><li>Eugenol group: 22 DEGs involved in 30 different pathways related xenobiotics biodegradation and metabolism, which means <span style="color:salmon;"><b>detoxification activities of the livers</b></span>.</li><li>MS-222 group: higher levels of AST, ALT, AKP, which reveals MS-222 cause <span style="color:salmon;"><b>more damages to livers</b></span>.(explain: can not be metabolized)</li></ul><ol start="3"><li><strong>GST</strong> (Glutathione-S-transferase)</li></ol><ul><li>BG: low activity of GST means low detoxification ability.</li><li>Different responses of facing MS-222 in different species from previous research.</li><li>Our result: <em>L. maculatus</em> is more vulnerable.</li></ul><ol start="4"><li><strong>A smaller number of DEGs</strong> may reveals lees intervention of E  compared with M. (PS: = = smaller…)</li><li>Additionally, eugenol is <strong>natural</strong> and may easier to metabolized.<br>(PS: … Good, I just learned another skill to fill more words on discussion section)</li></ol><h2 id="P3-Stress-amp-Metabolism"><a href="#P3-Stress-amp-Metabolism" class="headerlink" title="P3 Stress &amp; Metabolism"></a>P3 Stress &amp; Metabolism</h2><ol><li>BG: liver glucose oxidation is enhanced. Amino acid evolved in gluconeogenesis during the stress responses.</li><li>Those pathways are <strong>enriched in both groups</strong>.</li><li>Recent start verified <em>point 1</em>.</li></ol><h2 id="P4-Pathways-involved-in-environmental-information-processing"><a href="#P4-Pathways-involved-in-environmental-information-processing" class="headerlink" title="P4 Pathways involved in environmental information processing"></a>P4 Pathways involved in environmental information processing</h2><ul><li>Jak-STAT signaling, PI3KAkt signaling, TNF signaling, and cytokine-cytokine receptor interaction.</li><li>BG: HPI-&gt;Cotisol; stress can inhibit inflammatory cytokine production and induce apoptosis, proliferation, and phagocytosis of immune cells.<br>Here: More DEGs related immune-related pathways are found in E group.</li><li>BG: stress affects HPG and may affect reprodctive performance;<br>Here: Some DEGs involved in productive activities are found in M group.</li><li>BG: Lethimonier observed that stress-induced cortisol inhibited vitellogenesis,<br>Here: We found it here, too.</li><li>Conclusion: MS-222 is more harmful than eugenol.</li></ul><h2 id="P5-Gill-amp-Livers"><a href="#P5-Gill-amp-Livers" class="headerlink" title="P5 Gill &amp; Livers"></a>P5 Gill &amp; Livers</h2><p>Result:  not change the original functions of the organs</p><h2 id="P6-Conclusion"><a href="#P6-Conclusion" class="headerlink" title="P6 Conclusion"></a>P6 Conclusion</h2><p>MS-222 revealed that all these anesthetics regulate the metabolic and immune pathways in the fish, and MS-222 may trigger more damages on the fish liver and reproduction.</p><hr><h1 id="Related-papers"><a href="#Related-papers" class="headerlink" title="Related papers:"></a>Related papers:</h1><p>Morais S, Pratoomyot J, Taggart JB, Bron JE, Guy DR, Bell JG, Tocher DR (2011b) Genotype-specific responses in Atlantic salmon (Salmo salar) subject to dietary fish oil replacement by vegetable oil: a liver transcriptomic analysis. BMC Genomics 12:255</p><p>Morais S, Edvardsen RB, Tocher DR, Bell JG (2012a) Transcriptomic analyses of intestinal gene expression of juvenile Atlantic cod (Gadus morhua) fed diets with Camelina oil as replacement for fish oil. Comp Biochem Physiol B Biochem Mol Biol 161:283–293.  </p><p>Tacchi L, Secombes CJ, Bickerdike R, Adler MA, Venegas C, Takle H, Martin SA (2012)  Transcriptomic and physiological responses to fishmeal substitution with plant proteins in formulated feed in farmed Atlantic salmon (Salmo salar). BMC Genomics 13:363</p><hr><h1 id="Related-Notes"><a href="#Related-Notes" class="headerlink" title="Related Notes:"></a>Related Notes:</h1><p><a href="paperrnaseqfish2">De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</a></p><p><a href="paperrnaseqfish3">Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</a></p><p><a href="paperrnaseqfish4">Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</title>
      <link href="/LearnNotes/Paper_RNASeq_Fish2.html"/>
      <url>/LearnNotes/Paper_RNASeq_Fish2.html</url>
      
        <content type="html"><![CDATA[<h1 id="De-novo-characterization-of-the-liver-transcriptome-of-javelin-goby-Synechogobius-hasta-and-analysis-of-its-transcriptomic-profile-following-waterborne-copper-exposure"><a href="#De-novo-characterization-of-the-liver-transcriptome-of-javelin-goby-Synechogobius-hasta-and-analysis-of-its-transcriptomic-profile-following-waterborne-copper-exposure" class="headerlink" title="De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure"></a>De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</h1><p>Cite: Chen, Q., Luo, Z., Huang, C. et al. De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure. Fish Physiol Biochem 42, 979–994 (2016). <a href="https://doi.org/10.1007/s10695-015-0190-2" target="_blank" rel="noopener">https://doi.org/10.1007/s10695-015-0190-2</a></p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="Statistic-information"><a href="#Statistic-information" class="headerlink" title="Statistic information"></a>Statistic information</h2><table><thead><tr><th align="center">Content</th><th align="center">Words</th><th align="center">Ratio</th></tr></thead><tbody><tr><td align="center">Total Words</td><td align="center">5424</td><td align="center">100%</td></tr><tr><td align="center">Abstract</td><td align="center">234</td><td align="center">4.31%</td></tr><tr><td align="center">Introduction</td><td align="center">598</td><td align="center">11.03%</td></tr><tr><td align="center">M&amp;M</td><td align="center">1475</td><td align="center">27.19%</td></tr><tr><td align="center">Results</td><td align="center">1143</td><td align="center">21.07%</td></tr><tr><td align="center"><strong>Discussion</strong></td><td align="center">1974</td><td align="center">36.39%</td></tr></tbody></table><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a href="https://baike.baidu.com/item/%E6%B2%99%E5%85%89%E9%B1%BC/1203814?fromtitle=%E7%9F%9B%E5%B0%BE%E5%A4%8D%E8%99%BE%E8%99%8E%E9%B1%BC&fromid=12760397" target="_blank" rel="noopener"><strong><em>Synechogobius hasta</em></strong></a>:<br><img src="http://a0.att.hudong.com/53/60/01300000274589122785607359638.jpg" alt="img"><br>Img from: <a href="https://pai-hang-bang.cn/tujie/%E7%9F%9B%E5%B0%BE%E5%A4%8D%E9%B0%95%E8%99%8E%E9%B1%BC.htm" target="_blank" rel="noopener">link</a></p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>Physiological study of S. hasta exposure to the Cu is studied, but <strong>RNA-Seq is not</strong>. (PS: this experiment is <strong>Unique</strong>)</li><li>Some <strong>Statistic information</strong> from RNA-seq.</li><li>Major change of <strong>pathways</strong> are…</li><li>This experiment is pretty useful.</li></ol><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>P1: Cu contamination is harmful. <strong>Comprehensive understanding</strong> of the mechanisms is lack.<br>P2: Problems caused by Cu exposure are <strong>too complicate to</strong> be explained by few regulatory entities, as a result, a whole gene expression profiling is need.<br>P3: Though, previous studies find that lipid deposition and metabolic activity were changed,they focus on <strong>few genes only</strong>. Now, it is the first time for people profiling the RNA-Seq of this species.</p><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><ul><li>Fish and Cu exposure</li><li>Sampling and total RNA extraction</li><li>cDNA library preparation and Illumina sequencing</li><li>De novo assembly and function annotation</li><li>Identification of differentially expressed genes</li><li>Real-time quantitative PCR (qPCR) validation</li><li>Statistical analysis</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><ul><li>Illumina sequencing and de novo transcriptome assembly</li><li>Function annotation and classification of unigenes</li><li>Differentially expressed genes involved in immune system</li><li>Differentially expressed genes involved in apoptosis</li><li>Differentially expressed genes involved in signal transduction</li><li>Validation of differential gene expression by qPCR<blockquote><h2 id="Illumina-sequencing-and-de-novo-transcriptome-assembly"><a href="#Illumina-sequencing-and-de-novo-transcriptome-assembly" class="headerlink" title="Illumina sequencing and de novo transcriptome assembly"></a>Illumina sequencing and de novo transcriptome assembly</h2><p>Reads and Assemble result statistic with tables.</p><h2 id="Function-annotation-and-classification-of-unigenes"><a href="#Function-annotation-and-classification-of-unigenes" class="headerlink" title="Function annotation and classification of unigenes"></a>Function annotation and classification of unigenes</h2><ol><li>Annotation software and data base, figures and tables.</li><li>GO ontology: statistic; tables; charts.</li><li>KEGG ontology: statistics and examples<h2 id="Differentially-expressed-genes-involved-in-immune-system"><a href="#Differentially-expressed-genes-involved-in-immune-system" class="headerlink" title="Differentially expressed genes involved in immune system"></a>Differentially expressed genes involved in immune system</h2>Fatty acid metabolism was changed, pathway charts was insert.<h2 id="Differentially-expressed-genes-involved-in-immune-system-1"><a href="#Differentially-expressed-genes-involved-in-immune-system-1" class="headerlink" title="Differentially expressed genes involved in immune system"></a>Differentially expressed genes involved in immune system</h2>Changes in some specific pathways with table<h2 id="Differentially-expressed-genes-involved-in-apoptosis"><a href="#Differentially-expressed-genes-involved-in-apoptosis" class="headerlink" title="Differentially expressed genes involved in apoptosis"></a>Differentially expressed genes involved in apoptosis</h2>Genes Change in apoptosis pathway with charts<h2 id="Differentially-expressed-genes-involved-in-signal-transduction"><a href="#Differentially-expressed-genes-involved-in-signal-transduction" class="headerlink" title="Differentially expressed genes involved in signal transduction"></a>Differentially expressed genes involved in signal transduction</h2>MAPK and NF<sub>k</sub>B; tables.<h2 id="Validation-of-differential-gene-expression-by-qPCR"><a href="#Validation-of-differential-gene-expression-by-qPCR" class="headerlink" title="Validation of differential gene expression by qPCR"></a>Validation of differential gene expression by qPCR</h2>The expression levels of 25 genes was validate.</li></ol></blockquote></li></ul><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><ul><li>Liver transcriptome of S. hasta generated by RNAseq</li><li>Differentially expressed genes involved in lipid metabolism</li><li>Differentially expressed genes involved in immune system</li><li>Differentially expressed genes involved in apoptosis</li><li>Differentially expressed genes involved in signal transduction</li></ul><h2 id="Liver-transcriptome-of-S-hasta-generated-by-RNAseq"><a href="#Liver-transcriptome-of-S-hasta-generated-by-RNAseq" class="headerlink" title="Liver transcriptome of S. hasta generated by RNAseq"></a>Liver transcriptome of S. hasta generated by RNAseq</h2><ol><li>Statistic information of De novo result. (PS: you may think this things was mentioned before. Yes, it is, But here, the author made a <span style="color:salmon;"><b>comparing with other species</b></span>. So, it is ok to recite them again)</li><li>COG is useful, GO is useful, KEGG is useful. (PS: What the hex??? Probably is because this paper was published in 2015. So, it might be done at 2014 or even earlier.)</li></ol><h2 id="Differentially-expressed-genes-involved-in-lipid-metabolism"><a href="#Differentially-expressed-genes-involved-in-lipid-metabolism" class="headerlink" title="Differentially expressed genes involved in lipid metabolism"></a>Differentially expressed genes involved in lipid metabolism</h2><ol><li>General background information and cited a bunch of recent study(PS: his study).</li><li>But the RNA-Seq is absent. So, this experiment is useful and meaningful.(PS: Again, recite the lyrics from the Abstract and Introduction)</li><li>It provide the evidences of mitochondrial damage and inhibition of B-oxidation. (PS: Gosh, finally, we see something new. And end of this section.)</li></ol><h2 id="Differentially-expressed-genes-involved-in-immune-system-2"><a href="#Differentially-expressed-genes-involved-in-immune-system-2" class="headerlink" title="Differentially expressed genes involved in immune system"></a>Differentially expressed genes involved in immune system</h2><ol><li>BG information of immune system and the benifitial of the RNA-Seq. (PS: Suggest to ignore)</li><li>Interested Pathways and their BG infor.</li><li>Filled with a list of DEGs, and compared few of them with other studies.</li><li>suggest that immune reaction were involved in Cu-induced stress.</li></ol><h2 id="Differentially-expressed-genes-involved-in-apoptosis-1"><a href="#Differentially-expressed-genes-involved-in-apoptosis-1" class="headerlink" title="Differentially expressed genes involved in apoptosis"></a>Differentially expressed genes involved in apoptosis</h2><ol><li>BG infor for Apoptosis and CASP3.</li><li>Calpain up-regulated; caspase-3 down-regulated, this was support in other two reports. (PS: <span style="color:salmon;"><b>They spend 236 words to interpret five words</b></span>: Calpain up-regulated; caspase-3 down-regulate)</li></ol><h2 id="Differentially-expressed-genes-involved-in-signal-transduction-1"><a href="#Differentially-expressed-genes-involved-in-signal-transduction-1" class="headerlink" title="Differentially expressed genes involved in signal transduction"></a>Differentially expressed genes involved in signal transduction</h2><ol><li>BG: for MAPK pathway. Evidences from other papers.<br>Here: c-fos involved in this pathway.</li><li>Cu could induce ROS to active MAPK to elevate the phosphorylation. (PS: No ending sentence for this paragraph. The last sentence is lack of coherent.)</li><li>(P2) BG: NF<sub>k</sub>B is an important redox-sensitive TF for immune-response.<br>Here: NF<sub>k</sub>B down-regulated.<br>But, there have no consensus on it. So, more experiments are needee.<br>(PS: This paragraph is mach readable than few previous)</li><li>BG: important of Ca<sup>2+</sup> and Cu<sup>2+</sup> can effect Ca<sup>2+</sup><br>Here: Cu down-regulated genes in the calcium signaling pathway.<br>The understanding of this process is helpful.</li><li>Conclusion: This experiment is unique and this experiment has lots of potential contributions…</li></ol><p>PS: Finally, I finished this paper. Personally, I’m not suggesting anyone to read this paper really much. Because it is a kind of wasting time if you want to learn how to writing from this passage. You can perceive that too much of non-sense words are filled for words-accumulating. And some sentences are lack of coherent. But, of course, it could be a good counter example because  it is not the worst, it’s still a readable paper, it’s just not a good model. And I just don’t like it.</p><hr><h1 id="Related-papers"><a href="#Related-papers" class="headerlink" title="Related papers:"></a>Related papers:</h1><p>Morais S, Pratoomyot J, Taggart JB, Bron JE, Guy DR, Bell JG, Tocher DR (2011b) Genotype-specific responses in Atlantic salmon (Salmo salar) subject to dietary fish oil replacement by vegetable oil: a liver transcriptomic analysis. BMC Genomics 12:255</p><p>Morais S, Edvardsen RB, Tocher DR, Bell JG (2012a) Transcriptomic analyses of intestinal gene expression of juvenile Atlantic cod (Gadus morhua) fed diets with Camelina oil as replacement for fish oil. Comp Biochem Physiol B Biochem Mol Biol 161:283–293.  </p><p>Tacchi L, Secombes CJ, Bickerdike R, Adler MA, Venegas C, Takle H, Martin SA (2012)  Transcriptomic and physiological responses to fishmeal substitution with plant proteins in formulated feed in farmed Atlantic salmon (Salmo salar). BMC Genomics 13:363</p><hr><h1 id="Related-Notes"><a href="#Related-Notes" class="headerlink" title="Related Notes:"></a>Related Notes:</h1><p><a href="paperrnaseqfish1">Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</a></p><p><a href="paperrnaseqfish3">Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</a></p><p><a href="paperrnaseqfish4">Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</title>
      <link href="/LearnNotes/Paper_RNASeq_Fish3.html"/>
      <url>/LearnNotes/Paper_RNASeq_Fish3.html</url>
      
        <content type="html"><![CDATA[<h1 id="Physiological-and-transcriptomic-responses-to-fishmeal-based-diet-and-rapeseed-meal-based-diet-in-two-strains-of-gibel-carp-Carassius-gibelio"><a href="#Physiological-and-transcriptomic-responses-to-fishmeal-based-diet-and-rapeseed-meal-based-diet-in-two-strains-of-gibel-carp-Carassius-gibelio" class="headerlink" title="Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)"></a>Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</h1><p>Cite: Xu, W., Jin, J., Han, D. et al. Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio). Fish Physiol Biochem 45, 267–286 (2019). <a href="https://doi.org/10.1007/s10695-018-0560-7" target="_blank" rel="noopener">https://doi.org/10.1007/s10695-018-0560-7</a></p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="Statistic-information"><a href="#Statistic-information" class="headerlink" title="Statistic information"></a>Statistic information</h2><table><thead><tr><th align="center">Content</th><th align="center">Words</th><th align="center">Ratio</th></tr></thead><tbody><tr><td align="center">Total Words</td><td align="center">5104</td><td align="center">100%</td></tr><tr><td align="center">Abstract</td><td align="center">218</td><td align="center">4.27%</td></tr><tr><td align="center">Introduction</td><td align="center">824</td><td align="center">16.14%</td></tr><tr><td align="center">M&amp;M</td><td align="center">1403</td><td align="center">27.49%</td></tr><tr><td align="center">Results</td><td align="center">654</td><td align="center">12.81%</td></tr><tr><td align="center"><strong>Discussion</strong></td><td align="center">2005</td><td align="center">39.28%</td></tr></tbody></table><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a href="https://baike.baidu.com/item/%E5%BC%82%E8%82%B2%E9%93%B6%E9%B2%AB" target="_blank" rel="noopener"><strong><em>Synechogobius hasta</em></strong></a>:<br><img src="http://www.naturephoto-cz.com/photos/others/carassius-auratus-gibelio-80021.jpg" alt="img"><br>Img from: <a href="http://www.naturephoto-cz.com/carassius-auratus-gibelio-photo_lat-15205.html" target="_blank" rel="noopener">link</a></p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>fishmeal  &amp; Rapeseedmeal to explore the effects of protein source.</li><li>Two strains are feed.</li><li>Growth performance,body composition, hematologic indices, and hepatic transcriptomes were measured.</li><li>A prefer FM, F prefer RM</li><li>Different involved in lots of metabolic pathways</li></ol><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>P1:</p><pre class="mermaid">graph LR;Fishmeal-->|Good protein source|Expensive-->Health;Plant_protein-->|poor utility, anti-nutritional|Cheep-->|Change inner environment|Impair_Health;</pre><p>P2: Previous mainly researches are focus on dietary background, genetic backgrounds are essential, too. As a result, understanding of molecular mechanisms is needed.</p><p>P3: NGS could achieving it. See bass response similar to fishmeal diet, but response different to plant-based diet.</p><p>P4:G. carp is important. A: fast growth; B: fast growth &amp; Diseases resist.</p><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><ul><li>Materials and methods</li><li>Experimental fish and rearing conditions</li><li>Sample collection</li><li>Chemical analysis</li><li>Transcriptome analysis</li><li>Quantitative real-time PCR</li><li>Statistical analysis</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><ul><li>Growth performance</li><li>Physiological and biochemical indices in plasma</li><li>Transcriptome analysis results</li><li>Confirmation of RNA-seq data by qRT-PCR</li></ul><h2 id="Growth-performance"><a href="#Growth-performance" class="headerlink" title="Growth performance"></a>Growth performance</h2><p>Counts and table</p><h2 id="Physiological-and-biochemical-indices-in-plasma"><a href="#Physiological-and-biochemical-indices-in-plasma" class="headerlink" title="Physiological and biochemical indices in plasma"></a>Physiological and biochemical indices in plasma</h2><p>Statistics and table</p><h2 id="Transcriptome-analysis-results"><a href="#Transcriptome-analysis-results" class="headerlink" title="Transcriptome analysis results"></a>Transcriptome analysis results</h2><p>Statistics and tables</p><h2 id="Confirmation-of-RNA-seq-data-by-qRT-PCR"><a href="#Confirmation-of-RNA-seq-data-by-qRT-PCR" class="headerlink" title="Confirmation of RNA-seq data by qRT-PCR"></a>Confirmation of RNA-seq data by qRT-PCR</h2><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><h2 id="P1-2-Poor-Growth-Performance"><a href="#P1-2-Poor-Growth-Performance" class="headerlink" title="P1-2 Poor Growth Performance"></a>P1-2 Poor Growth Performance</h2><ul><li>Different response to plant protein. It is regulated by the gene in liver which involved in protein/lipid metabolism.</li><li>Metabolic, digestive, cell signals… are also changed.</li><li>Metabolic response interact with genotype.</li></ul><h2 id="P3-Essential-Amino-Acids"><a href="#P3-Essential-Amino-Acids" class="headerlink" title="P3 Essential Amino Acids."></a>P3 Essential Amino Acids.</h2><p>Challenges:</p><ul><li>The rapeseeds lack of <em>lysine</em> and <em>methionine</em>.</li><li>Imbalanced amino acid diet.</li></ul><p>Responds:</p><ul><li>Low body protein deposition</li><li>OAT(<strong><em>ornithine aminotransferase</em></strong>) improved to generates more nonessential AA.</li></ul><pre class="mermaid">graph LR;  RM-->|Lack of| EAA;  EAA-->|Decrease|SGR;  SGR-->Body_Protein_Deposition_Reduction;  EAA-->|Decrease|FE;  FE-->Body_Protein_Deposition_Reduction;  EAA-->|Decrease|PRE;  PRE-->Body_Protein_Deposition_Reduction;  Plant_Protein-->|impact uptake|AA;  Protein_Deposition-->|related|Protein_Structure;  Protein_Deposition-->|related|Digestive_Process;  Protein_Deposition-->|related|Antinutritional_Factors;  oat-->|Transamination|N_homeostasis;</pre><h2 id="P4-Lipid-metabolism"><a href="#P4-Lipid-metabolism" class="headerlink" title="P4 Lipid metabolism"></a>P4 Lipid metabolism</h2><ul><li><strong><em>hmdh</em></strong> high expression: Cholesterol Synthesis;</li><li>Appropriate explanation: Plant sterols affect membrane properties, modify phospholipid order, impair cholesterol absorption. To response it, liver increased the cholesterol synthesis.<br><span style="color:salmon"><b>Structure</b></span>:<pre class="mermaid">graph LR;Cell_Membrane-.->|absorb|Lipid;Lipid-->|Affected by|Fatty_Acid_Profiles-->|Lack in |Plant_Dietary;Plant_Dietary-->|Contain|2.Plant_Sterols-->|Affect|Cell_Membrane;Plant_Dietary-->|upregulated|1.hmdh;1.hmdh-->|Rate Limiting|Sterol_Synthesis;Sterol_Synthesis -.->|Increase|Lipid</pre></li></ul><h2 id="P5-Higher-FR"><a href="#P5-Higher-FR" class="headerlink" title="P5 Higher FR"></a>P5 Higher FR</h2><p>Related higher expression genes–&gt; compensation mechanism for poor protein dietary.<br><span style="color:salmon"><b>Structure</b></span>:</p><pre class="mermaid">graph LR;  HigherFR-->|verified by RNA-Seq|DEGs;  DEGs-->|Explain|Compensation;  Compensation-->|to|Poor_Protein_Dietary;</pre><h2 id="P6-Overall"><a href="#P6-Overall" class="headerlink" title="P6 Overall"></a>P6 Overall</h2><p>…</p><h2 id="Different-responses-to-RM-diet-between-strains"><a href="#Different-responses-to-RM-diet-between-strains" class="headerlink" title="Different responses to RM diet between strains"></a>Different responses to RM diet between strains</h2><ul><li><strong>F better use RM than A.(similar found in rainbow trout)</strong></li><li><strong>RAN-seq in strain F feed with RM</strong><ul><li>Digestive enzyme activated</li><li>Higher plasma AA at 2h after diet</li><li>Better growth performance</li><li>Genes included in <em>assy, gcsp2, serc</em> expressed lower</li><li>higher PRE</li></ul></li><li><strong>RAN-seq in strain A feed with RM</strong><ul><li>immune response-related genes, including xxx, but unaltered in strain F.</li><li>This indicate higher inflammatory response in strain A, associated some other reports.</li></ul></li><li>Strain F has lower LRE with RM group.<ul><li>arachidonic acid metabolism were lower in F, which related to immune responses.</li><li>F had lower lipid deposition to lower inflammatory responses</li><li>Genes, like XXX, related phospholipid metabolism had lower expression in F.</li></ul></li><li><strong>Take together</strong><ul><li>Diet had interaction with Genotype.</li></ul></li></ul><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p><strong>Skip!</strong></p><hr><h1 id="Related-papers"><a href="#Related-papers" class="headerlink" title="Related papers:"></a>Related papers:</h1><p>Morais S, Pratoomyot J, Taggart JB, Bron JE, Guy DR, Bell JG, Tocher DR (2011b) Genotype-specific responses in Atlantic salmon (Salmo salar) subject to dietary fish oil replacement by vegetable oil: a liver transcriptomic analysis. BMC Genomics 12:255</p><p>Morais S, Edvardsen RB, Tocher DR, Bell JG (2012a) Transcriptomic analyses of intestinal gene expression of juvenile Atlantic cod (Gadus morhua) fed diets with Camelina oil as replacement for fish oil. Comp Biochem Physiol B Biochem Mol Biol 161:283–293.  </p><p>Tacchi L, Secombes CJ, Bickerdike R, Adler MA, Venegas C, Takle H, Martin SA (2012)  Transcriptomic and physiological responses to fishmeal substitution with plant proteins in formulated feed in farmed Atlantic salmon (Salmo salar). BMC Genomics 13:363</p><hr><p>PS</p><p>I think that the author did a good job on the discussion secession.<br>First of all, he mad a conclusion about the Growth performance of the corps. This is what what we can see at the first glance, and one of the direct purpose of this experiment. On the other hand, the author gave a general summery of the different in metabolic, digestives, and cell signals change, etc.</p><p>After that, the author focused on two widely concerned challenges in plant meals: lacking of some essential amino acids and lipid deficiency. As a result, the body protein deposition was definitely affected and <strong><em>oat</em></strong> was involved in Nitrogen compensate. About the Lipid metabolism, they found that the gene <strong><em>hmdh</em></strong> are respond to keep cholesterol homeostasis.</p><p>After this discussion, the author are focused in talking about the interaction of the diet and genotype, the part makes this experiment unique.</p><p>Above of, this discussion is a good example to show how to handle a discussion, how to write a story logically and neatly.</p><hr><h1 id="Related-Notes"><a href="#Related-Notes" class="headerlink" title="Related Notes:"></a>Related Notes:</h1><p><a href="paperrnaseqfish1">Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</a></p><p><a href="paperrnaseqfish2">De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</a></p><p><a href="paperrnaseqfish4">Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Modifications of digestive enzymes in trout (Oncorhynchus mykiss) and sea bream</title>
      <link href="/LearnNotes/Diet_Switch_Fish4.html"/>
      <url>/LearnNotes/Diet_Switch_Fish4.html</url>
      
        <content type="html"><![CDATA[<h1 id="Modifications-of-digestive-enzymes-in-trout-Oncorhynchus-mykiss-and-sea-bream"><a href="#Modifications-of-digestive-enzymes-in-trout-Oncorhynchus-mykiss-and-sea-bream" class="headerlink" title="Modifications of digestive enzymes in trout (Oncorhynchus mykiss) and sea bream"></a>Modifications of digestive enzymes in trout (Oncorhynchus mykiss) and sea bream</h1><p>(Sparus aurata) in response to dietary fish meal replacement by plant protein sources</p><p>Cite: Santigosa E, Sanchez J E, Medale F, et al. Modifications of digestive enzymes in trout (Oncorhynchus mykiss) and sea bream (Sparus aurata) in response to dietary fish meal replacement by plant protein sources[J]. Aquaculture, 2008, 282(1): 68-74.</p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="trout-Oncorhynchus-mykiss"><a href="#trout-Oncorhynchus-mykiss" class="headerlink" title="trout (Oncorhynchus mykiss)"></a>trout (Oncorhynchus mykiss)</h2><p><img src="http://nyfalls.com/dev/wp-content/uploads/2013/04/Oncorhynchus-mykiss1-300x112.jpg" alt="img"><br>img from: nyfalls.com, Copyright belongs to the author</p><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a href="https://baike.baidu.com/item/%E5%BC%82%E8%82%B2%E9%93%B6%E9%B2%AB" target="_blank" rel="noopener"><strong><em>Sparus aurata</em></strong></a>:<br><img src="https://fiskguiden.wwf.se/wp-content/uploads/2017/04/Sparus_aurata.jpg" alt="img"><br>（图片转自 fiskguiden.wwf.se，版权属于原作者）</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>Three experimental diet (50%, 75%, 100%)</li><li>Rainbow trout and gilthead sea bream</li><li>Compare the digestion enzymes</li><li><strong>Post-prandial protease</strong> and <strong>α-amylase</strong> activities</li><li><strong>protease</strong> Activities change</li><li>chymotrypsin-like bands</li><li><strong>α-amylase</strong> activities does not affected</li><li><strong>histology</strong> Change</li><li><strong>intestinal length</strong></li><li><strong>Weight</strong> change only on PP100<h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1></li></ol><p>##P1: Plant protein substitution for economy</p><p>Shortcomings:</p><ul><li>hgih carbohydrate levels</li><li>isoflavones</li><li>low methionine levels</li><li>anti-nutritional factors</li></ul><p>They can:</p><ul><li>impede protein digestion</li><li>impair immune responses</li><li>intestinal inflammation.</li></ul><p>End: Yellow perch is one of the most sensitive species for this change.</p><h2 id="P2-Pancreas"><a href="#P2-Pancreas" class="headerlink" title="P2: Pancreas"></a>P2: Pancreas</h2><ol><li>Serine-protease (trypsin, chymotrypsin, elastase and collagenase)</li><li>Glucosidases<blockquote><ul><li>hydrolyze starch into lineal chains</li></ul></blockquote></li></ol><h2 id="P3-Our-purpose"><a href="#P3-Our-purpose" class="headerlink" title="P3: Our purpose"></a>P3: Our purpose</h2><ol><li>Protine and Carbohydrate digestion</li><li>histology</li></ol><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><ul><li>Chemicals</li><li>Diets, animals and growth experiment</li><li>Post-parndial experiment and sampling</li><li>Preparation of extracts and determination of soluble protein</li><li>Enzyme assays</li><li>Zymograms: characterization of protease fractions and inhibition by PP diets</li><li>Proximal intestine histological analysis</li><li>Statistical analysis</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><h2 id="Enzymes-activities"><a href="#Enzymes-activities" class="headerlink" title="Enzymes activities"></a>Enzymes activities</h2><h3 id="Alkaline-Protease"><a href="#Alkaline-Protease" class="headerlink" title="Alkaline Protease"></a>Alkaline Protease</h3><ul><li>Trout fed diets PP50 and PP75 showed only a slight post-feeding increase in this activity.</li><li>Sea bream fed the FM diet showed a maximum of 6.93±1.03 U protease·mg− 1 protein·min− 1. This value decreased gradually as the percentage of plant protein increased</li></ul><h3 id="Amylase"><a href="#Amylase" class="headerlink" title="Amylase"></a>Amylase</h3><p>a significant post-prandial increase in this activity was recorded only in PP75 and PP100 fed trout. Replacement of fish meal by plant protein did not induce significant changes in α-amylase activity in either species.<br><img src="https://s1.ax1x.com/2020/05/18/YfChcD.png" alt="YfChcD.png"></p><h2 id="Growth-Performance"><a href="#Growth-Performance" class="headerlink" title="Growth Performance"></a>Growth Performance</h2><p><a href="https://imgchr.com/i/YfPYKe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/18/YfPYKe.png" alt="YfPYKe.png"></a></p><h2 id="Intestine-Growth"><a href="#Intestine-Growth" class="headerlink" title="Intestine Growth"></a>Intestine Growth</h2><p><img src="https://s1.ax1x.com/2020/05/18/YfAsFs.png" alt="YfAsFs.png"></p><hr><h1 id="Related-Notes"><a href="#Related-Notes" class="headerlink" title="Related Notes:"></a>Related Notes:</h1><p><a href="paperrnaseqfish1">Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</a></p><p><a href="paperrnaseqfish2">De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</a></p><p><a href="paperrnaseqfish3">Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</a></p><p><a href="paperrnaseqfish4">Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili: <a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</title>
      <link href="/LearnNotes/Paper_RNASeq_Fish4.html"/>
      <url>/LearnNotes/Paper_RNASeq_Fish4.html</url>
      
        <content type="html"><![CDATA[<h1 id="Transcriptomic-response-to-soybean-meal-based-diets-as-the-frst-formulated-feed-in-juvenile-yellow-perch-Perca-favescens"><a href="#Transcriptomic-response-to-soybean-meal-based-diets-as-the-frst-formulated-feed-in-juvenile-yellow-perch-Perca-favescens" class="headerlink" title="Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)"></a>Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</h1><p>Cite: Kemski, M.M., Rappleye, C.A., Dabrowski, K. et al. Transcriptomic response to soybean meal-based diets as the first formulated feed in juvenile yellow perch (Perca flavescens). Sci Rep 10, 3998 (2020). <a href="https://doi.org/10.1038/s41598-020-59691-z" target="_blank" rel="noopener">https://doi.org/10.1038/s41598-020-59691-z</a></p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="Statistic-information"><a href="#Statistic-information" class="headerlink" title="Statistic information"></a>Statistic information</h2><table><thead><tr><th align="center">Content</th><th align="center">Words</th><th align="center">Ratio</th></tr></thead><tbody><tr><td align="center">Total Words</td><td align="center">3309</td><td align="center">100%</td></tr><tr><td align="center">Abstract</td><td align="center">171</td><td align="center">5.17%</td></tr><tr><td align="center">Introduction</td><td align="center">700</td><td align="center">21.15%</td></tr><tr><td align="center">Results</td><td align="center">939</td><td align="center">28.38%</td></tr><tr><td align="center"><strong>Discussion</strong></td><td align="center">1499</td><td align="center">45.30%</td></tr><tr><td align="center">Conclusion</td><td align="center">163</td><td align="center">4.93%</td></tr></tbody></table><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a href="https://baike.baidu.com/item/%E5%BC%82%E8%82%B2%E9%93%B6%E9%B2%AB" target="_blank" rel="noopener"><strong><em>Synechogobius hasta</em></strong></a>:<br><img src="https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1589282468047&di=ce88107ec4c9a346359466f366e004fe&imgtype=0&src=http%3A%2F%2Fthumbimg.dealmoon.com%2Fdealmoon%2F382%2F4fd%2F098%2F97ab123e4c71e43e487b89e.jpg" alt="img"><br>（图片转自 nanfa.org，版权属于原作者）</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>Plant protein diet substitute became more and more common.</li><li>Purpose of this paper.</li><li>Experiment Design.</li><li>Resutl</li><li>Conclusion</li></ol><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>##P1: Is Soybean awesome?(BG information of Soybean meal)</p><p>Shortcomings:</p><ul><li>hgih carbohydrate levels</li><li>isoflavones</li><li>low methionine levels</li><li>anti-nutritional factors</li></ul><p>They can:</p><ul><li>impede protein digestion</li><li>impair immune responses</li><li>intestinal inflammation.</li></ul><p>End: Yellow perch is one of the most sensitive species for this change.</p><h2 id="P2-Impacts"><a href="#P2-Impacts" class="headerlink" title="P2: Impacts"></a>P2: Impacts</h2><p>It has more negative affects on juvenile fish than adults.</p><h2 id="P3-Transcriptomic-Studies"><a href="#P3-Transcriptomic-Studies" class="headerlink" title="P3: Transcriptomic Studies"></a>P3: Transcriptomic Studies</h2><ol><li>Short period study: Lots of related studies have been down and show that the digestive and metabolic system were impaired.</li><li>Long period(12 weeks) studies: Increased in immune related and inflammation related genes, and donw regulation of metabolic pathway.</li></ol><h2 id="P4"><a href="#P4" class="headerlink" title="P4"></a>P4</h2><p>This Experiment is unique!!!<br>P4:G. carp is important. A: fast growth; B: fast growth &amp; Diseases resist.</p><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><ul><li>Materials and methods</li><li>Experimental fish and rearing conditions</li><li>Sample collection</li><li>Chemical analysis</li><li>Transcriptome analysis</li><li>Quantitative real-time PCR</li><li>Statistical analysis</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><ul><li>Feeding trial</li><li>Transcriptomic responses</li><li>Up-regulation of genes found in SBM fed fish</li><li>Down-regulation of genes found in SBM fed fish</li><li>Quantitative real-time PCR validation</li><li>Whole body lipids and cholesterol analysis</li></ul><blockquote><h2 id="Feeding-trial"><a href="#Feeding-trial" class="headerlink" title="Feeding trial"></a>Feeding trial</h2><p>Survival Counts and Table</p><h2 id="Transcriptomic-responses"><a href="#Transcriptomic-responses" class="headerlink" title="Transcriptomic responses"></a>Transcriptomic responses</h2><ul><li>Basic statistics and figures<h2 id="Up-regulation-of-genes-found-in-SBM-fed-fish"><a href="#Up-regulation-of-genes-found-in-SBM-fed-fish" class="headerlink" title="Up-regulation of genes found in SBM fed fish"></a>Up-regulation of genes found in SBM fed fish</h2></li><li>Basic statistics and figures<h2 id="Down-regulation-of-genes-found-in-SBM-fed-fish"><a href="#Down-regulation-of-genes-found-in-SBM-fed-fish" class="headerlink" title="Down-regulation of genes found in SBM fed fish"></a>Down-regulation of genes found in SBM fed fish</h2></li><li>Basic statistics and figures<h2 id="Quantitative-real-time-PCR-validation"><a href="#Quantitative-real-time-PCR-validation" class="headerlink" title="Quantitative real-time PCR validation"></a>Quantitative real-time PCR validation</h2>General Statement<h2 id="Whole-body-lipids-and-cholesterol-analysis"><a href="#Whole-body-lipids-and-cholesterol-analysis" class="headerlink" title="Whole body lipids and cholesterol analysis"></a>Whole body lipids and cholesterol analysis</h2></li></ul></blockquote><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><h2 id="P1-Introduction"><a href="#P1-Introduction" class="headerlink" title="P1 Introduction"></a>P1 Introduction</h2><ul><li>Plant protein is imperative</li><li>Potential utility: optimal feeds</li><li>Previous studies has</li></ul><h2 id="P2"><a href="#P2" class="headerlink" title="P2"></a>P2</h2><p>BG information (PS: I don’t think this paragraph is needed…)</p><h2 id="P3"><a href="#P3" class="headerlink" title="P3"></a>P3</h2><p>Weight are not significantly different. Acceptance diet.</p><h2 id="P4-Intestine"><a href="#P4-Intestine" class="headerlink" title="P4 Intestine"></a>P4 Intestine</h2><p>Previous studied revealed three different regions of intestine. And the <strong>mid region</strong> is the target. (PS: Does the author try to show that this design of the experiment is appropriate or??)</p><h2 id="P5-Up-regulated-gene-in-mid-gut"><a href="#P5-Up-regulated-gene-in-mid-gut" class="headerlink" title="P5 Up-regulated gene in mid gut"></a>P5 Up-regulated gene in mid gut</h2><ul><li>cholesterol biosynthesis</li><li>cholesterol is only found in animal materials.</li><li>cholesterol intake was impaired by phytosterols.</li></ul><h2 id="P6-Cholesterol-Biosynthesis"><a href="#P6-Cholesterol-Biosynthesis" class="headerlink" title="P6 Cholesterol Biosynthesis"></a>P6 Cholesterol Biosynthesis</h2><ul><li>genes, rate-controlling enzyme ware up-regulated.</li><li>Increasing the synthesis of cholesterol to matain the homeostasis.</li></ul><h2 id="P7-Growth-Performance"><a href="#P7-Growth-Performance" class="headerlink" title="P7 Growth Performance"></a>P7 Growth Performance</h2><ul><li>Reduced cholesterol levels can cause a reduction in growth</li><li>Support cholesterol to improving growth.</li><li>cholesterol synthesis is a high energy expenditure.</li><li>Compounds are highly involved in fatty acid</li></ul><h2 id="P8-lipid"><a href="#P8-lipid" class="headerlink" title="P8 lipid"></a>P8 lipid</h2><ul><li>Gene involved in lipid metabolism and transport were up-regulated.</li><li>This change is involved in cholesterol homeostasis.</li><li>The change happens in intestine as well as livers compared with previous experiment.</li></ul><h2 id="P9-Over-Overall"><a href="#P9-Over-Overall" class="headerlink" title="P9 Over Overall"></a>P9 Over Overall</h2><ul><li>Despite the changes, the total body lipid doesn’t have a significantly different after 61 days of feeding.</li><li>So as the cholesterol.</li><li>Increased cholesterol biosynthesis is compensated the lower diet intake.</li><li>This result is different from a study done in rainbow trout.</li><li>Plasma cholesterol content reduces in European seabass and Atlantic salmon with SPM feeding.</li><li>Explain: excess cholesterol in the body is stored</li></ul><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>Though, total weight and lipid are not significantly changed between two groups is because some how the fish compensated the different, like de novo cholesterol.</p><p>It is one of the first study that …   main the growth.<br> biosynthesis</p><hr><h1 id="Related-papers"><a href="#Related-papers" class="headerlink" title="Related papers:"></a>Related papers:</h1><p>Morais S, Pratoomyot J, Taggart JB, Bron JE, Guy DR, Bell JG, Tocher DR (2011b) Genotype-specific responses in Atlantic salmon (Salmo salar) subject to dietary fish oil replacement by vegetable oil: a liver transcriptomic analysis. BMC Genomics 12:255</p><p>Morais S, Edvardsen RB, Tocher DR, Bell JG (2012a) Transcriptomic analyses of intestinal gene expression of juvenile Atlantic cod (Gadus morhua) fed diets with Camelina oil as replacement for fish oil. Comp Biochem Physiol B Biochem Mol Biol 161:283–293.  </p><p>Tacchi L, Secombes CJ, Bickerdike R, Adler MA, Venegas C, Takle H, Martin SA (2012)  Transcriptomic and physiological responses to fishmeal substitution with plant proteins in formulated feed in farmed Atlantic salmon (Salmo salar). BMC Genomics 13:363</p><hr><h1 id="Related-Notes"><a href="#Related-Notes" class="headerlink" title="Related Notes:"></a>Related Notes:</h1><p><a href="paperrnaseqfish1">Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</a></p><p><a href="paperrnaseqfish2">De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</a></p><p><a href="paperrnaseqfish3">Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Dietary plant-protein substitution affects hepatic metabolism in rainbow trout (Oncorhynchus mykiss)</title>
      <link href="/LearnNotes/Paper_Vilhelmsson2004.html"/>
      <url>/LearnNotes/Paper_Vilhelmsson2004.html</url>
      
        <content type="html"><![CDATA[<h1 id="Dietary-plant-protein-substitution-affects-hepatic-metabolism-in-rainbow-trout-Oncorhynchus-mykiss"><a href="#Dietary-plant-protein-substitution-affects-hepatic-metabolism-in-rainbow-trout-Oncorhynchus-mykiss" class="headerlink" title="Dietary plant-protein substitution affects hepatic metabolism in rainbow trout (Oncorhynchus mykiss)"></a>Dietary plant-protein substitution affects hepatic metabolism in rainbow trout (Oncorhynchus mykiss)</h1><p>Cite: Vilhelmsson, Oddur, et al. “Dietary plant-protein substitution affects hepatic metabolism in rainbow trout (Oncorhynchus mykiss).” British Journal of Nutrition 92.1 (2004): 71-80.</p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><img src="http://nyfalls.com/dev/wp-content/uploads/2013/04/Oncorhynchus-mykiss1-300x112.jpg" alt="img"><br>img from: nyfalls.com, Copyright belongs to the author</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>Substitute gradient</li><li>SPC15 has a best growth performance</li><li>SPC75 has a worst growth performance</li><li>SPC 15 and SPC30 had the highest protein efficiency ratio</li><li>Daily feed intake was significantly decreased</li><li>Survival rate were higher in SPC15, SPC30, and SPC45</li><li>SPC15 and SPC30 showed significantly higher protein and amino acid (AA) retention</li></ol><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>##P1: BG<br>BG of Aquaculture</p><h2 id="P2-BG"><a href="#P2-BG" class="headerlink" title="P2: BG"></a>P2: BG</h2><p>BG of Soybean meal in Aquaculture</p><h2 id="P3-BG"><a href="#P3-BG" class="headerlink" title="P3: BG"></a>P3: BG</h2><p>BG of Pearl Gentian Grouper</p><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><ul><li>Diet formulation</li><li>Feeding trial</li><li>Sample collection and calculation formula for growth performance</li><li>Biochemical analysi</li><li>Statistical analysis</li><li>QEthical statement</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><ul><li>Growth performance and biometry</li><li>Nutritional composition</li><li>Protein and individual AA ADCs and retention in muscle</li></ul><blockquote><h2 id="Growth-performance-and-biometry"><a href="#Growth-performance-and-biometry" class="headerlink" title="Growth performance and biometry"></a>Growth performance and biometry</h2><ul><li>Survival<ul><li>SPC 15, SPC 30, and SPC 45 (from 94% to 96%) as compared to SPC 60 and SPC 75 (P &lt; 0.05)</li></ul></li><li>BWG, WGR, SGR, and PER<ul><li>SPC15</li><li>BWG: average body weight gain; WGR: Weight gain ratio; SGR: specific growth rate, survival; PER: protein efficiency ratio</li></ul></li><li>FCR (feed conversion ratio)<ul><li>SPC15</li></ul></li><li>DFI (Daily feed intake)<ul><li>SPC0</li></ul></li></ul><h2 id="Nutritional-composition"><a href="#Nutritional-composition" class="headerlink" title="Nutritional composition"></a>Nutritional composition</h2><p><img src="https://s1.ax1x.com/2020/05/20/YTXJkn.png" alt="YTXJkn.png"></p><ul><li>Muscle protein<ul><li>SPC0, SPC15, SPC30 &gt; SPC45, SPC60, SPC75</li></ul></li><li>Whole Body<ul><li>Moisture content gradually increased</li></ul></li><li>Crude protein<ul><li>SPC30, SPC45 &gt; SPC60, SPC75</li></ul></li><li>Muscle AA<ul><li>histidine, lysine and methionine<ul><li>Negative related</li><li>Methionine: H, SPC30; L, SCP75</li><li>Lysine: H, SPC15； L，SPC75</li></ul></li></ul></li></ul></blockquote><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><h2 id="P1-Introduction"><a href="#P1-Introduction" class="headerlink" title="P1 Introduction"></a>P1 Introduction</h2><ul><li>Other studies</li><li>This experiment</li></ul><h2 id="P2-Regression-Model"><a href="#P2-Regression-Model" class="headerlink" title="P2 Regression Model"></a>P2 Regression Model</h2><p>Predict the best ratio for Growth performance improving</p><h2 id="P3-Tolerate-Comparing"><a href="#P3-Tolerate-Comparing" class="headerlink" title="P3 Tolerate Comparing"></a>P3 Tolerate Comparing</h2><p>Some fish have high tolerate of plant meal but not Grouper</p><h2 id="P4-Growth-Performance-amp-feed-intake"><a href="#P4-Growth-Performance-amp-feed-intake" class="headerlink" title="P4 Growth Performance &amp; feed intake"></a>P4 Growth Performance &amp; feed intake</h2><p>Growth performance related but not depend by feed intake.<br>The best growth performance is SPC15, but the highest uptake ratio is SPC0</p><h2 id="P5-Poor-Nutrition-Value"><a href="#P5-Poor-Nutrition-Value" class="headerlink" title="P5 Poor Nutrition Value"></a>P5 Poor Nutrition Value</h2><p>Anti Nutrition Factors (ANF) &amp; Lower Content of Amino Acids</p><ul><li><em>ANF</em><ul><li>phytic acid, trypsin inhibitor, raffinose, and glycinin</li><li>phytic, trypsin: feed intake and growth</li></ul></li></ul><h2 id="P6-7-Phytic-and-Trypsin"><a href="#P6-7-Phytic-and-Trypsin" class="headerlink" title="P6-7 Phytic and Trypsin"></a>P6-7 Phytic and Trypsin</h2><ul><li>Mild effects on growth compared with previous studies: We have a lower concentration of phytic as well as trypsin.</li><li>(Other studies) reduction in the bio-availability of Phosphorus, Calcium, Magnesium, and Zinc</li></ul><h2 id="P8-9-General-Conclusion"><a href="#P8-9-General-Conclusion" class="headerlink" title="P8-9 General Conclusion"></a>P8-9 General Conclusion</h2><h2 id="P10-Summary"><a href="#P10-Summary" class="headerlink" title="P10 Summary"></a>P10 Summary</h2><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>SPC 11-14% can optimize the growth performance.<br>SPC30 can still remain beneficial for the grouper.</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Effects of fishmeal replacement by soy protein concentrate on growth performance, apparent digestibility, and retention of protein and amino acid in juvenile pearl gentian grouper</title>
      <link href="/LearnNotes/Paper_Yan2020.html"/>
      <url>/LearnNotes/Paper_Yan2020.html</url>
      
        <content type="html"><![CDATA[<h1 id="Effects-of-fishmeal-replacement-by-soy-protein-concentrate-on-growth-performance-apparent-digestibility-and-retention-of-protein-and-amino-acid-in-juvenile-pearl-gentian-grouper"><a href="#Effects-of-fishmeal-replacement-by-soy-protein-concentrate-on-growth-performance-apparent-digestibility-and-retention-of-protein-and-amino-acid-in-juvenile-pearl-gentian-grouper" class="headerlink" title="Effects of fishmeal replacement by soy protein concentrate on growth performance, apparent digestibility, and retention of protein and amino acid in juvenile pearl gentian grouper"></a>Effects of fishmeal replacement by soy protein concentrate on growth performance, apparent digestibility, and retention of protein and amino acid in juvenile pearl gentian grouper</h1><p>Cite: Chen, Yan, et al. “Effects of the replacement of fishmeal by soy protein concentrate on growth performance, apparent digestibility, and retention of protein and amino acid in juvenile pearl gentian grouper..” PLOS ONE 14.12 (2019).</p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a href="https://baike.baidu.com/item/%E5%BC%82%E8%82%B2%E9%93%B6%E9%B2%AB" target="_blank" rel="noopener"><strong><em>Synechogobius hasta</em></strong></a>:<br><img src="http://www.hx888.com/hengxing/upload/cms/www/201501/13105851ei61.jpg" alt="img"><br>（图片转自 hx888.com，版权属于原作者）</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ol><li>Substitute gradient</li><li>SPC15 has a best growth performance</li><li>SPC75 has a worst growth performance</li><li>SPC15 and SPC30 had the highest protein efficiency ratio</li><li>Daily feed intake was significantly decreased</li><li>Survival rate were higher in SPC15, SPC30, and SPC45</li><li>SPC15 and SPC30 showed significantly higher protein and amino acid (AA) retention</li></ol><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>##P1: BG<br>BG of Aquaculture</p><h2 id="P2-BG"><a href="#P2-BG" class="headerlink" title="P2: BG"></a>P2: BG</h2><p>BG of Soybean meal in Aquaculture</p><h2 id="P3-BG"><a href="#P3-BG" class="headerlink" title="P3: BG"></a>P3: BG</h2><p>BG of Pearl Gentian Grouper</p><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><ul><li>Diet formulation</li><li>Feeding trial</li><li>Sample collection and calculation formula for growth performance</li><li>Biochemical analysi</li><li>Statistical analysis</li><li>QEthical statement</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><ul><li>Growth performance and biometry</li><li>Nutritional composition</li><li>Protein and individual AA ADCs and retention in muscle</li></ul><blockquote><h2 id="Growth-performance-and-biometry"><a href="#Growth-performance-and-biometry" class="headerlink" title="Growth performance and biometry"></a>Growth performance and biometry</h2><ul><li>Survival<ul><li>SPC 15, SPC 30, and SPC 45 (from 94% to 96%) as compared to SPC 60 and SPC 75 (P &lt; 0.05)</li></ul></li><li>BWG, WGR, SGR, and PER<ul><li>SPC15</li><li>BWG: average body weight gain; WGR: Weight gain ratio; SGR: specific growth rate, survival; PER: protein efficiency ratio</li></ul></li><li>FCR (feed conversion ratio)<ul><li>SPC15</li></ul></li><li>DFI (Daily feed intake)<ul><li>SPC0</li></ul></li></ul><h2 id="Nutritional-composition"><a href="#Nutritional-composition" class="headerlink" title="Nutritional composition"></a>Nutritional composition</h2><p><img src="https://s1.ax1x.com/2020/05/20/YTXJkn.png" alt="YTXJkn.png"></p><ul><li>Muscle protein<ul><li>SPC0, SPC15, SPC30 &gt; SPC45, SPC60, SPC75</li></ul></li><li>Whole Body<ul><li>Moisture content gradually increased</li></ul></li><li>Crude protein<ul><li>SPC30, SPC45 &gt; SPC60, SPC75</li></ul></li><li>Muscle AA<ul><li>histidine, lysine and methionine<ul><li>Negative related</li><li>Methionine: H, SPC30; L, SCP75</li><li>Lysine: H, SPC15； L，SPC75</li></ul></li></ul></li></ul></blockquote><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><h2 id="P1-Introduction"><a href="#P1-Introduction" class="headerlink" title="P1 Introduction"></a>P1 Introduction</h2><ul><li>Other studies</li><li>This experiment</li></ul><h2 id="P2-Regression-Model"><a href="#P2-Regression-Model" class="headerlink" title="P2 Regression Model"></a>P2 Regression Model</h2><p>Predict the best ratio for Growth performance improving</p><h2 id="P3-Tolerate-Comparing"><a href="#P3-Tolerate-Comparing" class="headerlink" title="P3 Tolerate Comparing"></a>P3 Tolerate Comparing</h2><p>Some fish have high tolerate of plant meal but not Grouper</p><h2 id="P4-Growth-Performance-amp-feed-intake"><a href="#P4-Growth-Performance-amp-feed-intake" class="headerlink" title="P4 Growth Performance &amp; feed intake"></a>P4 Growth Performance &amp; feed intake</h2><p>Growth performance related but not depend by feed intake.<br>The best growth performance is SPC15, but the highest uptake ratio is SPC0</p><h2 id="P5-Poor-Nutrition-Value"><a href="#P5-Poor-Nutrition-Value" class="headerlink" title="P5 Poor Nutrition Value"></a>P5 Poor Nutrition Value</h2><p>Anti Nutrition Factors (ANF) &amp; Lower Content of Amino Acids</p><ul><li><em>ANF</em><ul><li>phytic acid, trypsin inhibitor, raffinose, and glycinin</li><li>phytic, trypsin: feed intake and growth</li></ul></li></ul><h2 id="P6-7-Phytic-and-Trypsin"><a href="#P6-7-Phytic-and-Trypsin" class="headerlink" title="P6-7 Phytic and Trypsin"></a>P6-7 Phytic and Trypsin</h2><ul><li>Mild effects on growth compared with previous studies: We have a lower concentration of phytic as well as trypsin.</li><li>(Other studies) reduction in the bio-availability of Phosphorus, Calcium, Magnesium, and Zinc</li></ul><h2 id="P8-9-General-Conclusion"><a href="#P8-9-General-Conclusion" class="headerlink" title="P8-9 General Conclusion"></a>P8-9 General Conclusion</h2><h2 id="P10-Summary"><a href="#P10-Summary" class="headerlink" title="P10 Summary"></a>P10 Summary</h2><h1 id="Conclusion"><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h1><p>SPC 11-14% can optimize the growth performance.<br>SPC30 can still remain beneficial for the grouper.</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>思維導圖軟件</title>
      <link href="/LearnNotes/SF_Xmind.html"/>
      <url>/LearnNotes/SF_Xmind.html</url>
      
        <content type="html"><![CDATA[<h1 id="思維導圖軟件"><a href="#思維導圖軟件" class="headerlink" title="思維導圖軟件"></a>思維導圖軟件</h1><h1 id="1-億圖"><a href="#1-億圖" class="headerlink" title="1. 億圖"></a>1. 億圖</h1><p><a href="https://www.edrawsoft.cn/" target="_blank" rel="noopener">官網</a>, <a href="https://www.edrawsoft.cn/download-edrawmax.php" target="_blank" rel="noopener">下載地址</a></p><p>優點：</p><ul><li>模板多</li><li>風格清新</li><li>多格式輸出(office聯動)</li><li>操作界面類似office，易上手</li><li>可部分替代ppt</li><li>使用感覺類似ppt，易上手</li><li>多版本適配:<ul><li>国产ARM架构-银河麒麟/UOS</li><li>国产龙芯架构-银河麒麟/UOS</li><li>国产兆芯架构-银河麒麟/UOS</li></ul></li></ul><p>缺點：<br><span style="background:salmon"><strong>如果購買付費版， 以下缺點都將消失</strong></span></p><ul><li>導出有水印</li></ul><h2 id="主界面"><a href="#主界面" class="headerlink" title="主界面"></a>主界面</h2><p><a href="https://imgchr.com/i/ty9GdA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/05/ty9GdA.md.png" alt="ty9GdA.md.png"></a></p><h2 id="PPT類似的操作界面和方式"><a href="#PPT類似的操作界面和方式" class="headerlink" title="PPT類似的操作界面和方式"></a>PPT類似的操作界面和方式</h2><p><a href="https://imgchr.com/i/ty9JII" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/05/ty9JII.md.png" alt="ty9JII.md.png"></a></p><h2 id="多格式導出"><a href="#多格式導出" class="headerlink" title="多格式導出"></a>多格式導出</h2><p><a href="https://imgchr.com/i/ty98Zd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/05/ty98Zd.png" alt="ty98Zd.png"></a></p><h1 id="2-Xmind"><a href="#2-Xmind" class="headerlink" title="2. Xmind"></a>2. Xmind</h1><p><a href="https://www.xmind.cn/" target="_blank" rel="noopener">官網</a>, <a href="https://www.xmind.cn/xmind/thank-you-for-downloading/" target="_blank" rel="noopener">下載地址</a></p><p><img src="https://s3.cn-north-1.amazonaws.com.cn/assets.xmind.cn/www/assets/images/home/home-hero-ui@2x-f649b7aa98.png" alt="img"><br>優點：</p><ul><li>輕量， 使用簡單， 沒有太多花哨的功能</li><li>專注思維導圖， 模板漂亮</li></ul><p>缺點：</p><ul><li>導出格式少</li><li>功能少，散枝不自由</li><li>文字編輯能力弱</li></ul><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Super Conductor</title>
      <link href="/LearnNotes/Super-Conductor.html"/>
      <url>/LearnNotes/Super-Conductor.html</url>
      
        <content type="html"><![CDATA[<h1 id="Super-Conductor"><a href="#Super-Conductor" class="headerlink" title="Super Conductor"></a>Super Conductor</h1><p>Source: The Stuff of Dreams, Scientific American; Oct 2019</p><p>Could new theoretical and computational advances finally deliver the elusive room-temperature superconductor?</p><p><a name="EtHfk"></a></p><h1 id="BCS-theory"><a href="#BCS-theory" class="headerlink" title="BCS theory"></a>BCS theory</h1><p><strong>(Bardeen–Cooper–Schrieffer theory)</strong></p><table><thead><tr><th>The properties of Type I superconductors were modeled successfully by the efforts of John Bardeen, Leon Cooper, and Robert Schrieffer in what is commonly called the BCS theory. A key conceptual element in this theory is the pairing of electrons close to the Fermi level into Cooper pairs through interaction with the crystal lattice. This pairing results from a slight attraction between the electrons related to lattice vibrations; the coupling to the lattice is called a phonon interaction. – <a href="http://hyperphysics.phy-astr.gsu.edu/hbase/Solids/bcs.html" target="_blank" rel="noopener">R Nav</a><br /><br />1. Electron moves through the lattice will pull the atoms in lattice, and bunches positives charges together as a result.<br />1. The positive charges will pull another electron into the first wake, Cooper pair formed between the two particulars.<br />1. Those pairs behavior like waves  name as Bose-Einstein condensate that is too large to be impeded by the lattice and so flows through it without any resistance at all.<br /></th><th align="center"><img src="https://s1.ax1x.com/2020/06/26/NsAJYV.png" alt="NsAJYV.png"></th></tr></thead><tbody><tr><td></td><td align="center"><strong>©2019 Scientific American</strong></td></tr></tbody></table><p><a name="gmaTI"></a></p><h1 id="Machine-learning-in-super-conductor"><a href="#Machine-learning-in-super-conductor" class="headerlink" title="Machine learning in super conductor"></a>Machine learning in super conductor</h1><p>2018, one algorithm trained on a database of thousands of materials, developed ability to identify superconductors in another data set with 92 percent accuracy and to estimate their critical temperatures.<br />It did so using only simple elemental properties such as atomic weight and melting temperature. </p><p>Shortcoming: There is something you do which works, and you just keep doing exactly the same thing to make it work, and why you do it you have no idea. –Somayazulu  </p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>听抄3: If you Don&#39;t understand Quantum Physics, Try This!</title>
      <link href="/LearnNotes/Ted-Phy1_2.html"/>
      <url>/LearnNotes/Ted-Phy1_2.html</url>
      
        <content type="html"><![CDATA[<h1 id="听抄3-If-you-Don’t-understand-Quantum-Physics-Try-This"><a href="#听抄3-If-you-Don’t-understand-Quantum-Physics-Try-This" class="headerlink" title="听抄3: If you Don’t understand Quantum Physics, Try This!"></a>听抄3: If you Don’t understand Quantum Physics, Try This!</h1><p><a href="https://www.youtube.com/watch?v=Usu9xZfabPM&list=WL&index=6&t=52s" target="_blank" rel="noopener">Youtube Link</a><br>Author:<a href="https://www.youtube.com/channel/UCxqAWLTk1CmBvZFPzeZMd9A" target="_blank" rel="noopener">Domain of Science</a></p><p>6:02  </p><p>Now, for entanglement.<br>Let’s say, two electron waves meet. The eaves interfaced with each other become mixed up. This means that mathematically, we now have one <em>wavefunction</em> that describe everything about both electrons. And them, <strong>inextracablly</strong> linked, even if they move away far from each other.<br>A measurement on one of the particle like measuring if it spans up and down, is correlated the measurement of the other. Even if they moved billions of miles away. Einstein feel very uncomfortable with this idea because if you measure one of the particles here, you instantly know what the other will be even it is billions of miles away. And that’s got a sort of wave faster than the light communication, which is not allowed by the theory of relativity.</p><p>But it turns out that you can’t actually use this for communicate information because the measurements give you random results. But the fact that the correlated means that some how, there is a link that <strong>strach</strong> over that distance. This is called <em>Non-locality</em>.  </p><p><em>Quantum Tunnelling</em>.<br><em>Quantum Tunnelling</em> is where particles of probabilities of moving through is a barriers essentially allowed things like electrons to pass through the walls. But the <em>wavefunction</em> meets the barrier, it decades exponentially inside the barrier. But, if the Barrier is now on other’s <em>wavefunction</em> still exist on the other side. Meaning that there are still probability of the particle been found there when the measurement is made. In fact the only reason in your are a life is because the <em>Quantum Tunnelling</em> in the sun which makes the sun shine. Protons randomly repair each other, but they got small probability of <em>Quantum Tunnelling</em> into each other, which was turns hydrogen into helium, and release it’s fusion energy. All life exist on earth because of the energy from the Sun except for life relied on hydro-thermalvents.</p><p>Now, onto the <em>Heisenberg Uncertain Principle</em>.<br>Instead at the beginning of that this <em>wavefunction</em> contains all the informations like the position, momentum of the electrons, we just have to do some maths on it. The position is given by amplitude and height of the wave. And the momentum given by the wavelength of the wave. By for this specific waves, the position gives probability distribution. So, we don’t know exactly where the electron is.<br>Also, there is an uncertainty in the momentum because this wave is made of many different wavelength. But, we can’t predict that uncertainty.<br>Let’s have a wave has only one wavelength. So, a <em>sin-wave</em>. Now, we know them momentum exactly, because the wavelength is a single valuer. But looking at position, there is equal probability of electron could be found anywhere in the universe.<br>Ok, let’s do the opposite. Let’s make a wave has only one position. Now, we know where exactly the electron is. But what the wavelength of this wave? Now, the wavelength is very uncertain. Basically, only a sin-wave gives you a precise momentum. And any wave that isn’t a perfect sin-wave, you have to build out multiple perfect sin-waves. And each of those multiple different sin-waves got a different wavelength. And hence, you have a range of possible different values of momentum of the particle. This is <em>Heisenberg uncertainty principle</em>. You can only know somethings precisely but not everything. If you got a definite value of momentum, we don’t know anything about the position. Or you know the position very well, but don’t know anything about momentum. Or, you in some intermediate state. And this is a limits of our measurement operating. This is a fundamental property of the universe.</p><p>And finally, where is the name <em>Energy Quantization</em> come from?<br>Well, quantum is a packet of something, like a chunk of something. One of the first quantum effect people saw were atomic spectrum, which is where atoms give of light with specific dis-create of energies. It works like this. Imaging a string that tight both its end, like a guitar string. If you pluck only certain waves can exist because the ends of tight <strong>end</strong>. In this situation, we say this wavelength is quantised to certain values. The same happens if you tight the ends of the string together because the wave has to match up, they can only vibrating on a certain restricted waves. And this is what happening when two electron in an atom. The electron waves is constrained by the atom quantised into a certain wavelength. Short wavelength got high energy, and long wavelength got low energy. This is why the light emitted by an atom looked like a buck hold because this barrier of light correspond to a an electron jumping from a wave with high energy to one wiht low energy. And at the same time, it emitting a quantised of photon light when it dose with this. So, the light from an atom is a quantised to descreate packets of energy.</p><p>Ok, so that’s all the basic of the quantum physics. Here is some technical notes which on essential to know, but the post in screen now is interested in a little bit more about the mathematical detail.<br>So, to round up, in quantum physics, objects are described as wave function. But when we measure them, what we see are particles. This leads particles-wave duality, and also the measurement problem. In the consequence of this wavefunctions, a quantum phenomenon superposition entanglement, quantum tunnelling, the Heisenberg Uncertainty Principle, and energy Quantization. So, if you understand of this things, you got a good basic understanding of quantum physics. Despite its reputation of quantum mechanics isn’t too difficult for most people to get to basic of what’s going on.</p><hr><p><a href="https://github.com/Karobben" target="_blank" rel="noopener">Github</a><br><a href="http://Karobben.github.io">Blog</a><br><a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">Bilibili</a><br><a href="https://karobben.github.io/R/R-index.html">R 语言画图索引</a></p><hr><p>Identity:  86.38% 5894 <br><br>﻿Now_ for entanglement. Let’s say_ two electron-waves meet. Their waves interfere_ with<br><span style="color:salmon;">_</span>Now<span style="color:salmon;">,</span> for entanglement. Let<span style="color:salmon;">‘</span>s say<span style="color:salmon;">,</span> two electron<span style="color:salmon;"> </span>waves meet. The<span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">e</span>aves interf<span style="color:salmon;">a</span><span style="color:salmon;">c</span>e<span style="color:salmon;">d</span> with <br><br>each other and become mixed up. This means that mathematically_ we now have one wave-fun<br>each other <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>become mixed up. This means that mathematically<span style="color:salmon;">,</span> we now have one wave<span style="color:salmon;">_</span>fun<br><br>ction that describes everything about both electrons_ and they are inextricabl_y linked,<br>ction that describe<span style="color:salmon;">_</span> everything about both electrons<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd the<span style="color:salmon;">m</span><span style="color:salmon;">,</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> inextr<span style="color:salmon;">a</span>cabl<span style="color:salmon;">l</span>y linked,<br><br> even if they move f_ar away from each other. A measurement on one of the particles, lik<br> even if they move <span style="color:salmon;">a</span><span style="color:salmon;">w</span>a<span style="color:salmon;">y</span> <span style="color:salmon;">f</span><span style="color:salmon;">_</span>a<span style="color:salmon;">r</span> from each other. A measurement on one of the particle<span style="color:salmon;">_</span><span style="color:salmon;">_</span> lik<br><br>e measuring if it is spin_ up or_ down_ is now correlated with a measurement on the othe<br>e measuring if it <span style="color:salmon;">_</span>s<span style="color:salmon;">_</span><span style="color:salmon;">_</span>p<span style="color:salmon;">a</span>n<span style="color:salmon;">s</span> up <span style="color:salmon;">a</span><span style="color:salmon;">n</span><span style="color:salmon;">d</span> down<span style="color:salmon;">,</span> is <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>correlated <span style="color:salmon;">_</span><span style="color:salmon;">_</span>th<span style="color:salmon;">e</span><span style="color:salmon;">_</span> measurement o<span style="color:salmon;">f</span> the othe<br><br>r, even if they move_ billions of miles away. Einstein was_ very uncomfortable with this<br>r<span style="color:salmon;">.</span> <span style="color:salmon;">E</span>ven if they move<span style="color:salmon;">d</span> billions of miles away. Einstein <span style="color:salmon;">f</span><span style="color:salmon;">e</span><span style="color:salmon;">e</span><span style="color:salmon;">l</span> very uncomfortable with this<br><br> idea because if you measure one of the particles here_ you instantaneously know what th<br> idea because if you measure one of the particles here<span style="color:salmon;">,</span> you instant<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>ly know what th<br><br>e other will be even if it is billions of miles away, and that’s got a sort of whiff of<br>e other will be even i<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t is billions of miles away<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd that’s got a sort of w<span style="color:salmon;">a</span><span style="color:salmon;">v</span><span style="color:salmon;">e</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span>f<span style="color:salmon;">_</span><br><br>faster than <strong><strong>light communication, which is not allowed by the theory of relativity. _<br><span style="color:salmon;">_</span>aster than <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>light communication, which is not allowed by the theory of relativity. <span style="color:salmon;"> </span><br><br>But it turns out _</strong></strong>you can’t actually use this to_ communicate information, because t<br>But it turns out <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>you can<span style="color:salmon;">‘</span>t actually use this <span style="color:salmon;">f</span>o<span style="color:salmon;">r</span> communicate information<span style="color:salmon;">_</span> because t<br><br>he measurements give you random results, but the fact that they are correlated means tha<br>he measurements give you random results<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut the fact that the<span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>correlated means tha<br><br>t some_how_ there is a link that stretches over that distance. This is called non-locali<br>t some<span style="color:salmon;"> </span>how<span style="color:salmon;">,</span> there is a link that str<span style="color:salmon;">a</span><span style="color:salmon;">_</span>ch<span style="color:salmon;">_</span><span style="color:salmon;">_</span> over that distance. This is called <span style="color:salmon;">N</span>on-locali<br><br>ty. <em>Quantum tunnelling. Quantum tunnelling is where particles have a probability__ of m<br>ty. <span style="color:salmon;"> </span>Quantum <span style="color:salmon;">T</span>unnelling. Quantum <span style="color:salmon;">T</span>unnelling is where particles <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;"></em></span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span>probabilit<span style="color:salmon;">i</span><span style="color:salmon;">e</span><span style="color:salmon;">s</span> of m<br><br>oving through <strong><em>__barriers, essentially allowing things like electrons to pass through<br>oving through <span style="color:salmon;">i</span><span style="color:salmon;">s</span><span style="color:salmon;"> </span><span style="color:salmon;">a</span><span style="color:salmon;"> </span>barriers<span style="color:salmon;"></em></span> essentially allow<span style="color:salmon;">e</span><span style="color:salmon;">d</span><span style="color:salmon;">_</span> things like electrons to pass through <br><br>__</strong>walls. W____hen a wave-function meets a__ barrier_ it decay_s exponentially in____ t<br><span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>walls. <span style="color:salmon;">B</span><span style="color:salmon;">u</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span>he<span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span>wave<span style="color:salmon;">_</span>function meets <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span> barrier<span style="color:salmon;">,</span> it deca<span style="color:salmon;">d</span><span style="color:salmon;">e</span>s exponentially in<span style="color:salmon;">s</span><span style="color:salmon;">i</span><span style="color:salmon;">d</span><span style="color:salmon;">e</span> t<br><br>he barrier, but_ if the barrier is narrow en_ough the___ wave-function w_ill exist on th<br>he barrier<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut<span style="color:salmon;">,</span> if the <span style="color:salmon;">B</span>arrier is n<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>ow <span style="color:salmon;">o</span>n<span style="color:salmon;"> </span>o<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>the<span style="color:salmon;">r</span><span style="color:salmon;">‘</span><span style="color:salmon;">s</span> wave<span style="color:salmon;">_</span>function <span style="color:salmon;">s</span><span style="color:salmon;">t</span>ill exist on th<br><br>e other side_ meaning th_____ere is_ a____ probability of the particle being found there<br>e other side<span style="color:salmon;">.</span> <span style="color:salmon;">M</span>eaning th<span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span><span style="color:salmon;">h</span>ere <span style="color:salmon;">a</span><span style="color:salmon;">r</span><span style="color:salmon;">e</span> <span style="color:salmon;">s</span><span style="color:salmon;">t</span><span style="color:salmon;">i</span><span style="color:salmon;">l</span><span style="color:salmon;">l</span> probability of the particle be<span style="color:salmon;">e</span>n<span style="color:salmon;">_</span> found there<br><br> when a__ measurement is made. In fact the only reason <strong><em>you</em> are a_live is because of_<br> when <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span> measurement is made. In fact the only reason <span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;"> </span>you<span style="color:salmon;">r</span> are a<span style="color:salmon;"> </span>li<span style="color:salmon;">f</span>e is because <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><br><br> quantum tunnelling in the Sun which make_ the Sun shine. Protons <strong>n_ormally repel_ eac<br> <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">T</span>unnelling in the <span style="color:salmon;">s</span>un which make<span style="color:salmon;">s</span> the <span style="color:salmon;">s</span>un shine. Protons <span style="color:salmon;">r</span><span style="color:salmon;">a</span>n<span style="color:salmon;">d</span>o<span style="color:salmon;">_</span>m<span style="color:salmon;">_</span>l<span style="color:salmon;">_</span>y rep<span style="color:salmon;">a</span><span style="color:salmon;">i</span><span style="color:salmon;">r</span> eac<br><br>h other, but they have a small probability of quantum tunnelling into each other_ which<br>h other, but they <span style="color:salmon;">g</span><span style="color:salmon;">o</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span>small probability of <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">T</span>unnelling into each other<span style="color:salmon;">,</span> which <br><br>is what turns hydrogen into helium_ and release</strong></strong>s fusion energy. All life <strong>__</strong>on Ea<br><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>w<span style="color:salmon;">_</span>a<span style="color:salmon;">s</span> turns hydrogen into helium<span style="color:salmon;">,</span> and release<span style="color:salmon;"> </span><span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;">‘</span>s fusion energy. All life <span style="color:salmon;">e</span><span style="color:salmon;">x</span><span style="color:salmon;">i</span><span style="color:salmon;">s</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>on <span style="color:salmon;">e</span>a<br><br>rth exists because of <strong>e</strong>nergy from the Sun, except for life ar______ound hydro_therma<br>rth <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>because of <span style="color:salmon;">t</span><span style="color:salmon;">h</span>e<span style="color:salmon;"> </span><span style="color:salmon;">e</span>nergy from the Sun<span style="color:salmon;">_</span> except for life <span style="color:salmon;">_</span>r<span style="color:salmon;">e</span><span style="color:salmon;">l</span><span style="color:salmon;">i</span><span style="color:salmon;">e</span><span style="color:salmon;">d</span><span style="color:salmon;"> </span>o<span style="color:salmon;">_</span>n<span style="color:salmon;">_</span> hydro<span style="color:salmon;">-</span>therma<br><br>l vents. <em>Now</em> on to the Heisenberg Uncertainty principle. I s__aid that the beginning _<br>l<span style="color:salmon;">_</span>vents. <span style="color:salmon;"> </span>Now<span style="color:salmon;">,</span> on<span style="color:salmon;">_</span>to the Heisenberg Uncertain<span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">P</span>rinciple. I<span style="color:salmon;">n</span>s<span style="color:salmon;">t</span><span style="color:salmon;">e</span>a<span style="color:salmon;">_</span>d <span style="color:salmon;">_</span><span style="color:salmon;">_</span>at the beginning <span style="color:salmon;">o</span><br><br><strong>that this wave-function contains all of the information_ like __</strong>position and momentu<br><span style="color:salmon;">f</span><span style="color:salmon;"> </span>that this wave<span style="color:salmon;">_</span>function contains all <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>the information<span style="color:salmon;">s</span> like <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>position<span style="color:salmon;">,</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> momentu<br><br>m of the electron_, we just have to do some maths on it. The position is given by the am<br>m of the electron<span style="color:salmon;">s</span>, we just have to do some maths on it. The position is given by <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>am<br><br>plitude, or_ height of the wave, and the momentum is given by the wavelength of the wave<br>plitude<span style="color:salmon;">_</span> <span style="color:salmon;">a</span><span style="color:salmon;">n</span><span style="color:salmon;">d</span> height of the wave<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd the momentum <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>given by the wavelength of the wave<br><br>. But for this specific wave__ the position gives us a probability distribution, so_ we<br>. B<span style="color:salmon;">y</span><span style="color:salmon;">_</span> for this specific wave<span style="color:salmon;">s</span><span style="color:salmon;">,</span> the position gives <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>probability distribution<span style="color:salmon;">.</span> <span style="color:salmon;">S</span>o<span style="color:salmon;">,</span> we <br><br>don’t know exactly where the electron is. Also_ there is an uncertainty in the momentum<br>don’t know exactly where the electron is. Also<span style="color:salmon;">,</span> there is an uncertainty in the momentum <br><br>because this wave is made of many different wavelengths. But_ we can__ <em>reduce that unce<br>because this wave is made of many different wavelength<span style="color:salmon;"></em></span>. But<span style="color:salmon;">,</span> we can<span style="color:salmon;">‘</span><span style="color:salmon;">t</span> <span style="color:salmon;">p</span>red<span style="color:salmon;">i</span>c<span style="color:salmon;">t</span> that unce<br><br>rtainty, let’s have a wave that only has one wavelength, so_ a sine wave. Now_ we know t<br>rtainty<span style="color:salmon;">.</span> <span style="color:salmon;">L</span>et<span style="color:salmon;">‘</span>s have a wave <span style="color:salmon;">_</span>ha<span style="color:salmon;">s</span> only <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>one wavelength<span style="color:salmon;">.</span> <span style="color:salmon;">S</span>o<span style="color:salmon;">,</span> a sin<span style="color:salmon;">-</span><span style="color:salmon;">_</span>wave. Now<span style="color:salmon;">,</span> we know t<br><br>he_ momentum exactly_ because the wavelength has a single value,_ but look___ at the pos<br>he<span style="color:salmon;">m</span> momentum exactly<span style="color:salmon;">,</span> because the wavelength <span style="color:salmon;">i</span><span style="color:salmon;">_</span>s a single value<span style="color:salmon;">r</span><span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut look<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> at <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>pos<br><br>ition. There is an equal probability of the electron <strong>__</strong>being found anywhere in the u<br>ition<span style="color:salmon;">,</span> <span style="color:salmon;">t</span>here is <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>equal probability of <span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">_</span><span style="color:salmon;">_</span>lectron <span style="color:salmon;">c</span><span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;">l</span><span style="color:salmon;">d</span><span style="color:salmon;"> </span>be<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> found anywhere in the u<br><br>niverse. Okay let’s do the opposite_ let’s make a wave that has only got one position. N<br>niverse. Ok<span style="color:salmon;">,</span><span style="color:salmon;">_</span> let’s do the opposite<span style="color:salmon;">.</span> <span style="color:salmon;">L</span>et<span style="color:salmon;">‘</span>s make a wave <span style="color:salmon;">_</span>ha<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>s only <span style="color:salmon;">_</span>o<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>ne position. N<br><br>ow_ we know <strong>e__</strong>xactly where the electron is, but what is the wavelength of the_ wave<br>ow<span style="color:salmon;">,</span> we know <span style="color:salmon;">w</span><span style="color:salmon;">h</span>e<span style="color:salmon;">r</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span><span style="color:salmon;">e</span>xactly <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>the electron is<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut what <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>the wavelength of th<span style="color:salmon;">i</span><span style="color:salmon;">s</span> wave<br><br>? Now_ the wavelength is very uncertain. Basically_ only a sine wave gives you a precise<br>? Now<span style="color:salmon;">,</span> the wavelength is very uncertain. Basically<span style="color:salmon;">,</span> only a sin<span style="color:salmon;">-</span><span style="color:salmon;">_</span>wave gives you a precise<br><br> momentum, and any wave that isn’t a perfect sine wave, you have to build out of multipl<br> momentum<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd any wave that isn’t a perfect sin<span style="color:salmon;">-</span><span style="color:salmon;">_</span>wave, you have to build out <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>multipl<br><br>e differ_ent sine waves, and each of those multiple different sine waves has got a diffe<br>e <span style="color:salmon;">p</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>er<span style="color:salmon;">f</span>e<span style="color:salmon;">c</span>t sin<span style="color:salmon;">-</span><span style="color:salmon;">_</span>waves<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd each of those multiple different sin<span style="color:salmon;">-</span><span style="color:salmon;">_</span>waves <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>got a diffe<br><br>rent wavelength, and hence_ you have a range of possible different values of momentum fo<br>rent wavelength<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd hence<span style="color:salmon;">,</span> you have a range of possible different values of momentum <span style="color:salmon;">_</span>o<br><br>r the particle. This is Heisenberg’s Uncertainty principle, you can only know c__ertain<br><span style="color:salmon;">f</span> the particle. This is Heisenberg<span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">u</span>ncertainty principle<span style="color:salmon;">.</span> <span style="color:salmon;">Y</span>ou can only know <span style="color:salmon;">s</span><span style="color:salmon;">o</span><span style="color:salmon;">m</span>e<span style="color:salmon;">_</span>t<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><br><br>things precisely, but not everything. Either you have got a definite value of momentum,<br><span style="color:salmon;">_</span>hings precisely<span style="color:salmon;">_</span> but not everything. <span style="color:salmon;">I</span><span style="color:salmon;">f</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> you <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>got a definite value of momentum, <br><br>and don’t know anything about <strong><em>_position, or you know the position very well, but don’<br><span style="color:salmon;">w</span><span style="color:salmon;">e</span><span style="color:salmon;"></em></span> don’t know anything about <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>position<span style="color:salmon;">.</span> <span style="color:salmon;">O</span>r you know the position very well, but don’<br><br>t know anything about the momentum, or_ you are in some intermediate state. And this isn<br>t know anything about <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>momentum<span style="color:salmon;">.</span> <span style="color:salmon;">O</span>r<span style="color:salmon;">,</span> you <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>in some intermediate state. And this is<span style="color:salmon;">_</span><br><br>‘t a limit_ of our measuri</strong>ng apparatus,_ this is a fundamental property of the Univers<br><span style="color:salmon;">_</span><span style="color:salmon;">_</span> a limit<span style="color:salmon;">s</span> of our measur<span style="color:salmon;">e</span><span style="color:salmon;">m</span><span style="color:salmon;">e</span>n<span style="color:salmon;">t</span> <span style="color:salmon;">o</span>p<span style="color:salmon;">e</span><span style="color:salmon;">_</span>rat<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span><span style="color:salmon;">.</span> <span style="color:salmon;">T</span>his is a fundamental property of the <span style="color:salmon;">u</span>nivers<br><br>e! <em>And finally, where does the name ‘q______uantum’____ come from. Well a quanta</em> is a<br>e<span style="color:salmon;">.</span> <span style="color:salmon;"> </span>And finally, where <span style="color:salmon;">i</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>s the name <span style="color:salmon;">E</span><span style="color:salmon;">n</span><span style="color:salmon;">e</span><span style="color:salmon;">r</span><span style="color:salmon;">g</span><span style="color:salmon;">y</span><span style="color:salmon;"> </span><span style="color:salmon;">Q</span>uant<span style="color:salmon;">i</span><span style="color:salmon;">z</span><span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;">i</span><span style="color:salmon;">o</span><span style="color:salmon;">n</span> come from<span style="color:salmon;">?</span> Well<span style="color:salmon;">,</span><span style="color:salmon;">_</span> quant<span style="color:salmon;">u</span><span style="color:salmon;">m</span> is a <br><br>packet of something_ like a chunk of something, and one of the first quantum effects peo<br>packet of something<span style="color:salmon;">,</span> like a chunk of something<span style="color:salmon;">.</span> <span style="color:salmon;">O</span>n<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>e of the first quantum effect<span style="color:salmon;">_</span> peo<br><br>ple saw were atomic spectra__ which is where atoms give off light with specific dis_cre_<br>ple saw were atomic spectr<span style="color:salmon;">u</span><span style="color:salmon;">m</span><span style="color:salmon;">,</span> which is where atoms give of<span style="color:salmon;">_</span> light with specific dis<span style="color:salmon;">-</span>cre<span style="color:salmon;">a</span><br><br>te <strong><em>energies. It works like this. Imagine a string that is tied at both _</em></strong>ends, like<br>te <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;"> </span>energies. It works like this. Imagin<span style="color:salmon;">g</span> a string that <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>ti<span style="color:salmon;">g</span><span style="color:salmon;">h</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t both <span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;">s</span><span style="color:salmon;"> </span>end<span style="color:salmon;">_</span>, like<br><br> a guitar string. If you pluck it, only certain waves can exist because the ends are tie<br> a guitar string. If you pluck <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>only certain waves can exist because the ends <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;">_</span> ti<span style="color:salmon;">g</span><br><br>d_ down,_ in this situation_ we say that the wavelengths are quantised to certain values<br><span style="color:salmon;">h</span><span style="color:salmon;">t</span> <span style="color:salmon;">e</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>n<span style="color:salmon;">d</span><span style="color:salmon;">.</span> <span style="color:salmon;">I</span>n this situation<span style="color:salmon;">,</span> we say th<span style="color:salmon;">i</span><span style="color:salmon;">s</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>wavelength<span style="color:salmon;">_</span> <span style="color:salmon;">i</span><span style="color:salmon;">s</span><span style="color:salmon;">_</span> quantised to certain values<br><br>. The same thing happens if you ties_ the ends of the string together because the waves<br>. The same <span style="color:salmon;">_</span>h<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>appens if you ti<span style="color:salmon;">g</span><span style="color:salmon;">h</span><span style="color:salmon;">t</span> the ends of the string together because the wave<span style="color:salmon;">_</span> <br><br>have to match up, they can only vibrate__ in <strong>certain restricted way_s. And this is wha<br>ha<span style="color:salmon;">s</span><span style="color:salmon;">_</span> to match up, they can only vibrat<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> <span style="color:salmon;">o</span>n <span style="color:salmon;">a</span><span style="color:salmon;"> </span>certain restricted wa<span style="color:salmon;">v</span><span style="color:salmon;">e</span>s. And this is wha<br><br>t is happening to</strong> an_ electron in an atom. The electron-wave_ is constrained by the at<br>t <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>happening <span style="color:salmon;">w</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;">n</span> <span style="color:salmon;">t</span><span style="color:salmon;">w</span><span style="color:salmon;">o</span> electron in an atom. The electron<span style="color:salmon;"> </span>wave<span style="color:salmon;">s</span> is constrained by the at<br><br>om and quantised <strong>to <em>_certain wavelengths, short wavelength have high energy</em> and long<br>om <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>quantised <span style="color:salmon;">i</span><span style="color:salmon;">n</span>to <span style="color:salmon;">a</span><span style="color:salmon;"> </span>certain wavelength<span style="color:salmon;">.</span><span style="color:salmon;">_</span> <span style="color:salmon;">S</span>hort wavelength <span style="color:salmon;">g</span><span style="color:salmon;">o</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span> high energy<span style="color:salmon;">,</span> and long<br><br> wavelengths have a lower energy. This is why the light emitted by an atom looks_ like a<br> wavelength<span style="color:salmon;">_</span> <span style="color:salmon;">g</span><span style="color:salmon;">o</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span>low<span style="color:salmon;">_</span><span style="color:salmon;">_</span> energy. This is why the light emitted by an atom look<span style="color:salmon;">e</span><span style="color:salmon;">d</span> like a<br><br> barc_</strong>o_de because each__ bar____ of light corresponds to a__n electron jumping from a<br> b<span style="color:salmon;">u</span><span style="color:salmon;">_</span>c<span style="color:salmon;">k</span><span style="color:salmon;"> </span><span style="color:salmon;">h</span>o<span style="color:salmon;">l</span>d<span style="color:salmon;">_</span> because <span style="color:salmon;">t</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>h<span style="color:salmon;">i</span><span style="color:salmon;">s</span> bar<span style="color:salmon;">r</span><span style="color:salmon;">i</span><span style="color:salmon;">e</span><span style="color:salmon;">r</span> of light correspond<span style="color:salmon;">_</span> to a<span style="color:salmon;"> </span><span style="color:salmon;">a</span>n electron jumping from a<br><br> wave with a high energy to one with a lower energy, and at the same time_ <strong><em>emitting a<br> wave with <span style="color:salmon;"></em></span><span style="color:salmon;">_</span>high energy to one wi<span style="color:salmon;">_</span>h<span style="color:salmon;">t</span><span style="color:salmon;">_</span> low<span style="color:salmon;">_</span><span style="color:salmon;">_</span> energy<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd at the same time<span style="color:salmon;">,</span> <span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>emitting a<br><br> quantised _</strong>photon of light when it do_es____ this. So_ the light from an atom is <strong>qu<br> quantised <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;"> </span>photon <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>light when it do<span style="color:salmon;">s</span>e<span style="color:salmon;"> </span><span style="color:salmon;">w</span><span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;">h</span> this. So<span style="color:salmon;">,</span> the light from an atom is <span style="color:salmon;">a</span><span style="color:salmon;"> </span>qu<br><br>antised to discre_te packets of energy. <em>Okay so that’s all the basics of _</em></strong>quantum ph<br>antised to d<span style="color:salmon;">e</span>scre<span style="color:salmon;">a</span>te packets of energy. <span style="color:salmon;"> </span>Ok<span style="color:salmon;">,</span><span style="color:salmon;">_</span> so that<span style="color:salmon;">‘</span>s all the basic<span style="color:salmon;">_</span> of <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>quantum ph<br><br>ysics, here are some technical notes which aren’t essential to know, but <strong><em>_pause the s<br>ysics<span style="color:salmon;">.</span> <span style="color:salmon;">H</span>ere <span style="color:salmon;">i</span><span style="color:salmon;">s</span><span style="color:salmon;"></em></span> some technical notes which <span style="color:salmon;">o</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>n<span style="color:salmon;">_</span><span style="color:salmon;">_</span> essential to know, but <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>p<span style="color:salmon;">o</span><span style="color:salmon;">_</span>s<span style="color:salmon;">t</span> <span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">_</span> s<br><br>creen now if you are interested in a little __</strong>more <strong><strong>__</strong></strong>mathematical detail. So_<br>creen now i<span style="color:salmon;">s</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>interested in a little <span style="color:salmon;">b</span><span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>more <span style="color:salmon;">a</span><span style="color:salmon;">b</span><span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>mathematical detail. So<span style="color:salmon;">,</span> <br><br>to round up. In quantum physics_ objects are described with wave-functions, but when we<br>to round up<span style="color:salmon;">,</span> <span style="color:salmon;">i</span>n quantum physics<span style="color:salmon;">,</span> objects are described <span style="color:salmon;">a</span><span style="color:salmon;">s</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> wave<span style="color:salmon;"> </span>function<span style="color:salmon;">.</span><span style="color:salmon;">_</span> <span style="color:salmon;">B</span>ut when we <br><br>measure them, what we see are particles, so this leads to particle_-wave duality, and al<br>measure them, what we see are particles<span style="color:salmon;">.</span> <span style="color:salmon;">T</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>his leads <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>particle<span style="color:salmon;">s</span>-wave duality, and al<br><br>so the measurement problem. And the consequence of these wave-functions_ are the quantum<br>so the measurement problem. <span style="color:salmon;">I</span>n<span style="color:salmon;">_</span> the consequence of th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> wave<span style="color:salmon;">_</span>functions<span style="color:salmon;">,</span> a<span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>quantum<br><br> phenomena of superposition, entanglement, quantum tunnelling, the Heisenberg uncertaint<br> phenomen<span style="color:salmon;">_</span><span style="color:salmon;">_</span>o<span style="color:salmon;">n</span> superposition<span style="color:salmon;">_</span> entanglement, quantum tunnelling, the Heisenberg <span style="color:salmon;">U</span>ncertaint<br><br>y principle_ and energy quantisation. So_ if you understand <em>__these things</em> you have go<br>y <span style="color:salmon;">P</span>rinciple<span style="color:salmon;">,</span> and energy <span style="color:salmon;">Q</span>uanti<span style="color:salmon;">z</span>ation. So<span style="color:salmon;">,</span> if you understand <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;"> </span>th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> things<span style="color:salmon;">,</span> you <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>go<br><br>t a good basic understanding of quantum physics. Despite its reputation I think quantum<br>t a good basic understanding of quantum physics. Despite its reputation <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> quantum <br></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>TED听抄2: If you Don&#39;t understand Quantum Physics, Try This!</title>
      <link href="/LearnNotes/Ted-Phy1.html"/>
      <url>/LearnNotes/Ted-Phy1.html</url>
      
        <content type="html"><![CDATA[<h1 id="TED听抄2-If-you-Don’t-understand-Quantum-Physics-Try-This"><a href="#TED听抄2-If-you-Don’t-understand-Quantum-Physics-Try-This" class="headerlink" title="TED听抄2: If you Don’t understand Quantum Physics, Try This!"></a>TED听抄2: If you Don’t understand Quantum Physics, Try This!</h1><p><a href="https://www.youtube.com/watch?v=Usu9xZfabPM&list=WL&index=6&t=52s" target="_blank" rel="noopener">Youtube Link</a><br>Author:<a href="https://www.youtube.com/channel/UCxqAWLTk1CmBvZFPzeZMd9A" target="_blank" rel="noopener">Domain of Science</a></p><p>Quantum Physics has been mythically complicate and hard to understand.<br>In fact, <strong>Richard Feynmann</strong> who won the Nobel Prise for his work on quantum electron dynamic said, “If you think you understand quantum physics, you don’t understand quantum physics.” Which is kind of <strong>disheartening</strong> for us, because if he didn’t understand it, what chance that reset of us have?  </p><p>Fortunately, this quota is a little bit misleading. We do effect understand Quantum Physics really well. In fact, is arguably the most successful scientific theory out there. And that let us invent technologies like computers, digital cameras, LED screens, lasers, nuclear power plants. You know you don’t really want to build a nuclear power plant if you don’t really understand how it works.  </p><p>So, Quantum Physics is just a part of physics that describe very small of things in our Universe, molecules, atoms, subatomic particles things like that. That thing don’t down quiet work the same way that we used to up here. This is fascinating, because you and everything around you are made from Quantum Physics. And so, this is really hall of whole universe is actually working.</p><p>As drawing this protons, neutrons, and electrons as particles, but in Quantum Mechanics, we really describe everything as waves. By the way, I am using the Quantum Physics and Quantum Mechanics inter-change be that is the same thing. So, instead an electron looking like this (a dot), it should look something like this(a wave). This is called a <em>Wavefunction</em>. But this <em>wavefunction</em> isn’t a real physical wave like a wave on water or sound-wave. The Quantum Wave is an abstract mathematical description.</p><p>To get the real word properties like positional and momentums of an electron, we have to do mathematical operations on this <em>wavefunction</em>. So, for the position, we take the amplitude and square it, which for this wave will looks something like this. This gives us things called probability distribution. Which tells us that your are more like to find electron here than here. And when we actually measure where the electron is, an electron Popsicle pops up somewhere in this area. So, in Quantum Physics, we don’t know anything with infinite details, could only predict the probabilities of that things happen. And it looks like the fundamental feature of the universe, which is quiet <strong>deparcher</strong> from the clock work to determines of university in classical physics, the kind of thing Newton derived.  </p><p>This way function model predicts what subatomic particles will do is incredibly well. But wirely, we have got no idea of this <em>wavefunction</em> is literately real or not. No ones ever seen a quantum waves because whenever we measure an electron, all we have seen is a point like electron particle. So, there’s like there is a hide quantum realm where the wave is exist, and then, the word we can sem, which is all the waves turned into particles. And a barrier between this is measurement. We say that the measurement collapse it’s <em>wavefunction</em>. But we don’t actually have any physics to describe how the wave collapses. This is a gap on knowledge that we’ve doubt the measurement problems, and this is one of the things that Feynmann was referring to with this quote.  </p><p>Another confusing things is how exactly picture an electron. It seems to be a wave until you measure it, and then, it is a particle. So, what actually is it? It’s know as particle-wave duality and here is an example for action for Feynmann’s famous double slit experiment.  </p><p>Imaging spring a paper gun, into a wall with two opening in it. It is inspect to see two columns of pint go through and hit the wall behind. But if you shrink this all dots into electrons, you seen something quite different. You can fire one electrons at a time out the slits, and they appear on the back wall. But as they build up over time, you get a whole pattern of stripes instead of just two bands. This pattern of stripes was called interference pattern. Some thing you only seem with waves. The idea is that it’s electron wave that goes through both slits at the same time, and then the waves from each slit overlap with each other. In where the waves get together, you get high probability of electron popping up in the wall. But where the waves comes rare the  probabilities are very low. So, actually on the back wall, the highest probability of you find the electron is in the middle of the slits. And then it goes down, and up and and up-down again. This is the interference pattern. So, if you fire one electron after another, they follow this probabilities distribution, and this interference pattern start building up and thats exactly what we see in the experiment.  </p><p>So, this shows that electrons behave like waves in this experiment. The question is what actually happens to this spread out electron wave when you do measurement. Seems like you go through this spread out wave to this look like particle. But like I said, this is nothing in Quantum Mechanics that tell us how the <em>wavefunction</em> collapses. And this is not the only true for electrons. That everything in the universe. So, this double slits experiments has huge consequence from modeling universe. And it’s very surprising the first time when it was down.  </p><p>Physicists are still <strong>grapling</strong> with this question today and come up with many interpretations of quantum mechanics and trying to explain this results, and explaining, how reality actually works.  </p><p>Ok, let’s go back to the <em>wavefunction</em>, we can now use this picture to explain other feature of Quantum Physics that you may have heard about. So, this is just one possible wave function for electron. But there have many others. Like this one for instance. This says it as an electron has probabilities have been here and probabilities over been here. And very little probability have been in the middle. This is perfectly allowed in Quantum Physics. And this wither Frams thinks can be two place in once comes from. This is know as <em>superposition</em>, which comes from the fact that this wave made by adding or super-imposing this two waves. The word <em>superposition</em> just means the adding together of the waves. We already saw this in double slit experiment. And It’s not really a very special phenomenon. You can even seen <em>superposition</em> by draping two <strong>paddles</strong> into a pond to see the repels overlap.</p><p>Now for entanglement. (See you next time)</p><hr><p><a href="https://github.com/Karobben" target="_blank" rel="noopener">Github</a><br><a href="http://Karobben.github.io">Blog</a><br><a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">Bilibili</a><br><a href="https://karobben.github.io/R/R-index.html">R 语言画图索引</a></p><hr><p>Identity:  88% 6609 <br><br>﻿1 Quantum physics has a___ myst_ique of being complicated and hard to understand, in fa<br><span style="color:salmon;">&gt;</span>1<span style="color:salmon;"><br></span>Quantum <span style="color:salmon;">P</span>hysics has <span style="color:salmon;">b</span><span style="color:salmon;">e</span><span style="color:salmon;">e</span><span style="color:salmon;">n</span> my<span style="color:salmon;">_</span>t<span style="color:salmon;">h</span>i<span style="color:salmon;">c</span><span style="color:salmon;">a</span><span style="color:salmon;">l</span><span style="color:salmon;">l</span><span style="color:salmon;">y</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>complicate<span style="color:salmon;">_</span> and hard to understand<span style="color:salmon;">.</span> <span style="color:salmon;">I</span>n fa<br><br>ct_ Richard Feynmann who won the Nobel prize for his work on quantum electro__dynamics s<br>ct<span style="color:salmon;">,</span> Richard Feynmann who won the Nobel <span style="color:salmon;">P</span>ri<span style="color:salmon;">s</span>e for his work on quantum electro<span style="color:salmon;">n</span><span style="color:salmon;"> </span>dynamic<span style="color:salmon;">_</span> s<br><br>aid: “If you think you understand quantum physics, you don’t understand quantum physics”<br>aid<span style="color:salmon;">,</span> <span style="color:salmon;">“</span>If you think you understand quantum physics, you don<span style="color:salmon;">‘</span>t understand quantum physics<span style="color:salmon;">_</span><br><br>._ Which is kind of disheartening for us_ because if he didn’t understand it, what chanc<br>.<span style="color:salmon;">“</span> Which is kind of disheartening for us<span style="color:salmon;">,</span> because if he didn<span style="color:salmon;">‘</span>t understand it, what chanc<br><br>e do the_ res_t of us have? Fortunately_ this quote is a little <strong><em>_misleading. We do in<br>e <span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>th<span style="color:salmon;">a</span><span style="color:salmon;">t</span> res<span style="color:salmon;">e</span>t of us have? Fortunately<span style="color:salmon;">,</span> this quot<span style="color:salmon;">a</span> is a little <span style="color:salmon;">b</span><span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>misleading. We do <span style="color:salmon;">e</span><span style="color:salmon;">f</span><br><br> fact understand quantum physics really well, in fact it is arguably the most successful<br><span style="color:salmon;">_</span>f<span style="color:salmon;">e</span>ct understand <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">P</span>hysics really well<span style="color:salmon;">.</span> <span style="color:salmon;">I</span>n fact<span style="color:salmon;">,</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> is arguably the most successful<br><br> scientific theory out there, and <em>has let us invent technologies like computers, digita<br> scientific theory out there<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd <span style="color:salmon;">t</span>ha<span style="color:salmon;">t</span> let us invent technologies like computers, digita<br><br>l cameras, LED screens, lasers and nuclear power plants. And you know, you don’t really<br>l cameras, LED screens, lasers<span style="color:salmon;">,</span><span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> nuclear power plants. <span style="color:salmon;">Y</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>ou know<span style="color:salmon;">_</span> you don<span style="color:salmon;">‘</span>t really <br><br>want to build a nuclear power plant if you don’t really understand how it works. So_ qua<br>want to build a nuclear power plant if you don<span style="color:salmon;">‘</span>t really understand how it works. So<span style="color:salmon;">,</span> <span style="color:salmon;">Q</span>ua<br><br>ntum physics is _</strong>the part of physics that describes the__ smallest things in our Unive<br>ntum <span style="color:salmon;">P</span>hysics is <span style="color:salmon;">j</span><span style="color:salmon;">u</span><span style="color:salmon;">s</span>t<span style="color:salmon;"> </span><span style="color:salmon;">a</span> part of physics that describe<span style="color:salmon;">_</span> <span style="color:salmon;">v</span><span style="color:salmon;">_</span>e<span style="color:salmon;">r</span><span style="color:salmon;">y</span> small<span style="color:salmon;"> </span><span style="color:salmon;">o</span><span style="color:salmon;">f</span> things in our Unive<br><br>rse: molecules, atoms, subatomic particles thing_ like that. Th_____ings down there do_n<br>rse<span style="color:salmon;">,</span> molecules, atoms, subatomic particles thing<span style="color:salmon;">s</span> like that. Th<span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span><span style="color:salmon;">h</span>ing<span style="color:salmon;">_</span> do<span style="color:salmon;">_</span>n<span style="color:salmon;">‘</span>t<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> do<span style="color:salmon;">w</span>n<br><br>’t qui_te work the same way that we are used to up here. This is fascinating_ because yo<br><span style="color:salmon;">_</span><span style="color:salmon;">_</span> qui<span style="color:salmon;">e</span>t<span style="color:salmon;">_</span> work the same way that we <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>used to up here. This is fascinating<span style="color:salmon;">,</span> because yo<br><br>u and everything around you is_ made from quantum physics, and so_ this is really how_ t<br>u and everything around you <span style="color:salmon;">a</span><span style="color:salmon;">r</span><span style="color:salmon;">e</span> made from <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">P</span>hysics<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd so<span style="color:salmon;">,</span> this is really h<span style="color:salmon;">a</span><span style="color:salmon;">l</span><span style="color:salmon;">l</span> <span style="color:salmon;">o</span><br><br>he whole universe is actually working. I’ve draw_n_ these protons, neutrons_ and electro<br><span style="color:salmon;">f</span><span style="color:salmon;">_</span> whole universe is actually working. <span style="color:salmon;">A</span><span style="color:salmon;">s</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> draw<span style="color:salmon;">i</span>n<span style="color:salmon;">g</span> th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> protons, neutrons<span style="color:salmon;">,</span> and electro<br><br>ns as particles, but in quantum mechanics_ we really describe everything as waves. By th<br>ns as particles, but in <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">M</span>echanics<span style="color:salmon;">,</span> we really describe everything as waves. By th<br><br>e way_ I’<em>m using q____uantum physics and quantum mechanics inter_changeably, they are t<br>e way<span style="color:salmon;">,</span> I<span style="color:salmon;"> </span><span style="color:salmon;">a</span>m using <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span><span style="color:salmon;">Q</span>uantum <span style="color:salmon;">P</span>hysics and <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">M</span>echanics inter<span style="color:salmon;">-</span>change<span style="color:salmon;"> </span>b<span style="color:salmon;">e</span><span style="color:salmon;"></em></span><span style="color:salmon;">_</span> th<span style="color:salmon;">a</span><span style="color:salmon;">t</span> <span style="color:salmon;">i</span><span style="color:salmon;">s</span><span style="color:salmon;">_</span> t<br><br>he same thing. So_ instead of an electron looking like this________, it should look some<br>he same thing. So<span style="color:salmon;">,</span> instead <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>an electron looking like this<span style="color:salmon;"> </span><span style="color:salmon;">(</span><span style="color:salmon;">a</span><span style="color:salmon;"> </span><span style="color:salmon;">d</span><span style="color:salmon;">o</span><span style="color:salmon;">t</span><span style="color:salmon;">)</span>, it should look some<br><br>thing like this________. This is called a wave-function. But this wave-function isn’t a<br>thing like this<span style="color:salmon;">(</span><span style="color:salmon;">a</span><span style="color:salmon;"> </span><span style="color:salmon;">w</span><span style="color:salmon;">a</span><span style="color:salmon;">v</span><span style="color:salmon;">e</span><span style="color:salmon;">)</span>. This is called a <span style="color:salmon;">W</span>ave<span style="color:salmon;">_</span>function. But this wave<span style="color:salmon;">_</span>function isn<span style="color:salmon;">‘</span>t a <br><br>real physical wave like <strong>wave on water or a sounds wave. A</strong> quantum wave is an abstrac<br>real physical wave like <span style="color:salmon;">a</span><span style="color:salmon;"> </span>wave on water or <span style="color:salmon;">_</span><span style="color:salmon;">_</span>sound<span style="color:salmon;">-</span><span style="color:salmon;">_</span>wave. <span style="color:salmon;">T</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span> <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">W</span>ave is an abstrac<br><br>t mathematical description. To get the real world properties like position__ or_ momentu<br>t mathematical description. To get the real wor<span style="color:salmon;">_</span>d properties like position<span style="color:salmon;">a</span><span style="color:salmon;">l</span> <span style="color:salmon;">a</span><span style="color:salmon;">n</span><span style="color:salmon;">d</span> momentu<br><br>m_ of an electron_ we have to do mathematical operations on this wave-function, so_ for<br>m<span style="color:salmon;">s</span> of an electron<span style="color:salmon;">,</span> we have to do mathematical operations on this wave<span style="color:salmon;">_</span>function<span style="color:salmon;">.</span> <span style="color:salmon;">S</span>o<span style="color:salmon;">,</span> for <br><br>the position_ we take the amplitude and square it, which for this wave would look_ somet<br>the position<span style="color:salmon;">,</span> we take the amplitude and square it, which for this wave w<span style="color:salmon;">i</span><span style="color:salmon;">l</span>l<span style="color:salmon;">_</span> look<span style="color:salmon;">s</span> somet<br><br>hing like this. This gives us a thing_ called a probability distribution_ which tells us<br>hing like this. This gives us <span style="color:salmon;">_</span><span style="color:salmon;">_</span>thing<span style="color:salmon;">s</span> called <span style="color:salmon;">_</span><span style="color:salmon;">_</span>probability distribution<span style="color:salmon;">.</span> <span style="color:salmon;">W</span>hich tells us<br><br> that you_ are more likely to find the electron here than here, and when we actually mea<br> that you<span style="color:salmon;">r</span> are more like<span style="color:salmon;">_</span><span style="color:salmon;">_</span> to find <span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">_</span><span style="color:salmon;">_</span>lectron here than here<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd when we actually mea<br><br>sure where the electron is, an electron <strong>particle pops up somewhere within this area. S<br>sure where the electron is, an electron <span style="color:salmon;">P</span><span style="color:salmon;">o</span>p<span style="color:salmon;">s</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>icle pops up somewhere <span style="color:salmon;">_</span>i<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>n this area. S<br><br>o_ with quantum physics_ we don’t know anything with infinite detail_, we can</strong> only pre<br>o<span style="color:salmon;">,</span> <span style="color:salmon;">_</span>i<span style="color:salmon;">n</span><span style="color:salmon;">_</span> <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">P</span>hysics<span style="color:salmon;">,</span> we don<span style="color:salmon;">‘</span>t know anything with infinite detail<span style="color:salmon;">s</span>, <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>c<span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;">l</span><span style="color:salmon;">d</span> only pre<br><br>dict <strong>__probabilities _</strong>that things will happen, and it looks like this is a fundament<br>dict <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>probabilities <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;"> </span>that things <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>happen<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd it looks like th<span style="color:salmon;">e</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>fundament<br><br>al feature of the Universe_ which was quite a departu_re from the clock_work,<em>_ determin<br>al feature of the <span style="color:salmon;">u</span>niverse<span style="color:salmon;">,</span> which <span style="color:salmon;">i</span><span style="color:salmon;"></em></span>s qui<span style="color:salmon;">_</span>e<span style="color:salmon;">t</span><span style="color:salmon;">_</span> depar<span style="color:salmon;">c</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span>r<span style="color:salmon;">_</span> from the clock<span style="color:salmon;"> </span>work<span style="color:salmon;"> </span><span style="color:salmon;">t</span><span style="color:salmon;">o</span> determin<br><br>istic universe__ in classical physics, the kind of thing Newton derived. This wave-funct<br><span style="color:salmon;">e</span>s<span style="color:salmon;"> </span><span style="color:salmon;">o</span><span style="color:salmon;">f</span> univers<span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;">y</span> in classical physics, the kind of thing Newton derived. This wa<span style="color:salmon;">y</span><span style="color:salmon;"> </span><span style="color:salmon;">_</span>funct<br><br>ion model predicts what subatomic particles will do i___ncredibly well, but weirdly_ we’<br>ion model predicts what subatomic particles will do i<span style="color:salmon;">s</span><span style="color:salmon;"> </span><span style="color:salmon;">i</span>ncredibly well<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut w<span style="color:salmon;">_</span>ir<span style="color:salmon;">e</span>ly<span style="color:salmon;">,</span> we<span style="color:salmon;"> </span><br><br><strong>ve got no idea if this wave-function is literal_ly real or not. No one has ever seen a<br><span style="color:salmon;">h</span><span style="color:salmon;">a</span>ve got no idea <span style="color:salmon;">o</span>f this wave<span style="color:salmon;">_</span>function is litera<span style="color:salmon;">t</span><span style="color:salmon;">e</span>ly real or not. No one<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>s ever seen a<br><br> quantum wave_ because whenever we measure an electron_ all we e_ver see_ is a point lik<br> quantum wave<span style="color:salmon;">s</span> because whenever we measure an electron<span style="color:salmon;">,</span> all we <span style="color:salmon;">h</span><span style="color:salmon;">a</span>ve<span style="color:salmon;">_</span> see<span style="color:salmon;">n</span> is a point lik<br><br>e electron particle. So_ there is like th__</strong>is <strong>hidden quantum realm where the wave</strong>s<br>e electron particle. So<span style="color:salmon;">,</span> there<span style="color:salmon;">‘</span><span style="color:salmon;">_</span>s like th<span style="color:salmon;">e</span><span style="color:salmon;">r</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>is <span style="color:salmon;">a</span><span style="color:salmon;"> </span>hid<span style="color:salmon;">_</span>e<span style="color:salmon;">_</span> quantum realm where the wave<span style="color:salmon;"> </span><span style="color:salmon;">i</span>s<br><br> exist, and then_ the world we can see, which is where all the waves have turned into pa<br> exist, and then<span style="color:salmon;">,</span> the wor<span style="color:salmon;">_</span>d we can se<span style="color:salmon;">m</span>, which is <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>all the waves <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>turned into pa<br><br>rticles. And the barrier between these is a measurement. We say <strong>a_ __</strong>measurement ‘co<br>rticles. And <span style="color:salmon;">a</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> barrier between th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> is <span style="color:salmon;">_</span><span style="color:salmon;">_</span>measurement. We say <span style="color:salmon;">t</span><span style="color:salmon;">h</span>a<span style="color:salmon;">t</span> <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>measurement <span style="color:salmon;">_</span>co<br><br>llapses’ <em>the wave function, but we don’t actually have any physics to describe how the<br>llapse<span style="color:salmon;"></em></span><span style="color:salmon;">_</span> <span style="color:salmon;">i</span>t<span style="color:salmon;">‘</span><span style="color:salmon;">s</span> wave<span style="color:salmon;">_</span>function<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut we don<span style="color:salmon;">‘</span>t actually have any physics to describe how the <br><br>wave collapses. This is a gap in our knowledge that we have d_ubbed the measurement prob<br>wave collapses. This is a gap <span style="color:salmon;">o</span>n <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>knowledge that we<span style="color:salmon;">‘</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>ve d<span style="color:salmon;">o</span>ub<span style="color:salmon;">t</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> the measurement prob<br><br>lem_, and this is one of the things that Feynmann was referring to with <em>his quote. Anot<br>lem<span style="color:salmon;">s</span>, and this is one of the things that Feynmann was referring to with <span style="color:salmon;">t</span>his quote. Anot<br><br>her confusing thing</em> is how exactly to picture an electron. It seems to be a wave until<br>her confusing thing<span style="color:salmon;">s</span> is how exactly <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>picture an electron. It seems to be a wave until <br><br>you measure it, and then_ it is a particle, so_ what actually is it? This is known as pa<br>you measure it, and then<span style="color:salmon;">,</span> it is a particle<span style="color:salmon;">.</span> <span style="color:salmon;">S</span>o<span style="color:salmon;">,</span> what actually is it? <span style="color:salmon;">I</span><span style="color:salmon;">t</span><span style="color:salmon;">‘</span>s <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>know<span style="color:salmon;">_</span> as pa<br><br>rticle-wave duality, and here is an example of it in action:<strong>_ the______</strong> famous doubl<br>rticle-wave duality<span style="color:salmon;">_</span> and here is an example <span style="color:salmon;">_</span>f<span style="color:salmon;">o</span><span style="color:salmon;">r</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>action<span style="color:salmon;"> </span><span style="color:salmon;">f</span><span style="color:salmon;">o</span><span style="color:salmon;">r</span> <span style="color:salmon;">F</span><span style="color:salmon;">_</span>e<span style="color:salmon;">y</span><span style="color:salmon;">n</span><span style="color:salmon;">m</span><span style="color:salmon;">a</span><span style="color:salmon;">n</span><span style="color:salmon;">n</span><span style="color:salmon;">‘</span><span style="color:salmon;">s</span> famous doubl<br><br>e slit experiment. Imagine spraying a paintball gun_ a_t_ a wall with two openings in it<br>e slit experiment. Imagin<span style="color:salmon;">g</span> spr<span style="color:salmon;">_</span><span style="color:salmon;">_</span>ing a pa<span style="color:salmon;">p</span><span style="color:salmon;">e</span><span style="color:salmon;">r</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> gun<span style="color:salmon;">,</span> <span style="color:salmon;">i</span><span style="color:salmon;">n</span>t<span style="color:salmon;">o</span> a wall with two opening<span style="color:salmon;">_</span> in it<br><br>, you’d ex_pect to see two columns of paint go through and hit the wall behind. But if y<br><span style="color:salmon;">.</span> <span style="color:salmon;">I</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">i</span><span style="color:salmon;">s</span> <span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">s</span>pect to see two columns of p<span style="color:salmon;">_</span>int go through and hit the wall behind. But if y<br><br>ou shrink this all down to the size of electrons_ you see_ something quite different. Yo<br>ou shrink this all do<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t<span style="color:salmon;">s</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>i<span style="color:salmon;">n</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span>o<span style="color:salmon;">_</span> electrons<span style="color:salmon;">,</span> you see<span style="color:salmon;">n</span> something quite different. Yo<br><br>u can fire one electron_ at a time a_t the slits_ and they appear on the back wall, but<br>u can fire one electron<span style="color:salmon;">s</span> at a time <span style="color:salmon;">o</span><span style="color:salmon;">u</span>t the slits<span style="color:salmon;">,</span> and they appear on the back wall<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut <br><br>as they build up over time_ you get a whole pattern of stripes, instead of just two band<br>as they build up over time<span style="color:salmon;">,</span> you get a whole pattern of stripes<span style="color:salmon;">_</span> instead of just two band<br><br>s, this pattern of stripes i_s called an interference pattern, some_thing you only see_<br>s<span style="color:salmon;">.</span> <span style="color:salmon;">T</span>his pattern of stripes <span style="color:salmon;">w</span><span style="color:salmon;">a</span>s called <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>interference pattern<span style="color:salmon;">.</span> <span style="color:salmon;">S</span>ome<span style="color:salmon;"> </span>thing you only see<span style="color:salmon;">m</span> <br><br>with waves. The idea is that it is the electron-wave that goes through both slits at the<br>with waves. The idea is that it<span style="color:salmon;">‘</span><span style="color:salmon;">_</span>s <span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">_</span><span style="color:salmon;">_</span>lectron<span style="color:salmon;"> </span>wave that goes through both slits at the<br><br> same time, and then the waves from each slit overlap with each other, and where the wav<br> same time, and then the waves from each slit overlap with each other<span style="color:salmon;">.</span> <span style="color:salmon;">I</span>n<span style="color:salmon;">_</span> where the wav<br><br>es add together_ you have a high probability of the electron popping up at the wall, but<br>es <span style="color:salmon;">g</span><span style="color:salmon;">e</span><span style="color:salmon;">t</span> together<span style="color:salmon;">,</span> you <span style="color:salmon;">g</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">t</span><span style="color:salmon;">_</span> high probability of <span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">_</span><span style="color:salmon;">_</span>lectron popping up <span style="color:salmon;">i</span><span style="color:salmon;">n</span> the wall<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut<br><br> where the waves cancel out_ the probability i_s <strong><em>_very low. So</em> actually on the back<br> where the waves c<span style="color:salmon;">o</span><span style="color:salmon;">m</span><span style="color:salmon;">_</span>e<span style="color:salmon;">s</span> <span style="color:salmon;">r</span><span style="color:salmon;">a</span><span style="color:salmon;">r</span><span style="color:salmon;">e</span> the probabilit<span style="color:salmon;">_</span><span style="color:salmon;">_</span>i<span style="color:salmon;">e</span>s <span style="color:salmon;">a</span><span style="color:salmon;">r</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>very low. So<span style="color:salmon;">,</span> actually on the back <br><br>wall_ the highest probability of __</strong>finding the electron is in the middle of the slits,<br>wall<span style="color:salmon;">,</span> the highest probability of <span style="color:salmon;">y</span><span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;"> </span>find<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> the electron is in the middle of the slits<span style="color:salmon;">.</span><br><br> and then it goes down_ and up again, and <strong><em>down and up again and this is the interfere<br> <span style="color:salmon;">A</span>nd then it goes down<span style="color:salmon;">,</span> and up a<span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>n<span style="color:salmon;">d</span> and <span style="color:salmon;">u</span><span style="color:salmon;">p</span><span style="color:salmon;">-</span>down a<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>gain<span style="color:salmon;">.</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">T</span>his is the interfere<br><br>nce pattern. So_ when you fire one electron after another_ they follow this probability_<br>nce pattern. So<span style="color:salmon;">,</span> <span style="color:salmon;">i</span><span style="color:salmon;">f</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> you fire one electron after another<span style="color:salmon;">,</span> they follow this probabilit<span style="color:salmon;">i</span><span style="color:salmon;">e</span><br><br>_ distribution_ and this interference pattern starts building up, and that’s exactly wha<br><span style="color:salmon;">s</span> distribution<span style="color:salmon;">,</span> and this interference pattern start<span style="color:salmon;">_</span> building up<span style="color:salmon;">_</span> and that<span style="color:salmon;">_</span>s exactly wha<br><br>t we see in __e</strong>xperiments. So_ this shows that electrons behave like waves in this exp<br>t we see in <span style="color:salmon;">t</span><span style="color:salmon;">h</span>e<span style="color:salmon;"> </span><span style="color:salmon;">e</span>xperiment<span style="color:salmon;">_</span>. So<span style="color:salmon;">,</span> this shows that electrons behave like waves in this exp<br><br>eriment. A__ question is what actually happens to this spread-out electron-wave when you<br>eriment. <span style="color:salmon;">T</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span> question is what actually happens to this spread<span style="color:salmon;"> </span>out electron<span style="color:salmon;"> </span>wave when you<br><br> do a measurement? It seems like it_ goes f_rom__ this spread out wave to this loca_lise<br> do <span style="color:salmon;">_</span><span style="color:salmon;">_</span>measurement<span style="color:salmon;">.</span> <span style="color:salmon;">S</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>eems like <span style="color:salmon;">y</span><span style="color:salmon;">o</span><span style="color:salmon;">u</span> go<span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">t</span><span style="color:salmon;">h</span>ro<span style="color:salmon;">u</span><span style="color:salmon;">g</span><span style="color:salmon;">h</span> this spread out wave to this lo<span style="color:salmon;">o</span><span style="color:salmon;">k</span><span style="color:salmon;"> </span>li<span style="color:salmon;">k</span>e<br><br>d particle, but like I said, there’s nothing in quantum mechanics that tells us how the<br><span style="color:salmon;">_</span> particle<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut like I said, th<span style="color:salmon;">i</span><span style="color:salmon;">s</span><span style="color:salmon;"> </span><span style="color:salmon;">i</span>s nothing in <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">M</span>echanics that tell<span style="color:salmon;">_</span> us how the <br><br>wave-function collapses. And this is not <strong><strong>only true for electrons, bu_t for everythin<br>wave<span style="color:salmon;">_</span>function collapses. And this is not <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>only true for electrons<span style="color:salmon;">.</span> <span style="color:salmon;">T</span><span style="color:salmon;">h</span><span style="color:salmon;">a</span>t <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>everythin<br><br>g in the Universe, so_ this double slit_ experiment_ has huge consequences for our model<br>g in the <span style="color:salmon;">u</span>niverse<span style="color:salmon;">.</span> <span style="color:salmon;">S</span>o<span style="color:salmon;">,</span> this double slit<span style="color:salmon;">s</span> experiment<span style="color:salmon;">s</span> has huge consequence<span style="color:salmon;">_</span> f<span style="color:salmon;">_</span>r<span style="color:salmon;">_</span>o<span style="color:salmon;">m</span><span style="color:salmon;">_</span> model<br><br> of the Universe, and it was very surprising the first time _</strong></strong>it was do_ne. Physicist<br><span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> <span style="color:salmon;">u</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>niverse<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd it<span style="color:salmon;">‘</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>s very surprising the first time <span style="color:salmon;">w</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;">n</span><span style="color:salmon;"> </span>it was do<span style="color:salmon;">w</span>n<span style="color:salmon;">_</span>. Physicist<br><br>s are still grappling with this question today and have come up with many interpretation<br>s are still grap<span style="color:salmon;">_</span>ling with this question today and <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>come up with many interpretation<br><br>s of quantum mechanics to_ try___ an explain these results, and explain____ how reality<br>s of quantum mechanics <span style="color:salmon;">a</span><span style="color:salmon;">n</span><span style="color:salmon;">d</span> try<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> <span style="color:salmon;">t</span><span style="color:salmon;">o</span> explain th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> results, and explain<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span><span style="color:salmon;">,</span> how reality <br><br>actually works. Okay let_s go back to the wave-function. Now we can <strong><em>_use this picture<br>actually works. Ok<span style="color:salmon;">,</span><span style="color:salmon;"></em></span> let<span style="color:salmon;">‘</span>s go back to the wave<span style="color:salmon;">_</span>function<span style="color:salmon;">,</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span>w<span style="color:salmon;">_</span><span style="color:salmon;">_</span>e can <span style="color:salmon;">n</span><span style="color:salmon;">o</span><span style="color:salmon;">w</span><span style="color:salmon;"> </span>use this picture<br><br> to explain other features of quantum physics that you may have heard about. So_ this is<br> to explain other feature<span style="color:salmon;">_</span> of <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">P</span>hysics that you may have heard about. So<span style="color:salmon;">,</span> this is<br><br> just one possible wave-function for an electron, but there <em>are many others. Like this<br> just one possible wave<span style="color:salmon;"> </span>function for <span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>electron<span style="color:salmon;">.</span> <span style="color:salmon;">B</span>ut there <span style="color:salmon;">h</span>a<span style="color:salmon;">v</span>e many others. Like this <br><br>one for instance. This says _that the electron has a probability</strong> of__ being over here,<br>one for instance. This says <span style="color:salmon;">i</span>t<span style="color:salmon;"> </span>a<span style="color:salmon;">s</span> <span style="color:salmon;">a</span><span style="color:salmon;">n</span><span style="color:salmon;">_</span> electron has <span style="color:salmon;">_</span><span style="color:salmon;">_</span>probabilit<span style="color:salmon;">i</span><span style="color:salmon;">e</span><span style="color:salmon;">s</span> <span style="color:salmon;">h</span><span style="color:salmon;">a</span><span style="color:salmon;">v</span><span style="color:salmon;">e</span> be<span style="color:salmon;">e</span>n<span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>here<span style="color:salmon;">_</span><br><br> and a probability__ of__ being over here, and very little probability of__ being in the<br> and <span style="color:salmon;">_</span><span style="color:salmon;">_</span>probabilit<span style="color:salmon;">i</span><span style="color:salmon;">e</span><span style="color:salmon;">s</span> o<span style="color:salmon;">v</span><span style="color:salmon;">e</span><span style="color:salmon;">r</span> be<span style="color:salmon;">e</span>n<span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>here<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd very little probability <span style="color:salmon;">h</span><span style="color:salmon;">a</span><span style="color:salmon;">v</span><span style="color:salmon;">e</span> be<span style="color:salmon;">e</span>n<span style="color:salmon;">_</span> in the<br><br> middle. This is perfectly allowable_ in quantum physics_ and this <em>is where the phra_se<br> middle. This is perfectly allow<span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">d</span> in <span style="color:salmon;">Q</span>uantum <span style="color:salmon;">P</span>hysics<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd this <span style="color:salmon;">w</span>i<span style="color:salmon;">t</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>her<span style="color:salmon;">_</span> <span style="color:salmon;">F</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>ra<span style="color:salmon;">m</span>s<span style="color:salmon;">_</span><br><br> ‘things can be in two places at once’ comes from. This is known as superposition, which<br> <span style="color:salmon;">_</span>thin<span style="color:salmon;">k</span>s can be <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>two place<span style="color:salmon;">_</span> <span style="color:salmon;">i</span><span style="color:salmon;">n</span> once<span style="color:salmon;">_</span> comes from. This is know<span style="color:salmon;">_</span> as superposition, which<br><br> comes from the fact that this wave can be made by adding, or super_imposing these two w<br> comes from the fact that this wave <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>made by adding<span style="color:salmon;">_</span> or super<span style="color:salmon;">-</span>imposing th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> two w<br><br>aves. The word superposition just means the adding together of <strong><em>_waves and we already<br>aves. The word superposition just means the adding together of <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>waves<span style="color:salmon;">.</span><span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">W</span>e already <br><br>saw this in the double slit experiment, and i</strong>s not really a very special phenomenon. Y<br>saw this in <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>double slit experiment<span style="color:salmon;">.</span> <span style="color:salmon;">A</span>nd <span style="color:salmon;">I</span><span style="color:salmon;">t</span><span style="color:salmon;">‘</span>s not really a very special phenomenon. Y<br><br>ou can even see_ superposition by dropping two pebbles into a pond wh__ere the ripples o<br>ou can even see<span style="color:salmon;">n</span> superposition by dr<span style="color:salmon;">a</span>p<span style="color:salmon;">_</span>ing two p<span style="color:salmon;">a</span><span style="color:salmon;">d</span><span style="color:salmon;">d</span>les into a pond <span style="color:salmon;">t</span><span style="color:salmon;">o</span><span style="color:salmon;"> </span><span style="color:salmon;">s</span>e<span style="color:salmon;">_</span>e the r<span style="color:salmon;">e</span>p<span style="color:salmon;">e</span>l<span style="color:salmon;">_</span>s o<br></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>糖尿病</title>
      <link href="/LearnNotes/diabetes.html"/>
      <url>/LearnNotes/diabetes.html</url>
      
        <content type="html"><![CDATA[<h1 id="糖尿病"><a href="#糖尿病" class="headerlink" title="糖尿病"></a>糖尿病</h1><p>来源: <a href="https://www.baikemy.com/disease/detail/924" target="_blank" rel="noopener">百科名醫</a></p><p>簡介: 糖尿病是一组以高血糖为特征的代谢性疾病。高血糖则是由于胰岛素分泌缺陷或其生物作用受损，或两者兼有引起。糖尿病时长期存在的高血糖，导致各种组织，特别是眼、肾、心脏、血管、神经的慢性损害、功能障碍。</p><h1 id="临床表现"><a href="#临床表现" class="headerlink" title="临床表现"></a>临床表现</h1><ol><li>类型一: <strong>多饮、多尿、多食和消瘦</strong><br>严重高血糖时出现典型的“三多一少”症状，多见于1型糖尿病。发生酮症或酮症酸中毒时“三多一少”症状更为明显。</li><li>类型二: <strong>疲乏无力，肥胖</strong><br>多见于2型糖尿病。2型糖尿病发病前常有肥胖，若得不到及时诊断，体重会逐渐下降。</li></ol><p>目前国际上通用WHO糖尿病分型方法将糖尿病分为<strong>1型糖尿病</strong>（T1DM）、<strong>2型糖尿病</strong>（T2DM）、<strong>其他特殊类型</strong>糖尿病和<strong>妊娠糖尿病</strong>（GDM）四类。–<a href="https://www.baike.com/wiki/%E7%B3%96%E5%B0%BF%E7%97%85?view_id=3levdc0nxpy000" target="_blank" rel="noopener">头条百科</a></p><h1 id="病因"><a href="#病因" class="headerlink" title="病因"></a>病因</h1><ol><li><strong>遗传因素</strong><br>1型或2型糖尿病均存在明显的遗传异质性。糖尿病存在家族发病倾向，1/4～1/2患者有糖尿病家族史。临床上至少有60种以上的遗传综合征可伴有糖尿病。1型糖尿病有多个<strong>DNA位点</strong>参与发病，其中以<strong>HLA抗原</strong>基因中<strong>DQ位点多态性关</strong>系最为密切。在2型糖尿病已发现多种明确的<strong>基因突变</strong>，如胰岛素基因、胰岛素受体基因、葡萄糖激酶基因、线粒体基因等。</li><li><strong>环境因素</strong><br>进食过多，体力活动减少导致的肥胖是2型糖尿病最主要的环境因素，使具有2型糖尿病<strong>遗传易感性的个体</strong>容易发病。1型糖尿病患者存在<strong>免疫系统异常</strong>，在某些<strong>病毒</strong>如柯萨奇病毒，风疹病毒，腮腺病毒等感染后导致自身免疫反应，破坏胰岛素β细胞。</li></ol><h2 id="1型糖尿病"><a href="#1型糖尿病" class="headerlink" title="1型糖尿病"></a><a href="https://baike.baidu.com/item/1%E5%9E%8B%E7%B3%96%E5%B0%BF%E7%97%85?fromtitle=%E4%B8%80%E5%9E%8B%E7%B3%96%E5%B0%BF%E7%97%85&fromid=5372737" target="_blank" rel="noopener">1型糖尿病</a></h2><ol><li><p><strong>自身免疫系统缺陷</strong><br>血液中可查出多种<strong>自身免疫抗体</strong>，如谷氨酸脱羧酶抗体(GAD抗体)、胰岛细胞抗体（ICA抗体）等,可以<strong>损伤</strong>人体胰岛分泌胰岛素的B细胞。</p></li><li><p><strong>遗传因素</strong><br>第6对染色体的HLA抗原异常上。</p></li><li><p><strong>病毒诱因</strong><br>1型糖尿病的发生，往往出现在病毒感染流行之后。如引起流行性腮腺炎和风疹及能引起脊髓灰质炎病毒，都可以在1型糖尿病中起作用。</p></li><li><p><strong>其他</strong><br>如牛奶、氧自由基、一些灭鼠药等，这些因素是否可以引起糖尿病，科学家正在研究之中。</p><h1 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h1></li><li><p><strong>血糖</strong><br>是诊断糖尿病的惟一标准。有明显“三多一少”症状者，只要一次异常血糖值即可诊断。无症状者诊断糖尿病需要两次异常血糖值。可疑者需做75g葡萄糖耐量试验。</p></li><li><p><strong>尿糖</strong><br>常为阳性。血糖浓度超过肾糖阈（160～180毫克/分升）时尿糖阳性。肾糖阈增高时即使血糖达到糖尿病诊断可呈阴性。因此，尿糖测定不作为诊断标准。</p></li><li><p><strong>尿酮体</strong><br>酮症或酮症酸中毒时尿酮体阳性。</p></li><li><p><strong>糖基化血红蛋白（HbA1c）</strong><br>是葡萄糖与血红蛋白非酶促反应结合的产物，反应不可逆，HbA1c水平稳定，可反映取血前2个月的平均血糖水平。是判断血糖控制状态最有价值的指标。</p></li><li><p><strong>糖化血清蛋白</strong><br>是血糖与血清白蛋白非酶促反应结合的产物，反映取血前1～3周的平均血糖水平。</p></li><li><p><strong>血清胰岛素和C肽水平</strong><br>反映胰岛β细胞的储备功能。2型糖尿病早期或肥胖型血清胰岛素正常或增高，随着病情的发展，胰岛功能逐渐减退，胰岛素分泌能力下降。</p></li><li><p><strong>血脂</strong><br>糖尿病患者常见血脂异常，在血糖控制不良时尤为明显。表现为甘油三酯、总胆固醇、低密度脂蛋白胆固醇水平升高。高密度脂蛋白胆固醇水平降低。</p></li><li><p><strong>免疫指标</strong><br>胰岛细胞抗体（ICA），胰岛素自身抗体（IAA）和谷氨酸脱羧酶（GAD）抗体是1型糖尿病体液免疫异常的三项重要指标，其中以GAD抗体阳性率高，持续时间长，对1型糖尿病的诊断价值大。在1型糖尿病的一级亲属中也有一定的阳性率，有预测1型糖尿病的意义。</p></li><li><p><strong>尿白蛋白排泄量，放免或酶联方法</strong><br>可灵敏地检出尿白蛋白排出量，早期糖尿病肾病尿白蛋白轻度升高。</p></li></ol><h1 id="治疗"><a href="#治疗" class="headerlink" title="治疗"></a>治疗</h1><h2 id="自我监测"><a href="#自我监测" class="headerlink" title="自我监测"></a>自我监测</h2><p>随着小型快捷血糖测定仪的逐步普及，病人可以根据血糖水平随时调整降血糖药物的剂量。1型糖尿病进行强化治疗时每天至少监测4次血糖（餐前），血糖不稳定时要监测8次（三餐前、后、晚睡前和凌晨3：00）。强化治疗时空腹血糖应控制在7.2毫摩尔/升以下，餐后两小时血糖小于10mmol/L，HbA1c小于7%。2型糖尿病患者自我监测血糖的频度可适当减少。</p><h2 id="口服药物治疗"><a href="#口服药物治疗" class="headerlink" title="口服药物治疗"></a>口服药物治疗</h2><ul><li>（1）<strong>磺脲类药物</strong> 2型DM患者经饮食控制，运动，降低体重等治疗后，疗效尚不满意者均可用磺脲类药物。因降糖机制主要是<strong>刺激胰岛素分泌</strong>，所以对有一定胰岛功能者疗效较好。对一些发病<strong>年龄较轻，体形不胖</strong>的糖尿病患者在早期也有一定疗效。但对<u>肥胖者使用磺脲类药物时，要特别注意饮食控制，使体重逐渐下降，与<strong>双胍类或α-葡萄糖苷酶抑制剂降糖药</strong>联用较好</u>。下列情况属<span style="Background:salmon">禁忌证</span>：<ul><li>一是严重<strong>肝、肾功能不全</strong>；</li><li>二是合并<strong>严重感染，创伤及大手术期间</strong>，临时改用胰岛素治疗；</li><li>三是<strong>糖尿病酮症、酮症酸中毒期间</strong>，临时改用胰岛素治疗；</li><li>四是<strong>糖尿病孕妇</strong>，妊娠高血糖对胎儿有致畸形作用，早产、死产发生率高，故应严格控制血糖，应把空腹血糖控制在105毫克/分升（5.8毫摩尔/升）以下，餐后2小时血糖控制在120毫克/分升（6.7毫摩尔/升）以下，但控制血糖不宜用口服降糖药；</li><li>五是对磺脲类药物<strong>过敏</strong>或出现明显不良反应。</li></ul></li><li>（2）<strong>双胍类降糖药</strong> 降血糖的主要机制是<u>增加外周组织对葡萄糖的利用，增加葡萄糖的无氧酵解，减少胃肠道对葡萄糖的吸收，降低体重。</u><ul><li>①适应证<strong>肥胖型2型糖尿病</strong>，单用饮食治疗效果不满意者；2型糖尿病单用磺脲类药物效果不好，可加双胍类药物；1型糖尿病用胰岛素治疗病情不稳定，用双胍类药物可减少胰岛素剂量；2型糖尿病继发性失效改用胰岛素治疗时，可加用双胍类药物，能减少胰岛素用量。</li><li>②禁忌证<strong>严重肝、肾、心、肺疾病，消耗性疾病，营养不良，缺氧性疾病；糖尿病酮症，酮症酸中毒；伴有严重感染、手术、创伤等应激状况</strong>时暂停双胍类药物，改用胰岛素治疗；妊娠期。</li><li>③<span style="Background:salmon">不良反应</span><ul><li>一: 胃肠道反应。最常见、表现为恶心、呕吐、食欲下降、腹痛、腹泻，发生率可达20%。为避免这些不良反应，应在餐中、或餐后服药。</li><li>二: 是头痛、头晕、金属味。</li><li>三: 是乳酸酸中毒，多见于长期、大量应用降糖灵，伴有肝、肾功能减退，缺氧性疾病，急性感染、胃肠道疾病时，降糖片引起酸中毒的机会较少。</li></ul></li></ul></li><li>（3）<strong>α葡萄糖苷酶抑制剂</strong> 1型和2型糖尿病均可使用，可以与磺脲类，双胍类或胰岛素联用。<ul><li>①伏格列波糖餐前即刻口服。</li><li>②阿卡波糖餐前即刻口服。</li><li><span style="Background:salmon">主要不良反应有</span>: 腹痛、肠胀气、腹泻、肛门排气增多。</li></ul></li><li>（4）<strong>胰岛素增敏剂</strong> 有增强胰岛素作用，改善糖代谢。可以单用，也可用磺脲类，双胍类或胰岛素联用。有肝脏病或心功能不全者者不宜应用。</li><li>（5）<strong>格列奈类胰岛素促分泌剂</strong><br>① 瑞格列奈为快速促胰岛素分泌剂，餐前即刻口服，每次主餐时服，不进餐不服。<br>② 那格列奈作用类似于瑞格列奈。</li></ul><ol start="2"><li><strong>胰岛素治疗</strong><br>胰岛素制剂有动物胰岛素、人胰岛素和胰岛素类似物。根据作用时间分为短效、中效和长效胰岛素，并已制成混合制剂，如诺和灵30R，优泌林70/30。</li></ol><ul><li>（1）1型糖尿病 需要用胰岛素治疗。非强化治疗者每天注射2～3次，强化治疗者每日注射3～4次，或用胰岛素泵治疗。需经常调整剂量。</li><li>（2）2型糖尿病 口服降糖药失效者先采用联合治疗方式，方法为原用口服降糖药剂量不变，睡前晚10∶00注射中效胰岛素或长效胰岛素类似物，一般每隔3天调整1次，目的为空腹血糖降到4.9～8.0毫摩尔/升，无效者停用口服降糖药，改为每天注射2次胰岛素。</li></ul><p><strong>胰岛素治疗的最大不良反应为低血糖。</strong></p><h2 id="运动治疗"><a href="#运动治疗" class="headerlink" title="运动治疗"></a>运动治疗</h2><p>增加体力活动可改善机体对胰岛素的敏感性，降低体重，减少身体脂肪量，增强体力，提高工作能力和生活质量。运动的强度和时间长短应根据病人的总体健康状况来定，找到适合病人的运动量和病人感兴趣的项目。运动形式可多样，如散步，快步走、健美操、跳舞、打太极拳、跑步、游泳等。</p><h2 id="饮食治疗"><a href="#饮食治疗" class="headerlink" title="饮食治疗"></a>饮食治疗</h2><p>饮食治疗是各种类型糖尿病治疗的基础，一部分轻型糖尿病患者单用饮食治疗就可控制病情。</p><ol><li>总热量　<br>总热量的需要量要根据患者的年龄、性别、身高、体重、体力活动量、病情等综合因素来确定。首先要算出每个人的标准体重，可参照下述公式：标准体重（kg）=身高（cm）-105或标准体重（kg）=[身高（cm）-100]×0.9；女性的标准体重应再减去2kg。也可根据年龄、性别、身高查表获得。算出标准体重后再依据每个人日常体力活动情况来估算出每千克标准体重热量需要量。<br>根据标准体重计算出每日所需要热卡量后，还要根据病人的其他情况作相应调整。儿童、青春期、哺乳期、营养不良、消瘦以及有慢性消耗性疾病应酌情增加总热量。肥胖者要严格限制总热量和脂肪含量，给予低热量饮食，每天总热量不超过1500千卡，一般以每月降低0.5～1.0kg为宜，待接近标准体重时，再按前述方法计算每天总热量。另外，年龄大者较年龄小者需要热量少，成年女子比男子所需热量要少一些。</li><li>碳水化合物　<br>碳水化合物每克产热4千卡，是热量的主要来源，现认为碳水化合物应占饮食总热量的55%～65%，可用下面公式计算：<br>根据我国人民生活习惯，可进主食（米或面）250～400g，可作如下初步估计，休息者每天主食200～250g，轻度体力劳动者250～300g，中度体力劳动者300～400g，重体力劳动者400g以上。</li><li>蛋白质<br>蛋白质每克产热量4千卡。占总热量的12%～15%。蛋白质的需要量在成人每千克体重约1g。在儿童，孕妇，哺乳期妇女，营养不良，消瘦，有消耗性疾病者宜增加至每千克体重1.5～2.0g。糖尿病肾病者应减少蛋白质摄入量，每千克体重0.8g，若已有肾功能不全，应摄入高质量蛋白质，摄入量应进一步减至每千克体重0.6g。</li><li>脂肪　<br>脂肪的能量较高，每克产热量9千卡。约占总热量25%，一般不超过30%，每日每千克体重0.8～1g。动物脂肪主要含饱和脂肪酸，植物油中含不饱和脂肪酸多。糖尿病患者易患动脉粥样硬化，应以植物油为主，更有利于控制血总胆固醇及低密度脂蛋白胆固醇水平。</li></ol><h1 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h1><p><a href="https://www.baike.com/wiki/%E7%B3%96%E5%B0%BF%E7%97%85?view_id=3levdc0nxpy000" target="_blank" rel="noopener">头条百科</a></p><ul><li><strong>急性严重代谢紊乱</strong>：指糖尿病酮症酸中毒和高渗性非酮症糖尿病昏迷。</li><li><strong>感染性疾病</strong>：糖尿病容易并发各种感染，血糖控制差者更易发生也更严重。</li><li><strong>慢性并发症</strong> 可累及全身各重要器官，可单独出现或以不同组合同时或先后出现。<ul><li><strong>微血管病变</strong>：糖尿病肾病、糖尿病视网膜病变、心脏微血管病变等。</li><li><strong>糖尿病心肌病</strong>：心脏微血管病变和心肌代谢紊乱可引起心肌广泛灶性坏死，可诱发心力衰竭、心律失常、心源性休克和猝死。</li><li><strong>糖尿病大血管病变</strong>：主要是糖尿病心脑血管疾病，如动脉粥样硬化性心血管疾病、脑梗死等。</li><li><strong>神经系统并发症</strong>：可累及周围神经病变和植物神经病变。表现为四肢末梢麻木、刺痛；体位性低血压、尿潴留等。</li><li><strong>糖尿病足</strong>：指与下肢远端神经异常和不同程度周围血管病变相关的足部溃疡、感染和（或）深层组织破坏，是糖尿病最严重和治疗费用最多的慢性并发症之一，是非外伤性截肢的最主要原因。</li><li>其他：糖尿病还可引起<strong>眼部、口腔、皮肤等疾病</strong>。</li></ul></li></ul><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="中国2型糖尿病防治指南-2017年版"><a href="#中国2型糖尿病防治指南-2017年版" class="headerlink" title="中国2型糖尿病防治指南(2017年版)"></a><p align='center'>中国2型糖尿病防治指南(2017年版)</p></h2><p align='center'>中华医学会糖尿病学分会</p>- 1980 年的 0.67% 飙升至 2013 年的 10.4%- 肥胖人群糖尿病患病率升高了 2 倍- 满族15.0%、汉族14.7%、维吾尔族12.2%、壮族12.0%、回族10.6%、藏族4.3%。<p><strong><p align='center'>糖代谢状态分类 (WHO 1999)<p></strong></p><table><thead><tr><th>糖代谢分类</th><th>空腹血糖</th><th>糖负荷后2h血糖</th></tr></thead><tbody><tr><td>正常血糖</td><td>&lt;6.1</td><td>&lt;7.8</td></tr><tr><td>空腹血糖受损(IFG)</td><td>≥6.1，&lt;7.0</td><td>&lt;7.8</td></tr><tr><td>糖耐量异常(IGT)</td><td>&lt;7.0</td><td>≥7.8，&lt;11.1</td></tr><tr><td>糖尿病</td><td>≥7.0</td><td>≥11.1</td></tr></tbody></table><p><strong><p align='center'>糖尿病的诊断标准<p></strong></p><table><thead><tr><th>诊断标准</th><th>静脉血浆葡萄糖(mmol/L)</th></tr></thead><tbody><tr><td>(1)典型糖尿病症状(烦渴多饮、多尿、多食、不明原因的体重下降)加上随机血糖或加上</td><td>≥11.1</td></tr><tr><td>(2)空腹血糖或加上</td><td>≥7.0</td></tr><tr><td>(3)葡萄糖负荷后2h血糖无典型糖尿病症状者，需改日复查确认</td><td>≥11.1</td></tr></tbody></table><p>注：空腹状态指至少8 h没有进食热量；随机血糖指不考虑上次用餐时间，一天中任意时间的血糖，不能用来诊断空腹血糖异常或糖耐量异常</p><ul><li>1 型糖尿病病因和发病机制尚不清楚，其显著的病理学和病理生理学特征是 <strong>胰岛B细胞数量显著减少和消失</strong> 所导致的胰岛素分泌显著下降或缺失。</li><li>2 型糖尿病的病因和发病机制目前亦不明确，其显著的病理生理学特征为 <strong>胰岛素调控葡萄糖代谢能力的下降</strong> (胰岛素抵抗) 伴随 <strong>胰岛B细胞功能缺陷</strong> 所导致的胰岛素分泌减少 ( 或相对减少 )</li></ul><h1 id="发病特点"><a href="#发病特点" class="headerlink" title="发病特点"></a>发病特点</h1><h2 id="1-型糖尿病特点"><a href="#1-型糖尿病特点" class="headerlink" title="1 型糖尿病特点"></a>1 型糖尿病特点</h2><ul><li>发病年龄通常小于30岁</li><li>三多一少症状明显</li><li>以酮症或酮症酸中毒起病</li><li>体型非肥胖</li><li>空腹或餐后的血清C肽浓度明显降低</li><li>出现自身免疫标记</li><li>如谷氨酸脱羧酶抗体(GADA)、胰岛细胞抗体 (ICA)、人胰岛细胞抗原 2 抗体 (IA-2A)、锌转运体 8 抗体 (ZnT8A) 等</li><li>如果不确定分类诊断，可先做一个临时性分类用于指导治疗。</li></ul><p>注: 人隐匿性自身免疫糖尿病 (LADA)， 在起病早期与 2 型糖尿病的临床表现类似，需要依 靠 GADA 以及其他胰岛自身抗体的检测才能明确诊断。</p><h2 id="胰岛B细胞功能遗传性缺陷所致特殊类型糖尿病"><a href="#胰岛B细胞功能遗传性缺陷所致特殊类型糖尿病" class="headerlink" title="胰岛B细胞功能遗传性缺陷所致特殊类型糖尿病"></a>胰岛B细胞功能遗传性缺陷所致特殊类型糖尿病</h2><ol><li><p><strong>线粒体DNA突变糖尿病</strong>：<br>线粒体基因突变糖尿病是最为多见的单基因突变糖尿病，占中国成人糖尿病中的 0.6%。绝大多数线粒体基因突变糖尿病是由线粒体亮氨酸转运 RNA 基因<br>[tRNALeu(UUR)] 上的线粒体核苷酸序位 3243 上的A → G(A3243G) 突变所致。<br>最为常见的临床表现为<strong>母系遗传、糖尿病或伴耳聋</strong>。对具有下列一种尤其是多种情况者应疑及线粒体基因突变糖尿病：<br>① 在家系内糖尿病的传递符合母系遗传。<br>② 起病早伴病程中胰岛 B 细胞分泌功能明显进行性减低或尚伴体重指数低且胰岛自身抗体检测阴性的糖尿病者。<br>③ 伴神经性耳聋的糖尿病者。<br>④ 伴中枢神经系统、骨骼肌表现、心肌病、视网膜色素变性、眼外肌麻痹或乳酸性酸中毒的糖尿病患者或家族中有上述表现者。对疑似者首先应 tRNALeu(UUR)A3243G 突变检测。</p></li><li><p><strong>青少年的成人起病型糖尿病(MODY)</strong>：<br>MODY 是一种以常染色体显性遗传方式在家系内传递的早发但临床表现类似 2 型糖尿病的疾病。<br>MODY 是临床诊断。目前通用的 MODY 诊断标准<br>是三点：<br>① 家系内至少<strong>三代直系亲属</strong>内均有糖尿病患者，且其传递符合<strong>常染色体显性</strong>遗传规律。<br>② 家系内至少有<strong>一个</strong>糖尿病患者的诊断年龄在<strong>25岁或以前</strong>。<br>③ 糖尿病确诊后至少在<strong>两年内不需</strong>使用胰岛素以控制血糖。</p></li></ol><table><thead><tr><th>MODY 分型</th><th>基因</th><th>临床特征</th></tr></thead><tbody><tr><td>1</td><td>肝细胞核因子-4α(HNF-4α)</td><td>青春期或成年早期进行性胰岛素分泌受损；高出生体重及新生儿暂时性低血糖；对磺脲类敏感</td></tr><tr><td>2</td><td>葡萄糖激酶(GCK)</td><td>病情稳定，非进行性空腹血糖升高；通常无需药物治疗；微血管并发症罕见；OGTT后2 h血糖较空腹血糖轻度升高(&lt;3mmol/L)</td></tr><tr><td>3</td><td>肝细胞核因子-1α(HNF-1α)</td><td>青春期或成年早期进行性胰岛素分泌受损；肾糖阈下降；OGTT后2 h血糖较空腹血糖显著升高(5mmol/L)；对磺脲类敏感&gt;</td></tr><tr><td>5</td><td>肝细胞核因子-1β(HNF-1β)</td><td>血糖升高伴肾发育性疾病(肾囊肿)；泌尿生殖道畸形；胰腺萎缩；高尿酸血症；痛风</td></tr><tr><td>10</td><td>胰岛素(INS)</td><td>胰岛素分泌缺陷，通常需要胰岛素治疗</td></tr><tr><td>13</td><td>钾离子通道Kir6.2(KCNJ11)</td><td>胰岛素分泌缺陷，对磺脲类敏感</td></tr></tbody></table><h1 id="糖尿病高危人群"><a href="#糖尿病高危人群" class="headerlink" title="糖尿病高危人群"></a>糖尿病高危人群</h1><h2 id="成年人中糖尿病高危人群的定义"><a href="#成年人中糖尿病高危人群的定义" class="headerlink" title="成年人中糖尿病高危人群的定义"></a>成年人中糖尿病高危人群的定义</h2><p>在成年人(&gt;18岁)中，具有下列任何一个及以上的<br>糖尿病危险因素者:</p><ol><li>年龄≥40岁；</li><li>有糖尿病前期(IGT、IFG或两者同时存在)史；</li><li>超重(BMI≥24)或肥胖(BMI≥28)和(或)中心型肥胖(男性腰围≥90 cm，女性腰围≥85 cm)；</li><li>静坐生活方式；</li><li>一级亲属中有2型糖尿病家族史；</li><li>有妊娠期糖尿病史的妇女；</li><li>高血压[收缩压≥140mmHg(1mmHg=0.133 kPa)和(或)舒张压≥90 mmHg]，或正在接受降压治疗；</li><li>血脂异常[高密度脂蛋白胆固醇(HDL-C)≤0.91 mmol/L和(或)三酰甘油(TG)≥2.22 mmol/L]，或正在接受调脂治疗；</li><li>动脉粥样硬化性心血管疾病(ASCVD)患者；</li><li>有一过性类固醇糖尿病病史者；</li><li>多囊卵巢综合征(PCOS)患者或伴有与胰岛素抵抗相关的临床状态(如黑棘皮征等)；</li><li>长期接受抗精神病药物和(或)抗抑郁药物治疗和他汀类药物治疗的患者[35-36]。</li></ol><p><strong>中心型肥胖是2型糖尿病最重要的高危人群</strong></p><h2 id="儿童和青少年中糖尿病高危人群的定义"><a href="#儿童和青少年中糖尿病高危人群的定义" class="headerlink" title="儿童和青少年中糖尿病高危人群的定义　"></a>儿童和青少年中糖尿病高危人群的定义　</h2><p>在儿童和青少年(≤18岁)中，超重(BMI&gt;相应年龄、性别的第85百分位)或肥胖(BMI&gt;相应年龄、性别的第95百分位)且合并下列任何一个危险因素者：</p><ol><li>一级或二级亲属中有2型糖尿病家族史；</li><li>存在与胰岛素抵抗相关的临床状态(如黑棘皮征、高血压、血脂异常、PCOS、出生体重小于胎龄者)；</li><li>母亲怀孕时有糖尿病史或被诊断为GDM.</li></ol><h2 id="药物干预预防2型糖尿病"><a href="#药物干预预防2型糖尿病" class="headerlink" title="药物干预预防2型糖尿病"></a>药物干预预防2型糖尿病</h2><p>在糖尿病前期人群中进行药物干预的临床试验显示，降糖药物<strong>二甲双胍</strong>、<strong>α- 糖苷酶抑制剂</strong>、<strong>噻唑烷二酮类药物</strong> (TZDs), <strong>GLP-1 受体激动剂</strong> 以及 <strong>减肥药奥利司他</strong> 等药物治疗可以降低糖尿病前期人群发生糖尿病的风险。</p><p>对于糖尿病前期个体，只有在<strong>强化生活方式干预6个月</strong>效果不佳，且合并有其他危险因素者，方可<strong>考虑药物干预</strong>，但必须充分评估效益风险比和效益费用比，并且做好充分的医患沟通和随访。</p><p>2型糖尿病患者，早期进行严格血糖控制可以降低糖尿病微血管和大血管病变的发生. 阿司匹林对心血管疾病具有一定的保护作用。</p><h1 id="防控基本原则"><a href="#防控基本原则" class="headerlink" title="防控基本原则"></a>防控基本原则</h1><ul><li><strong>近期目标</strong> 是通过<u>控制</u>高血糖和代谢紊乱来</u>消除和防止</u>出现急性代谢并发症</li><li><strong>远期目标</strong> 是通过良好的代谢控制达到 <strong>预防</strong> 慢性并发症、 <strong>提高</strong> 患者生活质量和 <strong>延长</strong> 寿命的目的。</li></ul><ol><li>糖尿病患者在诊断后，应接受糖尿病<strong>自我管理教育</strong>，掌握相关知识和技能，并且不断学习。</li><li>糖尿病自我管理教育和支持应以患者为中心，尊重和响应患者的个人爱好、需求和价值观，以此<strong>指导临床决策</strong>。</li><li>糖尿病自我管理教育是患者的必修教育课，该课程应包含延迟和预防2型糖尿病的内容，并<strong>注重个体化</strong>。</li><li>糖尿病自我管理教育和支持可<strong>改善临床结局和减少花费</strong>。</li><li>当提供糖尿病自我管理教育和支持时，健康教育提供者应该<strong>考虑治疗负担和患者自我管理的自我效能和社会与家庭支持的程度</strong>。</li><li>医护工作者应在最佳时机为糖尿病患者提供<strong>尽可能全面</strong>的糖尿病自我管理教育。</li><li>在规范化的专科糖尿病教育护士培养基础上，为患者提供糖尿病<strong>自我管理教育</strong>。</li></ol><h1 id="血糖监测"><a href="#血糖监测" class="headerlink" title="血糖监测"></a>血糖监测</h1><h2 id="毛细血管血糖监测"><a href="#毛细血管血糖监测" class="headerlink" title="毛细血管血糖监测"></a>毛细血管血糖监测</h2><p>Self-Monitoring of Blood Glucose (SMBG)</p><table><thead><tr><th>频率</th></tr></thead><tbody><tr><td>4~7次/周</td></tr></tbody></table><h2 id="HbA1c-糖化血红蛋白"><a href="#HbA1c-糖化血红蛋白" class="headerlink" title="HbA1c (糖化血红蛋白)"></a>HbA1c (糖化血红蛋白)</h2><p>HbA1c在临床上已作为评估长期血糖控制状况的<strong>金标准</strong>，也是临床决定是否需要调整治疗的重要依据</p><p><strong>正常参考值为</strong>: 4%~6%</p><table><thead><tr><th>阶段</th><th>频率</th></tr></thead><tbody><tr><td>治疗之初</td><td>3月/次</td></tr><tr><td>治疗目标达到</td><td>6月/次</td></tr><tr><td><span style="Background:salmon">注意</span>: 贫血和血红蛋白异常疾病的患者，HbA1c的检测结果是不可靠的</td><td></td></tr></tbody></table><h2 id="GA-糖化白蛋白"><a href="#GA-糖化白蛋白" class="headerlink" title="GA (糖化白蛋白)"></a>GA (糖化白蛋白)</h2><p>GA能反映糖尿病患者检测前2~3周的平均血糖水平</p><p><strong>正常参考值为</strong>: 11%~17%<br><span style="Background:salmon">注意</span>: 患有肾病综合征、肝硬化等影响白蛋白更新速度的疾病的患者，GA 的检测结果是不可靠的。</p><h2 id="CGM-持续葡萄糖监测"><a href="#CGM-持续葡萄糖监测" class="headerlink" title="CGM (持续葡萄糖监测)"></a>CGM (持续葡萄糖监测)</h2><p>葡萄糖传感器皮下监测</p><p><a href="https://imgchr.com/i/Nzl40S" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/04/Nzl40S.md.png" alt="Nzl40S.md.png"></a><br>© 中华医学会糖尿病学分会 2018</p><h1 id="糖尿病急性并发症"><a href="#糖尿病急性并发症" class="headerlink" title="糖尿病急性并发症"></a>糖尿病急性并发症</h1><h2 id="急性并发症"><a href="#急性并发症" class="headerlink" title="急性并发症"></a>急性并发症</h2><ul><li>糖尿病酮症酸中毒(DKA)</li></ul><h2 id="慢性并发症"><a href="#慢性并发症" class="headerlink" title="慢性并发症"></a>慢性并发症</h2><ul><li>糖尿病肾病(CKD)</li><li>糖尿病视网膜病变<br>白内障、青光眼、视网膜血管阻塞及缺血性视神经病变等</li><li>糖尿病自主神经病变<ul><li>血管自主神经病变</li><li>消化系统自主神经病变</li><li>泌尿生殖系统自主神经病变</li><li>其他自主神经病变</li></ul></li><li>糖尿病性下肢血管病变</li><li>糖尿病足病<ul><li>导致截肢和死亡</li></ul></li></ul><h2 id="妊娠期显性糖尿病"><a href="#妊娠期显性糖尿病" class="headerlink" title="妊娠期显性糖尿病"></a>妊娠期显性糖尿病</h2><p>  也称妊娠期间的糖尿病，指孕期任何时间被发现且达到非孕人群糖尿病诊断标准: 空腹血糖 ≥ 7.0mmol/L 或糖负荷2h后 血糖 ≥ 11.1mmol/L，或随机血糖 ≥ 11.1mmol/L。</p><h2 id="老年糖尿病的并发症"><a href="#老年糖尿病的并发症" class="headerlink" title="老年糖尿病的并发症"></a>老年糖尿病的并发症</h2><ul><li><p>急性并发症<br>包括HHS、DKA及乳酸酸中毒。部分老年糖尿病患者以HHS为首发症状。DKA多因停用胰岛素或出现感染、外伤等应激情况时诱发。乳酸酸中毒常见于严重缺氧及肾功能不全的患者。血糖、渗透压、酮体、血气及乳酸检测有助于鉴别诊断。老年糖尿病急性并发症死亡率较高，需要及时启用胰岛素治疗。</p></li><li><p>慢性并发症<br>糖尿病大血管病变以动脉粥样硬化为基本病理改变，主要包括心、脑及下肢血管病变，具有症状相对较轻或缺如，但病变范围广泛且严重，治疗困难，预后差等特点，是老年糖尿病伤残和死亡的主要原因。随着增龄及糖尿病病程增加，微血管病变患病率增高。糖尿病视网膜病变常见，但因多伴有白内障致使实际诊断率下降。老年糖尿病肾损害是多种危险因素共同作用的结果，血肌酐水平不能准确反映肾功能状态，需要计算肌酐清除率。老年糖尿病患者神经系统损害常见，包括中枢神经系统病变、周围神经病变、自主神经病变等。</p></li><li><p>老年综合征<br>老年糖尿病患者易于出现包括跌倒、痴呆、尿失禁、谵妄、晕厥、抑郁症、疼痛、睡眠障碍、药物滥用、帕金森综合征、压疮、便秘、营养不良、听力障碍和衰弱综合征等在内的老年综合征，严重影响患者的生活质量和预期寿命，增加了糖尿病管理的难度 [418]。对此类患者更需要全面评估后慎重考虑治疗获益与风险的平衡，确定以改善生活质量为主的安全治疗策略。</p></li></ul><h1 id="中医理论"><a href="#中医理论" class="headerlink" title="中医理论"></a>中医理论</h1><p><a href="https://imgchr.com/i/NzgGAe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/04/NzgGAe.md.png" alt="NzgGAe.md.png"></a><br>© 中华医学会糖尿病学分会 2018<br>古人所述消渴病，多以“三多一少”为主要表现，以阴虚为本，燥热为标主论，采用上、中、下三消辨证。而现代，糖尿病多以肥胖为特征。</p><h1 id="More-papers"><a href="#More-papers" class="headerlink" title="More papers"></a>More papers</h1><h2 id="Journals-for-diabetes"><a href="#Journals-for-diabetes" class="headerlink" title="Journals for diabetes"></a>Journals for diabetes</h2><table><thead><tr><th>Name</th><th>SCI</th><th>中科院分区</th><th>2020</th></tr></thead><tbody><tr><td><a href="https://www.hindawi.com/journals/jdr/" target="_blank" rel="noopener">Journal of Diabetes Research</a></td><td>收录</td><td>3区</td><td>2.965</td></tr></tbody></table><p><strong>metaflammation</strong><br><a href="https://www.hindawi.com/journals/jdr/2017/5165268/" target="_blank" rel="noopener">Jixin Zhong et al., 2017</a></p><p><strong>oral microbiome</strong><br><a href="https://www.onlinelibrary.wiley.com/doi/abs/10.1111/jre.12432" target="_blank" rel="noopener">J. Long et al., 2017</a><br>sample size:</p><table><thead><tr><th>Diabetes</th><th>obese non‐diabetics</th><th>normal weight non‐diabetics</th></tr></thead><tbody><tr><td>98</td><td>99</td><td>97</td></tr></tbody></table><p>Result:<br>multiple bacteria taxa in the phylum Actinobacteria (放线菌门) are associated with the risk of type 2 diabetes. Some are also associated with the prevalence of obesity, suggesting that the oral microbiome may play an important role in diabetes etiology.</p><p><strong>Type 2 Diabetes Mellitus Related Genes</strong><br>ABCC8, Haptoglobin, KCNJ11, ACDC, ENPP1, TNF-α, and TCF7L2.<br><a href="https://www.hindawi.com/journals/jdr/2020/3198671/" target="_blank" rel="noopener">Evans Adu Asamoah 2020</a></p><p><strong>PNPLA2</strong><br>Chinese Han population: 2 tagSNPs, PNPLA2 rs28633403 (A&gt;G) and rs1138714 (A&gt;G), were associated with DKD (Diabetic kidney disease).</p><p><strong>Function</strong>: This gene encodes an enzyme which catalyzes the first step in the hydrolysis of <strong>*<span title = "甘油三酸酯">triglycerides</span>*</strong> in adipose tissue. Mutations in this gene are associated with neutral lipid storage disease with myopathy. <a href="https://www.genecards.org/cgi-bin/carddisp.pl?gene=PNPLA2" target="_blank" rel="noopener">Jul 2010</a><br><a href="https://www.hindawi.com/journals/jdr/2020/5424701/" target="_blank" rel="noopener">Hailing Zhao 2020</a></p><p><strong>*<span title="脂联素">ADIPOQ</span>*</strong><br>ADIPOQ rs2241766 Gene Polymorphism and Predisposition to Diabetic Kidney Disease.<br><a href="https://www.hindawi.com/journals/jdr/2020/5158497/" target="_blank" rel="noopener">Qiuxia Han 2020</a></p><p><strong>调节巨噬细胞极化可减轻糖尿肾病</strong><br>Attenuation of Diabetic Nephropathy in Diabetic Mice by Fasudil through Regulation of Macrophage Polarization<br><a href="https://www.hindawi.com/journals/jdr/2020/4126913/" target="_blank" rel="noopener">Fajiang Xie 2020</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>TED听抄2: The secret to self control | Jonathan Bricker | TEDxRainier</title>
      <link href="/LearnNotes/Ted2-Selfdecipline_T.html"/>
      <url>/LearnNotes/Ted2-Selfdecipline_T.html</url>
      
        <content type="html"><![CDATA[<h1 id="TED听抄2-The-secret-to-self-control-Jonathan-Bricker-TEDxRainier"><a href="#TED听抄2-The-secret-to-self-control-Jonathan-Bricker-TEDxRainier" class="headerlink" title="TED听抄2: The secret to self control | Jonathan Bricker | TEDxRainier"></a>TED听抄2: The secret to self control | Jonathan Bricker | TEDxRainier</h1><p><a href="https://www.youtube.com/watch?v=tTb3d5cjSFI&t=1s" target="_blank" rel="noopener">Source</a>  </p><p>1<br>00:00:00,000 –&gt; 00:00:10,417<br>Translator: Karobben</p><p>2<br>00:00:10,417 –&gt; 00:00:13,000<br>让我来告诉大家关于我妈的故事.</p><p>3<br>00:00:13,000 –&gt; 00:00:18,292<br>我妈在生我的时候, 已经42岁了,</p><p>4<br>00:00:18,292 –&gt; 00:00:23,300<br>之后,她开始了她人生的第一次锻炼</p><p>5<br>00:00:23,300 –&gt; 00:00:25,792<br>一开始, 她只是再街区之间跑步,</p><p>6<br>00:00:25,792 –&gt; 00:00:32,209<br>紧接着, 她开始了5千米项目,<br>然后再是10千米跑,</p><p>7<br>00:00:32,209 –&gt; 00:00:36,400<br>再之后,她开始了马拉松运动,</p><p>8<br>00:00:36,400 –&gt; 00:00:40,792<br>最后直接开始参加铁人三项</p><p>9<br>00:00:40,792 –&gt; 00:00:44,292<br>但到了这个时候,她已经57岁了.</p><p>10<br>00:00:44,292 –&gt; 00:00:51,050<br>我妈也徒步去过Everest的营地.</p><p>11<br>00:00:51,050 –&gt; 00:00:53,918<br>(哈哈哈)</p><p>12<br>00:00:53,918 –&gt; 00:00:56,300<br>接下来, 我想说说我爸爸.</p><p>13<br>00:00:56,300 –&gt; 00:01:00,792<br>(哈哈哈哈哈哈)</p><p>14<br>00:01:00,792 –&gt; 00:01:06,501<br>小时候, 我爸就经常带我去他的科学课上</p><p>15<br>00:01:06,501 –&gt; 00:01:12,400<br>同时, 他也是我高中的微积分学老师</p><p>16<br>00:01:12,400 –&gt; 00:01:13,600<br>(哈哈)</p><p>17<br>00:01:13,600 –&gt; 00:01:15,900<br>我当时简直想躲在课桌下面哭</p><p>18<br>00:01:15,900 –&gt; 00:01:17,700<br>(哈哈哈哈哈)</p><p>19<br>00:01:17,700 –&gt; 00:01:20,000<br>我从我妈那里学到了的重要的东西:</p><p>20<br>00:01:20,000 –&gt; 00:01:23,000<br>健康的重要</p><p>21<br>00:01:23,000 –&gt; 00:01:27,501<br>我从我爸那里学到了的重要的东西:</p><p>22<br>00:01:27,501 –&gt; 00:01:30,209<br>科学的重要.</p><p>23<br>00:01:30,209 –&gt; 00:01:35,876<br>这两个重要的观念, 为我人生的道路领航</p><p>24<br>00:01:35,876 –&gt; 00:01:40,300<br>这两个观念, 使我对我们所有人面对的”流行性问题”怀有感激.</p><p>25<br>00:01:40,300 –&gt; 00:01:43,501<br>这个流行性问题不是埃博拉</p><p>26<br>00:01:43,501 –&gt; 00:01:47,792<br>相反,我指的是, 流行性的不健康生活习惯.</p><p>27<br>00:01:47,792 –&gt; 00:01:52,584<br>全球有超过5亿的过胖人口</p><p>28<br>00:01:52,584 –&gt; 00:01:56,918<br>然后, 你们可能会想, 在美国Surgeon General<br>第一次发布烟草有害的50年后,</p><p>29<br>00:01:56,918 –&gt; 00:02:03,709<br>吸烟给我们带来的问题比预期还大.</p><p>30<br>00:02:03,709 –&gt; 00:02:09,292<br>现在, 全球有10已的烟民.</p><p>31<br>00:02:09,292 –&gt; 00:02:14,900<br>烟瘾和肥胖是两个最容易预防的</p><p>32<br>00:02:14,900 –&gt; 00:02:18,000<br>早逝诱因.</p><p>33<br>00:02:18,000 –&gt; 00:02:22,417<br>解决这些问题就像完成拼图一样.</p><p>34<br>00:02:22,417 –&gt; 00:02:25,792<br>我们之所以会有这些不健康<br>的习惯,来源于我们的基因,</p><p>35<br>00:02:25,792 –&gt; 00:02:28,127<br>来源于我们大脑的神经递质,</p><p>36<br>00:02:28,127 –&gt; 00:02:33,000<br>来源于环境影响,比如同年人和媒体.</p><p>37<br>00:02:33,000 –&gt; 00:02:35,292<br>这里的任何一小块拼图,</p><p>38<br>00:02:35,292 –&gt; 00:02:40,918<br>单靠我们自己是无法解决的.</p><p>39<br>00:02:40,918 –&gt; 00:02:47,292<br>但是, 其中有一块拼图,<br>也许掌握了问题之关键所在</p><p>40<br>00:02:47,292 –&gt; 00:02:52,162<br>我们对回应对抽烟和过度饮食等</p><p>41<br>00:02:52,162 –&gt; 00:02:58,709<br>上瘾行为的渴望的选择</p><p>42<br>00:02:58,709 –&gt; 00:03:00,792<br>我们的选择</p><p>43<br>00:03:00,792 –&gt; 00:03:04,000<br>这里有一个关于自控力衍生的新学科</p><p>44<br>00:03:04,000 –&gt; 00:03:08,501<br>也许掌握了逆转流行性问题的关键</p><p>45<br>00:03:08,501 –&gt; 00:03:11,209<br>他的名字叫”Willingness”</p><p>46<br>00:03:11,209 –&gt; 00:03:16,209<br>Willingness 意味着, 让你的<br>渴望产生与消失</p><p>47<br>00:03:16,209 –&gt; 00:03:22,083<br>同时, 并不用抽烟或者不健康饮食来回应</p><p>48<br>00:03:22,083 –&gt; 00:03:28,500<br>但,事实上, 我并不是来讨论意志力的,<br>我也不是来宣传</p><p>49<br>00:03:28,500 –&gt; 00:03:30,792<br>“通过渴望而获得力量”</p><p>50<br>00:03:30,792 –&gt; 00:03:34,918<br>相对的, 我是要提一个对于<br>渴望的, 不同的观点</p><p>51<br>00:03:34,918 –&gt; 00:03:39,258<br>就像这个样子:</p><p>52<br>00:03:39,258 –&gt; 00:03:44,209<br>停止对渴望的反抗</p><p>53<br>00:03:44,209 –&gt; 00:03:50,100<br>放宽心, 让这些渴望,合理的存在</p><p>54<br>00:03:50,100 –&gt; 00:03:53,501<br>并且, 心平气和的对待他们</p><p>55<br>00:03:53,501 –&gt; 00:03:55,900<br>现在, 在这个时候,<br>你们也许会非常怀疑(我说的)</p><p>56<br>00:03:55,900 –&gt; 00:04:01,000<br>(哈哈)</p><p>57<br>00:04:01,000 –&gt; 00:04:05,083<br>当几年前, 我第一次听见<br>这个的时候,我是(挺怀疑的)</p><p>58<br>00:04:05,083 –&gt; 00:04:08,667<br>那时候我一个朋友带着一本关于<br>“Willingness”的书跑过来</p><p>59<br>00:04:08,667 –&gt; 00:04:11,125<br>他对我说: “Jonathan,</p><p>60<br>00:04:11,125 –&gt; 00:04:17,709<br>这本书会永远的改变你的一生!”</p><p>61<br>00:04:17,709 –&gt; 00:04:24,000<br>然后我回答 “喔, 好…<br>嗯嗯… 嗯嗯, 我会看看的.”</p><p>62<br>00:04:24,000 –&gt; 00:04:29,400<br>所以,我浏览了一遍,然后想,<br>“呐, 这就是一些, 心理絮语(心理疗法)”</p><p>63<br>00:04:29,400 –&gt; 00:04:31,709<br>然后我就把他丢在了一边.</p><p>64<br>00:04:31,709 –&gt; 00:04:34,083<br>直到几年以后当我老婆</p><p>65<br>00:04:34,083 –&gt; 00:04:39,200<br>带我去了华盛顿大学的一个<br>“Willingness”的研讨会</p><p>66<br>00:04:39,200 –&gt; 00:04:42,792<br>然后, 我被折服了.</p><p>67<br>00:04:42,792 –&gt; 00:04:44,501<br>所以, 我开始读起来一些书,</p><p>68<br>00:04:44,501 –&gt; 00:04:46,751<br>再接着, 我读了很多关于<br>“Willingness”的书.</p><p>69<br>00:04:46,751 –&gt; 00:04:48,792<br>并且, 我接受了相关的训练</p><p>70<br>00:04:48,792 –&gt; 00:04:53,083<br>之后, 我从中学到了.<br>“Willingness”是”接受与肯定疗法”</p><p>71<br>00:04:53,083 –&gt; 00:04:57,400<br>中的以改变行为<br>为目而去接受的一部分.</p><p>72<br>00:04:57,400 –&gt; 00:04:59,417<br>它拓宽了改变行为的方法</p><p>73<br>00:04:59,417 –&gt; 00:05:04,209<br>这个已经被运用于帮助<br>焦虑症人群,上瘾人群</p><p>74<br>00:05:04,209 –&gt; 00:05:05,919<br>甚至有些创新的公司</p><p>75<br>00:05:05,919 –&gt; 00:05:09,086<br>用这个来帮助员工提高业绩</p><p>76<br>00:05:09,086 –&gt; 00:05:11,501<br>并且减轻他们的压力.</p><p>77<br>00:05:11,501 –&gt; 00:05:14,417<br>现在, 想要知道, 我<br>为什么被它惊讶到了</p><p>78<br>00:05:14,417 –&gt; 00:05:18,292<br>首先你们得知道, 我的环境.</p><p>79<br>00:05:18,292 –&gt; 00:05:20,209<br>在我的研究领域,</p><p>80<br>00:05:20,209 –&gt; 00:05:23,918<br>一个最常用的帮助人<br>们戒烟,减肥的方法</p><p>81<br>00:05:23,918 –&gt; 00:05:27,292<br>是教他们避免产生这种渴望.</p><p>82<br>00:05:27,292 –&gt; 00:05:32,709<br>不要产生吸烟的想法,分散你对食物的渴望.</p><p>83<br>00:05:32,709 –&gt; 00:05:37,417<br>有一首来之百老汇的歌曲完美的描绘了这个疗法.</p><p>84<br>00:05:37,417 –&gt; 00:05:40,000<br>他是这样唱到:</p><p>85<br>00:05:40,000 –&gt; 00:05:45,000<br>(旋律) 当你被你脑中的想法所困惑的时候</p><p>86<br>00:05:45,000 –&gt; 00:05:47,881<br>不要去想这些东西了</p><p>87<br>00:05:47,881 –&gt; 00:05:53,292<br>快停下来</p><p>88<br>00:05:53,292 –&gt; 00:05:58,300<br>像灯的开关一样把他关掉<br>就像我们</p><p>89<br>00:05:58,300 –&gt; 00:05:59,593<br>平常关灯一样,随手关掉它</p><p>90<br>00:05:59,593 –&gt; 00:06:02,876<br>当你感到有些想法不对的时候.</p><p>91<br>00:06:02,876 –&gt; 00:06:08,200<br>把这些讨厌的感觉当成床头灯一样关掉它们.</p><p>92<br>00:06:08,200 –&gt; 00:06:10,292<br>(2333)</p><p>93<br>00:06:10,292 –&gt; 00:06:15,709<br>(piapiapia)</p><p>94<br>00:06:15,709 –&gt; 00:06:18,292<br>我们都生活在这样一个环境中,</p><p>95<br>00:06:18,292 –&gt; 00:06:24,000<br>这里的歌曲不停的灌输着<br>“关闭这些不好的感觉.”</p><p>96<br>00:06:24,000 –&gt; 00:06:28,584<br>那么现在, 让我们一起看看这些, 曲奇饼把</p><p>97<br>00:06:28,584 –&gt; 00:06:32,792<br>(哈哈哈)</p><p>98<br>00:06:32,792 –&gt; 00:06:37,700<br>这些新鲜出炉的饼干<br>(⊙o⊙ )哦, 他们看起来非常棒!</p><p>99<br>00:06:37,700 –&gt; 00:06:39,709<br>( ⊙o⊙)啊！, 这些饼非常的美味.</p><p>100<br>00:06:39,709 –&gt; 00:06:43,501<br>(⊙v⊙)嗯, 好好感受一<br>下来自对这些饼干的渴望</p><p>101<br>00:06:43,501 –&gt; 00:06:46,709<br>(⊙o⊙)哦, 它们是如此的可爱, 如此的美好.</p><p>102<br>00:06:46,709 –&gt; 00:06:48,292<br>乘现在, 关掉这个想法!</p><p>103<br>00:06:48,292 –&gt; 00:06:52,200<br>(哈哈哈)</p><p>104<br>00:06:52,200 –&gt; 00:06:54,209<br>关掉关掉它!</p><p>105<br>00:06:54,209 –&gt; 00:06:57,792<br>你们反而更想要这些饼干了, 对嘛?</p><p>106<br>00:06:57,792 –&gt; 00:07:00,334<br>你们可以发现, 阻止想这些, 是没有用的</p><p>107<br>00:07:00,334 –&gt; 00:07:02,292<br>你根本就不能阻止它!</p><p>108<br>00:07:02,292 –&gt; 00:07:04,792<br>所以,也许,你并不需要关闭它</p><p>109<br>00:07:04,792 –&gt; 00:07:10,501<br>也许, 你可以把这盏灯留着</p><p>110<br>00:07:10,501 –&gt; 00:07:12,709<br>就像这样:</p><p>111<br>00:07:12,709 –&gt; 00:07:18,500<br>My research lab at the Fred Hutchinson<br>Cancer Research Center, here in Seattle,</p><p>112<br>00:07:18,500 –&gt; 00:07:21,792<br>is conducting randomized clinical trials</p><p>113<br>00:07:21,792 –&gt; 00:07:26,792<br>to see if showing people<br>how to be willing to have their cravings</p><p>114<br>00:07:26,792 –&gt; 00:07:29,292<br>is effective for quitting smoking.</p><p>115<br>00:07:29,292 –&gt; 00:07:32,709<br>We are conducting trials<br>and face-to-face interventions</p><p>116<br>00:07:32,709 –&gt; 00:07:39,209<br>and a telephone quit smoking hotline<br>and a website called webquit.org</p><p>117<br>00:07:39,209 –&gt; 00:07:43,000<br>and in an app called SmartQuit.</p><p>118<br>00:07:43,000 –&gt; 00:07:47,417<br>These technologies have the potential<br>to reach millions of people</p><p>119<br>00:07:47,417 –&gt; 00:07:51,292<br>with interventions<br>that could save their lives.</p><p>120<br>00:07:51,292 –&gt; 00:07:54,918<br>That’s pretty amazing.</p><p>121<br>00:07:54,918 –&gt; 00:07:57,792<br>And let me tell you about the data.</p><p>122<br>00:07:57,792 –&gt; 00:08:01,918<br>When you pool together the results<br>from six clinical trials,</p><p>123<br>00:08:01,918 –&gt; 00:08:04,209<br>all six that have been published to date,</p><p>124<br>00:08:04,209 –&gt; 00:08:07,083<br>including trials<br>conducted by our colleagues,</p><p>125<br>00:08:07,083 –&gt; 00:08:10,584<br>what we see is that for the people<br>who were assigned</p><p>126<br>00:08:10,584 –&gt; 00:08:13,627<br>to the avoidance approach -<br>avoiding your cravings —-</p><p>127<br>00:08:13,627 –&gt; 00:08:16,000<br>some of them quit smoking,</p><p>128<br>00:08:16,000 –&gt; 00:08:18,792<br>and it varied depending on the study.</p><p>129<br>00:08:18,792 –&gt; 00:08:24,459<br>However, for the people who were randomly<br>assigned to the willingness condition,</p><p>130<br>00:08:24,459 –&gt; 00:08:28,200<br>twice as many quit smoking.</p><p>131<br>00:08:28,200 –&gt; 00:08:30,792<br>Very, very encouraging.</p><p>132<br>00:08:30,792 –&gt; 00:08:36,082<br>Now, of course, the data only tell us<br>one small part of the story.</p><p>133<br>00:08:36,082 –&gt; 00:08:39,792<br>So, to help you see willingness in action,</p><p>134<br>00:08:39,792 –&gt; 00:08:42,958<br>I’m going to weave together<br>experiences I’ve had</p><p>135<br>00:08:42,958 –&gt; 00:08:45,584<br>in counseling people for quitting smoking.</p><p>136<br>00:08:45,584 –&gt; 00:08:49,100<br>And I’ll together refer to them<br>as one person</p><p>137<br>00:08:49,100 –&gt; 00:08:50,918<br>that we’ll just call Jane.</p><p>138<br>00:08:50,918 –&gt; 00:08:56,100<br>So, as is typical of people who come in<br>to want help for quitting smoking,</p><p>139<br>00:08:56,100 –&gt; 00:08:59,292<br>Jane was a 45-year-old person</p><p>140<br>00:08:59,292 –&gt; 00:09:02,584<br>who started smoking<br>when she was a teenager.</p><p>141<br>00:09:02,584 –&gt; 00:09:06,000<br>She tried to quit smoking several times<br>and was not successful.</p><p>142<br>00:09:06,000 –&gt; 00:09:08,418<br>So, she was very skeptical<br>that anything “new”</p><p>143<br>00:09:08,418 –&gt; 00:09:10,918<br>was going to be helpful<br>to her for quitting,</p><p>144<br>00:09:10,918 –&gt; 00:09:14,417<br>and yet she was really hopeful<br>that this time would be different.</p><p>145<br>00:09:14,417 –&gt; 00:09:18,876<br>So, the first thing that I showed Jane<br>was to be willing,</p><p>146<br>00:09:18,876 –&gt; 00:09:22,417<br>that is to be aware,<br>of her cravings in her body.</p><p>147<br>00:09:22,417 –&gt; 00:09:25,300<br>So to notice where she felt cravings<br>in her body.</p><p>148<br>00:09:25,300 –&gt; 00:09:27,000<br>And what I did was I asked her</p><p>149<br>00:09:27,000 –&gt; 00:09:31,584<br>to journal that, and just to track<br>the intensity over time,</p><p>150<br>00:09:31,584 –&gt; 00:09:33,503<br>and to see if she’d smoke afterwards.</p><p>151<br>00:09:33,503 –&gt; 00:09:36,918<br>So in the middle of explaining this,<br>she stops me and says,</p><p>152<br>00:09:36,918 –&gt; 00:09:42,501<br>“What are you talking about?<br>I don’t have cravings, I just smoke!”</p><p>153<br>00:09:42,501 –&gt; 00:09:47,209<br>So I said, “Well, why don’t you try it,<br>and we’ll see what happens,</p><p>154<br>00:09:47,209 –&gt; 00:09:49,627<br>and if it doesn’t work,<br>we’ll try something else.”</p><p>155<br>00:09:49,627 –&gt; 00:09:53,051<br>So she came back a week later<br>and she said,</p><p>156<br>00:09:53,051 –&gt; 00:09:57,390<br>“You know, I’ve been tracking my cravings,</p><p>157<br>00:09:57,390 –&gt; 00:10:00,792<br>I’ve been tracking them all the time.</p><p>158<br>00:10:00,792 –&gt; 00:10:04,400<br>And now I can’t stop<br>thinking about smoking!</p><p>159<br>00:10:04,400 –&gt; 00:10:07,083<br>(Laughter)</p><p>160<br>00:10:07,083 –&gt; 00:10:09,292<br>What am I supposed to do?”</p><p>161<br>00:10:09,292 –&gt; 00:10:13,709<br>Well, before I tell you my answer,<br>let’’s look behind the scenes.</p><p>162<br>00:10:13,709 –&gt; 00:10:15,679<br>Now, what was probably going on here</p><p>163<br>00:10:15,679 –&gt; 00:10:18,250<br>was that Jane<br>was having cravings all along,</p><p>164<br>00:10:18,250 –&gt; 00:10:24,209<br>and like a lot of us,<br>she was living on autopilot.</p><p>165<br>00:10:24,209 –&gt; 00:10:27,292<br>(Laughter)</p><p>166<br>00:10:27,292 –&gt; 00:10:29,709<br>You wake up in the morning,<br>you smoke a cigarette,</p><p>167<br>00:10:29,709 –&gt; 00:10:32,009<br>you have a cup of coffee,<br>you smoke a cigarette,</p><p>168<br>00:10:32,009 –&gt; 00:10:34,381<br>you get in the car, you smoke a cigarette.</p><p>169<br>00:10:34,381 –&gt; 00:10:38,501<br>We’re often just not aware of<br>what we think, what we feel before we act.</p><p>170<br>00:10:38,501 –&gt; 00:10:41,918<br>So, my answer to Jane was to be willing,</p><p>171<br>00:10:41,918 –&gt; 00:10:44,107<br>and one of the ways<br>I showed her to do that</p><p>172<br>00:10:44,107 –&gt; 00:10:48,000<br>was with an exercise called<br>“I am having the thought”.</p><p>173<br>00:10:48,000 –&gt; 00:10:53,584<br>So, one of Jane’s thoughts<br>before she had a cigarette was,</p><p>174<br>00:10:53,584 –&gt; 00:10:56,876<br>“I’m feeling a lot of stress right now,<br>I really need a cigarette.”</p><p>175<br>00:10:56,876 –&gt; 00:10:58,419<br>So I asked her to add the phrase</p><p>176<br>00:10:58,419 –&gt; 00:11:00,918<br>“I’m having the thought” like this.</p><p>177<br>00:11:00,918 –&gt; 00:11:02,160<br>“I’m having the thought</p><p>178<br>00:11:02,160 –&gt; 00:11:05,514<br>that I’m feeling a lot of stress right now<br>I really need a cigarette.”</p><p>179<br>00:11:05,514 –&gt; 00:11:10,417<br>Then I asked her to add the phrase<br>“I’m noticing I’m having the thought,”</p><p>180<br>00:11:10,417 –&gt; 00:11:12,918<br>so “I’m noticing<br>that I’m having the thought</p><p>181<br>00:11:12,918 –&gt; 00:11:14,918<br>that I’m feeling<br>a lot of stress right now,</p><p>182<br>00:11:14,918 –&gt; 00:11:16,334<br>I really need a cigarette.”</p><p>183<br>00:11:16,334 –&gt; 00:11:21,918<br>Now, we can all do an exercise like this<br>when we have any kind of negative thought.</p><p>184<br>00:11:21,918 –&gt; 00:11:26,200<br>Like for my thought<br>that “I’m boring all of you with my talk”</p><p>185<br>00:11:26,200 –&gt; 00:11:27,709<br>(Laughter)</p><p>186<br>00:11:27,709 –&gt; 00:11:32,209<br>and I’m having the thought<br>that I’m boring all of you with my talk.</p><p>187<br>00:11:32,209 –&gt; 00:11:35,502<br>So, what this exercise did<br>is it gave me a little bit of space</p><p>188<br>00:11:35,502 –&gt; 00:11:37,918<br>between me and my thoughts.</p><p>189<br>00:11:37,918 –&gt; 00:11:40,083<br>And it’s in that space</p><p>190<br>00:11:40,083 –&gt; 00:11:45,870<br>that I can choose not to run off<br>the stage in front of 1,500 people.</p><p>191<br>00:11:45,870 –&gt; 00:11:47,417<br>(Laughter)</p><p>192<br>00:11:47,417 –&gt; 00:11:50,709<br>And the fact is we don’t act<br>on every thought we have,</p><p>193<br>00:11:50,709 –&gt; 00:11:54,350<br>because if we did, we’d all be<br>in a whole lot of trouble.</p><p>194<br>00:11:54,350 –&gt; 00:11:56,417<br>(Laughter)</p><p>195<br>00:11:56,417 –&gt; 00:12:00,210<br>So, this was helpful to Jane,<br>but there was something else</p><p>196<br>00:12:00,210 –&gt; 00:12:03,209<br>that was really difficult for Jane.</p><p>197<br>00:12:03,209 –&gt; 00:12:06,209<br>I felt a lot of compassion<br>for her about it.</p><p>198<br>00:12:06,209 –&gt; 00:12:08,584<br>That was the judgment that she felt</p><p>199<br>00:12:08,584 –&gt; 00:12:14,501<br>from people when she would be<br>outside smoking a cigarette.</p><p>200<br>00:12:14,501 –&gt; 00:12:18,501<br>The criticism from her husband<br>for being a smoker,</p><p>201<br>00:12:18,501 –&gt; 00:12:24,292<br>and the self-loathing<br>that she developed about smoking.</p><p>202<br>00:12:24,292 –&gt; 00:12:28,709<br>And she dealt with this shame<br>by having a cigarette,</p><p>203<br>00:12:28,709 –&gt; 00:12:33,918<br>which gave her relief temporarily<br>until the shame came back.</p><p>204<br>00:12:33,918 –&gt; 00:12:36,584<br>So, I said to Jane,</p><p>205<br>00:12:36,584 –&gt; 00:12:41,792<br>“What would it be like<br>if we tried to honor this feeling of shame</p><p>206<br>00:12:41,792 –&gt; 00:12:45,709<br>as part of the human experience?</p><p>207<br>00:12:45,709 –&gt; 00:12:50,600<br>If you had a close friend<br>who is feeling shame about smoking,”</p><p>208<br>00:12:50,600 –&gt; 00:12:51,918<br>I said to Jane,</p><p>209<br>00:12:51,918 –&gt; 00:12:58,292<br>“what would you offer this friend<br>as words of caring and kindness,</p><p>210<br>00:12:58,292 –&gt; 00:13:03,792<br>and could you then offer those words<br>to yourself, Jane?”</p><p>211<br>00:13:03,792 –&gt; 00:13:06,292<br>And she looked up,</p><p>212<br>00:13:06,292 –&gt; 00:13:12,584<br>and she had this look of this temporary<br>respite from the shame,</p><p>213<br>00:13:12,584 –&gt; 00:13:15,918<br>which made it just<br>a little bit easier next time</p><p>214<br>00:13:15,918 –&gt; 00:13:19,083<br>not to act on the craving.</p><p>215<br>00:13:19,083 –&gt; 00:13:21,709<br>So, here is the secret to self-control:</p><p>216<br>00:13:21,709 –&gt; 00:13:25,918<br>the secret to self-control<br>is to give up control.</p><p>217<br>00:13:25,918 –&gt; 00:13:27,002<br>Because otherwise,</p><p>218<br>00:13:27,002 –&gt; 00:13:33,417<br>we get into a tug-of-war with a monster,<br>a craving monster.</p><p>219<br>00:13:33,417 –&gt; 00:13:35,083<br>And the craving monster says,</p><p>220<br>00:13:35,083 –&gt; 00:13:40,500<br>“Come on, smoke a cigarette.<br>Come on, have that cookie. Come on!”</p><p>221<br>00:13:40,500 –&gt; 00:13:42,297<br>And you’re on the other side saying,</p><p>222<br>00:13:42,297 –&gt; 00:13:45,167<br>“No craving monster,<br>I’m going to distract myself from you,</p><p>223<br>00:13:45,167 –&gt; 00:13:47,167<br>I’m going to ignore you,<br>no, no, no, no.”</p><p>224<br>00:13:47,167 –&gt; 00:13:50,553<br>And the craving monster says,<br>“No, no, come on, you know you want it!”</p><p>225<br>00:13:50,553 –&gt; 00:13:51,829<br>And you’re just back here</p><p>226<br>00:13:51,829 –&gt; 00:13:54,244<br>and you’re going back and forth<br>and back and forth</p><p>227<br>00:13:54,244 –&gt; 00:13:56,743<br>and pretty soon the craving monster<br>overpowers you</p><p>228<br>00:13:56,743 –&gt; 00:13:59,324<br>— you have that cookie,<br>you have that cigarette,</p><p>229<br>00:13:59,324 –&gt; 00:14:01,419<br>until the craving monster comes back.</p><p>230<br>00:14:01,419 –&gt; 00:14:06,292<br>And then you’re in the tug-of-war again<br>doing what we’ve learned how to do.</p><p>231<br>00:14:06,292 –&gt; 00:14:09,203<br>Unless -</p><p>232<br>00:14:09,203 –&gt; 00:14:12,203<br>unless you drop the rope.</p><p>233<br>00:14:12,203 –&gt; 00:14:13,538<br>And what you discover</p><p>234<br>00:14:13,538 –&gt; 00:14:16,709<br>is that if you just allow<br>the monster to be,</p><p>235<br>00:14:16,709 –&gt; 00:14:19,792<br>to occupy a space in your body,</p><p>236<br>00:14:19,792 –&gt; 00:14:21,294<br>you discover in a few minutes</p><p>237<br>00:14:21,294 –&gt; 00:14:25,918<br>that the craving monster is not<br>as threatening as he appears.</p><p>238<br>00:14:25,918 –&gt; 00:14:29,918<br>And sometimes, he even goes away.</p><p>239<br>00:14:29,918 –&gt; 00:14:33,900<br>As we break for lunch, we’re going to have<br>choices of what to eat.</p><p>240<br>00:14:33,900 –&gt; 00:14:40,083<br>(Laughter)</p><p>241<br>00:14:40,083 –&gt; 00:14:47,417<br>When you see them, try to be aware<br>of the cravings in your body,</p><p>242<br>00:14:47,417 –&gt; 00:14:49,626<br>try to be willing to have those cravings.</p><p>243<br>00:14:49,626 –&gt; 00:14:52,501<br>See if they pass on their own.</p><p>244<br>00:14:52,501 –&gt; 00:14:56,294<br>Whatever choice you make,<br>try to bring a spirit of caring</p><p>245<br>00:14:56,294 –&gt; 00:14:59,209<br>and kindness to yourself,</p><p>246<br>00:14:59,209 –&gt; 00:15:04,200<br>for that is the mountain<br>that we are all climbing.</p><p>247<br>00:15:04,200 –&gt; 00:15:05,584<br>Thank you very much.</p><p>248<br>00:15:05,584 –&gt; 00:15:07,586<br>(Applause)</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>TED听抄2: The secret to self control | Jonathan Bricker | TEDxRainier</title>
      <link href="/LearnNotes/Ted2-Selfdecipline.html"/>
      <url>/LearnNotes/Ted2-Selfdecipline.html</url>
      
        <content type="html"><![CDATA[<h1 id="TED听抄2-The-secret-to-self-control-Jonathan-Bricker-TEDxRainier"><a href="#TED听抄2-The-secret-to-self-control-Jonathan-Bricker-TEDxRainier" class="headerlink" title="TED听抄2: The secret to self control | Jonathan Bricker | TEDxRainier"></a>TED听抄2: The secret to self control | Jonathan Bricker | TEDxRainier</h1><p><a href="https://www.youtube.com/watch?v=tTb3d5cjSFI&t=1s" target="_blank" rel="noopener">Source</a>  </p><p>Let me tell you about my mom. My mom was 42 years-old when I was born. And she started exercising for the first time in her life. She started by running around the block. And then, she started doing 5km raises. And then, she started doing 10km raises. And after that, she ran a marathon. And after that, my mom did it <strong>Drasalon</strong>. By the time, she was 57 years-old. My mom was tracking up hell to the base camp of mountain everest. And let me tell you about my dad. When I was a kid, my dad used to take me to the science classes. He was also my calculus teacher in high school. I want to craw under the desk. I learned something important from my mom, the value of health. And I learn something important from my dad, the value of science. And, this two values have guide me on my track through life. And they found me appreciate the epidemic we are all facing, and it’s not Ebola. Instead, it is the epidemic of unhealthy living.  </p><p>A half billion people world wide are OBS. And you would think that 50 year after that first US surging general support on the dangerous tobacco was published. That we be beyond of the problem of smoking. Today, a billion people worldwide use tobacco. Tobacco and obesity are two of the most preventably causes of premature death. Solving this problems is like trying to solve <strong>Ajecstuck</strong> puzzle. We are engaging in unhealthy behavior because of our genetics, because of brain neural transmitters, because of environmental effluences such as pills and media. Each of those pieces of puzzle are not things you and I can solve on our own. But, there is one piece of this puzzle that may hold the key, our choices, about what we do with our cravings to engage in addicted behaviors like smoking, or over eating. Our choices. There is a new science of self-control that may hold the key to reversing that epidemics. It’s called willingness.</p><p>Willingness means allowing you craving to come and to go or not acting on that, like smoking or eating unhealthy. But actually, I’m not talk about will power, I’m not talking about power through your cravings. Instead, I am talking about different notion of cravings. That looks like this, dropping the struggle with your cravings, opening up to them, letting them be there, and making peace with them.  </p><p>Now, at this point, you maybe very skeptical. I was. When I first heard about it years ago, I friend of my came to me with a book on willingness. He said, Jonathan, this book will changing your life for every. And I said, Ooh, ok, yeah, umm, year, I’ll check it out. So, I went through it, ummm, it is a bunch of psychical bible. I tossed it aside. Until some years later, when my wife brought me to a work shop on unwillingness of university of Washington. And I was <strong>bullowned</strong> away. So then, I read the book, and then, I read a lot of book on willingness. And I got trained in it. And what I learned was willingness is apart of acceptance in the accept and commitment therapy approach to be behavior change. It’s a broad approach to be behavior change, it’s been used to help people with anxiety disorder, with addictions, even some innovative companies are now using it to helping improving their employees performance and reduce their distress.</p><p>Now, to understand why I was billowed away, you have to understand the world that I live in. In my research world, a common way you help people quit smoking and lose weight is you teaching them to avoid cravings, avoid thinking about smokings, distraked yourself from food cravings. There’s a song from a Broadway’s show, and <strong>capshows</strong> this perfectly, it goes like this.</p><p>When you start to get confuse because of fuzzes in your head, don’t fell thoughts feelings. Hold them in instead, turn it off, like a light switch just go click we do it all the time when you feeling certain feeling such as don’t seems right, switch those packing feeling like a reading light, and turn them off.</p><p>We all living in this world, with the song we keep hearing is turn off the bad feelings. Now, let’s take a look at this cookies. They just came out of the oven. Ooooh, they are so good. Oooh, they are so delicious. Enmmm, just feeling the craving to eat that feelings. Oooh, they are lovely, they are so good. Now, turn it off. turn it off. You want this cookies even more now, right? You see the futility of “turn it off”. You can’t turn it off. And maybe, you don’t have to. Maybe, you can leave the light on. Here is how.  </p><p>My research lab at Fred Parkinson Cancer Research Center here in Cato. It’s conducting random-mize clinical trails to see if showing people how to be willing to have their craving is affective to quite smoking. We are conducting trails in face to face intervention, and a telephone quick smoke hot-line, and a website called webquite.org, and an App called smart quite. This technology help the potential to reach millions people with their interventions, we could save life. That’s pretty amazing.</p><p>And let me tell you about the data. When you pull together the result from six clinical trials, all six had been published today, including trails conducted by our colleagues. What we see is that for the people who were signed to the avoid approach, avoiding your cravings, some of them quite smoking, and very depending on the study. However, for the people who are randomly signed for willingness condition, twice as many quite smoking. Every every encouraging.<br>Now, of course, the date only tell us one part of the story. So, to help you see willingness in action, I am going to wave together experiences I’ve had to consulting people to quiting smoking. And our together refer, so there is one person we’ll just call him Jane.</p><p>So, as this is typical people who coming to once helping quiting smoking, Jane was a 45 years-old person, who started smoking when she was a teenager. She tried quite smoking several times but not successful. So, she was very skeptical that  anything new was getting be helpful to her for quite. And she was really hopeful that this time would be different. So, the first thing that I show Jane was to be willing, that is to be aware of her craving in her body. So, to know this where she cravings in her body. And when I did it this to asking a journal that, and just to track the intensity over time, and see if she smoke afterward. So, a little bit of explain that she stops me, she saids, “what are you talking about? I don’t have cravings. I just smoke”. So, I said, “Well, why not you try it, and we will see what happens, and if doesn’t happens, we try something else”. So, she came back a week later. She said, you know, “I am dragging my cravings. I have been dragging them all the time. And now, I can’t stopping thinking about smoking. What am I suppose to do?” Well, if I tell you, my answer, let’s look behind the sites. Well, what’s probably going on here was that Jane was having craving all alone. And like a lot of us, she lives on autopaletor. You wake up in the morning, smoke a cigarette, you have a cup of coffee, you smoke a cigarette, you get in to the car, you smoke a cigarette. We are often just not aware what we thinking before we act. So, I answer to Jane was to be willing. And one of the way I show her to do that was what the exercise called, I am having the thought. So, one of Jane thoughts, before he had cigarette was, I fill a lot of stress I know, I really need a cigarette. So, I ask he after freeze, I’m having the thought, like this. I’m having the thought that I’m feeling lot’s of stress done, I really need a cigarette. Than, I asking her another phrase, I notice that I have the thought. So, I’m noticing that I’m having the thought, then I having lot’s of stress now, I really need a cigarette. Now, we can all do an exercise like this when we have any kind of negative thought, like for my thought, that I’m boring all of you by my talking. And, I’m having the thought that I’m boring all of you with my talk. So, what the exercise did is give me a little bit space between me and my thoughts. And it’s in that’s space, that I can choice not to run out of the stage from 500 people. And the fact is, we don’t act on every thoughts we had because if we did, we all be in hall a lot of trouble. So, this was helpful to Jane. But there was something else, that was really difficult for Jane, and I feel lot’s of compassion about her. And that was the judgment that she feel from people when she would be outside smoking a outside cigarette. There criticism from her husband for been a smoker, and the self-loading that she developed about smoking, and she dealt with ashame, by having a cigarette which give her relive temporarily into the shame came back. So, I said to Jane, what would be like if we tried to honer this feel of shame as part of human experiment. If you had a close friend, who was feeling ashame about smoking, I said to Jane, “What would you offer to this friend as words of caring very kindness? And could you then, offer those words to yourself Jane.” And she looked up, and she had this look of this temporary respite from the shame which made just a little bit easier to next time, not acting to craving.</p><p>So, here is the secret of self control. The secret of self control is to give up control. Because otherwise, we get into a target of war with a monster, a craving monster. And a craving monster saids, “Common, smoke a cigarette; common, have that cookie; Common!” And you are on the other side say, “No, craving monster, I’m gonna distract by you; I am ignoring you, no no no” And the craving monster says, “Yeah, you know, common, you know, you want it.” And you just back here, you are going back and forth and back and forth, and pretty soon, the craving monster over powers you, you have the cookies, you have that cigarette until the craving monster come back. And you are on the target word doing again. Doing what we learned how to do. In last, in last, you drop the rope. And when you discovered is if you just allow the monster to be, to occupy a space in your body, you discover that that the craving monster is not as threatening as it appears. And some times, it even goes away. As we break for lunch, we gonna have choices what to eat. When you see them, try to be aware of the craves in your body. Try to be willing to have this craving, see if they passed on there own. And whatever choices you made, try to bring a spirited of caring and kindness to yourself, for that is the mountain that we are all climbing. Thank you very much!</p><hr><p><a href="https://github.com/Karobben" target="_blank" rel="noopener">Github</a><br><a href="http://Karobben.github.io">Blog</a><br><a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">Bilibili</a><br><a href="https://karobben.github.io/R/R-index.html">R 语言画图索引</a></p><hr><p>Identity:  87.29% 11113 <br><br>﻿1 Translator: Emanuele Rossi Reviewer: TED Translators admin Let me tell you about my m<br><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>Let me tell you about my m<br><br>om. My mom was 42 years old when I was born, and she started exercising for the first ti<br>om. My mom was 42 years<span style="color:salmon;">-</span>old when I was born<span style="color:salmon;">.</span> And she started exercising for the first ti<br><br>me in her life. She started by running around the block, and then_ she started doing 5K_<br>me in her life. She started by running around the block<span style="color:salmon;">.</span> And then<span style="color:salmon;">,</span> she started doing 5k<span style="color:salmon;">m</span><br><br> rac_es, and then_ she started doing 10K_ rac_es. And after that, she ran a marathon, an<br> ra<span style="color:salmon;">i</span><span style="color:salmon;">s</span>es<span style="color:salmon;">.</span> And then<span style="color:salmon;">,</span> she started doing 10k<span style="color:salmon;">m</span> ra<span style="color:salmon;">i</span><span style="color:salmon;">s</span>es. And after that, she ran a marathon<span style="color:salmon;">.</span> An<br><br>d after that, my mom did a_ triathlon. By the time_ she was 57 years old, my mom was tre<br>d after that, my mom did <span style="color:salmon;">i</span><span style="color:salmon;">t</span> <span style="color:salmon;">D</span>r<span style="color:salmon;">_</span>a<span style="color:salmon;">s</span><span style="color:salmon;">a</span>lon. By the time<span style="color:salmon;">,</span> she was 57 years<span style="color:salmon;">-</span>old<span style="color:salmon;">.</span> My mom was tr<span style="color:salmon;">a</span><br><br>kking up_hill to the base camp of M___t.<em>_ Everest. And let me tell you about my dad. Wh<br><span style="color:salmon;">c</span>king up<span style="color:salmon;"> </span>h<span style="color:salmon;">e</span>ll to the base camp of m<span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;">n</span>t<span style="color:salmon;">a</span><span style="color:salmon;">i</span><span style="color:salmon;">n</span> everest. And let me tell you about my dad. Wh<br><br>en I was a kid, my dad used to take me to ____science classes. He was also my calculus t<br>en I was a kid, my dad used to take me to <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>science classes. He was also my calculus t<br><br>eacher in high school. I wanted to crawl under the desk. I learned something important f<br>eacher in high school. I want<span style="color:salmon;"></em></span><span style="color:salmon;">_</span> to craw<span style="color:salmon;">_</span> under the desk. I learned something important f<br><br>rom my mom: The value of health. And I learned something important from my dad: the valu<br>rom my mom<span style="color:salmon;">,</span> the value of health. And I learn<span style="color:salmon;">_</span><span style="color:salmon;">_</span> something important from my dad<span style="color:salmon;">,</span> the valu<br><br>e of science. And_ these two values have guided me on my tre_k through life, and they’ve<br>e of science. And<span style="color:salmon;">,</span> th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> two values have guide<span style="color:salmon;">_</span> me on my tr<span style="color:salmon;">a</span><span style="color:salmon;">c</span>k through life<span style="color:salmon;">.</span> And they<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><br><br> helped me appreciate an_ epidemic that we are all facing. And it’s not Ebola. Instead,<br> <span style="color:salmon;">f</span><span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;">n</span><span style="color:salmon;">_</span>d me appreciate <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span> epidemic <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>we are all facing<span style="color:salmon;">,</span> and it’s not Ebola. Instead, <br><br>it is the epidemic of unhealthy living. <em>A half billion people world_wide are obese. And<br>it is the epidemic of unhealthy living. <span style="color:salmon;"> </span>A half billion people world<span style="color:salmon;"> </span>wide are OB<span style="color:salmon;">S</span><span style="color:salmon;"></em></span><span style="color:salmon;">_</span>. And<br><br> you would think that 50 years after the_ first U.S. Surgeon_ General’s report on the da<br> you would think that 50 year<span style="color:salmon;">_</span> after th<span style="color:salmon;">a</span><span style="color:salmon;">t</span> first U<span style="color:salmon;">_</span>S<span style="color:salmon;">_</span> surg<span style="color:salmon;">i</span><span style="color:salmon;">_</span>n<span style="color:salmon;">g</span> general<span style="color:salmon;"> </span>s<span style="color:salmon;">u</span><span style="color:salmon;">p</span><span style="color:salmon;">_</span>port on the da<br><br>ngers of_ tobacco was published_ <strong>___we’d be beyond _</strong>the problem of smoking. Today, a<br>nger<span style="color:salmon;">_</span><span style="color:salmon;">_</span>o<span style="color:salmon;">u</span><span style="color:salmon;">s</span> tobacco was published<span style="color:salmon;">.</span> <span style="color:salmon;">T</span><span style="color:salmon;">h</span><span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>we<span style="color:salmon;">_</span><span style="color:salmon;">_</span> be beyond <span style="color:salmon;">o</span><span style="color:salmon;">f</span><span style="color:salmon;"> </span>the problem of smoking. Today, a<br><br> billion people worldwide use tobacco. Tobacco and obesity are two of the most preventab<br> billion people worldwide use tobacco. Tobacco and obesity are two of the most preventab<br><br>le causes of premature death. Solving these problems is like trying to solve a jigsaw__<br>l<span style="color:salmon;">y</span> causes of premature death. Solving th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> problems is like trying to solve A<span style="color:salmon;">_</span>j<span style="color:salmon;">e</span><span style="color:salmon;">c</span>s<span style="color:salmon;">t</span><span style="color:salmon;">u</span><span style="color:salmon;">c</span><span style="color:salmon;">k</span> <br><br>puzzle. We <strong>e</strong>ngage__ in unhealthy behaviors because of our genetics, because of brain<br>puzzle. We <span style="color:salmon;">a</span><span style="color:salmon;">r</span>e<span style="color:salmon;"> </span><span style="color:salmon;">e</span>ngag<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> in unhealthy behavior<span style="color:salmon;">_</span> because of our genetics, because of brain<br><br> neuro__transmitters, because of environmental influences such as peers and the media. E<br> neur<span style="color:salmon;">a</span><span style="color:salmon;">l</span><span style="color:salmon;"> </span>transmitters, because of environmental <span style="color:salmon;">e</span><span style="color:salmon;">f</span>fluences such as p<span style="color:salmon;">i</span><span style="color:salmon;">l</span><span style="color:salmon;">l</span>s and <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>media. E<br><br>ach of those pieces of the puzzle are not things that you and I can solve on our own. Bu<br>ach of those pieces of <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>puzzle are not things <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>you and I can solve on our own. Bu<br><br>t_ there is one piece of this puzzle that may hold the key: Our choices_ about what we d<br>t<span style="color:salmon;">,</span> there is one piece of this puzzle that may hold the key<span style="color:salmon;">,</span> our choices<span style="color:salmon;">,</span> about what we d<br><br>o with our cravings to engage in addictive_ behaviors like smoking_ or over_eating. Our<br>o with our cravings to engage in addict<span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">d</span> behaviors like smoking<span style="color:salmon;">,</span> or over<span style="color:salmon;"> </span>eating. Our <br><br>choices. There is a new science of self-control that may hold the key to reversing these<br>choices. There is a new science of self-control that may hold the key to reversing th<span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span><br><br> epidemics. It’s called willingness. <em>Willingness means allowing your cravings to come a<br> epidemics. It’s called willingness. <span style="color:salmon;"> </span>Willingness means allowing you<span style="color:salmon;"></em></span> craving<span style="color:salmon;">_</span> to come a<br><br>nd to go, while not acting on them_ by__ smoking or eating unhealthy. But actually, I’m<br>nd to go<span style="color:salmon;">_</span> <span style="color:salmon;">o</span><span style="color:salmon;">r</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> not acting on th<span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;">,</span> <span style="color:salmon;">l</span><span style="color:salmon;">i</span><span style="color:salmon;">k</span><span style="color:salmon;">e</span> smoking or eating unhealthy. But actually, I’m <br><br>not talking about will_power, and I’m not talking about “power through your cravings.” I<br>not talk<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> about will<span style="color:salmon;"> </span>power, <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>I’m not talking about <span style="color:salmon;">_</span>power through your cravings.<span style="color:salmon;">_</span> I<br><br>nstead, I’<em>m talking about a different notion of cravings</em> that looks like this: droppin<br>nstead, I<span style="color:salmon;"> </span><span style="color:salmon;">a</span>m talking about <span style="color:salmon;">_</span><span style="color:salmon;">_</span>different notion of cravings<span style="color:salmon;">.</span> That looks like this<span style="color:salmon;">,</span> droppin<br><br>g the struggle with your cravings. Opening up to them, letting them be there, and making<br>g the struggle with your cravings<span style="color:salmon;">,</span> opening up to them, letting them be there, and making<br><br> peace with them. <em>Now</em> at this point_ you may be very skeptical. I was_ when I first he<br> peace with them. <span style="color:salmon;"> </span>Now<span style="color:salmon;">,</span> at this point<span style="color:salmon;">,</span> you may<span style="color:salmon;">_</span>be very skeptical. I was<span style="color:salmon;">.</span> When I first he<br><br>ard about it years ago. A friend of mine came to me with a book on willingness. He said,<br>ard about it years ago<span style="color:salmon;">,</span> <span style="color:salmon;">I</span> friend of m<span style="color:salmon;">y</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> came to me with a book on willingness. He said,<br><br> “Jonathan, this book will change__ your life for_ever!” And I said_ “O_h, OK… Yeah…<br> <span style="color:salmon;">_</span>Jonathan, this book will chang<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> your life for<span style="color:salmon;"> </span>ever<span style="color:salmon;">y</span><span style="color:salmon;">.</span> And I said<span style="color:salmon;">,</span> <span style="color:salmon;">_</span>O<span style="color:salmon;">o</span>h, ok<span style="color:salmon;">,</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> yeah<span style="color:salmon;">,</span><span style="color:salmon;"> </span><span style="color:salmon;">u</span><br><br><strong>_ yeah, I’ll check it out.” So_ I went through it and thought, “Nah, this is a bunch o<br><span style="color:salmon;">m</span><span style="color:salmon;">m</span><span style="color:salmon;">,</span> yea<span style="color:salmon;">r</span>, I’ll check it out.<span style="color:salmon;">_</span> So<span style="color:salmon;">,</span> I went through it<span style="color:salmon;">,</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>u<span style="color:salmon;">m</span><span style="color:salmon;">m</span><span style="color:salmon;">m</span>, <span style="color:salmon;">i</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> is a bunch o<br><br>f psycho-ba</strong>b_ble,” and tossed it aside. Until some years later_ when my wife brought m<br>f psych<span style="color:salmon;">i</span><span style="color:salmon;">c</span><span style="color:salmon;">_</span>a<span style="color:salmon;">l</span><span style="color:salmon;"> </span>b<span style="color:salmon;">i</span>ble<span style="color:salmon;">.</span><span style="color:salmon;">_</span> <span style="color:salmon;">I</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> tossed it aside. Until some years later<span style="color:salmon;">,</span> when my wife brought m<br><br>e to a work_shop on <strong>willingness at the University of Washington, and I was b_l_own</strong> a<br>e to a work<span style="color:salmon;"> </span>shop on <span style="color:salmon;">u</span><span style="color:salmon;">n</span>willingness <span style="color:salmon;">o</span><span style="color:salmon;">f</span> <span style="color:salmon;">u</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>niversity of Washington<span style="color:salmon;">.</span> And I was b<span style="color:salmon;">u</span>l<span style="color:salmon;">l</span>own<span style="color:salmon;">e</span><span style="color:salmon;">d</span> a<br><br>way. So then_ I read the book, and then_ I read a lot of books on willingness, and I got<br>way. So then<span style="color:salmon;">,</span> I read the book, and then<span style="color:salmon;">,</span> I read a lot of book<span style="color:salmon;">_</span> on willingness<span style="color:salmon;">.</span> And I got<br><br> trained in it, and what I learned was that willingness is <em>part of acceptance in the Ac<br> trained in it<span style="color:salmon;">.</span> And what I learned was <span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>willingness is <span style="color:salmon;">a</span>part of acceptance in the ac<br><br>ceptance and Commitment Therapy approach to be___havior change. It’s a broad approach to<br>cept<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> and commitment therapy approach to be<span style="color:salmon;"> </span><span style="color:salmon;">b</span><span style="color:salmon;">e</span>havior change. It’s a broad approach to<br><br> be___havior change_ that’s being used to help people with anxiety disorders, with addic<br> be<span style="color:salmon;"> </span><span style="color:salmon;">b</span><span style="color:salmon;">e</span>havior change<span style="color:salmon;">,</span> <span style="color:salmon;">i</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t’s be<span style="color:salmon;">e</span>n<span style="color:salmon;">_</span> used to help people with anxiety disorder<span style="color:salmon;">_</span>, with addic<br><br>tions_ even some innovative companies are now using it to help___ improve__ their employ<br>tions<span style="color:salmon;">,</span> even some innovative companies are now using it to help<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> improv<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> their employ<br><br>ees’ performance and reduce their <strong>stress. <em>Now, to understand why I was b_l_own</em> away,<br>ees<span style="color:salmon;">_</span> performance and reduce their <span style="color:salmon;">d</span><span style="color:salmon;">i</span>stress. <span style="color:salmon;"> </span>Now, to understand why I was b<span style="color:salmon;">i</span>l<span style="color:salmon;">l</span>ow<span style="color:salmon;">e</span><span style="color:salmon;">d</span> away,<br><br> you have to understand the world ___</strong>I live in. In my research world, a common way you<br> you have to understand the world <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>I live in. In my research world, a common way you<br><br> help people quit smoking and lose weight is you teach___ them to avoid their cravings.<br> help people quit smoking and lose weight is you teach<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> them to avoid <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>cravings<span style="color:salmon;">,</span> <br><br>Avoid thinking about smoking_, distract_ yourself from food cravings. There’s a song fro<br>avoid thinking about smoking<span style="color:salmon;">s</span>, distra<span style="color:salmon;">k</span><span style="color:salmon;">e</span><span style="color:salmon;">d</span> yourself from food cravings. There’s a song fro<br><br>m a Broadway__ show_ that_ captures this perfectly. It goes like this: <strong><strong><strong>_____</strong></strong></strong><br>m a Broadway<span style="color:salmon;">‘</span><span style="color:salmon;">s</span> show<span style="color:salmon;">,</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span>a<span style="color:salmon;">n</span><span style="color:salmon;">d</span> cap<span style="color:salmon;">s</span><span style="color:salmon;">h</span><span style="color:salmon;">o</span><span style="color:salmon;">w</span>s this perfectly<span style="color:salmon;">,</span> it goes like this<span style="color:salmon;">.</span> <span style="color:salmon;"> </span><span style="color:salmon;">W</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span><span style="color:salmon;">n</span><span style="color:salmon;"> </span><span style="color:salmon;">y</span><span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;"> </span><span style="color:salmon;">s</span><span style="color:salmon;">t</span><span style="color:salmon;">a</span><span style="color:salmon;">r</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span><br><br><strong><strong><strong>__</strong></strong></strong>because of thoughts in your head, don’t feel tho____se feelings, hold them<br><span style="color:salmon;">o</span><span style="color:salmon;"> </span><span style="color:salmon;">g</span><span style="color:salmon;">e</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">c</span><span style="color:salmon;">o</span><span style="color:salmon;">n</span><span style="color:salmon;">f</span><span style="color:salmon;">u</span><span style="color:salmon;">s</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>because of <span style="color:salmon;">f</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>u<span style="color:salmon;">z</span><span style="color:salmon;">z</span><span style="color:salmon;">e</span>s in your head, don’t fe<span style="color:salmon;">l</span>l tho<span style="color:salmon;">u</span><span style="color:salmon;">g</span><span style="color:salmon;">h</span><span style="color:salmon;">t</span>s<span style="color:salmon;">_</span> feelings<span style="color:salmon;">.</span> Hold them<br><br> in instead. Turn it off_ like a light switch just go click. We do it all the time when<br> in instead<span style="color:salmon;">,</span> turn it off<span style="color:salmon;">,</span> like a light switch just go click<span style="color:salmon;">_</span> we do it all the time when <br><br>you’re feeling certain feeling_s that just don’t seem_ right. Treat__ those pesky__ feel<br>you<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> feeling certain feeling<span style="color:salmon;"> </span>s<span style="color:salmon;">u</span><span style="color:salmon;">c</span>h<span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">a</span><span style="color:salmon;">_</span>s<span style="color:salmon;">_</span> don’t seem<span style="color:salmon;">s</span> right<span style="color:salmon;">,</span> <span style="color:salmon;">s</span><span style="color:salmon;">w</span><span style="color:salmon;">i</span><span style="color:salmon;">_</span>t<span style="color:salmon;">c</span><span style="color:salmon;">h</span> those p<span style="color:salmon;">a</span><span style="color:salmon;">c</span>k<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> feel<br><br>ings like a reading light_ and turn them off. <em>We all live__ in this world, w__here the<br>ing<span style="color:salmon;"></em></span> like a reading light<span style="color:salmon;">,</span> and turn them off. <span style="color:salmon;"> </span>We all liv<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> in this world, w<span style="color:salmon;">i</span><span style="color:salmon;">t</span>h<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> the <br><br>song we keep hearing is “turn off the bad feelings.” Now, let’s take a look at these coo<br>song we keep hearing is <span style="color:salmon;">_</span>turn off the bad feelings.<span style="color:salmon;">_</span> Now, let’s take a look at th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> coo<br><br>kies. They just came out of the oven_ <em>oo_h, they are so good! A__h, they’<em>re so delicio<br>kies. They just came out of the oven<span style="color:salmon;">.</span> <span style="color:salmon;">O</span>oo<span style="color:salmon;">o</span>h, they are so good<span style="color:salmon;">.</span> <span style="color:salmon;">O</span><span style="color:salmon;">o</span><span style="color:salmon;">o</span>h, they<span style="color:salmon;"> </span><span style="color:salmon;">a</span>re so delicio<br><br>us. M_m-mm, just feel__</em> that craving to eat those cookie_s. Oo_h, they’_re lovely, they<br>us. <span style="color:salmon;">E</span><span style="color:salmon;">n</span>m<span style="color:salmon;"></em></span>mm, just feel<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> th<span style="color:salmon;">e</span><span style="color:salmon;">_</span> craving to eat th<span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span> <span style="color:salmon;">f</span><span style="color:salmon;">e</span><span style="color:salmon;">e</span><span style="color:salmon;">l</span>i<span style="color:salmon;">n</span><span style="color:salmon;">g</span>s. Oo<span style="color:salmon;">o</span>h, they<span style="color:salmon;"> </span><span style="color:salmon;">a</span>re lovely, they<br><br>‘<em>re so good. Now, turn it off! Turn it off! You want those cookies even more now, right<br><span style="color:salmon;"> </span><span style="color:salmon;">a</span>re so good. Now, turn it off<span style="color:salmon;">.</span> turn it off<span style="color:salmon;">.</span> You want th<span style="color:salmon;">i</span>s<span style="color:salmon;"></em></span> cookies even more now, right<br><br>? You see the futility of trying to turn it off_. You can’t turn it off! And maybe_ you<br>? You see the futility of <span style="color:salmon;">“</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>urn it off<span style="color:salmon;">“</span>. You can’t turn it off<span style="color:salmon;">.</span> And maybe<span style="color:salmon;">,</span> you <br><br>don’t have to. Maybe, you can leave the light on. Here is how: <em>My research lab at the F<br>don’t have to. Maybe, you can leave the light on. Here is how<span style="color:salmon;">.</span> <span style="color:salmon;"> </span>My research lab at <span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>F<br><br>red Hutchinson Cancer Research Center, here in Seattle, i__s conducting random__ized cli<br>red <span style="color:salmon;">P</span><span style="color:salmon;">a</span><span style="color:salmon;">r</span><span style="color:salmon;">k</span><span style="color:salmon;">_</span>inson Cancer Research Center<span style="color:salmon;">_</span> here in <span style="color:salmon;">C</span><span style="color:salmon;">_</span>at<span style="color:salmon;">o</span><span style="color:salmon;">.</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> I<span style="color:salmon;">t</span><span style="color:salmon;">‘</span>s conducting random<span style="color:salmon;">-</span><span style="color:salmon;">m</span>ize<span style="color:salmon;">_</span> cli<br><br>nical tr_ials to see if showing people how to be willing to have their cravings is effec<br>nical tr<span style="color:salmon;">a</span>i<span style="color:salmon;">_</span>ls to see if showing people how to be willing to have their craving<span style="color:salmon;">_</span> is <span style="color:salmon;">a</span>ffec<br><br>tive for quitting smoking. We are conducting tr_ials and face-to-face interventions and<br>tive <span style="color:salmon;">t</span>o<span style="color:salmon;">_</span> quit<span style="color:salmon;">e</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> smoking. We are conducting tr<span style="color:salmon;">a</span>i<span style="color:salmon;">_</span>ls <span style="color:salmon;">i</span>n<span style="color:salmon;">_</span> face<span style="color:salmon;"> </span>to<span style="color:salmon;"> </span>face intervention<span style="color:salmon;">,</span> and <br><br>a telephone quit_ smoking hot_line_ and a website called webquit_.org_ and in an app cal<br>a telephone qui<span style="color:salmon;">c</span><span style="color:salmon;">k</span> smok<span style="color:salmon;">e</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> hot<span style="color:salmon;">-</span>line<span style="color:salmon;">,</span> and a website called webquit<span style="color:salmon;">e</span>.org<span style="color:salmon;">,</span> and <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>an App cal<br><br>led SmartQ_uit_. These technologies have__ the potential to reach millions of people wit<br>led smart<span style="color:salmon;"> </span><span style="color:salmon;">q</span>uit<span style="color:salmon;">e</span>. Th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> technolog<span style="color:salmon;">y</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> h<span style="color:salmon;">_</span><span style="color:salmon;">_</span>e<span style="color:salmon;">l</span><span style="color:salmon;">p</span> the potential to reach millions <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>people wit<br><br>h <strong><em>i</em></strong>nterventions_ that could save their lives. That’s pretty amazing. <em>And let me t<br>h <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span>i<span style="color:salmon;">r</span><span style="color:salmon;"> </span><span style="color:salmon;">i</span>nterventions<span style="color:salmon;">,</span> <span style="color:salmon;">w</span><span style="color:salmon;">e</span><span style="color:salmon;"></em></span><span style="color:salmon;">_</span> could save <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>li<span style="color:salmon;">f</span>e<span style="color:salmon;">_</span>. That’s pretty amazing. <span style="color:salmon;"> </span>And let me t<br><br>ell you about the data. When you pool together the results from six clinical trials, all<br>ell you about the data. When you p<span style="color:salmon;">u</span><span style="color:salmon;">l</span>l together the result<span style="color:salmon;">_</span> from six clinical trials, all<br><br> six that have been published to date, including tr_ials conducted by our colleagues, wh<br> six <span style="color:salmon;">_</span>ha<span style="color:salmon;">d</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>been published to<span style="color:salmon;">_</span>da<span style="color:salmon;">y</span><span style="color:salmon;">_</span>, including tr<span style="color:salmon;">a</span>i<span style="color:salmon;">_</span>ls conducted by our colleagues<span style="color:salmon;">.</span> Wh<br><br>at we see is that for the people who were assigned to the avoidance approach - avoiding<br>at we see is that for the people who were <span style="color:salmon;">_</span>s<span style="color:salmon;">_</span>igned to the avoid<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> approach<span style="color:salmon;">,</span><span style="color:salmon;">_</span> avoiding <br><br>your cravings —- some of them quit_ smoking, and it varied depending on the study. Howev<br>your cravings<span style="color:salmon;">,</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> some of them quit<span style="color:salmon;">e</span> smoking, and <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>v<span style="color:salmon;">e</span>r<span style="color:salmon;">y</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> depending on the study. Howev<br><br>er, for the people who were randomly assigned to the willingness condition, twice as man<br>er, for the people who <span style="color:salmon;">a</span><span style="color:salmon;">_</span>re randomly <span style="color:salmon;">_</span>s<span style="color:salmon;">_</span>igned <span style="color:salmon;">f</span>o<span style="color:salmon;">r</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> willingness condition, twice as man<br><br>y quit_ smoking. V_ery, <em>very encouraging. Now, of course, the data only tell us one sma<br>y quit<span style="color:salmon;">e</span> smoking. <span style="color:salmon;">E</span><span style="color:salmon;">v</span>ery<span style="color:salmon;"></em></span> <span style="color:salmon;">e</span>very encouraging. Now, of course, the dat<span style="color:salmon;">e</span> only tell us one <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><br><br>ll part of the story. So, to help you see willingness in action, I’<em>m going to weave tog<br><span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>part of the story. So, to help you see willingness in action, I<span style="color:salmon;"> </span><span style="color:salmon;">a</span>m going to w<span style="color:salmon;">_</span>ave tog<br><br>ether experiences I’ve had in counsel_ing people for quitting smoking. And I’ll together<br>ether experiences I’ve had <span style="color:salmon;">t</span><span style="color:salmon;">o</span> co<span style="color:salmon;">_</span>ns<span style="color:salmon;">u</span>l<span style="color:salmon;">t</span>ing people <span style="color:salmon;">t</span>o<span style="color:salmon;">_</span> quit<span style="color:salmon;">_</span>ing smoking. And <span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;">r</span><span style="color:salmon;">_</span> together<br><br> refer_ to them_ as one person that we’ll just call <strong>__Jane. _So, as __is _</strong>typical of<br> refer<span style="color:salmon;">,</span> <span style="color:salmon;">s</span>o the<span style="color:salmon;">r</span><span style="color:salmon;">e</span> <span style="color:salmon;">i</span>s one person <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>we’ll just call <span style="color:salmon;">h</span><span style="color:salmon;">i</span><span style="color:salmon;">m</span><span style="color:salmon;"> </span>Jane. <span style="color:salmon;"> </span>So, as <span style="color:salmon;">t</span><span style="color:salmon;">h</span>is <span style="color:salmon;">i</span><span style="color:salmon;">s</span><span style="color:salmon;"> </span>typical <span style="color:salmon;">_</span><span style="color:salmon;">_</span><br><br> people who come in_ to want_ help for quitting smoking, Jane was a 45-year_-old person_<br><span style="color:salmon;">_</span>people who com<span style="color:salmon;">_</span><span style="color:salmon;">_</span>in<span style="color:salmon;">g</span> to <span style="color:salmon;">o</span><span style="color:salmon;">_</span>n<span style="color:salmon;">c</span><span style="color:salmon;">e</span> help<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span><span style="color:salmon;">_</span> quit<span style="color:salmon;">_</span>ing smoking, Jane was a 45<span style="color:salmon;"> </span>year<span style="color:salmon;">s</span>-old person<span style="color:salmon;">,</span><br><br> who started smoking when she was a teenager. She tried to quit_ smoking several times a<br> who started smoking when she was a teenager. She tried <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>quit<span style="color:salmon;">e</span> smoking several times <span style="color:salmon;">b</span><br><br>nd was not successful. So, she was very skeptical that anything “new” was go__ing to be<br><span style="color:salmon;">u</span><span style="color:salmon;">t</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>not successful. So, she was very skeptical that anything <span style="color:salmon;">_</span>new<span style="color:salmon;">_</span> was g<span style="color:salmon;">e</span><span style="color:salmon;">t</span><span style="color:salmon;">t</span>ing <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>be <br><br>helpful to her for quitting, and yet she was really hopeful that this time would be diff<br>helpful to her for quit<span style="color:salmon;">e</span><span style="color:salmon;">.</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> And <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>she was really hopeful that this time would be diff<br><br>erent. So, the first thing that I showed Jane was to be willing, that is to be aware, of<br>erent. So, the first thing that I show<span style="color:salmon;">_</span><span style="color:salmon;">_</span> Jane was to be willing, that is to be aware<span style="color:salmon;">_</span> of<br><br> her cravings in her body. So_ to <em>no__t_ice where she felt cravings in her body. And wh<br> her craving<span style="color:salmon;"></em></span> in her body. So<span style="color:salmon;">,</span> to <span style="color:salmon;">k</span>no<span style="color:salmon;">w</span><span style="color:salmon;"> </span>t<span style="color:salmon;">h</span>i<span style="color:salmon;">s</span><span style="color:salmon;">_</span> where she <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>cravings in her body. And wh<br><br>at I did wa____s I_ asked her to journal that, and just to track the intensity over time<br><span style="color:salmon;">e</span><span style="color:salmon;">n</span> I did <span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">i</span>s <span style="color:salmon;">t</span><span style="color:salmon;">o</span> ask<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">a</span><span style="color:salmon;">_</span> journal that, and just to track the intensity over time<br><br>, and to see if she’d smoke afterwards. So_ in <strong>th_e middle of explaining this, she sto<br>, and <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>see if she<span style="color:salmon;">_</span><span style="color:salmon;">_</span> smoke afterward<span style="color:salmon;">_</span>. So<span style="color:salmon;">,</span> <span style="color:salmon;">a</span><span style="color:salmon;">_</span> <span style="color:salmon;">l</span><span style="color:salmon;">i</span>t<span style="color:salmon;">t</span><span style="color:salmon;">l</span>e <span style="color:salmon;">b</span>i<span style="color:salmon;">t</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> of explain<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> th<span style="color:salmon;">a</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span> she sto<br><br>ps me_ and say_s, “What are you talking about? I don’t have cravings, I just smoke!”_ So<br>ps me<span style="color:salmon;">,</span> <span style="color:salmon;">s</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span> sa<span style="color:salmon;">i</span><span style="color:salmon;">d</span>s, “what are you talking about? I don’t have cravings<span style="color:salmon;">.</span> I just smoke<span style="color:salmon;">_</span>“<span style="color:salmon;">.</span> So<br><br>_ I said, “Well, why don’t you try it, and we’</strong>ll see what happens, and if it doesn’t w<br><span style="color:salmon;">,</span> I said, “Well, why <span style="color:salmon;">n</span>o<span style="color:salmon;">_</span><span style="color:salmon;">_</span>t you try it, and we<span style="color:salmon;"> </span><span style="color:salmon;">w</span><span style="color:salmon;">i</span>ll see what happens, and if <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>doesn’t <span style="color:salmon;">h</span><br><br>ork___, we’ll try something else_.” So_ she came back a week later and she said, “You kn<br><span style="color:salmon;">a</span><span style="color:salmon;">p</span><span style="color:salmon;">p</span><span style="color:salmon;">e</span><span style="color:salmon;">n</span><span style="color:salmon;">s</span>, we<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> try something else<span style="color:salmon;">“</span>.<span style="color:salmon;">_</span> So<span style="color:salmon;">,</span> she came back a week later<span style="color:salmon;">.</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> She said, <span style="color:salmon;">y</span><span style="color:salmon;">_</span>ou kn<br><br>ow, <em>I’ve been tracking my cravings, I’__ve been tracking them all the time. And now</em> I<br>ow, <span style="color:salmon;">“</span>I<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">a</span><span style="color:salmon;">m</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">d</span>ra<span style="color:salmon;">g</span><span style="color:salmon;">g</span>ing my cravings<span style="color:salmon;">.</span> I<span style="color:salmon;"> </span><span style="color:salmon;">h</span><span style="color:salmon;">a</span>ve been <span style="color:salmon;">d</span>ra<span style="color:salmon;">g</span><span style="color:salmon;">g</span>ing them all the time. And now<span style="color:salmon;">,</span> I <br><br>can’t stop____ thinking about smoking! What am I supposed to do?” Well, before I tell yo<br>can’t stop<span style="color:salmon;">p</span><span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> thinking about smoking<span style="color:salmon;">.</span> What am I suppose<span style="color:salmon;">_</span> to do?” Well, <span style="color:salmon;">i</span><span style="color:salmon;">_</span>f<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> I tell yo<br><br>u_ my answer, let’’s look behind the scenes. Now_, what was probably going on here was t<br>u<span style="color:salmon;">,</span> my answer, let’<span style="color:salmon;">_</span>s look behind the s<span style="color:salmon;">i</span><span style="color:salmon;">t</span><span style="color:salmon;">_</span>es. <span style="color:salmon;">W</span><span style="color:salmon;">e</span><span style="color:salmon;">l</span><span style="color:salmon;">l</span>, what<span style="color:salmon;">‘</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>s probably going on here was t<br><br>hat Jane was having cravings all along, and like a lot of us, she was living on autopilo<br>hat Jane was having craving<span style="color:salmon;">_</span> all alon<span style="color:salmon;">e</span><span style="color:salmon;">.</span> And like a lot of us, she <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>liv<span style="color:salmon;">e</span><span style="color:salmon;">s</span><span style="color:salmon;">_</span> on autop<span style="color:salmon;">a</span>l<span style="color:salmon;">e</span><br><br>t__. You wake up in the morning, you smoke a cigarette, you have a cup of coffee, you sm<br>t<span style="color:salmon;">o</span><span style="color:salmon;">r</span>. You wake up in the morning, <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>smoke a cigarette, you have a cup of coffee, you sm<br><br>oke a cigarette, you get in t___he car, you smoke a cigarette. We’<em>re often just not awa<br>oke a cigarette, you get in t<span style="color:salmon;">o</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span>he car, you smoke a cigarette. We<span style="color:salmon;"> </span><span style="color:salmon;">a</span>re often just not awa<br><br>re of what we think, what we feel before we act. So, my answer to Jane was to be willing<br>re <span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>what we think<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>before we act. So, <span style="color:salmon;">I</span><span style="color:salmon;">_</span> answer to Jane was to be willing<br><br>, and one of the ways I showed her to do that was wi_th an_ exercise called_ “I am havin<br><span style="color:salmon;">.</span> And one of the way<span style="color:salmon;">_</span> I show<span style="color:salmon;">_</span><span style="color:salmon;">_</span> her to do that was w<span style="color:salmon;">h</span><span style="color:salmon;">a</span>t<span style="color:salmon;">_</span> <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">e</span> exercise called<span style="color:salmon;">,</span> <span style="color:salmon;">_</span>I am havin<br><br>g the thought”. So, one of Jane’s thoughts_ before she had a cigarette was, “I’m feeling<br>g the thought<span style="color:salmon;">_</span>. So, one of Jane<span style="color:salmon;">_</span><span style="color:salmon;">_</span> thoughts<span style="color:salmon;">,</span> before <span style="color:salmon;">_</span>he had <span style="color:salmon;">_</span><span style="color:salmon;">_</span>cigarette was, <span style="color:salmon;">_</span>I<span style="color:salmon;">_</span><span style="color:salmon;">_</span> f<span style="color:salmon;">i</span><span style="color:salmon;">l</span>l<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><br><br> a lot of stress right <em>now, I really need a cigarette.” So</em> I asked her to add the_ phr<br> a lot of stress <span style="color:salmon;">I</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">k</span>now, I really need a cigarette.<span style="color:salmon;">_</span> So<span style="color:salmon;">,</span> I ask<span style="color:salmon;">_</span><span style="color:salmon;">_</span> he<span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>a<span style="color:salmon;">f</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t<span style="color:salmon;">_</span>e<span style="color:salmon;">r</span> <span style="color:salmon;">f</span><span style="color:salmon;">_</span>r<br><br>as_e_ “I’m having the thought” like this. “I’m having the thought that I’m feeling a lot<br><span style="color:salmon;">e</span><span style="color:salmon;">e</span><span style="color:salmon;">z</span>e<span style="color:salmon;">,</span> <span style="color:salmon;">_</span>I’m having the thought<span style="color:salmon;">,</span> like this. <span style="color:salmon;">_</span>I’m having the thought that I’m feeling <span style="color:salmon;">_</span><span style="color:salmon;">_</span>lot<br><br><em>_ of stress right now I really need a cigarette.” Then</em> I asked_ her to add the_ phrase<br><span style="color:salmon;">‘</span><span style="color:salmon;">s</span> of stress <span style="color:salmon;">d</span><span style="color:salmon;">o</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>n<span style="color:salmon;">e</span><span style="color:salmon;">,</span> I really need a cigarette.<span style="color:salmon;">_</span> Th<span style="color:salmon;">a</span>n<span style="color:salmon;">,</span> I ask<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span> her <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>a<span style="color:salmon;">n</span><span style="color:salmon;">o</span><span style="color:salmon;">_</span>the<span style="color:salmon;">r</span> phrase<br><br>_ “I’m noticing___ I’m having the thought,” so_ “I’m noticing that I’m having the though<br><span style="color:salmon;">,</span> <span style="color:salmon;">_</span>I<span style="color:salmon;">_</span><span style="color:salmon;">_</span> notic<span style="color:salmon;">e</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">a</span><span style="color:salmon;">t</span> I<span style="color:salmon;">_</span><span style="color:salmon;">_</span> hav<span style="color:salmon;">e</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> the thought<span style="color:salmon;">.</span><span style="color:salmon;">_</span> So<span style="color:salmon;">,</span> <span style="color:salmon;">_</span>I’m noticing that I’m having the though<br><br>t_ that I’m feeling a lot__ of stress right now, I really need a cigarette.” Now, we can<br>t<span style="color:salmon;">,</span> th<span style="color:salmon;">e</span><span style="color:salmon;">n</span> I<span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">h</span><span style="color:salmon;">a</span><span style="color:salmon;">v</span><span style="color:salmon;">_</span>ing <span style="color:salmon;">_</span><span style="color:salmon;">_</span>lot<span style="color:salmon;">‘</span><span style="color:salmon;">s</span> of stress <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>now, I really need a cigarette.<span style="color:salmon;">_</span> Now, we can<br><br> all do an exercise like this when we have any kind of negative thought. Like for my tho<br> all do an exercise like this when we have any kind of negative thought<span style="color:salmon;">,</span> like for my tho<br><br>ught_ that “I’m boring all of you with my talk”<strong>_ and_ I’m having the thought that I’m<br>ught<span style="color:salmon;">,</span> that <span style="color:salmon;">_</span>I’m boring all of you <span style="color:salmon;">b</span><span style="color:salmon;">y</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> my talk<span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span><span style="color:salmon;">.</span> And<span style="color:salmon;">,</span> I’m having the thought that I’m <br><br>boring all of you with my talk. So, what this exercise did is it gave me a little bit of<br>boring all of you with my talk. So, what th<span style="color:salmon;">e</span><span style="color:salmon;">_</span> exercise did is <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>g<span style="color:salmon;">i</span>ve me a little bit <span style="color:salmon;">_</span><span style="color:salmon;">_</span><br><br> space between me and my thoughts. And it’s in that</strong> space_ that I can choose not to ru<br><span style="color:salmon;">_</span>space between me and my thoughts. And it’s in that<span style="color:salmon;">‘</span><span style="color:salmon;">s</span> space<span style="color:salmon;">,</span> that I can cho<span style="color:salmon;">i</span><span style="color:salmon;">c</span>e not to ru<br><br>n of___f the stage in front of 1,500 people. And the fact is_ we don’t act on every thou<br>n o<span style="color:salmon;">u</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">o</span>f the stage <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>fro<span style="color:salmon;">m</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>500 people. And the fact is<span style="color:salmon;">,</span> we don’t act on every thou<br><br>ght_ we have, because if we did, we’d all be in a whole <strong>lot of trouble. So, this was h<br>ght<span style="color:salmon;">s</span> we ha<span style="color:salmon;">d</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> because if we did, we<span style="color:salmon;">_</span><span style="color:salmon;">_</span> all be in <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>h<span style="color:salmon;">a</span>l<span style="color:salmon;">l</span> <span style="color:salmon;">a</span><span style="color:salmon;"> </span>lot of trouble. So, this was h<br><br>elpful to Jane, but there was something else_ that was really difficult for Jane. __</strong>I<br>elpful to Jane<span style="color:salmon;">.</span> But there was something else<span style="color:salmon;">,</span> that was really difficult for Jane<span style="color:salmon;">,</span> <span style="color:salmon;">a</span><span style="color:salmon;">n</span><span style="color:salmon;">d</span><span style="color:salmon;"> </span>I <br><br>fe_lt a lot__ of compassion f_or_ her_ about it. That was the judgment that she fe_lt fr<br>fe<span style="color:salmon;">e</span>l<span style="color:salmon;">_</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span>lot<span style="color:salmon;">‘</span><span style="color:salmon;">s</span> of compassion <span style="color:salmon;">a</span><span style="color:salmon;">b</span>o<span style="color:salmon;">u</span><span style="color:salmon;">t</span> her<span style="color:salmon;">.</span> A<span style="color:salmon;">n</span><span style="color:salmon;">d</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <span style="color:salmon;">_</span>t<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>hat was the judgment that she fe<span style="color:salmon;">e</span>l<span style="color:salmon;">_</span> fr<br><br>om people when she would be outside smoking a <strong>____</strong>cigarette. The__ criticism from he<br>om people when she would be outside smoking a <span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;">t</span><span style="color:salmon;">s</span><span style="color:salmon;">i</span><span style="color:salmon;">d</span><span style="color:salmon;">e</span><span style="color:salmon;"> </span>cigarette. The<span style="color:salmon;">r</span><span style="color:salmon;">e</span> criticism from he<br><br>r husband for being a smoker, and the self-loathing that she developed about smoking. An<br>r husband for be<span style="color:salmon;">e</span>n<span style="color:salmon;">_</span> a smoker, and the self-loa<span style="color:salmon;">d</span><span style="color:salmon;">_</span>ing that she developed about smoking<span style="color:salmon;">,</span> an<br><br>d she dealt with this shame_ by having a cigarette, which gave her reli_ef temporarily u<br>d she dealt with <span style="color:salmon;">a</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>s<span style="color:salmon;">_</span><span style="color:salmon;">_</span>hame<span style="color:salmon;">,</span> by having a cigarette<span style="color:salmon;">_</span> which g<span style="color:salmon;">i</span>ve her reli<span style="color:salmon;">v</span>e<span style="color:salmon;">_</span> temporarily <span style="color:salmon;">i</span><br><br>ntil the shame came back. So, I said to Jane, “What would it be like if we tried to hono<br>nt<span style="color:salmon;">o</span><span style="color:salmon;">_</span> the shame came back. So, I said to Jane, <span style="color:salmon;">w</span><span style="color:salmon;">_</span>hat would <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>be like if we tried to hon<span style="color:salmon;">e</span><br><br>r this feeling of shame as part of the human experi_ence? If you had a close friend_ who<br>r this feel<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> of shame as part of <span style="color:salmon;">_</span>h<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>uman experi<span style="color:salmon;">m</span>en<span style="color:salmon;">t</span><span style="color:salmon;">.</span><span style="color:salmon;">_</span> If you had a close friend<span style="color:salmon;">,</span> who<br><br> i_s feeling <em>shame about smoking,” I said to Jane, “what would you offer t___his friend<br> <span style="color:salmon;">w</span><span style="color:salmon;">a</span>s feeling <span style="color:salmon;">a</span>shame about smoking,<span style="color:salmon;"></em></span> I said to Jane, <span style="color:salmon;">“</span>What would you offer t<span style="color:salmon;">o</span><span style="color:salmon;"> </span><span style="color:salmon;">t</span>his friend<br><br> as words of caring and_ kindness, and could you then_ offer those words to yourself, Ja<br> as words of caring <span style="color:salmon;">v</span><span style="color:salmon;">e</span><span style="color:salmon;">r</span><span style="color:salmon;">y</span> kindness<span style="color:salmon;">?</span> And could you then<span style="color:salmon;">,</span> offer those words to yourself<span style="color:salmon;">_</span> Ja<br><br>ne?” And she looked up, and she had this look of this temporary respite from the shame,<br>ne<span style="color:salmon;">.</span>“ And she looked up, and she had this look of this temporary respite from the shame<span style="color:salmon;">_</span> <br><br>which made it just a little bit easier <strong><em>next time</em> not to act on_ the craving. <em>So, he<br>which made <span style="color:salmon;"></em></span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>just a little bit easier <span style="color:salmon;">t</span><span style="color:salmon;">o</span><span style="color:salmon;"> </span>next time<span style="color:salmon;">,</span> not <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>act<span style="color:salmon;">i</span><span style="color:salmon;">_</span>n<span style="color:salmon;">g</span> t<span style="color:salmon;">o</span><span style="color:salmon;">_</span> craving. <span style="color:salmon;"> </span>So, he<br><br>re is the secret to_ self-control: the secret to_ self-control is to give up control. Be<br>re is the secret <span style="color:salmon;">_</span>o<span style="color:salmon;">f</span> self<span style="color:salmon;"> </span>control<span style="color:salmon;">.</span> The secret <span style="color:salmon;">_</span>o<span style="color:salmon;">f</span> self<span style="color:salmon;"> </span>control is to give up control. Be<br><br>cause otherwise, we get into a tu_g-</strong>of-war with a monster, a craving monster. And the<br>cause otherwise, we get into a t<span style="color:salmon;">a</span><span style="color:salmon;">r</span>g<span style="color:salmon;">e</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span>of<span style="color:salmon;"> </span>war with a monster, a craving monster. And <span style="color:salmon;">a</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> <br><br>craving monster say_s, “Come on, smoke a cigarette. Come on, have that cookie. Come on!”<br>craving monster sa<span style="color:salmon;">i</span><span style="color:salmon;">d</span>s, “Com<span style="color:salmon;">m</span><span style="color:salmon;">_</span>on, smoke a cigarette<span style="color:salmon;">;</span> com<span style="color:salmon;">m</span><span style="color:salmon;">_</span>on, have that cookie<span style="color:salmon;">;</span> Com<span style="color:salmon;">m</span><span style="color:salmon;">_</span>on!”<br><br> And you’<em>re on the other side saying, “No</em> craving monster, I’m going to distract mysel<br> And you<span style="color:salmon;"> </span><span style="color:salmon;">a</span>re on the other side say<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>, “No<span style="color:salmon;">,</span> craving monster, I’m go<span style="color:salmon;">n</span>n<span style="color:salmon;">a</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>distract <span style="color:salmon;">b</span>y<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><br><br>f from you, I’<em>m going to ignore you, no, no, no, no.” And the craving monster says, “No<br><span style="color:salmon;"></em></span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>you<span style="color:salmon;">;</span> I<span style="color:salmon;"> </span><span style="color:salmon;">a</span>m <span style="color:salmon;">_</span><span style="color:salmon;">_</span>i<span style="color:salmon;">_</span>g<span style="color:salmon;">n</span><span style="color:salmon;">_</span>o<span style="color:salmon;">r</span>i<span style="color:salmon;">_</span>n<span style="color:salmon;">g</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> you, no<span style="color:salmon;">_</span> no<span style="color:salmon;">_</span> no<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>“ And the craving monster says, “<span style="color:salmon;">Y</span><span style="color:salmon;">e</span><br><br><strong>, ___</strong>no_, come on, you know_ you want it!” And you’re just back here and you’<em>re goi<br><span style="color:salmon;">a</span><span style="color:salmon;">h</span>, <span style="color:salmon;">y</span><span style="color:salmon;">o</span><span style="color:salmon;">u</span><span style="color:salmon;"> </span><span style="color:salmon;">k</span>no<span style="color:salmon;">w</span>, com<span style="color:salmon;">m</span><span style="color:salmon;"></em></span>on, you know<span style="color:salmon;">,</span> you want it<span style="color:salmon;">.</span>“ And you<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> just back here<span style="color:salmon;">,</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> you<span style="color:salmon;"> </span><span style="color:salmon;">a</span>re goi<br><br>ng back and forth and back and forth_ and pretty soon_ the craving monster over_powers y<br>ng back and forth and back and forth<span style="color:salmon;">,</span> and pretty soon<span style="color:salmon;">,</span> the craving monster over<span style="color:salmon;"> </span>powers y<br><br>ou — you have that cookie_, you have that cigarette, until the craving monster comes bac<br>ou<span style="color:salmon;">,</span><span style="color:salmon;">_</span> you have th<span style="color:salmon;">e</span><span style="color:salmon;">_</span> cookie<span style="color:salmon;">s</span>, you have that cigarette<span style="color:salmon;">_</span> until the craving monster come<span style="color:salmon;">_</span> bac<br><br>k. And then you’<em>re in the tu_g-of-war</em> <strong>__</strong>again_ doing what we’ve learned how to do.<br>k. And <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>you<span style="color:salmon;"> </span><span style="color:salmon;">a</span>re <span style="color:salmon;">o</span>n the t<span style="color:salmon;">a</span><span style="color:salmon;">r</span>g<span style="color:salmon;">e</span><span style="color:salmon;">t</span><span style="color:salmon;"> </span><span style="color:salmon;">_</span>w<span style="color:salmon;">o</span>r<span style="color:salmon;">d</span> <span style="color:salmon;">d</span><span style="color:salmon;">o</span><span style="color:salmon;">i</span><span style="color:salmon;">n</span><span style="color:salmon;">g</span><span style="color:salmon;"> </span>again<span style="color:salmon;">.</span> Doing what we<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> learned how to do.<br><br> Un_less - un_less_ you drop the rope. And what you discover__ is that if you just allow<br> <span style="color:salmon;">I</span>n<span style="color:salmon;"> </span>l<span style="color:salmon;">a</span>s<span style="color:salmon;">t</span><span style="color:salmon;">,</span><span style="color:salmon;">_</span> <span style="color:salmon;">i</span>n<span style="color:salmon;"> </span>l<span style="color:salmon;">a</span>s<span style="color:salmon;">t</span><span style="color:salmon;">,</span> you drop the rope. And wh<span style="color:salmon;">e</span><span style="color:salmon;">n</span> you discover<span style="color:salmon;">e</span><span style="color:salmon;">d</span> is <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>if you just allow<br><br> the monster to be, to occupy a space in your body, you discover in a few minutes that t<br> the monster to be, to occupy a space in your body, you discover <span style="color:salmon;">t</span><span style="color:salmon;">h</span><span style="color:salmon;">_</span>a<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>t<span style="color:salmon;">_</span><span style="color:salmon;">_</span> that t<br><br>he craving monster is not as threatening as he appears. And some_times, he even goes awa<br>he craving monster is not as threatening as <span style="color:salmon;">i</span><span style="color:salmon;">t</span> appears. And some<span style="color:salmon;"> </span>times, <span style="color:salmon;">i</span><span style="color:salmon;">t</span> even goes awa<br><br>y. As we break for lunch, we’re going to have choices of what to eat. When you see them,<br>y. As we break for lunch, we<span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span> go<span style="color:salmon;">n</span>n<span style="color:salmon;">a</span> <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>have choices <span style="color:salmon;">_</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>what to eat. When you see them,<br><br> try to be aware of the cravings in your body, try to be willing to have those cravings.<br> try to be aware of the crav<span style="color:salmon;">e</span><span style="color:salmon;">_</span><span style="color:salmon;">_</span>s in your body<span style="color:salmon;">.</span> Try to be willing to have th<span style="color:salmon;">i</span>s<span style="color:salmon;">_</span> craving<span style="color:salmon;">,</span><span style="color:salmon;">_</span><br><br> See if they pass__ on their_ own. W____hatever choice_ you make, try to bring a spirit_<br> see if they pass<span style="color:salmon;">e</span><span style="color:salmon;">d</span> on the<span style="color:salmon;">_</span>r<span style="color:salmon;">e</span> own. <span style="color:salmon;">A</span><span style="color:salmon;">n</span><span style="color:salmon;">d</span><span style="color:salmon;"> </span><span style="color:salmon;">w</span>hatever choice<span style="color:salmon;">s</span> you ma<span style="color:salmon;">d</span>e, try to bring a spirit<span style="color:salmon;">e</span><br><br>_ of caring and kindness to yourself, for that is the mountain that we are all climbing.<br><span style="color:salmon;">d</span> of caring and kindness to yourself, for that is the mountain that we are all climbing.<br></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>English Vocabulary Substituted for Writing</title>
      <link href="/LearnNotes/Eng_w.html"/>
      <url>/LearnNotes/Eng_w.html</url>
      
        <content type="html"><![CDATA[<h1 id="English-Vocabulary-Substituted-for-Writing"><a href="#English-Vocabulary-Substituted-for-Writing" class="headerlink" title="English Vocabulary Substituted for Writing"></a>English Vocabulary Substituted for Writing</h1><p>欢迎评论，或者补充～<br>评论不了可以B站私信我: <a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p><table><thead><tr><th>Word</th><th>Word2</th><th>Property</th><th>Trans</th></tr></thead><tbody><tr><td>Ambition</td><td>aspiration</td><td>n.</td><td>抱負</td></tr><tr><td>Anger</td><td>Pique</td><td>n.</td><td></td></tr><tr><td><strong>Avoid</strong></td><td>circumvent</td><td>v.</td><td></td></tr><tr><td>body</td><td>corpse</td><td>n.</td><td>尸体</td></tr><tr><td>Believe</td><td>creed, doctrine</td><td>n.</td><td>(<s>刺客</s>信条)</td></tr><tr><td>Cafeteria</td><td>canteen</td><td>n.</td><td>食堂</td></tr><tr><td>Cheat</td><td>coax, procure</td><td>v., n.</td><td>哄骗，诱劝</td></tr><tr><td><strong>Clean</strong></td><td>neat; <em>neatly</em></td><td>n.</td><td>干净</td></tr><tr><td>Conquer</td><td>subjugate</td><td>v.</td><td></td></tr><tr><td>Drink</td><td>imbibe</td><td>v.</td><td></td></tr><tr><td>Force</td><td>compulsory, oblige</td><td>v.</td><td>强迫做…</td></tr><tr><td>Forward-looking</td><td>insightful, longsighted, provident, visionary</td><td>adj.</td><td>有远见的</td></tr><tr><td>Game</td><td>contest, competition, match</td><td>n.</td><td>比赛</td></tr><tr><td><strong>Garbage</strong></td><td>detritus</td><td>n.</td><td>垃圾</td></tr><tr><td><strong>Glass land</strong></td><td>prairie, steppe</td><td>n.</td><td>(大)草地</td></tr><tr><td>Grades</td><td>tally</td><td>n.</td><td>(游戏 等)积分</td></tr><tr><td>Group</td><td>party, faction, school</td><td></td><td></td></tr><tr><td>Interrupt</td><td>interject</td><td>v.</td><td>打断</td></tr><tr><td>Native</td><td>idiomatic</td><td>adj.</td><td>地道的，地方特色的(语言)</td></tr><tr><td><strong>Possible</strong></td><td>feasible, practicable, achievable, reasonable</td><td></td><td></td></tr><tr><td>Quiet</td><td>serene, tranquil, peaceful, quiescent</td><td>adj.</td><td></td></tr><tr><td>Quickly; shortly</td><td>evanescent; ephemeral</td><td>adj.</td><td>转瞬即逝</td></tr><tr><td>Ranch</td><td>pasture, farm, rancho</td><td>n.</td><td></td></tr><tr><td>Ratify</td><td>authorize</td><td>v.</td><td></td></tr><tr><td>Run into</td><td>scurry off to</td><td></td><td>快走(跑)到</td></tr><tr><td>Remember</td><td>recite, regurgitate, rote</td><td>v.</td><td>照搬背诵</td></tr><tr><td><strong>Out going</strong></td><td>gregarious</td><td>adj.</td><td></td></tr><tr><td>Sad</td><td>dismal</td><td>adj., n.</td><td></td></tr><tr><td>Salty</td><td>briny</td><td>adj.</td><td>多盐的</td></tr><tr><td>Separate steps</td><td>discrete steps</td><td></td><td>分开(各自)步骤</td></tr><tr><td><strong>Search</strong></td><td>scour, hunt, quest</td><td>v.</td><td>搜寻 (scouring the woods for a kid)</td></tr><tr><td><strong>Should</strong></td><td>ought</td><td>auxv.</td><td>本应该 (2You ought to work hard)</td></tr><tr><td><strong>Similar to</strong></td><td>akin to</td><td></td><td>和 … 一样</td></tr><tr><td><strong>Slim</strong></td><td>slender</td><td>adj.</td><td></td></tr><tr><td>Tell</td><td>impart, communicate, inform, convey</td><td>v.</td><td>告知，传授</td></tr><tr><td><strong>Totally</strong></td><td>utterly, completely, absolutely, extremely, entirely</td><td>adv.</td><td></td></tr><tr><td>Waste</td><td>squander</td><td>n.</td><td></td></tr><tr><td>Wine</td><td>dram, Whisky,</td><td>n.</td><td></td></tr></tbody></table><hr><p>hillbilly: (侮辱)乡下人</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili: <a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>高考笔记整理</title>
      <link href="/LearnNotes/GKNotes.html"/>
      <url>/LearnNotes/GKNotes.html</url>
      
        <content type="html"><![CDATA[<h1 id="网上高考笔记搜罗-大家加油！！"><a href="#网上高考笔记搜罗-大家加油！！" class="headerlink" title="网上高考笔记搜罗: 大家加油！！"></a>网上高考笔记搜罗: 大家加油！！</h1><p><span style="color:#809ebc"><em>本文为我突发奇想的简单搜索整理而成。结果质量参差不齐。为了给大家更好的参考，我在链接后， 加上了发表时间， 阅读和下载次数(如果有的话)，希望能够帮助大家。 如果大家有自己的笔记，或者别的链接，欢迎在评论处留言， 我会认真对待， 酌情更新。如果评论区失效（网络问题或者没有github账号）， 也可以私信我的B站账号: <a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></em></span></p><h1 id="专栏"><a href="#专栏" class="headerlink" title="专栏"></a>专栏</h1><ul><li><p><a href="https://zhuanlan.zhihu.com/c_1022451416727568384" target="_blank" rel="noopener">高中生学习分享写文章 知乎</a><br>资料超多， 但是没有分类整理。可以自行参考</p></li><li><p><a href="https://www.xuexifangfa.com/" target="_blank" rel="noopener">学习方法网</a><br>各个阶段都有， 值得了解</p></li><li><p><a href="http://www.gaokao.com/" target="_blank" rel="noopener">高考网</a><br>超多试卷， 随心下载</p></li><li><p><a href="https://www.koolearn.com/" target="_blank" rel="noopener">新东方在线</a><br>新东方旗下的学习网站</p></li></ul><h1 id="数学"><a href="#数学" class="headerlink" title="数学"></a>数学</h1><ul><li>高中数学笔记(自己整理)!!! – <strong>百度文库</strong><br><a href="https://wenku.baidu.com/view/15ab47bb7e21af45b207a8c5.html" target="_blank" rel="noopener">1巫1 2016</a><br><span style="color:salmon"><em>21981阅读; 244下载; 63页</em></span></li></ul><h1 id="英语"><a href="#英语" class="headerlink" title="英语"></a>英语</h1><ul><li>高中英语语法大全 最新整理 – <strong>学习方法网</strong><br><a href="https://www.xuexifangfa.com/English/1038857.html" target="_blank" rel="noopener">学习方法网 2018</a><br><span style="color:salmon"><em>来源:网络综合 | 作者:佚名 | 本文已影响 3026 人</em></span></li><li>历年阅读理解题目 – <strong>新东方在线</strong><br><a href="https://news.koolearn.com/20180518/1150496.html" target="_blank" rel="noopener">新东方在线 2016~2018</a><br><span style="color:salmon"><em>66套</em></span></li></ul><h1 id="物理"><a href="#物理" class="headerlink" title="物理"></a>物理</h1><ul><li>133页高中物理笔记（高清版），没有最全！建议高中生收藏，打印，家长转给孩子 – <strong>知乎</strong><br><a href="https://zhuanlan.zhihu.com/p/74825385" target="_blank" rel="noopener">高中生学习分享写文章 2019</a><br><span style="color:salmon"><em>多图手写，好像不全</em></span></li></ul><h1 id="化学"><a href="#化学" class="headerlink" title="化学"></a>化学</h1><ul><li>高中化学重要知识点详细总结全套笔记 – <strong>学习方法网</strong><br><a href="https://www.xuexifangfa.com/chemistry/points/1037515.html" target="_blank" rel="noopener">学习方法网</a><br><span style="color:salmon"><em>来源:网络综合 | 作者:佚名</em></span></li></ul><h1 id="生物"><a href="#生物" class="headerlink" title="生物"></a>生物</h1><ul><li>高考生物备考笔记(完整版) – <strong>百度文库</strong><br><a href="https://wenku.baidu.com/view/d8bb3e9a7d1cfad6195f312b3169a4517723e591.html" target="_blank" rel="noopener">h377683120的店 2018</a><br> <span style="color:salmon"><em>692阅读; 1下载(30元); 84页</em></span></li></ul><h1 id="政治"><a href="#政治" class="headerlink" title="政治"></a>政治</h1><ul><li>高考政治备考笔记(全) – <strong>百度文库</strong><br><a href="https://wenku.baidu.com/view/9df25872872458fb770bf78a6529647d27283432.html?fr=search" target="_blank" rel="noopener">安普合 2020</a><br><span style="color:salmon"><em>29阅读; 3下载; 49页</em></span></li></ul><h1 id="地理"><a href="#地理" class="headerlink" title="地理"></a>地理</h1><ul><li>高中地理全套笔记 – <strong>百度文库</strong><br><a href="https://wenku.baidu.com/view/59d737670522192e453610661ed9ad51f11d5451.html?fr=search" target="_blank" rel="noopener">知识天空的店 2020</a><br><span style="color:salmon"><em>48阅读; 2下载(5元); 101页</em></span></li></ul><h1 id="历史"><a href="#历史" class="headerlink" title="历史"></a>历史</h1><ul><li>高中历史全套笔记 – <strong>百度文库</strong><br><a href="https://wenku.baidu.com/view/1942cfb080c758f5f61fb7360b4c2e3f572725a3.html" target="_blank" rel="noopener">才情数学人 2018</a><br><span style="color:salmon"><em>4935阅读; 277下载(1元); 288页</em></span></li></ul><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili：<a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Black soldier fly larvae meal can replace fish meal in diets of sea-water phase Atlantic salmon (Salmo salar)</title>
      <link href="/LearnNotes/Paper_BSFlylavea_salmon_2019.html"/>
      <url>/LearnNotes/Paper_BSFlylavea_salmon_2019.html</url>
      
        <content type="html"><![CDATA[<h1 id="Black-soldier-fly-larvae-meal-can-replace-fish-meal-in-diets-of-sea-water-phase-Atlantic-salmon-Salmo-salar"><a href="#Black-soldier-fly-larvae-meal-can-replace-fish-meal-in-diets-of-sea-water-phase-Atlantic-salmon-Salmo-salar" class="headerlink" title="Black soldier fly larvae meal can replace fish meal in diets of sea-water phase Atlantic salmon (Salmo salar)"></a>Black soldier fly larvae meal can replace fish meal in diets of sea-water phase Atlantic salmon (Salmo salar)</h1><p>Cite: Belghit, Ikram, et al. “Black soldier fly larvae meal can replace fish meal in diets of sea-water phase Atlantic salmon (Salmo salar).” Aquaculture (2019): 609-619.</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><ul><li>black soldier fly larvae (insect meal) replacing to fish meal</li><li>did not affect the apparent digestibility coefficients<br>(ADC) of protein, lipid, amino acids and fatty acids, or the digestive enzyme activities</li><li>Feed intake, daily growth increase, and feed conversion ratio were also unaffected</li><li>Whole body protein, lipid and amino acid composition were not affected</li><li>Liver lipid accumulation was not affected by replacing the fishmeal with insect meal</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><table><thead><tr><th>Category</th><th>Higher</th><th>Lower</th><th align="center">Normal</th><th>Notes</th></tr></thead><tbody><tr><td><strong>Dietary composition</strong></td><td>- LC-HUFAs eicosapentaenoic acid (20:5n-3, EPA)<br>- docosahexaenoic acid (22:6n-3, DHA)<br>- total n-3 fatty acids</td><td>- n-6 fatty acid<br>- essential AA</td><td align="center"></td><td></td></tr><tr><td><strong>Groth performance and somatic index</strong></td><td>- tripled their weight during <span style="background:salmon">the 114 day</span></td><td></td><td align="center">- no significant effects of IM inclusion <span style="background:salmon">on final weight</span></td><td></td></tr><tr><td><strong>Digestibility</strong></td><td></td><td></td><td align="center">- crude protein (n = 3)<br>- crude lipid (n = 3)<br>- amino acids (n = 3)<br>- fatty acids (n = 3)<br>- brush boarder enzyme leucine aminopeptidase (n = 18)<br>- trypsin activity (n = 3)<br>- total bile acids level (n = 3)</td><td></td></tr><tr><td><strong>Fish composition</strong></td><td>- lauric acid<br>- EPA<br>- DHA</td><td></td><td align="center">- dry matter<br>- crude protein<br>- crude lipid<br>- amino acid composition<br>- ARA<br>- PUFA<br>- stearidonic acid</td><td></td></tr><tr><td><strong>Plasma</strong></td><td>- Glu (n = 18)</td><td>- AST (n = 18)</td><td align="center">- Hg (n = 3)<br>- ALT (n = 3)<br>- FFA (n = 18)<br>- TAG (n = 18)<br>- Chol (n = 3)<br>- Tprot (n = 3)<br>- Na+ (n = 18)</td><td></td></tr><tr><td><strong>liver lipid storage</strong></td><td></td><td></td><td align="center">- the size distribution</td><td></td></tr><tr><td><strong>Sensory</strong></td><td>- rancid odor<br>- off-odor<br>- rancid flavor of the baked fillet<br>- moisture release</td><td>- color intensity of the cooked salmon</td><td align="center">- pleasant odor<br>- flavor differences<br>- color scores of raw salmon</td><td>- softer in raw but opposite in baked</td></tr></tbody></table><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><p><strong>Sea-Water Phase Atlantic Salmon</strong></p><ul><li>no negatively affect feed intake</li><li>growth performance</li><li>nutrient utilization</li></ul><p>Similarly results in diet Substituted on blackspot sea bream (Lates calcarifer):</p><ul><li>yellow mealworm (Tenebrio molitor)</li><li>housefly maggot (Musca domestica)</li></ul><p><strong>However</strong>, <strong>reduced growth</strong> and feed <strong>utilization</strong> has been reported in <strong>juvenile turbot</strong> and <strong>rainbow trout</strong> (Author: Caused by chitin?)<br>(chitin can decrease the FA synthesis and to increase TAG hydrolysis in rat liver)</p><p>Salmonids fed diets containing BSF larvae raised on fish offal or seaweeds grew better than fish fed dietary BSF larvae raised without marine nutrients.</p><p>Low level of lysine in the insect-based diet had no effect on <strong>European seabass</strong>.</p><p>low level of taurine may effact the lipid deposition of the liver but we didn’t detected it. (hepatosomatic index)</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/LearnNotes/index.html"/>
      <url>/LearnNotes/index.html</url>
      
        <content type="html"><![CDATA[<ul><li><h1 id="Apps"><a href="#Apps" class="headerlink" title="Apps"></a>Apps</h1><ul><li><a href="SF_Xmind.html">Xmind</a><h1 id="English-Sentences"><a href="#English-Sentences" class="headerlink" title="English Sentences"></a><a href="Eng.html">English Sentences</a></h1><h1 id="English-Vocabulary"><a href="#English-Vocabulary" class="headerlink" title="English Vocabulary"></a><a href="Eng_w.html">English Vocabulary</a></h1></li></ul></li><li><h1 id="Books-Reading-Notes"><a href="#Books-Reading-Notes" class="headerlink" title="Books (Reading Notes)"></a>Books (Reading Notes)</h1><ul><li><a href="DNA_Is_NotDestiny.html">DNA is Not Destiny</a></li></ul></li><li><h1 id="Ted-practice"><a href="#Ted-practice" class="headerlink" title="Ted practice"></a>Ted practice</h1><ul><li><h2 id="Subtitle"><a href="#Subtitle" class="headerlink" title="Subtitle"></a>Subtitle</h2><ul><li><a href="Ted2-Selfdecipline_T.html">Ted2-Selfdecipline_T</a></li></ul></li><li><h2 id="Talks"><a href="#Talks" class="headerlink" title="Talks"></a>Talks</h2><ul><li><a href="Four-Billion-years-of-evolution-in-six-minutes.html">Four Billion years of evolution in six minutes</a></li><li><a href="Ted2-Selfdecipline.html">The secret to self control, Jonathan Bricker</a></li></ul></li></ul></li><li><h1 id="Physics"><a href="#Physics" class="headerlink" title="Physics"></a>Physics</h1><ul><li><a href="Super-Conductor.html">Super Conductor – Scientific American</a></li><li><h2 id="Quantum-Physics"><a href="#Quantum-Physics" class="headerlink" title="Quantum Physics"></a>Quantum Physics</h2><ul><li><a href="Ted-Phy1.html">Ted-Phy1</a></li><li><a href="Ted-Phy1_2.html">Ted-Phy1_2</a></li></ul></li></ul></li><li><h1 id="Bio"><a href="#Bio" class="headerlink" title="Bio"></a>Bio</h1><ul><li><h2 id="Zoology"><a href="#Zoology" class="headerlink" title="Zoology"></a>Zoology</h2><ul><li><a href="Fish_dygestion.html">Fish_dygestion</a></li></ul></li><li><h2 id="Disease"><a href="#Disease" class="headerlink" title="Disease"></a>Disease</h2><ul><li><a href="diabetes.html">糖尿病</a></li></ul></li></ul></li><li><h1 id="Paper-reading"><a href="#Paper-reading" class="headerlink" title="Paper reading"></a>Paper reading</h1><ul><li><h2 id="HOw-to-Write"><a href="#HOw-to-Write" class="headerlink" title="HOw to Write"></a>HOw to Write</h2><ul><li><h2 id="RNA-Seq"><a href="#RNA-Seq" class="headerlink" title="RNA-Seq"></a>RNA-Seq</h2><ul><li><a href="Paper_RNASeq_Fish1.html">Paper_RNASeq_Fish1</a></li><li><a href="Paper_RNASeq_Fish2.html">Paper_RNASeq_Fish2</a></li><li><a href="Paper_RNASeq_Fish3.html">Paper_RNASeq_Fish3</a></li><li><a href="Paper_RNASeq_Fish4.html">Paper_RNASeq_Fish4</a></li></ul></li></ul></li><li><h2 id="Reading-Notes"><a href="#Reading-Notes" class="headerlink" title="Reading Notes"></a>Reading Notes</h2><ul><li><h3 id="Metabolism"><a href="#Metabolism" class="headerlink" title="Metabolism"></a>Metabolism</h3><a href="Diet_Switch_Fish4.html">Diet_Switch_Fish4</a><br><a href="Paper_Charni2019.html">Paper_Charni2019</a><br><a href="Paper_Vilhelmsson2004.html">Paper_Vilhelmsson2004</a><br><a href="Paper_Yan2020.html">Paper_Yan2020</a><br><a href="WheatInhi.html">WheatInhi</a><br><a href="Paper_BSFlylavea_salmon_2019.html">Diet Switch|Fly Larvea|Salmon 2019</a></li><li><h3 id="Algorithm"><a href="#Algorithm" class="headerlink" title="Algorithm"></a>Algorithm</h3><ul><li><a href="paper_WGCNA.html">WGCNA</a></li></ul></li><li><h3 id="Genome"><a href="#Genome" class="headerlink" title="Genome"></a>Genome</h3><ul><li><a href="mtGenome.html">mtGenome</a></li></ul></li></ul></li><li><h1 id="高中高考笔记"><a href="#高中高考笔记" class="headerlink" title="高中高考笔记"></a>高中高考笔记</h1><ul><li><a href="GKNotes.html">来源: 网络</a></li></ul></li></ul></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Nutritional Wheat Amylase-Trypsin Inhibitors Promote Intestinal Inflammation via Activation of Myeloid Cells (Sparus aurata) in response to dietary fish meal replacement by plant protein sources</title>
      <link href="/LearnNotes/WheatInhi.html"/>
      <url>/LearnNotes/WheatInhi.html</url>
      
        <content type="html"><![CDATA[<h1 id="Nutritional-Wheat-Amylase-Trypsin-Inhibitors-Promote-Intestinal-Inflammation-via-Activation-of-Myeloid-Cells-Sparus-aurata-in-response-to-dietary-fish-meal-replacement-by-plant-protein-sources"><a href="#Nutritional-Wheat-Amylase-Trypsin-Inhibitors-Promote-Intestinal-Inflammation-via-Activation-of-Myeloid-Cells-Sparus-aurata-in-response-to-dietary-fish-meal-replacement-by-plant-protein-sources" class="headerlink" title="Nutritional Wheat Amylase-Trypsin Inhibitors Promote Intestinal Inflammation via Activation of Myeloid Cells (Sparus aurata) in response to dietary fish meal replacement by plant protein sources"></a>Nutritional Wheat Amylase-Trypsin Inhibitors Promote Intestinal Inflammation via Activation of Myeloid Cells (Sparus aurata) in response to dietary fish meal replacement by plant protein sources</h1><p>Cite: Zevallos, Victor F., et al. “Nutritional wheat amylase-trypsin inhibitors promote intestinal inflammation via activation of myeloid cells.” Gastroenterology 152.5 (2017): 1100-1113.</p><h1 id="General-Information"><a href="#General-Information" class="headerlink" title="General Information"></a>General Information</h1><p>##</p><h2 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h2><p><a href="#"><strong><em>Mice</em></strong></a>:<br><img src="http://woodstream.scene7.com/is/image/woodstream/hh_sba_mouse?$LearningPgLarge$" alt="img"><br>（图片转自 havahart.com，版权属于原作者）</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><h2 id="BG"><a href="#BG" class="headerlink" title="BG"></a>BG</h2><ol><li>Wheat amylase-trypsin inhibitors (ATIs)</li><li><em>ATIs</em> activation of the toll like receptor 4 (TLR4)</li></ol><h2 id="METHODS"><a href="#METHODS" class="headerlink" title="METHODS:"></a>METHODS:</h2><p>Feed to Mice</p><h2 id="RESULTS"><a href="#RESULTS" class="headerlink" title="RESULTS"></a>RESULTS</h2><p>CONCLUSIONS: Gluten-containing cereals have by far the highest concentrations of ATIs that activate TLR4. Orally ingested ATIs are largely resistant to proteases and heat, and increase intestinal inflammation by activating gut and mesenteric lymph node myeloid cells.</p><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><p>##P1: Plant protein substitution for economy</p><p>Shortcomings:</p><ul><li>high carbohydrate levels</li><li>isoflavones</li><li>low methionine levels</li><li>anti-nutritional factors</li></ul><p>They can:</p><ul><li>impede protein digestion</li><li>impair immune responses</li><li>intestinal inflammation.</li></ul><p>End: Yellow perch is one of the most sensitive species for this change.</p><h2 id="P2-Pancreas"><a href="#P2-Pancreas" class="headerlink" title="P2: Pancreas"></a>P2: Pancreas</h2><ol><li>Serine-protease (trypsin, chymotrypsin, elastase and collagenase)</li><li>Glucosidases<blockquote><ul><li>hydrolyze starch into lineal chains</li></ul></blockquote></li></ol><h2 id="P3-Our-purpose"><a href="#P3-Our-purpose" class="headerlink" title="P3: Our purpose"></a>P3: Our purpose</h2><ol><li>Protine and Carbohydrate digestion</li><li>histology</li></ol><h1 id="M-amp-M"><a href="#M-amp-M" class="headerlink" title="M&amp;M"></a>M&amp;M</h1><ul><li>Chemicals</li><li>Diets, animals and growth experiment</li><li>Post-parndial experiment and sampling</li><li>Preparation of extracts and determination of soluble protein</li><li>Enzyme assays</li><li>Zymograms: characterization of protease fractions and inhibition by PP diets</li><li>Proximal intestine histological analysis</li><li>Statistical analysis</li></ul><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><h2 id="Enzymes-activities"><a href="#Enzymes-activities" class="headerlink" title="Enzymes activities"></a>Enzymes activities</h2><h3 id="Alkaline-Protease"><a href="#Alkaline-Protease" class="headerlink" title="Alkaline Protease"></a>Alkaline Protease</h3><ul><li>Trout fed diets PP50 and PP75 showed only a slight post-feeding increase in this activity.</li><li>Sea bream fed the FM diet showed a maximum of 6.93±1.03 U protease·mg− 1 protein·min− 1. This value decreased gradually as the percentage of plant protein increased</li></ul><h3 id="Amylase"><a href="#Amylase" class="headerlink" title="Amylase"></a>Amylase</h3><p>a significant post-prandial increase in this activity was recorded only in PP75 and PP100 fed trout. Replacement of fish meal by plant protein did not induce significant changes in α-amylase activity in either species.<br><img src="https://s1.ax1x.com/2020/05/18/YfChcD.png" alt="YfChcD.png"></p><h2 id="Growth-Performance"><a href="#Growth-Performance" class="headerlink" title="Growth Performance"></a>Growth Performance</h2><p><a href="https://imgchr.com/i/YfPYKe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/18/YfPYKe.png" alt="YfPYKe.png"></a></p><h2 id="Intestine-Growth"><a href="#Intestine-Growth" class="headerlink" title="Intestine Growth"></a>Intestine Growth</h2><p><img src="https://s1.ax1x.com/2020/05/18/YfAsFs.png" alt="YfAsFs.png"></p><hr><h1 id="Related-Notes"><a href="#Related-Notes" class="headerlink" title="Related Notes:"></a>Related Notes:</h1><p><a href="paperrnaseqfish1">Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</a></p><p><a href="paperrnaseqfish2">De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</a></p><p><a href="paperrnaseqfish3">Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</a></p><p><a href="paperrnaseqfish4">Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Bioinfr: mtGenome</title>
      <link href="/LearnNotes/mtGenome.html"/>
      <url>/LearnNotes/mtGenome.html</url>
      
        <content type="html"><![CDATA[<h1 id="The-complete-mitochondrial-genome-of-Taxus-cuspidata-Taxaceae-eight-proteincoding-genes-have-transferred-to-the-nuclear-genome"><a href="#The-complete-mitochondrial-genome-of-Taxus-cuspidata-Taxaceae-eight-proteincoding-genes-have-transferred-to-the-nuclear-genome" class="headerlink" title="The complete mitochondrial genome of Taxus cuspidata (Taxaceae): eight proteincoding genes have transferred to the nuclear genome"></a>The complete mitochondrial genome of Taxus cuspidata (Taxaceae): eight proteincoding genes have transferred to the nuclear genome</h1><p align="center"><img src="https://media.springernature.com/full/springer-static/image/art%3A10.1186%2Fs12862-020-1582-1/MediaObjects/12862_2020_1582_Fig1_HTML.png?as=webp" style='height:450px'><p><a href="https://bmcevolbiol.biomedcentral.com/articles/10.1186/s12862-020-1582-1/figures/1" target="_blank" rel="noopener"><p align='center'><strong>© Kan et al. 2020</strong></p></a></p></p><p>cite: Kan, Sheng Long , et al. “The complete mitochondrial genome of Taxus cuspidata (Taxaceae): eight protein-coding genes have transferred to the nuclear genome.” Bmc Evolutionary Biology 20.1(2020).<br>Paper: <a href="https://bmcevolbiol.biomedcentral.com/articles/10.1186/s12862-020-1582-1#Fig1" target="_blank" rel="noopener">click here</a></p><span align='center'>  <p><img src="https://tse4-mm.cn.bing.net/th/id/OIP.xVEhIghrO01k7JKzwJFUhQAAAA?pid=Api&rs=1" alt="img"></p><p align='center'>© wikipedia</p></span><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p><strong>BG</strong>: there have lots of Gymnosperms species but only a few of species have sequenced mitochondrial genome.<br><strong>Result</strong>:</p><ol><li>Complete mitogenome of <em>Taxus cuspidate</em>;</li><li>It lost many genes  </li><li>Multiple tRNA and introns also have been lost  </li><li>gene cluster could be less conserved</li><li>Few RNA sites were identified and may responsible for fewer introns and frequent gene losses</li></ol><h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><ol><li>Compared to chloroplast, only few of mitochondria genomes are available.</li><li>Previous study on mitogenome revealed that <em>Cycans</em> and <em>Ginko</em> are represent the ancestral type of seed plants.</li><li>Size; substitution; numerous of genes; introns and RNA editing sites; genome structure; repeats; turnover rates, and foreign sequence ratios are the arguments for mtGenome Comparing.  </li><li>All other gymnosperms except Conifer II have mtGenome of  represented species.</li><li>There are some ambiguity in relationship between Conifer, Pianceae, and Gnetales.</li><li>Our experiment and data are every valuable for the world.</li></ol><h1 id="Methods"><a href="#Methods" class="headerlink" title="Methods"></a>Methods</h1><h2 id="Mitochodiral-DNA-isolation-total-RNA-extraction-sequencing-and-mitogenome-assembly-of-Taxus-cuspidata"><a href="#Mitochodiral-DNA-isolation-total-RNA-extraction-sequencing-and-mitogenome-assembly-of-Taxus-cuspidata" class="headerlink" title="Mitochodiral DNA isolation, total RNA extraction, sequencing and mitogenome assembly of Taxus cuspidata"></a>Mitochodiral DNA isolation, total RNA extraction, sequencing and mitogenome assembly of Taxus cuspidata</h2><pre class="mermaid">graph TD;st1(Yong leaves)Ch1[DNase I]op1(Density Gradient Centrifugation)Ch2(RNAplant Plus Reagent)st2(Yong seeds)et(RNA)lii(Illumina)Oxf(Oxford Nanopore)    st1-->op1;    Ch1 -->|Remove DNA|op1;    Ch2 --> st2;    Ch1 -->|Remove DNA|st2;    op1 -->et    st2 -->et    et -->|sequencing|lii    et -->|sequencing|Oxf</pre><h2 id="Oxford-Nanopore"><a href="#Oxford-Nanopore" class="headerlink" title="Oxford Nanopore"></a>Oxford Nanopore</h2><ol><li>First, approximately two micrograms of mitochondrial DNA was<br>sheared by using Megaruptor</li><li>approximately one microgram of mitochondrial DNA was sonicated to ~ 500 bp using the Covaris M220 system</li></ol><p>The sonicated DNA was purified using a TIANgel Midi Purification Kit, and a sequencing library was constructed using the NEBNext®<br>Ultra™ DNA Library Prep Kit for Illumina</p><p><a href="https://www.diagenode.com/en/p/megaruptor-1-unit" target="_blank" rel="noopener">Megaruptor</a>: The Megaruptor ® was designed to provide researchers with a simple, automated, and reproducible device for the fragmentation of DNA from 2 kb - 75 kb.Shearing performance is independent of the source, concentration, temperature, or salt content of a DNA sample.</p><h2 id="Illimina"><a href="#Illimina" class="headerlink" title="Illimina"></a>Illimina</h2><pre class="mermaid">graph TD;R1((Raw Reads))R2((H.Q. Reads))Reads((Reads))Con((Contigs))Con2((Target Contigs))Con3((Conf Contigs))Con4((Contigs))Con5((draft Contigs))Con6((Contigs))mt((mitogenome))mt1((mitogenome))mt2((mitogenome))R1 --> |FastQC & Trimmomatic|R2R2 -->|SPAdes|ConCon-->|blast against mt protein|Con2Con2 --> | BLASR to mtDB| Con3Con3 --> |Canu v1.7.1|Con4R2 -->|Canu v1.7.1|Con6Con4 --> |Pilon v1.22|Con5Reads-->|bowtie2|MUMmerReads-->|bowtie2|MUMmer2Con4-->MUMmerCon5-->MUMmerCon5-->MUMmer2Con6-->MUMmer2MUMmer -->mt1MUMmer2 -->mt2mt1-->|MUMmer 3.0 and MAFFT v. 7|mtmt2-->|MUMmer 3.0 and MAFFT v. 7|mt</pre><h2 id="mitogenome-Annotation"><a href="#mitogenome-Annotation" class="headerlink" title="mitogenome Annotation"></a>mitogenome Annotation</h2><p>protein and rRNA: blast+ against <em>Cycas taitungensis</em>, <em>Ginkgo biloba</em><br>and <em>Welwitschia mirabilis</em> database.</p><ul><li>tRNA: <strong>tRNAscan-SE 2.0</strong></li><li>introns: <strong>RNAweasel tool</strong></li><li>ORFs: <strong>ORF Finder</strong></li><li>ORFs-&gt; <strong>Blast2GO</strong></li><li>Visualization: <strong>OGDRAW</strong></li></ul><h2 id="RNA-editing-site-identification"><a href="#RNA-editing-site-identification" class="headerlink" title="RNA editing site identification"></a>RNA editing site identification</h2><ul><li>identify: <strong>RES-Scanner</strong></li><li>predicting: <strong>PREP-Mt</strong></li></ul><h2 id="mt-genes-to-nuclear-genome"><a href="#mt-genes-to-nuclear-genome" class="headerlink" title="mt-genes to nuclear genome"></a>mt-genes to nuclear genome</h2><ul><li><strong>Depth of Sequencing Coverage</strong>: <em>Bowtie2 v 2.2.9</em> &amp; <em>SAMtools v 1.6</em></li><li><strong>Realtime PCR</strong>: quantify the copy number of all protein coding genes<br>(singlecopy nuclear gene <em>LEAFY</em> as an experimental control)</li></ul><h2 id="Identification-of-repeats-tandem-repeats-Bpu-elements-and-foreign-sequences"><a href="#Identification-of-repeats-tandem-repeats-Bpu-elements-and-foreign-sequences" class="headerlink" title="Identification of repeats, tandem repeats, Bpu elements and foreign sequences"></a>Identification of repeats, tandem repeats, Bpu elements and foreign sequences</h2><ul><li>Repeasts: <strong>ROUSFinder.py</strong></li><li>tandem repeats: <strong>Tandem Repeats Finder</strong></li><li>Plastid-derived mtDNA (MTPTs) &amp; <em>Bpu</em>-like elements: <span title="Guo W, Grewe F, Fan W, Young GJ, Knoop V, Palmer JD, Mower JP. Ginkgo and Welwitschia mitogenomes reveal extreme contrasts in gymnosperm mitochondrial evolution. Mol Biol Evol. 2016;33:1448–60."><strong><em>Guo et al.</em></strong> </span> (span title here)<ul><li>MIPTs: <strong>blastn</strong> (against to genome and mitogenome)</li><li><em>Bpu</em>-like elements: <strong>blastn</strong> (using the <em>Cycas Bpu</em> consensus sequence as a query)</li></ul></li><li>nuclear-derived repetitive sequences: <a href="http://www.repeatmasker.org/cgi-bin/WEBRepeatMasker" target="_blank" rel="noopener">RepeatMasker web server</a></li></ul><h2 id="Shared-DNAs-and-gene-cluster-analyses"><a href="#Shared-DNAs-and-gene-cluster-analyses" class="headerlink" title="Shared DNAs and gene cluster analyses"></a>Shared DNAs and gene cluster analyses</h2><p>(mtDNA shared between species)<br><strong>blastn</strong> with a word size of 7 and an e-value cutoff of 1 × 10− 6.<br>Syntenic relationships were generated using <strong>Circos v. 0.69</strong></p><h2 id="Evolutionary-rate-heterogeneity-test"><a href="#Evolutionary-rate-heterogeneity-test" class="headerlink" title="Evolutionary rate heterogeneity test"></a>Evolutionary rate heterogeneity test</h2><ol><li>mitochondrial protein-coding genes</li><li><span title="Ran J-H, Shen T-T, Wang M-M, Wang X-Q. Phylogenomics resolves the deep phylogeny of seed plants and indicates partial convergent or homoplastic evolution between Gnetales and angiosperms. Proc R Soc B. 2018;285: 20181012"><strong><em>Ran et al.</em></strong> </span>:<ul><li>Sequence alignment;</li><li>unreliable sequence alignment filtering;</li><li>synonymous (d<sub>S</sub>);</li><li>nonsynonymous length calculations (d<sub>N</sub>);</li><li>absolute nonsynonymous(R<sub>N</sub>);</li><li>synonymous rate (R<sub>S</sub>).</li></ul></li><li>Effects of C-to-U RNA editing:<ul><li>predicted editing sites were excluded</li></ul></li></ol><h1 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h1><h2 id="Mitogenome-size-and-gene-and-intron-contents-of-Taxus-cuspidata"><a href="#Mitogenome-size-and-gene-and-intron-contents-of-Taxus-cuspidata" class="headerlink" title="Mitogenome size and gene and intron contents of Taxus cuspidata"></a>Mitogenome size and gene and intron contents of Taxus cuspidata</h2><table><thead><tr><th align="left">Category</th><th align="center">Size</th></tr></thead><tbody><tr><td align="left">Size</td><td align="center">468,924bp</td></tr><tr><td align="left">gene</td><td align="center">46</td></tr><tr><td align="left">protein</td><td align="center">32</td></tr><tr><td align="left">tRNA</td><td align="center">10</td></tr><tr><td align="left">rRNA</td><td align="center">3</td></tr><tr><td align="left">small subunit ribosomal protein</td><td align="center">4</td></tr><tr><td align="left">large subunit ribosomal protein</td><td align="center">2</td></tr><tr><td align="left">cytochrome C biogenesis</td><td align="center">4</td></tr><tr><td align="left">transport membrane protein</td><td align="center">1</td></tr><tr><td align="left">maturaserelated protein</td><td align="center">1</td></tr><tr><td align="left"><strong>Intron</strong></td><td align="center"></td></tr><tr><td align="left">group I introns</td><td align="center">0</td></tr><tr><td align="left">group II introns</td><td align="center">15 (cox2, nad1,nad2, nad4, nad5 and nad7 )</td></tr><tr><td align="left">cis-spliced</td><td align="center">4</td></tr><tr><td align="left">trans-spliced</td><td align="center">11</td></tr><tr><td align="left"><strong>tRNA</strong></td><td align="center"></td></tr><tr><td align="left">native tRNA</td><td align="center">9</td></tr><tr><td align="left">plastids tRNA</td><td align="center">1</td></tr><tr><td align="left"></td><td align="center"></td></tr><tr><td align="left"><strong>rRNA</strong></td><td align="center"><strong>copies</strong></td></tr><tr><td align="left">rrn5 &amp; rrn26</td><td align="center">1</td></tr><tr><td align="left">rrn18</td><td align="center">2</td></tr></tbody></table><table><thead><tr><th align="left">Category</th><th align="center">Length</th></tr></thead><tbody><tr><td align="left">genes</td><td align="center">225 -4104bp</td></tr><tr><td align="left">exons</td><td align="center">22 - 1224bp</td></tr><tr><td align="left">introns</td><td align="center">804 - 2461bp</td></tr></tbody></table><p>nine, one, one, three, and five encoding mitochondrial respiratory chain complexes I, II, III, IV, and V, respectively.</p><h2 id="Variation-in-gene-and-intron"><a href="#Variation-in-gene-and-intron" class="headerlink" title="Variation in gene and intron"></a>Variation in gene and intron</h2><p>Comparing groups: <em>Taxus,</em> <em>Pinus,</em> <em>Welwitschia,</em> <em>Cycas</em> and <em>Ginkgo</em>.</p><table><thead><tr><th></th><th><span style="Background:salm"><em>Cycas</em></th><th><em>Ginkgo</em></th><th><em>Pinus</em></th><th><em>Welwitschia</em></th><th><em>Taxus</em></th></tr></thead><tbody><tr><td>mitogenome Size</td><td>414,903</td><td>346,544</td><td>1,191,054</td><td>978,846</td><td>468,924</td></tr><tr><td>GC%</td><td>46.9</td><td>50.4</td><td>47</td><td>53</td><td>50.39</td></tr><tr><td>tRNAs</td><td>27</td><td>23</td><td>12</td><td>8</td><td>10</td></tr><tr><td>rRNAs</td><td>3</td><td>3</td><td>6</td><td>3</td><td>4</td></tr><tr><td>Protein coding</td><td>41</td><td>41</td><td>41</td><td>29</td><td>32</td></tr><tr><td>ORF</td><td>3945 (414,858 bp)</td><td>3944 (323,967 bp)</td><td>10,587 (1,191,015 bp)</td><td>11,171 (978,799 bp)</td><td>3923 (468,857 bp)</td></tr><tr><td>Introns</td><td>26</td><td>25</td><td>26</td><td>10</td><td>15</td></tr><tr><td>Predicted edit sites</td><td>1206</td><td>1306</td><td>1179</td><td>225</td><td>1102</td></tr><tr><td>Repeats (kb)</td><td>80 (19.2%)</td><td>32 (9.3%)</td><td>170 (14.2%)</td><td>50 (5.0%)</td><td>62 (13.2%)</td></tr><tr><td>Tandem repeats (kb)</td><td>22 (5.3%)</td><td>3.6 (1.1%)</td><td>71 (6.0%)</td><td>24 (2.5%)</td><td>48 (10.2%)</td></tr><tr><td>Plastid-derived (kb)</td><td>19 (4.6%)</td><td>0.3 (0.1%)</td><td>5.6 (0.5%)</td><td>7.9 (0.8%)</td><td>0 (0%)</td></tr><tr><td>Nuclear-derived repetitive (kb)</td><td>3.4 (0.8%)</td><td>1.9 (0.6%)</td><td>5.3 (0.5%)</td><td>2.5 (0.3%)</td><td>3.5 (0.8%)</td></tr><tr><td>Lost Genes</td><td></td><td></td><td></td><td>8+1</td><td>8+2</td></tr></tbody></table><p>Homologous transcripts of eight of the nine lost mitochondrial genes (excluding rpl10) were found in the transcriptome of Taxus cuspidata<br><img src="https://media.springernature.com/lw685/springer-static/image/art%3A10.1186%2Fs12862-020-1582-1/MediaObjects/12862_2020_1582_Fig2_HTML.png?as=webp" alt="figure2"><br><img src="https://media.springernature.com/lw685/springer-static/image/art%3A10.1186%2Fs12862-020-1582-1/MediaObjects/12862_2020_1582_Fig3_HTML.png?as=webp" alt="figre3"><br><strong>© Kan et al. 2020</strong></p><h2 id="RNA-editing-site-abundance-and-efficiency"><a href="#RNA-editing-site-abundance-and-efficiency" class="headerlink" title="RNA editing site abundance and efficiency"></a>RNA editing site abundance and efficiency</h2><p><strong>RES-Scanner</strong></p><ul><li><strong>efficiency</strong>:<ul><li>0.05; 974 C-to-U</li><li>791 them are on protein-coding genes<ul><li>730 were in coding regions</li><li>61 were in introns</li></ul></li><li>1 in tRNA</li><li>2 in rRNA</li><li>180 in intergenic regions</li></ul></li><li>first and second codon positions have higher editing efficiencies</li><li>nonsilent editing sites have higher editing efficiencies than silent sites</li></ul><p><strong>PREP-Mt</strong>: only nonsilent RNA editing sites in proteincoding genes could be predicted</p><ul><li>cutoff score: 0.2</li><li>1102 C-to-U editing sites</li><li>only 474 were identical</li><li>…</li></ul><p><img src="https://media.springernature.com/full/springer-static/image/art%3A10.1186%2Fs12862-020-1582-1/MediaObjects/12862_2020_1582_Fig4_HTML.png?as=webp" alt="img"><br><strong>© Kan et al. 2020</strong></p><h2 id="Structural-and-gene-cluster-dynamics"><a href="#Structural-and-gene-cluster-dynamics" class="headerlink" title="Structural and gene cluster dynamics"></a>Structural and gene cluster dynamics</h2><ol><li>DNA shared by <em>Cycas</em> and <em>Ginkgo</em> up to 200 bp (about 1/2)</li><li>Shared by <em>Cycas</em> and other three are short. (30 ~ 50)</li></ol><h2 id="Repeats-tandem-repeats-and-foreign-DNA-sequences"><a href="#Repeats-tandem-repeats-and-foreign-DNA-sequences" class="headerlink" title="Repeats, tandem repeats, and foreign DNA sequences"></a>Repeats, tandem repeats, and foreign DNA sequences</h2><ol><li><em>Cycas</em> and <em>Pinus</em> mitogenomes contain more dispersed repeats</li><li>In addition, most repeats had more than two copies in the <em>Cycas</em> and <em>Pinus</em></li><li>Plastid-derived sequence (&gt; 100bp) not found in <em>Taxus</em>.</li><li>nuclear-derived repetitive sequences found in five species.</li><li>…</li></ol><h2 id="Variation-in-nucleotide-substitution-rates"><a href="#Variation-in-nucleotide-substitution-rates" class="headerlink" title="Variation in nucleotide substitution rates"></a>Variation in nucleotide substitution rates</h2><p>although eight putatively transferred genes in Taxus and Welwitschia were still found in the mitogenomes of Cycas, Ginkgo and Pinus, their synonymous and nonsynonymous substitution rates were higher than those of other mitochondrial genes</p><h1 id="Discussion"><a href="#Discussion" class="headerlink" title="Discussion"></a>Discussion</h1><h2 id="Separate-losses-of-multiple-mitochondrial-protein-coding-genes-in-Taxus-and-Welwitschia"><a href="#Separate-losses-of-multiple-mitochondrial-protein-coding-genes-in-Taxus-and-Welwitschia" class="headerlink" title="Separate losses of multiple mitochondrial protein-coding genes in Taxus and Welwitschia"></a>Separate losses of multiple mitochondrial protein-coding genes in <em>Taxus</em> and <em>Welwitschia</em></h2><ul><li>Only two genes were lost in the first approximately 300 myr of land plant evolution if maturase is not considered</li><li>parallel gene losses documented in hornworts, lycophytes, and ferns also happened in more recent times</li><li>In angiosperms, a large number of protein-coding genes have been lost in some lineages,</li><li>…</li></ul><h2 id="Separate-losses-of-multiple-mitochondrial-tRNA-genes-in-Pinaceae-Taxus-and-Welwitschia"><a href="#Separate-losses-of-multiple-mitochondrial-tRNA-genes-in-Pinaceae-Taxus-and-Welwitschia" class="headerlink" title="Separate losses of multiple mitochondrial tRNA genes in Pinaceae, Taxus and Welwitschia"></a>Separate losses of multiple mitochondrial tRNA genes in <em>Pinaceae</em>, <em>Taxus</em> and <em>Welwitschia</em></h2><ul><li>all gymnosperms have three rRNA genes in their mitogenomes.</li><li>the number of tRNAs differs greatly</li></ul><h2 id="Frequent-losses-and-cis-to-trans-splicing-of-introns-in-the-mitogenomes-of-gymnosperms"><a href="#Frequent-losses-and-cis-to-trans-splicing-of-introns-in-the-mitogenomes-of-gymnosperms" class="headerlink" title="Frequent losses and cis- to trans-splicing of introns in the mitogenomes of gymnosperms"></a>Frequent losses and cis- to trans-splicing of introns in the mitogenomes of gymnosperms</h2><p>Both the ancestral angiosperm and gymnosperm mitogenomes contain 26 group II introns.<br><em>Cycas</em> and <em>Ginkgo</em>, have 26 and 25 introns, whereas <strong>only ten introns</strong> are found in <em>Welwitschia</em>.</p><p><strong>Mechanisms for intron loss</strong>:</p><ul><li>genomic deletion</li><li>exonization</li><li>gene conversion</li><li>EGT: <em>rpl2i846</em> and <em>rps10i235</em></li><li>retroprocessing (a reverse transcriptase-mediated model)</li></ul><h2 id="Gene-clusters-could-be-less-conserved-in-gymnosperms-and-transposable-elements-and-specific-repeats-are-rare-in-the-Taxus-and-Welwitschia-mitogenomes"><a href="#Gene-clusters-could-be-less-conserved-in-gymnosperms-and-transposable-elements-and-specific-repeats-are-rare-in-the-Taxus-and-Welwitschia-mitogenomes" class="headerlink" title="Gene clusters could be less conserved in gymnosperms, and transposable elements and specific repeats are rare in the Taxus and Welwitschia mitogenomes"></a>Gene clusters could be less conserved in gymnosperms, and transposable elements and specific repeats are rare in the Taxus and Welwitschia mitogenomes</h2><p>…</p><h2 id="The-number-of-RNA-editing-sites-is-not-correlated-with-the-GC-content-of-mitochondrial-genes"><a href="#The-number-of-RNA-editing-sites-is-not-correlated-with-the-GC-content-of-mitochondrial-genes" class="headerlink" title="The number of RNA editing sites is not correlated with the GC content of mitochondrial genes"></a>The number of RNA editing sites is not correlated with the GC content of mitochondrial genes</h2><p><em>Taxus cuspidata</em>: results showed that all editing sites are C-to-U conversions<br>…</p><h2 id="Size-variation-in-gymnosperm-mitogenomes-is-still-a-mystery"><a href="#Size-variation-in-gymnosperm-mitogenomes-is-still-a-mystery" class="headerlink" title="Size variation in gymnosperm mitogenomes is still a mystery"></a>Size variation in gymnosperm mitogenomes is still a mystery</h2><p>…</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>WGCNA: an R package for weighted correlation network analysis</title>
      <link href="/LearnNotes/paper_WGCNA.html"/>
      <url>/LearnNotes/paper_WGCNA.html</url>
      
        <content type="html"><![CDATA[<h1 id="WGCNA-an-R-package-for-weighted-correlation-network-analysis"><a href="#WGCNA-an-R-package-for-weighted-correlation-network-analysis" class="headerlink" title="WGCNA: an R package for weighted correlation network analysis"></a>WGCNA: an R package for weighted correlation network analysis</h1><p>Peter Langfelder1 and Steve Horvath*2</p><h1 id="Abstract"><a href="#Abstract" class="headerlink" title="Abstract"></a>Abstract</h1><p>Weighted gene co-expression network analysis is a method for describing the <strong>correlation patterns among genes across samples</strong>.<br>WGCNA can find <strong>clusters</strong> (modules) of high correlated genes.<br>Those gene clusters are called as <strong><em>module eigengene</em></strong> or <strong><em>intramodular hub gene</em></strong>.<br>And WGCNA can masure the <strong>correlation of modules to one another or external traits</strong>.<br>It can be used to identify candidate <strong>biomarkers</strong> or <strong>therapeutic targets</strong>.</p><h1 id="Background"><a href="#Background" class="headerlink" title="Background"></a>Background</h1><p><strong>Functions of WGCNA</strong>:</p><ol><li><span style="background:lightgreen">Cluster co-expression genes</span></li><li><span style="background:lightgreen">Correlation of modules to traits identification</span></li><li><span style="background:lightgreen">Significant modules identification</span></li><li><span style="background:lightgreen">Module annotation</span></li><li><span style="background:lightgreen">Define the network neighborhood</span></li><li><span style="background:lightgreen">Screen of nodes</span></li><li><span style="background:lightgreen">Contract network</span></li></ol><h1 id="Results"><a href="#Results" class="headerlink" title="Results"></a>Results</h1><p><strong>Overview of typical analysis steps and the rational behind them:</strong></p><p><img src="https://i.loli.net/2020/06/08/UWBD5CLEcsvd6Fl.png" alt="DeepinScreenshot_select-area_20200608133456"><br>© Peter Langfelder 2008</p><ol><li>co-expression</li><li>Using dynamic tree cut to idnetify modules.</li><li>Correlation with traits:<ul><li>Clinical data, SNPs, proteomics</li><li>ontology, functional enrichment</li><li>find biology interest modules</li></ul></li><li>Module relationships</li><li>Find the Key drivers in <strong><em>interesting</em></strong> modules</li></ol><h2 id="1-Gene-Cluster"><a href="#1-Gene-Cluster" class="headerlink" title="1. Gene Cluster"></a>1. Gene Cluster</h2><p><span style="background:red;color:white">Question: Soft Threadhold power????</span></p><h2 id="2-Module-Detection"><a href="#2-Module-Detection" class="headerlink" title="2. Module Detection"></a>2. Module Detection</h2><h3 id="2-1-Algorithm"><a href="#2-1-Algorithm" class="headerlink" title="2.1 Algorithm"></a>2.1 Algorithm</h3><p><span style="background:salmon">Modules are defined as clusters of <strong>densely interconnected genes</strong>.</span><br><strong><em>hierarhical cluster</em></strong> is used to cluster the genes.<br><span style="background:lightgreen">Short Coming</span> of this algorithm:</p><ul><li>Difficult determines how many clusters present in the data set.<br><a href="#paper1">About how to determines the numbers of cluster [1]</a></li></ul><h3 id="2-2-Biological-Meaning"><a href="#2-2-Biological-Meaning" class="headerlink" title="2.2 Biological Meaning"></a>2.2 Biological Meaning</h3><p>It could reflect:</p><ol><li>Biological signal</li><li>Noise</li></ol><p>So, gene ontology information can be used.</p><p>Algorithms of Modules detection</p><ul><li>Fuzzy measure of module membership</li><li>Automatic block-wise module detection</li><li>Consensus module detection</li></ul><h2 id="3-Module-and-Gene-Selection"><a href="#3-Module-and-Gene-Selection" class="headerlink" title="3. Module and Gene Selection"></a>3. Module and Gene Selection</h2><p>ummmm….<br> = =</p><h2 id="4-Topological-Properties"><a href="#4-Topological-Properties" class="headerlink" title="4. Topological Properties"></a>4. Topological Properties</h2><p>To study about network concept.</p><ol><li>Whole Network Connectivity (degree)</li><li>Intramodular Connectivity</li><li>Topological Overlap</li><li>Clustering Coefficient</li></ol><h2 id="…Skip"><a href="#…Skip" class="headerlink" title="…Skip"></a>…Skip</h2><h1 id="Mouse-Data-Application"><a href="#Mouse-Data-Application" class="headerlink" title="Mouse Data Application"></a>Mouse Data Application</h1><p>For computational reason, only 3600 most related genes are selected.<br>18 modules…<br><img src="https://media.springernature.com/full/springer-static/image/art%3A10.1186%2F1471-2105-9-559/MediaObjects/12859_2008_Article_2544_Fig4_HTML.jpg?as=webp" alt="img"><br>© Peter Langfelder 2008</p><p>As is how in Graph D above, weight is mostly correlated to brown, red, and salmon.<br>By GO enrichment result, we can find that brown is significantly enriched in categories “glycoprotein” and “signal”, red is enriched in “cell cycle”, and “salmon” is enriched in “chromosome”. Overall, it is biological meaningful.</p><p>Figure E shows body weight between genes significant…</p><hr> <li id="paper1">1. Dudoit S, Fridlyand J: A prediction-based resampling method for estimating the number of clusters in a dataset. Genome Biol 2002, 3(7):RESEARCH0036.<hr><p> github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br> blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br> R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/LearnNotes/summary.html"/>
      <url>/LearnNotes/summary.html</url>
      
        <content type="html"><![CDATA[<ul><li><a href="#">Softwares</a><ul><li><a href="xmind">思維導圖</a></li></ul></li><li><a href="eng">English Sentences</a></li><li><a href="eng_w">English Vocabulary</a></li><li><a href="#">Books (Reading Notes)</a><ul><li><a href="dnaisnotd">DNA is Not Destiny</a></li></ul></li><li><a href="#">Ted Listening</a><ul><li><a href="#">Subtitle</a><br>-<a href="tedideas2_t">The secret to self control | Jonathan Bricker | TEDxRainier</a></li><li><a href="#">Talks</a><ul><li><a href="fnth8g">Four Billion years of evolution in six minutes</a></li><li><a href="ted_bio_1">Bio - Four Billion years of evolution in six minutes</a></li><li><a href="tedideas2">Ideas - Jonathan Bricker: The secret to self control</a></li></ul></li></ul></li><li><a href="#">Physics</a><ul><li><a href="supercd">Super Conductor</a></li><li><a href="#">Quantum Physics</a><ul><li><a href="ted_phy_1">If you Don’t understand Quantum Physics, Try This!-1</a></li><li><a href="ted-phy1_2">If you Don’t understand Quantum Physics, Try This!-2</a></li></ul></li></ul></li><li><a href="#">Bio</a><ul><li><a href="#">Zoology</a><ul><li><a href="fishdigestion">Fish Digestion</a></li></ul></li><li>[Disease]<ul><li><a href="diabetes">糖尿病</a></li></ul></li></ul></li><li><a href="bzwarn">Scientific American 摘抄</a></li><li><a href="#">Papers</a><ul><li><a href="#">How to Write</a><ul><li><a href="#">RNA-Seq</a><ul><li><a href="paperrnaseqfish1">Paper1: Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized…</a></li><li><a href="paperrnaseqfish2">Paper2: De novo characterization of the liver transcriptome…</a></li><li><a href="paperrnaseqfish3">Paper3: Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal…</a></li><li><a href="paperrnaseqfish4">Paper4: Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile…</a></li></ul></li></ul></li><li><a href="#">Reading Notes</a><ul><li><a href="#">Metabolism</a><ul><li><a href="#">Regulation</a><ul><li><a href="liver_steroids">steroid homeon</a></li></ul></li><li><a href="#">Nutrition</a><ul><li><a href="fishdietenzyme">Diet Switch | Enzymes Activities | Fish 2008</a></li><li><a href="wheatinhibitors">Amylase-Trypsin Inhibitors | Inflammation | Mice 2020</a></li><li><a href="soyfish">Diet Switch | Growth | Fish 2019</a></li><li><a href="planthepatic">Diet Switch | Hepatic Metabolism | Fish 2004</a></li><li><a href="paper_blylavea_salmon_2019">Diet Switch|Fly Larvea|Salmon 2019</a></li></ul></li></ul></li><li><a href="#">algorithm</a><ul><li><a href="paper_wgcna">WGCNA</a></li></ul></li></ul></li></ul></li><li><a href="test">Test</a></li><li><a href="#">高中高考笔记</a><ul><li><a href="gknotes">来源: 网络</a></li></ul></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/LearnNotes/yuque.json"/>
      <url>/LearnNotes/yuque.json</url>
      
        <content type="html"><![CDATA[{"repo":"liuwenkan/notes","pattern":"fnth8g.md"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Test</title>
      <link href="/LearnNotes/test.html"/>
      <url>/LearnNotes/test.html</url>
      
        <content type="html"><![CDATA[<h1 id="Test"><a href="#Test" class="headerlink" title="Test"></a>Test</h1><details><summary style="color:salmon">展开查看代码</summary><pre><code><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(<span class="string">"Hello to see U!"</span>);</span><br><span class="line">echo What the hex?</span><br><span class="line">echo -e <span class="string">"Li\nds"</span></span><br></pre></td></tr></table></figure></div></code></pre></details><p>123</p><table><thead><tr><th align="center">123</th><th align="center">123</th></tr></thead><tbody><tr><td align="center">A</td><td align="center">B</td></tr></tbody></table><p>展开查看</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Atom</title>
      <link href="/Linux/Atom.html"/>
      <url>/Linux/Atom.html</url>
      
        <content type="html"><![CDATA[<h1 id="Atom"><a href="#Atom" class="headerlink" title="Atom"></a>Atom</h1><p>System： Deepin 15.11Atom    : 1.41.0<br />Electron: 4.2.7<br />Chrome  : 69.0.3497.128<br />Node    : 10.11.0</p><p><a name="4LN4y"></a></p><h1 id="安装插件"><a href="#安装插件" class="headerlink" title="安装插件"></a>安装插件</h1><p>ctrl + ， 打开设置<br><img src="https://s1.ax1x.com/2020/06/26/NsA2lD.png" alt="NsA2lD.png"></p><p><a name="rJPAR"></a></p><h1 id="1-预览Markdonw"><a href="#1-预览Markdonw" class="headerlink" title="1 预览Markdonw"></a>1 预览Markdonw</h1><p>ctrl + shift + m<br><img src="https://s1.ax1x.com/2020/06/26/NsAgSO.jpg" alt="NsAgSO.jpg"></p><p>效果还是感人的～！！</p><p><a name="jzoHj"></a></p><h1 id="2-预览html"><a href="#2-预览html" class="headerlink" title="2 预览html"></a>2 预览html</h1><p>下载并安装</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/harmsk/atom-html-preview.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> atom-html-preview/</span><br><span class="line">apm install</span><br></pre></td></tr></table></figure></div><p>Ctrl + Shift + H<br />（我没成功）</p><p><a name="GjTh6"></a></p><h1 id="3-自动补全文件路径"><a href="#3-自动补全文件路径" class="headerlink" title="3 自动补全文件路径"></a>3 自动补全文件路径</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">git://www.github.com/atom-community/autocomplete-paths.git</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> autocomplete-paths</span><br><span class="line"><span class="comment">#apm install</span></span><br><span class="line">npm install</span><br><span class="line"><span class="comment"># 直接使用 apm install 可能會缺少插件導致， 安裝成功卻無法使用，</span></span><br><span class="line"><span class="comment"># 而 npm Install 會有報錯</span></span><br></pre></td></tr></table></figure></div><p><code>npm install</code> 報錯：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm WARN worker-loader@0.8.1 requires a peer of webpack@&gt;=0.9 &lt;2 || ^2.1.0-beta || ^2.2.0 but none is installed. You must install peer dependencies yourself.</span><br><span class="line"></span><br><span class="line">audited 53 packages <span class="keyword">in</span> 1.756s</span><br><span class="line">found 3 vulnerabilities (2 moderate, 1 high)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` <span class="keyword">for</span> details</span><br></pre></td></tr></table></figure></div><p>解決：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">npm install npm WARN worker-loader@0.8.1 requires a peer of webpack@&gt;=0.9 &lt;2 || ^2.1.0-beta || ^2.2.0 but none is installed. You must install peer dependencies yourself.</span><br><span class="line"></span><br><span class="line">audited 53 packages <span class="keyword">in</span> 1.756s</span><br><span class="line">found 3 vulnerabilities (2 moderate, 1 high)</span><br><span class="line">  run `npm audit fix` to fix them, or `npm audit` <span class="keyword">for</span> details</span><br></pre></td></tr></table></figure></div><p>说实话 - -我安装了- -但是没看出什么效果来- -</p><p><a name="ePp9Z"></a></p><h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><h2 id="插件網頁下載："><a href="#插件網頁下載：" class="headerlink" title="插件網頁下載："></a>插件網頁下載：</h2><p><a href="https://atom.io/packages" target="_blank" rel="noopener">https://atom.io/packages</a></p><h2 id="更多博客："><a href="#更多博客：" class="headerlink" title="更多博客："></a>更多博客：</h2><p>Location：<a href="https://www.cnblogs.com/GarfieldEr007/p/5594700.html" target="_blank" rel="noopener">https://www.cnblogs.com/GarfieldEr007/p/5594700.html</a><br>更多插件:</p><ul><li>minimap (VS 一样小图预览)</li><li>atom-beautify (高亮美化)</li><li>emmet (emmet是HTML,CSS快速编写的神器,具体的使用可以参看emmet官网。)</li><li>autocomplete-* 系列 (自动补全)</li><li>pigments (显示颜色)<br><a href="https://blog.csdn.net/qq_32340877/article/details/79095610" target="_blank" rel="noopener">https://blog.csdn.net/qq_32340877/article/details/79095610</a></li></ul><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Blive with RasperryPi</title>
      <link href="/Linux/Blive-with-RasperryPi.html"/>
      <url>/Linux/Blive-with-RasperryPi.html</url>
      
        <content type="html"><![CDATA[<h1>Blive with RasperryPi</h1><p>Reference: <a href="https://www.bilibili.com/read/cv791252/" target="_blank" rel="noopener">Bilibili: 五维谐振子 </a></p><p><a name="Aypwi"></a></p><h1>Qick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">sudo apt upgrade</span><br><span class="line">sudo apt update</span><br><span class="line">sudo apt install ffmpeg</span><br><span class="line"></span><br><span class="line">sudo raspivid -o - -t 0 -w 1280 -h 720 -fps 24 -b 1000000 | ffmpeg -f h264 -i - -vcodec copy -acodec aac -b:a 192k -f flv <span class="string">"你的rtmp地址/你的直播码"</span></span><br></pre></td></tr></table></figure></div><p><a name="Zgaim"></a></p><h2 id="降低延迟"><a class="header-anchor" href="#降低延迟"></a>降低延迟:</h2><p><a href="https://blog.csdn.net/fireroll/article/details/51902018" target="_blank" rel="noopener">CSDN: 北雨南萍</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo raspivid -o - -t 0 -w 1280 -h 720 -fps 24 -b 1000000 |</span><br><span class="line">    ffmpeg -f h264 -i - -vcodec copy -r 30 -acodec aac -b:a 100k -preset ultrafast -tune zerolatency -f flv <span class="string">"你的rtmp地址/你的直播码"</span></span><br></pre></td></tr></table></figure></div><p><a name="3NazO"></a></p><h1>raspivid</h1><p><a href="https://shumeipai.nxez.com/2014/09/21/raspicam-documentation.html" target="_blank" rel="noopener">树莓派实验室: Spoony</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">"raspivid"</span> Camera App (commit 06bc6daa0213 Tainted)</span><br><span class="line"></span><br><span class="line">Display camera output to display, and optionally saves an H264 capture at requested bitrate</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">usage: raspivid [options]</span><br><span class="line"></span><br><span class="line">Image parameter commands</span><br><span class="line"></span><br><span class="line">-b, --bitrate  : Set bitrate. Use bits per second (e.g. 10MBits/s would be -b 10000000)</span><br><span class="line">-t, --timeout  : Time (<span class="keyword">in</span> ms) to capture <span class="keyword">for</span>. If not specified, <span class="built_in">set</span> to 5s. Zero to <span class="built_in">disable</span></span><br><span class="line">-d, --demo  : Run a demo mode (cycle through range of camera options, no capture)</span><br><span class="line">-fps, --framerate  : Specify the frames per second to record</span><br><span class="line">-e, --penc  : Display preview image *after* encoding (shows compression artifacts)</span><br><span class="line">-g, --intra  : Specify the intra refresh period (key frame rate/GoP size). Zero to produce an initial I-frame and <span class="keyword">then</span> just P-frames.</span><br><span class="line">-pf, --profile  : Specify H264 profile to use <span class="keyword">for</span> encoding</span><br><span class="line">-td, --timed  : Cycle between capture and pause. -cycle on,off <span class="built_in">where</span> on is record time and off is pause time <span class="keyword">in</span> ms</span><br><span class="line">-s, --signal  : Cycle between capture and pause on Signal</span><br><span class="line">-k, --keypress  : Cycle between capture and pause on ENTER</span><br><span class="line">-i, --initial  : Initial state. Use <span class="string">'record'</span> or <span class="string">'pause'</span>. Default <span class="string">'record'</span></span><br><span class="line">-qp, --qp  : Quantisation parameter. Use approximately 10-40. Default 0 (off)</span><br><span class="line">-ih, --inline  : Insert inline headers (SPS, PPS) to stream</span><br><span class="line">-sg, --segment  : Segment output file <span class="keyword">in</span> to multiple files at specified interval &lt;ms&gt;</span><br><span class="line">-wr, --wrap  : In segment mode, wrap any numbered filename back to 1 when reach number</span><br><span class="line">-sn, --start  : In segment mode, start with specified segment number</span><br><span class="line">-sp, --split  : In <span class="built_in">wait</span> mode, create new output file <span class="keyword">for</span> each start event</span><br><span class="line">-c, --circular  : Run encoded data through circular buffer until triggered <span class="keyword">then</span> save</span><br><span class="line">-x, --vectors  : Output filename &lt;filename&gt; <span class="keyword">for</span> inline motion vectors</span><br><span class="line">-<span class="keyword">if</span>, --irefresh  : Set intra refresh <span class="built_in">type</span></span><br><span class="line">-fl, --flush  : Flush buffers <span class="keyword">in</span> order to decrease latency</span><br><span class="line">-pts, --save-pts  : Save Timestamps to file <span class="keyword">for</span> mkvmerge</span><br><span class="line">-<span class="built_in">cd</span>, --codec  : Specify the codec to use - H264 (default) or MJPEG</span><br><span class="line">-lev, --level  : Specify H264 level to use <span class="keyword">for</span> encoding</span><br><span class="line">-r, --raw  : Output filename &lt;filename&gt; <span class="keyword">for</span> raw video</span><br><span class="line">-rf, --raw-format  : Specify output format <span class="keyword">for</span> raw video. Default is yuv</span><br><span class="line">-l, --listen  : Listen on a TCP socket</span><br><span class="line">-stm, --spstimings  : Add <span class="keyword">in</span> h.264 sps timings</span><br><span class="line">-sl, --slices  : Horizontal slices per frame. Default 1 (off)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">H264 Profile options :</span><br><span class="line">baseline,main,high</span><br><span class="line"></span><br><span class="line">H264 Level options :</span><br><span class="line">4,4.1,4.2</span><br><span class="line"></span><br><span class="line">H264 Intra refresh options :</span><br><span class="line">cyclic,adaptive,both,cyclicrows</span><br><span class="line"></span><br><span class="line">Raw output format options :</span><br><span class="line">yuv,rgb,gray</span><br><span class="line"></span><br><span class="line">Raspivid allows output to a remote IPv4 host e.g. -o tcp://192.168.1.2:1234or -o udp://192.168.1.2:1234</span><br><span class="line">To listen on a TCP port (IPv4) and <span class="built_in">wait</span> <span class="keyword">for</span> an incoming connection use the -l option</span><br><span class="line">e.g. raspivid -l -o tcp://0.0.0.0:3333 -&gt; <span class="built_in">bind</span> to all network interfaces,</span><br><span class="line">raspivid -l -o tcp://192.168.1.1:3333 -&gt; <span class="built_in">bind</span> to a certain <span class="built_in">local</span> IPv4 port</span><br><span class="line"></span><br><span class="line">Common Settings commands</span><br><span class="line"></span><br><span class="line">-?, --<span class="built_in">help</span>  : This <span class="built_in">help</span> information</span><br><span class="line">-w, --width  : Set image width &lt;size&gt;</span><br><span class="line">-h, --height  : Set image height &lt;size&gt;</span><br><span class="line">-o, --output  : Output filename &lt;filename&gt; (to write to stdout, use <span class="string">'-o -'</span>). If not specified, no file is saved</span><br><span class="line">-v, --verbose  : Output verbose information during run</span><br><span class="line">-cs, --camselect  : Select camera &lt;number&gt;. Default 0</span><br><span class="line">-md, --mode  : Force sensor mode. 0=auto. See docs <span class="keyword">for</span> other modes available</span><br><span class="line">-gps, --gpsdexif  : Apply real-time GPS information to output (e.g. EXIF <span class="keyword">in</span> JPG, annotation <span class="keyword">in</span> video (requires libgps.so.23)</span><br><span class="line"></span><br><span class="line">Preview parameter commands</span><br><span class="line"></span><br><span class="line">-p, --preview  : Preview window settings &lt;<span class="string">'x,y,w,h'</span>&gt;</span><br><span class="line">-f, --fullscreen  : Fullscreen preview mode</span><br><span class="line">-op, --opacity  : Preview window opacity (0-255)</span><br><span class="line">-n, --nopreview  : Do not display a preview window</span><br><span class="line">-dn, --dispnum  : Display on <span class="built_in">which</span> to display the preview window (dispmanx/tvservice numbering)</span><br><span class="line"></span><br><span class="line">Image parameter commands</span><br><span class="line"></span><br><span class="line">-sh, --sharpness  : Set image sharpness (-100 to 100)</span><br><span class="line">-co, --contrast  : Set image contrast (-100 to 100)</span><br><span class="line">-br, --brightness  : Set image brightness (0 to 100)</span><br><span class="line">-sa, --saturation  : Set image saturation (-100 to 100)</span><br><span class="line">-ISO, --ISO  : Set capture ISO</span><br><span class="line">-vs, --vstab  : Turn on video stabilisation</span><br><span class="line">-ev, --ev  : Set EV compensation - steps of 1/6 stop</span><br><span class="line">-ex, --exposure  : Set exposure mode (see Notes)</span><br><span class="line">-fli, --flicker  : Set flicker avoid mode (see Notes)</span><br><span class="line">-awb, --awb  : Set AWB mode (see Notes)</span><br><span class="line">-ifx, --imxfx  : Set image effect (see Notes)</span><br><span class="line">-cfx, --colfx  : Set colour effect (U:V)</span><br><span class="line">-mm, --metering  : Set metering mode (see Notes)</span><br><span class="line">-rot, --rotation  : Set image rotation (0-359)</span><br><span class="line">-hf, --hflip  : Set horizontal flip</span><br><span class="line">-vf, --vflip  : Set vertical flip</span><br><span class="line">-roi, --roi  : Set region of interest (x,y,w,d as normalised coordinates [0.0-1.0])</span><br><span class="line">-ss, --shutter  : Set shutter speed <span class="keyword">in</span> microseconds</span><br><span class="line">-awbg, --awbgains  : Set AWB gains - AWB mode must be off</span><br><span class="line">-drc, --drc  : Set DRC Level (see Notes)</span><br><span class="line">-st, --stats  : Force recomputation of statistics on stills capture pass</span><br><span class="line">-a, --annotate  : Enable/Set annotate flags or text</span><br><span class="line">-3d, --stereo  : Select stereoscopic mode</span><br><span class="line">-dec, --decimate  : Half width/height of stereo image</span><br><span class="line">-3dswap, --3dswap  : Swap camera order <span class="keyword">for</span> stereoscopic</span><br><span class="line">-ae, --annotateex  : Set extra annotation parameters (text size, text colour(hex YUV), <span class="built_in">bg</span> colour(hex YUV), justify, x, y)</span><br><span class="line">-ag, --analoggain  : Set the analog gain (floating point)</span><br><span class="line">-dg, --digitalgain  : Set the digital gain (floating point)</span><br><span class="line">-<span class="built_in">set</span>, --settings  : Retrieve camera settings and write to stdout</span><br></pre></td></tr></table></figure></div><p><a name="7wvaM"></a></p><h1>python + openCVC + ffmpeg</h1><p>more: <a href="https://blog.csdn.net/Mind_programmonkey/article/details/102732555" target="_blank" rel="noopener">CSDN: mind_programmonkey</a></p><p>基本框架</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</span><br><span class="line"><span class="keyword">import</span> subprocess <span class="keyword">as</span> sp</span><br><span class="line"></span><br><span class="line">rtmpUrl = <span class="string">"你的rtmp地址/你的直播码"</span></span><br><span class="line">camera_path = <span class="string">"/dev/video0"</span></span><br><span class="line">cap = cv.VideoCapture(camera_path)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Get video information</span></span><br><span class="line">fps = <span class="number">30</span> <span class="comment">#int(cap.get(cv.CAP_PROP_FPS))</span></span><br><span class="line">width = int(cap.get(cv.CAP_PROP_FRAME_WIDTH))</span><br><span class="line">height = int(cap.get(cv.CAP_PROP_FRAME_HEIGHT))</span><br><span class="line"></span><br><span class="line"><span class="comment"># ffmpeg command</span></span><br><span class="line">command = [<span class="string">'ffmpeg'</span>,</span><br><span class="line">        <span class="string">'-y'</span>,</span><br><span class="line">        <span class="string">'-f'</span>, <span class="string">'rawvideo'</span>,</span><br><span class="line">        <span class="string">'-vcodec'</span>,<span class="string">'rawvideo'</span>,</span><br><span class="line">        <span class="string">'-pix_fmt'</span>, <span class="string">'bgr24'</span>,</span><br><span class="line">        <span class="string">'-s'</span>, <span class="string">"&#123;&#125;x&#123;&#125;"</span>.format(width, height),</span><br><span class="line">        <span class="string">'-r'</span>, str(fps),</span><br><span class="line">        <span class="string">'-i'</span>, <span class="string">'-'</span>,</span><br><span class="line">        <span class="string">'-c:v'</span>, <span class="string">'libx264'</span>,</span><br><span class="line">        <span class="string">'-pix_fmt'</span>, <span class="string">'yuv420p'</span>,</span><br><span class="line">        <span class="string">'-preset'</span>, <span class="string">'ultrafast'</span>,</span><br><span class="line">        <span class="string">'-f'</span>, <span class="string">'flv'</span>,</span><br><span class="line">        rtmpUrl]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 管道配置</span></span><br><span class="line">p = sp.Popen(command, stdin=sp.PIPE)</span><br><span class="line"></span><br><span class="line"><span class="comment"># read webcamera</span></span><br><span class="line"><span class="keyword">while</span>(cap.isOpened()):</span><br><span class="line">    ret, frame = cap.read()</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> ret:</span><br><span class="line">        print(<span class="string">"Opening camera is failed"</span>)</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># process frame</span></span><br><span class="line">    <span class="comment"># your code</span></span><br><span class="line">    <span class="comment"># process frame</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># write to pipe</span></span><br><span class="line">    p.stdin.write(frame.tostring())</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>如何在Deepin上安装稳定的OBS</title>
      <link href="/Linux/Deepin_OBS.html"/>
      <url>/Linux/Deepin_OBS.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何在Deepin上安装稳定的OBS"><a href="#如何在Deepin上安装稳定的OBS" class="headerlink" title="如何在Deepin上安装稳定的OBS"></a>如何在Deepin上安装稳定的OBS</h1><p>系统： Deepin 15.11<br />apt， Deepin 商店， 以及 OBS 官方教程都试过了， 折腾了好久， 安装都很简单，也能打开。<br />但是一开始录屏或这推流， 软件就开始闪退， 非常头疼，<br />最后终于找到了这个<a href="https://hacpai.com/article/1563091378708" target="_blank" rel="noopener">帖子</a><br /><br><br />记录一下，做个备份</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 安装 flatpak 软件管理器</span></span><br><span class="line">apt install flatpak</span><br><span class="line">apt install gnome-software-plugin-flatpak</span><br><span class="line">flatpak remote-add --<span class="keyword">if</span>-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo</span><br><span class="line"><span class="comment"># 这里官方建议安装完flatpak以后重启一下系统。不过我好像没有重启，也没有关系的样子</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装 OBS</span></span><br><span class="line">flatpak install flathub com.obsproject.Studio</span><br><span class="line"></span><br><span class="line"><span class="comment"># 运行 OBS</span></span><br><span class="line">flatpak run com.obsproject.Studio</span><br></pre></td></tr></table></figure></div><p><br />安装以后，在主菜单也可以找到了，也可以在开始菜单里面，点击运行<br /><br><img src="https://s1.ax1x.com/2020/06/26/NsE8nH.png" alt="NsE8nH.png"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Conky - the best plug for desktop</title>
      <link href="/Linux/Conky.html"/>
      <url>/Linux/Conky.html</url>
      
        <content type="html"><![CDATA[<h1>Conky - the best plug for desktop</h1><p>reference:<a href="https://www.cnblogs.com/LungGiyo/p/6019412.html" target="_blank" rel="noopener">aikunzhe </a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install conky</span><br><span class="line"></span><br><span class="line">conky</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsAq1S.jpg" alt="NsAq1S.jpg"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install hddtemp curl lm-sensors conky-all</span><br><span class="line">sudo chmod u+s /usr/sbin/hddtemp</span><br><span class="line">sudo sensors-detect</span><br><span class="line">sudo reboot</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp /etc/conky/conky.conf /home/<span class="variable">$USER</span>/.conkyrc</span><br></pre></td></tr></table></figure></div><p>You can editing <code>/home/$USER/.conkyrc</code> to personize it.<br /></p><p><a name="FbZDG"></a></p><h1>conky.config</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gap_x  <span class="comment"># initial place</span></span><br><span class="line">gap_y <span class="comment"># initial place</span></span><br></pre></td></tr></table></figure></div><br /><p><a name="qSgWW"></a></p><h1>Theme from github</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/aikunzhe/conky_colors.git</span><br><span class="line"><span class="built_in">cd</span> conky_colors</span><br><span class="line">make</span><br><span class="line">sudo make install</span><br><span class="line"></span><br><span class="line"><span class="comment"># test</span></span><br><span class="line">conky-colors --theme=custom --default-color=black --color0=cyan --color1=green --color2=orange --color3=red --ubuntu --cpu=2--updates --proc=3--clock=default --calendar --nvidia --hd=default --hdtemp1=sda --photo --photord --network --unit=C --side=right --bbcweather=1586--weather=CHXX0100 --rhythmbox=<span class="built_in">cd</span></span><br><span class="line"></span><br><span class="line">conky -c /home/<span class="variable">$USER</span>/.conkycolors/conkyrc</span><br></pre></td></tr></table></figure></div><p>效果:<br><img src="https://s1.ax1x.com/2020/06/26/NsAL6g.jpg" alt="NsAL6g.jpg"><br><br />具體配置:<br />from: <a href="https://www.cnblogs.com/LungGiyo/p/6019412.html" target="_blank" rel="noopener">aikunzhe</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">快捷键 Ctrl Alt T 打开一个终端运行以下命令查看帮助，</span><br><span class="line">代码:</span><br><span class="line">conky-colors --<span class="built_in">help</span></span><br><span class="line">部份conky-colors命令参数选项介绍：</span><br><span class="line">--lang 语言，5.1.2 版没有cn 中文选项，只能用默认的en 英语。</span><br><span class="line">--theme 面板主题，</span><br><span class="line">          brave|carbonite|dust|human|noble|tribute|wine|wise|</span><br><span class="line">          ambiance|radiance|elementary|</span><br><span class="line">          cyan|blue|orange|red|green|purple|black|white|</span><br><span class="line">          custom</span><br><span class="line">--side 面板在桌面的位置 left 左， right 右（默认）</span><br><span class="line">--ubuntu 显示LOGO，有9个LOGO可选，还可以在配置文件里自定义更多的LOGO</span><br><span class="line">--Fedora，--openSUSE，--debian，--arch，--gentoo，--pardus，--xfce，--gnome</span><br><span class="line">--cpu 显示CPU信息，双核CPU用2，四核用4，单核用1</span><br><span class="line">--cputemp 显示CPU温度</span><br><span class="line">--swap 显示swap缓存分区的信息</span><br><span class="line">--updates 显示系统需要升级的软件包信息</span><br><span class="line">--proc 显示资源占用情况排在前列的进程，3 显示3个进程（最多为10）</span><br><span class="line">--clock 显示时钟和日期，有7种形式可选default，classic，slim，modern，lucky，digital，off</span><br><span class="line">--calendar 显示月历</span><br><span class="line">--nvidia 显示Nidia显卡信息，抱歉没有ATI 的选项</span><br><span class="line">--hd 显示硬盘信息，有4中形式可选default，meerkat，mix，simple</span><br><span class="line">--hdtemp1 显示第一个硬盘的温度，第2个sata硬盘为 --hdtemp2=sdb</span><br><span class="line">--photord 随机显示幻灯片相册，默认使用的是系统桌面背景图片文件夹，可以在脚本 ~/.conkycolors/bin/conkyPhotoRandom 中把 <span class="built_in">source</span>=<span class="string">"/usr/share/backgrounds/"</span> 修改为自定义的图片目录</span><br><span class="line">--photo 仅固定显示一张图片，放在 /usr/share/backgrounds/ 内</span><br><span class="line">--network 显示网络信息，可以指定使用 --eth 网卡设备，--wlan 无线设备，--ppp 拨号设备 （默认都是0）</span><br><span class="line">--battery 显示电池信息</span><br><span class="line">--unit 温度单位 C 摄氏 或 F 华氏</span><br><span class="line">--rhythmbox 在多媒体栏显示Ubuntu自带的rhythmbox播放器的曲目信息。</span><br><span class="line">有7中形式可选：default，<span class="built_in">cd</span>，<span class="keyword">case</span>，glassy，vinyl，oldvinyl，simple</span><br><span class="line">还支持其他播放器：--covergloobus，--banshee，--exaile</span><br><span class="line">--pidgin 可显示pidgin在线的聊天好友</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">按自己需要实现的功能选择相应参数，然后运行conky-colors生成.conkycolors目录和相关文件，</span><br><span class="line">你至少需要运行一次这个命令！否则没有.conkycolors这个目录，或者缺少某些程序文件。例如：</span><br><span class="line">代码:</span><br><span class="line">conky-colors --theme=custom --default-color=black --color0=cyan --color1=green --color2=orange --color3=red --ubuntu --cpu=2--updates --proc=3--clock=default --calendar --nvidia --hd=default --hdtemp1=sda --photo --photord --network --unit=C --side=right --bbcweather=1586--weather=CHXX0100 --rhythmbox=<span class="built_in">cd</span></span><br><span class="line">然后生成conkyrc配置文件，存放在 /home/用户名/.conkycolors 目录下,</span><br><span class="line">如果没有.conkycolors这个目录，可以自己创建。</span><br><span class="line">提示：在Linux中，凡是名称以点号开头的文件或文件夹，默认都是隐藏不见的。</span><br><span class="line">在窗口中，按下 Ctrl H 键即可显示隐藏文件。</span><br><span class="line">在终端下，可以用 ls -a 命令查看隐藏文件。</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">  ./conky-colors &lt;options&gt;</span><br><span class="line"></span><br><span class="line">  options:</span><br><span class="line">  -------------- LANGUAGES --------------</span><br><span class="line">  --lang=&lt;language&gt; - Set default language</span><br><span class="line">  Languages: <span class="built_in">bg</span>|de|el|en*|et|fr|it|pl|pt|ru|es|uk</span><br><span class="line">  -------------- THEMES --------------</span><br><span class="line">  --theme=&lt;theme&gt; - Set default theme color</span><br><span class="line">  Themes: brave|carbonite|dust|human*|noble|tribute|wine|wise|</span><br><span class="line">          ambiance|radiance|elementary|</span><br><span class="line">          cyan|blue|orange|red|green|purple|black|white|</span><br><span class="line">          custom</span><br><span class="line">  Work only with --theme=custom</span><br><span class="line">    --default-color=&lt;value&gt;</span><br><span class="line">    --color0=&lt;value&gt;</span><br><span class="line">    --color1=&lt;value&gt;</span><br><span class="line">    --color2=&lt;value&gt;</span><br><span class="line">    --color3=&lt;value&gt;</span><br><span class="line">  --dark - Set Dark Brightness</span><br><span class="line">  -------------- DEFAULT MODE --------------</span><br><span class="line">  --&lt;logo&gt; - Replace computer icon <span class="keyword">for</span> distro Logo</span><br><span class="line">  Logos: ubuntu|fedora|opensuse|debian|arch|gentoo|pardus|xfce|gnome</span><br><span class="line">  --cpu=&lt;number&gt; - Set number of cpu cores</span><br><span class="line">  --cputemp - Enable CPU temperature</span><br><span class="line">  --swap - Enable SWAP</span><br><span class="line">  --battery - Enable battery</span><br><span class="line">  --battery-value=&lt;number&gt; - Change battery device number &lt;/proc/acpi/battery&gt;</span><br><span class="line">  --updates - Show updates <span class="keyword">for</span> Debian/Ubuntu</span><br><span class="line">  --proc=&lt;number&gt; - Enable processes [Max = 10]</span><br><span class="line">  --clock=&lt;default|modern|digital|off&gt;</span><br><span class="line">  --nodata - <span class="built_in">disable</span> Data</span><br><span class="line">  --calendar - Enable calendar</span><br><span class="line">  --calendarm - Enable calendar with monday as first day</span><br><span class="line">  --calendarzim - Enable calendar with Zim support</span><br><span class="line">  --nvidia - Enable nvidia gpu</span><br><span class="line">  --task - Enable Task [<span class="built_in">type</span> <span class="string">"ct help"</span> <span class="keyword">in</span> terminal <span class="keyword">for</span> info]</span><br><span class="line">  --hd=&lt;default|meerkat|mix|simple&gt; - Enable HD</span><br><span class="line">    --hdtemp1=&lt;device&gt; - Enable HD temperature [Ex: --hdtemp1=sda]</span><br><span class="line">  --hdtemp2=&lt;device&gt; - Enable HD temperature [Ex: --hdtemp2=sdb]</span><br><span class="line">  --hdtemp3=&lt;device&gt; - Enable HD temperature [Ex: --hdtemp3=sdc]</span><br><span class="line">  --hdtemp4=&lt;device&gt; - Enable HD temperature [Ex: --hdtemp4=sdd]</span><br><span class="line">  --photo - Enable Photo</span><br><span class="line">  --photord - Enable Photo <span class="keyword">in</span> random mode</span><br><span class="line">  --mpd - Enable MPD</span><br><span class="line">  --banshee=&lt;default|<span class="built_in">cd</span>|<span class="keyword">case</span>|glassy|vinyl|oldvinyl|simple&gt;</span><br><span class="line">  --clementine=&lt;default|<span class="built_in">cd</span>|<span class="keyword">case</span>|glassy|vinyl|oldvinyl|simple&gt;</span><br><span class="line">  --rhythmbox=&lt;default|<span class="built_in">cd</span>|<span class="keyword">case</span>|glassy|vinyl|oldvinyl|simple&gt;</span><br><span class="line">  --covergloobus - Enable CoverGloobus</span><br><span class="line">  --gmail - Enable gmail notify</span><br><span class="line">    --user=&lt;username&gt; - Type your username</span><br><span class="line">    --passwd=&lt;password&gt; - Type your password</span><br><span class="line">  --network - Enable network</span><br><span class="line">    --eth=&lt;number&gt; - Change ethernet device [Default=0]</span><br><span class="line">    --wlan=&lt;number&gt; - Change wireless device [Default=0]</span><br><span class="line">    --ppp=&lt;number&gt; - Change 3g modem device [Default=0]</span><br><span class="line">  --unit=&lt;C|F&gt;- Force output temperature either <span class="keyword">in</span> Celius or Fahrenheit</span><br><span class="line">  --weather=&lt;AreaID&gt; - Enable weather[Ex: --weather=BRXX0043]</span><br><span class="line">  --bbcweather=&lt;AreaID&gt; - Enable weather[Ex: --bbcweather=3849]</span><br><span class="line">  --side=&lt;left|right*&gt; - Set the side of conky <span class="keyword">in</span> your screem</span><br><span class="line">  -------------- CAIRO/RING MODE --------------</span><br><span class="line">  --cairo - Enable cairo-conky mode.</span><br><span class="line">  --ring - Enable ring-conky mode.</span><br><span class="line">  --cpu=&lt;number&gt; - Set number of cpu cores</span><br><span class="line">  --swap - Enable SWAP [cairo-mode only]</span><br><span class="line">  --clock=&lt;cairo|bigcairo&gt; - Enable/<span class="built_in">disable</span> clock [cairo-mode only]</span><br><span class="line">  --banshee=&lt;cairo|cairo-case|cairo-cd|cairo-glassy|lua&gt; [cairo-mode only]</span><br><span class="line">  --clementine=&lt;cairo|cairo-case|cairo-cd|cairo-glassy|lua&gt; [cairo-mode only]</span><br><span class="line">  --rhythmbox=&lt;cairo|cairo-case|cairo-cd|cairo-glassy|lua&gt; [cairo-mode only]</span><br><span class="line">  --banshee=&lt;ring|ring-case|ring-cd|ring-glassy&gt; [ring-mode only]</span><br><span class="line">  --clementine=&lt;ring|ring-case|ring-cd|ring-glassy&gt; [ring-mode only]</span><br><span class="line">  --rhythmbox=&lt;ring|ring-case|ring-cd|ring-glassy&gt; [ring-mode only]</span><br><span class="line">  --network - Enable network</span><br><span class="line">  --unit=&lt;C|F&gt;- Force output temperature either <span class="keyword">in</span> Celius or Fahrenheit</span><br><span class="line">  -------------- BOARD/SLIM MODE --------------</span><br><span class="line">  --board - Enable board-conky mode.</span><br><span class="line">  --slim - Enable slim-conky mode.</span><br><span class="line">  --w=&lt;width&gt; - Set your screen width</span><br><span class="line">  --h=&lt;height&gt; - Set your screen height</span><br><span class="line">  --nobg - Remove background</span><br><span class="line">  --posfix=&lt;number&gt; - fix ring position</span><br><span class="line">  --weather=&lt;AreaID&gt; - Enable weather[Ex: --weather=BRXX0043]</span><br><span class="line">  --unit=&lt;C|F&gt;- Force output temperature either <span class="keyword">in</span> Celius or Fahrenheit</span><br><span class="line">  -------------- SLS MODE --------------</span><br><span class="line">  --sls - Enable SLS-conky mode.</span><br><span class="line">  --nobg - Remove background</span><br><span class="line">  --weather=&lt;AreaID&gt; - Enable weather[Ex: --weather=BRXX0043]</span><br><span class="line">  --user=&lt;username&gt; - Type your gmail username</span><br><span class="line">  --passwd=&lt;password&gt; - Type your gmail password</span><br><span class="line">  -------------- EXTRA OPTIONS --------------</span><br><span class="line">  --datadir=/path/to/datadir - it overrides default datadir</span><br><span class="line">  --createlocalcopy - it copies the content of system datadir to /home/ken/.conkycolors</span><br><span class="line">  --nofilecheck - disables checking the presence of files</span><br><span class="line">  --default_datadir - prints the order of default datadirs <span class="keyword">in</span> <span class="built_in">which</span> files are searched by default.</span><br><span class="line">  --finddir=FILE - this option makes this program find and <span class="built_in">print</span> out a directory <span class="built_in">where</span> FILE is located.</span><br><span class="line">  --argb-value=0-255 - Set the value of own_window_argb_value, the default is 200</span><br><span class="line">  --install=<span class="built_in">local</span>(*), system, or custom - install generated configuration files to a chosen datadir.</span><br><span class="line">  --systemdir - displays the system directory <span class="keyword">for</span> conkycolors.</span><br><span class="line">  --localdir - displays the <span class="built_in">local</span> directory <span class="keyword">for</span> conkycolors.</span><br><span class="line"></span><br><span class="line">(*)default values</span><br></pre></td></tr></table></figure></div><p>task 文件在 <code>/home/$USER/.conkycolors/tasks</code><br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">conky-colors --theme=blue  --default-color=black --color0=cyan --color1=green  \</span><br><span class="line">--color2=orange --color3=red \ <span class="comment"># basic thmeme</span></span><br><span class="line">--debian --updates    \   <span class="comment"># system $ update information</span></span><br><span class="line">--cpu=8 --cputemp    \   <span class="comment"># cpu and cmp tmp</span></span><br><span class="line">--nvidia            \    <span class="comment"># gpu infor</span></span><br><span class="line">--swap               \   <span class="comment"># Ram</span></span><br><span class="line">--battery            \    <span class="comment"># Battery inf</span></span><br><span class="line">--proc=10           \    <span class="comment">#task</span></span><br><span class="line">--clock=digital  --calendarm  \    <span class="comment"># Date</span></span><br><span class="line">--task              \    <span class="comment"># personal task, stort at /home/$USER/.conkycolors/tasks</span></span><br><span class="line">--hd=default --hdtemp1=sda  --hdtemp2=sda2  \   <span class="comment">#hard drive Tm</span></span><br><span class="line">--banshee=simple --clementine=default --rhythmbox=default  \    <span class="comment">#Media player</span></span><br><span class="line"><span class="comment">#--network          \    # fail to show on my computer</span></span><br><span class="line"><span class="comment"># --board/--slim    \    # fail to show on my computer</span></span><br><span class="line"><span class="comment"># --weather=BRXX0043\    # fail to request the Tm</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">conky-colors --theme=blue  --default-color=black --color0=cyan --color1=green  \</span><br><span class="line">--color2=orange --color3=red \</span><br><span class="line">--debian --updates    \</span><br><span class="line">--cpu=8 --cputemp    \</span><br><span class="line">--nvidia            \</span><br><span class="line">--swap               \</span><br><span class="line">--battery            \</span><br><span class="line">--proc=10           \</span><br><span class="line">--clock=digital  --calendarm  \</span><br><span class="line">--task              \</span><br><span class="line">--hd=default --hdtemp1=sda  --hdtemp2=sda2  \</span><br><span class="line">--banshee=simple --clementine=default --rhythmbox=default</span><br></pre></td></tr></table></figure></div><p><a name="4w87V"></a></p><h1>开机启动</h1><p>reference:<a href="https://blog.csdn.net/weixin_41082546/article/details/99190180" target="_blank" rel="noopener">Micr067</a><br />创建启动文件并加入以下配置<br />locate autostart 查找系统启动文件目录<br /><br><br />我的栗子:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/xdg/autostart/conky.desktop</span><br></pre></td></tr></table></figure></div><p>输入一下文本</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=conky</span><br><span class="line">Type=Application</span><br><span class="line">Exec=/usr/bin/conky</span><br></pre></td></tr></table></figure></div><p>保存(<code>:wq!</code>)并退出 <code>reboot</code><br /></p><p><a name="dnP97"></a></p><h1>conky主题网站</h1><p>reference:<a href="https://blog.csdn.net/weixin_40570554/article/details/81953757" target="_blank" rel="noopener">潘哒mate</a><br /><a href="https://www.deviantart.com/customization/skins/linuxutil/applications/conky/newest/" target="_blank" rel="noopener">https://www.deviantart.com/customization/skins/linuxutil/applications/conky/newest/</a><br /><br><br />tutorial:<a href="https://www.cnblogs.com/MineLSG/p/10413608.html" target="_blank" rel="noopener">https://www.cnblogs.com/MineLSG/p/10413608.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>如何在Deepin上安装gtop</title>
      <link href="/Linux/Deepin_gtop.html"/>
      <url>/Linux/Deepin_gtop.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何在Deepin上安装gtop"><a href="#如何在Deepin上安装gtop" class="headerlink" title="如何在Deepin上安装gtop"></a>如何在Deepin上安装gtop</h1><p>参考：<a href="https://github.com/aksakalli/gtop" target="_blank" rel="noopener">https://github.com/aksakalli/gtop</a></p><p><a name="Py7DW"></a></p><h1 id="npm-Install"><a href="#npm-Install" class="headerlink" title="npm Install"></a>npm Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">apt-get -y install git curl</span><br><span class="line"></span><br><span class="line">npm install gtop --registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line">gtop</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">You can sort the process table by pressing</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">p: Process Id</span></span><br><span class="line"><span class="string">c: CPU usage</span></span><br><span class="line"><span class="string">m: Memory usage</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsElcD.gif" alt="NsElcD.gif"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>如何在deepin上安装scrcpy</title>
      <link href="/Linux/Deepin_scrcpy.html"/>
      <url>/Linux/Deepin_scrcpy.html</url>
      
        <content type="html"><![CDATA[<h1>如何在deepin上安装scrcpy</h1><p>source: <a href="https://www.linuxuprising.com/2019/03/control-android-devices-from-your.html" target="_blank" rel="noopener">https://www.linuxuprising.com/2019/03/control-android-devices-from-your.html</a></p><p>scrcpy 作为一个良心开源投屏加控制软件，真是太强大了。 不需要手机安装额外垃圾东西，比自带的手机投屏到电脑功能要稳定很多， 不容易崩溃(某win)。稳定好， 高清画面也不容易掉帧，真是太舒服了。</p><table><thead><tr><th><br /><br /><strong>本来</strong>这个软件非常友好啊, 但是却应为deepin 系统的关系, apt源没有, snap在上国又很鸡肋,完全不能用, 只能自己编译。<br /><br /><br />编译就编译吧， 偏偏又有很多的坑要填 = = 我是被虐的不要不要的反正。<br />对于小白来说， configure + make， 还是很友好的， 报错清晰，debug简单。 但是第一次接触mason 和nijia 来说- -有点噩梦了。<br /><br />最开始想着直接下最新的1.12.1， 然后直接编译， 一堆错误。 后面终于通过googel 到了一个全能贴， 发现需要安装服务。按照要求，安装服务器后，又出现了，ninjia 报错说没有找到1.11.1 的服务器。。？？？ 好吧，去下好了1.11.1的， 总算是没有报错了， 输入scrcpy 也成功了， 没有报错。<br />并且和成功运行的画面一样， 手机收到了确认。 但是- - 就是半天不显示画面。。。 没反应了。<br /><br />瞎折腾了几下， 抱着实时心态， 既然报错说1.11.1， 可能是版本对不上 == ？ 索性干脆安装1.11.1的包， 删掉重来。 终于- -唉， 成功了 - - 撒花！！！<br /><br />下面是详细教程：</th><th style="text-align:center"><img src="https://s1.ax1x.com/2020/06/26/NsEzKe.png" alt="NsEzKe.png"></th></tr></thead><tbody></tbody></table><p><a name="ss2DJ"></a></p><h1>1. 各种依赖：</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install adb ffmpeg libsdl2-2.0.0 make gcc pkg-config meson ninja-build \</span><br><span class="line">    libavcodec-dev libavformat-dev libavutil-dev libsdl2-dev</span><br></pre></td></tr></table></figure></div><p><a name="T1Pew"></a></p><h1>2. 下载</h1><p>**<br />地址：<a href="https://github.com/Genymobile/scrcpy/releases/tag/v1.11" target="_blank" rel="noopener">https://github.com/Genymobile/scrcpy/releases/tag/v1.11</a></p><p><img src="https://s1.ax1x.com/2020/06/26/NsEvvD.png" alt="NsEvvD.png"></p><p>现在圈内两个， 代码：<br />第一个加尾坠“.jar”<br />第二个解压</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">wget -c https://github.com/Genymobile/scrcpy/releases/download/v1.11/scrcpy-server-v1.11</span><br><span class="line">wget -c https://github.com/Genymobile/scrcpy/archive/v1.11.tar.gz</span><br><span class="line"></span><br><span class="line">mv scrcpy-server-v1.11 scrcpy-server-v1.11.jar</span><br><span class="line">tar -zxvf v1.11.tar.gz</span><br></pre></td></tr></table></figure></div><p><a name="Aqkr0"></a></p><h1>3. 安装</h1><p><a name="Tgac6"></a></p><h2 id="安装服务"><a class="header-anchor" href="#安装服务"></a>安装服务</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo install scrcpy-server-v1.11.jar /usr/<span class="built_in">local</span>/bin/scrcpy-server.jar</span><br></pre></td></tr></table></figure></div><p><a name="fMc6q"></a></p><h2 id="编译"><a class="header-anchor" href="#编译"></a>编译</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> scrcpy</span><br><span class="line">meson build --buildtype release --strip -Db_lto=<span class="literal">true</span>  -Dprebuilt_server=../scrcpy-server-v1.11.jar</span><br><span class="line"></span><br><span class="line"><span class="built_in">cd</span> build</span><br><span class="line">ninja</span><br><span class="line"></span><br><span class="line">sudo ninja install</span><br></pre></td></tr></table></figure></div><p>这一步可能出现错误：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ninja: error: <span class="string">'/home/ken/Soft/scrcpy-server-v1.11.jar'</span>,</span><br><span class="line">needed by <span class="string">'server/scrcpy-server'</span>, missing and no known rule to make it</span><br></pre></td></tr></table></figure></div><p>因为美誉找到server 的路径， 因此只需要把那前面下载的文件， 拷贝或者移动到这个路径就好了， 然后重新ninjia</p><p><a name="mX0mD"></a></p><h1>最后</h1><p>插入数据线， 打开USB调试模式，输入scrcpy后手机勾选确认</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">scrcpy</span><br></pre></td></tr></table></figure></div><p>terminal可能会出现如下代码：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">INFO: scrcpy 1.11 &lt;https://github.com/Genymobile/scrcpy&gt;</span><br><span class="line">[100%] /data/<span class="built_in">local</span>/tmp/scrcpy-server</span><br><span class="line"><span class="built_in">bind</span>: Address already <span class="keyword">in</span> use</span><br><span class="line">ERROR: Could not listen on port 27183</span><br></pre></td></tr></table></figure></div><p>端口被占用或无法使用， 我们换一个端口：<br />输入 scrcpy -p 1234<br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">$ scrcpy -p 1234</span><br><span class="line">INFO: scrcpy 1.11 &lt;https://github.com/Genymobile/scrcpy&gt;</span><br><span class="line">[100%] /data/<span class="built_in">local</span>/tmp/scrcpy-server</span><br><span class="line">INFO: Initial texture: 1080x2336</span><br><span class="line">INFO: Device clipboard copied</span><br><span class="line">[server] WARN: Could not inject char u+5509</span><br><span class="line">[server] WARN: Could not inject char u+ff0c</span><br><span class="line">[server] WARN: Could not inject char u+5509</span><br></pre></td></tr></table></figure></div><p>等待一下就好啦！</p><p>Enjoy~</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Disck Manage</title>
      <link href="/Linux/Disck-Manage.html"/>
      <url>/Linux/Disck-Manage.html</url>
      
        <content type="html"><![CDATA[<h1 id="Disck-Manage"><a href="#Disck-Manage" class="headerlink" title="Disck Manage"></a>Disck Manage</h1><p><a name="GCwmO"></a></p><h1 id="Gparted"><a href="#Gparted" class="headerlink" title="Gparted"></a>Gparted</h1><p><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1580726499899-157ae6cb-1cc8-4676-80e1-5b292e750ac5.png#align=left&display=inline&height=566&name=image.png&originHeight=566&originWidth=1064&size=84537&status=done&style=none&width=1064" alt="image.png"><br><a name="6o3II"></a></p><h2 id="磁盘扩容"><a href="#磁盘扩容" class="headerlink" title="磁盘扩容"></a>磁盘扩容</h2><p>之前安装这个deepin系统是做测试用的,所以就随便给了点空间. 后来发现挺好用的, 就一直用了. 但是现在, 50G的内存, 非常吃紧了. 想要扩容. Windows 下, 只能删除磁盘, 不能扩容, 因此, Gparted 就是对小白来说, 最友善的软件了.</p><table><thead><tr><th><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1580726681129-bbf1292f-02ec-430d-97d6-30ad204ea68c.png#align=left&display=inline&height=329&name=image.png&originHeight=390&originWidth=426&size=36105&status=done&style=none&width=359" alt="image.png"></th><th><br /><br /><br /><br />1. 右键点击 选择 Resize<br />1. 拖动滑块, 或者填写数字<br />1. 点击Resize<br />1. 回到主界面后, 选择Apply<br />1. 回到文件夹, 检查确认一下~<br /><br /><br />       完成啦!</th></tr></thead></table><p><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1580726773602-324453b6-daaa-4f8b-8974-f4613398bfe0.png#align=left&display=inline&height=205&name=image.png&originHeight=330&originWidth=569&size=26753&status=done&style=none&width=353" alt="image.png">)<img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1580726735903-383cc9c6-9145-4b67-bb30-391fac844789.png#align=left&display=inline&height=205&name=image.png&originHeight=331&originWidth=587&size=30171&status=done&style=none&width=364" alt="image.png"></p><p><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1580726815513-60343ced-c1b7-4109-8a24-1ce8538df9e0.png#align=left&display=inline&height=402&name=image.png&originHeight=605&originWidth=1083&size=108657&status=done&style=none&width=720" alt="image.png"></p><p>关键词: deepin 磁盘压缩, 磁盘扩容, 图形化操作</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Download Software</title>
      <link href="/Linux/Download-Software.html"/>
      <url>/Linux/Download-Software.html</url>
      
        <content type="html"><![CDATA[<h1 id="Download-Software"><a href="#Download-Software" class="headerlink" title="Download Software"></a>Download Software</h1><p><a name="QK6Hj"></a></p><h1 id="wget"><a href="#wget" class="headerlink" title="wget"></a>wget</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget -c ulr</span><br></pre></td></tr></table></figure></div><p>支持断点续传</p><p><a name="DowT6"></a></p><h1 id="aria2c"><a href="#aria2c" class="headerlink" title="aria2c"></a>aria2c</h1><p>website: <a href="https://aria2.github.io/" target="_blank" rel="noopener">https://aria2.github.io/</a><br />install:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install aria2</span><br></pre></td></tr></table></figure></div><p>aria2 is a <strong>lightweight</strong> multi-protocol &amp; multi-source command-line <strong>download utility</strong>. It supports <strong>HTTP/HTTPS</strong>, <strong>FTP</strong>, <strong>SFTP</strong>, <strong>BitTorrent</strong> and <strong>Metalink</strong>. aria2 can be manipulated via built-in <strong>JSON-RPC</strong> and <strong>XML-RPC</strong> interfaces.</p><p><a name="JJbwG"></a></p><h2 id="Examples"><a href="#Examples" class="headerlink" title="Examples"></a>Examples</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Usage Examples</span></span><br><span class="line"><span class="comment">#Command-line scares you off? No, aria2 is really easy to use!!</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Download from WEB:</span></span><br><span class="line">aria2c http://example.org/mylinux.iso</span><br><span class="line"></span><br><span class="line"><span class="comment">#Download from 2 sources:</span></span><br><span class="line">aria2c http://a/f.iso ftp://b/f.iso</span><br><span class="line"></span><br><span class="line"><span class="comment">#Download using 2 connections per host:</span></span><br><span class="line">aria2c -x2 http://a/f.iso</span><br><span class="line"></span><br><span class="line"><span class="comment">#BitTorrent:</span></span><br><span class="line">aria2c http://example.org/mylinux.torrent</span><br><span class="line"></span><br><span class="line"><span class="comment">#BitTorrent Magnet URI:</span></span><br><span class="line">aria2c <span class="string">'magnet:?xt=urn:btih:248D0A1CD08284299DE78D5C1ED359BB46717D8C'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Metalink:</span></span><br><span class="line">aria2c http://example.org/mylinux.metalink</span><br><span class="line"></span><br><span class="line"><span class="comment">#Download URIs found in text file:</span></span><br><span class="line">aria2c -i uris.txt</span><br></pre></td></tr></table></figure></div><p><a name="48Jvx"></a></p><h1 id="curl"><a href="#curl" class="headerlink" title="curl"></a>curl</h1><p>reference: <a href="https://curl.haxx.se/docs/manpage.html" target="_blank" rel="noopener">https://curl.haxx.se/docs/manpage.html</a></p><p>curl is a tool to transfer data from or to a server, using one of the supported protocols (DICT, FILE, FTP, FTPS, GOPHER, HTTP, HTTPS, IMAP, IMAPS, LDAP, LDAPS, POP3, POP3S, RTMP, RTSP, SCP, SFTP, SMB, SMBS, SMTP, SMTPS, TELNET and TFTP). The command is designed to work without user interaction.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl ftps://files.are.secure.com/secrets.txt</span><br></pre></td></tr></table></figure></div><p>more tutorial: <a href="https://curl.haxx.se/docs/manual.html" target="_blank" rel="noopener">https://curl.haxx.se/docs/manual.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GIMP</title>
      <link href="/Linux/GIMP.html"/>
      <url>/Linux/GIMP.html</url>
      
        <content type="html"><![CDATA[<h1 id="GIMP"><a href="#GIMP" class="headerlink" title="GIMP"></a>GIMP</h1><h1 id="Line"><a href="#Line" class="headerlink" title="Line"></a>Line</h1><h2 id="Straight-line"><a href="#Straight-line" class="headerlink" title="Straight line"></a>Straight line</h2><ol><li><code>鼠标左键</code> 选择起始位置</li><li>按住<code>shift</code>， 锁定</li><li>松开<code>鼠标左键</code>， 不松<code>shift</code></li><li>移动到终点，点击<code>鼠标左键</code></li></ol><h2 id="Rectangle"><a href="#Rectangle" class="headerlink" title="Rectangle"></a>Rectangle</h2><ol><li>Rectangle select tools (select a region)</li><li>Edit -&gt; Stroke selection -&gt; Stroke</li></ol><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>維運</title>
      <link href="/Linux/Matain.html"/>
      <url>/Linux/Matain.html</url>
      
        <content type="html"><![CDATA[<h1 id="維運"><a href="#維運" class="headerlink" title="維運"></a>維運</h1><p>/var/log/secure 詳細 <a href="https://www.imzcy.cn/1274.html" target="_blank" rel="noopener">https://www.imzcy.cn/1274.html</a><br />系统监视: <a href="https://www.cnblogs.com/zhangjianghua/p/6525920.html" target="_blank" rel="noopener">https://www.cnblogs.com/zhangjianghua/p/6525920.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Shop store</title>
      <link href="/Linux/Shop-store.html"/>
      <url>/Linux/Shop-store.html</url>
      
        <content type="html"><![CDATA[<h1 id="Shop-store"><a href="#Shop-store" class="headerlink" title="Shop store"></a>Shop store</h1><p><a name="oOuU3"></a></p><h1 id="apt"><a href="#apt" class="headerlink" title="apt"></a>apt</h1><p><a name="is6uQ"></a></p><h1 id="snap"><a href="#snap" class="headerlink" title="snap"></a>snap</h1><p>website: <a href="https://snapcraft.io/store" target="_blank" rel="noopener">https://snapcraft.io/store</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">systemctl restart snapd</span><br><span class="line"></span><br><span class="line">sudo snap install **</span><br></pre></td></tr></table></figure></div><p>获得下载链接:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -H <span class="string">'Snap-Device-Series: 16'</span> http://api.snapcraft.io/v2/snaps/info/anbox</span><br></pre></td></tr></table></figure></div><p>ulr 在结果中(页面查找download可以迅速定位):<br />“download”:{“deltas”:[],”sha3-384”:”76f4f975d6e465f7362f176a9c4ab49067224157d0d611d243596b82cd24c78f51c3d2a29f382882967bb5ae5fbf1858”,”size”:81797120,”url”:”<a href="https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_202.snap&quot;}" target="_blank" rel="noopener">https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_202.snap&quot;}</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="string">"channel-map"</span>:[&#123;<span class="string">"channel"</span>:&#123;<span class="string">"architecture"</span>:<span class="string">"amd64"</span>,<span class="string">"name"</span>:<span class="string">"stable"</span>,<span class="string">"released-at"</span>:<span class="string">"2020-01-01T22:39:50.563736+00:00"</span>,<span class="string">"risk"</span>:<span class="string">"stable"</span>,<span class="string">"track"</span>:<span class="string">"latest"</span>&#125;,<span class="string">"created-at"</span>:<span class="string">"2020-01-01T22:38:31.952619+00:00"</span>,<span class="string">"download"</span>:&#123;<span class="string">"deltas"</span>:[],<span class="string">"sha3-384"</span>:<span class="string">"f385d44ecfdfa9268a2be6b2fd98f29ac5d38d80d374e92cdc45ba07eac16c6fe9e178dbf675f579d0256cf52a483cb7"</span>,<span class="string">"size"</span>:81793024,<span class="string">"url"</span>:<span class="string">"https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_204.snap"</span>&#125;,<span class="string">"revision"</span>:204,<span class="string">"type"</span>:<span class="string">"app"</span>,<span class="string">"version"</span>:<span class="string">"v1.12"</span>&#125;,</span><br><span class="line">&#123;<span class="string">"channel"</span>:&#123;<span class="string">"architecture"</span>:<span class="string">"i386"</span>,<span class="string">"name"</span>:<span class="string">"stable"</span>,<span class="string">"released-at"</span>:<span class="string">"2020-01-01T22:42:08.624199+00:00"</span>,<span class="string">"risk"</span>:<span class="string">"stable"</span>,<span class="string">"track"</span>:<span class="string">"latest"</span>&#125;,<span class="string">"created-at"</span>:<span class="string">"2020-01-01T22:41:21.457669+00:00"</span>,<span class="string">"download"</span>:&#123;<span class="string">"deltas"</span>:[],<span class="string">"sha3-384"</span>:<span class="string">"201b9a486e02fa8b06b7a1b1fad002757cc64b3982ba1fff5e5b11a82802fba31a0389d0aa5affba986d2400df273d31"</span>,<span class="string">"size"</span>:82841600,<span class="string">"url"</span>:<span class="string">"https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_205.snap"</span>&#125;,<span class="string">"revision"</span>:205,<span class="string">"type"</span>:<span class="string">"app"</span>,<span class="string">"version"</span>:<span class="string">"v1.12"</span>&#125;,</span><br><span class="line">&#123;<span class="string">"channel"</span>:&#123;<span class="string">"architecture"</span>:<span class="string">"amd64"</span>,<span class="string">"name"</span>:<span class="string">"beta"</span>,<span class="string">"released-at"</span>:<span class="string">"2020-01-18T07:04:58.924188+00:00"</span>,<span class="string">"risk"</span>:<span class="string">"beta"</span>,<span class="string">"track"</span>:<span class="string">"latest"</span>&#125;,<span class="string">"created-at"</span>:<span class="string">"2020-01-18T07:03:58.524875+00:00"</span>,<span class="string">"download"</span>:&#123;<span class="string">"deltas"</span>:[],<span class="string">"sha3-384"</span>:<span class="string">"f608e1c8bc2fee937a1dead15ece1be4cc79fbb06804e3f405410a69933b1282967ce138454b92c6c6f15fd135b78e3c"</span>,<span class="string">"size"</span>:85434368,<span class="string">"url"</span>:<span class="string">"https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_208.snap"</span>&#125;,<span class="string">"revision"</span>:208,<span class="string">"type"</span>:<span class="string">"app"</span>,<span class="string">"version"</span>:<span class="string">"v1.12.1-1-g31bd950"</span>&#125;,</span><br><span class="line">&#123;<span class="string">"channel"</span>:&#123;<span class="string">"architecture"</span>:<span class="string">"armhf"</span>,<span class="string">"name"</span>:<span class="string">"beta"</span>,<span class="string">"released-at"</span>:<span class="string">"2020-01-18T08:02:17.160034+00:00"</span>,<span class="string">"risk"</span>:<span class="string">"beta"</span>,<span class="string">"track"</span>:<span class="string">"latest"</span>&#125;,<span class="string">"created-at"</span>:<span class="string">"2020-01-18T08:01:25.981004+00:00"</span>,<span class="string">"download"</span>:&#123;<span class="string">"deltas"</span>:[],<span class="string">"sha3-384"</span>:<span class="string">"f44ce790760d736855c078b5679737cc6bf013ee91d28860fc9fb5cade2e0bf57ae4c81d987b2081e7874a7027c97f5a"</span>,<span class="string">"size"</span>:73723904,<span class="string">"url"</span>:<span class="string">"https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_210.snap"</span>&#125;,<span class="string">"revision"</span>:210,<span class="string">"type"</span>:<span class="string">"app"</span>,<span class="string">"version"</span>:<span class="string">"v1.12.1-1-g31bd950"</span>&#125;,</span><br><span class="line">&#123;<span class="string">"channel"</span>:&#123;<span class="string">"architecture"</span>:<span class="string">"i386"</span>,<span class="string">"name"</span>:<span class="string">"beta"</span>,<span class="string">"released-at"</span>:<span class="string">"2020-01-18T07:05:48.607438+00:00"</span>,<span class="string">"risk"</span>:<span class="string">"beta"</span>,<span class="string">"track"</span>:<span class="string">"latest"</span>&#125;,<span class="string">"created-at"</span>:<span class="string">"2020-01-18T07:04:34.542649+00:00"</span>,<span class="string">"download"</span>:&#123;<span class="string">"deltas"</span>:[],<span class="string">"sha3-384"</span>:<span class="string">"8a330eb9981ef9957556515cda2ee8b8f4ae2a458d93488d62182fe5a4a60d0fb888e3d18ea420fe0dbf0e4ec39381f2"</span>,<span class="string">"size"</span>:86736896,<span class="string">"url"</span>:<span class="string">"https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_209.snap"</span>&#125;,<span class="string">"revision"</span>:209,<span class="string">"type"</span>:<span class="string">"app"</span>,<span class="string">"version"</span>:<span class="string">"v1.12.1-1-g31bd950"</span>&#125;,</span><br><span class="line">&#123;<span class="string">"channel"</span>:&#123;<span class="string">"architecture"</span>:<span class="string">"amd64"</span>,<span class="string">"name"</span>:<span class="string">"edge"</span>,<span class="string">"released-at"</span>:<span class="string">"2019-12-10T00:14:49.361567+00:00"</span>,<span class="string">"risk"</span>:<span class="string">"edge"</span>,<span class="string">"track"</span>:<span class="string">"latest"</span>&#125;,<span class="string">"created-at"</span>:<span class="string">"2019-12-10T00:12:26.588992+00:00"</span>,<span class="string">"download"</span>:&#123;<span class="string">"deltas"</span>:[],<span class="string">"sha3-384"</span>:<span class="string">"76f4f975d6e465f7362f176a9c4ab49067224157d0d611d243596b82cd24c78f51c3d2a29f382882967bb5ae5fbf1858"</span>,<span class="string">"size"</span>:81797120,<span class="string">"url"</span>:<span class="string">"https://api.snapcraft.io/api/v1/snaps/download/M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G_202.snap"</span>&#125;,<span class="string">"revision"</span>:202,<span class="string">"type"</span>:<span class="string">"app"</span>,<span class="string">"version"</span>:<span class="string">"v1.12-1-g71df317"</span>&#125;],<span class="string">"default-track"</span>:null,<span class="string">"name"</span>:<span class="string">"scrcpy"</span>,<span class="string">"snap"</span>:&#123;<span class="string">"license"</span>:<span class="string">"Apache-2.0"</span>,<span class="string">"name"</span>:<span class="string">"scrcpy"</span>,<span class="string">"prices"</span>:&#123;&#125;,<span class="string">"publisher"</span>:&#123;<span class="string">"display-name"</span>:<span class="string">"sisco311"</span>,<span class="string">"id"</span>:<span class="string">"jQgc0rEVirS9Mk0Ud0UWWPFSwlGF3yVu"</span>,<span class="string">"username"</span>:<span class="string">"sisco311"</span>,<span class="string">"validation"</span>:<span class="string">"unproven"</span>&#125;,<span class="string">"snap-id"</span>:<span class="string">"M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G"</span>,<span class="string">"store-url"</span>:<span class="string">"https://snapcraft.io/scrcpy"</span>,<span class="string">"summary"</span>:<span class="string">"Display and control your Android device"</span>,<span class="string">"title"</span>:<span class="string">"scrcpy"</span>&#125;,<span class="string">"snap-id"</span>:<span class="string">"M7yvgnqOvyQj64bolfpawIAEwHv7dQ5G"</span>&#125;</span><br></pre></td></tr></table></figure></div><p><a name="kYhNx"></a></p><h1 id="npm"><a href="#npm" class="headerlink" title="npm"></a>npm</h1><p>We’re npm, Inc., the company behind Node package manager, the npm Registry, and npm CLI. We offer those to the community for free, but our day job is building and selling useful tools for developers like you. –<a href="https://www.npmjs.com/" target="_blank" rel="noopener">npm</a><br /><br><br />Reference:<a href="https://blog.csdn.net/chenjh213/article/details/45692987" target="_blank" rel="noopener">https://blog.csdn.net/chenjh213/article/details/45692987</a><br /><br><a name="BOK4s"></a></p><h2 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">npm install &lt;registry-name&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment"># With mirror site</span></span><br><span class="line">npm install &lt;registry-name&gt; --registry https://registry.npm.taobao.org</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Other Mirrows</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">https://registry.npmjs.org</span></span><br><span class="line"><span class="string">https://r.cnpmjs.org</span></span><br><span class="line"><span class="string">https://registry.npm.taobao.org</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure></div><p><a name="jEM3l"></a></p><h2 id="Mirrors"><a href="#Mirrors" class="headerlink" title="Mirrors"></a>Mirrors</h2><p>2.永久设置:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm config <span class="built_in">set</span> registry https://registry.npmjs.org  </span><br><span class="line">npm config list <span class="comment">#查看更新后的config设置</span></span><br></pre></td></tr></table></figure></div><p><a name="7uFqK"></a></p><h1 id="apm"><a href="#apm" class="headerlink" title="apm"></a>apm</h1><p>Atom pakcages manager</p><h2 id="mirror"><a href="#mirror" class="headerlink" title="mirror"></a>mirror</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apm config <span class="built_in">set</span> registry http://registry.npm.taobao.org</span><br></pre></td></tr></table></figure></div><p>reference: <a href="https://blog.csdn.net/lj402159806/article/details/76862981" target="_blank" rel="noopener">提辖鲁</a></p><h2 id="install"><a href="#install" class="headerlink" title="install"></a>install</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apm install atom-latex</span><br></pre></td></tr></table></figure></div><h1 id="flatpak"><a href="#flatpak" class="headerlink" title="flatpak"></a>flatpak</h1><p><a name="8tiox"></a></p><h2 id="What-is-flatpak"><a href="#What-is-flatpak" class="headerlink" title="What is flatpak?"></a>What is flatpak?</h2><p>Flatpak is a next-generation technology for building and distributing desktop applications on Linux. Flatpak is developed by an independent community, made up of contributors, volunteers and supporting organizations. It is a true upstream open source project, dedicated to providing technology and services that can be used by all, with no vendor lock-in. We have strong links to other Free Software projects, including the Freedesktop project. –<a href="https://www.flatpak.org/" target="_blank" rel="noopener">Flatpck</a></p><p><a name="tI1qp"></a></p><h2 id="Install-flatpak"><a href="#Install-flatpak" class="headerlink" title="Install flatpak"></a>Install flatpak</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">apt install flatpak</span><br><span class="line">apt install gnome-software-plugin-flatpak</span><br><span class="line">flatpak remote-add --<span class="keyword">if</span>-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo</span><br></pre></td></tr></table></figure></div><p>To complete setup, restart your system. Now all you have to do is install some apps!</p><p><a name="sbeDx"></a></p><h2 id="Install-and-run-apps-from-flatpak"><a href="#Install-and-run-apps-from-flatpak" class="headerlink" title="Install and run apps from flatpak"></a>Install and run apps from flatpak</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># isntall OBS</span></span><br><span class="line">flatpak install flathub com.obsproject.Studio</span><br><span class="line"></span><br><span class="line"><span class="comment"># run OBS</span></span><br><span class="line">flatpak run com.obsproject.Studio</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Start With Raspberry pi</title>
      <link href="/Linux/Start-With-Rasberry-pi.html"/>
      <url>/Linux/Start-With-Rasberry-pi.html</url>
      
        <content type="html"><![CDATA[<h1>Start With Raspberry pi</h1><p><a name="zrj6g"></a></p><h1>apt Mirror</h1><p>reference: <a href="https://mirrors.tuna.tsinghua.edu.cn/help/raspbian/" target="_blank" rel="noopener">https://mirrors.tuna.tsinghua.edu.cn/help/raspbian/</a><br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 编辑 `/etc/apt/sources.list` 文件，删除原文件所有内容，用以下内容取代：</span></span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib</span><br><span class="line">deb-src http://mirrors.tuna.tsinghua.edu.cn/raspbian/raspbian/ buster main non-free contrib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 编辑 `/etc/apt/sources.list.d/raspi.list` 文件，删除原文件所有内容，用以下内容取代：</span></span><br><span class="line">deb http://mirrors.tuna.tsinghua.edu.cn/raspberrypi/ buster main ui</span><br></pre></td></tr></table></figure></div><p><a name="7Ngbi"></a></p><h1>Virtual Keyboard</h1><p>reference:<a href="https://www.cnblogs.com/little-kwy/p/9478961.html" target="_blank" rel="noopener">https://www.cnblogs.com/little-kwy/p/9478961.html</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install matchbox-keyboard</span><br><span class="line">sudo apt-get install libmatchbox1 -y</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /usr/bin/toggle-matchbox-keyboard.sh</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment">#This script toggle the virtual keyboard</span></span><br><span class="line"></span><br><span class="line">PID=`pidof matchbox-keyboard`</span><br><span class="line"><span class="keyword">if</span> [ ! -e <span class="variable">$PID</span> ]; <span class="keyword">then</span></span><br><span class="line">  killall matchbox-keyboard</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"> matchbox-keyboard&amp;</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /usr/share/applications/toggle-matchbox-keyboard.desktop</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Name=Toggle Matchbox Keyboard</span><br><span class="line">Comment=Toggle Matchbox Keyboard</span><br><span class="line">Exec=toggle-matchbox-keyboard.sh</span><br><span class="line">Type=Application</span><br><span class="line">Icon=matchbox-keyboard.png</span><br><span class="line">Categories=Panel;Utility;MB</span><br><span class="line">X-MB-INPUT-MECHANSIM=True</span><br></pre></td></tr></table></figure></div><p><br />It’s failed and I don’t know why. But there is a keyboard for rasberrypi, so…<br><img src="https://s1.ax1x.com/2020/06/26/Nse24I.png" alt="Nse24I.png"></p><h1>Screen Shot</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install scrot</span><br><span class="line">scrot test.png</span><br><span class="line"></span><br><span class="line"><span class="comment"># screen shot for</span></span><br><span class="line">scrot -s 0 0 100 100</span><br><span class="line"><span class="comment"># Screen shot after 10s</span></span><br><span class="line">scrot -d 10</span><br></pre></td></tr></table></figure></div><p><a name="7c6vp"></a></p><h1>Screen Record</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install vokoscreen</span><br><span class="line">vokoscreen</span><br></pre></td></tr></table></figure></div><p><a name="UitKE"></a></p><h1>USB Camera</h1><p>reference: <a href="https://blog.csdn.net/yjp19871013/article/details/80147803" target="_blank" rel="noopener">https://blog.csdn.net/yjp19871013/article/details/80147803</a><br><a name="ehp8l"></a></p><h2 id="Take-a-Photo"><a class="header-anchor" href="#Take-a-Photo"></a>Take a Photo</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install fswebcam</span><br><span class="line">fswebcam /dev/video0 ~/image.jpg <span class="comment">#/dev/vedio0 is the vedio</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">raspistill -o ugi.jpg -w 2560 -h 1440 -v <span class="comment"># -vf</span></span><br></pre></td></tr></table></figure></div><p><a name="Lutis"></a></p><h2 id="Stream-image"><a class="header-anchor" href="#Stream-image"></a>Stream image</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install luvcview</span><br><span class="line">luvcview -s <span class="number">400</span>x400</span><br></pre></td></tr></table></figure></div><p><br />I got an error code after a lunached the command. The image poped out and crashed after about 1s.<br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">luvcview: ../../src/xcb_io.c:165: dequeue_pending_request:</span><br><span class="line">  Assertion `!xcb_xlib_unknown_req_in_deq<span class="string">' failed.</span></span><br></pre></td></tr></table></figure></div><p><br />But I find that once you launched your camera, you need to keep the camera moving for a while and so, it can run smoothly.<br /></p><p><a name="Z6Lcj"></a></p><h1>自动免密码登录</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://blog.csdn.net/zexzex_/article/details/78490054</span></span><br><span class="line">sudo raspi-config</span><br><span class="line">选择Boot Options</span><br><span class="line">Desktop / CLT</span><br><span class="line">console Autologin Text console int3 或者 Desktop Autologin Desktop GUI 桌面环境</span><br><span class="line">finish</span><br><span class="line">reboot</span><br></pre></td></tr></table></figure></div><h1>开机任务</h1><p>参考: <a href="https://blog.csdn.net/u011720560/article/details/80591460" target="_blank" rel="noopener">yuanfujie</a></p><p>進入隱藏文件夾， 然後創建一個文件夾和文件， 做開機啓動腳本</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/.config</span><br><span class="line"><span class="built_in">cd</span> /home/pi/.config</span><br><span class="line">mkdir autostart</span><br><span class="line"><span class="built_in">cd</span> autostart</span><br><span class="line"><span class="comment"># 創建自啓腳本</span></span><br><span class="line">sudo nano myapp.desktop</span><br></pre></td></tr></table></figure></div><p>在<code>nano</code>後黏貼代碼如下。重點在<code>Exec=XXX</code>;<br>比如，我的需要執行的腳本路徑爲<span style="background:salmon">/home/pi/Blive</span></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[Desktop Entry]</span><br><span class="line">Type&#x3D;Application</span><br><span class="line">Exec&#x3D;&#x2F;home&#x2F;pi&#x2F;Blive</span><br><span class="line">Icon&#x3D;ICON_PATH</span><br></pre></td></tr></table></figure></div><p>親測有效</p><h2 id="Enjoy～"><a class="header-anchor" href="#Enjoy～"></a>Enjoy～</h2><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>System</title>
      <link href="/Linux/System.html"/>
      <url>/Linux/System.html</url>
      
        <content type="html"><![CDATA[<h1 id="System"><a href="#System" class="headerlink" title="System"></a>System</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">Basic</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PATH</span><br><span class="line"><span class="built_in">echo</span> PATH=<span class="variable">$PATH</span>:\<span class="variable">$PWD</span> &gt;&gt; ~/.bashrc</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br><span class="line"></span><br><span class="line">PATH</span><br><span class="line"><span class="built_in">echo</span> PATH=<span class="variable">$PATH</span>:\<span class="variable">$PWD</span> &gt;&gt; /etc/profile</span><br><span class="line"><span class="built_in">source</span> /etc/profile</span><br><span class="line"></span><br><span class="line">apt-cache search readline</span><br><span class="line"></span><br><span class="line">抽出整列  awk <span class="string">'&#123;print $1&#125;'</span> filename 整列打印</span><br><span class="line">awk <span class="string">'NR=='</span><span class="variable">$&#123;fn&#125;</span><span class="string">'&#123;print&#125;'</span> counts.TMM_normalized.FPKM | awk <span class="string">'&#123;print $2&#125;'</span></span><br><span class="line"></span><br><span class="line">合并成一个文件，两列排列 paste -d <span class="string">"\t"</span> eng.txt chi.txt</span><br><span class="line">Sed</span><br><span class="line">sed -i <span class="string">'1,5d'</span> <span class="variable">$&#123;fn&#125;</span>.meg</span><br><span class="line">sed <span class="string">'y/#/&gt;/'</span> <span class="variable">$&#123;fn&#125;</span>.meg</span><br><span class="line">sed</span><br><span class="line"><span class="string">'s/原字符串/替换字符串/'</span></span><br><span class="line"></span><br><span class="line">数字大小排序：sort -n  test.txt | <span class="keyword">while</span> <span class="built_in">read</span> num ;<span class="keyword">do</span> <span class="built_in">echo</span> <span class="variable">$num</span> ; sum=`expr <span class="variable">$sum</span> + <span class="variable">$num</span> 2&gt; /dev/null`; <span class="built_in">echo</span> <span class="variable">$sum</span> &gt; /tmp/sum.tmp ;<span class="keyword">done</span> ; <span class="built_in">echo</span> -n <span class="string">"sum is :"</span> ;cat /tmp/sum.tmp</span><br><span class="line"> sort -n C.txt &gt;T.txt</span><br><span class="line"></span><br><span class="line">tail</span><br><span class="line">实例3：从第5行开始显示文件</span><br><span class="line">命令：</span><br><span class="line">tail -n +5 log2014.log</span><br><span class="line"></span><br><span class="line">　二、去掉所有重复的数据行</span><br><span class="line">cat data1.txt | sort | uniq</span><br><span class="line"></span><br><span class="line">./faSomeRecords db.fasta id.txt query.fasta</span><br><span class="line"><span class="built_in">echo</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[41;36m something here \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[40;37m red \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[41;37m blue \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[42;37m green \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[43;37m 黄底白字 \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[44;37m 蓝底白字 \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[45;37m 紫底白字 \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[46;37m 天蓝底白字 \033[0m"</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"\033[47;30m 白底黑字 \033[0m"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#去除颜色</span></span><br><span class="line"><span class="comment">#http://www.commandlinefu.com/com ... characters-with-sed</span></span><br><span class="line">sed -r <span class="string">"s:\x1B\[[0-9;]*[mK]::g"</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">R</span><br><span class="line">Local 装包 R CMD INSTALL limma.tar.gz</span><br><span class="line">install.packages(<span class="string">"rJava"</span>)</span><br><span class="line">Trinity</span><br><span class="line">Run Trinity</span><br><span class="line">Version 2013.</span><br><span class="line">./../Trinity --seqType fq --max_memory 2G --left reads.left.fq --right reads.right.fq --SS_lib_type FR   -CPU 4</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">IDSS</span><br><span class="line">~/soft/trinityrnaseq_r20131110/Trinity.pl --seqType fq --max_memory 2G --single ALL.fastaq  --SS_lib_type F   -CPU 4     </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">RSEM</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Ttinity mode:</span><br><span class="line"></span><br><span class="line">~/trinityrnaseq-Trinity-v2.4.0/util/align_and_estimate_abundance.pl --transcripts Trinity.fasta --seqType fq --left reads_1.fq --right reads_2.fq --est_method RSEM --aln_method bowtie --trinity_mode --prep_reference --output_dir counts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">~/trinityrnaseq-Trinity-v2.4.0/util/align_and_estimate_abundance.pl --transcripts gene_MAP.fasta --seqType fq --single ERR1698194_1.fastq.gz --est_method RSEM --aln_method bowtie2 --trinity_mode --prep_reference --output_dir counts</span><br><span class="line"></span><br><span class="line">IDSS</span><br><span class="line"></span><br><span class="line">nohup ~/T2-Trinity-v2.5.1/util/align_and_estimate_abundance.pl --transcripts Trinity.fasta --seqType fq --single SRR771602.fastq  --est_method RSEM --prep_reference --aln_method bowtie --trinity_mode --output_dir 0dpe &amp;</span><br><span class="line"></span><br><span class="line">Nontrinity mod:</span><br><span class="line">~/trinityrnaseq-Trinity-v2.5.1/Analysis/DifferentialExpression/run_DE_analysis.pl --matrix counts --method edgeR --dispersion 0.1 / --samples filename</span><br><span class="line"></span><br><span class="line">~/trinityrnaseq-Trinity-v2.4.0/util/align_and_estimate_abundance.pl --transcripts gene_MAP.fasta --seqType fq --single ERR1698194_1.fastq.gz --est_method RSEM --aln_method bowtie2 --prep_reference --output_dir counts</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Differantiation</span><br><span class="line">nohup   &amp;</span><br><span class="line"></span><br><span class="line">~/trinityrnaseq-Trinity-v2.5.1/Analysis/DifferentialExpression/analyze_diff_expr.pl --matrix ../RSEM.isoform.TMM.EXPR.matrix -P 1e-3 -C 2</span><br><span class="line"></span><br><span class="line">Blast+</span><br><span class="line"></span><br><span class="line">makeblastdb -<span class="keyword">in</span> db.fasta -dbtype prot/nucl -parse_seqids -out dbname</span><br><span class="line"></span><br><span class="line">~/ncbi-blast-2.7.1+/bin/blastx -query GP10000.fasta -out blast.out -db ~/data/swissport/uniprot_sprot -outfmt <span class="string">"6 qacc sacc evalue stitle sblastname"</span> -evalue 1e-5 -max_target_seqs 1 -num_threads 8 -max_hsps 1</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#1.如何写一般的邮件：</span></span><br><span class="line"></span><br><span class="line">mail <span class="built_in">test</span>@126.com  Cc 编辑抄送对象，Subject:邮件主题,输入回车，邮件正文后，按Ctrl-D结束</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.快速发送方式：</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"邮件正文"</span> | mail -s 邮件主题 591465908@qq.com</span><br><span class="line"></span><br><span class="line"><span class="comment">#3.以文件内容作为邮件正文来发送：</span></span><br><span class="line"> mail -s <span class="built_in">test</span> <span class="built_in">test</span>@126.com &lt; test.txt</span><br><span class="line"></span><br><span class="line"><span class="comment">#4.发送带附件的邮件：</span></span><br><span class="line">uuencode 附件名称 附件显示名称 | mail -s 邮件主题 发送地址</span><br><span class="line"></span><br><span class="line"><span class="comment">#例如： uuencode test.txt test.txt | mail -s Test test@126.com</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## Release Cached RAM</span></span><br><span class="line"><span class="built_in">echo</span> 1 &gt; /proc/sys/vm/drop_caches</span><br><span class="line"></span><br><span class="line"><span class="comment">## for GPU</span></span><br><span class="line"></span><br><span class="line">lspci| grep -i vga  <span class="comment"># Check the GPU at prsent</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">## systen monitor ##</span></span><br><span class="line">sudo s-tui</span><br><span class="line"></span><br><span class="line"><span class="comment">## system monitor on window</span></span><br><span class="line">gnome-system-monitor</span><br><span class="line"></span><br><span class="line">byzanz-record -d 40 -x 0 -y 0 -w 400 -h 320 byzanz-demo.gif</span><br><span class="line"></span><br><span class="line">其中：</span><br><span class="line"></span><br><span class="line">    -d 40 为录制的时长为 40 秒</span><br><span class="line">    -x 0 录制区域的横坐标</span><br><span class="line">    -y 0 录制区域的纵坐标，记住：屏幕右上角为原点（0,0）</span><br><span class="line">    -w 400 录制区域的宽度</span><br><span class="line">    -h 320 录制区域的高度</span><br><span class="line"></span><br><span class="line">byzanz-demo.gif 保存的文件名</span><br><span class="line"></span><br><span class="line"><span class="comment">###snap shout</span></span><br><span class="line"></span><br><span class="line">xwd -silent -root | convert xwd:- -crop 800x600+0+76 test.png</span><br><span class="line"></span><br><span class="line"><span class="comment">## for fun</span></span><br><span class="line">banner</span><br><span class="line">figlet</span><br><span class="line">toilet</span><br><span class="line"></span><br><span class="line"><span class="comment">#scrcpy connect</span></span><br><span class="line">adb tcpip 5555</span><br><span class="line">adb connect 192.168.3.2:5555</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Case</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">case</span> <span class="variable">$Random</span> <span class="keyword">in</span></span><br><span class="line">1)</span><br><span class="line">/media/ken/Data/Python-Voice/speak.sh <span class="string">"WARNNING!"</span></span><br><span class="line">;;</span><br><span class="line">2)</span><br><span class="line">/media/ken/Data/Python-Voice/speak.sh <span class="string">"PLEASE_HELP_ME!"</span></span><br><span class="line">;;</span><br><span class="line">3)</span><br><span class="line">/media/ken/Data/Python-Voice/speak.sh <span class="string">"WARNNING!"</span></span><br><span class="line">/media/ken/Data/Python-Voice/speak.sh <span class="string">"I_DONT_WANT_TO_GO"</span></span><br><span class="line"><span class="keyword">esac</span></span><br><span class="line"></span><br><span class="line">pstree -up</span><br><span class="line"></span><br><span class="line"><span class="comment">#参数选择：</span></span><br><span class="line"><span class="comment">#-A  ：各程序树之间以 ASCII 字元來連接；</span></span><br><span class="line"><span class="comment">#-p  ：同时列出每个 process 的 PID；</span></span><br><span class="line"><span class="comment">#-u  ：同时列出每个 process 的所屬账户名称。</span></span><br></pre></td></tr></table></figure></div><p><a name="8BgJE"></a></p><h1 id="Time"><a href="#Time" class="headerlink" title="Time"></a>Time</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://www.cnblogs.com/janezhao/p/9732157.html</span></span><br><span class="line">time1=$(date)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$time1</span></span><br><span class="line"></span><br><span class="line">time2=$(date <span class="string">"+%Y%m%d%H%M%S"</span>)</span><br><span class="line"><span class="built_in">echo</span> <span class="variable">$time2</span></span><br><span class="line"><span class="comment">#20180930155515</span></span><br></pre></td></tr></table></figure></div><p><a name="ZneEZ"></a></p><h1 id="Font"><a href="#Font" class="headerlink" title="Font"></a>Font</h1><p>reference: <a href="https://blog.csdn.net/u013214671" target="_blank" rel="noopener">某某某的账号</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看所有字体：</span></span><br><span class="line"><span class="built_in">fc</span>-list</span><br><span class="line"></span><br><span class="line"><span class="comment">#查看中文字体</span></span><br><span class="line"><span class="built_in">fc</span>-list :lang=zh</span><br></pre></td></tr></table></figure></div><p><a name="zracp"></a></p><h1 id="查看硬件"><a href="#查看硬件" class="headerlink" title="查看硬件"></a>查看硬件</h1><p><a name="IPgOq"></a></p><h2 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">lscpu</span><br><span class="line"></span><br><span class="line"><span class="comment"># 网卡</span></span><br><span class="line">lspci | grep -i <span class="string">'eth'</span></span><br></pre></td></tr></table></figure></div><h1 id="SCP"><a href="#SCP" class="headerlink" title="SCP"></a>SCP</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Download files from server</span></span><br><span class="line">scp -P 8022 root@192.168.3.6:~/test.md .</span><br><span class="line"></span><br><span class="line"><span class="comment"># Upload files to server</span></span><br><span class="line">scp -P 8022 test.md root@192.168.3.6:~/</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Termux</title>
      <link href="/Linux/Termux.html"/>
      <url>/Linux/Termux.html</url>
      
        <content type="html"><![CDATA[<h1 id="Termux"><a href="#Termux" class="headerlink" title="Termux"></a>Termux</h1><p><a name="6MmZq"></a></p><h1 id="1-SSH"><a href="#1-SSH" class="headerlink" title="1. SSH"></a>1. SSH</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pkg install openssh <span class="comment"># 安装ssh</span></span><br><span class="line">passwd <span class="comment"># 设置登录密码</span></span><br><span class="line"></span><br><span class="line">ifconfig <span class="comment"># 获取ip (手机电脑链接同一路由器/局域网)</span></span><br><span class="line">whoami <span class="comment"># 获取用户名</span></span><br><span class="line"></span><br><span class="line">sshd <span class="comment"># 开启 ssh 服务</span></span><br></pre></td></tr></table></figure></div><p><a name="uZy27"></a></p><h1 id="2-Storage"><a href="#2-Storage" class="headerlink" title="2. Storage"></a>2. Storage</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#建立storage</span></span><br><span class="line"></span><br><span class="line">termux-setup-storage <span class="comment">#(手机需要授予权限)</span></span><br></pre></td></tr></table></figure></div><p><a name="L2AxH"></a></p><h1 id="3-Mirror"><a href="#3-Mirror" class="headerlink" title="3. Mirror"></a>3. Mirror</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vi <span class="variable">$PREFIX</span>/etc/apt/sources.list <span class="comment"># 注释掉原本该源，并添加清华镜像</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># The main termux repository:</span></span><br><span class="line"><span class="comment">#deb https://termux.org/packages/ stable main</span></span><br><span class="line">deb https://mirrors.tuna.tsinghua.edu.cn/termux stable main</span><br><span class="line"><span class="comment">#deb https://its-pointless.github.io/files/ termux extras</span></span><br><span class="line"><span class="comment">#deb [trusted=yes] http://termux.iikira.com stable main</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#test</span></span><br><span class="line"><span class="comment">#deb http://httpredir.debian.org/debian stretch main contrib non-free</span></span><br><span class="line"><span class="comment">#deb http://deb.debian.org/debian stretch main contrib non-free</span></span><br><span class="line"><span class="comment">#deb-src http://deb.debian.org/debian stretch main contrib non-free</span></span><br><span class="line"><span class="comment">#deb http://deb.debian.org/debian stable main contrib</span></span><br><span class="line"><span class="comment">#deb-src http://deb.debian.org/debian stable main contrib</span></span><br><span class="line"><span class="comment">#deb http://deb.debian.org/debian testing main contrib</span></span><br><span class="line"><span class="comment">#deb-src http://deb.debian.org/debian testing main contrib</span></span><br><span class="line"><span class="comment">#deb http://deb.debian.org/debian unstable main contrib</span></span><br><span class="line"><span class="comment">#deb-src http://deb.debian.org/debian unstable main contrib</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">apt update &amp;&amp; apt upgrade <span class="comment"># 更新并升级 (有些需要y确认)</span></span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>awk 语言基础</title>
      <link href="/Linux/awk.html"/>
      <url>/Linux/awk.html</url>
      
        <content type="html"><![CDATA[<h1 id="awk-语言基础"><a href="#awk-语言基础" class="headerlink" title="awk 语言基础"></a>awk 语言基础</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'/^the/'</span> filename <span class="comment"># the every line starting with the 'the'</span></span><br><span class="line">awk <span class="string">'/the$/'</span> filename <span class="comment"># the every line ending with the 'the'</span></span><br><span class="line">awk <span class="string">'/[0-9]/'</span> filename <span class="comment"># the every line contain numbers</span></span><br><span class="line">awk <span class="string">'/[a-z]/'</span> filename <span class="comment"># the every line contain the lower capital letters</span></span><br><span class="line">awk <span class="string">'/hel+0/'</span> filename <span class="comment">#  helllllo hello</span></span><br><span class="line">awk <span class="string">'/abc|123/'</span> filename <span class="comment"># return for 'abc' or '123'. | --&gt; or</span></span><br><span class="line">FS = Input field separator value</span><br><span class="line">OFS = Output field separator value</span><br><span class="line">NF = Number of fields on the current line</span><br><span class="line">NR = Number of records <span class="keyword">in</span> the current file</span><br><span class="line">RS = Record separator value</span><br><span class="line">ORS = Output record separator</span><br><span class="line">FILENAME = Current file name being processed and probably a few more</span><br><span class="line">awk <span class="string">'&#123;print NR&#125;'</span> filename <span class="comment"># would print the line number for every line processed</span></span><br><span class="line"><span class="comment"># = grep -c</span></span><br><span class="line">awk <span class="string">'END&#123;print  NR&#125;'</span> filename <span class="comment"># Counts the lines in a file. similar to 'wc -l'</span></span><br></pre></td></tr></table></figure></div><h1 id="pipline-on-awk"><a href="#pipline-on-awk" class="headerlink" title="pipline on awk"></a>pipline on awk</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'BEGIN&#123;print "the start"&#125;;&#123;print&#125;; END&#123;print "the end"&#125;'</span> filename</span><br></pre></td></tr></table></figure></div><h1 id="Simple-Logic"><a href="#Simple-Logic" class="headerlink" title="Simple Logic"></a>Simple Logic</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;if(NR~/^2#/)print&#125;'</span> filename <span class="comment"># would print line 2 from filename</span></span><br><span class="line">awk <span class="string">'&#123;if(NR~2)print&#125;'</span> filename <span class="comment"># would print any line numbers contain 2 from filename</span></span><br><span class="line"><span class="comment">## 2, 12, 22, 32...</span></span><br><span class="line">awk <span class="string">'&#123;if(NR!~2)print&#125;'</span> filename <span class="comment"># negated match</span></span><br><span class="line">awk <span class="string">'&#123;if(NR==2)print&#125;'</span> filename</span><br><span class="line">awk <span class="string">'&#123;if(NR!=2)print&#125;'</span> filename</span><br></pre></td></tr></table></figure></div><h1 id="FS"><a href="#FS" class="headerlink" title="FS"></a>FS</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'&#123;FS="\t";print $6&#125;'</span> filename</span><br><span class="line">or</span><br><span class="line">awk -F<span class="string">"\t"</span> <span class="string">'&#123;print $6&#125;'</span> filename</span><br><span class="line">awk -F<span class="string">"\t"</span> <span class="string">'NR==1,NR==10&#123;print $6&#125;'</span> filename <span class="comment">#print the cloum 6 from line 1 to line 10;</span></span><br><span class="line">awk -F<span class="string">"\t"</span> <span class="string">'&#123;print  length($5)&#125;'</span> filename <span class="comment"># length() function to count the</span></span><br></pre></td></tr></table></figure></div><p>#Delete columns</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk <span class="string">'$1="";&#123;print;OFS=\t&#125;'</span> FILENAME</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>To Start With Linux</title>
      <link href="/Linux/To-Start-With-Linux.html"/>
      <url>/Linux/To-Start-With-Linux.html</url>
      
        <content type="html"><![CDATA[<h1>To Start With Linux</h1><p><a name="f2cMB"></a></p><h1>1 Add a user</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">useradd ken <span class="comment"># add a user 'ken'</span></span><br><span class="line">passwd ken  <span class="comment"># add a password for urser 'ken'</span></span><br></pre></td></tr></table></figure></div><p><a name="iIARD"></a></p><h1>2 Add users to sudo group</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sudoers <span class="comment"># use root acount or run with sudo</span></span><br></pre></td></tr></table></figure></div><p>Find the line “root    ALL=(ALL)        ALL” and add a line:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ken  ALL=(ALL)    ALL</span><br></pre></td></tr></table></figure></div><p>save and quite</p><p><a name="6nxWN"></a></p><h1>3 Adding Script to boot list</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/rc.local</span><br></pre></td></tr></table></figure></div><p></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#!/bin/bash</span></span><br><span class="line"><span class="comment"># rc.local config file created by use</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#The script you want to run while booting</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">exit</span> 0</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo chmod +x /etc/rc.local</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Linux/ffmpeg.html"/>
      <url>/Linux/ffmpeg.html</url>
      
        <content type="html"><![CDATA[<h1>ffmpeg</h1><h1>Mp4</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ffmpeg -re -i <span class="string">"1.mp4"</span> -vcodec copy -acodec aac -b:a 192k -f flv <span class="string">"你的rtmp地址/你的直播码"</span></span><br></pre></td></tr></table></figure></div><p><a name="Ctdka"></a></p><h1>Camera</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo raspivid -o - -t <span class="number">0</span> -w <span class="number">1280</span> -h <span class="number">720</span> -fps <span class="number">24</span> -b <span class="number">1000000</span> |</span><br><span class="line">    ffmpeg -f h264 -i - -vcodec copy -acodec aac -b:a <span class="number">192</span>k \</span><br><span class="line">        \\\-f flv <span class="string">"你的rtmp地址/你的直播码"</span></span><br></pre></td></tr></table></figure></div><p><a name="9vrdi"></a></p><h1>Add an audio</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo raspivid -o - -t 0 -w 1280 -h 720 -fps 24 -b 1000000 |</span><br><span class="line">        ffmpeg  -re -stream_loop -1 -i  <span class="string">"/home/pi/scrpt/Blive/StarBucks_BGN.mp3"</span> \</span><br><span class="line">        -f h264 -i - -vcodec copy -r 30 -acodec aac -b:a 100k -preset ultrafast \</span><br><span class="line">        -tune zerolatency -f flv <span class="string">"rtmp://"</span></span><br></pre></td></tr></table></figure></div><p><a name="TqqYA"></a></p><h1>Camera＆　Mircrophone</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://blog.csdn.net/word_joke/article/details/96978138</span></span><br><span class="line">ffmpeg  -f dshow -i video=<span class="string">"USB2.0 PC CAMERA"</span></span><br><span class="line">                 -f dshow -i audio=<span class="string">"麦克风 (2- USB2.0 MIC)"</span></span><br><span class="line">                 -vcodec libx264 -preset:v ultrafast -tune:v zerolatency</span><br><span class="line">                 -f flv rtmp://127.0.0.1:1935/live/123</span><br><span class="line"></span><br><span class="line"><span class="comment"># https://blog.csdn.net/HuiShouDeZaiLai/article/details/97373878</span></span><br><span class="line">ffmpeg  -f alsa -thread_queue_size 1024  -i <span class="string">"<span class="variable">$MIC_DEV_NAME</span>"</span> \</span><br><span class="line">        -f video4linux2   -r 10  -s 640x480 -i <span class="string">"<span class="variable">$CAMERA_DEV_NAME</span>"</span> \</span><br><span class="line">        -vcodec h264  -ac 1  -b:a 128k -ar 44100 -acodec aac   \</span><br><span class="line">        -strict -2  -tune zerolatency  -preset medium -b:v 1500k -f pcm   \</span><br><span class="line">        -f  flv    rtmp://XXX:1935/live/livestream</span><br></pre></td></tr></table></figure></div><br /><p><a name="Bi3mX"></a></p><h1>拉流</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://blog.csdn.net/hdg745979749/article/details/103000160</span></span><br><span class="line"></span><br><span class="line">ffmpeg -i rtmp://58.200.131.2:1935/livetv/hunantv -c copy dump.flv</span><br><span class="line"><span class="comment"># 地址为 湖南卫视</span></span><br><span class="line"><span class="comment"># 可直接下载保存为flv 视频</span></span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>github</title>
      <link href="/Linux/github.html"/>
      <url>/Linux/github.html</url>
      
        <content type="html"><![CDATA[<h1 id="github"><a href="#github" class="headerlink" title="github"></a>github</h1><p>Github 本地上更新库</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize your directory</span></span><br><span class="line">git init</span><br><span class="line"></span><br><span class="line"><span class="comment"># 关联</span></span><br><span class="line">git remote add IO https://github.com/Karobben/Karobben.github.io</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加</span></span><br><span class="line">git add .</span><br><span class="line"></span><br><span class="line"><span class="comment">#注释</span></span><br><span class="line">git commit -m <span class="string">"注释"</span></span><br><span class="line"></span><br><span class="line">git pull --rebase IO master</span><br><span class="line">git push -u IO master</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>grep 搜索</title>
      <link href="/Linux/grep.html"/>
      <url>/Linux/grep.html</url>
      
        <content type="html"><![CDATA[<h1 id="grep-搜索"><a href="#grep-搜索" class="headerlink" title="grep 搜索"></a>grep 搜索</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep</span><br><span class="line"><span class="comment">#Usage: grep [OPTION]... PATTERN [FILE]...</span></span><br><span class="line"><span class="comment">#Try 'grep --help' for more information.</span></span><br></pre></td></tr></table></figure></div><p>**<br><a name="90laC"></a></p><h1 id="1-快速上手"><a href="#1-快速上手" class="headerlink" title="1. 快速上手"></a>1. 快速上手</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建测试文件</span></span><br><span class="line"><span class="built_in">echo</span> -e <span class="string">"ab\na\nb\nc\nd\ne\nf\ng\nA\nB\nC"</span> &gt; test.txt</span><br><span class="line"><span class="comment"># 搜索存在'a'的内容</span></span><br><span class="line">grep a test.txt</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NseFc8.png" alt="NseFc8.png"></p><p><a name="HflCw"></a></p><h1 id="2-常用"><a href="#2-常用" class="headerlink" title="2. 常用"></a>2. 常用</h1><p>$gr</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># "."模糊匹配</span></span><br><span class="line">grep a. test.txt</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/Nse9ht.png" alt="Nse9ht.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 显示所在行</span></span><br><span class="line">grep -n a test.txt</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/Nsei1f.png" alt="Nsei1f.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 输出匹配次数(多少行)</span></span><br><span class="line">grep -c a test.txt</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsZv0H.png" alt="NsZv0H.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 忽略大小写</span></span><br><span class="line">grep -i a test.txt</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NseSAA.png" alt="NseSAA.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#多项匹配: "|" 分隔开多选必配项。注意，如果我没记错的话，最多可同时匹配1000项</span></span><br><span class="line">grep -E <span class="string">'a|b'</span> test.txt</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NseP9P.png" alt="NseP9P.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#打印匹配项的上下一行或多行</span></span><br><span class="line">grep -nA 1 A test.txt <span class="comment"># 等同于 grep -n -A 1  A test.txt， -n 用于显示行数</span></span><br><span class="line">grep -nB 1  A test.txt <span class="comment"># 显示匹配的上一行</span></span><br><span class="line">grep -nA 1 -B 1  A test.txt <span class="comment"># 同时显示匹配的上下两行</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NseVBQ.png" alt="NseVBQ.png"><br><a name="pFQtn"></a></p><h1 id="3-快速应用："><a href="#3-快速应用：" class="headerlink" title="3. 快速应用："></a>3. 快速应用：</h1><p>抓取fasta序列：<br />测试文件：<a href="https://www.yuque.com/attachments/yuque/0/2020/txt/691897/1581071887664-9edb6585-1fc9-4bf3-b5b4-181123b53c33.txt?_lake_card=%7B%22uid%22%3A%221577264129011-0%22%2C%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2020%2Ftxt%2F691897%2F1581071887664-9edb6585-1fc9-4bf3-b5b4-181123b53c33.txt%22%2C%22name%22%3A%22test.fa.txt%22%2C%22size%22%3A6581%2C%22type%22%3A%22text%2Fplain%22%2C%22ext%22%3A%22txt%22%2C%22progress%22%3A%7B%22percent%22%3A99%7D%2C%22status%22%3A%22done%22%2C%22percent%22%3A0%2C%22id%22%3A%22FBFrY%22%2C%22card%22%3A%22file%22%7D" target="_blank" rel="noopener">test.fa.txt</a><br />首先，把fasta文件规整成一行ID，一行序列格式。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#通过一系列骚操作，把多行序列转换成单行</span></span><br><span class="line">cat test.fa.txt | tr <span class="string">'\n'</span> <span class="string">'#'</span>| sed <span class="string">'s/#&gt;/\n&gt;/g'</span>|sed <span class="string">'s/#/\n/;s/#//g'</span> &gt; test.fa</span><br></pre></td></tr></table></figure></div><p><a name="PfuOk"></a></p><h2 id="3-1，获取所有的fasta-ID"><a href="#3-1，获取所有的fasta-ID" class="headerlink" title="3.1，获取所有的fasta ID"></a>3.1，获取所有的fasta ID</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"&gt;"</span> test.fa</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NseptI.png" alt="NseptI.png"></p><p><a name="B2a92"></a></p><h2 id="3-2，获取杠内ID"><a href="#3-2，获取杠内ID" class="headerlink" title="3.2，获取杠内ID"></a>3.2，获取杠内ID</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep <span class="string">"&gt;"</span> test.fa| awk -F\| <span class="string">'&#123;print $2&#125;'</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NsZx7d.png" alt="NsZx7d.png"></p><p><a name="frpmZ"></a></p><h2 id="3-3，通过grep-多项匹配，获取前两个ID及其序列"><a href="#3-3，通过grep-多项匹配，获取前两个ID及其序列" class="headerlink" title="3.3，通过grep 多项匹配，获取前两个ID及其序列"></a>3.3，通过grep 多项匹配，获取前两个ID及其序列</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">grep -EA 1 $(grep <span class="string">"&gt;"</span> test.fa| awk -F\| <span class="string">'&#123;print $2&#125;'</span>|head -n 2| tr <span class="string">'\n'</span> <span class="string">'|'</span>|sed <span class="string">'s/^/"|/;s/$/"/'</span>) test.fa</span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">grep -EA 1 $(grep <span class="string">"&gt;"</span> test.fa|\</span><br><span class="line">awk -F\| <span class="string">'&#123;print $2&#125;'</span>|\</span><br><span class="line">head -n 2|\</span><br><span class="line">tr <span class="string">'\n'</span> <span class="string">'|'</span>|\</span><br><span class="line">sed <span class="string">'s/^/"|/;s/$/"/'</span>) test.fa</span><br><span class="line"></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">其中，$(grep "&gt;" test.fa| awk -F\| '</span>&#123;<span class="built_in">print</span> <span class="variable">$2</span>&#125;<span class="string">'|head -n 2| tr '</span>\n<span class="string">' '</span>|<span class="string">'|sed '</span>s/^/<span class="string">"|/;s/$/"</span>/<span class="string">') 的结果为</span></span><br><span class="line"><span class="string">的结果为：</span></span><br><span class="line"><span class="string">"|Q6GZX4|Q6GZX3|"</span></span><br><span class="line"><span class="string">因此可以直接被 grep -E 参数识别</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/26/NseEng.png" alt="NseEng.png"></p><p><a name="t84Jr"></a></p><h1 id="4-其他详细请看："><a href="#4-其他详细请看：" class="headerlink" title="4. 其他详细请看："></a>4. 其他详细请看：</h1><p>参数解释：<a href="https://www.runoob.com/linux/linux-comm-grep.html" target="_blank" rel="noopener">https://www.runoob.com/linux/linux-comm-grep.html</a><br />复杂正则匹配：<a href="https://www.cnblogs.com/keithtt/p/6820540.html" target="_blank" rel="noopener">https://www.cnblogs.com/keithtt/p/6820540.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Linux/index.html"/>
      <url>/Linux/index.html</url>
      
        <content type="html"><![CDATA[<ul><li><h1 id="System"><a href="#System" class="headerlink" title="System"></a>System</h1><ul><li><a href="To-Start-With-Linux.html">To-Start-With-Linux</a></li><li><a href="Matain.html">Matain</a></li></ul></li><li><h1 id="Bash"><a href="#Bash" class="headerlink" title="Bash"></a>Bash</h1><ul><li><a href="System.html">ummmm…</a></li><li><a href="grep.html">grep</a></li><li><a href="awk.html">awk</a></li><li><a href="sed.html">sed</a></li><li><a href="while-if-case.html">while-if-case</a></li><li><a href="tar.html">tar</a></li><li><a href="Download-Software.html">Download: wget, curl…</a></li><li><a href="github.html">github</a></li></ul></li><li><h1 id="Software"><a href="#Software" class="headerlink" title="Software"></a>Software</h1><p><a href="Shop-store.html">App stores</a></p><ul><li><h2 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h2><ul><li><a href="GIMP.html">GIMP: substitute for PS</a></li><li><a href="Atom.html">Atom: IDE from github</a></li><li><a href="Conky.html">Conky: the best plunge for desktop</a></li><li><a href="Disck-Manage.html">Disck Manage</a></li></ul></li><li><h2 id="TUI"><a href="#TUI" class="headerlink" title="TUI"></a>TUI</h2><ul><li><a href="tmux.html">tmux: plunge for terminal</a></li><li><a href="ffmpeg.html">ffmpeg</a></li></ul></li></ul></li><li><h1 id="For-Deepin"><a href="#For-Deepin" class="headerlink" title="For Deepin"></a>For Deepin</h1><ul><li><a href="Deepin_OBS.html">Deepin: OBS</a></li><li><a href="Deepin_scrcpy.html">Deepin: scrcpy</a></li><li><a href="Deepin_gtop.html">Deepin: gtop</a></li><li><a href="Deepin15_Bugs.html">Deepin: bugs</a></li></ul></li><li><h1 id="Raspberry-Pi"><a href="#Raspberry-Pi" class="headerlink" title="Raspberry Pi"></a>Raspberry Pi</h1><ul><li><a href="Start-With-Rasberry-pi.html">Start with Raspberry pi</a></li><li><a href="Blive-with-RasperryPi.html">Blive with Raspberry</a></li></ul></li></ul><p><a href="Termux.html">Termux</a></p><p><a href="linuxError.html">linuxError</a><br><a href="terminal-speed.html">terminal-speed</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>linux报错集</title>
      <link href="/Linux/linuxError.html"/>
      <url>/Linux/linuxError.html</url>
      
        <content type="html"><![CDATA[<h1 id="linux报错集"><a href="#linux报错集" class="headerlink" title="linux报错集"></a>linux报错集</h1><p>ERROR: JAVA_HOME is set to an invalid directory</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ERROR: JAVA_HOME is <span class="built_in">set</span> to an invalid directory: /home/ken/Sorft/jre1.8.0_231</span><br><span class="line"></span><br><span class="line">Please <span class="built_in">set</span> the JAVA_HOME variable <span class="keyword">in</span> your environment to match the</span><br><span class="line">location of your Java installation.</span><br></pre></td></tr></table></figure></div><p>检查java路径,<br />我把Sorft 文件夹改成了 Soft, 所以他找不到</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>sed 匹配编辑</title>
      <link href="/Linux/sed.html"/>
      <url>/Linux/sed.html</url>
      
        <content type="html"><![CDATA[<h1>sed 匹配编辑</h1><p>Sed</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/t/T/'</span> filename <span class="comment"># sed 's/t/T/g' filename</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/^t/000/g'</span> filename <span class="comment">#the t on beginning of the lines replaced by ***</span></span><br><span class="line">sed <span class="string">'s/t$/000/g'</span> filename <span class="comment">#000 as a substitute for the t on the end of the lines</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/[0-9]/*/'</span> filename <span class="comment"># * as a subustitute for every number with *</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/[a-z][A-Z]/--/'</span> filename <span class="comment"># looking for a pattern that a lower capital followed a capital</span></span><br><span class="line"><span class="comment"># TaT --&gt;  T--</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/[a-zA-Z]/--/g'</span> filename <span class="comment"># -- as a substitute for all letters on the filename</span></span><br><span class="line">or</span><br><span class="line">sed <span class="string">'s/[a-Z]/--/g'</span> filename</span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/[0-z]/--/g'</span> filename</span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/[0-9]/-&amp;-/g'</span> filename <span class="comment"># exp: 833 new -- &gt; -8--3--3- new</span></span><br><span class="line">sed <span class="string">'s/[0-9][0-9]/-&amp;-/g'</span> filename <span class="comment"># exp: 833 new -- &gt; -833- new</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/\w/_/g'</span> filename <span class="comment"># or letters except symples.(including chinese)</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/\b/==/g'</span> filename <span class="comment"># add a "==" on the begin and the end of all words</span></span><br><span class="line"><span class="comment"># ==4811==  ==that==  [==ðæt==; ==ðət==]</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/[^0-9]/*/g'</span> filename <span class="comment"># ^ means negated match</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'s/A/B/g;s/C/D/f'</span> FILENAME</span><br><span class="line"></span><br><span class="line"><span class="comment">############################</span></span><br><span class="line"><span class="comment">## deleted the match line ##</span></span><br><span class="line"><span class="comment">############################</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'/pattern/d'</span> filename</span><br><span class="line">sed <span class="string">'/\bnew\b/d'</span> filename <span class="comment">#boundary (new),( new),(new ),( new ),( new, )</span></span><br><span class="line"></span><br><span class="line">sed <span class="string">'/^$/d'</span> <span class="comment"># remove the line which beginning with end (blank line)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sed <span class="string">'5,$ d'</span> filename</span><br><span class="line">equo</span><br><span class="line">sed <span class="string">'4 q'</span> filename</span><br><span class="line">equo head -n 4 filename</span><br><span class="line"></span><br><span class="line">sed <span class="string">'1d'</span> filename <span class="comment"># deleted the first line only</span></span><br><span class="line">sed <span class="string">'2d'</span> filename <span class="comment"># deleted the second line only</span></span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Linux/summary.html"/>
      <url>/Linux/summary.html</url>
      
        <content type="html"><![CDATA[<ul><li><a href="linux2">To Start With Linux</a></li><li><a href="maintain">維運</a></li><li><a href="#">Bash</a><ul><li><a href="system2">System</a><ul><li><a href="sed2">sed 匹配编辑</a></li><li><a href="grep2">grep 搜索</a></li><li><a href="tar2">tar</a></li><li><a href="awk2">awk 语言基础</a></li><li><a href="leaei2">If &amp; whle &amp; case</a><ul><li><a href="yn81gl2">try</a></li></ul></li></ul></li><li><a href="github2">github</a></li></ul></li><li><a href="#">Software</a><ul><li><a href="ffmpeg">ffmpeg</a></li><li><a href="conky">Conky - the best plug for desktop</a></li><li><a href="tmux2">tmux</a></li><li><a href="shop_store2">Shop store</a></li><li><a href="atom2">Atom</a></li><li><a href="disck_manage2">Disck Manage</a></li><li><a href="download2">Download Software</a></li><li><a href="gimp">GIMP</a></li><li><a href="obs2">如何在Deepin上安装稳定的OBS</a></li><li><a href="gtop2">如何在Deepin上安装gtop</a></li><li><a href="scrcpy2">如何在deepin上安装scrcpy</a></li></ul></li><li><a href="linux_error_codes2">linux报错集</a></li><li><a href="#">RaspperyPi</a><ul><li><a href="raspi">Start With Rasberry pi</a></li><li><a href="blive2">Blive with RasperryPi</a></li></ul></li><li><a href="termux">Termux</a></li><li><a href="#">Blogs</a><ul><li><a href="deepin_bug2">Deepin bug</a></li><li><a href="wdda8g2">terminal 不走代理加速</a></li></ul></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Linux/tar.html"/>
      <url>/Linux/tar.html</url>
      
        <content type="html"><![CDATA[<h1 id="tar"><a href="#tar" class="headerlink" title="tar"></a>tar</h1><p>#reference:<a href="https://man.linuxde.net/tar" target="_blank" rel="noopener">https://man.linuxde.net/tar</a></p><h1 id="compress"><a href="#compress" class="headerlink" title="compress"></a>compress</h1><p>terminal</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -cvf log.tar log2012.log    仅打包，不压缩！</span><br><span class="line">tar -zcvf log.tar.gz log2012.log   打包后，以 gzip 压缩</span><br><span class="line">tar -jcvf log.tar.bz2 log2012.log  打包后，以 bzip2 压缩</span><br></pre></td></tr></table></figure></div><p><a name="7DBLz"></a></p><h1 id="unpress"><a href="#unpress" class="headerlink" title="unpress"></a>unpress</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tar -ztvf log.tar.gz</span><br></pre></td></tr></table></figure></div><p>Enjoy~</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>terminal 不走代理加速</title>
      <link href="/Linux/terminal-speed.html"/>
      <url>/Linux/terminal-speed.html</url>
      
        <content type="html"><![CDATA[<h1 id="terminal-不走代理加速"><a href="#terminal-不走代理加速" class="headerlink" title="terminal 不走代理加速"></a>terminal 不走代理加速</h1><p>系统: deepin 15.11</p><p>明明都开了全局模式, 但是terminal 下载还是很慢<br />解决方法:</p><p><img src="https://s1.ax1x.com/2020/06/26/Nse4v8.png" alt="Nse4v8.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> http_proxy=<span class="string">"http://127.0.0.1:12333"</span></span><br><span class="line"><span class="built_in">export</span> https_proxy=<span class="string">"http://127.0.0.1:12333"</span></span><br></pre></td></tr></table></figure></div><p>然后就好啦~</p><p>参考:<a href="https://blog.csdn.net/weixin_43377336/article/details/87249688" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43377336/article/details/87249688</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>tmux2</title>
      <link href="/Linux/tmux.html"/>
      <url>/Linux/tmux.html</url>
      
        <content type="html"><![CDATA[<h1 id="tmux2"><a href="#tmux2" class="headerlink" title="tmux2"></a>tmux2</h1><p><img src="https://s1.ax1x.com/2020/06/26/NsmGxf.png" alt="NsmGxf.png"></p><p>tmux is a very powerful interact-able bash interpreter. Once you familiarized with the hot keys, it would be an inextricable programs of you.</p><p>Copy and Past:</p><p>^b [ (ctrl+b [) : move the mouse;<br />^blanck: start to selecte; (hold this at less for a second)<br /> ^w: copy</p><p>Now, the selected words are in your copy list. You can using the favorite way to copy it in terminal, or Word, Atom, etc.<br />A typical way to past in tmux is:<br />^b ].</p><p>Or you can:<br />^B [;<br />Using mouse the select a target;<br />^w;</p><p>It works on turmx, but not on my laptop since when ever I typing ^+blank, the stupid Sugou Input will pop out and interrupt the processor…</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>If &amp; whle &amp; case</title>
      <link href="/Linux/while-if-case.html"/>
      <url>/Linux/while-if-case.html</url>
      
        <content type="html"><![CDATA[<h1 id="If-amp-whle-amp-case"><a href="#If-amp-whle-amp-case" class="headerlink" title="If &amp; whle &amp; case"></a>If &amp; whle &amp; case</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> [ expression ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">   Statement(s) to be executed <span class="keyword">if</span> expression is <span class="literal">true</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></div><p><br />字符串判断</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://blog.csdn.net/Primeprime/article/details/79625306</span></span><br><span class="line">strA=<span class="string">"long string"</span></span><br><span class="line">strB=<span class="string">"string"</span></span><br><span class="line">result=$(<span class="built_in">echo</span> <span class="variable">$strA</span> | grep <span class="string">"<span class="variable">$&#123;strB&#125;</span>"</span>)</span><br><span class="line"><span class="keyword">if</span> [[ <span class="string">"<span class="variable">$result</span>"</span> != <span class="string">""</span> ]]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"包含"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">  <span class="built_in">echo</span> <span class="string">"不包含"</span></span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> [ expression ]</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">   Statement(s) to be executed <span class="keyword">if</span> expression is <span class="literal">true</span></span><br><span class="line"><span class="keyword">done</span></span><br></pre></td></tr></table></figure></div><h1 id="try"><a href="#try" class="headerlink" title="try"></a>try</h1><p>reference:<a href="https://blog.csdn.net/womeng2009/article/details/80814284" target="_blank" rel="noopener">筱光</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="comment"># try</span></span><br><span class="line"></span><br><span class="line">    command1</span><br><span class="line">    <span class="comment">#save your output</span></span><br><span class="line"></span><br><span class="line">&#125; || &#123; <span class="comment"># except</span></span><br><span class="line">    <span class="comment"># save log for exception</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Linux/yuque.json"/>
      <url>/Linux/yuque.json</url>
      
        <content type="html"><![CDATA[{"repo":"liuwenkan/linux","pattern":"**/*.md"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Animation-Text</title>
      <link href="/Python/Animation-Text.html"/>
      <url>/Python/Animation-Text.html</url>
      
        <content type="html"><![CDATA[<h1 id="Animation-Text"><a href="#Animation-Text" class="headerlink" title="Animation-Text"></a>Animation-Text</h1><p><img src="https://s1.ax1x.com/2020/06/22/NYEmCt.gif" alt="NYEmCt.gif"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Signal</span>:</span> <span class="comment"># &lt;1&gt;</span></span><br><span class="line">    go = <span class="literal">True</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">spin</span><span class="params">(msg, signal)</span>:</span>  <span class="comment"># &lt;2&gt;</span></span><br><span class="line">    write, flush = sys.stdout.write, sys.stdout.flush</span><br><span class="line">    <span class="keyword">for</span> char <span class="keyword">in</span> itertools.cycle(<span class="string">'|/-\\'</span>):  <span class="comment"># &lt;3&gt;</span></span><br><span class="line">        status = char + <span class="string">' '</span> + msg</span><br><span class="line">        write(status)</span><br><span class="line">        flush()</span><br><span class="line">        time.sleep(<span class="number">.1</span>)</span><br><span class="line">        write(<span class="string">'\x08'</span> * len(status))  <span class="comment"># &lt;4&gt;</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> signal.go:</span><br><span class="line">              <span class="keyword">break</span></span><br><span class="line">    write(<span class="string">' '</span> * len(status) + <span class="string">'\x08'</span> * len(status))  <span class="comment"># &lt;6&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">slow_function</span><span class="params">()</span>:</span>  <span class="comment"># &lt;7&gt;</span></span><br><span class="line">    <span class="comment"># pretend waiting a long time for I/O</span></span><br><span class="line">    time.sleep(<span class="number">3</span>)  <span class="comment"># &lt;8&gt;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">42</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">supervisor</span><span class="params">()</span>:</span>  <span class="comment"># &lt;9&gt;</span></span><br><span class="line">    signal = Signal()</span><br><span class="line">    spinner = threading.Thread(target=spin,</span><br><span class="line">                               args=(<span class="string">'thinking!'</span>, signal))</span><br><span class="line">    print(<span class="string">'spinner object:'</span>, spinner)  <span class="comment"># &lt;10&gt;</span></span><br><span class="line">    spinner.start()  <span class="comment"># &lt;11&gt;</span></span><br><span class="line">    result = slow_function()  <span class="comment"># &lt;12&gt;</span></span><br><span class="line">    signal.go = <span class="literal">False</span>  <span class="comment"># &lt;13&gt;</span></span><br><span class="line">    spinner.join()  <span class="comment"># &lt;14&gt;</span></span><br><span class="line">    <span class="keyword">return</span> result</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">    result = supervisor()  <span class="comment"># &lt;15&gt;</span></span><br><span class="line">    print(<span class="string">'Answer:'</span>, result)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    main()</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Basmap</title>
      <link href="/Python/BaseMap.html"/>
      <url>/Python/BaseMap.html</url>
      
        <content type="html"><![CDATA[<h1 id="Basmap"><a href="#Basmap" class="headerlink" title="Basmap"></a>Basmap</h1><h1 id="0-Install"><a href="#0-Install" class="headerlink" title="0. Install"></a>0. Install</h1><p>教程推薦:</p><ol><li><a href="https://matplotlib.org/basemap/users/installing.html" target="_blank" rel="noopener">官方文檔</a></li><li><a href="moxigandashu">moxigandashu 2017</a></li><li>往下看我的(系統:Deepin 15.11)</li></ol><h2 id="1-Dependency"><a href="#1-Dependency" class="headerlink" title="1. Dependency:"></a>1. Dependency:</h2><ul><li>python</li><li>pip install:<ul><li>Matplotlib</li><li>NumPy</li><li>GeobricksProj4ToEPSG</li><li>pyproj</li><li>pyshp</li></ul></li><li>geos<br><code>sudo apt install libgeos-3.6.2</code><br><code>sudo apt install libgeos-dev</code></li></ul><h2 id="Install-from-the-source"><a href="#Install-from-the-source" class="headerlink" title="Install from the source"></a>Install from the source</h2><p>Release：<a href="https://github.com/matplotlib/basemap/releases/" target="_blank" rel="noopener">WeatherGod</a><br><a href="https://pan.baidu.com/s/1q75hbCA0NHj6Bxfl_IDr7Q" target="_blank" rel="noopener">百度網盤</a>: 2tue</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">mkdir Basemap</span><br><span class="line"><span class="built_in">cd</span> Basmap</span><br><span class="line">wget -c https://github.com/matplotlib/basemap/archive/v1.1.0.tar.gz</span><br><span class="line"><span class="comment"># ummmmm... 126m， 我下載的時候... 有點大， 優點慢， 自己想辦法把</span></span><br><span class="line"><span class="comment"># 給個百度雲鏈接把，我。 100kb，總比50kb的瀏覽器速度要好把</span></span><br><span class="line">tar -zxvf basemap-1.1.0.tar.gz</span><br><span class="line"><span class="built_in">cd</span> basemap-1.1.0</span><br><span class="line"><span class="built_in">cd</span> geos-3.3.3</span><br><span class="line"><span class="built_in">export</span> GEOS_DIR=$(<span class="built_in">pwd</span>)</span><br><span class="line">./configure --prefix=<span class="variable">$GEOS_DIR</span></span><br><span class="line">make; make install</span><br></pre></td></tr></table></figure></div><h2 id="報錯"><a href="#報錯" class="headerlink" title="報錯"></a>報錯</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">..&#x2F;..&#x2F;..&#x2F;include&#x2F;geos&#x2F;geom&#x2F;Coordinate.inl:39:10: error: &#39;ISNAN&#39; was not declared in this scope</span><br><span class="line">  return (ISNAN(x) &amp;&amp; ISNAN(y) &amp;&amp; ISNAN(z));</span><br></pre></td></tr></table></figure></div><p>解決： <a href="https://askubuntu.com/questions/465550/can-not-compile-without-isnan-function-or-macro-when-trying-to-compile-geos-on" target="_blank" rel="noopener">VeRo</a><br>找到<code>platform.h</code><br>把24行的<code>/* #undef HAVE_ISNAN */</code><br>替換成： <code>#define HAVE_ISNAN 1</code> (“#”號不能丟)<br>我直接用sed替換了:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i <span class="string">'s=/\* #undef HAVE_ISNAN \*/=#define HAVE_ISNAN 1='</span> ./include/geos/platform.h</span><br></pre></td></tr></table></figure></div><p><code>make</code> 要蠻久， 慢慢等把</p><p><code>sudo make install</code> 以後， 退到上一級目錄</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python setup.py install</span><br></pre></td></tr></table></figure></div><p>又報錯：</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">src&#x2F;_geoslib.c:5552:21: error: ‘PyThreadState &#123;aka struct _ts&#125;’ has no member named ‘exc_type’; did you mean ‘curexc_type’?</span><br></pre></td></tr></table></figure></div><p><code>sudo pip3.7  install cpython</code></p><p>更具jonathanunderwood在<a href="https://github.com/mcfletch/pyopengl/issues/11" target="_blank" rel="noopener">github帖子</a>中的解釋， 是應爲python3.7不適配的原因。<br>我直接用python2.7安裝成功了。 不過，後面在導入包的時候，又有function問題- -我放棄了 嘿嘿嘿</p><p>還是用leaft把</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Biopython</title>
      <link href="/Python/Biopython.html"/>
      <url>/Python/Biopython.html</url>
      
        <content type="html"><![CDATA[<h1 id="Biopython"><a href="#Biopython" class="headerlink" title="Biopython"></a>Biopython</h1><p><a name="C9IvS"></a></p><h1 id="1-Quick-Start"><a href="#1-Quick-Start" class="headerlink" title="1. Quick Start"></a>1. Quick Start</h1><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio.Seq <span class="keyword">import</span> reverse_complement, transcribe, back_transcribe, translate</span><br><span class="line"></span><br><span class="line"><span class="comment"># echo a seq</span></span><br><span class="line">my_string = GCTGTTATGGGTCGTTGGAAGGGTGGTCGTGCTGCTGGTTAG</span><br><span class="line"></span><br><span class="line"><span class="comment">#Revers complement</span></span><br><span class="line">reverse_complement(my_string)</span><br><span class="line"></span><br><span class="line"><span class="comment"># &#123; 'CTAACCAGCAGCACGACCACCCTTCCAACGACCCATAACAGC' &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#DNA to RNA</span></span><br><span class="line">transcribe(my_string)</span><br><span class="line"></span><br><span class="line"><span class="comment">#--&gt; &#123; 'GCUGUUAUGGGUCGUUGGAAGGGUGGUCGUGCUGCUGGUUAG' &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#RNA to DNA</span></span><br><span class="line">back_transcribe(my_string) --&gt; &#123; 'GCTGTTATGGGTCGTTGGAAGGGTGGTCGTGCTGCTGGTTAG' &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#DNA to protine</span></span><br><span class="line">translate(my_string) --&gt; &#123; 'AVMGRWKGGRAAG*' &#125;</span><br></pre></td></tr></table></figure><p><a name="mNuzg"></a></p><h1 id="2-Sequences"><a href="#2-Sequences" class="headerlink" title="2. Sequences"></a>2. Sequences</h1><p><a name="6mPRo"></a></p><h2 id="2-1-reading-FASTA-file"><a href="#2-1-reading-FASTA-file" class="headerlink" title="2.1 reading FASTA file"></a>2.1 reading FASTA file<br /></h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio <span class="keyword">import</span> SeqIO</span><br><span class="line">Seq1=<span class="string">'GSE44995_Reference_assembled_isotig_seq.fna'</span></span><br><span class="line"><span class="keyword">for</span> seq_record <span class="keyword">in</span> SeqIO.parse(Seq1, <span class="string">"fasta"</span>)</span><br><span class="line">    print(seq_record.id)</span><br><span class="line">    print(repr(seq_record.seq))</span><br><span class="line">    print(len(seq_record.seq))</span><br><span class="line"></span><br><span class="line"><span class="comment"># print by fasta formate</span></span><br><span class="line">Seq10=<span class="string">''</span></span><br><span class="line"><span class="keyword">for</span> seq_record <span class="keyword">in</span> SeqIO.parse(Seq1, <span class="string">"fasta"</span>):</span><br><span class="line">  <span class="keyword">if</span> len(seq_record.seq) &lt; <span class="number">100</span>:</span><br><span class="line">    Seq10 += <span class="string">"&gt;"</span>+str(seq_record.id)+<span class="string">"\n"</span></span><br><span class="line">    Seq10 += str(seq_record.seq)+<span class="string">"\n"</span></span><br><span class="line">    print(seq_record.id)</span><br><span class="line">    print(repr(seq_record.seq))</span><br><span class="line">    print(len(seq_record.seq))</span><br></pre></td></tr></table></figure></div><p><a name="ZwldO"></a></p><h2 id="2-2-Seq-run-as-string"><a href="#2-2-Seq-run-as-string" class="headerlink" title="2.2 Seq run as string"></a>2.2 Seq run as string</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio.Seq <span class="keyword">import</span> Seq</span><br><span class="line"><span class="keyword">from</span> Bio.Alphabet <span class="keyword">import</span> IUPAC</span><br><span class="line">my_seq = Seq(<span class="string">"GATCG"</span>, IUPAC.unambiguous_dna)</span><br><span class="line"><span class="keyword">for</span> index, letter <span class="keyword">in</span> enumerate(my_seq):</span><br><span class="line">  print(<span class="string">"%i %s"</span> % (index, letter))</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">print result</span></span><br><span class="line"><span class="string">0 G</span></span><br><span class="line"><span class="string">1 A</span></span><br><span class="line"><span class="string">2 T</span></span><br><span class="line"><span class="string">3 C</span></span><br><span class="line"><span class="string">4 G</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line">print(my_seq[<span class="number">0</span>]) <span class="comment">#/ print(my_seq[-1])</span></span><br><span class="line">Seq(<span class="string">"AAAA"</span>).count(<span class="string">"AA"</span>)</span><br><span class="line">len(my_seq)</span><br><span class="line"></span><br><span class="line"><span class="comment"># convert to str</span></span><br><span class="line">my_seq = str(my_seq)</span><br></pre></td></tr></table></figure></div><br /><a name="qfmb9"></a>## 2.3 GC caculate<br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio.Seq <span class="keyword">import</span> Seq</span><br><span class="line"><span class="keyword">from</span> Bio.Alphabet <span class="keyword">import</span> IUPAC</span><br><span class="line"><span class="keyword">from</span> Bio.SeqUtils <span class="keyword">import</span> GC</span><br><span class="line">my_seq = Seq(<span class="string">"GATCGATGGGCCTATATAGGATCGAAAATCGC"</span>, IUPAC.unambiguous_dna)</span><br><span class="line">GC(my_seq)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Result</span></span><br><span class="line"><span class="comment">#46.875</span></span><br></pre></td></tr></table></figure></div><p><a name="lvo99"></a></p><h2 id="2-4-Slicing-a-sequence"><a href="#2-4-Slicing-a-sequence" class="headerlink" title="2.4 Slicing a sequence"></a>2.4 Slicing a sequence</h2><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">my_seq[<span class="number">4</span>:<span class="number">12</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">####</span></span><br><span class="line">the first, second <span class="keyword">and</span> third codon positions of this DNA sequence:</span><br><span class="line"><span class="comment">####</span></span><br><span class="line">my_seq[<span class="number">0</span>::<span class="number">3</span>]  <span class="comment"># Seq('GCTGTAGTAAG', IUPACUnambiguousDNA())</span></span><br><span class="line">my_seq[<span class="number">1</span>::<span class="number">3</span>]  <span class="comment"># Seq('AGGCATGCATC', IUPACUnambiguousDNA())</span></span><br><span class="line">my_seq[<span class="number">2</span>::<span class="number">3</span>]  <span class="comment"># Seq('TAGCTAAGAC', IUPACUnambiguousDNA())</span></span><br></pre></td></tr></table></figure></div><p><a name="WruAE"></a></p><h2 id="2-5-revers-string"><a href="#2-5-revers-string" class="headerlink" title="2.5 revers string"></a>2.5 revers string</h2><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">my_seq = my_seq[::<span class="number">-1</span>]</span><br></pre></td></tr></table></figure></div><p><a name="ijsZi"></a></p><h2 id="2-6-Changing-Font-case"><a href="#2-6-Changing-Font-case" class="headerlink" title="2.6 Changing Font case"></a>2.6 Changing Font case</h2><br /><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio.Seq <span class="keyword">import</span> Seq</span><br><span class="line"><span class="keyword">from</span> Bio.Alphabet <span class="keyword">import</span> generic_dna</span><br><span class="line">dna_seq = Seq(<span class="string">"acgtACGT"</span>, generic_dna)</span><br><span class="line">dna_seq.upper() --&gt; &#123;Seq('ACGTACGT', DNAAlphabet())&#125;</span><br><span class="line">dna_seq.lower() --&gt; &#123;Seq('acgtacgt', DNAAlphabet())&#125;</span><br></pre></td></tr></table></figure><p><a name="RP0Ys"></a></p><h1 id="3-Bio-information"><a href="#3-Bio-information" class="headerlink" title="3 Bio-information"></a>3 Bio-information</h1><p><a name="tqSMw"></a></p><h2 id="3-1-Revers-Complement"><a href="#3-1-Revers-Complement" class="headerlink" title="3.1 Revers Complement"></a>3.1 Revers Complement</h2><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">my_seq.reverse_complement()</span><br><span class="line"></span><br><span class="line">Seq(<span class="string">"ACGTCGTAGCTAC"</span>).complement() <span class="comment"># standard example =&gt; output: Seq('TGCAGCATCGATG')</span></span><br><span class="line">Seq(<span class="string">"ACGTCGTAGCTAC"</span>).reverse_complement() <span class="comment"># output =&gt; Seq('GTAGCTACGACGT')</span></span><br></pre></td></tr></table></figure></div><p><a name="o4Bl4"></a></p><h2 id="3-2-Translation"><a href="#3-2-Translation" class="headerlink" title="3.2 Translation"></a>3.2 Translation</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio.Seq <span class="keyword">import</span> Seq</span><br><span class="line"><span class="keyword">from</span> Bio.Alphabet <span class="keyword">import</span> IUPAC</span><br><span class="line"></span><br><span class="line">Seq(<span class="string">"UUU"</span>, IUPAC.unambiguous_rna).translate() <span class="comment"># for RNA</span></span><br><span class="line">Seq(<span class="string">"TTT"</span>, IUPAC.unambiguous_dna).translate() <span class="comment"># for DNA</span></span><br></pre></td></tr></table></figure></div><p><a name="28baJ"></a></p><h2 id="3-3-Translation-Tables"><a href="#3-3-Translation-Tables" class="headerlink" title="3.3 Translation Tables"></a>3.3 Translation Tables</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> Bio.Data <span class="keyword">import</span> CodonTable</span><br><span class="line"></span><br><span class="line">standard_table = CodonTable.unambiguous_dna_by_name[<span class="string">'Standard'</span>]</span><br><span class="line">mito_table = CodonTable.unambiguous_dna_by_name[<span class="string">'Vertebrate Mitochondrial'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#same as:</span></span><br><span class="line"></span><br><span class="line">standard_table = CodonTable.unambiguous_dna_by_id[<span class="number">1</span>]</span><br><span class="line">mito_table = CodonTable.unambiguous_dna_by_id[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">mito_table.stop_codons  <span class="comment">#--&gt; &#123; ['TAA', 'TAG', 'AGA', 'AGG'] &#125;</span></span><br><span class="line">mito_table.start_codons <span class="comment"># --&gt; &#123; ['ATT', 'ATC', 'ATA', 'ATG', 'GTG'] &#125;</span></span><br><span class="line">mito_table.forward_table[<span class="string">"ACG"</span>] <span class="comment">#--&gt; &#123; 'T' &#125;</span></span><br><span class="line"></span><br><span class="line">print(standard_table)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">  |  T      |  C      |  A      |  G      |</span><br><span class="line">--+---------+---------+---------+---------+--</span><br><span class="line">T | TTT F   | TCT S   | TAT Y   | TGT C   | T</span><br><span class="line">T | TTC F   | TCC S   | TAC Y   | TGC C   | C</span><br><span class="line">T | TTA L   | TCA S   | TAA Stop| TGA Stop| A</span><br><span class="line">T | TTG L(s)| TCG S   | TAG Stop| TGG W   | G</span><br><span class="line">--+---------+---------+---------+---------+--</span><br><span class="line">C | CTT L   | CCT P   | CAT H   | CGT R   | T</span><br><span class="line">C | CTC L   | CCC P   | CAC H   | CGC R   | C</span><br><span class="line">C | CTA L   | CCA P   | CAA Q   | CGA R   | A</span><br><span class="line">C | CTG L(s)| CCG P   | CAG Q   | CGG R   | G</span><br><span class="line">--+---------+---------+---------+---------+--</span><br><span class="line">A | ATT I   | ACT T   | AAT N   | AGT S   | T</span><br><span class="line">A | ATC I   | ACC T   | AAC N   | AGC S   | C</span><br><span class="line">A | ATA I   | ACA T   | AAA K   | AGA R   | A</span><br><span class="line">A | ATG M(s)| ACG T   | AAG K   | AGG R   | G</span><br><span class="line">--+---------+---------+---------+---------+--</span><br><span class="line">G | GTT V   | GCT A   | GAT D   | GGT G   | T</span><br><span class="line">G | GTC V   | GCC A   | GAC D   | GGC G   | C</span><br><span class="line">G | GTA V   | GCA A   | GAA E   | GGA G   | A</span><br><span class="line">G | GTG V   | GCG A   | GAG E   | GGG G   | G</span><br><span class="line">--+---------+---------+---------+---------+--</span><br></pre></td></tr></table></figure></div><h1 id="4-Alignment"><a href="#4-Alignment" class="headerlink" title="4. Alignment"></a>4. Alignment</h1><h2 id="1-Echo-a-test-file"><a href="#1-Echo-a-test-file" class="headerlink" title="1. Echo a test file"></a>1. Echo a test file</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run in bash</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"&gt;TRINITY_DN106095_c2_g1_i2</span></span><br><span class="line"><span class="string">MSRIMKVFLFLAVMVCISEAQLHAQCLCPRVRSRISSMTDIREVQIYEATIFCDRMEIVVTNDSGLRYCLNPKLKAVQKLLTAMKPKTSTTARPTVHSSSTGSTNTARM</span></span><br><span class="line"><span class="string">&gt;TRINITY_DN92154_c0_g1_i1</span></span><br><span class="line"><span class="string">DIHVRRRTLTRSKTLGRSTNVNKMKLCILLMLGTLLVLVYGMPPISRDYNTHCRCLQVESRIIPPNSLKSIKLVPEGPHCPDMEVIAGLSNGEKVCLNPRSSWVKKLVNFVLEKQQGGALPKNQGQ"</span> &gt; test.fa</span><br></pre></td></tr></table></figure></div><h2 id="2-Align"><a href="#2-Align" class="headerlink" title="2. Align"></a>2. Align</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># run in python</span></span><br><span class="line"><span class="keyword">from</span> Bio <span class="keyword">import</span> pairwise2</span><br><span class="line"><span class="keyword">from</span> Bio.Seq <span class="keyword">import</span> Seq</span><br><span class="line"><span class="keyword">from</span> Bio.pairwise2 <span class="keyword">import</span> format_alignment</span><br><span class="line"><span class="keyword">from</span> Bio.SubsMat <span class="keyword">import</span> MatrixInfo</span><br><span class="line"></span><br><span class="line">seq1 = Seq(<span class="string">"MSRIMKVFLFLAVMVCISEAQLHAQCLCPRVRSRISSMTDIREVQIYEATIFCDRMEIVVTNDSGLRYCLNPKLKAVQKLLTAMKPKTSTTARPTVHSSSTGSTNTARM"</span>)</span><br><span class="line">seq2 = Seq(<span class="string">"DIHVRRRTLTRSKTLGRSTNVNKMKLCILLMLGTLLVLVYGMPPISRDYNTHCRCLQVESRIIPPNSLKSIKLVPEGPHCPDMEVIAGLSNGEKVCLNPRSSWVKKLVNFVLEKQQGGALPKNQGQ"</span>)</span><br><span class="line">alignments = pairwise2.align.globalxx(seq1, seq2)</span><br><span class="line">test_alignments = pairwise2.align.localds(seq1, seq2, MatrixInfo.blosum62, <span class="number">-10</span>, <span class="number">-1</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> alignment <span class="keyword">in</span> alignments:</span><br><span class="line">  print(format_alignment(*alignment))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> alignment <span class="keyword">in</span> test_alignments:</span><br><span class="line">  print(format_alignment(*alignment))</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SingleLetterAlphabet() alignment with 6 rows and 65 columns</span><br><span class="line">MQNTPAERLPAIIEKAKSKHDINVWLLDRQGRDLLEQRVPAKVA...EGP B7RZ31_9GAMM&#x2F;59-123</span><br><span class="line">AKQRGIAGLEEWLHRLDHSEAIPIFLIDEAGKDLLEREVPADIT...KKP A0A0C3NPG9_9PROT&#x2F;58-119</span><br><span class="line">ARRHGQEYFQQWLERQPKKVKEQVFAVDQFGRELLGRPLPEDMA...KKP A0A143HL37_9GAMM&#x2F;57-121</span><br><span class="line">TRRHGPESFRFWLERQPVEARDRIYAIDRSGAEILDRPIPRGMA...NKP A0A0X3UC67_9GAMM&#x2F;57-121</span><br><span class="line">AINRNTQQLTQDLRAMPNWSLRFVYIVDRNNQDLLKRPLPPGIM...NRK B3PFT7_CELJU&#x2F;62-126</span><br><span class="line">AVNATEREFTERIRTLPHWARRNVFVLDSQGFEIFDRELPSPVA...NRT K4KEM7_SIMAS&#x2F;61-125</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Crawler (爬虫)</title>
      <link href="/Python/Crawler.html"/>
      <url>/Python/Crawler.html</url>
      
        <content type="html"><![CDATA[<h1 id="Crawler-爬虫"><a href="#Crawler-爬虫" class="headerlink" title="Crawler (爬虫)"></a>Crawler (爬虫)</h1><p><a name="4xYVn"></a></p><h1 id="1-Quick-Start"><a href="#1-Quick-Start" class="headerlink" title="1. Quick Start"></a>1. Quick Start</h1><p>Crawler img location sites from National Geographic web site &amp; downloading them. </p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"><span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># Starting resuqest</span></span><br><span class="line">html = urlopen(<span class="string">"http://www.nationalgeographic.com.cn/animals/"</span>).read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">soup = BeautifulSoup(html, features=<span class="string">'lxml'</span>)</span><br><span class="line"></span><br><span class="line">img_links = soup.find_all(<span class="string">"img"</span>, &#123;<span class="string">"src"</span>: re.compile(<span class="string">'http://image..*?\.jpg'</span>)&#125;)</span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> img_links:</span><br><span class="line">    print(link[<span class="string">'src'</span>]) <span class="comment"># pic locationg</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYEsa9.png" alt="NYEsa9.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># With adding this</span></span><br><span class="line"><span class="comment"># mkdir img # 创建一个img文件夹</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> img_links:</span><br><span class="line">    print(link[<span class="string">'src'</span>])</span><br><span class="line">    <span class="keyword">if</span> link[<span class="string">'src'</span>][<span class="number">0</span>:<span class="number">4</span>] == <span class="string">'http'</span>:</span><br><span class="line">        url = link[<span class="string">'src'</span>]</span><br><span class="line">        r = requests.get(url, stream=<span class="literal">True</span>)</span><br><span class="line">        image_name = url.split(<span class="string">'/'</span>)[<span class="number">-1</span>]</span><br><span class="line">        <span class="keyword">with</span> open(<span class="string">'./img/%s'</span> % image_name, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">            <span class="keyword">for</span> chunk <span class="keyword">in</span> r.iter_content(chunk_size=<span class="number">128</span>):</span><br><span class="line">                f.write(chunk)</span><br><span class="line">        print(<span class="string">'Saved %s'</span> % image_name)</span><br></pre></td></tr></table></figure></div><p>Running result:</p><p><img src="https://s1.ax1x.com/2020/06/22/NYEy5R.gif" alt="NYEy5R.gif"></p><p><a name="FmNuL"></a></p><h1 id="实战案例"><a href="#实战案例" class="headerlink" title="实战案例:"></a>实战案例:</h1><p><a name="zWSme"></a></p><h2 id="科技快讯"><a href="#科技快讯" class="headerlink" title="科技快讯"></a><a href="https://www.yuque.com/liuwenkan/tza8ge/ew3wen" target="_blank" rel="noopener">科技快讯</a></h2>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Encode&amp;decode</title>
      <link href="/Python/Encode_decode.html"/>
      <url>/Python/Encode_decode.html</url>
      
        <content type="html"><![CDATA[<h1 id="Encode-amp-decode"><a href="#Encode-amp-decode" class="headerlink" title="Encode&amp;decode"></a>Encode&amp;decode</h1><p><a name="GkAZZ"></a></p><h1 id="gb2312"><a href="#gb2312" class="headerlink" title="gb2312"></a>gb2312</h1><p>=?gb2312?b?1cq7p9Lss6O1x8K8u+62rw==?=</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">base64.b64decode(<span class="string">"1cq7p9Lss6O1x8K8u+62rw=="</span>).decode(<span class="string">"GBK"</span>)</span><br></pre></td></tr></table></figure></div><p> 结果： ‘帐户异常登录活动’</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Matplotlib</title>
      <link href="/Python/Matplotlib.html"/>
      <url>/Python/Matplotlib.html</url>
      
        <content type="html"><![CDATA[<h1>Matplotlib</h1><p><a name="XWWUc"></a></p><h1>1. Quick Start</h1><p><a name="Fsumh"></a></p><h2 id="1-1-Quick-hit"><a class="header-anchor" href="#1-1-Quick-hit"></a>1.1 Quick hit</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib <span class="keyword">as</span> mpl</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">1000</span>)</span><br><span class="line">y = np.random.standard_normal(<span class="number">20</span>)</span><br><span class="line">x = range(len(y))</span><br><span class="line">plt.plot(x, y)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYKFx.png" alt="NYYKFx.png"><br><a name="1dYBV"></a></p><h2 id="1-2-Adding-layers"><a class="header-anchor" href="#1-2-Adding-layers"></a>1.2 Adding layers</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Showing change of each movements  </span></span><br><span class="line">plt.ion()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line">np.random.seed(<span class="number">2000</span>)</span><br><span class="line">y = np.random.standard_normal((<span class="number">20</span>,<span class="number">2</span>)).cumsum(axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">4</span>))  <span class="comment"># adding a canves figsize=(width, height)</span></span><br><span class="line">plt.plot(y.cumsum(), <span class="string">'m'</span>,lw=<span class="number">1.5</span>)  <span class="comment"># adding a line</span></span><br><span class="line">plt.plot(y.cumsum(), <span class="string">'ro'</span>)  <span class="comment"># adding dots</span></span><br><span class="line">plt.grid(<span class="literal">True</span>)  <span class="comment"># adding grid on panals</span></span><br><span class="line">plt.axis(<span class="string">'tight'</span>)  <span class="comment"># adding... I don't know</span></span><br><span class="line">plt.xlabel(<span class="string">'index'</span>)  <span class="comment"># adding a title x</span></span><br><span class="line">plt.ylabel(<span class="string">'value'</span>)  <span class="comment"># addint a title y</span></span><br><span class="line">plt.title(<span class="string">'A Simple Plot'</span>) <span class="comment"># adding a title</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYMY6.png" alt="NYYMY6.png"><a name="l8Gj5"></a></p><h2 id="1-3-Facet-subplot"><a class="header-anchor" href="#1-3-Facet-subplot"></a>1.3 Facet(subplot)</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">plt.ion()</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Data set</span></span><br><span class="line">np.random.seed(<span class="number">2000</span>)</span><br><span class="line">y = np.random.standard_normal((<span class="number">20</span>,<span class="number">2</span>)).cumsum(axis=<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>,<span class="number">5</span>))</span><br><span class="line">plt.subplot(<span class="number">211</span>)</span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">211:</span></span><br><span class="line"><span class="string">2: 2 plot in a column;</span></span><br><span class="line"><span class="string">1: 1 plot in a row</span></span><br><span class="line"><span class="string">1: the 1sd</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">plt.plot(y[:, <span class="number">0</span>], lw=<span class="number">1.5</span>, label=<span class="string">'1st'</span>)</span><br><span class="line">plt.plot(y[:, <span class="number">0</span>], <span class="string">'ro'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.legend(loc=<span class="number">0</span>)</span><br><span class="line">plt.axis(<span class="string">'tight'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'value'</span>)</span><br><span class="line">plt.title(<span class="string">'A Simple Plot'</span>)</span><br><span class="line"></span><br><span class="line">plt.subplot(<span class="number">212</span>) <span class="comment"># the second</span></span><br><span class="line">plt.plot(y[:, <span class="number">1</span>], <span class="string">'g'</span>, lw=<span class="number">1.5</span>, label=<span class="string">'2nd'</span>)</span><br><span class="line">plt.plot(y[:, <span class="number">1</span>], <span class="string">'ro'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.legend(loc=<span class="number">0</span>)</span><br><span class="line">plt.axis(<span class="string">'tight'</span>)</span><br><span class="line">plt.xlabel(<span class="string">'index'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'value'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYY1SO.png" alt="NYY1SO.png"></p><p><a name="KJDOy"></a></p><h1>2. Main Plot</h1><p><a name="bCizs"></a></p><h2 id="2-1-Dot-plot"><a class="header-anchor" href="#2-1-Dot-plot"></a>2.1 Dot plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plt.plot(y[:, <span class="number">0</span>], <span class="string">'ro'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="of4aN"></a></p><h2 id="2-2-Scatter-plot"><a class="header-anchor" href="#2-2-Scatter-plot"></a>2.2 Scatter plot</h2><p><a name="4KKFK"></a></p><h3 id="2-2-1-plot"><a class="header-anchor" href="#2-2-1-plot"></a>2.2.1 plot()</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">y = np.random.standard_normal((<span class="number">1000</span>, <span class="number">2</span>))</span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">5</span>))</span><br><span class="line">plt.plot(y[:, <span class="number">0</span>], y[:, <span class="number">1</span>], <span class="string">'ro'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.title(<span class="string">'Scatter Plot'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYY3lD.png" alt="NYY3lD.png"><br><a name="x9oul"></a></p><h3 id="2-2-2-scatter"><a class="header-anchor" href="#2-2-2-scatter"></a>2.2.2 scatter()</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">5</span>))</span><br><span class="line">plt.scatter(y[:, <span class="number">0</span>], y[:, <span class="number">1</span>], marker=<span class="string">'o'</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.xlabel(<span class="string">'1st'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'2nd'</span>)</span><br><span class="line">plt.title(<span class="string">'Scatter Plot'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="VeB2w"></a></p><h2 id=""><a class="header-anchor" href="#"></a></h2><p><a name="7F9HK"></a></p><h3 id="2-2-3-Adding-color-c-c"><a class="header-anchor" href="#2-2-3-Adding-color-c-c"></a>2.2.3 Adding color: c = c</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">c = np.random.randint(<span class="number">0</span>, <span class="number">10</span>, len(y))</span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">5</span>))</span><br><span class="line">plt.scatter(y[:, <span class="number">0</span>], y[:, <span class="number">1</span>], c=c, marker=<span class="string">'o'</span>)</span><br><span class="line">plt.colorbar()</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.xlabel(<span class="string">'1st'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'2nd'</span>)</span><br><span class="line">plt.title(<span class="string">'Scatter Plot'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYakt.png" alt="NYYakt.png"><br><a name="l20I2"></a></p><h2 id="2-3-Line-plot"><a class="header-anchor" href="#2-3-Line-plot"></a>2.3 Line plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y = np.random.standard_normal(<span class="number">20</span>)</span><br><span class="line">x = range(len(y))</span><br><span class="line">plt.plot(y, lw=<span class="number">1.5</span>, label=<span class="string">'1st'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="m1hbr"></a></p><h2 id="2-4-Bar-plot"><a class="header-anchor" href="#2-4-Bar-plot"></a>2.4 Bar plot</h2><p><a name="9RhWD"></a></p><h2 id="2-4-1-Bar-plot"><a class="header-anchor" href="#2-4-1-Bar-plot"></a>2.4.1 Bar plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">y = np.random.standard_normal(<span class="number">20</span>)</span><br><span class="line">x = range(len(y))</span><br><span class="line">plt.bar(np.arange(len(y)), y, width=<span class="number">0.5</span>, color=<span class="string">'g'</span>, label=<span class="string">'2nd'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYNTI.png" alt="NYYNTI.png"></p><p><a name="IoN7c"></a></p><h2 id="2-4-2-Histogram"><a class="header-anchor" href="#2-4-2-Histogram"></a>2.4.2 Histogram</h2><p><a name="cZrhm"></a></p><h4 id="1-Align-as-“dodge”"><a class="header-anchor" href="#1-Align-as-“dodge”"></a>1. Align as “dodge”</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">4</span>))</span><br><span class="line">plt.hist(y, label=[<span class="string">'1st'</span>, <span class="string">'2nd'</span>], bins=<span class="number">25</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.legend(loc=<span class="number">0</span>)</span><br><span class="line">plt.xlabel(<span class="string">'value'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'frequency'</span>)</span><br><span class="line">plt.title(<span class="string">'Histogram'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYQfK.png" alt="NYYQfK.png"><br><a name="xUpAg"></a></p><h4 id="2-Align-as-‘stack’-br"><a class="header-anchor" href="#2-Align-as-‘stack’-br"></a>2. Align as ‘stack’<br /></h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">y = np.random.standard_normal((<span class="number">1000</span>, <span class="number">2</span>))</span><br><span class="line">plt.figure(figsize=(<span class="number">7</span>, <span class="number">4</span>))</span><br><span class="line">plt.hist(y, label=[<span class="string">'1st'</span>, <span class="string">'2nd'</span>], color=[<span class="string">'b'</span>, <span class="string">'g'</span>], stacked=<span class="literal">True</span>, bins=<span class="number">20</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.legend(loc=<span class="number">0</span>)</span><br><span class="line">plt.xlabel(<span class="string">'value'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'frequency'</span>)</span><br><span class="line">plt.title(<span class="string">'Histogram'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYY86e.png" alt="NYY86e.png"></p><p><a name="bes3v"></a></p><h2 id="2-5-Box-polt"><a class="header-anchor" href="#2-5-Box-polt"></a>2.5 Box polt</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">7</span>,<span class="number">4</span>))</span><br><span class="line">plt.boxplot(y)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.setp(ax, xticklabels=[<span class="string">'1st'</span>, <span class="string">'2nd'</span>])</span><br><span class="line">plt.xlabel(<span class="string">'data set'</span>)</span><br><span class="line">plt.ylabel(<span class="string">'value'</span>)</span><br><span class="line">plt.title(<span class="string">'Boxplot'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYGOH.png" alt="NYYGOH.png"></p><p><a name="HUUBd"></a></p><h2 id="2-6-Adding-Text-Formula"><a class="header-anchor" href="#2-6-Adding-Text-Formula"></a>2.6  Adding Text/Formula</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> matplotlib.patches <span class="keyword">import</span> Polygon</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">func</span><span class="params">(x)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0.5</span> * np.exp(x) + <span class="number">1</span></span><br><span class="line">a, b = <span class="number">0.5</span>, <span class="number">1.5</span></span><br><span class="line">x = np.linspace(<span class="number">0</span>, <span class="number">2</span>)</span><br><span class="line">y = func(x)</span><br><span class="line">fig, ax = plt.subplots(figsize=(<span class="number">7</span>, <span class="number">5</span>))</span><br><span class="line">plt.plot(x, y, <span class="string">'b'</span>, linewidth=<span class="number">2</span>)</span><br><span class="line">plt.ylim(ymin=<span class="number">0</span>)</span><br><span class="line">Ix = np.linspace(a, b)</span><br><span class="line">Iy = func(Ix)</span><br><span class="line">verts = [(a, <span class="number">0</span>)] + list(zip(Ix, Iy)) + [(b, <span class="number">0</span>)]</span><br><span class="line">poly = Polygon(verts, facecolor=<span class="string">'0.7'</span>, edgecolor=<span class="string">'0.5'</span>)</span><br><span class="line">ax.add_patch(poly)</span><br><span class="line">plt.text(<span class="number">0.5</span> * (a + b), <span class="number">1</span>, <span class="string">r"$\int_a^b fx\mathrm&#123;d&#125;x$"</span>, horizontalalignment=<span class="string">'center'</span>, fontsize=<span class="number">20</span>)</span><br><span class="line">plt.figtext(<span class="number">0.9</span>, <span class="number">0.075</span>, <span class="string">'$x$'</span>)</span><br><span class="line">plt.figtext(<span class="number">0.075</span>, <span class="number">0.9</span>, <span class="string">'$f(x)$'</span>)</span><br><span class="line">ax.set_xticks((a, b))</span><br><span class="line">ax.set_xticklabels((<span class="string">'$a$'</span>, <span class="string">'$b$'</span>))</span><br><span class="line">ax.set_yticks([func(a), func(b)])</span><br><span class="line">ax.set_yticklabels((<span class="string">'$f(a)$'</span>, <span class="string">'$f(b)$'</span>))</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYdtP.png" alt="NYYdtP.png"><br>Result</p><p><a name="cyLz9"></a></p><h1>3. Plot 3D</h1><p><a name="Nk4gV"></a></p><h3 id="3-1"><a class="header-anchor" href="#3-1"></a>3.1</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Preparing for Data set</span></span><br><span class="line">strike = np.linspace(<span class="number">50</span>, <span class="number">150</span>, <span class="number">24</span>)</span><br><span class="line">ttm = np.linspace(<span class="number">0.5</span>, <span class="number">2.5</span>, <span class="number">24</span>)</span><br><span class="line">strike, ttm = np.meshgrid(strike, ttm)</span><br><span class="line">iv = (strike - <span class="number">100</span>) ** <span class="number">2</span> / (<span class="number">100</span> * strike) / ttm</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> mpl_toolkits.mplot3d <span class="keyword">import</span> Axes3D</span><br><span class="line"></span><br><span class="line">fig = plt.figure(figsize=(<span class="number">9</span>,<span class="number">6</span>))</span><br><span class="line">ax = fig.gca(projection=<span class="string">'3d'</span>)</span><br><span class="line">surf = ax.plot_surface(strike, ttm, iv, rstride=<span class="number">2</span>, cstride=<span class="number">2</span>, cmap=plt.cm.coolwarm, linewidth=<span class="number">0.5</span>, antialiased=<span class="literal">True</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">'strike'</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">'time-to-maturity'</span>)</span><br><span class="line">ax.set_zlabel(<span class="string">'implied volatility'</span>)</span><br><span class="line">fig.colorbar(surf, shrink=<span class="number">0.5</span>, aspect=<span class="number">5</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYYmd.png" alt="NYYYmd.png"></p><p><a name="WVm3Q"></a></p><h3 id="3-2-switch-to-dot"><a class="header-anchor" href="#3-2-switch-to-dot"></a>3.2 switch to dot</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">fig = plt.figure(figsize=(<span class="number">8</span>, <span class="number">5</span>))</span><br><span class="line"></span><br><span class="line">ax = fig.add_subplot(<span class="number">111</span>, projection=<span class="string">'3d'</span>)</span><br><span class="line"></span><br><span class="line">ax.view_init(<span class="number">30</span>, <span class="number">60</span>)</span><br><span class="line">ax.scatter(strike, ttm, iv, zdir=<span class="string">'z'</span>, s=<span class="number">25</span>, c=<span class="string">'b'</span>, marker=<span class="string">'^'</span>)</span><br><span class="line">ax.set_xlabel(<span class="string">'strike'</span>)</span><br><span class="line">ax.set_ylabel(<span class="string">'time-to-maturity'</span>)</span><br><span class="line">ax.set_zlabel(<span class="string">'implied volatility'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYYwff.png" alt="NYYwff.png"></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>HTML server</title>
      <link href="/Python/HTML-server.html"/>
      <url>/Python/HTML-server.html</url>
      
        <content type="html"><![CDATA[<h1 id="HTML-server"><a href="#HTML-server" class="headerlink" title="HTML server"></a>HTML server</h1><!doctype html><div data-lake-element="root" class="lake-engine lake-typography-traditional" data-parser-by="lake2html"></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Lightening Img</title>
      <link href="/Python/Lightening-Img.html"/>
      <url>/Python/Lightening-Img.html</url>
      
        <content type="html"><![CDATA[<h1 id="Lightening-Img"><a href="#Lightening-Img" class="headerlink" title="Lightening Img"></a>Lightening Img</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">contrast_img</span><span class="params">(img1, c, b)</span>:</span></span><br><span class="line">    <span class="comment">#https://blog.csdn.net/wsp_1138886114/article/details/82624534</span></span><br><span class="line">    <span class="comment"># 亮度就是每个像素所有通道都加上b</span></span><br><span class="line">    rows, cols, channels = img1.shape</span><br><span class="line">    <span class="comment"># 新建全零(黑色)图片数组:np.zeros(img1.shape, dtype=uint8)</span></span><br><span class="line">    blank = np.zeros([rows, cols, channels], img1.dtype)</span><br><span class="line">    dst = cv2.addWeighted(img1, c, blank, <span class="number">1</span>-c, b)</span><br><span class="line">    <span class="keyword">return</span> dst</span><br><span class="line"></span><br><span class="line">frame2=contrast_img( frame, Config[<span class="string">'Lighten_R'</span>], Config[<span class="string">'Lighten_B'</span>])</span><br></pre></td></tr></table></figure></div><p><br />More: <a href="https://blog.csdn.net/weixin_38342946/article/details/100071255" target="_blank" rel="noopener">https://blog.csdn.net/weixin_38342946/article/details/100071255</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>其他</title>
      <link href="/Python/Others.html"/>
      <url>/Python/Others.html</url>
      
        <content type="html"><![CDATA[<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><p>Django： <a href="https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Learn/Server-side/Django</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>PDF</title>
      <link href="/Python/PDF.html"/>
      <url>/Python/PDF.html</url>
      
        <content type="html"><![CDATA[<h1 id="PDF"><a href="#PDF" class="headerlink" title="PDF"></a>PDF</h1><p><a name="kyqqW"></a></p><h1 id="1-Read-amp-Write"><a href="#1-Read-amp-Write" class="headerlink" title="1. Read &amp; Write"></a>1. Read &amp; Write</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileReader, PdfFileWriter</span><br><span class="line">readFile = <span class="string">'read.pdf'</span></span><br><span class="line">writeFile = <span class="string">'write.pdf'</span></span><br><span class="line"></span><br><span class="line">pdfReader = PdfFileReader(open(readFile, <span class="string">'rb'</span>))</span><br><span class="line">pdfWriter.write(open(writeFile, <span class="string">'wb'</span>))</span><br></pre></td></tr></table></figure></div><p><a name="m4WEP"></a></p><h1 id="2-Pick-First-two-Page"><a href="#2-Pick-First-two-Page" class="headerlink" title="2. Pick First two Page"></a>2. Pick First two Page</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileReader, PdfFileWriter</span><br><span class="line"><span class="keyword">import</span> PyPDF2</span><br><span class="line"></span><br><span class="line">readFile = <span class="string">'SA.pdf'</span></span><br><span class="line">writeFile = <span class="string">'write.pdf'</span></span><br><span class="line"></span><br><span class="line">pdfWriter = PyPDF2.PdfFileWriter()</span><br><span class="line"></span><br><span class="line">pdfReader = PdfFileReader(open(readFile, <span class="string">'rb'</span>))</span><br><span class="line">pdfWriter.write(open(writeFile, <span class="string">'wb'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">        pageObj = pdfReader.getPage(page)</span><br><span class="line">        pdfWriter.addPage(pageObj)</span><br><span class="line"></span><br><span class="line">newFile = open(writeFile,<span class="string">'wb'</span>)</span><br><span class="line">pdfWriter.write(newFile)</span><br><span class="line"></span><br><span class="line">newFile.close()</span><br></pre></td></tr></table></figure></div><p><a name="uLu8m"></a></p><h2 id="2-1-Double-the-Pages"><a href="#2-1-Double-the-Pages" class="headerlink" title="2.1 Double the Pages"></a>2.1 Double the Pages</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileReader, PdfFileWriter</span><br><span class="line"><span class="keyword">import</span> PyPDF2</span><br><span class="line"></span><br><span class="line">readFile = <span class="string">'SA.pdf'</span></span><br><span class="line">writeFile = <span class="string">'write.pdf'</span></span><br><span class="line"></span><br><span class="line">pdfWriter = PyPDF2.PdfFileWriter()</span><br><span class="line"></span><br><span class="line">pdfReader = PdfFileReader(open(readFile, <span class="string">'rb'</span>))</span><br><span class="line">pdfWriter.write(open(writeFile, <span class="string">'wb'</span>))</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> page <span class="keyword">in</span> range(<span class="number">2</span>):</span><br><span class="line">        pageObj = pdfReader.getPage(page)</span><br><span class="line">        pdfWriter.addPage(pageObj)</span><br><span class="line">        pageObj = pdfReader.getPage(page)</span><br><span class="line">        pdfWriter.addPage(pageObj)</span><br><span class="line"></span><br><span class="line">newFile = open(writeFile,<span class="string">'wb'</span>)</span><br><span class="line">pdfWriter.write(newFile)</span><br><span class="line"></span><br><span class="line">newFile.close()</span><br></pre></td></tr></table></figure></div><p><a name="pr7No"></a><br>##</p><p><img src="https://s1.ax1x.com/2020/06/22/NYakNR.jpg" alt="NYakNR.jpg"><br /></p><p><a name="B7oXn"></a></p><h1 id="3-Water-Mark"><a href="#3-Water-Mark" class="headerlink" title="3. Water Mark"></a>3. Water Mark</h1><p><a name="pAwMC"></a></p><h2 id="3-1-Make-a-Water-Mark"><a href="#3-1-Make-a-Water-Mark" class="headerlink" title="3.1 Make a Water Mark"></a>3.1 Make a Water Mark</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">cm =<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_watermark</span><span class="params">(content)</span>:</span></span><br><span class="line">    <span class="comment">#默认大小为21cm*29.7cm</span></span><br><span class="line">    c = canvas.Canvas(<span class="string">'mark.pdf'</span>, pagesize = (<span class="number">30</span>*cm, <span class="number">30</span>*cm))   </span><br><span class="line">    c.translate(<span class="number">10</span>*cm, <span class="number">10</span>*cm) <span class="comment">#移动坐标原点(坐标系左下为(0,0)))                                                                                                                             </span></span><br><span class="line">    <span class="comment">#c.setFont('song',22)#设置字体为宋体，大小22号</span></span><br><span class="line">    c.setFillColorRGB(<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>)<span class="comment">#灰色                                                                                                                         </span></span><br><span class="line">    c.rotate(<span class="number">45</span>)<span class="comment">#旋转45度，坐标系被旋转</span></span><br><span class="line">    c.drawString(<span class="number">-7</span>*cm, <span class="number">0</span>*cm, content)</span><br><span class="line">    c.drawString(<span class="number">7</span>*cm, <span class="number">0</span>*cm, content)</span><br><span class="line">    c.drawString(<span class="number">0</span>*cm, <span class="number">7</span>*cm, content)</span><br><span class="line">    c.drawString(<span class="number">0</span>*cm, <span class="number">-7</span>*cm, content)                                                                                                                              </span><br><span class="line">    c.save()<span class="comment">#关闭并保存pdf文件</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYaFE9.jpg" alt="NYaFE9.jpg"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> reportlab.pdfgen <span class="keyword">import</span> canvas</span><br><span class="line"></span><br><span class="line">cm =<span class="number">1</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">create_watermark</span><span class="params">(W, H)</span>:</span></span><br><span class="line">    <span class="comment">#默认大小为21cm*29.7cm</span></span><br><span class="line">    c = canvas.Canvas(<span class="string">'mark.pdf'</span>, pagesize = (W, H))   </span><br><span class="line">    c.translate(<span class="number">10</span>*cm, <span class="number">10</span>*cm) <span class="comment">#移动坐标原点(坐标系左下为(0,0)))                                                                                                                             </span></span><br><span class="line">    <span class="comment">#c.setFont('song',22)#设置字体为宋体，大小22号</span></span><br><span class="line">    <span class="comment">#c.setFillColorRGB(0.5,0.5,0.5)#灰色                                                                                                                         </span></span><br><span class="line">    <span class="comment">#c.rotate(45)#旋转45度，坐标系被旋转</span></span><br><span class="line">    <span class="comment">#c.drawString(-7*cm, 0*cm, content)</span></span><br><span class="line">    <span class="comment">#c.drawString(7*cm, 0*cm, content)</span></span><br><span class="line">    <span class="comment">#c.drawString(0*cm, 7*cm, content)</span></span><br><span class="line">    <span class="comment">#c.drawString(0*cm, -7*cm, content)</span></span><br><span class="line">    <span class="comment">#指定描边的颜色</span></span><br><span class="line">    <span class="comment">#c.setStrokeColorRGB(0, 1, 0)</span></span><br><span class="line">    <span class="comment">#指定填充颜色</span></span><br><span class="line">    c.setFillColorRGB(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>)</span><br><span class="line">    <span class="comment">#画一个矩形</span></span><br><span class="line">    c.rect(<span class="number">0</span>, <span class="number">0</span>, W, H/<span class="number">2</span> <span class="number">-10</span> , fill=<span class="number">1</span>)</span><br><span class="line">    c.save()<span class="comment">#关闭并保存pdf文件</span></span><br><span class="line"></span><br><span class="line">create_watermark(<span class="number">580</span>,<span class="number">820</span>)</span><br><span class="line">add_watermark(pdf_file_in, pdf_file_mark, pdf_file_out)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#encoding=utf-8</span></span><br><span class="line"><span class="comment">#author: walker</span></span><br><span class="line"><span class="comment">#date: 2014-03-18</span></span><br><span class="line"><span class="comment">#function:给pdf添加水印</span></span><br><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileWriter, PdfFileReader</span><br><span class="line"><span class="keyword">from</span> reportlab.pdfgen <span class="keyword">import</span> canvas</span><br><span class="line"><span class="comment">#所有路径为绝对路径</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_watermark</span><span class="params">(pdf_file_in, pdf_file_mark, pdf_file_out)</span>:</span></span><br><span class="line">    pdf_output = PdfFileWriter()</span><br><span class="line">    input_stream = open(pdf_file_in, <span class="string">'rb'</span>)</span><br><span class="line">    pdf_input = PdfFileReader(pdf_file_in)                                                                                </span><br><span class="line">    <span class="comment"># PDF文件被加密了</span></span><br><span class="line">    <span class="keyword">if</span> pdf_input.getIsEncrypted():</span><br><span class="line">        print( <span class="string">'该PDF文件被加密了.'</span>)</span><br><span class="line">        <span class="comment"># 尝试用空密码解密</span></span><br><span class="line">        <span class="keyword">try</span>:</span><br><span class="line">            pdf_input.decrypt(<span class="string">''</span>)</span><br><span class="line">        <span class="keyword">except</span> Exception <span class="keyword">or</span> e:</span><br><span class="line">            print( <span class="string">'尝试用空密码解密失败.'</span>)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            print( <span class="string">'用空密码解密成功.'</span>)</span><br><span class="line">    <span class="comment"># 获取PDF文件的页数</span></span><br><span class="line">    pageNum = pdf_input.getNumPages()</span><br><span class="line">    <span class="comment">#读入水印pdf文件</span></span><br><span class="line">    pdf_watermark = PdfFileReader(open(pdf_file_mark, <span class="string">'rb'</span>))</span><br><span class="line">    <span class="comment"># 给每一页打水印</span></span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(pageNum):</span><br><span class="line">        page = pdf_input.getPage(i)</span><br><span class="line">        page.mergePage(pdf_watermark.getPage(<span class="number">0</span>))</span><br><span class="line">        page.compressContentStreams()   <span class="comment">#压缩内容</span></span><br><span class="line">        pdf_output.addPage(page)</span><br><span class="line">    <span class="keyword">return</span> pdf_output</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">PDF1 = add_watermark(<span class="string">"GRE阅读白皮书.pdf"</span>, pdf_file_mark, pdf_file_out)</span><br><span class="line">PDF2 = add_watermark(<span class="string">"GRE阅读白皮书.pdf"</span>, pdf_file_mark2, pdf_file_out)</span><br><span class="line"></span><br><span class="line">pdf_output = PdfFileWriter()</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(PDF2.getNumPages()):</span><br><span class="line">    page = PDF1.getPage(i)</span><br><span class="line">    pdf_output.addPage(page)</span><br><span class="line">    page = PDF2.getPage(i)</span><br><span class="line">    pdf_output.addPage(page)</span><br><span class="line"></span><br><span class="line">newFile = open(pdf_file_out,<span class="string">'wb'</span>)</span><br><span class="line">pdf_output.write(newFile)</span><br><span class="line">newFile.close()</span><br></pre></td></tr></table></figure></div><p><a name="LcBYr"></a></p><h1 id="Add-Page-number"><a href="#Add-Page-number" class="headerlink" title="Add Page number"></a>Add Page number</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding:utf-8 -*-</span></span><br><span class="line"><span class="comment"># 本示例使用两个第三方库来实现为PDF文件添加文字水印</span></span><br><span class="line"><span class="comment"># 这两个库是pyPdf和reportlab</span></span><br><span class="line"><span class="comment"># 使用的Python版本是Python 3.7</span></span><br><span class="line"><span class="comment"># origing from https://www.cnblogs.com/kayb/p/10846341.html</span></span><br><span class="line"><span class="comment"># 作者：小磊</span></span><br><span class="line"><span class="comment">#链接：https://www.zhihu.com/question/19628465/answer/353504051</span></span><br><span class="line"><span class="comment">#来源：知乎</span></span><br><span class="line"><span class="comment">#著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"></span><br><span class="line">helpDoc = <span class="string">'''</span></span><br><span class="line"><span class="string">Add Page Number to PDF file with Python</span></span><br><span class="line"><span class="string">Python 给 PDF 添加 页码</span></span><br><span class="line"><span class="string">usage:</span></span><br><span class="line"><span class="string">    python addPageNumberToPDF.py [PDF path]</span></span><br><span class="line"><span class="string">require:</span></span><br><span class="line"><span class="string">    pip install reportlab pypdf2</span></span><br><span class="line"><span class="string">    Support both Python2/3, But more recommend Python3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">tips:</span></span><br><span class="line"><span class="string">    * output file will save at pdfWithNumbers/[PDF path]_page.pdf</span></span><br><span class="line"><span class="string">    * only support A4 size PDF</span></span><br><span class="line"><span class="string">    * tested on Python2/Python3@ubuntu</span></span><br><span class="line"><span class="string">    * more large size of PDF require more RAM</span></span><br><span class="line"><span class="string">    * if segmentation fault, plaese try use Python 3</span></span><br><span class="line"><span class="string">    * if generate PDF document is damaged, plaese try use Python 3</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">Author:</span></span><br><span class="line"><span class="string">    Lei Yang (ylxx@live.com)</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">GitHub:</span></span><br><span class="line"><span class="string">    https://gist.github.com/DIYer22/b9ede6b5b96109788a47973649645c1f</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line">print(helpDoc)</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> reportlab</span><br><span class="line"><span class="keyword">from</span> reportlab.lib.units <span class="keyword">import</span> mm</span><br><span class="line"><span class="keyword">from</span> reportlab.pdfgen <span class="keyword">import</span> canvas</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> PyPDF2 <span class="keyword">import</span> PdfFileWriter, PdfFileReader</span><br><span class="line"></span><br><span class="line">path = <span class="string">'test.pdf'</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">createPagePdf</span><span class="params">(num, tmp)</span>:</span></span><br><span class="line">    c = canvas.Canvas(tmp)</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">1</span>,num+<span class="number">1</span>):</span><br><span class="line">        c.drawString((<span class="number">210</span>//<span class="number">2</span>)*mm, (<span class="number">4</span>)*mm, str(i))</span><br><span class="line">        c.showPage()</span><br><span class="line">    c.save()</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">    <span class="keyword">with</span> open(tmp, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        pdf = PdfFileReader(f)</span><br><span class="line">        layer = pdf.getPage(<span class="number">0</span>)</span><br><span class="line">    <span class="keyword">return</span> layer</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line">    <span class="keyword">import</span> sys,os</span><br><span class="line">    <span class="keyword">if</span> len(sys.argv) == <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isfile(path):</span><br><span class="line">            sys.exit(<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        path = sys.argv[<span class="number">1</span>]</span><br><span class="line">    base = os.path.basename(path)</span><br><span class="line">    tmp = <span class="string">"__tmp.pdf"</span></span><br><span class="line">    batch = <span class="number">10</span></span><br><span class="line">    batch = <span class="number">0</span></span><br><span class="line">    output = PdfFileWriter()</span><br><span class="line">    <span class="keyword">with</span> open(path, <span class="string">'rb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        pdf = PdfFileReader(f,strict=<span class="literal">False</span>)</span><br><span class="line">        n = pdf.getNumPages()</span><br><span class="line">        <span class="keyword">if</span> batch == <span class="number">0</span>:</span><br><span class="line">            batch = -n</span><br><span class="line">        createPagePdf(n,tmp)</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> os.path.isdir(<span class="string">'pdfWithNumbers/'</span>):</span><br><span class="line">            os.mkdir(<span class="string">'pdfWithNumbers/'</span>)</span><br><span class="line">        <span class="keyword">with</span> open(tmp, <span class="string">'rb'</span>) <span class="keyword">as</span> ftmp:</span><br><span class="line">            numberPdf = PdfFileReader(ftmp)</span><br><span class="line">            <span class="keyword">for</span> p <span class="keyword">in</span> range(n):</span><br><span class="line">                <span class="keyword">if</span> <span class="keyword">not</span> p%batch <span class="keyword">and</span> p:</span><br><span class="line">                    newpath = path.replace(base, <span class="string">'pdfWithNumbers/'</span>+ base[:<span class="number">-4</span>] + <span class="string">'_page_%d'</span>%(p//batch) + path[<span class="number">-4</span>:])</span><br><span class="line">                    <span class="keyword">with</span> open(newpath, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">                        output.write(f)</span><br><span class="line">                    output = PdfFileWriter()</span><br><span class="line">                print(<span class="string">'page: %d of %d'</span>%(p, n))</span><br><span class="line">                page = pdf.getPage(p)</span><br><span class="line">                numberLayer = numberPdf.getPage(p)</span><br><span class="line">                page.mergePage(numberLayer)</span><br><span class="line">                output.addPage(page)</span><br><span class="line">            <span class="keyword">if</span> output.getNumPages():</span><br><span class="line">                newpath = path.replace(base, <span class="string">'pdfWithNumbers/'</span> + base[:<span class="number">-4</span>] + <span class="string">'_page_%d'</span>%(p//batch + <span class="number">1</span>)  + path[<span class="number">-4</span>:])</span><br><span class="line">                <span class="keyword">with</span> open(newpath, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">                    output.write(f)</span><br><span class="line">        os.remove(tmp)</span><br></pre></td></tr></table></figure></div><p>——————————————————————————————————————————————–<br />github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br />blog: <a href="https://karobben.github.io/">Karobben.github.io</a> <br />R 语言画图索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br /></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>OpenCV</title>
      <link href="/Python/OpenCV.html"/>
      <url>/Python/OpenCV.html</url>
      
        <content type="html"><![CDATA[<h1>OpenCV</h1><p><a name="Y6vHH"></a></p><h1>Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pip3 install --upgrade setuptools</span><br><span class="line">pip3 install numpy Matplotlib</span><br><span class="line">pip3 install opencv-python</span><br></pre></td></tr></table></figure></div><p><a name="o64ZD"></a></p><h1>1. Img Read and Show</h1><p><a name="THijk"></a></p><h2 id=""><a class="header-anchor" href="#"></a></h2><p><a name="Qs3gR"></a></p><h2 id="1-1-Load-an-color-image-in-grayscale"><a class="header-anchor" href="#1-1-Load-an-color-image-in-grayscale"></a>1.1 Load an color image in grayscale</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line">img = cv2.imread(<span class="string">'messi5.jpg'</span>,<span class="number">0</span>)</span><br></pre></td></tr></table></figure></div><p><a name="sShM1"></a></p><h3 id="1-12-img-read-from-Camera"><a class="header-anchor" href="#1-12-img-read-from-Camera"></a>1.12 img read from Camera</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line">ret, frame = cap.read()</span><br><span class="line">cap.release()</span><br><span class="line"></span><br><span class="line">cap = cv2.VideoCapture(<span class="number">0</span>)</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">   ret, frame = cap.read()</span><br><span class="line">   cv2.imshow(<span class="string">'image'</span>,frame)</span><br><span class="line">   <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">       cv2.destroyAllWindows()</span><br><span class="line">       <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div><p><a name="efUCs"></a></p><h4 id="Resolution-of-the-img"><a class="header-anchor" href="#Resolution-of-the-img"></a>Resolution of the img</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cap.set(cv2.CAP_PROP_FRAME_WIDTH,<span class="number">1280</span>)</span><br><span class="line">cap.set(cv2.CAP_PROP_FRAME_HEIGHT,<span class="number">720</span>)</span><br></pre></td></tr></table></figure></div><p><a name="PjfCy"></a></p><h2 id="1-2-img-show-and-close"><a class="header-anchor" href="#1-2-img-show-and-close"></a>1.2 img show and close</h2><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cv2.imshow(<span class="string">'image'</span>,img)</span><br><span class="line">cv2.waitKey(<span class="number">0</span>)</span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure></div><p><a name="Fvpyi"></a></p><h3 id="1-21-resize"><a class="header-anchor" href="#1-21-resize"></a>1.21 resize</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.resize(img, (<span class="number">10</span>,<span class="number">10</span>), interpolation = cv2.INTER_AREA)</span><br></pre></td></tr></table></figure></div><br /><p><a name="TIAdj"></a></p><h2 id="1-3-img-wirte"><a class="header-anchor" href="#1-3-img-wirte"></a>1.3 img wirte</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cv2.imwrite(<span class="string">'messigray.png'</span>,img)</span><br></pre></td></tr></table></figure></div><p><a name="LpucV"></a></p><h2 id="1-4-Screen-shot"><a class="header-anchor" href="#1-4-Screen-shot"></a>1.4 Screen shot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> mss <span class="keyword">import</span> mss</span><br><span class="line">cords = &#123;<span class="string">'top'</span>:<span class="number">40</span> , <span class="string">'left'</span>: <span class="number">0</span> , <span class="string">'width'</span>: <span class="number">800</span>, <span class="string">'height'</span>: <span class="number">640</span> &#125;</span><br><span class="line"><span class="keyword">while</span>(<span class="literal">True</span>):</span><br><span class="line">   <span class="keyword">with</span> mss() <span class="keyword">as</span> sct :</span><br><span class="line">       img = np.array(sct.grab(cords)) <span class="comment">#sct.grab(cords/monitor)</span></span><br><span class="line">   <span class="comment">#cimg = cv2.cvtColor(img , cv2.COLOR_BGRA2GRAY)</span></span><br><span class="line">   cv2.imshow(<span class="string">'image'</span>,img)</span><br><span class="line">   <span class="keyword">if</span> cv2.waitKey(<span class="number">1</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">'q'</span>):</span><br><span class="line">       cv2.destroyAllWindows()</span><br><span class="line">       <span class="keyword">break</span></span><br><span class="line">cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure></div><br /><br /><p><a name="smIPT"></a></p><h2 id="1-5-Draw-on-Img"><a class="header-anchor" href="#1-5-Draw-on-Img"></a>1.5 Draw on Img</h2><h3 id="Draw-a-Rectangle"><a class="header-anchor" href="#Draw-a-Rectangle"></a>Draw a Rectangle</h3><p>reference: <a href="https://blog.csdn.net/u011520181/java/article/details/84036425" target="_blank" rel="noopener">AlanWang4523 2018</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 绘制一个红色矩形</span></span><br><span class="line">ptLeftTop = (<span class="number">120</span>, <span class="number">100</span>)</span><br><span class="line">ptRightBottom = (<span class="number">200</span>, <span class="number">150</span>)</span><br><span class="line">point_color = (<span class="number">0</span>, <span class="number">0</span>, <span class="number">255</span>) <span class="comment"># BGR</span></span><br><span class="line">thickness = <span class="number">1</span></span><br><span class="line">lineType = <span class="number">8</span></span><br><span class="line">cv.rectangle(img, ptLeftTop, ptRightBottom, point_color, thickness, lineType)</span><br></pre></td></tr></table></figure></div><h2 id="Some-Tricks-for-img"><a class="header-anchor" href="#Some-Tricks-for-img"></a>Some Tricks for img</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Blur</span></span><br><span class="line">img = cv2.medianBlur(img,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Grey</span></span><br><span class="line">cv2.cvtColor(img,cv2.COLOR_RGB2GRAY)</span><br></pre></td></tr></table></figure></div><p><a name="FS5Nj"></a></p><h1>2 Video</h1><p><a name="8FPmZ"></a></p><h2 id="2-1-Video-read"><a class="header-anchor" href="#2-1-Video-read"></a>2.1 Video read</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">cap=cv2.VideoCapture(<span class="string">"test"</span>)</span><br><span class="line"><span class="keyword">while</span> (<span class="literal">True</span>):</span><br><span class="line">   ret,frame=cap.read()</span><br><span class="line">   cv2.imshow(<span class="string">"video"</span>,frame)</span><br><span class="line">   <span class="comment"># 在播放每一帧时，使用cv2.waitKey()设置适当的持续时间。如果设置的太低视频就会播放的非常快，如果设置的太高就会播放的很慢。通常情况下25ms就ok</span></span><br><span class="line">   <span class="keyword">if</span> cv2.waitKey(<span class="number">25</span>)&amp;<span class="number">0xFF</span>==ord(<span class="string">'q'</span>):</span><br><span class="line">       cv2.destroyAllWindows()</span><br><span class="line">       <span class="keyword">break</span></span><br></pre></td></tr></table></figure></div><h2 id="Reading-Video-information"><a class="header-anchor" href="#Reading-Video-information"></a>Reading Video information</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># fps of this Video</span></span><br><span class="line">fps_c = cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">Video_h = cap.get(cv2.CAP_PROP_FRAME_HEIGHT)</span><br><span class="line">Video_w = cap.get(cv2.CAP_PROP_FRAME_WIDTH)</span><br></pre></td></tr></table></figure></div><p><a name="DG9Xm"></a></p><h2 id="2-2-play-Video-and-audio"><a class="header-anchor" href="#2-2-play-Video-and-audio"></a>2.2 play Video and audio</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#https://stackoverflow.com/questions/46864915/python-add-audio-to-video-opencv</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="comment">#ffpyplayer for playing audio</span></span><br><span class="line"><span class="keyword">from</span> ffpyplayer.player <span class="keyword">import</span> MediaPlayer</span><br><span class="line">video_path=<span class="string">"../L1/images/Godwin.mp4"</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">PlayVideo</span><span class="params">(video_path)</span>:</span></span><br><span class="line">    video=cv2.VideoCapture(video_path)</span><br><span class="line">    player = MediaPlayer(video_path)</span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        grabbed, frame=video.read()</span><br><span class="line">        audio_frame, val = player.get_frame()</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">not</span> grabbed:</span><br><span class="line">            print(<span class="string">"End of video"</span>)</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        <span class="keyword">if</span> cv2.waitKey(<span class="number">28</span>) &amp; <span class="number">0xFF</span> == ord(<span class="string">"q"</span>):</span><br><span class="line">            <span class="keyword">break</span></span><br><span class="line">        cv2.imshow(<span class="string">"Video"</span>, frame)</span><br><span class="line">        <span class="keyword">if</span> val != <span class="string">'eof'</span> <span class="keyword">and</span> audio_frame <span class="keyword">is</span> <span class="keyword">not</span> <span class="literal">None</span>:</span><br><span class="line">            <span class="comment">#audio</span></span><br><span class="line">            img, t = audio_frame</span><br><span class="line">    video.release()</span><br><span class="line">    cv2.destroyAllWindows()</span><br><span class="line">PlayVideo(video_path)</span><br></pre></td></tr></table></figure></div><p><a name="dw94w"></a></p><h2 id="2-3-Video-write"><a class="header-anchor" href="#2-3-Video-write"></a>2.3 Video write</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># for normal output</span></span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(*<span class="string">'XVID'</span>)</span><br><span class="line">out = cv2.VideoWriter(<span class="string">'output.avi'</span>,fourcc, <span class="number">20.0</span>, (<span class="number">640</span>,<span class="number">480</span>))</span><br><span class="line"><span class="keyword">while</span> true:</span><br><span class="line"> out.write(frame)</span><br><span class="line"><span class="comment"># For Gray outpu</span></span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(<span class="string">'M'</span>,<span class="string">'J'</span>,<span class="string">'P'</span>,<span class="string">'G'</span>)</span><br><span class="line">out = cv2.VideoWriter(<span class="string">"outfilename.mp4"</span>, fourcc, <span class="number">15</span>, (<span class="number">640</span>,<span class="number">480</span>), <span class="number">0</span>)</span><br></pre></td></tr></table></figure></div><br /><p><a name="4DtIF"></a></p><h2 id="2-4-Img-to-Video"><a class="header-anchor" href="#2-4-Img-to-Video"></a>2.4 Img to Video</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> cv2, os</span><br><span class="line"></span><br><span class="line">File = <span class="string">"Up"</span></span><br><span class="line">OUTPUT = <span class="string">"Egg_Day1.avi"</span></span><br><span class="line">List = os.popen(<span class="string">'ls '</span>+File).read().split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line"></span><br><span class="line">img = cv2.imread(File +<span class="string">"/"</span>+List[<span class="number">0</span>])</span><br><span class="line">fps = <span class="number">24</span></span><br><span class="line">size = (len(img[<span class="number">0</span>]),len(img))</span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(<span class="string">'M'</span>,<span class="string">'J'</span>,<span class="string">'P'</span>,<span class="string">'G'</span>)</span><br><span class="line">videowriter = cv2.VideoWriter(OUTPUT,fourcc,fps,size)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">    img = cv2.imread(File +<span class="string">"/"</span>+i)</span><br><span class="line">    videowriter.write(img)</span><br><span class="line">videowriter.release()</span><br></pre></td></tr></table></figure></div><p><a name="U6CwD"></a></p><h2 id="2-5-Video-capture"><a class="header-anchor" href="#2-5-Video-capture"></a>2.5 Video capture</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 2019/3/7 11:43</span></span><br><span class="line"><span class="comment"># @Author  : HaoWANG</span></span><br><span class="line"><span class="comment"># @Site    :</span></span><br><span class="line"><span class="comment"># @File    : VideoWrite.py</span></span><br><span class="line"><span class="comment"># @Software: PyCharm</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 加载包</span></span><br><span class="line"><span class="keyword">import</span> math</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">()</span>:</span></span><br><span class="line">  <span class="comment"># 初始化摄像头</span></span><br><span class="line">  keep_processing = <span class="literal">True</span>;</span><br><span class="line">  camera_to_use = <span class="number">0</span>;  <span class="comment"># 0 if you have one camera, 1 or &gt; 1 otherwise</span></span><br><span class="line">  cap = cv2.VideoCapture(<span class="number">0</span>)  <span class="comment"># 定义视频捕获类cap</span></span><br><span class="line">  windowName = <span class="string">"Live Video Capture and Write"</span>  <span class="comment"># 窗口名</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># opencv中视频录制需要借助VideoWriter对象， 将从VideoCapture 中读入图片，不断地写入到VideoWrite的数据流中。</span></span><br><span class="line">  <span class="comment"># 指定视频编解码方式为MJPG</span></span><br><span class="line">  codec = cv2.VideoWriter_fourcc(*<span class="string">'MJPG'</span>)</span><br><span class="line">  fps = <span class="number">25.0</span>  <span class="comment"># 指定写入帧率为25</span></span><br><span class="line">  frameSize = (<span class="number">640</span>, <span class="number">480</span>)  <span class="comment"># 指定窗口大小</span></span><br><span class="line">  <span class="comment"># # 创建 VideoWriter对象</span></span><br><span class="line">  output = cv2.VideoWriter(<span class="string">'VideoRecord.avi'</span>, codec, fps, frameSize)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># 摄像头开启检测</span></span><br><span class="line">  <span class="comment"># error detection #</span></span><br><span class="line">  <span class="keyword">if</span> <span class="keyword">not</span> (((len(sys.argv) == <span class="number">2</span>) <span class="keyword">and</span> (cap.open(str(sys.argv[<span class="number">1</span>]))))</span><br><span class="line">          <span class="keyword">or</span> (cap.open(camera_to_use))):</span><br><span class="line">    print(<span class="string">"ERROR：No video file specified or camera connected."</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="number">-1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment"># Camera Is Open</span></span><br><span class="line">  <span class="comment"># create window by name (note flags for resizable or not)</span></span><br><span class="line">  cv2.namedWindow(windowName, cv2.WINDOW_NORMAL)</span><br><span class="line">  print(<span class="string">"按键Q-结束视频录制"</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">while</span> (cap.isOpened()):</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 00 if video file successfully open then read frame from video</span></span><br><span class="line">    <span class="keyword">if</span> (keep_processing):</span><br><span class="line"></span><br><span class="line">      ret, frame = cap.read()  <span class="comment"># 定义read对象ret和frame帧</span></span><br><span class="line">      <span class="comment"># start a timer (to see how long processing and display takes)</span></span><br><span class="line">      start_t = cv2.getTickCount()</span><br><span class="line"></span><br><span class="line">      <span class="comment"># 不断的从VideoCapture 中读入图片，然后写入到VideoWrite的数据流中。</span></span><br><span class="line">      output.write(frame)</span><br><span class="line"></span><br><span class="line">      cv2.imshow(windowName, frame)  <span class="comment"># display image</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># stop the timer and convert to ms. (to see how long processing and display takes)</span></span><br><span class="line">      stop_t = ((cv2.getTickCount() - start_t) / cv2.getTickFrequency()) * <span class="number">1000</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># 接收键盘停止指令</span></span><br><span class="line">      <span class="comment"># start the event loop - essential</span></span><br><span class="line">      <span class="comment"># wait 40ms or less depending on processing time taken (i.e. 1000ms / 25 fps = 40 ms)</span></span><br><span class="line"></span><br><span class="line">      key = cv2.waitKey(max(<span class="number">2</span>, <span class="number">40</span> - int(math.ceil(stop_t)))) &amp; <span class="number">0xFF</span></span><br><span class="line"></span><br><span class="line">      <span class="comment"># It can also be set to detect specific key strokes by recording which key is pressed</span></span><br><span class="line">      <span class="comment"># e.g. if user presses "q" then exit</span></span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> (key == ord(<span class="string">'q'</span>)):</span><br><span class="line">        print(<span class="string">"Quit Process "</span>)</span><br><span class="line">        keep_processing = <span class="literal">False</span></span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">  print(<span class="string">"The display and video write tasks take &#123;&#125; ms"</span>.format(stop_t))</span><br><span class="line"></span><br><span class="line">  <span class="comment"># release the camera and close all windows</span></span><br><span class="line">  <span class="comment"># 资源释放,在录制结束后，我们要释放资源：</span></span><br><span class="line">  <span class="comment"># # 释放资源</span></span><br><span class="line">  cap.release()</span><br><span class="line">  output.release()</span><br><span class="line">  cv2.destroyAllWindows()</span><br><span class="line"><span class="comment"># end main()</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">  main()</span><br></pre></td></tr></table></figure></div><p><a name="fVJmV"></a></p><h1>Training your personal model</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">positive list:</span></span><br><span class="line"><span class="string">Pics in Me director, 55*110</span></span><br><span class="line"><span class="string">Background Pics are in BG file</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls Me/);do echo Me/$i <span class="number">1</span> <span class="number">0</span> <span class="number">0</span> <span class="number">55</span> <span class="number">110</span>;done &gt; pos.list</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(ls BG/);do echo BG/$i;done &gt; bg.list</span><br><span class="line"></span><br><span class="line">rm models/*</span><br><span class="line">opencv_createsamples  -info pos.list -vec pos.vec -bg bg.list -num <span class="number">12</span> -w <span class="number">20</span> -h <span class="number">40</span></span><br><span class="line">opencv_traincascade -data models/ -vec pos.vec -bg bg.list -numPos <span class="number">12</span> -numNeg <span class="number">27</span> -numStages <span class="number">2</span> -featureType HAAR -w <span class="number">20</span> -h <span class="number">40</span></span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">s</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment"># 探测图片中的人脸</span></span><br><span class="line"></span><br><span class="line">detector = cv2.CascadeClassifier(<span class="string">"models/params.xml"</span>) <span class="comment"># absolute !!!</span></span><br><span class="line"></span><br><span class="line">faces = detector.detectMultiScale(img)</span><br><span class="line"><span class="keyword">for</span>(x,y,w,h) <span class="keyword">in</span> faces:</span><br><span class="line">    cv2.rectangle(image,(x,y),(x+w,y+w),(<span class="number">0</span>,<span class="number">255</span>,<span class="number">0</span>),<span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><br /><p><a name="pTmnX"></a></p><h1>Matlibplot</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"><span class="string"># --------------------------------------------------------</span></span><br><span class="line"><span class="string"># @Author : panjq</span></span><br><span class="line"><span class="string"># @E-mail : pan_jinquan@163.com</span></span><br><span class="line"><span class="string"># @Date   : 2020-02-05 11:01:49</span></span><br><span class="line"><span class="string"># --------------------------------------------------------</span></span><br><span class="line"><span class="string">"""</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">fig2data</span><span class="params">(fig)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    fig = plt.figure()</span></span><br><span class="line"><span class="string">    image = fig2data(fig)</span></span><br><span class="line"><span class="string">    @brief Convert a Matplotlib figure to a 4D numpy array with RGBA channels and return it</span></span><br><span class="line"><span class="string">    @param fig a matplotlib figure</span></span><br><span class="line"><span class="string">    @return a numpy 3D array of RGBA values</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    <span class="keyword">import</span> PIL.Image <span class="keyword">as</span> Image</span><br><span class="line">    <span class="comment"># draw the renderer</span></span><br><span class="line">    fig.canvas.draw()</span><br><span class="line">    <span class="comment"># Get the RGBA buffer from the figure</span></span><br><span class="line">    w, h = fig.canvas.get_width_height()</span><br><span class="line">    buf = np.fromstring(fig.canvas.tostring_argb(), dtype=np.uint8)</span><br><span class="line">    buf.shape = (w, h, <span class="number">4</span>)</span><br><span class="line">    <span class="comment"># canvas.tostring_argb give pixmap in ARGB mode. Roll the ALPHA channel to have it in RGBA mode</span></span><br><span class="line">    buf = np.roll(buf, <span class="number">3</span>, axis=<span class="number">2</span>)</span><br><span class="line">    image = Image.frombytes(<span class="string">"RGBA"</span>, (w, h), buf.tostring())</span><br><span class="line">    image = np.asarray(image)</span><br><span class="line">    <span class="keyword">return</span> image</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    <span class="comment"># Generate a figure with matplotlib&lt;/font&gt;</span></span><br><span class="line">    figure = plt.figure()</span><br><span class="line">    plot = figure.add_subplot(<span class="number">111</span>)</span><br><span class="line">    <span class="comment"># draw a cardinal sine plot</span></span><br><span class="line">    x = np.arange(<span class="number">1</span>, <span class="number">100</span>, <span class="number">0.1</span>)</span><br><span class="line">    y = np.sin(x) / x</span><br><span class="line">    plot.plot(x, y)</span><br><span class="line">    plt.show()</span><br><span class="line">    <span class="comment">##</span></span><br><span class="line">    image = fig2data(figure)</span><br><span class="line">    cv2.imshow(<span class="string">"image"</span>, image)</span><br><span class="line">    cv2.waitKey(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Opencv &amp; gif</title>
      <link href="/Python/Opencv_gif.html"/>
      <url>/Python/Opencv_gif.html</url>
      
        <content type="html"><![CDATA[<h1 id="Opencv-amp-gif"><a href="#Opencv-amp-gif" class="headerlink" title="Opencv &amp; gif"></a>Opencv &amp; gif</h1><p>reference: <a href="https://blog.csdn.net/qq_41500251/article/details/82820806" target="_blank" rel="noopener">https://blog.csdn.net/qq_41500251/article/details/82820806</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> time, cv2</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">GIF</span><span class="params">(file)</span>:</span></span><br><span class="line">    List = []</span><br><span class="line">    im = Image.open(file)</span><br><span class="line">    im.seek(<span class="number">1</span>)<span class="comment">#skip to the second frame</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        <span class="keyword">while</span> <span class="number">1</span>:</span><br><span class="line">            List += [cv2.cvtColor(np.asarray(im.convert()),cv2.COLOR_RGB2BGR)]</span><br><span class="line">            im.seek(im.tell()+<span class="number">1</span>)</span><br><span class="line">    <span class="keyword">except</span> EOFError:<span class="comment">#the sequence ends</span></span><br><span class="line">        <span class="keyword">pass</span></span><br><span class="line">    Num = <span class="number">0</span></span><br><span class="line">    <span class="keyword">while</span> Num &lt; len(List)*<span class="number">2</span>:</span><br><span class="line">        Num +=<span class="number">1</span></span><br><span class="line">        ID = Num%(len(List))</span><br><span class="line">        cv2.imshow(<span class="string">"OpenCV"</span>,List[ID])</span><br><span class="line">        print(ID)</span><br><span class="line">        cv2.waitKey(<span class="number">1</span>)</span><br><span class="line">        time.sleep(<span class="number">0.1</span>)</span><br><span class="line">    cv2.destroyAllWindows()</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>PIL, np.array</title>
      <link href="/Python/PIL_np.array.html"/>
      <url>/Python/PIL_np.array.html</url>
      
        <content type="html"><![CDATA[<h1 id="PIL-np-array"><a href="#PIL-np-array" class="headerlink" title="PIL, np.array"></a>PIL, np.array</h1><p><a name="F4075"></a></p><h3 id="PIL-Image转换成OpenCV格式"><a href="#PIL-Image转换成OpenCV格式" class="headerlink" title="PIL.Image转换成OpenCV格式"></a>PIL.Image转换成OpenCV格式</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#reference https://blog.csdn.net/dcrmg/java/article/details/78147219</span></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy</span><br><span class="line"></span><br><span class="line">image = Image.open(<span class="string">"plane.jpg"</span>)</span><br><span class="line">image.show()</span><br><span class="line">img = cv2.cvtColor(numpy.asarray(image),cv2.COLOR_RGB2BGR)</span><br><span class="line">cv2.imshow(<span class="string">"OpenCV"</span>,img)</span><br><span class="line">cv2.waitKey()</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Plot in the Terminal!!! 在终端里面画画！！</title>
      <link href="/Python/Plot-in-the-Terminal.html"/>
      <url>/Python/Plot-in-the-Terminal.html</url>
      
        <content type="html"><![CDATA[<h1 id="Plot-in-the-Terminal-在终端里面画画！！"><a href="#Plot-in-the-Terminal-在终端里面画画！！" class="headerlink" title="Plot in the Terminal!!! 在终端里面画画！！"></a>Plot in the Terminal!!! 在终端里面画画！！</h1><p><a href="https://github.com/kressi/terminalplot" target="_blank" rel="noopener">https://github.com/kressi/terminalplot</a><br /><a href="https://github.com/glamp/bashplotlib" target="_blank" rel="noopener">https://github.com/glamp/bashplotlib</a><br />！！！ <a href="https://stackoverflow.com/questions/20295646/python-ascii-plots-in-terminal" target="_blank" rel="noopener">https://stackoverflow.com/questions/20295646/python-ascii-plots-in-terminal</a><br /><a href="https://stackoverflow.com/questions/37288421/how-to-plot-a-chart-in-the-terminal" target="_blank" rel="noopener">https://stackoverflow.com/questions/37288421/how-to-plot-a-chart-in-the-terminal</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Pandas</title>
      <link href="/Python/Pandas.html"/>
      <url>/Python/Pandas.html</url>
      
        <content type="html"><![CDATA[<h1 id="Pandas"><a href="#Pandas" class="headerlink" title="Pandas"></a>Pandas</h1><h1 id="Basic"><a href="#Basic" class="headerlink" title="Basic"></a>Basic</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"></span><br><span class="line"><span class="comment">##read file</span></span><br><span class="line"></span><br><span class="line">TB = pd.read_csv(<span class="string">"sentence-G"</span>,sep=<span class="string">'\t'</span>, names=<span class="literal">None</span>, header=<span class="literal">None</span>)</span><br><span class="line">TB.columns = [<span class="string">'频率'</span>, <span class="string">''</span>, <span class="string">'V2'</span>, <span class="string">'词义'</span>, <span class="string">'V3'</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment">#DataFrame</span></span><br><span class="line">pd.DataFrame(index=range(<span class="number">40</span>),columns=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">## rsult output</span></span><br><span class="line">TB.to_csv(<span class="string">"table"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line"></span><br><span class="line">data</span><br><span class="line">data[<span class="number">0</span>:<span class="number">2</span>]       <span class="comment">#取前两行数据</span></span><br><span class="line"></span><br><span class="line">len(data )              <span class="comment">#求出一共多少行</span></span><br><span class="line">data.columns.size      <span class="comment">#求出一共多少列</span></span><br><span class="line">data.columns        <span class="comment">#列索引名称</span></span><br><span class="line">data.index       <span class="comment">#行索引名称</span></span><br><span class="line"></span><br><span class="line">data.ix[<span class="number">1</span>]                <span class="comment">#取第2行数据</span></span><br><span class="line">data.iloc[<span class="number">1</span>]             <span class="comment">#取第2行数据</span></span><br><span class="line">data.loc[<span class="string">'A'</span>]      <span class="comment">#取第行索引为”A“的一行数据，</span></span><br><span class="line">data[<span class="string">'x'</span>]      <span class="comment">#取列索引为x的一列数据</span></span><br><span class="line"></span><br><span class="line">data.loc[:,[<span class="string">'x'</span>,<span class="string">'z'</span>] ]          <span class="comment">#表示选取所有的行以及columns为a,b的列；</span></span><br><span class="line">data.loc[[<span class="string">'A'</span>,<span class="string">'B'</span>],[<span class="string">'x'</span>,<span class="string">'z'</span>]]     <span class="comment">#表示选取'A'和'B'这两行以及columns为x,z的列的并集；</span></span><br><span class="line">data.iloc[<span class="number">1</span>:<span class="number">3</span>,<span class="number">1</span>:<span class="number">3</span>]              <span class="comment">#数据切片操作，切连续的数据块</span></span><br><span class="line">data.iloc[[<span class="number">0</span>,<span class="number">2</span>],[<span class="number">1</span>,<span class="number">2</span>]]              <span class="comment">#即可以自由选取行位置，和列位置对应的数据，切零散的数据块</span></span><br><span class="line"></span><br><span class="line">data[data&gt;<span class="number">2</span>]       <span class="comment">#表示选取数据集中大于0的数据</span></span><br><span class="line">data[data.x&gt;<span class="number">5</span>]       <span class="comment">#表示选取数据集中x这一列大于5的所有的行</span></span><br><span class="line">a1=data.copy()</span><br><span class="line">a1[a1[<span class="string">'y'</span>].isin([<span class="string">'6'</span>,<span class="string">'10'</span>])]    <span class="comment">#表显示满足条件：列y中的值包含'6','8'的所有行。</span></span><br><span class="line"></span><br><span class="line">data.mean()           <span class="comment">#默认对每一列的数据求平均值；若加上参数a.mean(1)则对每一行求平均值；</span></span><br><span class="line">data[<span class="string">'x'</span>].value_counts()    <span class="comment">#统计某一列x中各个值出现的次数：</span></span><br><span class="line">data.describe() <span class="comment">#对每一列数据进行统计，包括计数，均值，std，各个分位数等。</span></span><br><span class="line">data.to_excel(<span class="string">r'E:\pypractice\Yun\doc\2.xls'</span>,sheet_name=<span class="string">'Sheet1'</span>)  <span class="comment">#数据输出至Exceldata[0:2]       #取前两行数据</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## from Dictionary to DataFrame</span></span><br><span class="line">TB = pd.Series(BB)</span><br><span class="line"></span><br><span class="line"><span class="comment">## DataFrame sort</span></span><br><span class="line">TB = TB.sort_values(ascending=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## DataFrame merge</span></span><br><span class="line">result = pd.concat([ Word, Sen], axis=<span class="number">1</span>, sort=<span class="literal">False</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">## NaN drap</span></span><br><span class="line">data.dropna(thresh=<span class="number">3</span>) <span class="comment"># at least 3 data we have</span></span><br></pre></td></tr></table></figure></div><h1 id="Skills"><a href="#Skills" class="headerlink" title="Skills"></a>Skills</h1><p>reference: <a href="https://mp.weixin.qq.com/s/Dm-pP6o4_qRQ49mnzFUcIQ" target="_blank" rel="noopener">数据分析1480</a></p><h2 id="NA-count"><a href="#NA-count" class="headerlink" title="NA count"></a>NA count</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">df=pd.read_csv(<span class="string">'titanic_train.csv'</span>)</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">missing_cal</span><span class="params">(df)</span>:</span></span><br><span class="line">    <span class="string">"""</span></span><br><span class="line"><span class="string">    df :数据集  </span></span><br><span class="line"><span class="string">    return：每个变量的缺失率</span></span><br><span class="line"><span class="string">    """</span></span><br><span class="line">    missing_series = df.isnull().sum()/df.shape[<span class="number">0</span>]</span><br><span class="line">    missing_df = pd.DataFrame(missing_series).reset_index()</span><br><span class="line">    missing_df = missing_df.rename(columns=&#123;<span class="string">'index'</span>:<span class="string">'col'</span>,</span><br><span class="line">                                            <span class="number">0</span>:<span class="string">'missing_pct'</span>&#125;)</span><br><span class="line">    missing_df = missing_df.sort_values(<span class="string">'missing_pct'</span>,ascending=<span class="literal">False</span>).reset_index(drop=<span class="literal">True</span>)</span><br><span class="line">    <span class="keyword">return</span> missing_df</span><br><span class="line">missing_cal(df)</span><br></pre></td></tr></table></figure></div><h2 id="idmax"><a href="#idmax" class="headerlink" title="idmax"></a>idmax</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'Sp'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>,<span class="string">'e'</span>,<span class="string">'f'</span>], <span class="string">'Mt'</span>:[<span class="string">'s1'</span>, <span class="string">'s1'</span>, <span class="string">'s2'</span>,<span class="string">'s2'</span>,<span class="string">'s2'</span>,<span class="string">'s3'</span>], <span class="string">'Value'</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>], <span class="string">'Count'</span>:[<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">6</span>]&#125;)</span><br><span class="line">df</span><br><span class="line"></span><br><span class="line">df.iloc[df.groupby([<span class="string">'Mt'</span>]).apply(<span class="keyword">lambda</span> x: x[<span class="string">'Count'</span>].idxmax())]</span><br><span class="line"></span><br><span class="line">df[<span class="string">"rank"</span>] = df.groupby(<span class="string">"ID"</span>)[<span class="string">"score"</span>].rank(method=<span class="string">"min"</span>, ascending=<span class="literal">False</span>).astype(np.int64)</span><br><span class="line">df[df[<span class="string">"rank"</span>] == <span class="number">1</span>][[<span class="string">"ID"</span>, <span class="string">"class"</span>]]</span><br></pre></td></tr></table></figure></div><h2 id="Raw-merge"><a href="#Raw-merge" class="headerlink" title="Raw merge"></a>Raw merge</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'id_part'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>], <span class="string">'pred'</span>:[<span class="number">0.1</span>,<span class="number">0.2</span>,<span class="number">0.3</span>,<span class="number">0.4</span>], <span class="string">'pred_class'</span>:[<span class="string">'women'</span>,<span class="string">'man'</span>,<span class="string">'cat'</span>,<span class="string">'dog'</span>], <span class="string">'v_id'</span>:[<span class="string">'d1'</span>,<span class="string">'d2'</span>,<span class="string">'d3'</span>,<span class="string">'d1'</span>]&#125;)</span><br><span class="line"></span><br><span class="line">df.groupby([<span class="string">'v_id'</span>]).agg(&#123;<span class="string">'pred_class'</span>: [<span class="string">', '</span>.join],<span class="string">'pred'</span>: <span class="keyword">lambda</span> x: list(x),</span><br><span class="line"><span class="string">'id_part'</span>: <span class="string">'first'</span>&#125;).reset_index()</span><br></pre></td></tr></table></figure></div><h2 id="Deleting-rows-by-string-match"><a href="#Deleting-rows-by-string-match" class="headerlink" title="Deleting rows by string-match"></a>Deleting rows by string-match</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'a'</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], <span class="string">'b'</span>:[<span class="string">'s1'</span>, <span class="string">'exp_s2'</span>, <span class="string">'s3'</span>,<span class="string">'exps4'</span>], <span class="string">'c'</span>:[<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>], <span class="string">'d'</span>:[<span class="number">3</span>,<span class="number">2</span>,<span class="number">5</span>,<span class="number">10</span>]&#125;)</span><br><span class="line">df[df[<span class="string">'b'</span>].str.contains(<span class="string">'exp'</span>)]</span><br></pre></td></tr></table></figure></div><h2 id="Sort"><a href="#Sort" class="headerlink" title="Sort"></a>Sort</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame([[<span class="string">'A'</span>,<span class="number">1</span>],[<span class="string">'A'</span>,<span class="number">3</span>],[<span class="string">'A'</span>,<span class="number">2</span>],[<span class="string">'B'</span>,<span class="number">5</span>],[<span class="string">'B'</span>,<span class="number">9</span>]], columns = [<span class="string">'name'</span>,<span class="string">'score'</span>])</span><br><span class="line"></span><br><span class="line">df.sort_values([<span class="string">'name'</span>,<span class="string">'score'</span>], ascending = [<span class="literal">True</span>,<span class="literal">False</span>])</span><br><span class="line">df.groupby(<span class="string">'name'</span>).apply(<span class="keyword">lambda</span> x: x.sort_values(<span class="string">'score'</span>, ascending=<span class="literal">False</span>)).reset_index(drop=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></div><h2 id="Select-columns-by-features"><a href="#Select-columns-by-features" class="headerlink" title="Select columns by features"></a>Select columns by features</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">drinks = pd.read_csv(<span class="string">'data/drinks.csv'</span>)</span><br><span class="line"><span class="comment"># 选择所有数值型的列</span></span><br><span class="line">drinks.select_dtypes(include=[<span class="string">'number'</span>]).head()</span><br><span class="line"><span class="comment"># 选择所有字符型的列</span></span><br><span class="line">drinks.select_dtypes(include=[<span class="string">'object'</span>]).head()</span><br><span class="line">drinks.select_dtypes(include=[<span class="string">'number'</span>,<span class="string">'object'</span>,<span class="string">'category'</span>,<span class="string">'datetime'</span>]).head()</span><br><span class="line"><span class="comment"># 用 exclude 关键字排除指定的数据类型</span></span><br><span class="line">drinks.select_dtypes(exclude=[<span class="string">'number'</span>]).head()</span><br></pre></td></tr></table></figure></div><h2 id="str-to-integer"><a href="#str-to-integer" class="headerlink" title="str to integer"></a>str to integer</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'列1'</span>:[<span class="string">'1.1'</span>,<span class="string">'2.2'</span>,<span class="string">'3.3'</span>],</span><br><span class="line">                  <span class="string">'列2'</span>:[<span class="string">'4.4'</span>,<span class="string">'5.5'</span>,<span class="string">'6.6'</span>],</span><br><span class="line">                  <span class="string">'列3'</span>:[<span class="string">'7.7'</span>,<span class="string">'8.8'</span>,<span class="string">'-'</span>]&#125;)</span><br><span class="line">df</span><br><span class="line">df.astype(&#123;<span class="string">'列1'</span>:<span class="string">'float'</span>,<span class="string">'列2'</span>:<span class="string">'float'</span>&#125;).dtypes</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">df = df.apply(pd.to_numeric, errors=<span class="string">'coerce'</span>).fillna(<span class="number">0</span>)</span><br></pre></td></tr></table></figure></div><h2 id="Reduce-the-RAM-consume"><a href="#Reduce-the-RAM-consume" class="headerlink" title="Reduce the RAM-consume"></a>Reduce the RAM-consume</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cols = [<span class="string">'beer_servings'</span>,<span class="string">'continent'</span>]</span><br><span class="line">small_drinks = pd.read_csv(<span class="string">'data/drinks.csv'</span>, usecols=cols)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">dtypes =&#123;<span class="string">'continent'</span>:<span class="string">'category'</span>&#125;</span><br><span class="line">smaller_drinks = pd.read_csv(<span class="string">'data/drinks.csv'</span>,usecols=cols, dtype=dtypes)</span><br></pre></td></tr></table></figure></div><h2 id="根据最大的类别筛选-DataFrame"><a href="#根据最大的类别筛选-DataFrame" class="headerlink" title="根据最大的类别筛选 DataFrame"></a>根据最大的类别筛选 DataFrame</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">movies = pd.read_csv(<span class="string">'data/imdb_1000.csv'</span>)</span><br><span class="line">counts = movies.genre.value_counts()</span><br><span class="line">movies[movies.genre.isin(counts.nlargest(<span class="number">3</span>).index)].head()</span><br></pre></td></tr></table></figure></div><h2 id="split-string-to-columns"><a href="#split-string-to-columns" class="headerlink" title="split string to columns"></a>split string to columns</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'姓名'</span>:[<span class="string">'张 三'</span>,<span class="string">'李 四'</span>,<span class="string">'王 五'</span>],</span><br><span class="line">                   <span class="string">'所在地'</span>:[<span class="string">'北京-东城区'</span>,<span class="string">'上海-黄浦区'</span>,<span class="string">'广州-白云区'</span>]&#125;)</span><br><span class="line">df</span><br><span class="line">df.姓名.str.split(<span class="string">' '</span>, expand=<span class="literal">True</span>)</span><br></pre></td></tr></table></figure></div><h2 id="把-Series-里的列表转换为-DataFrame"><a href="#把-Series-里的列表转换为-DataFrame" class="headerlink" title="把 Series 里的列表转换为 DataFrame"></a>把 Series 里的列表转换为 DataFrame</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df = pd.DataFrame(&#123;<span class="string">'列1'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>],<span class="string">'列2'</span>:[[<span class="number">10</span>,<span class="number">20</span>], [<span class="number">20</span>,<span class="number">30</span>], [<span class="number">30</span>,<span class="number">40</span>]]&#125;)</span><br><span class="line">df</span><br><span class="line"></span><br><span class="line">df_new = df.列<span class="number">2.</span>apply(pd.Series)</span><br><span class="line">pd.concat([df,df_new], axis=<span class="string">'columns'</span>)</span><br></pre></td></tr></table></figure></div><h2 id="用多个函数聚合"><a href="#用多个函数聚合" class="headerlink" title="用多个函数聚合"></a>用多个函数聚合</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">orders = pd.read_csv(<span class="string">'data/chipotle.tsv'</span>, sep=<span class="string">'\t'</span>)</span><br><span class="line">orders.groupby(<span class="string">'order_id'</span>).item_price.agg([<span class="string">'sum'</span>,<span class="string">'count'</span>]).head()</span><br></pre></td></tr></table></figure></div><h2 id="分组聚合"><a href="#分组聚合" class="headerlink" title="分组聚合"></a>分组聚合</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line">df = pd.DataFrame(&#123;<span class="string">'key1'</span>:[<span class="string">'a'</span>, <span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'b'</span>, <span class="string">'a'</span>],</span><br><span class="line">    <span class="string">'key2'</span>:[<span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>, <span class="string">'two'</span>, <span class="string">'one'</span>],</span><br><span class="line">    <span class="string">'data1'</span>:np.random.randn(<span class="number">5</span>),</span><br><span class="line">     <span class="string">'data2'</span>:np.random.randn(<span class="number">5</span>)&#125;)</span><br><span class="line">df</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> name, group <span class="keyword">in</span> df.groupby(<span class="string">'key1'</span>):</span><br><span class="line">    print(name)</span><br><span class="line">    print(group)</span><br><span class="line"></span><br><span class="line">dict(list(df.groupby(<span class="string">'key1'</span>)))</span><br></pre></td></tr></table></figure></div><h1 id="通过字典或Series进行分组"><a href="#通过字典或Series进行分组" class="headerlink" title="通过字典或Series进行分组"></a>通过字典或Series进行分组</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">people = pd.DataFrame(np.random.randn(<span class="number">5</span>, <span class="number">5</span>),</span><br><span class="line">     columns=[<span class="string">'a'</span>, <span class="string">'b'</span>, <span class="string">'c'</span>, <span class="string">'d'</span>, <span class="string">'e'</span>],</span><br><span class="line">     index=[<span class="string">'Joe'</span>, <span class="string">'Steve'</span>, <span class="string">'Wes'</span>, <span class="string">'Jim'</span>, <span class="string">'Travis'</span>])</span><br><span class="line">mapping = &#123;<span class="string">'a'</span>:<span class="string">'red'</span>, <span class="string">'b'</span>:<span class="string">'red'</span>, <span class="string">'c'</span>:<span class="string">'blue'</span>,</span><br><span class="line">     <span class="string">'d'</span>:<span class="string">'blue'</span>, <span class="string">'e'</span>:<span class="string">'red'</span>, <span class="string">'f'</span>:<span class="string">'orange'</span>&#125;</span><br><span class="line">by_column = people.groupby(mapping, axis=<span class="number">1</span>)</span><br><span class="line">by_column.sum()</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>QT</title>
      <link href="/Python/QT.html"/>
      <url>/Python/QT.html</url>
      
        <content type="html"><![CDATA[<h1 id="QT"><a href="#QT" class="headerlink" title="QT"></a>QT</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QLabel</span><br><span class="line"></span><br><span class="line">app = QApplication([])</span><br><span class="line">label = QLabel(<span class="string">'Hello World!'</span>)</span><br><span class="line">label.show()</span><br><span class="line">app.exec_()</span><br></pre></td></tr></table></figure></div><p><a name="FlhjN"></a></p><h2 id="无边窗-初始位点设定-透明"><a href="#无边窗-初始位点设定-透明" class="headerlink" title="无边窗, 初始位点设定, 透明"></a>无边窗, 初始位点设定, 透明</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QLabel</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"></span><br><span class="line">app = QApplication([])</span><br><span class="line">My_Window = QLabel(<span class="string">'Hello World!'</span>)</span><br><span class="line">My_Window.setWindowFlags(Qt.WA_TranslucentBackground|Qt.WindowStaysOnBottomHint|Qt.SubWindow)</span><br><span class="line">My_Window.move(<span class="number">1920</span>, <span class="number">100</span>)</span><br><span class="line"><span class="comment">#背景颜色</span></span><br><span class="line">My_Window.setStyleSheet(<span class="string">"QLabel&#123;color:rgb(225,22,173,255);font-size:50px;font-weight:normal;font-family:Arial;&#125;"</span>)</span><br><span class="line">My_Window.setWindowOpacity(<span class="number">0.5</span>)</span><br><span class="line">My_Window.show()</span><br><span class="line">app.exec_()</span><br></pre></td></tr></table></figure></div><p><a name="X6BCX"></a></p><h3 id="添加按钮-接上"><a href="#添加按钮-接上" class="headerlink" title="添加按钮(接上)"></a>添加按钮(接上)</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QLabel</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">btnPress1_clicked</span><span class="params">()</span>:</span></span><br><span class="line">    os.system(<span class="string">"google-chrome &amp;"</span>)</span><br><span class="line"></span><br><span class="line">app = QApplication([])</span><br><span class="line">btnPress1=QPushButton(<span class="string">'显示文本'</span>)</span><br><span class="line">btnPress1.setWindowFlags(Qt.FramelessWindowHint|Qt.WA_TranslucentBackground|Qt.WindowStaysOnBottomHint|Qt.SubWindow)</span><br><span class="line">btnPress1.clicked.connect(btnPress1_clicked)</span><br><span class="line">btnPress1.move(<span class="number">1920</span>, <span class="number">100</span>)</span><br><span class="line">btnPress1.show()</span><br></pre></td></tr></table></figure></div><p><a name="Rxpq8"></a></p><h1 id="多个元素"><a href="#多个元素" class="headerlink" title="多个元素"></a>多个元素</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> QApplication, QWidget, QPushButton, QVBoxLayout</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtGui <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtCore <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5.QtWidgets <span class="keyword">import</span> *</span><br><span class="line"><span class="keyword">from</span> PyQt5 <span class="keyword">import</span> QtWidgets, QtGui</span><br><span class="line"></span><br><span class="line">app = QApplication([])</span><br><span class="line">window = QWidget()</span><br><span class="line">window.setWindowFlags(Qt.FramelessWindowHint|Qt.WindowStaysOnBottomHint|Qt.SubWindow)</span><br><span class="line">window.setAutoFillBackground(<span class="literal">False</span>)</span><br><span class="line">window.setAttribute(Qt.WA_TranslucentBackground, <span class="literal">True</span>)</span><br><span class="line">window.repaint()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">layout = QVBoxLayout()</span><br><span class="line">btn = QPushButton(<span class="string">'Top'</span>)</span><br><span class="line"><span class="comment"># 无边框</span></span><br><span class="line"><span class="comment">#btn.setFlat(True)</span></span><br><span class="line">layout.addWidget(btn)</span><br><span class="line">layout.addWidget(QPushButton(<span class="string">'Bottom'</span>))</span><br><span class="line">window.setLayout(layout)</span><br><span class="line">window.show()</span><br><span class="line">app.exec_()</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Tensorflow-Numbers-k</title>
      <link href="/Python/Tensorflow-Numbers-k.html"/>
      <url>/Python/Tensorflow-Numbers-k.html</url>
      
        <content type="html"><![CDATA[<h1 id="Tensorflow-Numbers-k"><a href="#Tensorflow-Numbers-k" class="headerlink" title="Tensorflow-Numbers-k"></a>Tensorflow-Numbers-k</h1><p>我也不记得这是啥了= = </p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/local/bin/python3.6</span></span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> tensorflow.python <span class="keyword">import</span> keras</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.layers <span class="keyword">import</span> Dense, Flatten, Conv2D, Dropout</span><br><span class="line"></span><br><span class="line">a=pd.read_csv(<span class="string">"train.csv"</span>)</span><br><span class="line">a.drop(<span class="string">'label'</span>, axis=<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">img_rows, img_cols = <span class="number">28</span>, <span class="number">28</span></span><br><span class="line">num_classes = <span class="number">10</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">data_prep</span><span class="params">(raw)</span>:</span></span><br><span class="line">    out_y = keras.utils.to_categorical(raw.label, num_classes)</span><br><span class="line">    num_images = raw.shape[<span class="number">0</span>]</span><br><span class="line">    x_as_array = raw.values[:,<span class="number">1</span>:]</span><br><span class="line">    x_shaped_array = x_as_array.reshape(num_images, img_rows, img_cols, <span class="number">1</span>)</span><br><span class="line">    out_x = x_shaped_array / <span class="number">255</span></span><br><span class="line">    <span class="keyword">return</span> out_x, out_y</span><br><span class="line"></span><br><span class="line">train_size = <span class="number">30000</span></span><br><span class="line">train_file = <span class="string">"train.csv"</span></span><br><span class="line">raw_data = pd.read_csv(train_file)</span><br><span class="line"></span><br><span class="line">x, y = data_prep(raw_data)</span><br><span class="line"></span><br><span class="line">model = Sequential()</span><br><span class="line">model.add(Conv2D(<span class="number">30</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>),</span><br><span class="line">                 strides=<span class="number">2</span>,</span><br><span class="line">                 activation=<span class="string">'relu'</span>,</span><br><span class="line">                 input_shape=(img_rows, img_cols, <span class="number">1</span>)))</span><br><span class="line">Dropout(<span class="number">0.5</span>)</span><br><span class="line">model.add(Conv2D(<span class="number">30</span>, kernel_size=(<span class="number">3</span>, <span class="number">3</span>), strides=<span class="number">2</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">Dropout(<span class="number">0.5</span>)</span><br><span class="line">model.add(Flatten())</span><br><span class="line">model.add(Dense(<span class="number">128</span>, activation=<span class="string">'relu'</span>))</span><br><span class="line">model.add(Dense(num_classes, activation=<span class="string">'softmax'</span>))</span><br><span class="line"></span><br><span class="line">model.compile(loss=keras.losses.categorical_crossentropy,</span><br><span class="line">              optimizer=<span class="string">'adam'</span>,</span><br><span class="line">              metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line">model.fit(x, y,</span><br><span class="line">          batch_size=<span class="number">128</span>,</span><br><span class="line">          epochs=<span class="number">2</span>,</span><br><span class="line">          validation_split = <span class="number">0.2</span>)</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Tensorflow</title>
      <link href="/Python/Tensorflow.html"/>
      <url>/Python/Tensorflow.html</url>
      
        <content type="html"><![CDATA[<h1 id="Tensorflow"><a href="#Tensorflow" class="headerlink" title="Tensorflow"></a>Tensorflow</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/locol/bin/python3.6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> tensorflow <span class="keyword">as</span> tf</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment"># creat data</span></span><br><span class="line">x_data = np.random.rand(<span class="number">100</span>).astype(np.float32)</span><br><span class="line">y_data = x_data*<span class="number">0.1</span> + <span class="number">0.3</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### creat tnsorflow structure start</span></span><br><span class="line">Weights = tf.Variable(tf.random_uniform([<span class="number">1</span>],<span class="number">-1.0</span>,<span class="number">1.0</span>))</span><br><span class="line">biases = tf.Variable(tf.zeros([<span class="number">1</span>]))</span><br><span class="line"></span><br><span class="line">y = Weightess =tf.Session()</span><br><span class="line">*x_data + biases</span><br><span class="line"></span><br><span class="line">loss = tf.reduce_mean(tf.square(y - y_data))</span><br><span class="line">optimizer = tf.train.GradientDescentOptimizer(<span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line">train = optimizer.minimize(loss)</span><br><span class="line"></span><br><span class="line">init = tf.initialize_all_variables()</span><br><span class="line"></span><br><span class="line"><span class="comment">##create tensorflow structure end ###</span></span><br><span class="line">sess =tf.Session()</span><br><span class="line">sess.run(init)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> step <span class="keyword">in</span> range(<span class="number">201</span>):</span><br><span class="line"> sess.run(train)</span><br><span class="line"> <span class="keyword">if</span> step % <span class="number">20</span> == <span class="number">0</span>:</span><br><span class="line">  print(step, sess.run(Weights),sess.run(biases))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">### add a laier###</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">add_layer</span><span class="params">(inputs, in_size, out_size, activation_function=None)</span>:</span></span><br><span class="line">  Weights = tf.Variable(tf.random_normal([in_size, out_size]))</span><br><span class="line">  biases = tf.Variable(tf.zeros([<span class="number">1</span>, out_size]) + <span class="number">0.1</span>)</span><br><span class="line">  Wx_plus_b = tf.matmul(inputs, Weights) + biases</span><br><span class="line">  <span class="keyword">if</span> activation_function <span class="keyword">is</span> <span class="literal">None</span>:</span><br><span class="line">     outputs = Wx_plus_b</span><br><span class="line">  <span class="keyword">else</span>:</span><br><span class="line">     outputs = activation_function(Wx_plus_b)</span><br><span class="line">  <span class="keyword">return</span> outputs</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#################</span></span><br><span class="line"><span class="comment">##From  https://tensorflow.google.cn/get_started/premade_estimators##</span></span><br><span class="line"><span class="comment">############</span></span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>TUI libs</title>
      <link href="/Python/TUI-libs.html"/>
      <url>/Python/TUI-libs.html</url>
      
        <content type="html"><![CDATA[<h1 id="TUI-libs"><a href="#TUI-libs" class="headerlink" title="TUI libs"></a>TUI libs</h1><p><a name="SQqEA"></a></p><h1 id="npyscreen"><a href="#npyscreen" class="headerlink" title="npyscreen"></a>npyscreen</h1><p>Github Repositories: 34</p><p>我第一个知道的 TUI Python 库，比较小众，但是又不错的项目，比如<a href="https://github.com/darxtrix/ptop" target="_blank" rel="noopener">ptop</a>，<a href="https://github.com/vtr0n/TelegramTUI" target="_blank" rel="noopener">TelegramTUI</a>，<a href="https://github.com/nitanmarcel/PipTUI" target="_blank" rel="noopener">PipTUI</a>。<br />上手简单，支持一些比较简单又去的功能，<br /></p><table><thead><tr><th align="center">ptop</th><th align="center">Terlegram TUI</th></tr></thead><tbody><tr><td align="center"><img src="https://s1.ax1x.com/2020/06/22/NYdvOU.png" alt="NYdvOU.png"></td><td align="center"><img src="https://s1.ax1x.com/2020/06/22/NYdXlV.png" alt="NYdXlV.png"></td></tr><tr><td align="center">©<a href="https://github.com/darxtrix/ptop" target="_blank" rel="noopener">darxtrix/ptop</a></td><td align="center">© <a href="https://github.com/vtr0n/TelegramTUI" target="_blank" rel="noopener">vtr0n/TelegramTUI</a></td></tr></tbody></table><p>详细介绍请看另一篇笔记：<a href="https://www.yuque.com/liuwenkan/kkgzbw/mpua6h" target="_blank" rel="noopener">npyscreen</a></p><p><a name="5knVn"></a></p><h1 id="unicurses"><a href="#unicurses" class="headerlink" title="unicurses"></a>unicurses</h1><p>Github Repositories: 20</p><p>项目示范：</p><p><strong><a href="https://github.com/justpwned/The-Snake-Game" target="_blank" rel="noopener">The-Snake-Game</a></strong><br /><br><img src="https://s1.ax1x.com/2020/06/22/NYdjyT.png" alt="NYdjyT.png"><br>教程和项目相对较少</p><p><a name="ywoa9"></a></p><h1 id="urwid"><a href="#urwid" class="headerlink" title="urwid"></a><a href="https://github.com/urwid/urwid" target="_blank" rel="noopener">urwid</a></h1><p>Github Repositories: 176<br /></p><p>目前我知道的星最高的项目了<br />以前非常喜欢的2k starts的 <a href="https://github.com/amanusk/s-tui" target="_blank" rel="noopener">s-tui</a> 就是这个库开发的， 还有 ＱＱ库<br />高星项目有：<br /><a href="https://github.com/amanusk/s-tui" target="_blank" rel="noopener">s-tui</a> (系统资源监测,2k), <strong><a href="https://github.com/inducer/pudb" target="_blank" rel="noopener">pudb</a>(python debug 1.7k),</strong><a href="https://github.com/pazz/alot" target="_blank" rel="noopener">alot</a>(e-mail), <a href="https://github.com/gcla/gowid" target="_blank" rel="noopener">gowid</a> …</p><p><img src="https://s1.ax1x.com/2020/06/22/NYd9RP.png" alt="NYd9RP.png"><br>©<a href="https://github.com/amanusk/s-tui" target="_blank" rel="noopener">amanusk/s-tui</a></p><p><img src="https://s1.ax1x.com/2020/06/22/NYaxIA.png" alt="NYaxIA.png"><br>©<a href="https://github.com/Nanoseb/ncTelegram" target="_blank" rel="noopener">Nanoseb/ncTelegram</a></p><p><img src="https://s1.ax1x.com/2020/06/22/NYavad.png" alt="NYavad.png"><br>source:<a href="https://www.oschina.net/p/urwid" target="_blank" rel="noopener">https://www.oschina.net/p/urwid</a></p><p><a name="SDY7Q"></a></p><h1 id="pygcurse"><a href="#pygcurse" class="headerlink" title="pygcurse"></a><a href="http://inventwithpython.com/pygcurse/" target="_blank" rel="noopener">pygcurse</a></h1><p>Github Repositories: 11</p><p><img src="https://s1.ax1x.com/2020/06/22/NYdSPI.png" alt="NYdSPI.png"><br>source：<a href="http://inventwithpython.com/pygcurse/" target="_blank" rel="noopener">http://inventwithpython.com/pygcurse/</a></p><p>Referen:<br /><a href="http://www.voidcn.com/article/p-sjrivwij-bue.html" target="_blank" rel="noopener">http://www.voidcn.com/article/p-sjrivwij-bue.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>VedioSlice.py</title>
      <link href="/Python/VedioSlice.py.html"/>
      <url>/Python/VedioSlice.py.html</url>
      
        <content type="html"><![CDATA[<h1 id="VedioSlice-py"><a href="#VedioSlice-py" class="headerlink" title="VedioSlice.py"></a>VedioSlice.py</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 2020/4/18</span></span><br><span class="line"><span class="comment"># @Author  : Karobben</span></span><br><span class="line"><span class="comment"># @Site    : China</span></span><br><span class="line"><span class="comment"># @File    : VedioSlice.py </span></span><br><span class="line"><span class="comment"># @Software: Atom</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>,</span><br><span class="line">                    help=<span class="string">'Input vedio file'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-o'</span>,<span class="string">'-U'</span>,<span class="string">'--output'</span>, default = <span class="string">"out_test.avi"</span>,</span><br><span class="line">                    help=<span class="string">'Output vedio file, default as "out_test.avi"'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-s'</span>,<span class="string">'-S'</span>,<span class="string">'--Start'</span>, type = int, default = <span class="number">0</span>,</span><br><span class="line">                    help=<span class="string">'Start from X second. default from 0'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-e'</span>,<span class="string">'-E'</span>,<span class="string">'--End'</span>, type = int, default = <span class="number">1</span>,</span><br><span class="line">                    help=<span class="string">'End at X second, defalt at 1s'</span>)     <span class="comment">#输入文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line">OUTPUT = args.output</span><br><span class="line">Slice_S = args.Start</span><br><span class="line">Slice_E = args.End</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#INPUT = 'bug.avi'</span></span><br><span class="line">cap = cv2.VideoCapture(INPUT)</span><br><span class="line">fps_c = cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">Vedio_h = cap.get(cv2.CAP_PROP_FRAME_HEIGHT)</span><br><span class="line">Vedio_w = cap.get(cv2.CAP_PROP_FRAME_WIDTH)</span><br><span class="line">print(<span class="string">"Current fps:"</span>,fps_c)</span><br><span class="line"></span><br><span class="line">Slice_S = Slice_S* fps_c</span><br><span class="line">Slice_E = Slice_E* fps_c</span><br><span class="line"><span class="comment">#OUTPUT = "out_test.avi"</span></span><br><span class="line">fps_o = fps_c</span><br><span class="line">Out_size = (int(Vedio_w),int(Vedio_h))</span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(<span class="string">'M'</span>,<span class="string">'J'</span>,<span class="string">'P'</span>,<span class="string">'G'</span>)</span><br><span class="line">videowriter = cv2.VideoWriter(OUTPUT,fourcc,fps_o,Out_size)</span><br><span class="line"></span><br><span class="line">Num = <span class="number">0</span></span><br><span class="line"><span class="keyword">while</span> (<span class="literal">True</span>):</span><br><span class="line">   Num += <span class="number">1</span></span><br><span class="line">   ret,frame=cap.read()</span><br><span class="line">   <span class="keyword">if</span> Num &gt;= Slice_S <span class="keyword">and</span> Num &lt;= Slice_E:</span><br><span class="line">       videowriter.write(frame)</span><br><span class="line">   <span class="keyword">if</span> Num &gt;= Slice_E:</span><br><span class="line">       <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line">videowriter.release()</span><br></pre></td></tr></table></figure></div><p><a name="9thCi"></a></p><h1 id="How-to-use-it"><a href="#How-to-use-it" class="headerlink" title="How to use it"></a>How to use it</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># print the vedio from 0s to 1s to out_test.avi</span></span><br><span class="line">Vedio_slice.py -i bug.avi</span><br><span class="line"></span><br><span class="line"><span class="comment"># print the vedio from 10s to 20s to sliced.avi file</span></span><br><span class="line">Vedio_slice.py -i bug.avi -s 10 -e 20 -o sliced.avi</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Vedio_reverse.py</title>
      <link href="/Python/Vedio_reverse.py.html"/>
      <url>/Python/Vedio_reverse.py.html</url>
      
        <content type="html"><![CDATA[<h1 id="Vedio-reverse-py"><a href="#Vedio-reverse-py" class="headerlink" title="Vedio_reverse.py"></a>Vedio_reverse.py</h1><p>#视频倒放 </p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 2020/4/18</span></span><br><span class="line"><span class="comment"># @Author  : Karobben</span></span><br><span class="line"><span class="comment"># @Site    : China</span></span><br><span class="line"><span class="comment"># @File    : VedioSlice.py</span></span><br><span class="line"><span class="comment"># @Software: Atom</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>,</span><br><span class="line">                    help=<span class="string">'Input vedio file'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-o'</span>,<span class="string">'-U'</span>,<span class="string">'--output'</span>, default = <span class="string">"out_test.avi"</span>,</span><br><span class="line">                    help=<span class="string">'Output vedio file, default as "out_test.avi"'</span>)     <span class="comment">#输入文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line">OUTPUT = args.output</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line"><span class="comment">#INPUT = 'bug.avi'</span></span><br><span class="line">cap = cv2.VideoCapture(INPUT)</span><br><span class="line">fps_c = cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">Vedio_h = cap.get(cv2.CAP_PROP_FRAME_HEIGHT)</span><br><span class="line">Vedio_w = cap.get(cv2.CAP_PROP_FRAME_WIDTH)</span><br><span class="line">print(<span class="string">"Current fps:"</span>,fps_c)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#OUTPUT = "out_test.avi"</span></span><br><span class="line">fps_o = fps_c</span><br><span class="line">Out_size = (int(Vedio_w),int(Vedio_h))</span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(<span class="string">'M'</span>,<span class="string">'J'</span>,<span class="string">'P'</span>,<span class="string">'G'</span>)</span><br><span class="line">videowriter = cv2.VideoWriter(OUTPUT,fourcc,fps_o,Out_size)</span><br><span class="line"></span><br><span class="line">List= []</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    ret,frame=cap.read()</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        frame[<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>] != <span class="literal">None</span></span><br><span class="line">        List += [frame]</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        <span class="keyword">break</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> List[::<span class="number">-1</span>]:</span><br><span class="line">    videowriter.write(i)</span><br><span class="line"></span><br><span class="line">videowriter.release()</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Vedio_reverse.py -i caopazi.avi -o test.avi</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>argparse (参数库)</title>
      <link href="/Python/argparse.html"/>
      <url>/Python/argparse.html</url>
      
        <content type="html"><![CDATA[<h1 id="argparse-参数库"><a href="#argparse-参数库" class="headerlink" title="argparse (参数库)"></a>argparse (参数库)</h1><p><a name="wrCHD"></a></p><h1 id="1-sys"><a href="#1-sys" class="headerlink" title="1. sys"></a>1. sys</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sys.argv[<span class="number">1</span>]</span><br></pre></td></tr></table></figure></div><p><a name="JyBOw"></a></p><h1 id="2-argparse"><a href="#2-argparse" class="headerlink" title="2. argparse"></a>2. argparse</h1><p><a name="A41Zh"></a></p><h2 id="1-Quick-Start"><a href="#1-Quick-Start" class="headerlink" title="1. Quick Start"></a>1. Quick Start</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-o'</span>,<span class="string">'-U'</span>,<span class="string">'--output'</span>)     <span class="comment">#输入文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line">RANGE = args.output</span><br></pre></td></tr></table></figure></div><p><br />run as <br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 test.py -i inputfile -o outpufile</span><br></pre></td></tr></table></figure></div><p><a name="WGl76"></a></p><h2 id="2-Important-arguments"><a href="#2-Important-arguments" class="headerlink" title="2. Important arguments"></a>2. Important arguments</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">####</span></span><br><span class="line"><span class="keyword">with</span> type <span class="keyword">and</span> default</span><br><span class="line">parser.add_argument(</span><br><span class="line">  <span class="string">'--width'</span>,</span><br><span class="line">  dest=<span class="string">'num_hands'</span>,</span><br><span class="line">  type = int,</span><br><span class="line">  default = <span class="number">80</span>,</span><br><span class="line">  help=<span class="string">'Max number of hands to detect.'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="V1ygH"></a></p><h2 id="3-Reading-png"><a href="#3-Reading-png" class="headerlink" title="3. Reading *.png"></a>3. Reading *.png</h2><p><a name="ECaCU"></a></p><h3 id="3-1-nargs-”-”-One-More"><a href="#3-1-nargs-”-”-One-More" class="headerlink" title="3.1 nargs=”+” (One/More)"></a>3.1 nargs=”+” (One/More)</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>,nargs=<span class="string">'+'</span>)    <span class="comment">#输入文件</span></span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line"></span><br><span class="line">print(INPUT)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ python3.7 test.py  -i Ms*</span><br><span class="line">[<span class="string">'Msg'</span>, <span class="string">'Msg2'</span>]</span><br></pre></td></tr></table></figure></div><br /><p><a name="VDzdW"></a></p><h3 id="3-2-nargs-”-”-None-One"><a href="#3-2-nargs-”-”-None-One" class="headerlink" title="3.2 nargs=”?” (None/One)"></a>3.2 nargs=”?” (None/One)</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>,  default=<span class="string">'a'</span>, nargs=<span class="string">'?'</span>)    <span class="comment">#输入文件</span></span><br><span class="line"></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line"></span><br><span class="line">print(INPUT)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">$ python3.7 test.py</span><br><span class="line">a</span><br><span class="line">$ python3.7 test.py -i</span><br><span class="line">None</span><br><span class="line">$ python3.7 test.py -i b</span><br><span class="line">b</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>base</title>
      <link href="/Python/base.html"/>
      <url>/Python/base.html</url>
      
        <content type="html"><![CDATA[<h1>base</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#########print##########</span></span><br><span class="line"></span><br><span class="line">pi = <span class="number">3.141592653</span></span><br><span class="line">print(<span class="string">'%10.3f'</span> % pi) <span class="comment">#字段宽10，精度3</span></span><br><span class="line"><span class="comment"># 3.142</span></span><br><span class="line">print(<span class="string">"pi = %.*f"</span> % (<span class="number">3</span>,pi)) <span class="comment">#用*从后面的元组中读取字段宽度或精度</span></span><br><span class="line"><span class="comment"># pi = 3.142</span></span><br><span class="line">print(<span class="string">'%010.3f'</span> % pi) <span class="comment">#用0填充空白</span></span><br><span class="line"><span class="comment"># 000003.142</span></span><br><span class="line">print(<span class="string">'%-10.3f'</span> % pi) <span class="comment">#左对齐</span></span><br><span class="line"><span class="comment"># 3.142</span></span><br><span class="line">print(<span class="string">'%+f'</span> % pi) <span class="comment">#显示正负号</span></span><br><span class="line"><span class="comment"># +3.141593</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> x <span class="keyword">in</span> range(<span class="number">0</span>,<span class="number">10</span>):</span><br><span class="line">  <span class="keyword">print</span> (x,end = <span class="string">''</span>)</span><br><span class="line"><span class="comment"># 0123456789</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##read file</span></span><br><span class="line">f = open(<span class="string">"demofile.txt"</span>, <span class="string">"r"</span>)</span><br><span class="line">print(f.read())</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> open(fname) <span class="keyword">as</span> f:</span><br><span class="line">    content = f.readlines()</span><br><span class="line"></span><br><span class="line"><span class="comment">## write to file</span></span><br><span class="line">fo = open(<span class="string">"foo.txt"</span>, <span class="string">"w"</span>)</span><br><span class="line">fo.write( <span class="string">"www.runoob.com!\nVery good site!\n"</span>)</span><br><span class="line"></span><br><span class="line">fo.close()</span><br><span class="line"><span class="comment"># wirte at the end of the file</span></span><br><span class="line"><span class="keyword">with</span> open(<span class="string">'something.txt'</span>, <span class="string">'a'</span>) <span class="keyword">as</span> f:</span><br><span class="line">    f.write(<span class="string">'text to be appended'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># duplicats removing</span></span><br><span class="line">A = [<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">3</span>]</span><br><span class="line">list(set(A))</span><br><span class="line"></span><br><span class="line"><span class="comment">######################</span></span><br><span class="line"><span class="comment">######### caculating #</span></span><br><span class="line"><span class="comment">######################</span></span><br><span class="line">Operator   Description   Example</span><br><span class="line">+   Addition operator   <span class="number">100</span> + <span class="number">45</span> = <span class="number">145</span></span><br><span class="line">-   Subtraction operator   <span class="number">500</span> - <span class="number">65</span> = <span class="number">435</span></span><br><span class="line">*   Multiplication operator   <span class="number">25</span> * <span class="number">4</span> = <span class="number">100</span></span><br><span class="line">/   Float Division Operator   <span class="number">10</span> / <span class="number">2</span> = <span class="number">5.0</span></span><br><span class="line">//   Integer Division Operator   <span class="number">10</span> / <span class="number">2</span> = <span class="number">5</span></span><br><span class="line">**   Exponentiation Operator   <span class="number">5</span> ** <span class="number">3</span> = <span class="number">125</span></span><br><span class="line">%   Remainder Operator   <span class="number">10</span> % <span class="number">3</span> = <span class="number">1</span>  <span class="comment">#  10 / 3 = 3 ... 1</span></span><br></pre></td></tr></table></figure></div><h1>print</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">A =<span class="string">" "</span></span><br><span class="line">B =<span class="string">u"\u2581"</span></span><br><span class="line">C =<span class="string">u"\u2582"</span></span><br><span class="line">D =<span class="string">u"\u2583"</span></span><br><span class="line">E =<span class="string">u"\u2584"</span></span><br><span class="line">F =<span class="string">u"\u2585"</span></span><br><span class="line">G =<span class="string">u"\u2586"</span></span><br><span class="line">H =<span class="string">u"\u2587"</span></span><br><span class="line">I =<span class="string">u"\u2588"</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> A,B,C,D,E,F,G,H,I:</span><br><span class="line">  print(<span class="string">"\x1b[3;45;6m%s\x1b[0m"</span>%(i),end=<span class="string">''</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NYE1bQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NYE1bQ.png" alt="NYE1bQ.png"></a></p><h1>List</h1><p>int list to str list</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[str(x) <span class="keyword">for</span> x <span class="keyword">in</span> int_list]</span><br></pre></td></tr></table></figure></div><p><br />int list to str list<br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">a_list = [<span class="string">"1"</span>, <span class="string">"2"</span>, <span class="string">"3"</span>]</span><br><span class="line"><span class="comment">#int list to str list</span></span><br><span class="line">list(map(str, a_list))</span><br><span class="line"><span class="comment">#str list to int list</span></span><br><span class="line">list(map(int, a_list))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 逐个相减</span></span><br><span class="line">c = [b[i] - a[i] <span class="keyword">for</span> i <span class="keyword">in</span> range(len(a))]</span><br></pre></td></tr></table></figure></div><h2 id="Compare-Two-list"><a class="header-anchor" href="#Compare-Two-list"></a>Compare Two list</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">l = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">5</span>]</span><br><span class="line">l_one = [<span class="number">2</span>, <span class="number">8</span>, <span class="number">6</span>, <span class="number">10</span>]</span><br><span class="line"><span class="keyword">print</span> set(l) &amp; set(l_one)</span><br></pre></td></tr></table></figure></div><p><a name="F7DeQ"></a></p><h1>path</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pathlib</span><br><span class="line">pathlib.Path(__file__).parent.absolute()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> pathlib</span><br><span class="line">pathlib.Path().absolute()</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">sys.path[<span class="number">0</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Chage Workind Director</span></span><br><span class="line"><span class="keyword">import</span> os</span><br><span class="line">os.chdir(<span class="string">"../"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="5ixt3"></a></p><h1>import</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># import from the same directory</span></span><br><span class="line"><span class="keyword">import</span> XXX</span><br><span class="line"></span><br><span class="line"><span class="comment"># import from the directories in the same directory</span></span><br><span class="line"><span class="keyword">from</span> Directory <span class="keyword">import</span> xxx</span><br><span class="line"></span><br><span class="line"><span class="comment"># import from .. directory</span></span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line">sys.path.append(<span class="string">".."</span>)</span><br><span class="line"><span class="keyword">import</span> xxx</span><br></pre></td></tr></table></figure></div><p><a name="0wVAH"></a></p><h1>str to var</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">4</span>):</span><br><span class="line">    name=<span class="string">'v'</span>+str(i)</span><br><span class="line">    locals()[<span class="string">'v'</span>+str(i)]=i</span><br><span class="line"></span><br><span class="line"><span class="keyword">print</span> v1,v2,v3</span><br></pre></td></tr></table></figure></div><p>--------------------------------------------------------------------------------------------------------------------------------------------<br />github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br />blog: <a href="https://karobben.github.io/">Karobben.github.io</a> <br />R 语言画图索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>json</title>
      <link href="/Python/json.html"/>
      <url>/Python/json.html</url>
      
        <content type="html"><![CDATA[<h1 id="json"><a href="#json" class="headerlink" title="json"></a>json</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line">data = [ &#123; <span class="string">'a'</span> : <span class="number">1</span>, <span class="string">'b'</span> : <span class="number">2</span>, <span class="string">'c'</span> : <span class="number">3</span>, <span class="string">'d'</span> : <span class="number">4</span>, <span class="string">'e'</span> : <span class="number">5</span> &#125; ]</span><br><span class="line"></span><br><span class="line">json = json.dumps(data)</span><br><span class="line"><span class="keyword">print</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">jsonData = <span class="string">'&#123;"a":1,"b":2,"c":3,"d":4,"e":5&#125;'</span>;</span><br><span class="line"></span><br><span class="line">text = json.loads(jsonData)</span><br><span class="line"><span class="keyword">print</span> text</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Config = json.load(open(<span class="string">'config.json'</span>))</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>kivy-Buildozer</title>
      <link href="/Python/kivy-Buildozer.html"/>
      <url>/Python/kivy-Buildozer.html</url>
      
        <content type="html"><![CDATA[<h1 id="kivy-Buildozer"><a href="#kivy-Buildozer" class="headerlink" title="kivy-Buildozer"></a>kivy-Buildozer</h1><p><a name="Z0CZY"></a></p><h1 id="1-install-Buildozer"><a href="#1-install-Buildozer" class="headerlink" title="1 install Buildozer"></a>1 install Buildozer</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3.7  install -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure></div><p>链接安卓手机, 开启USB debug模式;<br />进入 kivy 项目目录<br />测试项目:<a href="https://github.com/sevvalbrt/Todolist" target="_blank" rel="noopener">https://github.com/sevvalbrt/Todolist</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">buildozer init</span><br><span class="line">buildozer android deploy run</span><br></pre></td></tr></table></figure></div><p>手机有什么提示, 记得选择</p><p>可能会下一些东西. 等一下就好了<br /><br><img src="https://s1.ax1x.com/2020/06/22/NYV7mF.png" alt="NYV7mF.png"></p><p><br />更多参考:<br /><a href="https://cycleuser.gitbooks.io/kivy-guide-chinese/content/15-Kivy-Pack-Android.html" target="_blank" rel="noopener">https://cycleuser.gitbooks.io/kivy-guide-chinese/content/15-Kivy-Pack-Android.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Python/index.html"/>
      <url>/Python/index.html</url>
      
        <content type="html"><![CDATA[<ul><li><h1 id="Introduction"><a href="#Introduction" class="headerlink" title="Introduction"></a>Introduction</h1><ul><li><a href="pip.html">pip</a></li><li><a href="base.html">base</a></li><li><a href="Encode_decode.html">Encode_decode</a></li></ul></li><li><h1 id="library-for-Scripts"><a href="#library-for-Scripts" class="headerlink" title="library for Scripts"></a>library for Scripts</h1><ul><li><a href="argparse.html">argparse</a></li><li><a href="itchat.html">itchat</a></li><li><a href="json.html">json</a></li><li><a href="Matplotlib.html">Matplotlib</a></li><li><a href="multyprocesser.html">multyprocesser</a></li><li><a href="numpy.html">numpy</a></li><li><a href="OpenCV.html">OpenCV</a></li><li><a href="Pandas.html">Pandas</a></li><li><a href="PDF.html">PDF</a></li><li><a href="PIL_np.array.html">PIL_np.array</a></li><li><a href="Plot-in-the-Terminal.html">Plot-in-the-Terminal</a></li><li><a href="popmail.html">popmail</a></li><li><a href="pynput.html">pynput</a></li><li><a href="Tensorflow.html">Tensorflow</a></li><li><a href="wordcloud.html">wordcloud</a></li></ul></li><li><h1 id="Biology"><a href="#Biology" class="headerlink" title="Biology"></a>Biology</h1><ul><li><a href="Biopython.html">Biopython</a></li></ul></li><li><h1 id="Developer"><a href="#Developer" class="headerlink" title="Developer"></a>Developer</h1><ul><li><h2 id="TUI"><a href="#TUI" class="headerlink" title="TUI"></a>TUI</h2><ul><li><a href="TUI-libs.html">TUI-libs</a></li><li><a href="npyscreen.html">npyscreen</a></li><li><a href="urwid.html">urwid</a></li></ul></li><li><h2 id="GUI"><a href="#GUI" class="headerlink" title="GUI"></a>GUI</h2><ul><li><a href="kivy_Cross-platform-App.html">kivy_Cross-platform-App</a></li><li><a href="kivy-Buildozer.html">kivy-Buildozer</a></li><li><a href="QT.html">QT</a></li></ul></li></ul></li><li><h1 id="Blogs"><a href="#Blogs" class="headerlink" title="Blogs"></a>Blogs</h1><ul><li><a href="Vedio_reverse.py.html">Opencv_Vedio_reverse.py</a></li><li><a href="VedioSlice.py.html">Opencv_VedioSlice.py</a></li><li><a href="Lightening-Img.html">Opencv_Lightening-Img</a></li><li><a href="Opencv_gif.html">Opencv_gif</a></li><li><a href="Tensorflow-Numbers-k.html">Tensorflow-Numbers-k</a></li><li><a href="Transfer_Learning.html">Transfer_Learning</a></li><li><a href="Crawler.html">Crawler</a></li><li><a href="BaseMap.html">BaseMap</a></li><li><a href="HTML-server.html">HTML-server</a></li><li><a href="Animation-Text.html">Animation-Text</a></li><li><a href="Others.html">Others</a></li></ul></li></ul><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ls | awk <span class="string">'&#123;print "["$1"]("$i")"&#125;'</span>| sed <span class="string">'s/\.md]/]/;s/\.md)/\.html)/;/yuque.yml/d;/(summary.html)/d'</span> &gt; P-index.md</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Transfer_Learning</title>
      <link href="/Python/Transfer_Learning.html"/>
      <url>/Python/Transfer_Learning.html</url>
      
        <content type="html"><![CDATA[<h1 id="Transfer-Learning"><a href="#Transfer-Learning" class="headerlink" title="Transfer_Learning"></a>Transfer_Learning</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/local/bin/python3.6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.applications <span class="keyword">import</span> ResNet50</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.models <span class="keyword">import</span> Sequential</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.layers <span class="keyword">import</span> Dense, Flatten, GlobalAveragePooling2D</span><br><span class="line"></span><br><span class="line">num_classes = <span class="number">2</span></span><br><span class="line">resnet_weights_path = <span class="string">'resnet50_weights_tf_dim_ordering_tf_kernels_notop.h5'</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_new_model = Sequential()</span><br><span class="line">my_new_model.add(ResNet50(include_top=<span class="literal">False</span>, pooling=<span class="string">'avg'</span>, weights=resnet_weights_path))</span><br><span class="line">my_new_model.add(Dense(num_classes, activation=<span class="string">'softmax'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">my_new_model.layers[<span class="number">0</span>].trainable = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line">my_new_model.compile(optimizer=<span class="string">'sgd'</span>, loss=<span class="string">'categorical_crossentropy'</span>, metrics=[<span class="string">'accuracy'</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">####### Fit Model ###</span></span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.applications.resnet50 <span class="keyword">import</span> preprocess_input</span><br><span class="line"><span class="keyword">from</span> tensorflow.python.keras.preprocessing.image <span class="keyword">import</span> ImageDataGenerator</span><br><span class="line"></span><br><span class="line">image_size = <span class="number">224</span></span><br><span class="line">data_generator = ImageDataGenerator(preprocessing_function=preprocess_input)</span><br><span class="line"></span><br><span class="line">train_generator = data_generator.flow_from_directory(</span><br><span class="line">        <span class="string">'./train'</span>,</span><br><span class="line">        target_size=(image_size, image_size),</span><br><span class="line">        batch_size=<span class="number">24</span>,</span><br><span class="line">        class_mode=<span class="string">'categorical'</span>)</span><br><span class="line"></span><br><span class="line">validation_generator = data_generator.flow_from_directory(</span><br><span class="line">        <span class="string">'./val'</span>,</span><br><span class="line">        target_size=(image_size, image_size),</span><br><span class="line">        class_mode=<span class="string">'categorical'</span>)</span><br><span class="line"></span><br><span class="line">my_new_model.fit_generator(</span><br><span class="line">        train_generator,</span><br><span class="line">        steps_per_epoch=<span class="number">3</span>,</span><br><span class="line">        validation_data=validation_generator,</span><br><span class="line">        validation_steps=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>npyscreen</title>
      <link href="/Python/npyscreen.html"/>
      <url>/Python/npyscreen.html</url>
      
        <content type="html"><![CDATA[<h1 id="npyscreen"><a href="#npyscreen" class="headerlink" title="npyscreen"></a>npyscreen</h1><p><img src="https://s1.ax1x.com/2020/06/22/NYNciq.png" alt="NYNciq.png"><br>开发terminal平台软件<br />Developing terminal platform apps</p><p><a name="N356a"></a></p><h1 id="1-Quick-Start"><a href="#1-Quick-Start" class="headerlink" title="1 Quick Start"></a>1 Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3.7</span></span><br><span class="line"><span class="comment"># encoding: utf-8</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> npyscreen</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestApp</span><span class="params">(npyscreen.NPSApp)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="comment"># These lines create the form and populate it with widgets.</span></span><br><span class="line">        <span class="comment"># A fairly complex screen in only 8 or so lines of code - a line for each control.</span></span><br><span class="line">        F  = npyscreen.Form(name = <span class="string">"Welcome to Npyscreen"</span>,)</span><br><span class="line">        t  = F.add(npyscreen.TitleText, name = <span class="string">"Text:"</span>,)</span><br><span class="line">        fn = F.add(npyscreen.TitleFilename, name = <span class="string">"Filename:"</span>)</span><br><span class="line">        fn2 = F.add(npyscreen.TitleFilenameCombo, name=<span class="string">"Filename2:"</span>)</span><br><span class="line">        dt = F.add(npyscreen.TitleDateCombo, name = <span class="string">"Date:"</span>)</span><br><span class="line">        s  = F.add(npyscreen.TitleSlider, out_of=<span class="number">12</span>, name = <span class="string">"Slider"</span>)</span><br><span class="line">        ml = F.add(npyscreen.MultiLineEdit,</span><br><span class="line">               value = <span class="string">"""try typing here!\nMutiline text, press ^R to reformat.\n"""</span>,</span><br><span class="line">               max_height=<span class="number">5</span>, rely=<span class="number">9</span>)</span><br><span class="line">        ms = F.add(npyscreen.TitleSelectOne, max_height=<span class="number">4</span>, value = [<span class="number">1</span>,], name=<span class="string">"Pick One"</span>,</span><br><span class="line">                values = [<span class="string">"Option1"</span>,<span class="string">"Option2"</span>,<span class="string">"Option3"</span>], scroll_exit=<span class="literal">True</span>)</span><br><span class="line">        ms2= F.add(npyscreen.TitleMultiSelect, max_height =<span class="number">-2</span>, value = [<span class="number">1</span>,], name=<span class="string">"Pick Several"</span>,</span><br><span class="line">                values = [<span class="string">"Option1"</span>,<span class="string">"Option2"</span>,<span class="string">"Option3"</span>], scroll_exit=<span class="literal">True</span>)</span><br><span class="line">        <span class="comment"># This lets the user interact with the Form.</span></span><br><span class="line">        F.edit()</span><br><span class="line">        print(ms.get_selected_objects())</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">"__main__"</span>:</span><br><span class="line">    App = TestApp()</span><br><span class="line">    App.run()</span><br></pre></td></tr></table></figure></div><p>效果：<br><img src="https://s1.ax1x.com/2020/06/22/NYNsds.png" alt="NYNsds.png"></p><p><a name="vvtzJ"></a></p><h1 id="Features"><a href="#Features" class="headerlink" title="Features"></a>Features</h1><p><a name="TVnYP"></a><br>##<br><a name="CyyAV"></a></p><h2 id="Input"><a href="#Input" class="headerlink" title="Input"></a>Input</h2><p><img src="https://s1.ax1x.com/2020/06/22/NYNyon.png" alt="NYNyon.png"></p><p><a name="Vwq2t"></a></p><h2 id="Path-segestion"><a href="#Path-segestion" class="headerlink" title="Path segestion"></a>Path segestion</h2><p><a name="hxo9y"></a></p><h3 id="Path1"><a href="#Path1" class="headerlink" title="Path1:"></a>Path1:</h3><p>Tab 键激活<br /><br><img src="https://s1.ax1x.com/2020/06/22/NYNrZj.png" alt="NYNrZj.png"></p><p><a name="S2ZQy"></a></p><h3 id="Path2"><a href="#Path2" class="headerlink" title="Path2:"></a>Path2:</h3><p><img src="https://s1.ax1x.com/2020/06/22/NYNgJ0.png" alt="NYNgJ0.png"></p><p><a name="Gih3Z"></a></p><h2 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h2><p><img src="https://s1.ax1x.com/2020/06/22/NYN0sg.png" alt="NYN0sg.png"></p><p><a name="FqeOj"></a></p><h2 id="Progress-bar"><a href="#Progress-bar" class="headerlink" title="Progress bar"></a>Progress bar</h2><p><img src="https://s1.ax1x.com/2020/06/22/NYNwQS.png" alt="NYNwQS.png"></p><p><a name="Nvocx"></a></p><h2 id="Selection"><a href="#Selection" class="headerlink" title="Selection"></a>Selection</h2><p><img src="https://s1.ax1x.com/2020/06/22/NYNBLQ.png" alt="NYNBLQ.png"><br><a href="https://github.com/darxtrix/ptop" target="_blank" rel="noopener">ptop</a> is npyscreen apps</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>kivy (Cross-platform App)</title>
      <link href="/Python/kivy_Cross-platform-App.html"/>
      <url>/Python/kivy_Cross-platform-App.html</url>
      
        <content type="html"><![CDATA[<h1>kivy (Cross-platform App)</h1><p><a name="2rtOx"></a></p><h1>Quick Start</h1><p><img src="https://s1.ax1x.com/2020/06/22/NYEbGt.png" alt="NYEbGt.png"></p><p>Kivy - Open source Python library for rapid development of applications that make use of innovative user interfaces, such as multi-touch apps.<br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Creat a Hello.kv file in the path you run your script</span></span><br><span class="line">vim Hello.kv</span><br><span class="line"></span><br><span class="line"><span class="comment">## this is for Hello.kv</span></span><br><span class="line">BoxLayout:</span><br><span class="line">    Label:</span><br><span class="line">        text: <span class="string">"Hello"</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/python3.6</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> kivy.app <span class="keyword">import</span> App</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HelloApp</span><span class="params">(App)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    HelloApp().run()</span><br></pre></td></tr></table></figure></div><p><a name="cvtyF"></a></p><h2 id="Text-layout"><a class="header-anchor" href="#Text-layout"></a>Text layout</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hello.kv file</span></span><br><span class="line"></span><br><span class="line">BoxLayout:</span><br><span class="line">    Label:</span><br><span class="line">        text: <span class="string">"Hello"</span></span><br><span class="line">    Label:</span><br><span class="line">        text: <span class="string">"Beautiful"</span></span><br><span class="line">    Label:</span><br><span class="line">        text: <span class="string">"World"</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYEjsS.png" alt="NYEjsS.png"></p><p><a name="Ak5Qi"></a></p><h2 id="Button-Layout"><a class="header-anchor" href="#Button-Layout"></a>Button Layout</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># hello.kv file</span></span><br><span class="line">AddLocationForm:</span><br><span class="line"></span><br><span class="line">&lt;AddLocationForm@BoxLayout&gt;:</span><br><span class="line">    orientation: <span class="string">"vertical"</span></span><br><span class="line">    BoxLayout:</span><br><span class="line">        TextInput:</span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Search"</span></span><br><span class="line">            size_hint_x: 1</span><br><span class="line">            size_hint_y: 0.3</span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Current Location"</span></span><br><span class="line">            size_hint_x: 0.5</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYEXM8.png" alt="NYEXM8.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">AddLocationForm:</span><br><span class="line"></span><br><span class="line">&lt;AddLocationForm@BoxLayout&gt;:</span><br><span class="line">    orientation: <span class="string">"vertical"</span></span><br><span class="line">    BoxLayout:</span><br><span class="line">        height: <span class="string">"40dp"</span></span><br><span class="line">        size_hint_y: None</span><br><span class="line">        TextInput:</span><br><span class="line">            size_hint_x: 50</span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Search"</span></span><br><span class="line">            size_hint_x: 25</span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Current Location"</span></span><br><span class="line">            size_hint_x: 25</span><br><span class="line">    BoxLayout:</span><br><span class="line">        Label:</span><br><span class="line">            text: <span class="string">"Palo Alto, MX\nPalo Alto, US"</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/22/NYELxf.png" alt="NYELxf.png"><br><img src="https://s1.ax1x.com/2020/06/22/NYEqRP.png" alt="NYEqRP.png"></p><p><a name="lQqQJ"></a></p><h1>Events</h1><p><a name="H5ps8"></a></p><h2 id="Responding-to-Input"><a class="header-anchor" href="#Responding-to-Input"></a>Responding to Input</h2><p>In this section, We’d like to acquire the input information from the input box.<br />For respond the Input message, two things we need to done:</p><ol><li>Assign an ID for TextInput</li><li>line 5: Acquiring Input.</li><li>line 10: Assign the ID “search_box” to  TextInput Box</li><li>line 15: active function search_location()</li><li>Assign an function for responding the text</li><li>line 5: import the function</li><li>line 11-12: assigning the function to acquire and respond the massage from TextInput</li></ol><p>Weather.kv:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">AddLocationForm:</span><br><span class="line"></span><br><span class="line">&lt;AddLocationForm@BoxLayout&gt;:</span><br><span class="line">    orientation: <span class="string">"vertical"</span></span><br><span class="line">  search_input: search_box <span class="comment"># Change one</span></span><br><span class="line">    BoxLayout:</span><br><span class="line">        height: <span class="string">"40dp"</span></span><br><span class="line">        size_hint_y: None</span><br><span class="line">        TextInput:</span><br><span class="line">      id: search_box  <span class="comment"># Assign an ID</span></span><br><span class="line">            size_hint_x: 50</span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Search"</span></span><br><span class="line">            size_hint_x: 25</span><br><span class="line">      on_press: root.search_location()</span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Current Location"</span></span><br><span class="line">            size_hint_x: 25</span><br><span class="line">    BoxLayout:</span><br><span class="line">        Label:</span><br><span class="line">            text: <span class="string">"Palo Alto, MX\nPalo Alto, US"</span></span><br></pre></td></tr></table></figure></div><p><a href="http://main.py" target="_blank" rel="noopener">main.py</a>:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/local/bin/python3.7</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> kivy.app <span class="keyword">import</span> App</span><br><span class="line"><span class="keyword">from</span> kivy.uix.boxlayout <span class="keyword">import</span> BoxLayout</span><br><span class="line"><span class="keyword">from</span> kivy.properties <span class="keyword">import</span> ObjectProperty</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddLocationForm</span><span class="params">(BoxLayout)</span>:</span></span><br><span class="line">    search_input = ObjectProperty()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search_location</span><span class="params">(self)</span>:</span></span><br><span class="line">        print(<span class="string">"The user searched for '&#123;&#125;'"</span>.format(self.search_input.text))</span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherApp</span><span class="params">(App)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    WeatherApp().run()</span><br></pre></td></tr></table></figure></div><p>Image left: GUI Layout;    Image right: result was printed in terminal after clicked the button search. <br /><br><img src="https://s1.ax1x.com/2020/06/22/NYEHPI.png" alt="NYEHPI.png"><br><img src="https://s1.ax1x.com/2020/06/22/NYV6eg.png" alt="NYV6eg.png"><br>In the current version Kivy1.11.1,<br />The function ListView is not is not supported.  <br />Use Recycle As instead.</p><p>Take this as example:<br />from: <a href="https://stackoverflow.com/questions/56601384/kivy-unknown-class-listview-error-code" target="_blank" rel="noopener">https://stackoverflow.com/questions/56601384/kivy-unknown-class-listview-error-code</a><br /><a href="http://main.py" target="_blank" rel="noopener">main.py</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> kivy.app <span class="keyword">import</span> App</span><br><span class="line"><span class="keyword">from</span> kivy.uix.boxlayout <span class="keyword">import</span> BoxLayout</span><br><span class="line"><span class="keyword">from</span> kivy.uix.recycleview.views <span class="keyword">import</span> RecycleDataViewBehavior</span><br><span class="line"><span class="keyword">from</span> kivy.uix.label <span class="keyword">import</span> Label</span><br><span class="line"><span class="keyword">from</span> kivy.properties <span class="keyword">import</span> BooleanProperty, ObjectProperty</span><br><span class="line"><span class="keyword">from</span> kivy.uix.recycleboxlayout <span class="keyword">import</span> RecycleBoxLayout</span><br><span class="line"><span class="keyword">from</span> kivy.uix.behaviors <span class="keyword">import</span> FocusBehavior</span><br><span class="line"><span class="keyword">from</span> kivy.uix.recycleview.layout <span class="keyword">import</span> LayoutSelectionBehavior</span><br><span class="line"><span class="keyword">from</span> kivy.network.urlrequest <span class="keyword">import</span> UrlRequest</span><br><span class="line"><span class="keyword">from</span> kivy.lang <span class="keyword">import</span> Builder</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> json</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SelectableRecycleBoxLayout</span><span class="params">(FocusBehavior, LayoutSelectionBehavior,</span></span></span><br><span class="line"><span class="class"><span class="params">                                 RecycleBoxLayout)</span>:</span></span><br><span class="line">    <span class="string">''' Adds selection and focus behaviour to the view. '''</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SelectableLabel</span><span class="params">(RecycleDataViewBehavior, Label)</span>:</span></span><br><span class="line">    <span class="string">''' Add selection support to the Label '''</span></span><br><span class="line">    index = <span class="literal">None</span></span><br><span class="line">    selected = BooleanProperty(<span class="literal">False</span>)</span><br><span class="line">    selectable = BooleanProperty(<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">refresh_view_attrs</span><span class="params">(self, rv, index, data)</span>:</span></span><br><span class="line">        <span class="string">''' Catch and handle the view changes '''</span></span><br><span class="line">        self.index = index</span><br><span class="line">        <span class="keyword">return</span> super(SelectableLabel, self).refresh_view_attrs(</span><br><span class="line">            rv, index, data)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">on_touch_down</span><span class="params">(self, touch)</span>:</span></span><br><span class="line">        <span class="string">''' Add selection on touch down '''</span></span><br><span class="line">        <span class="keyword">if</span> super(SelectableLabel, self).on_touch_down(touch):</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">True</span></span><br><span class="line">        <span class="keyword">if</span> self.collide_point(*touch.pos) <span class="keyword">and</span> self.selectable:</span><br><span class="line">            <span class="keyword">return</span> self.parent.select_with_touch(self.index, touch)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">apply_selection</span><span class="params">(self, rv, index, is_selected)</span>:</span></span><br><span class="line">        <span class="string">''' Respond to the selection of items in the view. '''</span></span><br><span class="line">        self.selected = is_selected</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddLocationForm</span><span class="params">(BoxLayout)</span>:</span></span><br><span class="line">    search_input = ObjectProperty()</span><br><span class="line">    search_results = ObjectProperty()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">search_location</span><span class="params">(self)</span>:</span></span><br><span class="line">        search_template = <span class="string">"https://samples.openweathermap.org/data/2.5/find?q=&#123;&#125;&amp;appid=b6907d289e10d714a6e88b30761fae22"</span></span><br><span class="line">        <span class="comment"># search_template = "https://api.openweathermap.org/data/2.5/find?q=&#123;&#125;&amp;typle=like&amp;appid=xyz"    # Replace 'xyz' with your API Key (APPID)</span></span><br><span class="line">        search_url = search_template.format(self.search_input.text)</span><br><span class="line">        request = UrlRequest(search_url, self.found_location)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">found_location</span><span class="params">(self, request, data)</span>:</span></span><br><span class="line">        data = json.loads(data.decode()) <span class="keyword">if</span> <span class="keyword">not</span> isinstance(data, dict) <span class="keyword">else</span> data</span><br><span class="line">        cities = [<span class="string">"&#123;&#125; (&#123;&#125;)"</span>.format(d[<span class="string">'name'</span>], d[<span class="string">'sys'</span>][<span class="string">'country'</span>]) <span class="keyword">for</span> d <span class="keyword">in</span> data[<span class="string">'list'</span>]]</span><br><span class="line">        self.search_results.data = [&#123;<span class="string">'text'</span>: str(x)&#125; <span class="keyword">for</span> x <span class="keyword">in</span> cities]</span><br><span class="line">        print(<span class="string">f"self.search_results.data=<span class="subst">&#123;self.search_results.data&#125;</span>"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WeatherRoot</span><span class="params">(BoxLayout)</span>:</span></span><br><span class="line">    <span class="keyword">pass</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TestApp</span><span class="params">(App)</span>:</span></span><br><span class="line">    title = <span class="string">"Weather App"</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">build</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> Builder.load_file(<span class="string">"main.kv"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    TestApp().run()</span><br></pre></td></tr></table></figure></div><p>mian.kv</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">WeatherRoot:</span><br><span class="line"></span><br><span class="line">&lt;WeatherRoot&gt;:</span><br><span class="line">    AddLocationForm:</span><br><span class="line"></span><br><span class="line">&lt;SelectableLabel&gt;:</span><br><span class="line">    <span class="comment"># Draw a background to indicate selection</span></span><br><span class="line">    canvas.before:</span><br><span class="line">        Color:</span><br><span class="line">            rgba: (1, 0, 0, 1) <span class="keyword">if</span> self.selected <span class="keyword">else</span> (.0, 0.9, .1, .3)</span><br><span class="line">        Rectangle:</span><br><span class="line">            pos: self.pos</span><br><span class="line">            size: self.size</span><br><span class="line">        Color:</span><br><span class="line">            rgba: (0, 0.9, .1, .3)</span><br><span class="line">        Rectangle:</span><br><span class="line">            pos: self.pos</span><br><span class="line">            size: self.size</span><br><span class="line"></span><br><span class="line">&lt;AddLocationForm&gt;:</span><br><span class="line">    orientation: <span class="string">"vertical"</span></span><br><span class="line"></span><br><span class="line">    search_input: search_input</span><br><span class="line">    search_results: search_results_list</span><br><span class="line"></span><br><span class="line">    BoxLayout:</span><br><span class="line">        height: <span class="string">"40dp"</span></span><br><span class="line">        size_hint_y:None</span><br><span class="line"></span><br><span class="line">        TextInput:</span><br><span class="line">            id: search_input</span><br><span class="line">            size_hint_x: 50</span><br><span class="line">            focus: True</span><br><span class="line">            multiline: False</span><br><span class="line">            hint_text: <span class="string">'Your city name'</span></span><br><span class="line">            on_text_validate: root.search_location()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Search"</span></span><br><span class="line">            size_hint_x: 25</span><br><span class="line">            on_press: root.search_location()</span><br><span class="line"></span><br><span class="line">        Button:</span><br><span class="line">            text: <span class="string">"Current Location"</span></span><br><span class="line">            size_hint_x: 25</span><br><span class="line"></span><br><span class="line">    RecycleView:</span><br><span class="line">        id: search_results_list</span><br><span class="line"></span><br><span class="line">        viewclass: <span class="string">'SelectableLabel'</span></span><br><span class="line"></span><br><span class="line">        SelectableRecycleBoxLayout:</span><br><span class="line">            default_size: None, dp(26)</span><br><span class="line">            default_size_hint: 1, None</span><br><span class="line">            size_hint_y: None</span><br><span class="line">            height: self.minimum_height</span><br><span class="line">            orientation: <span class="string">'vertical'</span></span><br><span class="line">            multiselect: True</span><br><span class="line">            touch_multiselect: True</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Multiprocessing</title>
      <link href="/Python/multyprocesser.html"/>
      <url>/Python/multyprocesser.html</url>
      
        <content type="html"><![CDATA[<h1 id="Multiprocessing"><a href="#Multiprocessing" class="headerlink" title="Multiprocessing"></a>Multiprocessing</h1><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"><span class="keyword">from</span> time <span class="keyword">import</span> sleep</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">echo</span><span class="params">(i)</span>:</span></span><br><span class="line">  <span class="string">'''Working Function for cycle'''</span></span><br><span class="line">  sleep(i)</span><br><span class="line">  print(i)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">multicore</span><span class="params">(Pool=<span class="number">10</span>)</span>:</span></span><br><span class="line">  pool = mp.Pool(processes=Pool)</span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>):</span><br><span class="line">    <span class="comment"># Working function "echo" and the arg 'i'</span></span><br><span class="line">    multi_res = [pool.apply_async(echo,(i,))]</span><br><span class="line">  pool.close()</span><br><span class="line">  pool.join()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">  multicore()</span><br></pre></td></tr></table></figure></div><h1 id="With-Return"><a href="#With-Return" class="headerlink" title="With Return"></a>With Return</h1><p>Cite: <a href="https://stackoverflow.com/a/10415215" target="_blank" rel="noopener">StackoverFlow</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> multiprocessing <span class="keyword">as</span> mp</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">worker</span><span class="params">(procnum, return_dict)</span>:</span></span><br><span class="line">    <span class="string">'''worker function'''</span></span><br><span class="line">    <span class="keyword">print</span> (str(procnum) + <span class="string">' represent!'</span>)</span><br><span class="line">    return_dict[procnum] = procnum</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    manager = mp.Manager()</span><br><span class="line">    return_dict = manager.dict()</span><br><span class="line">    jobs = []</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">5</span>):</span><br><span class="line">        p = mp.Process(target=worker, args=(i,return_dict))</span><br><span class="line">        jobs.append(p)</span><br><span class="line">        p.start()</span><br><span class="line">    <span class="keyword">for</span> proc <span class="keyword">in</span> jobs:</span><br><span class="line">        proc.join()</span><br><span class="line">    <span class="keyword">print</span> (return_dict.values())</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> return_dict.values():</span><br><span class="line">  print(i)</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>numpy</title>
      <link href="/Python/numpy.html"/>
      <url>/Python/numpy.html</url>
      
        <content type="html"><![CDATA[<h1 id="numpy"><a href="#numpy" class="headerlink" title="numpy"></a>numpy</h1><p><a name="gXQd0"></a></p><h1 id="1-np-array"><a href="#1-np-array" class="headerlink" title="1. np array"></a>1. np array</h1><p><a name="Gf9EI"></a></p><h2 id="1-1-np-arry-to-list"><a href="#1-1-np-arry-to-list" class="headerlink" title="1.1 np arry to list"></a>1.1 np arry to list</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">List = arry.tolist()</span><br></pre></td></tr></table></figure></div><br /><p><a name="wUuDx"></a></p><h1 id="2-np-arrary-caculating"><a href="#2-np-arrary-caculating" class="headerlink" title="2 np arrary caculating"></a>2 np arrary caculating</h1><p><a name="ZazdT"></a></p><h2 id="2-1-np-arrary-sum"><a href="#2-1-np-arrary-sum" class="headerlink" title="2.1 np.arrary sum()"></a>2.1 np.arrary sum()</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.sum(array1-array2)</span><br></pre></td></tr></table></figure></div><br /><p><a name="4r3Wb"></a></p><h1 id="3-np-arrary-append"><a href="#3-np-arrary-append" class="headerlink" title="3 np arrary append"></a>3 np arrary append</h1><p><a name="y3YRe"></a></p><h2 id="3-1-append"><a href="#3-1-append" class="headerlink" title="3.1 append"></a>3.1 append</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">np.appedn(np1, np2,axis=<span class="number">0</span>)</span><br></pre></td></tr></table></figure></div><br /><p><a name="bDJYs"></a></p><h2 id="Reduce-Dimension"><a href="#Reduce-Dimension" class="headerlink" title="Reduce Dimension"></a>Reduce Dimension</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x = np.array([[<span class="number">1</span>, <span class="number">2</span>],[<span class="number">3</span>, <span class="number">4</span>]])</span><br><span class="line">print(np.ravel(x))      </span><br><span class="line">print(np.ravel(x,<span class="string">'F'</span>))</span><br></pre></td></tr></table></figure></div><br /><p><a name="LXdEA"></a></p><h1 id="4-Locating-argwhere"><a href="#4-Locating-argwhere" class="headerlink" title="4 Locating (argwhere)"></a>4 Locating (argwhere)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">arr = np.random.randint(<span class="number">0</span>,<span class="number">10</span>, (<span class="number">3</span>,<span class="number">4</span>))  </span><br><span class="line">index = np.argwhere(arr &lt; <span class="number">5</span>)</span><br><span class="line">index2 = np.where(arr &lt; <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>index</span><br><span class="line">array([[<span class="number">0</span>, <span class="number">2</span>],</span><br><span class="line">       [<span class="number">0</span>, <span class="number">3</span>],</span><br><span class="line">       [<span class="number">1</span>, <span class="number">1</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">0</span>],</span><br><span class="line">       [<span class="number">2</span>, <span class="number">3</span>]])</span><br><span class="line"><span class="meta">&gt;&gt;&gt; </span>index2</span><br><span class="line">(array([<span class="number">0</span>, <span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">2</span>]), array([<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">3</span>]))</span><br></pre></td></tr></table></figure></div><p><a name="ZLpsN"></a></p><h1 id="Replace"><a href="#Replace" class="headerlink" title="Replace"></a>Replace</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arr[arr &gt; <span class="number">255</span>] = x</span><br></pre></td></tr></table></figure></div><br /><br /><br /><br />ummmm... I am not really like to using numpy because I thing data.frame() in R is much better.]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>pip</title>
      <link href="/Python/pip.html"/>
      <url>/Python/pip.html</url>
      
        <content type="html"><![CDATA[<h1 id="pip"><a href="#pip" class="headerlink" title="pip"></a>pip</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 清华</span></span><br><span class="line">pip install -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br><span class="line"><span class="comment"># 豆瓣</span></span><br><span class="line">pip install -i http://pypi.douban.com/simple/ --upgrade numpy</span><br></pre></td></tr></table></figure></div><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -t /usr/<span class="built_in">local</span>/lib/python2.7/site-packages/ xlrd</span><br></pre></td></tr></table></figure></div><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3.7  install -i https://pypi.tuna.tsinghua.edu.cn/simple</span><br></pre></td></tr></table></figure></div><br /><p><a name="Wo9ga"></a></p><h1 id="list"><a href="#list" class="headerlink" title="list"></a>list</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip list</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Package              Version    </span><br><span class="line">-------------------- -----------</span><br><span class="line">absl-py              0.9.0      </span><br><span class="line">aiohttp              3.6.2      </span><br><span class="line">allow                0.0.3      </span><br><span class="line">alot                 0.9        </span><br><span class="line">appdirs              1.4.3</span><br></pre></td></tr></table></figure></div><p><a name="n0A8A"></a></p><h1 id="show"><a href="#show" class="headerlink" title="show"></a>show</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">pip show opencv-python</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Name: opencv-python</span></span><br><span class="line"><span class="string">Version: 4.1.2.30</span></span><br><span class="line"><span class="string">Summary: Wrapper package for OpenCV python bindings.</span></span><br><span class="line"><span class="string">Home-page: https://github.com/skvark/opencv-python</span></span><br><span class="line"><span class="string">Author: None</span></span><br><span class="line"><span class="string">Author-email: None</span></span><br><span class="line"><span class="string">License: MIT</span></span><br><span class="line"><span class="string">Location: /usr/local/lib/python3.7/site-packages</span></span><br><span class="line"><span class="string">Requires: numpy</span></span><br><span class="line"><span class="string">Required-by:</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure></div><p><br />——————————————————————————————————————————————–<br />github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br />blog: <a href="https://karobben.github.io/">Karobben.github.io</a> <br />R 语言画图索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>itchat</title>
      <link href="/Python/itchat.html"/>
      <url>/Python/itchat.html</url>
      
        <content type="html"><![CDATA[<h1>itchat</h1><p>wechat bot<br />微信机器人</p><p>确保你可以正常登录网页版微信</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"></span><br><span class="line"><span class="comment"># 登录</span></span><br><span class="line">itchat.login()</span><br><span class="line">itchat.auto_login(enableCmdQR=<span class="literal">True</span>)</span><br><span class="line">itchat.auto_login(hotReload=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 发送消息</span></span><br><span class="line">itchat.send(<span class="string">u'你好'</span>, <span class="string">'filehelper'</span>)</span><br><span class="line"><span class="comment"># 联系人列表</span></span><br><span class="line">F_list = itchat.get_friends(update=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#找到发信息的ID</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> F_list:</span><br><span class="line">  <span class="keyword">if</span> i[<span class="string">'RemarkName'</span>] == <span class="string">'XXX'</span>: <span class="comment">#昵称</span></span><br><span class="line">  print(i[<span class="string">'UserName'</span>])</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># friends</span></span><br><span class="line">friends = itchat.get_friends(update=<span class="literal">True</span>)[<span class="number">0</span>:]</span><br><span class="line"><span class="comment"># aotu-return</span></span><br><span class="line"><span class="keyword">import</span> itchat</span><br><span class="line"><span class="comment">#自动回复</span></span><br><span class="line"><span class="meta">@itchat.msg_register(itchat.content.TEXT)</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">text_reply</span><span class="params">(msg)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">"本人已死，有事招魂，没事烧纸 ಠಗಠ"</span><span class="comment">#+msg["Text"]</span></span><br><span class="line"><span class="comment">#登入</span></span><br><span class="line">itchat.auto_login()</span><br><span class="line"><span class="comment">#保持运行</span></span><br><span class="line">itchat.run()</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Python/summary.html"/>
      <url>/Python/summary.html</url>
      
        <content type="html"><![CDATA[<ul><li><a href="gitlwn">其他</a></li><li><a href="#">Introduction</a><ul><li><a href="#">Basic Commands</a><ul><li><a href="fo51nx">Untitled</a></li><li><a href="pip2">pip</a></li><li><a href="base2">base</a></li><li><a href="decode2">Encode&amp;decode</a></li></ul></li></ul></li><li><a href="#">Python for Data Science</a><ul><li><a href="crawler2">Crawler (爬虫)</a></li><li><a href="#">Data Structure &amp; Data Clean</a><ul><li><a href="gde4da">json</a></li><li><a href="numpy2">numpy</a></li><li><a href="pandas2">Pandas</a></li></ul></li><li><a href="#">Data Vidulazation</a><ul><li><a href="matplotlib2">Matplotlib</a></li><li><a href="terminalplot2">Plot in the Terminal!!! 在终端里面画画！！</a></li><li><a href="wordcloud2">wordcloud</a></li></ul></li><li><a href="#">Models</a><ul><li><a href="tf_n2">Tensorflow-Numbers-k</a></li><li><a href="tf2">Tensorflow</a></li><li><a href="tl2">Transfer_Learning</a></li></ul></li></ul></li><li><a href="#">Python for Bioinformatics</a><ul><li><a href="biopython2">Biopython</a></li></ul></li><li><a href="#">Python for Script</a><ul><li><a href="cvitwx">Untitled</a></li><li><a href="#">Just for hide</a><ul><li><a href="multiprocessing">Multiprocessing!!!</a></li><li><a href="popmail2">popmail-Python 登录邮箱</a></li><li><a href="argparse2">argparse (参数库)</a></li><li><a href="itchat">itchat</a></li><li><a href="pdf2">PDF</a></li><li><a href="pynput2">pynput –Moniter your keybaord</a></li></ul></li></ul></li><li><a href="#">Computational Visual</a><ul><li><a href="opencv2">OpenCV</a><ul><li><a href="pwx66f">Lightening Img</a></li><li><a href="lb1xtn2">PIL, np.array</a></li><li><a href="opencv_gif2">Opencv &amp; gif</a></li><li><a href="vedioslice">VedioSlice.py</a></li><li><a href="imtemd">Vedio_reverse.py</a></li></ul></li></ul></li><li><a href="#">Python for Development</a><ul><li><a href="tuilib2">TUI libs</a><ul><li><a href="urwid2">urwid</a></li><li><a href="npyscreen2">npyscreen</a></li><li><a href="animation-text2">Animation-Text</a></li></ul></li><li><a href="#">GUI libs</a><ul><li><a href="qt2">QT</a></li><li><a href="kivy2">kivy (Cross-platform App)</a></li><li><a href="buildozer2">kivy-Buildozer</a></li></ul></li><li><a href="htmlserver">Html</a></li></ul></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>wordcloud</title>
      <link href="/Python/wordcloud.html"/>
      <url>/Python/wordcloud.html</url>
      
        <content type="html"><![CDATA[<h1 id="wordcloud"><a href="#wordcloud" class="headerlink" title="wordcloud"></a>wordcloud</h1><p><img src="https://s1.ax1x.com/2020/06/22/NY0CDS.png" alt="NY0CDS.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> os <span class="keyword">import</span> path</span><br><span class="line"><span class="keyword">from</span> PIL <span class="keyword">import</span> Image</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> wordcloud <span class="keyword">import</span> WordCloud, STOPWORDS</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read the whole text.</span></span><br><span class="line">text = open(<span class="string">'alice.txt'</span>).read()</span><br><span class="line"></span><br><span class="line"><span class="comment"># read the mask image</span></span><br><span class="line"><span class="comment"># taken from</span></span><br><span class="line"><span class="comment"># http://www.stencilry.org/stencils/movies/alice%20in%20wonderland/255fk.jpg</span></span><br><span class="line">alice_mask = np.array(Image.open(<span class="string">"alice_mask.png"</span>))</span><br><span class="line"></span><br><span class="line">stopwords = set(STOPWORDS)</span><br><span class="line">stopwords.add(<span class="string">"said"</span>)</span><br><span class="line"></span><br><span class="line">wc = WordCloud(background_color=<span class="string">"white"</span>,</span><br><span class="line">               max_words=<span class="number">200</span>, mask=alice_mask,</span><br><span class="line">               max_font_size=<span class="number">200</span>, <span class="comment"># 根据你的图片大小定义</span></span><br><span class="line">               stopwords=stopwords)</span><br><span class="line"><span class="comment"># generate word cloud</span></span><br><span class="line">wc.generate(text)</span><br><span class="line"></span><br><span class="line"><span class="comment"># store to file</span></span><br><span class="line">wc.to_file(<span class="string">"alice.png"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># show</span></span><br><span class="line">plt.imshow(wc, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br><span class="line">plt.figure()</span><br><span class="line">plt.imshow(alice_mask, cmap=plt.cm.gray, interpolation=<span class="string">'bilinear'</span>)</span><br><span class="line">plt.axis(<span class="string">"off"</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># remove punctuation</span></span><br><span class="line">Special = <span class="string">"”"</span></span><br><span class="line">TT = text.translate(str.maketrans(<span class="string">' '</span>, <span class="string">' '</span>, string.punctuation))</span><br><span class="line">TT = TT.translate(str.maketrans(<span class="string">''</span>, <span class="string">''</span>, string.whitespace[<span class="number">1</span>:]))</span><br><span class="line">TT = TT.translate(str.maketrans(<span class="string">''</span>, <span class="string">''</span>, string.digits))</span><br><span class="line">TT = TT.lower()</span><br><span class="line">TT = TT.split(<span class="string">" "</span>)</span><br><span class="line">TT = list(set(TT))</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> string.ascii_lowercase:</span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        TT.remove(i)</span><br><span class="line">    <span class="keyword">except</span>:</span><br><span class="line">        print(i)</span><br><span class="line"></span><br><span class="line">f = open(<span class="string">"list"</span>,<span class="string">'a'</span>)</span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> TT:</span><br><span class="line">    f.write(i+<span class="string">'\n'</span>)</span><br><span class="line">f.close()</span><br></pre></td></tr></table></figure></div><p><a href="https://amueller.github.io/word_cloud/auto_examples/colored.html#colored-py" target="_blank" rel="noopener">https://amueller.github.io/word_cloud/auto_examples/colored.html#colored-py</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>urwid</title>
      <link href="/Python/urwid.html"/>
      <url>/Python/urwid.html</url>
      
        <content type="html"><![CDATA[<h1>urwid</h1><p>Reference：<a href="http://urwid.org/tutorial/index.html" target="_blank" rel="noopener">http://urwid.org/tutorial/index.html</a></p><p><a href="http://urwid.org/tutorial/index.html#" target="_blank" rel="noopener">Urwid Tutorial</a><br /> <a href="http://urwid.org/tutorial/index.html#minimal-application" target="_blank" rel="noopener">Minimal Application</a><br /> <a href="http://urwid.org/tutorial/index.html#global-input" target="_blank" rel="noopener">Global Input</a><br /> <a href="http://urwid.org/tutorial/index.html#display-attributes" target="_blank" rel="noopener">Display Attributes</a><br /><a href="http://urwid.org/tutorial/index.html#high-color-modes" target="_blank" rel="noopener"> High Color Modes</a><br /><a href="http://urwid.org/tutorial/index.html#question-and-answer" target="_blank" rel="noopener"> Question and Answer</a><br /><a href="http://urwid.org/tutorial/index.html#signal-handlers" target="_blank" rel="noopener"> Signal Handlers</a><br /><a href="http://urwid.org/tutorial/index.html#multiple-questions" target="_blank" rel="noopener"> Multiple Questions</a><br /> <a href="http://urwid.org/tutorial/index.html#simple-menu" target="_blank" rel="noopener">Simple Menu</a><br /><a href=""> Cascading Menu</a><br /> <a href="http://urwid.org/tutorial/index.html#horizontal-menu">Horizontal Menu</a><br /><a href="http://urwid.org/tutorial/index.html#adventure-game" target="_blank" rel="noopener"> Adventure Game</a></p><p>Main tutorial: <a href="http://urwid.org/manual/index.html" target="_blank" rel="noopener">http://urwid.org/manual/index.html</a></p><ul><li><a href="http://urwid.org/manual/overview.html" target="_blank" rel="noopener">Library Overview</a></li><li><a href="http://urwid.org/manual/mainloop.html" target="_blank" rel="noopener">Main Loop</a><ul><li><a href="http://urwid.org/manual/mainloop.html#widgets-displayed" target="_blank" rel="noopener">Widgets Displayed</a></li><li><a href="http://urwid.org/manual/mainloop.html#event-loops" target="_blank" rel="noopener">Event Loops</a></li></ul></li><li><a href="http://urwid.org/manual/displaymodules.html" target="_blank" rel="noopener">Display Modules</a><ul><li><a href="http://urwid.org/manual/displaymodules.html#raw-and-curses-display-modules" target="_blank" rel="noopener">Raw and Curses Display Modules</a></li><li><a href="http://urwid.org/manual/displaymodules.html#other-display-modules" target="_blank" rel="noopener">Other Display Modules</a></li><li><a href="http://urwid.org/manual/displaymodules.html#setting-a-palette" target="_blank" rel="noopener">Setting a Palette</a></li></ul></li><li><a href="http://urwid.org/manual/widgets.html" target="_blank" rel="noopener">Widgets</a><ul><li><a href="http://urwid.org/manual/widgets.html#widget-layout" target="_blank" rel="noopener">Widget Layout</a></li><li><a href="http://urwid.org/manual/widgets.html#box-flow-and-fixed-widgets" target="_blank" rel="noopener">Box, Flow and Fixed Widgets</a></li><li><a href="http://urwid.org/manual/widgets.html#included-widgets" target="_blank" rel="noopener">Included Widgets</a></li><li><a href="http://urwid.org/manual/widgets.html#decoration-widgets" target="_blank" rel="noopener">Decoration Widgets</a></li><li><a href="http://urwid.org/manual/widgets.html#container-widgets" target="_blank" rel="noopener">Container Widgets</a></li><li><a href="http://urwid.org/manual/widgets.html#listbox-contents" target="_blank" rel="noopener">ListBox Contents</a></li><li><a href="http://urwid.org/manual/widgets.html#custom-widgets" target="_blank" rel="noopener">Custom Widgets</a></li><li><a href="http://urwid.org/manual/widgets.html#widget-metaclass" target="_blank" rel="noopener">Widget Metaclass</a></li></ul></li><li><a href="http://urwid.org/manual/userinput.html" target="_blank" rel="noopener">User Input</a><ul><li><a href="http://urwid.org/manual/userinput.html#keyboard-input" target="_blank" rel="noopener">Keyboard Input</a></li><li><a href="http://urwid.org/manual/userinput.html#mouse-input" target="_blank" rel="noopener">Mouse Input</a></li></ul></li><li><a href="http://urwid.org/manual/textlayout.html" target="_blank" rel="noopener">Text Layout</a><ul><li><a href="http://urwid.org/manual/textlayout.html#custom-text-layouts" target="_blank" rel="noopener">Custom Text Layouts</a></li><li><a href="http://urwid.org/manual/textlayout.html#text-layout-structures" target="_blank" rel="noopener">Text Layout Structures</a></li></ul></li><li><a href="http://urwid.org/manual/encodings.html" target="_blank" rel="noopener">Encodings Supported</a><ul><li><a href="http://urwid.org/manual/encodings.html#unicode-support" target="_blank" rel="noopener">Unicode Support</a></li><li><a href="http://urwid.org/manual/encodings.html#pass-through-support" target="_blank" rel="noopener">Pass-through Support</a></li><li><a href="http://urwid.org/manual/encodings.html#future-work" target="_blank" rel="noopener">Future Work</a></li></ul></li><li><a href="http://urwid.org/manual/displayattributes.html" target="_blank" rel="noopener">Display Attributes</a><ul><li><a href="http://urwid.org/manual/displayattributes.html#using-display-attributes" target="_blank" rel="noopener">Using Display Attributes</a></li><li><a href="http://urwid.org/manual/displayattributes.html#foreground-and-background-settings" target="_blank" rel="noopener">Foreground and Background Settings</a></li><li><a href="http://urwid.org/manual/displayattributes.html#recommended-combinations" target="_blank" rel="noopener">Recommended Combinations</a></li></ul></li><li><a href="http://urwid.org/manual/canvascache.html" target="_blank" rel="noopener">Canvas Cache</a><ul><li><a href="http://urwid.org/manual/canvascache.html#composite-canvases" target="_blank" rel="noopener">Composite Canvases</a></li><li><a href="http://urwid.org/manual/canvascache.html#cache-lifetime" target="_blank" rel="noopener">Cache Lifetime</a></li><li><a href="http://urwid.org/manual/canvascache.html#future-work" target="_blank" rel="noopener">Future Work</a></li></ul></li></ul><p><a name="zxt1G"></a></p><h1>Quick Start:</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line">txt = urwid.Text(<span class="string">u"Hello World"</span>)</span><br><span class="line">fill = urwid.Filler(txt, <span class="string">'top'</span>) <span class="comment">#'top', 'middle', 'bottom'</span></span><br><span class="line">loop = urwid.MainLoop(fill)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/23/VcMDORFeLwnCHIf.png" alt="123.png"></p><p><a name="byFqh"></a></p><h1>Global Input</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_or_exit</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line">    txt.set_text(repr(key))</span><br><span class="line"></span><br><span class="line">txt = urwid.Text(<span class="string">u"Hello World"</span>)</span><br><span class="line">fill = urwid.Filler(txt, <span class="string">'top'</span>)</span><br><span class="line">loop = urwid.MainLoop(fill, unhandled_input=show_or_exit)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMrWQ.png" alt="NtMrWQ.png"><br /></p><p><a name="XKE08"></a></p><h1>Display Attributes</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line"></span><br><span class="line">txt = urwid.Text((<span class="string">'banner'</span>, <span class="string">u" Hello World "</span>), align=<span class="string">'center'</span>)</span><br><span class="line">map1 = urwid.AttrMap(txt, <span class="string">'streak'</span>)</span><br><span class="line">fill = urwid.Filler(map1)</span><br><span class="line">map2 = urwid.AttrMap(fill, <span class="string">'bg'</span>)</span><br><span class="line">loop = urwid.MainLoop(map2, palette, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMszj.png" alt="NtMszj.png"><br>原图<br><img src="https://i.loli.net/2020/06/23/kseKCIQEHyLBPl9.png" alt="123.png"><br>去掉‘bg’<br><img src="https://s1.ax1x.com/2020/06/23/NtMMdK.png" alt="NtMMdK.png"><br>去掉‘streak’</p><p><a name="pManZ"></a></p><h2 id="解释："><a class="header-anchor" href="#解释："></a>解释：</h2><p>txt， 最顶层，标签是‘banner’，获取palette中‘banner’的设置<br />map1， 和txt 一个道理。<br />txt 丢到map1， map1丢到 fill， fill丢到map2， 一层盖一层。<br><a name="tc2tt"></a></p><h1>Question and Answer</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuestionBox</span><span class="params">(urwid.Filler)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keypress</span><span class="params">(self, size, key)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key != <span class="string">'enter'</span>:</span><br><span class="line">            <span class="keyword">return</span> super(QuestionBox, self).keypress(size, key)</span><br><span class="line">        self.original_widget = urwid.Text(</span><br><span class="line">            <span class="string">u"Nice to meet you,\n%s.\n\nPress Q to exit."</span> %</span><br><span class="line">            edit.edit_text)</span><br><span class="line"></span><br><span class="line">edit = urwid.Edit(<span class="string">u"What is your name?\n"</span>)</span><br><span class="line">fill = QuestionBox(edit)</span><br><span class="line">loop = urwid.MainLoop(fill, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMnqx.png" alt="NtMnqx.png"></p><p><a name="S8n5a"></a></p><h1>Signal Handlers</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line">palette = [(<span class="string">'I say'</span>, <span class="string">'default,bold'</span>, <span class="string">'default'</span>, <span class="string">'bold'</span>),]</span><br><span class="line">ask = urwid.Edit((<span class="string">'I say'</span>, <span class="string">u"What is your name?\n"</span>))</span><br><span class="line">reply = urwid.Text(<span class="string">u""</span>)</span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">div = urwid.Divider()</span><br><span class="line">pile = urwid.Pile([ask, div, reply, div, button])</span><br><span class="line">top = urwid.Filler(pile, valign=<span class="string">'top'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_ask_change</span><span class="params">(edit, new_edit_text)</span>:</span></span><br><span class="line">    reply.set_text((<span class="string">'I say'</span>, <span class="string">u"Nice to meet you, %s"</span> % new_edit_text))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">urwid.connect_signal(ask, <span class="string">'change'</span>, on_ask_change)</span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line">urwid.MainLoop(top, palette).run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMQIO.gif" alt="NtMQIO.gif"></p><p><a name="eFB75"></a></p><h1>Simple Menu</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line">choices = <span class="string">u'Chapman Cleese Gilliam Idle Jones Palin'</span>.split()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">menu</span><span class="params">(title, choices)</span>:</span></span><br><span class="line">    body = [urwid.Text(title), urwid.Divider()]</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> choices:</span><br><span class="line">        button = urwid.Button(c)</span><br><span class="line">        urwid.connect_signal(button, <span class="string">'click'</span>, item_chosen, c)</span><br><span class="line">        body.append(urwid.AttrMap(button, <span class="literal">None</span>, focus_map=<span class="string">'reversed'</span>))</span><br><span class="line">    <span class="keyword">return</span> urwid.ListBox(urwid.SimpleFocusListWalker(body))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">item_chosen</span><span class="params">(button, choice)</span>:</span></span><br><span class="line">    response = urwid.Text([<span class="string">u'You chose '</span>, choice, <span class="string">u'\n'</span>])</span><br><span class="line">    done = urwid.Button(<span class="string">u'Ok'</span>)</span><br><span class="line">    urwid.connect_signal(done, <span class="string">'click'</span>, exit_program)</span><br><span class="line">    main.original_widget = urwid.Filler(urwid.Pile([response,</span><br><span class="line">        urwid.AttrMap(done, <span class="literal">None</span>, focus_map=<span class="string">'reversed'</span>)]))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_program</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">main = urwid.Padding(menu(<span class="string">u'Pythons'</span>, choices), left=<span class="number">2</span>, right=<span class="number">2</span>)</span><br><span class="line">top = urwid.Overlay(main, urwid.SolidFill(<span class="string">u'\N&#123;MEDIUM SHADE&#125;'</span>),</span><br><span class="line">    align=<span class="string">'center'</span>, width=(<span class="string">'relative'</span>, <span class="number">60</span>),</span><br><span class="line">    valign=<span class="string">'middle'</span>, height=(<span class="string">'relative'</span>, <span class="number">60</span>),</span><br><span class="line">    min_width=<span class="number">20</span>, min_height=<span class="number">9</span>)</span><br><span class="line">urwid.MainLoop(top, palette=[(<span class="string">'reversed'</span>, <span class="string">'standout'</span>, <span class="string">''</span>)]).run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMeMR.png" alt="NtMeMR.png"></p><p><a name="kT6yB"></a></p><h1>Pop-up Menu</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">menu_button</span><span class="params">(caption, callback)</span>:</span></span><br><span class="line">    button = urwid.Button(caption)</span><br><span class="line">    urwid.connect_signal(button, <span class="string">'click'</span>, callback)</span><br><span class="line">    <span class="keyword">return</span> urwid.AttrMap(button, <span class="literal">None</span>, focus_map=<span class="string">'reversed'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sub_menu</span><span class="params">(caption, choices)</span>:</span></span><br><span class="line">    contents = menu(caption, choices)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_menu</span><span class="params">(button)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> top.open_box(contents)</span><br><span class="line">    <span class="keyword">return</span> menu_button([caption, <span class="string">u'...'</span>], open_menu)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">menu</span><span class="params">(title, choices)</span>:</span></span><br><span class="line">    body = [urwid.Text(title), urwid.Divider()]</span><br><span class="line">    body.extend(choices)</span><br><span class="line">    <span class="keyword">return</span> urwid.ListBox(urwid.SimpleFocusListWalker(body))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">item_chosen</span><span class="params">(button)</span>:</span></span><br><span class="line">    response = urwid.Text([<span class="string">u'You chose '</span>, button.label, <span class="string">u'\n'</span>])</span><br><span class="line">    done = menu_button(<span class="string">u'Ok'</span>, exit_program)</span><br><span class="line">    top.open_box(urwid.Filler(urwid.Pile([response, done])))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_program</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">menu_top = menu(<span class="string">u'Main Menu'</span>, [</span><br><span class="line">    sub_menu(<span class="string">u'Applications'</span>, [</span><br><span class="line">        sub_menu(<span class="string">u'Accessories'</span>, [</span><br><span class="line">            menu_button(<span class="string">u'Text Editor'</span>, item_chosen),</span><br><span class="line">            menu_button(<span class="string">u'Terminal'</span>, item_chosen),</span><br><span class="line">        ]),</span><br><span class="line">    ]),</span><br><span class="line">    sub_menu(<span class="string">u'System'</span>, [</span><br><span class="line">        sub_menu(<span class="string">u'Preferences'</span>, [</span><br><span class="line">            menu_button(<span class="string">u'Appearance'</span>, item_chosen),</span><br><span class="line">        ]),</span><br><span class="line">        menu_button(<span class="string">u'Lock Screen'</span>, item_chosen),</span><br><span class="line">    ]),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CascadingBoxes</span><span class="params">(urwid.WidgetPlaceholder)</span>:</span></span><br><span class="line">    max_box_levels = <span class="number">4</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, box)</span>:</span></span><br><span class="line">        super(CascadingBoxes, self).__init__(urwid.SolidFill(<span class="string">u'/'</span>))</span><br><span class="line">        self.box_level = <span class="number">0</span></span><br><span class="line">        self.open_box(box)</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_box</span><span class="params">(self, box)</span>:</span></span><br><span class="line">        self.original_widget = urwid.Overlay(urwid.LineBox(box),</span><br><span class="line">            self.original_widget,</span><br><span class="line">            align=<span class="string">'center'</span>, width=(<span class="string">'relative'</span>, <span class="number">80</span>),</span><br><span class="line">            valign=<span class="string">'middle'</span>, height=(<span class="string">'relative'</span>, <span class="number">80</span>),</span><br><span class="line">            min_width=<span class="number">24</span>, min_height=<span class="number">8</span>,</span><br><span class="line">            left=self.box_level * <span class="number">3</span>,</span><br><span class="line">            right=(self.max_box_levels - self.box_level - <span class="number">1</span>) * <span class="number">3</span>,</span><br><span class="line">            top=self.box_level * <span class="number">2</span>,</span><br><span class="line">            bottom=(self.max_box_levels - self.box_level - <span class="number">1</span>) * <span class="number">2</span>)</span><br><span class="line">        self.box_level += <span class="number">1</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keypress</span><span class="params">(self, size, key)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key == <span class="string">'esc'</span> <span class="keyword">and</span> self.box_level &gt; <span class="number">1</span>:</span><br><span class="line">            self.original_widget = self.original_widget[<span class="number">0</span>]</span><br><span class="line">            self.box_level -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> super(CascadingBoxes, self).keypress(size, key)</span><br><span class="line"></span><br><span class="line">top = CascadingBoxes(menu_top)</span><br><span class="line">urwid.MainLoop(top, palette=[(<span class="string">'reversed'</span>, <span class="string">'standout'</span>, <span class="string">''</span>)]).run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMGzd.png" alt="NtMGzd.png"></p><p><a name="xc41N"></a></p><h1>Horizontal Menu</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MenuButton</span><span class="params">(urwid.Button)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, caption, callback)</span>:</span></span><br><span class="line">        super(MenuButton, self).__init__(<span class="string">""</span>)</span><br><span class="line">        urwid.connect_signal(self, <span class="string">'click'</span>, callback)</span><br><span class="line">        self._w = urwid.AttrMap(urwid.SelectableIcon(</span><br><span class="line">            [<span class="string">u'  \N&#123;BULLET&#125; '</span>, caption], <span class="number">2</span>), <span class="literal">None</span>, <span class="string">'selected'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubMenu</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, caption, choices)</span>:</span></span><br><span class="line">        super(SubMenu, self).__init__(MenuButton(</span><br><span class="line">            [caption, <span class="string">u"\N&#123;HORIZONTAL ELLIPSIS&#125;"</span>], self.open_menu))</span><br><span class="line">        line = urwid.Divider(<span class="string">u'\N&#123;LOWER ONE QUARTER BLOCK&#125;'</span>)</span><br><span class="line">        listbox = urwid.ListBox(urwid.SimpleFocusListWalker([</span><br><span class="line">            urwid.AttrMap(urwid.Text([<span class="string">u"\n  "</span>, caption]), <span class="string">'heading'</span>),</span><br><span class="line">            urwid.AttrMap(line, <span class="string">'line'</span>),</span><br><span class="line">            urwid.Divider()] + choices + [urwid.Divider()]))</span><br><span class="line">        self.menu = urwid.AttrMap(listbox, <span class="string">'options'</span>)</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_menu</span><span class="params">(self, button)</span>:</span></span><br><span class="line">        top.open_box(self.menu)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Choice</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, caption)</span>:</span></span><br><span class="line">        super(Choice, self).__init__(</span><br><span class="line">            MenuButton(caption, self.item_chosen))</span><br><span class="line">        self.caption = caption</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">item_chosen</span><span class="params">(self, button)</span>:</span></span><br><span class="line">        response = urwid.Text([<span class="string">u'  You chose '</span>, self.caption, <span class="string">u'\n'</span>])</span><br><span class="line">        done = MenuButton(<span class="string">u'Ok'</span>, exit_program)</span><br><span class="line">        response_box = urwid.Filler(urwid.Pile([response, done]))</span><br><span class="line">        top.open_box(urwid.AttrMap(response_box, <span class="string">'options'</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_program</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">menu_top = SubMenu(<span class="string">u'Main Menu'</span>, [</span><br><span class="line">    SubMenu(<span class="string">u'Applications'</span>, [</span><br><span class="line">        SubMenu(<span class="string">u'Accessories'</span>, [</span><br><span class="line">            Choice(<span class="string">u'Text Editor'</span>),</span><br><span class="line">            Choice(<span class="string">u'Terminal'</span>),</span><br><span class="line">        ]),</span><br><span class="line">    ]),</span><br><span class="line">    SubMenu(<span class="string">u'System'</span>, [</span><br><span class="line">        SubMenu(<span class="string">u'Preferences'</span>, [</span><br><span class="line">            Choice(<span class="string">u'Appearance'</span>),</span><br><span class="line">        ]),</span><br><span class="line">        Choice(<span class="string">u'Lock Screen'</span>),</span><br><span class="line">    ]),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="literal">None</span>,  <span class="string">'light gray'</span>, <span class="string">'black'</span>),</span><br><span class="line">    (<span class="string">'heading'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'line'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'options'</span>, <span class="string">'dark gray'</span>, <span class="string">'black'</span>),</span><br><span class="line">    (<span class="string">'focus heading'</span>, <span class="string">'white'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'focus line'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'focus options'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'selected'</span>, <span class="string">'white'</span>, <span class="string">'dark blue'</span>)]</span><br><span class="line">focus_map = &#123;</span><br><span class="line">    <span class="string">'heading'</span>: <span class="string">'focus heading'</span>,</span><br><span class="line">    <span class="string">'options'</span>: <span class="string">'focus options'</span>,</span><br><span class="line">    <span class="string">'line'</span>: <span class="string">'focus line'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HorizontalBoxes</span><span class="params">(urwid.Columns)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(HorizontalBoxes, self).__init__([], dividechars=<span class="number">1</span>)</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_box</span><span class="params">(self, box)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.contents:</span><br><span class="line">            <span class="keyword">del</span> self.contents[self.focus_position + <span class="number">1</span>:]</span><br><span class="line">        self.contents.append((urwid.AttrMap(box, <span class="string">'options'</span>, focus_map),</span><br><span class="line">            self.options(<span class="string">'given'</span>, <span class="number">24</span>)))</span><br><span class="line">        self.focus_position = len(self.contents) - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">top = HorizontalBoxes()</span><br><span class="line">top.open_box(menu_top.menu)</span><br><span class="line">urwid.MainLoop(urwid.Filler(top, <span class="string">'middle'</span>, <span class="number">10</span>), palette).run()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMgLq.png" alt="NtMgLq.png"></p><p><a name="9vcI2"></a></p><h1>Frames</h1><p><a name="6G3ti"></a></p><h2 id="urwid-Text"><a class="header-anchor" href="#urwid-Text"></a>urwid.Text</h2><p><img src="https://i.loli.net/2020/06/23/k6TZ9csjKrmExPB.png" alt="123.png"><br>不能:<br />{Column, AttrMap} --&gt; Mainloop</p><p>可:<br />{Filler, Frame } -&gt; Mainloop</p><p>Column -&gt; Filler  -&gt; Mainloop<br />Text -&gt; Filler  -&gt; Mainloop<br />Column -&gt; Filler -&gt; AttrMap -&gt; Mainloop<br />Text -&gt; Filler -&gt; AttrMap -&gt; Mainloop</p><p><a name="QCusj"></a></p><h2 id="Frame"><a class="header-anchor" href="#Frame"></a>Frame</h2><p>Frame(header=hdr, body=map2)<br>Text -&gt; AttrWrap &gt; header<br>Columns -&gt; Filler -&gt; AttrMap -&gt; body</p><p><a name="U3Yzd"></a></p><h2 id="ListBox"><a class="header-anchor" href="#ListBox"></a>ListBox</h2><p>Filler -&gt; ListBox<br>Padding -&gt; SimpleListWalker -&gt; ListBox<br>[Text, Pile, Columns] -&gt; SimpleListWalker -&gt; ListBox<br>[Text, Pile, Columns]-&gt; SimpleListWalker -&gt; ListBox -&gt; AttrWrap -&gt; Frame</p><p><a name="7dOh6"></a></p><h1>Exampels</h1><p>Source: <a href="https://github.com/urwid/urwid/tree/master/examples" target="_blank" rel="noopener">https://github.com/urwid/urwid/tree/master/examples</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtM6Qs.png" alt="NtM6Qs.png"><br><a href="http://browse.py" target="_blank" rel="noopener">browse.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtMcyn.png" alt="NtMcyn.png"><br><a href="http://bigtext.py" target="_blank" rel="noopener">bigtext.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtMRe0.png" alt="NtMRe0.png"><br><a href="http://treesample.py" target="_blank" rel="noopener">treesample.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtMKZ6.png" alt="NtMKZ6.png"><br><a href="http://calc.py" target="_blank" rel="noopener">calc.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtM3Je.png" alt="NtM3Je.png"><br><a href="http://tour.py" target="_blank" rel="noopener">tour.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtM1iD.png" alt="NtM1iD.png"><br><a href="http://edit.py" target="_blank" rel="noopener">edit.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtM8RH.png" alt="NtM8RH.png"><br><a href="http://fib.py" target="_blank" rel="noopener">fib.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtMYQA.png" alt="NtMYQA.png"><br><a href="http://graph.py" target="_blank" rel="noopener">graph.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtMDJg.png" alt="NtMDJg.png"><br><a href="http://terminal.py" target="_blank" rel="noopener">terminal.py</a></p><p><img src="https://s1.ax1x.com/2020/06/23/NtM5YF.png" alt="NtM5YF.png"><br>input_test.py</p><p><img src="https://s1.ax1x.com/2020/06/23/NtMIW4.png" alt="NtMIW4.png"><br>pop_up.py</p><p><a href="https://imgchr.com/i/NtMbO1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/23/NtMbO1.md.png" alt="NtMbO1.md.png"></a><br>palette_test.py</p><p>more examples: <a href="https://www.programcreek.com/python/example/12128/urwid.MainLoop" target="_blank" rel="noopener">programcreek.com</a></p><p><a name="jee6m"></a></p><h2 id="pop-up-py"><a class="header-anchor" href="#pop-up-py"></a>pop_up.py</h2><p>P-raw</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PopUpDialog</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="string">"""A dialog that appears with nothing but a close button """</span></span><br><span class="line">    signals = [<span class="string">'close'</span>]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        close_button = urwid.Button(<span class="string">"that's pretty cool"</span>)</span><br><span class="line">        urwid.connect_signal(close_button, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line">        pile = urwid.Pile([urwid.Text(</span><br><span class="line">            <span class="string">"^^  I'm attached to the widget that opened me. "</span></span><br><span class="line">            <span class="string">"Try resizing the window!\n"</span>), close_button])</span><br><span class="line">        fill = urwid.Filler(pile)</span><br><span class="line">        self.__super.__init__(urwid.AttrWrap(fill, <span class="string">'popbg'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThingWithAPopUp</span><span class="params">(urwid.PopUpLauncher)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__super.__init__(urwid.Button(<span class="string">"click-me"</span>))</span><br><span class="line">        urwid.connect_signal(self.original_widget, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.open_pop_up())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_pop_up</span><span class="params">(self)</span>:</span></span><br><span class="line">        pop_up = PopUpDialog()</span><br><span class="line">        urwid.connect_signal(pop_up, <span class="string">'close'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.close_pop_up())</span><br><span class="line">        <span class="keyword">return</span> pop_up</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_pop_up_parameters</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">'left'</span>:<span class="number">0</span>, <span class="string">'top'</span>:<span class="number">1</span>, <span class="string">'overlay_width'</span>:<span class="number">32</span>, <span class="string">'overlay_height'</span>:<span class="number">7</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fill = urwid.Filler(urwid.Padding(ThingWithAPopUp(), <span class="string">'center'</span>, <span class="number">15</span>))</span><br><span class="line">loop = urwid.MainLoop(</span><br><span class="line">    fill,</span><br><span class="line">    [(<span class="string">'popbg'</span>, <span class="string">'white'</span>, <span class="string">'dark blue'</span>)],</span><br><span class="line">    pop_ups=<span class="literal">True</span>)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p>原来程序:<br><img src="https://s1.ax1x.com/2020/06/23/NtMTSJ.jpg" alt="NtMTSJ.jpg"><br>在 pop up 的框里面加一个退出按钮<br />结构解析:<br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">close_button = urwid.Button(<span class="string">"that's pretty cool"</span>)      <span class="comment">#定义一个button 名称</span></span><br><span class="line">urwid.connect_signal(close_button, <span class="string">'click'</span>,          <span class="comment"># button 的作用</span></span><br><span class="line">                     <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line">pile = urwid.Pile([urwid.Text(                <span class="comment">#一段文字,加上前面的button</span></span><br><span class="line">    <span class="string">"^^  I'm attached to the widget that opened me. "</span>      <span class="comment">#pile 在一起</span></span><br><span class="line">    <span class="string">"Try resizing the window!\n"</span>), close_button])</span><br><span class="line">fill = urwid.Filler(pile)                  <span class="comment">#封装</span></span><br><span class="line">self.__super.__init__(urwid.AttrWrap(fill, <span class="string">'popbg'</span>))    <span class="comment">#完成</span></span><br></pre></td></tr></table></figure></div><p>可以看出基本结构为, Button -&gt; Pile + Button  -&gt;  Filler<br />因此, 除了加入button title和 signal 外, 还需要在 pile处, 一起打包.<br />测试:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">esc_button = urwid.Button(<span class="string">"Esc"</span>)</span><br><span class="line">urwid.connect_signal(esc_button, <span class="string">'click'</span>,</span><br><span class="line">    <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line">pile = urwid.Pile([urwid.Text(</span><br><span class="line">    <span class="string">"^^  I'm attached to the widget that opened me. "</span></span><br><span class="line">    <span class="string">"Try resizing the window!\n"</span>), close_button,esc_button])</span><br></pre></td></tr></table></figure></div><p>直接加的话, 按键会依次排列:<br /><br><img src="https://s1.ax1x.com/2020/06/23/NtM7l9.png" alt="NtM7l9.png"></p><p><a name="mjICH"></a></p><h3 id="Button-位置等属性"><a class="header-anchor" href="#Button-位置等属性"></a>Button 位置等属性</h3><p>用 urwid.Padding(close_button, ‘left’, 18) 参数 调整button 位置, 结果一个上左, 一个右下<br />注: 18 为字符数<br /><br><img src="https://s1.ax1x.com/2020/06/23/NtMtsI.png" alt="NtMtsI.png"></p><p>这里用到一个新函数 ,参考来源:<a href="https://stackoverflow.com/questions/52252730/how-do-you-make-buttons-of-the-python-library-urwid-look-pretty" target="_blank" rel="noopener">stackoverflow</a></p><p><a name="TjLXz"></a></p><h3 id="urwid-Columns"><a class="header-anchor" href="#urwid-Columns"></a>urwid.Columns</h3><p>基本用法:  urwid.Columns([button1, button2])</p><p><img src="https://s1.ax1x.com/2020/06/23/NtMNLt.png" alt="NtMNLt.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># button, 加在上文 p-raw 的 9~11行之间</span></span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line"><span class="comment"># button的排序, 加载urwid.Pile() 里面</span></span><br><span class="line">urwid.Columns([</span><br><span class="line">    urwid.Padding(close_button, <span class="string">'left'</span>),</span><br><span class="line">    urwid.Padding(button, <span class="string">'right'</span>, <span class="number">8</span>),</span><br><span class="line">]),</span><br></pre></td></tr></table></figure></div><p>完整代码:<br />pop-2</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PopUpDialog</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="string">"""A dialog that appears with nothing but a close button """</span></span><br><span class="line">    signals = [<span class="string">'close'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        close_button = urwid.Button(<span class="string">"that's NOT COOL"</span>)</span><br><span class="line">        urwid.connect_signal(close_button, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line"></span><br><span class="line">        button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">        urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line">        pile = urwid.Pile([urwid.Text(</span><br><span class="line">            <span class="string">"^^  I'm attached to the widget that opened me. "</span></span><br><span class="line">            <span class="string">"Try resizing the window!\n"</span>),</span><br><span class="line">            urwid.Columns([</span><br><span class="line">                urwid.Padding(close_button, <span class="string">'left'</span>),</span><br><span class="line">                urwid.Padding(button, <span class="string">'right'</span>, <span class="number">8</span>),</span><br><span class="line">            ]),</span><br><span class="line">            ])</span><br><span class="line">        fill = urwid.Filler(pile)</span><br><span class="line">        self.__super.__init__(urwid.AttrWrap(fill, <span class="string">'popbg'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThingWithAPopUp</span><span class="params">(urwid.PopUpLauncher)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__super.__init__(urwid.Button(<span class="string">"click-me"</span>))</span><br><span class="line">        urwid.connect_signal(self.original_widget, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.open_pop_up())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_pop_up</span><span class="params">(self)</span>:</span></span><br><span class="line">        pop_up = PopUpDialog()</span><br><span class="line">        urwid.connect_signal(pop_up, <span class="string">'close'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.close_pop_up())</span><br><span class="line">        <span class="keyword">return</span> pop_up</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_pop_up_parameters</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">'left'</span>:<span class="number">0</span>, <span class="string">'top'</span>:<span class="number">1</span>, <span class="string">'overlay_width'</span>:<span class="number">32</span>, <span class="string">'overlay_height'</span>:<span class="number">7</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line">pile = urwid.Pile([urwid.Padding(ThingWithAPopUp(), <span class="string">'center'</span>, <span class="number">15</span>),button])</span><br><span class="line">fill = urwid.Filler(pile)</span><br><span class="line">loop = urwid.MainLoop(</span><br><span class="line">    fill,</span><br><span class="line">    [(<span class="string">'popbg'</span>, <span class="string">'white'</span>, <span class="string">'dark blue'</span>)],</span><br><span class="line">    pop_ups=<span class="literal">True</span>)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div><p><a name="Jbejz"></a></p><h3 id="pop-window-size"><a class="header-anchor" href="#pop-window-size"></a>pop window size</h3><p>修改这里就好了~</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_pop_up_parameters</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">'left'</span>:<span class="number">0</span>, <span class="string">'top'</span>:<span class="number">1</span>, <span class="string">'overlay_width'</span>:<span class="number">32</span>, <span class="string">'overlay_height'</span>:<span class="number">7</span>&#125;</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMaeP.jpg" alt="NtMaeP.jpg"><br><a name="cxS2V"></a></p><h3 id="魔改"><a class="header-anchor" href="#魔改"></a>魔改</h3><p>左右各一个list:<br />将pile 放入column中</p><p><img src="https://s1.ax1x.com/2020/06/23/NtMBFS.png" alt="NtMBFS.png"></p><p>把pop-2 的 51,52行改成</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pile = urwid.Pile(body_A)</span><br><span class="line">col = urwid.Columns([pile,urwid.Text(<span class="string">"│"</span>),(<span class="string">'fixed'</span>,<span class="number">14</span>,pile)])</span><br><span class="line">fill = urwid.Filler(col)</span><br></pre></td></tr></table></figure></div><p><a name="KcNTC"></a></p><h2 id="bigtext-py"><a class="header-anchor" href="#bigtext-py"></a><a href="http://bigtext.py" target="_blank" rel="noopener">bigtext.py</a></h2><p>非常靓的一个<br><img src="https://s1.ax1x.com/2020/06/23/NtMddf.jpg" alt="NtMddf.jpg"><br><br />排版区</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create chars_avail</span></span><br><span class="line">cah = urwid.Text(<span class="string">"Characters Available:"</span>)</span><br><span class="line">self.chars_avail = urwid.Text(<span class="string">""</span>, wrap=<span class="string">'any'</span>)</span><br><span class="line">ca = urwid.AttrWrap(self.chars_avail, <span class="string">'chars'</span>)</span><br><span class="line"></span><br><span class="line">chosen_font_rb.set_state(<span class="literal">True</span>) <span class="comment"># causes set_font_event call</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create Edit widget</span></span><br><span class="line">edit = self.create_edit(<span class="string">""</span>, <span class="string">"Urwid "</span>+urwid.__version__,</span><br><span class="line">    self.edit_change_event)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ListBox</span></span><br><span class="line">chars = urwid.Pile([cah, ca])</span><br><span class="line">fonts = urwid.Pile([urwid.Text(<span class="string">"Fonts:"</span>)] + self.font_buttons,</span><br><span class="line">    focus_item=<span class="number">1</span>)</span><br><span class="line">col = urwid.Columns([fonts,(<span class="string">'fixed'</span>,<span class="number">16</span>,chars)], <span class="number">3</span>,</span><br><span class="line">    focus_column=<span class="number">1</span>)</span><br><span class="line">bt = urwid.Pile([bt, edit], focus_item=<span class="number">1</span>)</span><br><span class="line">l = [bt, urwid.Divider(), col]</span><br><span class="line">w = urwid.ListBox(urwid.SimpleListWalker(l))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Frame</span></span><br><span class="line">w = urwid.AttrWrap(w, <span class="string">'body'</span>)</span><br><span class="line">hdr = urwid.Text(<span class="string">"Urwid BigText example program - F8 exits."</span>)</span><br><span class="line">hdr = urwid.AttrWrap(hdr, <span class="string">'header'</span>)</span><br><span class="line">w = urwid.Frame(header=hdr, body=w)</span><br></pre></td></tr></table></figure></div><p><br />Frame 排版结构<br><img src="https://i.loli.net/2020/06/23/tk3gvZMIBqoPfmH.png" alt="124.png"><br>继续魔改. 首先发现一个bug, 虽然说按F8 退出, 但是按完以后, 只出来一个 pop window, 写着quit, 然后, 就没有然后了. 所以我们先来加一个Esc 按钮吧~ (以后再说)<br /><br><br /></p><p><a name="QvFMc"></a></p><h2 id="Refresh"><a class="header-anchor" href="#Refresh"></a>Refresh</h2><p>Eample</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">https://github.com/bavanduong/urwid-example/blob/master/clock.py</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keypress</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">            <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup_view</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.clock_txt = urwid.BigText(</span><br><span class="line">            time.strftime(<span class="string">'%H:%M:%S'</span>), urwid.font.HalfBlock5x4Font())</span><br><span class="line">        self.view = urwid.Padding(self.clock_txt, <span class="string">'center'</span>, width=<span class="string">'clip'</span>)</span><br><span class="line">        self.view = urwid.AttrMap(self.view, <span class="string">'body'</span>)</span><br><span class="line">        self.view = urwid.Filler(self.view, <span class="string">'middle'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.setup_view()</span><br><span class="line">        loop = urwid.MainLoop(</span><br><span class="line">            self.view, palette=[(<span class="string">'body'</span>, <span class="string">'dark cyan'</span>, <span class="string">''</span>)],</span><br><span class="line">            unhandled_input=self.keypress)</span><br><span class="line">        loop.set_alarm_in(<span class="number">1</span>, self.refresh)</span><br><span class="line">        loop.run()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">refresh</span><span class="params">(self, loop=None, data=None)</span>:</span></span><br><span class="line">        self.setup_view()</span><br><span class="line">        loop.widget = self.view</span><br><span class="line">        loop.set_alarm_in(<span class="number">1</span>, self.refresh)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    clock = Clock()</span><br><span class="line">    sys.exit(clock.main())</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtMWwV.png" alt="NtMWwV.png"></p><p><a name="e5hwH"></a></p><h1>實戰</h1><p><a name="lttQ1"></a></p><h2 id="Todolist"><a class="header-anchor" href="#Todolist"></a><a href="https://www.yuque.com/liuwenkan/blog/urwid_todolist" target="_blank" rel="noopener">Todolist</a></h2><p><img src="https://s1.ax1x.com/2020/06/23/NtM4FU.gif" alt="NtM4FU.gif"></p><p><a name="ATtSJ"></a></p><h2 id="Bilibili-信息板"><a class="header-anchor" href="#Bilibili-信息板"></a><a href="https://www.yuque.com/liuwenkan/blog/suxiv3" target="_blank" rel="noopener">Bilibili 信息板</a></h2><p><img src="https://s1.ax1x.com/2020/06/23/NtMfoT.png" alt="NtMfoT.png"></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/Python/yuque.json"/>
      <url>/Python/yuque.json</url>
      
        <content type="html"><![CDATA[{"repo":"liuwenkan/python","pattern":"**/*.md"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>pynput --Moniter your keybaord</title>
      <link href="/Python/pynput.html"/>
      <url>/Python/pynput.html</url>
      
        <content type="html"><![CDATA[<h1 id="pynput-–Moniter-your-keybaord"><a href="#pynput-–Moniter-your-keybaord" class="headerlink" title="pynput –Moniter your keybaord"></a>pynput –Moniter your keybaord</h1><p><a name="kC35U"></a></p><h1 id="1-Mouse"><a href="#1-Mouse" class="headerlink" title="1. Mouse"></a>1. Mouse</h1><p><a name="gxkG3"></a></p><h2 id="1-1-Mouse-Controller"><a href="#1-1-Mouse-Controller" class="headerlink" title="1.1 Mouse Controller"></a>1.1 Mouse Controller</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> pynput.mouse <span class="keyword">import</span> Button, Controller</span><br><span class="line"></span><br><span class="line">mouse = Controller()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Read pointer position</span></span><br><span class="line">print(<span class="string">'The current pointer position is &#123;0&#125;'</span>.format(</span><br><span class="line">    mouse.position))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Set pointer position</span></span><br><span class="line">mouse.position = (<span class="number">10</span>, <span class="number">20</span>)</span><br><span class="line">print(<span class="string">'Now we have moved it to &#123;0&#125;'</span>.format(mouse.position))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Move pointer relative to current position</span></span><br><span class="line">mouse.move(<span class="number">5</span>, <span class="number">-5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Press and release</span></span><br><span class="line">mouse.press(Button.left)</span><br><span class="line">mouse.release(Button.left)</span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    mouse.press(Button.left)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Double click; this is different from pressing and releasing</span></span><br><span class="line"><span class="comment"># twice on Mac OSX</span></span><br><span class="line">mouse.click(Button.left, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Scroll two steps down</span></span><br><span class="line">mouse.scroll(<span class="number">0</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><p><a name="CYpoY"></a></p><h2 id="1-2-Mouse-Monitor"><a href="#1-2-Mouse-Monitor" class="headerlink" title="1.2 Mouse Monitor"></a>1.2 Mouse Monitor</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#监控鼠标事件</span></span><br><span class="line"><span class="keyword">from</span> pynput <span class="keyword">import</span> mouse</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_move</span><span class="params">(x, y )</span>:</span></span><br><span class="line">    print(<span class="string">'Pointer moved to &#123;o&#125;'</span>.format(</span><br><span class="line">        (x,y)))</span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_click</span><span class="params">(x, y , button, pressed)</span>:</span></span><br><span class="line">    print(<span class="string">'&#123;0&#125; at &#123;1&#125;'</span>.format(<span class="string">'Pressed'</span> <span class="keyword">if</span> pressed <span class="keyword">else</span> <span class="string">'Released'</span>, (x, y)))</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">not</span> pressed:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_scroll</span><span class="params">(x, y ,dx, dy)</span>:</span></span><br><span class="line">    print(<span class="string">'scrolled &#123;0&#125; at &#123;1&#125;'</span>.format(</span><br><span class="line">        <span class="string">'down'</span> <span class="keyword">if</span> dy &lt; <span class="number">0</span> <span class="keyword">else</span> <span class="string">'up'</span>,</span><br><span class="line">        (x, y)))</span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">with</span> mouse.Listener( no_move = on_move,on_click = on_click,on_scroll = on_scroll) <span class="keyword">as</span> listener:</span><br><span class="line">        listener.join()</span><br></pre></td></tr></table></figure></div><p><a name="4QKL2"></a></p><h1 id="2-Keybaord"><a href="#2-Keybaord" class="headerlink" title="2. Keybaord"></a>2. Keybaord</h1><p><a name="CEgBC"></a></p><h2 id="2-1-Keyboard-Controller"><a href="#2-1-Keyboard-Controller" class="headerlink" title="2.1 Keyboard Controller"></a>2.1 Keyboard Controller</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#键盘输入用法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pynput.keyboard <span class="keyword">import</span> Key, Controller</span><br><span class="line"></span><br><span class="line">keyboard = Controller()</span><br><span class="line"></span><br><span class="line"><span class="comment">#Press and release space</span></span><br><span class="line">keyboard.press(Key.space)</span><br><span class="line">keyboard.release(Key.space)</span><br><span class="line"></span><br><span class="line">keyboard.press(Key.left)</span><br><span class="line">keyboard.release(Key.left)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Type a lower case A ;this will work even if no key on the physical keyboard  is labelled 'A'</span></span><br><span class="line">keyboard.press(<span class="string">'a'</span>)</span><br><span class="line">keyboard.release(<span class="string">'a'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Type two  upper case As</span></span><br><span class="line">keyboard.press(<span class="string">'A'</span>)</span><br><span class="line">keyboard.release(<span class="string">'A'</span>)</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"><span class="keyword">with</span> keyboard .pressed(Key.shift):</span><br><span class="line">    keyboard.press(<span class="string">'a'</span>)</span><br><span class="line">    keyboard.release(<span class="string">'a'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#type 'hello world '  using the shortcut type  method</span></span><br><span class="line">keyboard.type(<span class="string">'hello world'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="k1b09"></a></p><h2 id="2-2-Keyboard-Monitor"><a href="#2-2-Keyboard-Monitor" class="headerlink" title="2.2 Keyboard Monitor"></a>2.2 Keyboard Monitor</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#键盘监听</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pynput <span class="keyword">import</span> keyboard</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_press</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        print(<span class="string">'alphanumeric key  &#123;0&#125; pressed'</span>.format(key.char))</span><br><span class="line">    <span class="keyword">except</span> AttributeError:</span><br><span class="line">        print(<span class="string">'special key &#123;0&#125; pressed'</span>.format(key))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_release</span><span class="params">(key)</span>:</span></span><br><span class="line">    print(<span class="string">'&#123;0&#125; released'</span>.format(key))</span><br><span class="line">    <span class="keyword">if</span> key == keyboard.Key.esc:</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    <span class="keyword">with</span> keyboard.Listener(</span><br><span class="line">        on_press = on_press,</span><br><span class="line">        on_release = on_release) <span class="keyword">as</span> listener:</span><br><span class="line">        listener.join()</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>popmail-Python 登录邮箱</title>
      <link href="/Python/popmail.html"/>
      <url>/Python/popmail.html</url>
      
        <content type="html"><![CDATA[<h1 id="popmail-Python-登录邮箱"><a href="#popmail-Python-登录邮箱" class="headerlink" title="popmail-Python 登录邮箱"></a>popmail-Python 登录邮箱</h1><p><a name="LwItF"></a></p><h1 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h1><p>以ＱＱ邮箱为例</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> poplib</span><br><span class="line"></span><br><span class="line"><span class="comment"># 输入邮件地址, 口令和POP3服务器地址:</span></span><br><span class="line">email = <span class="string">'591465908@qq.com'</span></span><br><span class="line">password = input(<span class="string">'Password: '</span>) <span class="comment">#这里是授权码，必须去申请</span></span><br><span class="line">pop3_server = <span class="string">'pop.qq.com'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 连接到POP3服务器:</span></span><br><span class="line">server = poplib.POP3(pop3_server)</span><br><span class="line"><span class="comment"># 可以打开或关闭调试信息:</span></span><br><span class="line">server.set_debuglevel(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># 可选:打印POP3服务器的欢迎文字:</span></span><br><span class="line">print(server.getwelcome().decode(<span class="string">'utf-8'</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 身份认证:</span></span><br><span class="line">server.user(email)</span><br><span class="line">server.pass_(password)</span><br></pre></td></tr></table></figure></div><p>授权码申请：<a href="https://service.mail.qq.com/cgi-bin/help?subtype=1&&id=28&&no=1001256" target="_blank" rel="noopener">https://service.mail.qq.com/cgi-bin/help?subtype=1&amp;&amp;id=28&amp;&amp;no=1001256</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">server.set_debuglevel(<span class="number">1</span>)</span><br><span class="line"><span class="comment"># debug 信息， 会打印出账号和密码， 不建议使用</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">server.apop(            server.noop(            server.stat(</span><br><span class="line">server.capa(            server.pass_(           server.stls(</span><br><span class="line">server.close(           server.port             server.timestamp</span><br><span class="line">server.dele(            server.quit(            server.top(</span><br><span class="line">server.encoding         server.retr(            server.uidl(</span><br><span class="line">server.file             server.rpop(            server.user(</span><br><span class="line">server.getwelcome(      server.rset(            server.utf8(</span><br><span class="line">server.host             server.set_debuglevel(  server.welcome</span><br><span class="line">server.list(            server.sock</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>R base</title>
      <link href="/R/Base-and-tricks.html"/>
      <url>/R/Base-and-tricks.html</url>
      
        <content type="html"><![CDATA[<h1>Base and tricks</h1><p><a name="osNch"></a></p><h1>Packages Install</h1><ul><li>Install from CRAN</li></ul><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"ggplot2"</span>,<span class="string">"repos"</span> = c(CRAN=<span class="string">"https://mirrors.tuna.tsinghua.edu.cn/CRAN/"</span>))</span><br></pre></td></tr></table></figure></div><ul><li>Install from local fille</li></ul><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"/data/data/com.termux/files/home/ggradar"</span>,repos = <span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure></div><h2 id="Mirrors"><a class="header-anchor" href="#Mirrors"></a>Mirrors</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># options函数就是设置R运行过程中的一些选项设置</span></span><br><span class="line">options(<span class="string">"repos"</span> = c(CRAN=<span class="string">"https://mirrors.tuna.tsinghua.edu.cn/CRAN/"</span>))</span><br><span class="line"><span class="comment"># Bioconductor</span></span><br><span class="line">options(BioC_mirror=<span class="string">"https://mirrors.tuna.tsinghua.edu.cn/bioconductor"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="Bg1g4"></a></p><h2 id="Reading-from-Excel"><a class="header-anchor" href="#Reading-from-Excel"></a>Reading from Excel</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"readxl"</span>)</span><br><span class="line">A &lt;- read_excel(<span class="string">"Table.xlsx"</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(tidyr)</span><br><span class="line"><span class="keyword">library</span>(dplyr)</span><br><span class="line">df &lt;- data.frame(x = c(<span class="literal">NA</span>, <span class="string">"a.b"</span>, <span class="string">"a.d"</span>, <span class="string">"b.c"</span>,<span class="string">"a-b"</span>))</span><br><span class="line">df %&gt;% separate(x, c(<span class="string">"A"</span>, <span class="string">"B"</span>),<span class="string">'-'</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Base &lt;- data.frame(Nodes =c("P1", "P1", "P1", "P2"), Targets=c("P2","P3","P4","P1"))</span></span><br><span class="line"><span class="string">List &lt;- c("P1", "P2", "P3")</span></span><br><span class="line"><span class="string">Base &lt;- read.table("DataBase/Mybase/AB_List")</span></span><br><span class="line"><span class="string">List &lt;- read.table("")[[1]]</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Result without Annotation</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line">addPercent &lt;- <span class="keyword">function</span>(x)&#123;</span><br><span class="line">percent &lt;- round(x * <span class="number">100</span>, digits = <span class="number">1</span>)</span><br><span class="line">result &lt;- paste(percent, <span class="string">"%"</span>, sep = <span class="string">""</span>)</span><br><span class="line"><span class="keyword">return</span>(result)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(tidyr)</span><br><span class="line"><span class="keyword">library</span>(dplyr)</span><br><span class="line">A &lt;- Base</span><br><span class="line">A &lt;- A[which(match(A[[<span class="number">1</span>]],List)!=<span class="string">"NA"</span>),]</span><br><span class="line">A &lt;- A[which(match(A[[<span class="number">2</span>]],List)!=<span class="string">"NA"</span>),]</span><br><span class="line">AVBA = paste(A[[<span class="number">2</span>]],<span class="string">"_"</span>,A[[<span class="number">1</span>]],sep=<span class="string">''</span>)</span><br><span class="line">List = c(AVBA)</span><br><span class="line">List = data.frame(X=List[duplicated(List)])</span><br><span class="line">List = List %&gt;% separate(X, c(<span class="string">"A"</span>, <span class="string">"B"</span>),<span class="string">'_'</span>)</span><br><span class="line">ListVBA = paste(List[[<span class="number">2</span>]],<span class="string">"_"</span>,List[[<span class="number">1</span>]],sep=<span class="string">''</span>)</span><br><span class="line">remove Lift == right</span><br><span class="line">List = List[-which(match(ListVBA)-c(<span class="number">1</span>: nrow(List))==<span class="number">0</span>),]</span><br><span class="line">List = List[match(ListVBA)-c(<span class="number">1</span>: nrow(List))&gt;<span class="number">0</span>,]</span><br><span class="line">A = A[-na.omit(match(ListVAB)),]</span><br><span class="line">write.table(data.frame(A[<span class="number">1</span>:<span class="number">2</span>]),<span class="string">"Output"</span>,sep=<span class="string">'\t'</span>,quote=<span class="literal">F</span>,col.names=<span class="literal">F</span>,row.names=<span class="literal">F</span>)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">for delete duplicates and combind rest of colums</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line">RM_du &lt;-<span class="keyword">function</span>(A)&#123;</span><br><span class="line">AVBA = paste(A[[<span class="number">2</span>]],<span class="string">"_"</span>,A[[<span class="number">1</span>]],sep=<span class="string">''</span>)</span><br><span class="line"><span class="comment">#</span></span><br><span class="line">Num=<span class="number">0</span></span><br><span class="line">Num= Num+<span class="number">1</span></span><br><span class="line"><span class="comment"># Get the Duplicate list</span></span><br><span class="line">i = unique(AVAB == AVBA == AVAB)[-<span class="number">1</span>])&#123;</span><br><span class="line">Num= Num+<span class="number">1</span></span><br><span class="line"><span class="comment"># Get the Duplicate list</span></span><br><span class="line">List1 = which(AVAB[<span class="number">1</span>])</span><br><span class="line">List1 = c(List1,which(AVAB[<span class="number">1</span>]))</span><br><span class="line">TMP = A[List1,]</span><br><span class="line">TMP_R = data.frame(TMP[<span class="number">1</span>,<span class="number">1</span>:<span class="number">2</span>],V3 = paste(unique(as.character(TMP[,<span class="number">3</span>])), collapse=<span class="string">'|'</span>))</span><br><span class="line">Result = rbind(Result,TMP_R)</span><br><span class="line">A = A[-List1,]</span><br><span class="line">print(Num)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">return</span>(Result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">install package from <span class="keyword">source</span></span><br><span class="line">install.packages(<span class="string">"/data/data/com.termux/files/home/ggradar"</span>,repos = <span class="literal">NULL</span>)</span><br><span class="line"><span class="keyword">function</span></span><br><span class="line">myfunction &lt;- <span class="keyword">function</span>(arg1, arg2, <span class="keyword">...</span> )&#123;</span><br><span class="line">statements</span><br><span class="line"><span class="keyword">return</span>(object)</span><br><span class="line">&#125;</span><br><span class="line">remove all variable</span><br><span class="line">rm(list = setdiff(ls(), lsf.str()))</span><br><span class="line">calculate <span class="string">"spend"</span>  by Type</span><br><span class="line">A_radar = with(A[c(<span class="number">6</span>,<span class="number">3</span>)], tapply(spend, list(Type), sum))</span><br><span class="line">match</span><br><span class="line">c(<span class="string">'aa'</span>,<span class="string">'ab'</span>,<span class="string">'c'</span>) %<span class="keyword">in</span>% c(<span class="string">'aa'</span>,<span class="string">'c'</span>)</span><br><span class="line"><span class="comment">##system.time()</span></span><br><span class="line">I = <span class="number">0</span></span><br><span class="line">system.time(<span class="keyword">for</span>(i <span class="keyword">in</span> (<span class="number">1</span>:<span class="number">1000000000</span>))&#123;I = I + i&#125;)</span><br><span class="line">T1&lt;- Sys.time()</span><br><span class="line">ggplot() + geom_bar(aes(x=A,y=B),stat=<span class="string">'identity'</span>)</span><br><span class="line">T2&lt;- Sys.time()</span><br><span class="line">T2 - T1</span><br><span class="line">Time_A = time.time()</span><br><span class="line">plt.bar(A, B)</span><br><span class="line">plt.show()</span><br><span class="line">Time = time.time() - Time_A</span><br><span class="line">print(Time)</span><br><span class="line">logarithms</span><br><span class="line">exp(value)</span><br><span class="line">Split a column</span><br><span class="line"><span class="keyword">library</span>(stringr)</span><br><span class="line">str_split_fixed(before$type, <span class="string">"and"</span>, <span class="number">2</span>)</span><br><span class="line">Batter than cbind &amp; rbind</span><br><span class="line">https://www.jianshu.com/p/a3277f29ed46</span><br><span class="line"><span class="keyword">library</span>(dplyr)</span><br><span class="line">dplyr::bind_rows(data1,data2)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">namea value  nameb</span></span><br><span class="line"><span class="string">1  海波  一波   </span></span><br><span class="line"><span class="string">2  立波    接   </span></span><br><span class="line"><span class="string">3  秀波  一波   </span></span><br><span class="line"><span class="string">4    东去 柯震东</span></span><br><span class="line"><span class="string">5      又 刘强东</span></span><br><span class="line"><span class="string">6    东来 何盛东</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"><span class="comment">##weekdays</span></span><br><span class="line">weekdays(as.Date(<span class="string">'2018-3-1'</span>))</span><br></pre></td></tr></table></figure></div><h1>Function</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Shrink &lt;-  <span class="keyword">function</span>(Data, P)&#123;</span><br><span class="line">  Num = round(nrow(world)/P)</span><br><span class="line">  Data = Data[c(<span class="number">1</span>:Num)*P,]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">world &lt;- map_data(<span class="string">"world"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/Q68bCHiSALvYGNO.png" alt="123"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Biostrings</title>
      <link href="/R/Biostrings.html"/>
      <url>/R/Biostrings.html</url>
      
        <content type="html"><![CDATA[<h1>Biostrings</h1><p>source(“<a href="http://bioconductor.org/biocLite.R" target="_blank" rel="noopener">http://bioconductor.org/biocLite.R</a>”)<br /></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install</span></span><br><span class="line">BiocManager::install(<span class="string">'Biostrings'</span>)</span><br></pre></td></tr></table></figure></div><h1>Quick Start</h1><p><a href="https://www.yuque.com/attachments/yuque/0/2020/txt/691897/1579800839293-b28e0f1a-1088-4c56-ba2a-1a910f827db0.txt?_lake_card=%7B%22uid%22%3A%221579800839229-0%22%2C%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2020%2Ftxt%2F691897%2F1579800839293-b28e0f1a-1088-4c56-ba2a-1a910f827db0.txt%22%2C%22name%22%3A%22test.txt%22%2C%22size%22%3A6581%2C%22type%22%3A%22text%2Fplain%22%2C%22ext%22%3A%22txt%22%2C%22progress%22%3A%7B%22percent%22%3A99%7D%2C%22status%22%3A%22done%22%2C%22percent%22%3A0%2C%22id%22%3A%22umG5T%22%2C%22card%22%3A%22file%22%7D" target="_blank" rel="noopener">test.txt</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(Biostrings)</span><br><span class="line">s = readDNAStringSet(<span class="string">"test.txt"</span>)</span><br><span class="line"></span><br><span class="line">length(s) <span class="comment">#Numbers of seq</span></span><br><span class="line">nchar(s)  <span class="comment">#length of each seq</span></span><br><span class="line">reverse(s)</span><br><span class="line">translate(s)</span><br><span class="line">dna2rna(s)</span><br><span class="line">cDNA(dna2rna(s))</span><br><span class="line">tolower(s)  <span class="comment"># = = I don't know</span></span><br><span class="line">letterFrequency(s, DNA_BASES)  <span class="comment"># Frq with A,T,G,C</span></span><br><span class="line">letterFrequency(s, DNA_ALPHABET)  <span class="comment"># Frq with A, C, G, T, M, R, W, S, Y, K, V, H, D, B, N, -, +, .</span></span><br><span class="line">letterFrequency(s, DNA_BASES, as.prob = <span class="literal">TRUE</span>) <span class="comment"># Frq with A T G C</span></span><br><span class="line">letterFrequency(s, <span class="string">"GC"</span>, as.prob = <span class="literal">TRUE</span>) <span class="comment"># Frq with GC</span></span><br></pre></td></tr></table></figure></div><h1>1. Fasta Calculate</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(Biostrings)</span><br><span class="line"><span class="comment"># Reading a fasta file</span></span><br><span class="line">A &lt;-readDNAStringSet(<span class="string">'predict.coding.fa.transdecoder.pep.sel.fa'</span>)</span><br><span class="line">head(DNAStringSet(A))</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">  width seq names               </span><br><span class="line">[1]   604 ASSVASTASSAHHHASAASTGTV...  TRINITY_DN100000_...</span><br><span class="line">[2]   616 MDYMDSGRYTKSDKDWDTNVASD...  TRINITY_DN100001_...</span><br><span class="line">[3]   157 SRAKKVKKDSKKGGGGGGGGSSW...  TRINITY_DN100002_...</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Correlation</title>
      <link href="/R/Correlation.html"/>
      <url>/R/Correlation.html</url>
      
        <content type="html"><![CDATA[<h1>Correlation</h1><p><a href="https://imgchr.com/i/NguwK1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/28/NguwK1.png" alt="NguwK1.png"></a></p><p><a name="2x5Oh"></a></p><h1>CORRELATION ELLIPSES</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ellipse)</span><br><span class="line"><span class="keyword">library</span>(RColorBrewer)</span><br><span class="line"></span><br><span class="line">data=cor(mtcars)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Build a Pannel of 100 colors with Rcolor Brewer</span></span><br><span class="line">my_colors &lt;- brewer.pal(<span class="number">5</span>, <span class="string">"Spectral"</span>)</span><br><span class="line">my_colors=colorRampPalette(my_colors)(<span class="number">100</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Order the correlation matrix</span></span><br><span class="line">ord &lt;- order(data[<span class="number">1</span>, ])</span><br><span class="line">data_ord = data[ord, ord]</span><br><span class="line">plotcorr(data_ord , col=my_colors[data_ord*<span class="number">50</span>+<span class="number">50</span>] , mar=c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure></div><p><a name="IL1P4"></a></p><h2 id="BASIC-SCATTERPLOT-MATRIX"><a class="header-anchor" href="#BASIC-SCATTERPLOT-MATRIX"></a>BASIC SCATTERPLOT MATRIX</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">data=mtcars[ , c(<span class="number">1</span>,<span class="number">3</span>:<span class="number">6</span>)]</span><br><span class="line"><span class="comment">#Make the plot</span></span><br><span class="line">plot(data , pch=<span class="number">20</span> , cex=<span class="number">1.5</span> , col=rgb(<span class="number">0.5</span>, <span class="number">0.8</span>, <span class="number">0.9</span>, <span class="number">0.7</span>))</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NguU29" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/28/NguU29.png" alt="NguU29.png"></a><br><a name="EjKBE"></a></p><h2 id="SCATTERPLOT-MATRIX-–-CAR-PACKAGE"><a class="header-anchor" href="#SCATTERPLOT-MATRIX-–-CAR-PACKAGE"></a>SCATTERPLOT MATRIX – CAR PACKAGE</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(car)</span><br><span class="line"><span class="keyword">library</span>(RColorBrewer)</span><br><span class="line"><span class="comment">#Let's use the car dataset proposed by R</span></span><br><span class="line"></span><br><span class="line">data=mtcars</span><br><span class="line">my_colors &lt;- brewer.pal(nlevels(as.factor(data$cyl)), <span class="string">"Set2"</span>)</span><br><span class="line">scatterplotMatrix(~mpg+disp+drat|cyl, data=data , reg.line=<span class="string">""</span> ,</span><br><span class="line">  smoother=<span class="string">""</span>, col=my_colors , smoother.args=list(col=<span class="string">"grey"</span>) ,</span><br><span class="line">  cex=<span class="number">1.5</span> , pch=c(<span class="number">15</span>,<span class="number">16</span>,<span class="number">17</span>) , main=<span class="string">"Scatter plot with Three Cylinder Options"</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NguN8J" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/28/NguN8J.png" alt="NguN8J.png"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(GGally)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create data</span></span><br><span class="line">sample_data &lt;- data.frame( v1 = <span class="number">1</span>:<span class="number">100</span> + rnorm(<span class="number">100</span>,sd=<span class="number">20</span>), v2 = <span class="number">1</span>:<span class="number">100</span> + rnorm(<span class="number">100</span>,sd=<span class="number">27</span>), v3 = rep(<span class="number">1</span>, <span class="number">100</span>) + rnorm(<span class="number">100</span>, sd = <span class="number">1</span>))</span><br><span class="line">sample_data$v4 = sample_data$v1 ** <span class="number">2</span></span><br><span class="line">sample_data$v5 = -(sample_data$v1 ** <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Check correlation between variables</span></span><br><span class="line">cor(sample_data)</span><br><span class="line"><span class="comment"># Check correlations (as scatterplots), distribution and print corrleation coefficient</span></span><br><span class="line">ggpairs(sample_data)  <span class="comment"># image left</span></span><br><span class="line">ggcorr(sample_data, method = c(<span class="string">"everything"</span>, <span class="string">"pearson"</span>))  <span class="comment"># image right</span></span><br></pre></td></tr></table></figure></div><table><thead><tr><th><a href="https://imgchr.com/i/NguavR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/28/NguavR.png" alt="NguavR.png"></a></th><th><a href="https://imgchr.com/i/NgutC4" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/28/NgutC4.png" alt="NgutC4.png"></a></th></tr></thead><tbody></tbody></table><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Data cleaning</title>
      <link href="/R/Data-cleaning.html"/>
      <url>/R/Data-cleaning.html</url>
      
        <content type="html"><![CDATA[<h1 id="Data-cleaning"><a href="#Data-cleaning" class="headerlink" title="Data cleaning"></a>Data cleaning</h1><h1 id="Date"><a href="#Date" class="headerlink" title="Date"></a>Date</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">as.Date(<span class="string">"Aug_24_2019"</span>,  <span class="string">"%B_%d_%Y"</span>)</span><br><span class="line">as.Date(<span class="string">"08_24_2019"</span>, <span class="string">"%m_%d_%y"</span>)</span><br><span class="line">as.Date(<span class="string">"08月24日2019年"</span>, <span class="string">"%m月%d日%y年"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="8T9kT"></a></p><h1 id="Split-column-by-str"><a href="#Split-column-by-str" class="headerlink" title="Split column by str"></a>Split column by str</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Split a column</span></span><br><span class="line"><span class="keyword">library</span>(stringr)</span><br><span class="line">str_split_fixed(before$type, <span class="string">"_and_"</span>, <span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">r$&gt; print(TB)                                       </span><br><span class="line">        Date Words Words_Wrong  MisRate MisRateT</span><br><span class="line"><span class="number">1</span> <span class="number">2020</span>-<span class="number">08</span>-<span class="number">24</span>   <span class="number">525</span>         <span class="number">165</span> <span class="number">1559.486</span>   <span class="number">31.43</span>%</span><br><span class="line"><span class="number">2</span> <span class="number">2020</span>-<span class="number">08</span>-<span class="number">25</span>   <span class="number">449</span>         <span class="number">138</span> <span class="number">1525.069</span>   <span class="number">30.73</span>%</span><br><span class="line"><span class="number">3</span> <span class="number">2020</span>-<span class="number">08</span>-<span class="number">27</span>   <span class="number">338</span>          <span class="number">96</span> <span class="number">1409.325</span>    <span class="number">28.4</span>%</span><br><span class="line"><span class="number">4</span> <span class="number">2020</span>-<span class="number">08</span>-<span class="number">28</span>   <span class="number">446</span>         <span class="number">131</span> <span class="number">1457.448</span>   <span class="number">29.37</span>%</span><br><span class="line"><span class="number">5</span> <span class="number">2020</span>-<span class="number">08</span>-<span class="number">29</span>   <span class="number">423</span>         <span class="number">102</span> <span class="number">1196.511</span>   <span class="number">24.11</span>%</span><br><span class="line"><span class="number">6</span> <span class="number">2020</span>-<span class="number">08</span>-<span class="number">30</span>   <span class="number">368</span>         <span class="number">104</span> <span class="number">1402.304</span>   <span class="number">28.26</span>%</span><br><span class="line"></span><br><span class="line">r$&gt; str_split_fixed(TB$Date, <span class="string">"-"</span>, <span class="number">2</span>)               </span><br><span class="line">     [,<span class="number">1</span>]   [,<span class="number">2</span>]   </span><br><span class="line">[<span class="number">1</span>,] <span class="string">"2020"</span> <span class="string">"08-24"</span></span><br><span class="line">[<span class="number">2</span>,] <span class="string">"2020"</span> <span class="string">"08-25"</span></span><br><span class="line">[<span class="number">3</span>,] <span class="string">"2020"</span> <span class="string">"08-27"</span></span><br><span class="line">[<span class="number">4</span>,] <span class="string">"2020"</span> <span class="string">"08-28"</span></span><br><span class="line">[<span class="number">5</span>,] <span class="string">"2020"</span> <span class="string">"08-29"</span></span><br><span class="line">[<span class="number">6</span>,] <span class="string">"2020"</span> <span class="string">"08-30"</span></span><br></pre></td></tr></table></figure></div><h1 id="reshape2"><a href="#reshape2" class="headerlink" title="reshape2"></a>reshape2</h1><p>Raw matrix:<code>head(longImage)</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  Var1 Var2 Var3     value</span><br><span class="line"><span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span> <span class="number">1.0000000</span></span><br><span class="line"><span class="number">2</span>    <span class="number">2</span>    <span class="number">1</span>    <span class="number">1</span> <span class="number">0.9921569</span></span><br><span class="line"><span class="number">3</span>    <span class="number">3</span>    <span class="number">1</span>    <span class="number">1</span> <span class="number">0.9882353</span></span><br><span class="line"><span class="number">4</span>    <span class="number">4</span>    <span class="number">1</span>    <span class="number">1</span> <span class="number">0.9725490</span></span><br><span class="line"><span class="number">5</span>    <span class="number">5</span>    <span class="number">1</span>    <span class="number">1</span> <span class="number">0.9686275</span></span><br><span class="line"><span class="number">6</span>    <span class="number">6</span>    <span class="number">1</span>    <span class="number">1</span> <span class="number">0.9803922</span></span><br></pre></td></tr></table></figure></div><p>Reshape</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reshape(longImage, timevar=<span class="string">'Var3'</span>,idvar=c(<span class="string">'Var1'</span>,<span class="string">'Var2'</span>), direction=<span class="string">'wide'</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">  Var1 Var2   value.1   value.2   value.3</span><br><span class="line"><span class="number">1</span>    <span class="number">1</span>    <span class="number">1</span> <span class="number">1.0000000</span> <span class="number">0.9960784</span> <span class="number">1.0000000</span></span><br><span class="line"><span class="number">2</span>    <span class="number">2</span>    <span class="number">1</span> <span class="number">0.9921569</span> <span class="number">0.9921569</span> <span class="number">1.0000000</span></span><br><span class="line"><span class="number">3</span>    <span class="number">3</span>    <span class="number">1</span> <span class="number">0.9882353</span> <span class="number">1.0000000</span> <span class="number">1.0000000</span></span><br><span class="line"><span class="number">4</span>    <span class="number">4</span>    <span class="number">1</span> <span class="number">0.9725490</span> <span class="number">0.9960784</span> <span class="number">0.9960784</span></span><br><span class="line"><span class="number">5</span>    <span class="number">5</span>    <span class="number">1</span> <span class="number">0.9686275</span> <span class="number">1.0000000</span> <span class="number">1.0000000</span></span><br><span class="line"><span class="number">6</span>    <span class="number">6</span>    <span class="number">1</span> <span class="number">0.9803922</span> <span class="number">1.0000000</span> <span class="number">1.0000000</span></span><br></pre></td></tr></table></figure></div><h1 id="R-dplyr"><a href="#R-dplyr" class="headerlink" title="R-dplyr"></a>R-dplyr</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(tidyr)&lt;br /&gt;</span><br><span class="line"><span class="keyword">library</span>(dplyr)</span><br><span class="line"></span><br><span class="line">df &lt;- data.frame(x = c(<span class="literal">NA</span>, <span class="string">"a.b"</span>, <span class="string">"a.d"</span>, <span class="string">"b.c"</span>,<span class="string">"a-b"</span>))&lt;br /&gt;</span><br><span class="line">df %&gt;% separate(x, c(<span class="string">"A"</span>, <span class="string">"B"</span>),<span class="string">'-'</span>)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Data normalization</title>
      <link href="/R/Data-normalization.html"/>
      <url>/R/Data-normalization.html</url>
      
        <content type="html"><![CDATA[<h1 id="Data-normalization"><a href="#Data-normalization" class="headerlink" title="Data normalization"></a>Data normalization</h1><p><a name="Y4znF"></a></p><h1 id="Normalization"><a href="#Normalization" class="headerlink" title="Normalization"></a>Normalization</h1><p><a name="CMtTL"></a></p><h2 id="1-Max-Min"><a href="#1-Max-Min" class="headerlink" title="1 Max-Min"></a>1 Max-Min</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(ii <span class="keyword">in</span> <span class="number">1</span>:ncol(a))</span><br><span class="line">&#123;a[,ii] &lt;- (a[,ii]-min(a[,ii]))/(max(a[,ii])-min(a[,ii]))&#125;</span><br></pre></td></tr></table></figure></div><p><a name="G1R41"></a></p><h2 id="2-z-score"><a href="#2-z-score" class="headerlink" title="2 z-score"></a>2 z-score</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(ii <span class="keyword">in</span> <span class="number">1</span>:ncol(a))</span><br><span class="line">&#123;a[,ii] &lt;- (a[,ii]-mean(a[,ii]))/sd(a[,ii])&#125;</span><br></pre></td></tr></table></figure></div><p><a name="S4tTs"></a></p><h2 id="3-Soft-max-Normalization"><a href="#3-Soft-max-Normalization" class="headerlink" title="3 Soft-max_Normalization"></a>3 Soft-max_Normalization</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(ii <span class="keyword">in</span> <span class="number">1</span>:ncol(a))</span><br><span class="line">&#123;a[,ii] &lt;- pnorm((a[,ii]-mean(a[,ii]))/sd(a[,ii]))&#125;</span><br></pre></td></tr></table></figure></div><p><a name="zb92d"></a></p><h2 id="4-Logistic-Softmax"><a href="#4-Logistic-Softmax" class="headerlink" title="4 Logistic/Softmax"></a>4 Logistic/Softmax</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(ii <span class="keyword">in</span> <span class="number">1</span>:ncol(a))</span><br><span class="line">&#123;a[,ii] &lt;- <span class="number">1</span>/(<span class="number">1</span>+ exp(-a[,ii]))</span><br></pre></td></tr></table></figure></div><p><a name="l6OhA"></a></p><h2 id="5-模糊量化模式"><a href="#5-模糊量化模式" class="headerlink" title="5 模糊量化模式"></a>5 模糊量化模式</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(ii <span class="keyword">in</span> <span class="number">1</span>:ncol(a))</span><br><span class="line">&#123;x&lt;- a[,ii]</span><br><span class="line">a[,ii] &lt;- x &lt;- <span class="number">1</span>/<span class="number">2</span> +<span class="number">1</span>/2sin(pi/(max(x)-mean(x))(x-max(x)-mean(x)/<span class="number">2</span>)) *x&#125;</span><br></pre></td></tr></table></figure></div><p><a name="SbqDp"></a></p><h2 id="6-log"><a href="#6-log" class="headerlink" title="6 log"></a>6 log</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(ii <span class="keyword">in</span> <span class="number">1</span>:ncol(a))</span><br><span class="line">&#123;</span><br><span class="line">a[,ii][which(a[,ii]&gt;<span class="number">0</span>)] &lt;- log(a[,ii][which(a[,ii]&gt;<span class="number">0</span>)],<span class="number">10</span>)/log(max(a[,ii]),<span class="number">10</span>)</span><br><span class="line">a[,ii][which(a[,ii]&lt;<span class="number">0</span>)] &lt;- log(a[,ii][which(a[,ii]&lt;<span class="number">0</span>)](-<span class="number">1</span>),<span class="number">10</span>)(-<span class="number">1</span>)/log(mean(a[,ii]) *(-<span class="number">1</span>))&#125;</span><br></pre></td></tr></table></figure></div><p><a name="uEmOn"></a></p><h2 id="7-atan"><a href="#7-atan" class="headerlink" title="7 atan"></a>7 atan</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span>(ii <span class="keyword">in</span> <span class="number">1</span>:ncol(a))</span><br><span class="line">&#123;</span><br><span class="line">a[,ii][which(a[,ii]&gt;<span class="number">0</span>)] &lt;- atan(a[,ii][which(a[,ii]&gt;<span class="number">0</span>)])*<span class="number">2</span>/pi</span><br><span class="line">a[,ii][which(a[,ii]&lt;<span class="number">0</span>)] &lt;- atan(a[,ii][which(a[,ii]&lt;<span class="number">0</span>)])<span class="number">2</span>/pi (-<span class="number">1</span>)&#125;</span><br></pre></td></tr></table></figure></div><p><a name="Ih7Gy"></a></p><h2 id="8-Logistic-Softmax"><a href="#8-Logistic-Softmax" class="headerlink" title="8 Logistic/Softmax"></a>8 Logistic/Softmax</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Something wrong with this 1/2+ 1/2sim(pi/max())</span></span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Density plot</title>
      <link href="/R/Density-plot.html"/>
      <url>/R/Density-plot.html</url>
      
        <content type="html"><![CDATA[<h1>Density plot</h1><p><img src="https://s1.ax1x.com/2020/08/13/dS50Ej.png" alt="den1"></p><p><a name="XxQSp"></a></p><h1>Quick start</h1><p><a name="fXzqq"></a></p><h2 id="geom-density-2d"><a class="header-anchor" href="#geom-density-2d"></a>geom_density_2d</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">world &lt;- map_data(<span class="string">"world"</span>)</span><br><span class="line">ggplot(world,aes(long, lat)) +geom_density_2d(color=<span class="string">'red'</span>) + theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dS5dbQ.png" alt="den2"></p><p><a name="tcYcw"></a></p><h2 id="stat-density-2d"><a class="header-anchor" href="#stat-density-2d"></a>stat_density_2d</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(world,aes(long, lat)) + stat_density_2d(aes(fill = stat(level)), geom = <span class="string">"polygon"</span>) + theme_map()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dS5aDg.png" alt="123"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(world,aes(long, lat)) + stat_density_2d(aes(fill = stat(level),colour = region), geom = <span class="string">"polygon"</span>) + theme_map()+ theme(legend.position = <span class="string">'none'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dS5BUs.png" alt="den4"></p><p><a name="OX1Ol"></a></p><h2 id="geom-raster"><a class="header-anchor" href="#geom-raster"></a>geom_raster</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(faithfuld, aes(waiting, eruptions)) +</span><br><span class="line"> geom_raster(aes(fill = density))+ theme_map()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dS5UKS.png" alt="den5"></p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GG3D</title>
      <link href="/R/GG3D.html"/>
      <url>/R/GG3D.html</url>
      
        <content type="html"><![CDATA[<h1>GG3D</h1><p><a name="2iMCl"></a></p><h1>1. 安装</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">'devtools'</span>)</span><br><span class="line">devtools::install_github(<span class="string">"AckerDWM/gg3D"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="YNFtv"></a></p><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start"></a>Quick Start</h2><p><a name="JmVtJ"></a></p><h3 id="看图"><a class="header-anchor" href="#看图"></a>看图</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(gg3D)</span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">theta=<span class="number">1</span> <span class="comment">#方位角的度数</span></span><br><span class="line">phi=<span class="number">50</span> <span class="comment"># 渐近线</span></span><br><span class="line">ggplot(iris, aes(x=Petal.Width, y=Sepal.Width, z=Petal.Length, color=Species)) +</span><br><span class="line">    axes_3D(theta=theta, phi=phi) + stat_3D(theta=theta, phi=phi) +</span><br><span class="line">    axis_labs_3D(theta=theta, phi=phi, size=<span class="number">3</span>, hjust=c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>), vjust=c(-<span class="number">.5</span>,-<span class="number">.5</span>,-<span class="number">.2</span>,-<span class="number">.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>)) +</span><br><span class="line">    labs_3D(theta=theta, phi=phi, hjust=c(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>), vjust=c(<span class="number">1.5</span>,<span class="number">1</span>,-<span class="number">.2</span>),labs=c(<span class="string">"Petal width"</span>, <span class="string">"Sepal width"</span>, <span class="string">"Petal length"</span>)) +theme_void()</span><br></pre></td></tr></table></figure></div><p><a name="xqVEd"></a></p><h3 id="theta-phi的关系"><a class="header-anchor" href="#theta-phi的关系"></a>theta &amp; phi的关系</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 查看theta</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">0</span>:<span class="number">100</span>))&#123;</span><br><span class="line">theta=i <span class="comment">#方位角的度数</span></span><br><span class="line">phi=<span class="number">1</span> <span class="comment"># 渐近线</span></span><br><span class="line">p &lt;- ggplot(iris, aes(x=Petal.Width, y=Sepal.Width, z=Petal.Length, color=Species)) +</span><br><span class="line">    axes_3D(theta=theta, phi=phi) + stat_3D(theta=theta, phi=phi) +</span><br><span class="line">    axis_labs_3D(theta=theta, phi=phi, size=<span class="number">3</span>, hjust=c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>), vjust=c(-<span class="number">.5</span>,-<span class="number">.5</span>,-<span class="number">.2</span>,-<span class="number">.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>)) +</span><br><span class="line">    labs_3D(theta=theta, phi=phi, hjust=c(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>), vjust=c(<span class="number">1.5</span>,<span class="number">1</span>,-<span class="number">.2</span>),labs=c(<span class="string">"Petal width"</span>, <span class="string">"Sepal width"</span>, <span class="string">"Petal length"</span>)) +theme_void()+</span><br><span class="line">    labs(title =paste(<span class="string">"theta="</span>,i))</span><br><span class="line">print(p)</span><br><span class="line"><span class="comment">#ggsave(paste(i,'.png',sep=""))</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#convert $(ls  *.png| sort -n) theta.gif</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#查看phi</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">0</span>:<span class="number">100</span>))&#123;</span><br><span class="line">theta=<span class="number">1</span> <span class="comment">#方位角的度数</span></span><br><span class="line">phi=i <span class="comment"># 渐近线</span></span><br><span class="line">p &lt;- ggplot(iris, aes(x=Petal.Width, y=Sepal.Width, z=Petal.Length, color=Species)) +</span><br><span class="line">    axes_3D(theta=theta, phi=phi) + stat_3D(theta=theta, phi=phi) +</span><br><span class="line">    axis_labs_3D(theta=theta, phi=phi, size=<span class="number">3</span>, hjust=c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>), vjust=c(-<span class="number">.5</span>,-<span class="number">.5</span>,-<span class="number">.2</span>,-<span class="number">.2</span>,<span class="number">1.2</span>,<span class="number">1.2</span>)) +</span><br><span class="line">    labs_3D(theta=theta, phi=phi, hjust=c(<span class="number">1</span>,<span class="number">0</span>,<span class="number">0</span>), vjust=c(<span class="number">1.5</span>,<span class="number">1</span>,-<span class="number">.2</span>),labs=c(<span class="string">"Petal width"</span>, <span class="string">"Sepal width"</span>, <span class="string">"Petal length"</span>)) +theme_void()+</span><br><span class="line">    labs(title =paste(<span class="string">"phi="</span>,i))</span><br><span class="line">print(p)</span><br><span class="line"><span class="comment">#ggsave(paste(i,'.png',sep=""))</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">#convert $(ls  *.png| sort -n) phi.gif</span></span><br></pre></td></tr></table></figure></div><table><thead><tr><th style="text-align:center">Theta</th><th style="text-align:center">Phi</th></tr></thead><tbody><tr><td style="text-align:center"><img src="https://s1.ax1x.com/2020/06/19/NuhKsS.gif" alt="NuhKsS.gif"></td><td style="text-align:center"><img src="https://s1.ax1x.com/2020/06/19/NuhMqg.gif" alt="NuhMqg.gif"></td></tr></tbody></table><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Go Bar Plot by ggplot</title>
      <link href="/R/GG_goplot.html"/>
      <url>/R/GG_goplot.html</url>
      
        <content type="html"><![CDATA[<h1>Go Bar Plot by ggplot</h1><p>用ggplot画GO注释的bar图</p><h1>Data</h1><p>Before running the codes, I’d like to have a brief introduces about my data.</p><p>There are three tables in total and name as <code>In_all.table</code>, <code>Li_all.table</code>, <code>Mu_all.table</code>.<br>It looks like:</p><table><thead><tr><th style="text-align:center">Name</th><th style="text-align:center">InCK_30</th><th style="text-align:center">InCK_75</th><th style="text-align:center">In30_75</th><th style="text-align:center">Cate</th></tr></thead><tbody><tr><td style="text-align:center">localization</td><td style="text-align:center">114</td><td style="text-align:center">149</td><td style="text-align:center">94</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">single-organism process</td><td style="text-align:center">285</td><td style="text-align:center">357</td><td style="text-align:center">225</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">metabolic process</td><td style="text-align:center">375</td><td style="text-align:center">413</td><td style="text-align:center">261</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">multi-organism process</td><td style="text-align:center">4</td><td style="text-align:center">5</td><td style="text-align:center">1</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">immune system process</td><td style="text-align:center">15</td><td style="text-align:center">13</td><td style="text-align:center">9</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">multicellular organismal process</td><td style="text-align:center">16</td><td style="text-align:center">13</td><td style="text-align:center">11</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">cellular process</td><td style="text-align:center">411</td><td style="text-align:center">473</td><td style="text-align:center">296</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">reproduction</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">Biological process</td></tr><tr><td style="text-align:center">reproductive process</td><td style="text-align:center">0</td><td style="text-align:center">1</td><td style="text-align:center">1</td><td style="text-align:center">Biological process</td></tr></tbody></table><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">'ggplot2'</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">'reshape2'</span>)</span><br><span class="line"></span><br><span class="line">theme_go &lt;- theme(axis.text.x=element_text(angle=<span class="number">60</span>,hjust=<span class="number">1</span>),</span><br><span class="line">      axis.title.x=element_text(hjust=<span class="number">0</span>),</span><br><span class="line">      plot.title = element_text(hjust = <span class="number">0.5</span>),</span><br><span class="line">      panel.grid.major =element_blank(),</span><br><span class="line">      panel.grid.minor = element_blank(),</span><br><span class="line">      panel.background = element_blank(),</span><br><span class="line">      axis.line = element_line(colour = <span class="string">"black"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## Intestine</span></span><br><span class="line"></span><br><span class="line">all &lt;- read.table(<span class="string">"In_all.table"</span>,sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line">all_gg &lt;- melt(all)</span><br><span class="line"></span><br><span class="line">p1 &lt;- ggplot(data=all_gg)+</span><br><span class="line">      geom_bar(aes(x=Name,y=value,fill=variable),stat=<span class="string">"identity"</span>)+</span><br><span class="line">      facet_grid(. ~ Cate,scales = <span class="string">"free_x"</span>,space = <span class="string">"free"</span>) +</span><br><span class="line">      labs(title=<span class="string">"Intestine"</span>, x = <span class="string">"A"</span>, y=<span class="string">"Countes"</span>)+ theme_go+</span><br><span class="line">      theme(axis.text.x = element_text(size=<span class="number">15</span>))</span><br><span class="line">ggsave(<span class="string">'GP_Q.png'</span>,wi=<span class="number">12</span>,hei=<span class="number">7.4</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NK5SeS.png" alt="NK5SeS.png"><br>It is definitely the best result of GO bar plot.<br>But, thing gonna change when you want to align two or more others.</p><h1>Plot Three files</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">'ggplot2'</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">'reshape2'</span>)</span><br><span class="line"></span><br><span class="line">theme_go &lt;- theme(axis.text.x=element_text(angle=<span class="number">60</span>,hjust=<span class="number">1</span>,size=<span class="number">12</span>),</span><br><span class="line">      axis.title.x=element_text(hjust=<span class="number">0</span>),</span><br><span class="line">      plot.title = element_text(hjust = <span class="number">0.5</span>),</span><br><span class="line">      panel.grid.major =element_blank(),</span><br><span class="line">      panel.grid.minor = element_blank(),</span><br><span class="line">      panel.background = element_blank(),</span><br><span class="line">      axis.line = element_line(colour = <span class="string">"black"</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">## Intestine</span></span><br><span class="line"></span><br><span class="line">all &lt;- read.table(<span class="string">"In_all.table"</span>,sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line">all_gg &lt;- melt(all)</span><br><span class="line"></span><br><span class="line">p1 &lt;- ggplot(data=all_gg)+</span><br><span class="line">      geom_bar(aes(x=Name,y=value,fill=variable),stat=<span class="string">"identity"</span>)+</span><br><span class="line">      facet_grid(. ~ Cate,scales = <span class="string">"free_x"</span>,space = <span class="string">"free"</span>) +</span><br><span class="line">      labs(title=<span class="string">"Intestine"</span>, x = <span class="string">"A"</span>, y=<span class="string">"Countes"</span>)+ theme_go</span><br><span class="line"></span><br><span class="line"><span class="comment">## Liver</span></span><br><span class="line">all &lt;- read.table(<span class="string">"Li_all.table"</span>,sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line">all_gg &lt;- melt(all)</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot(data=all_gg)+</span><br><span class="line">      geom_bar(aes(x=Name,y=value,fill=variable),stat=<span class="string">"identity"</span>)+</span><br><span class="line">      facet_grid(. ~ Cate,scales = <span class="string">"free_x"</span>,space = <span class="string">"free"</span>) +</span><br><span class="line">      labs(title=<span class="string">"Liver"</span>, x = <span class="string">"B"</span>, y=<span class="string">"Countes"</span>)+ theme_go</span><br><span class="line"></span><br><span class="line"><span class="comment">## Muscle</span></span><br><span class="line">all &lt;- read.table(<span class="string">"Mu_all.table"</span>,sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line">all_gg &lt;- melt(all)</span><br><span class="line"></span><br><span class="line">p3 &lt;- ggplot(data=all_gg)+</span><br><span class="line">      geom_bar(aes(x=Name,y=value,fill=variable),stat=<span class="string">"identity"</span>)+</span><br><span class="line">      facet_grid(. ~ Cate,scales = <span class="string">"free_x"</span>,space = <span class="string">"free"</span>) +</span><br><span class="line">      labs(title=<span class="string">"Muscle"</span>, x = <span class="string">"C"</span>, y=<span class="string">"Countes"</span>)+ theme_go</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p1/p2/p3</span><br><span class="line">ggsave(<span class="string">"GO.png"</span>, wi=<span class="number">10</span>,height = <span class="number">15</span>)</span><br></pre></td></tr></table></figure></div><p>Due to the name of categories are long and dense, it is hard to get an idea distribution of the chart.<br><a href="https://imgchr.com/i/NKo2Gj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/19/NKo2Gj.png" alt="NKo2Gj.png"></a></p><p>One resolution is to combine three tables and sharing one X axis. Another is to annotate the categories at the side of the chart.</p><h2 id="Combining-X-axis"><a class="header-anchor" href="#Combining-X-axis"></a>Combining X axis</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">theme_go &lt;- theme(axis.text.x=element_text(angle=<span class="number">60</span>,hjust=<span class="number">1</span>,size=<span class="number">12</span>),</span><br><span class="line">      <span class="comment">#axis.title.x=element_text(hjust=0),</span></span><br><span class="line">      plot.title = element_text(hjust = <span class="number">0.5</span>),</span><br><span class="line">      panel.grid.major =element_line(colour=<span class="string">'grey'</span>),</span><br><span class="line">      <span class="comment">#panel.grid.major =element_blank(),</span></span><br><span class="line">      panel.grid.minor = element_blank(),</span><br><span class="line">      panel.background = element_blank(),</span><br><span class="line">      axis.line = element_line(colour = <span class="string">"black"</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">File_list = c(<span class="string">"In_all.table"</span>, <span class="string">"Li_all.table"</span>, <span class="string">"Mu_all.table"</span>)</span><br><span class="line">Samples_list = c(<span class="string">"Intestine"</span>, <span class="string">"Liver"</span>, <span class="string">"Muscle"</span>)</span><br><span class="line">Degree_list = c(<span class="string">"A"</span>,<span class="string">"B"</span>,<span class="string">"C"</span>)</span><br><span class="line">TB = data.frame()</span><br><span class="line"><span class="comment"># Combining tables</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:length(File_list)))&#123;</span><br><span class="line">    tmp = read.table(File_list[i],sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line">    tmp$Samples= Samples_list[i]</span><br><span class="line">    colnames(tmp)[<span class="number">2</span>:<span class="number">4</span>]=c(<span class="string">"CK vs 30"</span>, <span class="string">"CK vs 75"</span>, <span class="string">"30 vs 75"</span>)</span><br><span class="line">    TB = rbind(TB,tmp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TB_melt &lt;- melt(TB)</span><br><span class="line">p &lt;- ggplot(TB_melt)+  </span><br><span class="line">  geom_bar(aes(x=Name,y=value,fill=variable),stat=<span class="string">"identity"</span>)+  </span><br><span class="line">  facet_grid(Samples ~ Cate,scales = <span class="string">"free"</span>,space = <span class="string">"free"</span>) +  </span><br><span class="line">  labs(title=<span class="string">"Intestine"</span>, x = <span class="string">"Categories"</span>, y=<span class="string">"Countes"</span>) + theme_go</span><br><span class="line"></span><br><span class="line">p &lt;- p + theme( strip.background = element_rect(fill = <span class="string">'#f2f2f2'</span>), strip.text = element_text(face = <span class="string">'bold'</span>,size=<span class="number">15</span>))</span><br><span class="line"><span class="comment"># we using cowplot to extent the axis</span></span><br><span class="line"><span class="keyword">library</span>(cowplot)</span><br><span class="line">ggdraw() + draw_plot(p,<span class="number">0.05</span>,<span class="number">0</span>,<span class="number">0.95</span>)</span><br><span class="line">ggsave(<span class="string">"GO_2.png"</span>,wi=<span class="number">12.7</span>,hei = <span class="number">10</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NKXdDs" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/19/NKXdDs.png" alt="NKXdDs.png"></a></p><p>You may also like using heatmap to display the difference of counts among samples.</p><h1>Heatmap</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(pheatmap)</span><br><span class="line"><span class="keyword">library</span>(ggplotify)</span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line"><span class="comment"># reading from data</span></span><br><span class="line">all_In &lt;- read.table(<span class="string">"In_all.table"</span>,sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line">all_Li &lt;- read.table(<span class="string">"Li_all.table"</span>,sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line">all_Mu &lt;- read.table(<span class="string">"Mu_all.table"</span>,sep=<span class="string">'\t'</span>,header=<span class="literal">T</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Merge</span></span><br><span class="line">In_Li = merge(x=all_In,y=all_Li,by=<span class="string">"Name"</span>, all.x = <span class="literal">T</span>, all.y = <span class="literal">T</span>)</span><br><span class="line">In_Li_Mu = merge(x=In_Li,y=all_Mu,by=<span class="string">"Name"</span>, all.x = <span class="literal">T</span>, all.y = <span class="literal">T</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Group</span></span><br><span class="line">In_Li_Mu = In_Li_Mu[c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">5</span>,<span class="number">9</span>,<span class="number">13</span>)]</span><br><span class="line">In_Li_Mu[<span class="number">13</span>][which(is.na(In_Li_Mu[<span class="number">13</span>])==<span class="literal">TRUE</span>),]=In_Li_Mu[<span class="number">12</span>][which(is.na(In_Li_Mu[<span class="number">13</span>])==<span class="literal">TRUE</span>),]</span><br><span class="line">In_Li_Mu[<span class="number">13</span>][which(is.na(In_Li_Mu[<span class="number">13</span>])==<span class="literal">TRUE</span>),]=In_Li_Mu[<span class="number">11</span>][which(is.na(In_Li_Mu[<span class="number">13</span>])==<span class="literal">TRUE</span>),]</span><br><span class="line">In_Li_Mu = In_Li_Mu[c(<span class="number">1</span>:<span class="number">10</span>,<span class="number">13</span>)]</span><br><span class="line"></span><br><span class="line">row.names(In_Li_Mu) = In_Li_Mu[[<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Order</span></span><br><span class="line">In_Li_Mu = In_Li_Mu[order(In_Li_Mu[[<span class="number">11</span>]]),]</span><br><span class="line"><span class="comment"># Using raw counts</span></span><br><span class="line">p1 &lt;- pheatmap(In_Li_Mu[c(<span class="number">2</span>:<span class="number">10</span>)],  annotation_row =In_Li_Mu[<span class="number">11</span>],cluster_rows = <span class="literal">F</span>, cluster_col=<span class="literal">F</span>, labels_row = <span class="string">""</span>, legend = <span class="literal">F</span>, annotation_legend = <span class="literal">F</span>)</span><br><span class="line"><span class="comment"># Normalizing it with Log2(x+1)</span></span><br><span class="line">p2 &lt;- pheatmap(log(<span class="number">1</span>+In_Li_Mu[c(<span class="number">2</span>:<span class="number">10</span>)]),  annotation_row =In_Li_Mu[<span class="number">11</span>],cluster_rows = <span class="literal">F</span>, cluster_col=<span class="literal">F</span>, labels_row = <span class="string">""</span>, legend = <span class="literal">F</span>, annotation_legend = <span class="literal">F</span>)</span><br><span class="line"><span class="comment"># Centering the matrix after log them</span></span><br><span class="line">p3 &lt;- pheatmap( data.frame(t(scale(t(log2(<span class="number">1</span>+In_Li_Mu[c(<span class="number">2</span>:<span class="number">10</span>)])), scale=<span class="literal">F</span>))),  annotation_row =In_Li_Mu[<span class="number">11</span>],cluster_rows = <span class="literal">F</span>, cluster_col=<span class="literal">F</span>, annotation_legend = <span class="literal">F</span>)</span><br><span class="line"></span><br><span class="line">g1 = as.ggplot(p1)</span><br><span class="line">g2 = as.ggplot(p2)</span><br><span class="line">g3 = as.ggplot(p3)</span><br><span class="line"></span><br><span class="line">(g1|g2)/g3</span><br><span class="line"><span class="comment">#ggsave("GO_3.png",width = 6.54,height = 10.5)</span></span><br></pre></td></tr></table></figure></div><p>For have a better layout and easy to comparation, I tossed some legends.<br><a href="https://imgchr.com/i/NMS9Ts" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/19/NMS9Ts.png" alt="NMS9Ts.png"></a></p><h2 id="Dots-plot"><a class="header-anchor" href="#Dots-plot"></a>Dots plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(cowplot)</span><br><span class="line"><span class="keyword">library</span>(ggdendro)</span><br><span class="line"></span><br><span class="line">TB_tree &lt;- In_Li_Mu[<span class="number">2</span>:<span class="number">10</span>]</span><br><span class="line">TB_tree[is.na(TB_tree)]=<span class="number">0</span></span><br><span class="line">Tree  &lt;- hclust(dist(TB_tree))</span><br><span class="line">dendr    &lt;- dendro_data(Tree, type=<span class="string">"rectangle"</span>)</span><br><span class="line"><span class="comment"># plot the dendrogram; note use of color=cluster in geom_text(...)</span></span><br><span class="line">p1 &lt;- ggplot() +</span><br><span class="line">  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">  coord_flip() + labs(y=<span class="string">"Distance"</span>)+</span><br><span class="line">  theme(axis.line.y=element_blank(),</span><br><span class="line">        axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.y=element_blank(),</span><br><span class="line">        axis.title.y=element_blank(),</span><br><span class="line">        axis.text.x=element_text(angle=<span class="number">45</span>,hjust=<span class="number">1</span>),</span><br><span class="line">        panel.background=element_blank(),</span><br><span class="line">        panel.grid=element_blank())</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TB &lt;- melt(In_Li_Mu)</span><br><span class="line">TB$Name = factor(TB$Name,levels = unique(TB$Name[order(TB$Cate)]))</span><br><span class="line">TB$SubG = <span class="string">"Intest"</span></span><br><span class="line">TB$SubG[grep( <span class="string">"Mu"</span>, TB$variable)] = <span class="string">"Muscle"</span></span><br><span class="line">TB$SubG[grep( <span class="string">"Li"</span>, TB$variable)]  = <span class="string">"Liver"</span></span><br><span class="line">TB$Name = factor(TB$Name, levels= dendr$labels$label)</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot(TB,aes(x=variable,y=Name)) +</span><br><span class="line">      geom_point(aes(size=value,color=Cate))+ theme_light()+</span><br><span class="line">      facet_grid(~SubG, scales =<span class="string">"free"</span>, space = <span class="string">'free'</span>) +</span><br><span class="line">      labs(x=<span class="string">'Samples'</span>,y=<span class="string">'Category'</span>,title = <span class="string">"GO Anotation of DEGs"</span>)+</span><br><span class="line">      theme(axis.text.x = element_text(angle = <span class="number">45</span>,hjust=<span class="number">1</span>),</span><br><span class="line">            axis.text.y = element_text(size=<span class="number">12</span>),</span><br><span class="line">            strip.text.x = element_text(size=<span class="number">12</span>, face=<span class="string">'bold'</span>),</span><br><span class="line">            legend.position = <span class="string">'left'</span>)</span><br><span class="line"></span><br><span class="line">ggdraw()+ draw_plot(p1,<span class="number">0.784</span>,<span class="number">0.0</span>,<span class="number">0.1</span>,<span class="number">0.972</span>) +</span><br><span class="line">          draw_plot(p2,<span class="number">0</span>,<span class="number">0.007</span>,<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">ggsave(<span class="string">'GO_Dots222.png'</span>, width = <span class="number">9.4</span>, height = <span class="number">8.07</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NMWOc6" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NMWOc6.md.png" alt="NMWOc6.md.png"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GGcal</title>
      <link href="/R/GGcal.html"/>
      <url>/R/GGcal.html</url>
      
        <content type="html"><![CDATA[<h1 id="GGcal"><a href="#GGcal" class="headerlink" title="GGcal"></a>GGcal</h1><p><img src="https://s1.ax1x.com/2020/06/19/Nuh2QK.png" alt="Nuh2QK.png"></p><p><a name="gCUUE"></a></p><h1 id="Quick-start"><a href="#Quick-start" class="headerlink" title="Quick start:"></a>Quick start:</h1><p>The graph show ahead. </p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggcal)</span><br><span class="line"></span><br><span class="line">mydate &lt;- seq(as.Date(<span class="string">"2017-02-01"</span>), as.Date(<span class="string">"2017-07-22"</span>), by=<span class="string">"1 day"</span>)</span><br><span class="line">myfills &lt;- rnorm(length(mydate))</span><br><span class="line"></span><br><span class="line">print(ggcal(mydate, myfills))</span><br></pre></td></tr></table></figure></div><p><a name="LOqVj"></a></p><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtools::install_github(<span class="string">"jayjacobs/ggcal"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="favorite"></a></p><h1 id="Favorite-theme"><a href="#Favorite-theme" class="headerlink" title="Favorite theme"></a>Favorite theme</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gg &lt;- ggcal(mydate, myfills) +</span><br><span class="line">scale_fill_gradient2(low=<span class="string">"#4575b4"</span>, mid=<span class="string">"#ffffbf"</span>, high=<span class="string">"#d73027"</span>, midpoint=<span class="number">0</span>)</span><br><span class="line">print(gg)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/Nuhcz6.png" alt="Nuhcz6.png"></p><p><a name="FG8Ad"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GGmap: geom_map</title>
      <link href="/R/GGmap.html"/>
      <url>/R/GGmap.html</url>
      
        <content type="html"><![CDATA[<h1>GGmap: geom_map</h1><p><img src="https://s1.ax1x.com/2020/08/13/dSDpoF.png" alt="1"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">'ggalt'</span>)</span><br></pre></td></tr></table></figure></div><p>文件下载: <a href="https://raw.githubusercontent.com/ljtyduyu/DataWarehouse/master/File/CLIWOC15.csv" target="_blank" rel="noopener">CLIWOC15.csv</a> (也许需要科学上网)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)  <span class="comment">#需安装最新的2.0.0版本</span></span><br><span class="line"><span class="keyword">library</span>(dplyr)  <span class="comment">#你也可以用内置的subset函数来代替filter函数</span></span><br><span class="line"><span class="keyword">library</span>(ggalt) <span class="comment">#安装方法: devtools::install_github("hrbrmstr/ggalt")。需安装加载devtools包</span></span><br><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"></span><br><span class="line">world &lt;- map_data(<span class="string">"world"</span>)</span><br><span class="line">world &lt;- world[world$region != <span class="string">"Antarctica"</span>,] <span class="comment"># 剔除南极洲</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">dat &lt;- read.csv(<span class="string">"CLIWOC15.csv"</span>)</span><br><span class="line">dat &lt;- filter(dat, Nation != <span class="string">"Sweden"</span>)</span><br><span class="line"></span><br><span class="line">ggplot()+ geom_map(data=world, map=world,</span><br><span class="line">  aes(x=long, y=lat, map_id=region), fill=<span class="string">"#00518E"</span>,</span><br><span class="line">  color=<span class="string">"white"</span>, fill=<span class="string">"#7f7f7f"</span>, size=<span class="number">0.05</span>, alpha=<span class="number">1</span>/<span class="number">4</span>)+</span><br><span class="line">  geom_point(data=dat,aes(x=Lon3, y=Lat3, color=Nation),size=<span class="number">0.15</span>, alpha=<span class="number">1</span>/<span class="number">100</span>)+</span><br><span class="line">  scale_color_tableau()+ coord_proj(<span class="string">"+proj=wintri"</span>)+ facet_wrap(~Nation)+</span><br><span class="line">  theme_map()+ theme(strip.background=element_blank())+ theme(legend.position=<span class="string">"none"</span>)</span><br><span class="line">ggsave(<span class="string">'map.png'</span>,w=<span class="number">500</span>,h=<span class="number">450</span>)</span><br><span class="line"><span class="comment"># graph shows as in head</span></span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dSDpoF.png" alt="1"></p><p><a name="b0FAh"></a></p><h1>library(map)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(maps)</span><br><span class="line"></span><br><span class="line">data(us.cities)</span><br><span class="line">big_citi &lt;- subset(us.cities,pop &gt; <span class="number">500000</span>)  <span class="comment">##人口大于50万的城市</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#Quick plot (left)</span></span><br><span class="line">qplot(long,lat,data=big_citi) + borders(<span class="string">"state"</span>,size=<span class="number">0.5</span>)</span><br><span class="line"><span class="comment">#ggsave('map2.png',w=4,h=2.6)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#Quick plot (right)</span></span><br><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"><span class="keyword">library</span>(ggrepel)</span><br><span class="line">qplot(long,lat,data=big_citi) + borders(<span class="string">"state"</span>,size=<span class="number">0.5</span>)  +theme_map()+</span><br><span class="line">  geom_label_repel(data=big_citi,aes(x=long,y=lat,label=name))</span><br><span class="line"><span class="comment">#ggsave('map3.png',w=8,h=5.2)</span></span><br></pre></td></tr></table></figure></div><table><thead><tr><th style="text-align:center"><a href="https://imgchr.com/i/dSsgG4" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/13/dSsgG4.jpg" alt="dSsgG4.jpg"></a></th><th style="text-align:center"><a href="https://imgchr.com/i/dSsciF" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/13/dSsciF.jpg" alt="dSsciF.jpg"></a></th></tr></thead><tbody><tr><td style="text-align:center">map2.png</td><td style="text-align:center">map3.png</td></tr></tbody></table><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GGmap: geom_polygon</title>
      <link href="/R/GGmap_polygon.html"/>
      <url>/R/GGmap_polygon.html</url>
      
        <content type="html"><![CDATA[<h1>GGmap: geom_polygon</h1><p>主要参考: <a href="https://blog.csdn.net/kMD8d5R/article/details/86582019" target="_blank" rel="noopener">https://blog.csdn.net/kMD8d5R/article/details/86582019</a></p><p><img src="https://s1.ax1x.com/2020/06/20/NlTFvd.gif" alt="NlTFvd.gif"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">'mapproj'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="xNsgR"></a></p><h1>快速上手</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 世界地图，比较好的配色</span></span><br><span class="line">world &lt;- map_data(<span class="string">"world"</span>)</span><br><span class="line">worldmap &lt;- ggplot(world, aes(x = long, y = lat, group = group)) +</span><br><span class="line">    geom_polygon(fill = <span class="string">"#00518E"</span>,color = <span class="string">"#317DA4"</span>) +</span><br><span class="line">    scale_y_continuous(breaks = (-<span class="number">2</span>:<span class="number">2</span>) * <span class="number">30</span>) +</span><br><span class="line">    scale_x_continuous(breaks = (-<span class="number">4</span>:<span class="number">4</span>) * <span class="number">45</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 正射投影</span></span><br><span class="line">worldmap + coord_map(<span class="string">"ortho"</span>) <span class="comment"># 默认北极为中心点。  </span></span><br><span class="line"><span class="comment"># 南极为中心点</span></span><br><span class="line">worldmap + coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">30</span>, <span class="number">100</span>, <span class="number">0</span>))<span class="comment"># 中国 中心</span></span><br><span class="line">worldmap + coord_map(<span class="string">"ortho"</span>, orientation = c(-<span class="number">90</span>, <span class="number">0</span>, <span class="number">30</span>)) <span class="comment"># 顺时针旋转30度</span></span><br><span class="line">worldmap + coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">41</span>, -<span class="number">74</span>, <span class="number">0</span>)) <span class="comment"># 随便取一点</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#下图</span></span><br><span class="line">worldmap + coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">30</span>, <span class="number">100</span>, <span class="number">0</span>))+ theme_map()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/CNcJmlvL5A2MWQV.jpg" alt="1"></p><h1>原理</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x=c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">6</span>,<span class="number">6</span>)</span><br><span class="line">y=c(<span class="number">0</span>,<span class="number">7</span>,<span class="number">0</span>,<span class="number">8</span>)</span><br><span class="line">TB=data.frame(X=x,Y=y)</span><br><span class="line"></span><br><span class="line">gplot(TB,aes(X,Y)) + geom_polygon(aes(fill=<span class="string">'red'</span>)) + geom_point() + theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/nTkC9J1SLGpP8yH.png" alt="123"></p><p><a name="eGbgH"></a></p><h1>动画</h1><p><a name="uJRTA"></a></p><h2 id="1-gganimate"><a class="header-anchor" href="#1-gganimate"></a>1. gganimate</h2><p>gganimate 只能画平面图的动画，不能画球状以后的动画<br /><a href="https://www.yuque.com/attachments/yuque/0/2020/txt/691897/1579462446201-e55a4ce9-d9e4-4d71-873a-c30c3128159e.txt?_lake_card=%7B%22uid%22%3A%221579462446095-0%22%2C%22src%22%3A%22https%3A%2F%2Fwww.yuque.com%2Fattachments%2Fyuque%2F0%2F2020%2Ftxt%2F691897%2F1579462446201-e55a4ce9-d9e4-4d71-873a-c30c3128159e.txt%22%2C%22name%22%3A%22gps.txt%22%2C%22size%22%3A391%2C%22type%22%3A%22text%2Fplain%22%2C%22ext%22%3A%22txt%22%2C%22progress%22%3A%7B%22percent%22%3A99%7D%2C%22status%22%3A%22done%22%2C%22percent%22%3A0%2C%22id%22%3A%22n4KRD%22%2C%22card%22%3A%22file%22%7D" target="_blank" rel="noopener">gps.txt</a><br />随便测试一下</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(gganimate)</span><br><span class="line"></span><br><span class="line">City = read.table(<span class="string">'gps.txt'</span>)</span><br><span class="line">City$Group=<span class="number">1</span></span><br><span class="line">Num=nrow(City)</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">2</span>:<span class="number">10</span>))&#123;</span><br><span class="line">  tmp = City[<span class="number">1</span>:Num,<span class="number">1</span>:<span class="number">3</span>]</span><br><span class="line">  tmp$Group=i</span><br><span class="line">  tmp[[<span class="number">3</span>]]=tmp[[<span class="number">3</span>]]+i-<span class="number">1</span></span><br><span class="line">  City =rbind(City,tmp)&#125;</span><br><span class="line"></span><br><span class="line">ggplot(head(City,<span class="number">30</span>))+</span><br><span class="line">  geom_polygon(data=world,aes(x = long, y = lat, group = group),</span><br><span class="line">    fill = <span class="string">"#00518E"</span>,color = <span class="string">"#317DA4"</span>)+</span><br><span class="line">  geom_point(data=City,aes(x=V2,y=V3)) +  </span><br><span class="line">  geom_text(data=head(City,Num),aes(x=V2,y=V3,label=V1))+</span><br><span class="line">  coord_cartesian(xlim=c(<span class="number">70</span>,<span class="number">150</span>),ylim = c(<span class="number">10</span>,<span class="number">65</span>))+</span><br><span class="line">  transition_time(City$Group) + theme_map()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 简单示范</span></span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/iedJsLj4n56vpVE.gif" alt="123"><br><a name="R4vCh"></a></p><h2 id="2-多-png-转-gif"><a class="header-anchor" href="#2-多-png-转-gif"></a>2.多 png 转 gif</h2><p>先画出一系列的png，在叠加成gif</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#旋转</span></span><br><span class="line"><span class="keyword">library</span>(ggrepel)</span><br><span class="line">p &lt;- ggplot(head(City,<span class="number">15</span>))+ geom_polygon(data=world,aes(x = long, y = lat, group = group),fill = <span class="string">"#00518E"</span>,color = <span class="string">"#317DA4"</span>)+</span><br><span class="line">         geom_point(data=City,aes(x=V2,y=V3))  + coord_map(<span class="string">"ortho"</span>)+</span><br><span class="line">         geom_text(data=head(City,Num),aes(x=V2,y=V3,label=V1))+ theme_map()</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:<span class="number">5</span>))&#123;</span><br><span class="line">  p = p + coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">30</span>, <span class="number">50</span>+i*<span class="number">20</span>, <span class="number">0</span>))</span><br><span class="line">  ggsave(paste(i,<span class="string">'_map.png'</span>,sep=<span class="string">''</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">＃bash 下完成</span><br><span class="line">＃convert $(ls  *_map.png| sort -n) map.gif</span><br></pre></td></tr></table></figure></div><p><a name="n6MZ4"></a></p><h1>各种杂耍</h1><p><a name="DJlJs"></a></p><h2 id="加上经纬线"><a class="header-anchor" href="#加上经纬线"></a>加上经纬线</h2><p>[经纬线函数链接](<a href="https://www.yuque.com/liuwenkan/bni63i/bwkcrz#rlfqy" target="_blank" rel="noopener">https://www.yuque.com/liuwenkan/bni63i/bwkcrz#rlfqy</a>)/</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#杂技函数</span></span><br><span class="line">经纬线() +geom_polygon(data=world, aes(x = long, y = lat, group = group),</span><br><span class="line">        fill = <span class="string">"#00518E"</span>,color = <span class="string">"#317DA4"</span>) +</span><br><span class="line">    scale_y_continuous(breaks = (-<span class="number">2</span>:<span class="number">2</span>) * <span class="number">30</span>) +</span><br><span class="line">    coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">30</span>, <span class="number">100</span>, <span class="number">0</span>)) +</span><br><span class="line">    scale_x_continuous(breaks = (-<span class="number">4</span>:<span class="number">4</span>) * <span class="number">45</span>)+ theme_map()+</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/OTXpoVqUleW5R29.jpg" alt="1"><br><a name="8v0r9"></a></p><h2 id="链接两点"><a class="header-anchor" href="#链接两点"></a>链接两点</h2><p>这里用到Connet函数，详见“<a href="https://www.yuque.com/liuwenkan/bni63i/bwkcrz#1aCF2" target="_blank" rel="noopener">曲线链接两点</a>” <br />创建地点</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"巴黎  2.294694  48.856958</span></span><br><span class="line"><span class="string">墨尔本  144.958832  -37.812164</span></span><br><span class="line"><span class="string">马德里  -3.677528  40.390197</span></span><br><span class="line"><span class="string">SD  -117.071944  32.775554</span></span><br><span class="line"><span class="string">马塞卢  27.512883  -29.363468</span></span><br><span class="line"><span class="string">罗萨里奥  -60.62623  -32.949375</span></span><br><span class="line"><span class="string">东京  139.752725  35.68461"</span> &gt; 20City</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">北京= c(<span class="number">116.4167</span>, <span class="number">39.91667</span>)                                                                                                   </span><br><span class="line"></span><br><span class="line">City2=read.table(<span class="string">'20City'</span>)  </span><br><span class="line"></span><br><span class="line">建立链接</span><br><span class="line">Num=<span class="number">0</span></span><br><span class="line">Result=data.frame()</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:nrow(City2)))&#123;</span><br><span class="line">    Num=Num+<span class="number">1</span></span><br><span class="line">    tmp = Connet(北京,c(City2[i,][[<span class="number">2</span>]],City2[i,][[<span class="number">3</span>]]),Space=pi/<span class="number">10</span>)</span><br><span class="line">    tmp$Group=Num</span><br><span class="line">    Result = rbind(Result,tmp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">经纬线() +</span><br><span class="line">    geom_polygon(data=world, aes(x = long, y = lat, group = group), fill = <span class="string">"#00518E"</span>,color = <span class="string">"white"</span>,size=<span class="number">1.2</span>)+</span><br><span class="line">    coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">30</span>, <span class="number">100</span>, <span class="number">0</span>)) +theme_map()+</span><br><span class="line">    geom_polygon(data=world, aes(x = long, y = lat, group = group), fill = <span class="string">"#00518E"</span>,color = <span class="string">"#317DA4"</span>,alpha=<span class="number">0.25</span>,size=<span class="number">0.5</span>,linetype=<span class="number">6</span>) +</span><br><span class="line">    geom_point(data=Result,aes(x=X,y=Y))</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/hzS3eobnuHlGyrV.jpg" alt="1"></p><iframe src="https://player.bilibili.com/player.html?aid=84247400" frameborder="no" allowfullscreen="true"></iframe><p><a name="FG8Ad"></a></p><h1>More</h1><p><a name="5TVWU"></a></p><h2 id="GGmap-geom-map"><a class="header-anchor" href="#GGmap-geom-map"></a><a href="https://www.yuque.com/liuwenkan/rr/geom_map" target="_blank" rel="noopener"><strong>GGmap: geom_map</strong></a></h2><p><img src="https://i.loli.net/2020/06/20/4li51aLptYPRboe.png" alt="123"></p><p><a name="eXInz"></a></p><h2 id="geom-sf"><a class="header-anchor" href="#geom-sf"></a><a href="https://www.yuque.com/liuwenkan/rr/geom_sf" target="_blank" rel="noopener"><strong>geom_sf</strong></a></h2><p><img src="https://i.loli.net/2020/06/20/AEwr2uQaYdj51qB.jpg" alt="123"></p><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GGplot</title>
      <link href="/R/GGplot.html"/>
      <url>/R/GGplot.html</url>
      
        <content type="html"><![CDATA[<h1>GGplot</h1><p>大量带图介绍: <a href="https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/" target="_blank" rel="noopener">https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/</a><br />扩展包介绍: <a href="http://www.ggplot2-exts.org" target="_blank" rel="noopener">http://www.ggplot2-exts.org</a></p><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><p><img src="https://i.loli.net/2020/06/20/RWhj4s2N1KkOzae.jpg" alt="123"><br><a name="BMcZ4"></a></p><h2 id="0-ggsave"><a class="header-anchor" href="#0-ggsave"></a>0. ggsave</h2><p><a name="HGrYC"></a></p><h2 id="br"><a class="header-anchor" href="#br"></a><br /></h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ggsave(filename, plot = last_plot(), device = <span class="literal">NULL</span>, path = <span class="literal">NULL</span>, scale = <span class="number">1</span>, width = <span class="literal">NA</span>, height = <span class="literal">NA</span>, units = c(<span class="string">"in"</span>, <span class="string">"cm"</span>, <span class="string">"mm"</span>), dpi = <span class="number">300</span>, limitsize = <span class="literal">TRUE</span>, <span class="keyword">...</span>)</span><br><span class="line"><span class="comment"># 当pdf字体有问题时：</span></span><br><span class="line">ggsave(<span class="string">'test.pdf'</span>, width=<span class="number">7</span>,height=<span class="number">3</span>, device = cairo_pdf, family = <span class="string">"Song"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="ud7Yr"></a></p><h2 id="1-Dot-plot"><a class="header-anchor" href="#1-Dot-plot"></a>1. Dot plot</h2><p><a name="LpqMc"></a></p><h3 id="1-1-geom-point"><a class="header-anchor" href="#1-1-geom-point"></a>1.1 geom_point</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(mpg) +geom_point(mapping =aes( x =displ, y =hwy, color =class))</span><br><span class="line">ggplot(mpg) +geom_point(mapping =aes( x =V1, y =V2, color =V3, shape =V4, size=V5))</span><br></pre></td></tr></table></figure></div><p><a name="YVt3R"></a></p><h3 id="1-2-geom-dotplot"><a class="header-anchor" href="#1-2-geom-dotplot"></a>1.2 geom_dotplot</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(mtcars, aes(x = mpg)) + geom_dotplot() + theme_light()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NJ1oYF" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NJ1oYF.md.png" alt="NJ1oYF.md.png"></a><br><a name="I007a"></a></p><h3 id="1-3-geom-jitter"><a class="header-anchor" href="#1-3-geom-jitter"></a>1.3 geom_jitter</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(mpg, aes(cyl, hwy))+ geom_point() +geom_jitter(aes(colour = class))+ theme_light()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NJ1IFU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NJ1IFU.png" alt="NJ1IFU.png"></a><br><a name="poSDp"></a></p><h2 id="2-Line"><a class="header-anchor" href="#2-Line"></a>2. Line</h2><p><a name="FPW7c"></a></p><h3 id="2-1-geom-line-geom-path"><a class="header-anchor" href="#2-1-geom-line-geom-path"></a>2.1 geom_line &amp; geom_path</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">TB = data.frame(X=c(<span class="number">1</span>,<span class="number">23</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">2</span>,<span class="number">3</span>),Y=c(<span class="number">1</span>:<span class="number">16</span>))</span><br><span class="line"></span><br><span class="line">p1 &lt;- ggplot(TB) + geom_line(aes(X,Y)) + labs(title=<span class="string">'geom_line()'</span>)+ theme_light()</span><br><span class="line">p2 &lt;- ggplot(TB) + geom_path(aes(X,Y)) + labs(title=<span class="string">'geom_patch()'</span>)+ theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1579536964721-98f1bb2d-df20-4eb5-8821-76a88b141494.png#align=left&amp;display=inline&amp;height=247&amp;name=path.png&amp;originHeight=973&amp;originWidth=2097&amp;size=72039&amp;status=done&amp;style=none&amp;width=533" alt="path.png"><br><a name="JxYYM"></a></p><h3 id="2-2-geom-smooth"><a class="header-anchor" href="#2-2-geom-smooth"></a>2.2 geom_smooth</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ggplot(data = mpg) + geom_point(mapping = aes(x = V1, y = V2)) + geom_smooth(mapping= aes(x=V1, y=V2))</span><br><span class="line"><span class="comment">#####</span></span><br><span class="line"><span class="comment"># sting</span></span><br><span class="line">ggplot(mpg , aes(x = displ, y = hwy)) + geom_point() +</span><br><span class="line">  geom_smooth(method = <span class="string">"lm"</span>)</span><br><span class="line"></span><br><span class="line">++geom_smooth(data=Growth_p,aes(x=ID,y=log(value+<span class="number">20</span>)/<span class="number">3</span>,group=ALL,color=<span class="string">'OD Curve'</span>),se = <span class="literal">FALSE</span>,span=<span class="number">0.75</span>)</span><br></pre></td></tr></table></figure></div><p><a name="izF68"></a></p><h3 id="2-3"><a class="header-anchor" href="#2-3"></a>2.3</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">p1 &lt;- ggplot(mtcars,aes(mpg)) + geom_histogram() + theme_light() + ggtitle(<span class="string">'histogram'</span>)</span><br><span class="line">p2 &lt;- ggplot(mtcars,aes(mpg)) + geom_freqpoly() + theme_light()  + ggtitle(<span class="string">'freqpoly'</span>)</span><br><span class="line"></span><br><span class="line">p2/p1</span><br></pre></td></tr></table></figure></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1580024415512-f1b4c1e4-5c56-4edf-a230-bee17cec80bf.png#align=left&amp;display=inline&amp;height=321&amp;name=image.png&amp;originHeight=321&amp;originWidth=734&amp;size=29404&amp;status=done&amp;style=none&amp;width=734" alt="image.png"><br><a name="vFIpv"></a></p><h2 id="3-geom-boxplot"><a class="header-anchor" href="#3-geom-boxplot"></a>3. geom_boxplot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(box,aes(x=box$variable,y=box$value)) +geom_boxplot()</span><br></pre></td></tr></table></figure></div><p><a name="njlYT"></a></p><h2 id="4-Bar"><a class="header-anchor" href="#4-Bar"></a>4. Bar</h2><p><a name="ZAoAI"></a></p><h3 id="geom-bar"><a class="header-anchor" href="#geom-bar"></a>geom_bar</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">+ geom_bar(stat= <span class="string">'identity'</span>)</span><br><span class="line"><span class="comment">## the number of the point</span></span><br><span class="line">+ geom_bar(aes(fill=group),stat=<span class="string">"identity"</span>)</span><br><span class="line"><span class="comment">## the mean of all point (stack togather)</span></span><br><span class="line">+ geom_bar(aes(fill=group),stat=<span class="string">"summary"</span>,fun.y=<span class="string">"mean"</span>,position = <span class="string">'stack'</span>)</span><br><span class="line"><span class="comment">## dont stact</span></span><br><span class="line">+ geom_bar(aes(fill=group),stat=<span class="string">"summary"</span>,fun.y=<span class="string">"mean"</span>,position = <span class="string">'dodge'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="CymbV"></a></p><h4 id="an-easier-way-to-draw-bar-plot"><a class="header-anchor" href="#an-easier-way-to-draw-bar-plot"></a>an easier way to draw bar plot</h4><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">df &lt;- data.frame(trt = c(<span class="string">"a"</span>, <span class="string">"b"</span>, <span class="string">"c"</span>), outcome = c(<span class="number">2.3</span>, <span class="number">1.9</span>, <span class="number">3.2</span>))</span><br><span class="line">ggplot(df, aes(trt, outcome)) + geom_col() + geom_point(color=<span class="string">'red'</span>)</span><br></pre></td></tr></table></figure></div><p>Position for bar</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">## Position</span></span><br><span class="line">position = <span class="string">'fill'</span></span><br><span class="line">position = <span class="string">'identity'</span></span><br><span class="line">position = <span class="string">'stack'</span></span><br><span class="line">position = <span class="string">'dodge'</span></span><br></pre></td></tr></table></figure></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1580014667073-672cf132-7f6b-48e3-8e7e-86c36de08459.png#align=left&amp;display=inline&amp;height=240&amp;name=image.png&amp;originHeight=240&amp;originWidth=212&amp;size=5541&amp;status=done&amp;style=none&amp;width=212" alt="image.png"></p><p>More for Bar plot: <a href="https://karobben.github.io/R/geom_bar.html">GitIO</a>/<a href="https://www.yuque.com/liuwenkan/rr/geom_bar" target="_blank" rel="noopener">语雀</a></p><h4 id="from-bar-to-pie"><a class="header-anchor" href="#from-bar-to-pie"></a>from bar to pie</h4><p>you just need adding <code>+ coord_polar(&quot;y&quot;, start=0)</code> at the end of your code<br><img src="https://i.loli.net/2020/06/18/y1drCS3bYxRnZEK.png" alt="pie1"></p><p>More for pie: <a href="https://karobben.github.io/R/geom_pie.html">GitIO</a>/<a href="https://www.yuque.com/liuwenkan/rr/geom_pie" target="_blank" rel="noopener">语雀</a></p><p><a name="ly8EC"></a></p><h2 id="5-Heatmap"><a class="header-anchor" href="#5-Heatmap"></a>5. Heatmap</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ggplot(A, aes(x=Diet,y=A$Time)) + xlab(<span class="string">"samples"</span>) + ylab(<span class="literal">NULL</span>) +</span><br><span class="line">  theme_bw()+theme(panel.grid.major = element_blank()) +</span><br><span class="line">  theme(legend.key=element_blank())+geom_tile(aes(fill=weight)) +</span><br><span class="line">  scale_fill_gradient2(low=<span class="string">"steelblue2"</span>,mid=<span class="string">"white"</span>,high=<span class="string">"red"</span>,midpoint =<span class="number">150</span>)+</span><br><span class="line">  scale_fill_gradient(low = <span class="string">"white"</span>, high = <span class="string">"red"</span>)</span><br><span class="line"></span><br><span class="line">ggplot(A, aes(x=Diet,y=A$Time)) + xlab(<span class="string">"samples"</span>) + ylab(<span class="literal">NULL</span>) +</span><br><span class="line">  theme_bw()+</span><br><span class="line">  theme(panel.grid.major = element_blank()) +</span><br><span class="line">  theme(legend.key=element_blank())+</span><br><span class="line">  geom_tile(aes(fill=weight)) +</span><br><span class="line">  scale_fill_gradient2(low=<span class="string">"steelblue2"</span>,mid=<span class="string">"white"</span>,high=<span class="string">"red"</span>,midpoint =<span class="number">150</span>)+</span><br><span class="line">  scale_fill_gradient(low = <span class="string">"white"</span>, high = <span class="string">"red"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="489Tu"></a></p><h3 id="5-1-Best-theme-for-heatmap"><a class="header-anchor" href="#5-1-Best-theme-for-heatmap"></a>5.1 Best theme for heatmap</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Best color for heatmap</span></span><br><span class="line"><span class="keyword">library</span>(RColorBrewer)</span><br><span class="line">colorRampPalette(rev(brewer.pal(n = <span class="number">7</span>,name = <span class="string">"RdYlBu"</span>))) -&gt; cc</span><br><span class="line">simplot(d) + scale_fill_gradientn(colors=cc(<span class="number">100</span>)) + theme()</span><br></pre></td></tr></table></figure></div><p><a name="sNAxM"></a></p><h2 id="6-Fan-plot"><a class="header-anchor" href="#6-Fan-plot"></a>6. Fan plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ggplot() + geom_bar() + coord_polar(theta = <span class="string">'y'</span>)</span><br><span class="line"><span class="comment"># removing background</span></span><br><span class="line">+theme(panel.grid=element_blank(),panel.border=element_blank(),axis.ticks=element_blank(),axis.text=element_blank(),axis.title=element_blank(),, panel.background = element_blank())</span><br><span class="line"><span class="comment"># or</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line">+theme_map()</span><br></pre></td></tr></table></figure></div><p><a name="W8uIK"></a></p><h2 id="7-geom-errorbar"><a class="header-anchor" href="#7-geom-errorbar"></a>7. geom_errorbar</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ geom_errorbar(aes(ymin=len-sd, ymax=len+sd),</span><br><span class="line"> width=<span class="number">.2</span>， position=position_dodge(<span class="number">.9</span>))</span><br></pre></td></tr></table></figure></div><p><a name="8i31l"></a></p><h2 id="8-Extra-Line"><a class="header-anchor" href="#8-Extra-Line"></a>8. Extra Line</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">aux2 &lt;- data.frame(cyl = c(<span class="number">4</span>,<span class="number">6</span>,<span class="number">8</span>), x = c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>),y = c(<span class="number">10</span>,<span class="number">10</span>,<span class="number">10</span>),</span><br><span class="line">                   xend = c(<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>), yend = c(<span class="number">35</span>,<span class="number">35</span>,<span class="number">35</span>),</span><br><span class="line">                   x2 = c(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>), xend2= c(<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>))</span><br><span class="line">ggplot(mtcars, aes(x = drat)) +</span><br><span class="line">  geom_line(aes(y = mpg, colour = <span class="string">"mpg"</span>)) +</span><br><span class="line">  geom_line(aes(y = qsec, colour = <span class="string">"qsec"</span>)) +</span><br><span class="line">  geom_segment(aes(x = x, y = y, xend = xend, yend = yend, colour = <span class="string">"xiaopang"</span>),data= aux2, lty = <span class="number">2</span>) +</span><br><span class="line">  geom_segment(aes(x = x2, y = y, xend = xend2, yend = yend, colour = <span class="string">"xiaomei"</span>),data= aux2, lty = <span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><p><a name="9vymr"></a></p><h1>Themes</h1><br /><a name="OlI1o"></a>## 1. Axis<br /><a name="Pzlwo"></a>### 1.1 Switch Coordination<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#switch X and Y</span></span><br><span class="line">+ coord_flip()</span><br></pre></td></tr></table></figure></div><p><a name="T7Izn"></a></p><h3 id="1-2-Axis-Limits"><a class="header-anchor" href="#1-2-Axis-Limits"></a>1.2 Axis Limits</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">+ coord_cartesian(ylim = c(<span class="number">100</span>,<span class="number">200</span>), expand = <span class="literal">F</span>) <span class="comment"># moving the panel</span></span><br><span class="line">+ coord_fixed(ratio =<span class="number">2</span>) <span class="comment">#ratio = axis.y/axis.x</span></span><br><span class="line">+ expand_limits(y=c(-<span class="number">12</span>,<span class="number">18</span>)) <span class="comment"># similar like cartesian</span></span><br></pre></td></tr></table></figure></div><p><a name="VIwTX"></a></p><h3 id="1-3-Polar-Axis"><a class="header-anchor" href="#1-3-Polar-Axis"></a>1.3 Polar Axis</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ coord_polar(theta =<span class="string">"x"</span>, start = pi/<span class="number">3</span>)</span><br><span class="line">+ coord_polar(theta =<span class="string">"y"</span>, start = pi/<span class="number">3</span>)</span><br></pre></td></tr></table></figure></div><p><a name="BknYx"></a></p><h2 id="1-4-Scale-Axis"><a class="header-anchor" href="#1-4-Scale-Axis"></a>1.4 Scale Axis</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># https://www.cnblogs.com/wkslearner/p/5635184.html</span></span><br><span class="line">+scale_x_date(breaks=as.Date(c(<span class="string">"2016-06-06"</span>,<span class="string">"2016-06-13"</span>,<span class="string">"2016-06-20"</span>,<span class="string">"2016-06-27"</span>)),</span><br><span class="line">              labels=c(<span class="string">"06-06"</span>,<span class="string">"06-13"</span>,<span class="string">"06-20"</span>,<span class="string">"06-27"</span>),date_labels=<span class="string">"%y/%m/%d"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="unROd"></a></p><h2 id="2-Background"><a class="header-anchor" href="#2-Background"></a>2. Background</h2><p><a name="7InUF"></a></p><h3 id="2-1-remove"><a class="header-anchor" href="#2-1-remove"></a>2.1 remove</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+ theme(panel.grid.major =element_blank(),             <span class="comment">#栅格线1</span></span><br><span class="line">        panel.grid.minor = element_blank(),            <span class="comment">#栅格线2</span></span><br><span class="line">        panel.background = element_blank(),            <span class="comment">#滑板底层</span></span><br><span class="line">        axis.line = element_line(colour = <span class="string">"black"</span>),    <span class="comment">#轴线</span></span><br><span class="line">        axis.ticks=element_blank(),                    <span class="comment">#轴上点</span></span><br><span class="line">        axis.text.y=element_blank(),                   <span class="comment">#y文字</span></span><br><span class="line">        axis.title.x =elemet_blank(),                  <span class="comment">#y标题</span></span><br><span class="line">        legend.position=<span class="string">'none'</span>)                        <span class="comment">#删标注</span></span><br></pre></td></tr></table></figure></div><p><a name="Kt9wJ"></a></p><h3 id="2-2-background-color"><a class="header-anchor" href="#2-2-background-color"></a>2.2 background color</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">panel.background = element_rect(fill = <span class="string">"lightblue"</span>,</span><br><span class="line">                    colour = <span class="string">"lightblue"</span>,</span><br><span class="line">                    size = <span class="number">0.5</span>, linetype = <span class="string">"solid"</span>),</span><br></pre></td></tr></table></figure></div><p><a name="Zakzg"></a></p><h2 id="3-Texts"><a class="header-anchor" href="#3-Texts"></a>3. Texts</h2><p><a name="W3uCv"></a></p><h3 id="3-1-labs"><a class="header-anchor" href="#3-1-labs"></a>3.1 labs</h3><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">+ labs(title=<span class="string">"MPO"</span>, x=<span class="string">"Basket"</span>, y=<span class="string">"U/g"</span>)</span><br><span class="line">+ theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br></pre></td></tr></table></figure></div><br /><a name="sKvXX"></a>### 3.2 geom_text & geom_labels<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggrepel)</span><br><span class="line">+geom_text_repel(aes(label=variable))</span><br><span class="line">+geom_text(data=A,aes(x=V1,y=valuable,</span><br><span class="line">            label=row.names(A4), colour =row.names(A4)),nudge_x = <span class="number">0.5</span>)</span><br></pre></td></tr></table></figure></div><p><a name="uD0IC"></a></p><h3 id="3-3-Annotate"><a class="header-anchor" href="#3-3-Annotate"></a>3.3 Annotate</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">annotate(geom, x = <span class="literal">NULL</span>, y = <span class="literal">NULL</span>, xmin = <span class="literal">NULL</span>, xmax = <span class="literal">NULL</span>,</span><br><span class="line">  ymin = <span class="literal">NULL</span>, ymax = <span class="literal">NULL</span>, xend = <span class="literal">NULL</span>, yend = <span class="literal">NULL</span>, <span class="keyword">...</span>,</span><br><span class="line">  na.rm = <span class="literal">FALSE</span>)</span><br><span class="line">geom=<span class="string">"text"</span> |<span class="string">"rect"</span>| <span class="string">"segment"</span> | <span class="string">"pointrange"</span></span><br><span class="line"> + annotate(<span class="string">"segment"</span>, x = <span class="number">2</span>, xend = <span class="number">4</span>, y = <span class="number">15</span>, yend = <span class="number">25</span>, colour = <span class="string">"pink"</span>, size=<span class="number">3</span>, alpha=<span class="number">0.6</span>, arrow=arrow())</span><br></pre></td></tr></table></figure></div><p><a name="z7oYB"></a></p><h3 id="3-4-ggtitle"><a class="header-anchor" href="#3-4-ggtitle"></a>3.4 ggtitle</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggtitle(<span class="string">"AAA"</span>)</span><br><span class="line">theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br></pre></td></tr></table></figure></div><p>3.5 Switch x labels (text.x)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># add the limits first and substitu...</span></span><br><span class="line">+ scale_x_discrete(name =<span class="string">"Dose (mg)"</span>, limits=c(<span class="number">1</span>:<span class="number">119</span>),labels=as.character(A$X1))</span><br></pre></td></tr></table></figure></div><ol start="4"><li>Facet</li></ol><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+ facet_grid(Group ~ .)</span><br><span class="line"><span class="comment"># for GO enrichment</span></span><br><span class="line">+ facet_grid(. ~ Cate,scales = <span class="string">"free_x"</span>,space = <span class="string">"free"</span>)</span><br><span class="line">+ facet_wrap(~ V3, nrow = <span class="literal">NULL</span>, ncol = <span class="literal">NULL</span>, scales = <span class="string">"free"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="JEEuu"></a></p><h2 id="5-Levels"><a class="header-anchor" href="#5-Levels"></a>5. Levels</h2><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">table$X=factor(table$X, levels=table[[<span class="number">1</span>]])</span><br></pre></td></tr></table></figure></div><p><a name="TWMrw"></a></p><h2 id="6-theme-br"><a class="header-anchor" href="#6-theme-br"></a>6. theme()<br /></h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">+ theme(plot.title = element_text(hjust = <span class="number">0.5</span>),axis.text.x = element_text(angle = <span class="number">45</span>, hjust=<span class="number">1</span>))</span><br></pre></td></tr></table></figure></div><p><a name="cElq7"></a></p><h3 id="6-1-legend"><a class="header-anchor" href="#6-1-legend"></a>6.1 legend</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#rm legend</span></span><br><span class="line">+theme(legend.position=<span class="string">'none'</span>)</span><br><span class="line"><span class="comment">#("none", "left", "right", "bottom", "top", or two-element numeric vect)</span></span><br></pre></td></tr></table></figure></div><p><a name="KETyn"></a></p><h2 id=""><a class="header-anchor" href="#"></a></h2><p><a name="OUsTS"></a></p><h3 id="7-Color-patern"><a class="header-anchor" href="#7-Color-patern"></a>7. Color patern</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Example</span></span><br><span class="line">scale_fill_manual(values=c(<span class="string">"#FB882C"</span>,<span class="string">"#5B88A0"</span>))</span><br><span class="line">scale_fill_brewer + (<span class="keyword">...</span>, type = <span class="string">"seq"</span>, palette = <span class="number">1</span>, direction = <span class="number">1</span>, aesthetics = <span class="string">"colour"</span>)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Palettes:</span></span><br><span class="line"><span class="string">Diverging</span></span><br><span class="line"><span class="string">BrBG, PiYG, PRGn, PuOr, RdBu, RdGy, RdYlBu, RdYlGn, Spectral</span></span><br><span class="line"><span class="string">Qualitative</span></span><br><span class="line"><span class="string">Accent, Dark2, Paired, Pastel1, Pastel2, Set1, Set2, Set3</span></span><br><span class="line"><span class="string">Sequential</span></span><br><span class="line"><span class="string">Blues, BuGn, BuPu, GnBu, Greens, Greys, Oranges, OrRd, PuBu, PuBuGn, PuRd, Purples, RdPu, Reds, YlGn, YlGnBu, YlOrBr, YlOrRd</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(<span class="string">"ggthemes"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"RColorBrewer"</span>)</span><br><span class="line"><span class="comment"># Gradient</span></span><br><span class="line">scale_fill_gradient() 允许分配一组双色连续渐变，low=<span class="string">"white"</span>,high=<span class="string">"red"</span></span><br><span class="line">scale_fill_gradient2() 允许分配一组三色连续渐变，low=<span class="string">"blue"</span>,mid=<span class="string">"white"</span>,high=<span class="string">"red"</span></span><br><span class="line"><span class="comment"># sed a group of colour</span></span><br><span class="line">scale_fill_manual(values=c(<span class="string">"Linen"</span>,<span class="string">"Peru"</span>,<span class="string">"PeachPuff"</span>,<span class="string">"SandyBrown"</span>,<span class="string">"Chocolate"</span>))</span><br><span class="line"><span class="comment"># apply the Set on ggthemes</span></span><br><span class="line">+ scale_colour_XXX()  <span class="comment"># Tab to see more</span></span><br><span class="line">+ scale_color_gradient(low = <span class="string">"cyan"</span>,high = <span class="string">"red"</span>)</span><br></pre></td></tr></table></figure></div><table><thead><tr><th style="text-align:left"><code>scale_color_gradient(low = &quot;cyan&quot;,high = &quot;red&quot;)</code></th><th style="text-align:left"><code>scale_color_gradientn(values = seq(0,1,0.2),colours = c('cyan','blue','green','orange','red'))</code></th></tr></thead><tbody><tr><td style="text-align:left"><img src="https://img2018.cnblogs.com/blog/1870934/201912/1870934-20191227102909481-1067004589.png" alt="img"></td><td style="text-align:left"><img src="https://img2018.cnblogs.com/blog/1870934/201912/1870934-20191227102910055-326087900.png" alt="img"></td></tr><tr><td style="text-align:left"><a href="https://www.cnblogs.com/mmtinfo/p/12105987.html" target="_blank" rel="noopener">© 天使不设防 2019</a></td><td style="text-align:left"><a href="https://www.cnblogs.com/mmtinfo/p/12105987.html" target="_blank" rel="noopener">© 天使不设防 2019</a></td></tr></tbody></table><p><a name="W6HoY"></a></p><h1>More for plot</h1><p><a name="ZovW4"></a></p><h2 id="1-Cow-plot"><a class="header-anchor" href="#1-Cow-plot"></a>1. Cow plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(cowplot)</span><br><span class="line">+ draw_plot(p1,<span class="number">0</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>)+draw_plot(p2,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>)</span><br><span class="line">+draw_plot(pheat,<span class="number">0.5</span>,<span class="number">0</span>,<span class="number">0.5</span>,<span class="number">0.5</span>)</span><br><span class="line">+draw_plot_label(c(<span class="string">"A"</span>, <span class="string">"B"</span>), c(<span class="number">0</span>,<span class="number">0.5</span>), c(<span class="number">1</span>, <span class="number">1</span>), size = <span class="number">20</span>)</span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Xl,Xr,Yt,Yzoom</span></span><br><span class="line"><span class="string">draw_plot(p1,Xl,Yb,Xzoom,Yzoom,Pzoom)</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure></div><p><a name="LWW1q"></a></p><h2 id="2-Patch-Work"><a class="header-anchor" href="#2-Patch-Work"></a>2. Patch Work</h2><p>reference: <a href="https://www.jianshu.com/p/73057774b4cb" target="_blank" rel="noopener">尘世中一个迷途小书僮</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line">p1 &lt;- ggplot() + <span class="keyword">...</span></span><br><span class="line">p2 &lt;- ggplot() + <span class="keyword">...</span></span><br><span class="line">p1|p2</span><br><span class="line"></span><br><span class="line">p1/p2</span><br><span class="line"></span><br><span class="line">(p1|p2)|p2</span><br><span class="line">GGlay = <span class="string">'AA</span></span><br><span class="line"><span class="string">#B'</span></span><br><span class="line">p1 +p2 +plot_layout(design = GGlay)</span><br></pre></td></tr></table></figure></div><p><a name="sopow"></a></p><h2 id="3-Map"><a class="header-anchor" href="#3-Map"></a>3. Map</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(pacman)</span><br><span class="line"></span><br><span class="line">rladies &lt;- read_csv(url(<span class="string">"https://raw.githubusercontent.com/d4tagirl/R-Ladies-growth-maps/master/rladies.csv"</span>))%&gt;% select(-<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">p_load(tidyverse, gganimate, maps, ggthemes)</span><br><span class="line"></span><br><span class="line">ggplot()+borders(<span class="string">"world"</span>, color=<span class="string">"black"</span>, fill=<span class="string">"steelblue4"</span>) +</span><br><span class="line">                geom_point(data = rladies, aes(lon, lat, size=followers), color=<span class="string">"firebrick3"</span>,</span><br><span class="line">                alpha=<span class="number">0.6</span>)+scale_size_continuous(range = c(<span class="number">2</span>,<span class="number">8</span>),</span><br><span class="line">                breaks = c(<span class="number">250</span>, <span class="number">500</span>, <span class="number">750</span>, <span class="number">1000</span>)) +</span><br><span class="line">                labs(size=<span class="string">"Followers"</span>, title=<span class="string">"The development of R-Ladies'Twitter accounts"</span>,</span><br><span class="line">                x=<span class="literal">NULL</span>,y=<span class="literal">NULL</span>)+theme(text = element_text(family = <span class="string">"Times New Roman"</span>,</span><br><span class="line">                color = <span class="string">"deeppink"</span>),plot.title = element_text(size=<span class="number">40</span>,color = <span class="string">"#f9ba00"</span>),</span><br><span class="line">                plot.subtitle = element_text(size=<span class="number">14</span>),axis.ticks = element_blank(),</span><br><span class="line">                axis.text = element_blank(),panel.grid = element_blank(),</span><br><span class="line">                panel.background = element_rect(fill=<span class="string">"skyblue"</span>),</span><br><span class="line">                plot.background = element_rect(fill = <span class="string">"#333333"</span>),</span><br><span class="line">                legend.position = c(<span class="number">0.18</span>,<span class="number">0.36</span>),legend.background = element_blank(),</span><br><span class="line">                legend.key = element_blank(),legend.text = element_text(size = <span class="number">24</span>),</span><br><span class="line">                legend.title = element_text(size=<span class="number">28</span>, color = <span class="string">"orangered3"</span>))</span><br></pre></td></tr></table></figure></div><p>More for maps, please go to see: <a href="https://www.yuque.com/liuwenkan/bni63i/bu4wnw" target="_blank" rel="noopener">GGplot Map</a></p><p><a name="fuDYo"></a></p><h1>Extra</h1><p><a name="ZY13A"></a></p><h2 id="Details-for-theme"><a class="header-anchor" href="#Details-for-theme"></a>Details for theme</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">##########################</span></span><br><span class="line"><span class="comment">## Parameter of theme</span></span><br><span class="line"><span class="comment">##########################</span></span><br><span class="line">line  <span class="comment">#all line elements (element_line)</span></span><br><span class="line">rect  <span class="comment">#all rectangular elements (element_rect)</span></span><br><span class="line">text  <span class="comment">#all text elements (element_text)</span></span><br><span class="line">title <span class="comment">#all title elements: plot, axes, legends (element_text; inherits from text)</span></span><br><span class="line">aspect.ratio  <span class="comment">#aspect ratio of the panel</span></span><br><span class="line">axis.title  <span class="comment">#label of axes (element_text; inherits from text)</span></span><br><span class="line">axis.title.x  <span class="comment">#x axis label (element_text; inherits from axis.title)</span></span><br><span class="line">axis.title.y  <span class="comment">#y axis label (element_text; inherits from axis.title)</span></span><br><span class="line">axis.tex  <span class="comment">#tick labels along axes (element_text; inherits from text)</span></span><br><span class="line">axis.text.x <span class="comment">#x axis tick labels (element_text; inherits from axis.text)</span></span><br><span class="line">axis.text.y <span class="comment">#y axis tick labels (element_text; inherits from axis.text)</span></span><br><span class="line">axis.ticks  <span class="comment">#tick marks along axes (element_line; inherits from line)</span></span><br><span class="line">axis.ticks.x  <span class="comment">#x axis tick marks (element_line; inherits from axis.ticks)</span></span><br><span class="line">axis.ticks.y  <span class="comment">#y axis tick marks (element_line; inherits from axis.ticks)</span></span><br><span class="line">axis.ticks.length <span class="comment">#length of tick marks (unit)</span></span><br><span class="line">axis.line <span class="comment">#lines along axes (element_line; inherits from line)</span></span><br><span class="line">axis.line.x <span class="comment">#line along x axis (element_line; inherits from axis.line)</span></span><br><span class="line">axis.line.y <span class="comment">#line along y axis (element_line; inherits from axis.line)</span></span><br><span class="line">legend.background <span class="comment">#background of legend (element_rect; inherits from rect)</span></span><br><span class="line">legend.margin <span class="comment">#extra space added around legend (unit)</span></span><br><span class="line">legend.key  <span class="comment">#background underneath legend keys (element_rect; inherits from rect)</span></span><br><span class="line">legend.key.size <span class="comment">#size of legend keys (unit; inherits from legend.key.size)</span></span><br><span class="line">legend.key.height <span class="comment">#key background height (unit; inherits from legend.key.size)</span></span><br><span class="line">legend.key.width  <span class="comment">#key background width (unit; inherits from legend.key.size)</span></span><br><span class="line">legend.text <span class="comment">#legend item labels (element_text; inherits from text)</span></span><br><span class="line">legend.text.align <span class="comment">#alignment of legend labels (number from 0 (left) to 1 (right))</span></span><br><span class="line">legend.title  <span class="comment">#title of legend (element_text; inherits from title)</span></span><br><span class="line">legend.title.align  <span class="comment">#alignment of legend title (number from 0 (left) to 1 (right))</span></span><br><span class="line">legend.position <span class="comment">#the position of legends ("none", "left", "right", "bottom", "top", or two-element numeric vector)</span></span><br><span class="line">legend.direction  <span class="comment">#layout of items in legends ("horizontal" or "vertical")</span></span><br><span class="line">legend.justification  <span class="comment">#anchor point for positioning legend inside plot ("center" or two-element numeric vector)</span></span><br><span class="line">legend.box  <span class="comment">#arrangement of multiple legends ("horizontal" or "vertical")</span></span><br><span class="line">legend.box.just <span class="comment">#justification of each legend within the overall bounding box, when there are multiple legends ("top", "bottom", "left", or "right")</span></span><br><span class="line">panel.background  <span class="comment">#background of plotting area, drawn underneath plot (element_rect; inherits from rect)</span></span><br><span class="line">panel.border  <span class="comment">#border around plotting area, drawn on top of plot so that it covers tick marks and grid lines. This should be used with fill=NA(element_rect; inherits from rect)</span></span><br><span class="line">panel.margin  <span class="comment">#margin around facet panels (unit)</span></span><br><span class="line">panel.margin.x  <span class="comment">#horizontal margin around facet panels (unit; inherits from panel.margin)</span></span><br><span class="line">panel.margin.y  <span class="comment">#vertical margin around facet panels (unit; inherits from panel.margin)</span></span><br><span class="line">panel.grid  <span class="comment">#grid lines (element_line; inherits from line)</span></span><br><span class="line">panel.grid.major  <span class="comment">#major grid lines (element_line; inherits from panel.grid)</span></span><br><span class="line">panel.grid.minor  <span class="comment">#minor grid lines (element_line; inherits from panel.grid)</span></span><br><span class="line">panel.grid.major.x  <span class="comment">#vertical major grid lines (element_line; inherits from panel.grid.major)</span></span><br><span class="line">panel.grid.major.y  <span class="comment">#horizontal major grid lines (element_line; inherits from panel.grid.major)</span></span><br><span class="line">panel.grid.minor.x  <span class="comment">#vertical minor grid lines (element_line; inherits from panel.grid.minor)</span></span><br><span class="line">panel.grid.minor.y  <span class="comment">#horizontal minor grid lines (element_line; inherits from panel.grid.minor)</span></span><br><span class="line">panel.ontop <span class="comment">#option to place the panel (background, gridlines) over the data layers. Usually used with a transparent or blankpanel.background. (logical)</span></span><br><span class="line">plot.background <span class="comment">#background of the entire plot (element_rect; inherits from rect)</span></span><br><span class="line">plot.title  <span class="comment">#plot title (text appearance) (element_text; inherits from title)</span></span><br><span class="line">plot.margin <span class="comment">#margin around entire plot (unit with the sizes of the top, right, bottom, and left margins)</span></span><br><span class="line">strip.background  <span class="comment">#background of facet labels (element_rect; inherits from rect)</span></span><br><span class="line">strip.text  <span class="comment">#facet labels (element_text; inherits from text)</span></span><br><span class="line">strip.text.x  <span class="comment">#facet labels along horizontal direction (element_text; inherits from strip.text)</span></span><br><span class="line">strip.text.y  <span class="comment">#facet labels along vertical direction (element_text; inherits from strip.text)</span></span><br><span class="line">strip.switch.pad.grid <span class="comment">#space between strips and axes when strips are switched (unit)</span></span><br><span class="line">strip.switch.pad.wrap <span class="comment">#space between strips and axes when strips are switched (unit)</span></span><br></pre></td></tr></table></figure></div><p><a name="G1713"></a></p><h2 id="Details-for-element"><a class="header-anchor" href="#Details-for-element"></a>Details for element</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">margin(t = <span class="number">0</span>, r = <span class="number">0</span>, b = <span class="number">0</span>, l = <span class="number">0</span>, unit = <span class="string">"pt"</span>)</span><br><span class="line">element_blank()</span><br><span class="line">element_rect(fill = <span class="literal">NULL</span>, colour = <span class="literal">NULL</span>, size = <span class="literal">NULL</span>,</span><br><span class="line">  linetype = <span class="literal">NULL</span>, color = <span class="literal">NULL</span>, inherit.blank = <span class="literal">FALSE</span>)</span><br><span class="line">element_line(colour = <span class="literal">NULL</span>, size = <span class="literal">NULL</span>, linetype = <span class="literal">NULL</span>,</span><br><span class="line">  lineend = <span class="literal">NULL</span>, color = <span class="literal">NULL</span>, arrow = <span class="literal">NULL</span>,</span><br><span class="line">  inherit.blank = <span class="literal">FALSE</span>)</span><br><span class="line">element_text(family = <span class="literal">NULL</span>, face = <span class="literal">NULL</span>, colour = <span class="literal">NULL</span>,</span><br><span class="line">  size = <span class="literal">NULL</span>, hjust = <span class="literal">NULL</span>, vjust = <span class="literal">NULL</span>, angle = <span class="literal">NULL</span>,</span><br><span class="line">  lineheight = <span class="literal">NULL</span>, color = <span class="literal">NULL</span>, margin = <span class="literal">NULL</span>, debug = <span class="literal">NULL</span>,</span><br><span class="line">  inherit.blank = <span class="literal">FALSE</span>)</span><br><span class="line">rel(x)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GGplot 杂耍</title>
      <link href="/R/GGplot_tricks.html"/>
      <url>/R/GGplot_tricks.html</url>
      
        <content type="html"><![CDATA[<h1>GGplot 杂耍</h1><p><a name="kECDr"></a></p><h1>1.点</h1><p><a name="wOVXJ"></a></p><h1>2.线</h1><p><a name="1aCF2"></a></p><h2 id="曲线链接两点"><a class="header-anchor" href="#曲线链接两点"></a>曲线链接两点</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="comment">#先从横线线入手</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># r*sin(theta/2)=d/2</span></span><br><span class="line"><span class="comment">#2.随机圈上圆点</span></span><br><span class="line"><span class="comment"># r^2 = (x+a)^2 + (y+b)^2</span></span><br><span class="line"><span class="comment"># D -&gt; centerD0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#1.两点距离</span></span><br><span class="line">Distent &lt;- <span class="keyword">function</span>(P1,P2)&#123;</span><br><span class="line">  R = sqrt((P1[<span class="number">1</span>]-P2[<span class="number">1</span>])^<span class="number">2</span> + (P1[<span class="number">2</span>]-P2[<span class="number">2</span>])^<span class="number">2</span>)</span><br><span class="line">  <span class="keyword">return</span>(R)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#2.映射到平行</span></span><br><span class="line">Trans &lt;- <span class="keyword">function</span>(P1,P2)&#123;</span><br><span class="line">  D_s = Distent(P1,P2)</span><br><span class="line">  P2=c(P1[<span class="number">1</span>]+D_s,P1[<span class="number">2</span>])</span><br><span class="line">  <span class="keyword">return</span>(P2)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">#画弧</span></span><br><span class="line">Cir_D &lt;-<span class="keyword">function</span>(P1,P2,D=c(<span class="number">0</span>,<span class="number">0</span>),r=<span class="number">1</span>,Space=pi/<span class="number">7</span>)&#123;</span><br><span class="line">    X = seq(P1[<span class="number">1</span>],P2[<span class="number">1</span>],by=Space)</span><br><span class="line">    Y = sqrt(r^<span class="number">2</span>-(X-D[<span class="number">1</span>])^<span class="number">2</span>)+D[<span class="number">2</span>]</span><br><span class="line">    S=data.frame(X,Y)</span><br><span class="line"><span class="keyword">return</span>(S)&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#整合</span></span><br><span class="line">Connet &lt;- <span class="keyword">function</span>(P1,P2,Space=pi/<span class="number">7</span>,theta=pi/<span class="number">2</span>)&#123;</span><br><span class="line">    P3 = Trans(P1,P2)</span><br><span class="line">    D=(P1+P3)/<span class="number">2</span> <span class="comment">#中点</span></span><br><span class="line">    d=sqrt((P1-P3)[<span class="number">1</span>]^<span class="number">2</span> + (P1-P3)[<span class="number">2</span>]^<span class="number">2</span>) <span class="comment">#得长</span></span><br><span class="line">    r=(d/<span class="number">2</span>)/sin(theta/<span class="number">2</span>)</span><br><span class="line">    l=(d/<span class="number">2</span>)/tan(theta/<span class="number">2</span>)</span><br><span class="line">    Cen_x =D[<span class="number">1</span>]</span><br><span class="line">    Cen_y = D[<span class="number">2</span>]-l</span><br><span class="line">    D=c(Cen_x,Cen_y)</span><br><span class="line">    S=Cir_D(P1,P3,D,r,Space=Space)</span><br><span class="line">    <span class="keyword">if</span>(P1[<span class="number">1</span>] -P2[<span class="number">1</span>] &gt; <span class="number">0</span>)&#123;</span><br><span class="line">        S$Y = (-<span class="number">1</span>)*S$Y</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">#List = Turn_back(P1,P3,P2)</span></span><br><span class="line">    Sin=(P2-P1)[<span class="number">2</span>]/sqrt(sum((P2-P1)^<span class="number">2</span>))</span><br><span class="line">    Cos=(P2-P1)[<span class="number">1</span>]/sqrt(sum((P2-P1)^<span class="number">2</span>))</span><br><span class="line">    X = S$X*Cos-S$Y*Sin</span><br><span class="line">    Y = S$X*Sin+S$Y*Cos</span><br><span class="line">    Line = data.frame(X=X-(X[<span class="number">1</span>]-P1[<span class="number">1</span>]),Y=Y-(Y[<span class="number">1</span>]-P1[<span class="number">2</span>]))</span><br><span class="line"><span class="comment">#    p &lt;- ggplot(S)+geom_point(aes(X,Y))+  </span></span><br><span class="line"><span class="comment">#        geom_label(aes(x=P1[1],y=P1[2],label="P1",color="P1"))+  </span></span><br><span class="line"><span class="comment">#        geom_point(aes(x=P3[1],y=P3[2],color="P3"))+  </span></span><br><span class="line"><span class="comment">#        geom_point(aes(x=D[1],y=D[2],color="center"))+  </span></span><br><span class="line"><span class="comment">#        geom_label(aes(x=P2[1],y=P2[2],size=2,label="P2"))+  </span></span><br><span class="line"><span class="comment">#    geom_point(data=Line,aes(X,Y),color='red')</span></span><br><span class="line"><span class="comment">#   print(p)</span></span><br><span class="line"><span class="comment">#       p &lt;- geom_point(data=Line,aes(X,Y,group=1),color='red')</span></span><br><span class="line">    <span class="keyword">return</span>(Line)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">P1 = c(<span class="number">0</span>,<span class="number">0</span>)</span><br><span class="line">P2 = c(<span class="number">6</span>,<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">Connet(P1,P2)</span><br><span class="line"></span><br><span class="line">ggplot(Connet(P1,P2,pi/<span class="number">15</span>),aes(X,Y))+geom_path()</span><br></pre></td></tr></table></figure></div><p>原理：</p><ul><li>1.转成平行，方便找圆心</li><li>2.画弧(黑色)</li><li>3.旋转(红色)</li></ul><p><img src="https://i.loli.net/2020/06/20/Jg4zHEPGQalC3ZI.jpg" alt="123"><br><br /></p><p><a name="oejLO"></a></p><h2 id="Combine-The-Whole-function"><a class="header-anchor" href="#Combine-The-Whole-function"></a>Combine The Whole function</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">#There is a funning thing I found.</span><br><span class="line">#When I try to name it as geom_curve, I cheked the original geom function and find</span><br><span class="line"># THIS FUNCTION EXIST ALREADY!! So, why should I waste so much of time to write this function &#x3D; &#x3D;</span><br><span class="line">geom_curve_C &lt;- function(P1,P2,Space&#x3D;pi&#x2F;20,theta&#x3D;pi&#x2F;2)&#123;</span><br><span class="line">    P3 &#x3D; Trans(P1,P2)</span><br><span class="line">    D&#x3D;(P1+P3)&#x2F;2 #中点</span><br><span class="line">    d&#x3D;sqrt((P1-P3)[1]^2 + (P1-P3)[2]^2) #得长</span><br><span class="line">    r&#x3D;(d&#x2F;2)&#x2F;sin(theta&#x2F;2)</span><br><span class="line">    l&#x3D;(d&#x2F;2)&#x2F;tan(theta&#x2F;2)</span><br><span class="line">    Cen_x &#x3D;D[1]</span><br><span class="line">    Cen_y &#x3D; D[2]-l</span><br><span class="line">    D&#x3D;c(Cen_x,Cen_y)</span><br><span class="line">    S&#x3D;Cir_D(P1,P3,D,r,Space&#x3D;Space)</span><br><span class="line">    if(P1[1] -P2[1] &gt; 0)&#123;</span><br><span class="line">        S$Y &#x3D; (-1)*S$Y</span><br><span class="line">    &#125;</span><br><span class="line">    #List &#x3D; Turn_back(P1,P3,P2)</span><br><span class="line">    Sin&#x3D;(P2-P1)[2]&#x2F;sqrt(sum((P2-P1)^2))</span><br><span class="line">    Cos&#x3D;(P2-P1)[1]&#x2F;sqrt(sum((P2-P1)^2))</span><br><span class="line">    X &#x3D; S$X*Cos-S$Y*Sin</span><br><span class="line">    Y &#x3D; S$X*Sin+S$Y*Cos</span><br><span class="line">    Line &#x3D; data.frame(X&#x3D;X-(X[1]-P1[1]),Y&#x3D;Y-(Y[1]-P1[2]))</span><br><span class="line">    p &lt;- geom_path(data&#x3D;Connet(P1,P2,pi&#x2F;20),aes(x&#x3D;X,y&#x3D;Y))</span><br><span class="line">    return(p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">P1 &#x3D; c(0,0)</span><br><span class="line">P2 &#x3D; c(6,0)</span><br><span class="line"></span><br><span class="line">ggplot + geom_curve_C(P1,P2)</span><br></pre></td></tr></table></figure></div><p><a name="rlfqy"></a></p><h2 id="荧光经纬线"><a class="header-anchor" href="#荧光经纬线"></a>荧光经纬线</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">经纬线 &lt;- <span class="keyword">function</span>(底色=<span class="string">'grey'</span>,边色=<span class="string">"#E9FEFF"</span>,Space=<span class="number">30</span>)&#123;</span><br><span class="line">    p  &lt;- ggplot() +</span><br><span class="line">    <span class="comment">#geom_vline(aes(xintercept=seq(-180,+180,by=Space)),color=颜色,size=1.3,alpha=0.5)+</span></span><br><span class="line">    geom_vline(aes(xintercept=seq(-<span class="number">180</span>,+<span class="number">180</span>,by=Space)),color=边色,size=<span class="number">2</span>,alpha=<span class="number">0.7</span>)+</span><br><span class="line">    geom_vline(aes(xintercept=seq(-<span class="number">180</span>,+<span class="number">180</span>,by=Space)),color=底色,linetype=<span class="string">"dashed"</span>)+</span><br><span class="line">    <span class="comment">#geom_hline(aes(yintercept=seq(-80,+80,by=Space)),color=颜色,size=1.3,alpha=0.5)+</span></span><br><span class="line">    geom_hline(aes(yintercept=seq(-<span class="number">80</span>,+<span class="number">80</span>,by=Space)),color=边色,size=<span class="number">2</span>,alpha=<span class="number">0.7</span>)+</span><br><span class="line">    geom_hline(aes(yintercept=seq(-<span class="number">80</span>,+<span class="number">80</span>,by=Space)),color=底色,linetype=<span class="string">"dashed"</span>)+</span><br><span class="line">    theme_map()</span><br><span class="line">    <span class="keyword">return</span>(p)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">经纬线()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/c7kHBxtQuwYA5DU.png" alt="111"><br><a name="jljO2"></a></p><h1>3. theme</h1><p><a name="VcRsA"></a></p><h2 id="文字"><a class="header-anchor" href="#文字"></a>文字</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">theme_text &lt;- <span class="keyword">function</span>()&#123;</span><br><span class="line">  theme(axis.text.x=element_text(angle=<span class="number">45</span>, hjust=<span class="number">1</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GGradar</title>
      <link href="/R/GGradar.html"/>
      <url>/R/GGradar.html</url>
      
        <content type="html"><![CDATA[<h1>GGradar</h1><p><img src="https://s1.ax1x.com/2020/08/13/dSoVOO.png" alt="head"></p><p>Project: <a href="https://github.com/ricardo-bion/ggradar" target="_blank" rel="noopener">ricardo-bion 2019</a></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">remotes::install_github(<span class="string">'ricardo-bion/ggradar'</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggradar)</span><br><span class="line"></span><br><span class="line">mydata&lt;-matrix(runif(<span class="number">40</span>,<span class="number">0</span>,<span class="number">1</span>),<span class="number">5</span>,<span class="number">8</span>)</span><br><span class="line">rownames(mydata) &lt;- LETTERS[<span class="number">1</span>:<span class="number">5</span>]</span><br><span class="line">colnames(mydata) &lt;- c(<span class="string">"Apple"</span>,<span class="string">"Google"</span>,<span class="string">"Facebook"</span>,<span class="string">"Amozon"</span>,<span class="string">"Tencent"</span>,<span class="string">"Alibaba"</span>,<span class="string">"Baidu"</span>,<span class="string">"Twitter"</span>)</span><br><span class="line">mynewdata&lt;-data.frame(mydata)</span><br><span class="line">Name&lt;-c(<span class="string">"USA"</span>,<span class="string">"CHN"</span>,<span class="string">"UK"</span>,<span class="string">"RUS"</span>,<span class="string">"JP"</span>)</span><br><span class="line">mynewdata&lt;-data.frame(Name,mynewdata)</span><br><span class="line">ggradar(mynewdata)</span><br><span class="line"></span><br><span class="line">ggradar(mynewdata) + theme(legend.position = <span class="string">'none'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dSoemD.png" alt="Sec"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#Data structure</span></span><br><span class="line"><span class="string">''</span><span class="string">'</span></span><br><span class="line"><span class="string">Name     Apple    Google  Facebook    Amozon    Tencent    Alibaba     Baidu</span></span><br><span class="line"><span class="string">A  USA 0.6028703 0.9975856 0.4771023 0.8630967 0.21543389 0.78643566 0.7611366</span></span><br><span class="line"><span class="string">B  CHN 0.3853622 0.7067794 0.4991334 0.8006687 0.47394478 0.68875340 0.1547279</span></span><br><span class="line"><span class="string">C   UK 0.2634778 0.3165925 0.8032880 0.5479650 0.87007110 0.01701491 0.3585789</span></span><br><span class="line"><span class="string">D  RUS 0.9749844 0.6391640 0.0542372 0.2777984 0.04970435 0.38795458 0.4374871</span></span><br><span class="line"><span class="string">E   JP 0.3928207 0.5548013 0.5891342 0.5367423 0.69436110 0.48937538 0.1104125</span></span><br><span class="line"><span class="string">'</span><span class="string">''</span></span><br></pre></td></tr></table></figure></div><p><a name="TLyND"></a></p><h2 id="Arguments"><a class="header-anchor" href="#Arguments"></a>Arguments</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ggradar(data,axis.label.size = <span class="number">4</span>,</span><br><span class="line">grid.label.size =<span class="number">7</span>,</span><br><span class="line">group.line.width = <span class="number">1</span>,</span><br><span class="line">group.point.size = <span class="number">3</span>,</span><br><span class="line">plot.title = <span class="string">'这啥？'</span>)</span><br></pre></td></tr></table></figure></div><h1>fmsb</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(fmsb)</span><br><span class="line"></span><br><span class="line">set.seed(<span class="number">99</span>)</span><br><span class="line">data=as.data.frame(matrix( sample( <span class="number">0</span>:<span class="number">20</span>, <span class="number">15</span>, replace=<span class="literal">F</span>) , ncol=<span class="number">5</span>))</span><br><span class="line">colnames(data)=c(<span class="string">"math"</span>, <span class="string">"english"</span>, <span class="string">"biology"</span>, <span class="string">"music"</span>, <span class="string">"R-coding"</span>)</span><br><span class="line">rownames(data)=paste(<span class="string">"mister"</span>, letters[<span class="number">1</span>:<span class="number">3</span>] , sep=<span class="string">"-"</span>)</span><br><span class="line"><span class="comment"># 用于生成雷达图的最大最小值</span></span><br><span class="line">data=rbind(rep(<span class="number">20</span>,<span class="number">5</span>) , rep(<span class="number">0</span>,<span class="number">5</span>) , data)</span><br><span class="line">colors_border=c( rgb(<span class="number">0.2</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.9</span>), rgb(<span class="number">0.8</span>,<span class="number">0.2</span>,<span class="number">0.5</span>,<span class="number">0.9</span>) , rgb(<span class="number">0.7</span>,<span class="number">0.5</span>,<span class="number">0.1</span>,<span class="number">0.9</span>))</span><br><span class="line">colors_in=c( rgb(<span class="number">0.2</span>,<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.4</span>), rgb(<span class="number">0.8</span>,<span class="number">0.2</span>,<span class="number">0.5</span>,<span class="number">0.4</span>) , rgb(<span class="number">0.7</span>,<span class="number">0.5</span>,<span class="number">0.1</span>,<span class="number">0.4</span>))</span><br><span class="line"></span><br><span class="line">radarchart( data, axistype=<span class="number">1</span>,</span><br><span class="line">  pcol=colors_border , pfcol=colors_in , plwd=<span class="number">4</span>, plty=<span class="number">1</span>,</span><br><span class="line">  cglcol=<span class="string">"grey"</span>, cglty=<span class="number">1</span>, axislabcol=<span class="string">"grey"</span>,</span><br><span class="line">  caxislabels=seq(<span class="number">0</span>,<span class="number">20</span>,<span class="number">5</span>), cglwd=<span class="number">0.8</span>, vlcex=<span class="number">0.8</span>)</span><br><span class="line"></span><br><span class="line">legend(x=<span class="number">0.7</span>, y=<span class="number">1</span>, legend = rownames(data[-c(<span class="number">1</span>,<span class="number">2</span>),]), bty = <span class="string">"n"</span>,</span><br><span class="line">  pch=<span class="number">20</span>, col=colors_in , text.col = <span class="string">"grey"</span>, cex=<span class="number">1.2</span>, pt.cex=<span class="number">3</span>)</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Machine Learning (out of date)</title>
      <link href="/R/Machine_Learning.html"/>
      <url>/R/Machine_Learning.html</url>
      
        <content type="html"><![CDATA[<h1 id="Machine-Learning-out-of-date"><a href="#Machine-Learning-out-of-date" class="headerlink" title="Machine Learning (out of date)"></a>Machine Learning (out of date)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">library</span>(tidyverse)</span><br><span class="line"><span class="keyword">library</span>(rpart)</span><br><span class="line"><span class="keyword">library</span>(randomForest)</span><br><span class="line">a &lt;- read_csv(<span class="string">"../input/melb_data.csv"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># train a decision tree based on our dataset</span></span><br><span class="line">fit &lt;- rpart(Price ~ Rooms + Bathroom + Landsize + BuildingArea + YearBuilt + Lattitude + Longtitude, data = a)</span><br><span class="line"></span><br><span class="line">plot(fit, uniform=<span class="literal">TRUE</span>) +text(fit, cex=<span class="number">1.6</span>)</span><br><span class="line">print(head(melbourne_data))</span><br><span class="line">print(predict(fit, head(melbourne_data)))</span><br><span class="line">print(head(melbourne_data$Price))</span><br><span class="line"></span><br><span class="line"><span class="comment">#### Train and Test</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(modelr)</span><br><span class="line">mae(model = fit, data = a)</span><br><span class="line"></span><br><span class="line">splitData &lt;- resample_partition(a, c(test = <span class="number">0.3</span>, train = <span class="number">0.7</span>))</span><br><span class="line">lapply(splitData, dim)</span><br><span class="line"></span><br><span class="line">fit2 &lt;- rpart(Price ~ Rooms + Bathroom + Landsize + BuildingArea + YearBuilt + Lattitude + Longtitude, data = splitData$train)</span><br><span class="line"></span><br><span class="line">mae(model = fit2, data = splitData$test)</span><br><span class="line"></span><br><span class="line"><span class="comment">####Built function</span></span><br><span class="line">get_mae &lt;- <span class="keyword">function</span>(maxdepth, target, predictors, training_data, testing_data)</span><br><span class="line">&#123;</span><br><span class="line">predictors &lt;- paste(predictors, collapse=<span class="string">"+"</span>)</span><br><span class="line">formula &lt;- as.formula(paste(target,<span class="string">"~"</span>,predictors,sep = <span class="string">""</span>))</span><br><span class="line">model &lt;- rpart(formula, data = training_data,control = rpart.control(maxdepth = maxdepth))</span><br><span class="line">mae &lt;- mae(model, testing_data)</span><br><span class="line"><span class="keyword">return</span>(mae)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">target &lt;- <span class="string">"Price"</span></span><br><span class="line">predictors &lt;-  c(<span class="string">"Rooms"</span>,<span class="string">"Bathroom"</span>,<span class="string">"Landsize"</span>,<span class="string">"BuildingArea"</span>,<span class="string">"YearBuilt"</span>,<span class="string">"Lattitude"</span>,<span class="string">"Longtitude"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">10</span>)</span><br><span class="line">&#123;</span><br><span class="line">   mae &lt;- get_mae(maxdepth = i, target = target, predictors = predictors, training_data = splitData$train, testing_data = splitData$test)</span><br><span class="line">   print(glue::glue(<span class="string">"Maxdepth: "</span>,i,<span class="string">"\t MAE: "</span>,mae))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">####MODEL with training and repair</span></span><br><span class="line">model &lt;- rpart(formula, data = splitData$train ,control = rpart.control(maxdepth = <span class="number">5</span>))</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>NetWorkPlot</title>
      <link href="/R/NetWorkPlot.html"/>
      <url>/R/NetWorkPlot.html</url>
      
        <content type="html"><![CDATA[<h1>NetWorkPlot</h1><h1>Igraph</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(htmlwidgets)</span><br><span class="line">saveWidget(P,<span class="string">"_bar.html"</span>, selfcontained = <span class="literal">F</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(igraph)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Create data</span></span><br><span class="line">set.seed(<span class="number">1</span>)</span><br><span class="line">data=matrix(sample(<span class="number">0</span>:<span class="number">1</span>, <span class="number">100</span>, replace=<span class="literal">TRUE</span>, prob=c(<span class="number">0.8</span>,<span class="number">0.2</span>)), nc=<span class="number">10</span>)</span><br><span class="line">network=graph_from_adjacency_matrix(data , mode=<span class="string">'undirected'</span>, diag=<span class="literal">F</span> )</span><br><span class="line"></span><br><span class="line"><span class="comment">#Default network</span></span><br><span class="line">par(mar=c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>))</span><br><span class="line">plot(network)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nlbi2F" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nlbi2F.png" alt="Nlbi2F.png"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">plot(network,</span><br><span class="line">vertex.color = rgb(<span class="number">0.8</span>,<span class="number">0.2</span>,<span class="number">0.2</span>,<span class="number">0.9</span>),           <span class="comment"># Node color</span></span><br><span class="line">vertex.frame.color = <span class="string">"Forestgreen"</span>,            <span class="comment"># Node border color</span></span><br><span class="line">vertex.shape=c(<span class="string">"circle"</span>,<span class="string">"square"</span>),             <span class="comment"># One of “none”, “circle”, “square”, “csquare”, “rectangle” “crectangle”, “vrectangle”, “pie”, “raster”, or “sphere”</span></span><br><span class="line">vertex.size=c(<span class="number">15</span>:<span class="number">24</span>),                          <span class="comment"># Size of the node (default is 15)</span></span><br><span class="line">vertex.size2=<span class="literal">NA</span>,                               <span class="comment"># The second size of the node (e.g. for a rectangle)</span></span><br><span class="line">edge.curved=<span class="number">0.8</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NlbRiV" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlbRiV.png" alt="NlbRiV.png"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># color palette</span></span><br><span class="line"><span class="keyword">library</span>(RColorBrewer)</span><br><span class="line">coul = brewer.pal(nlevels(as.factor(mtcars$cyl)), <span class="string">"Set2"</span>)</span><br><span class="line"><span class="comment"># Map the color to cylinders</span></span><br><span class="line">my_color=coul[as.numeric(as.factor(mtcars$cyl))]</span><br><span class="line"></span><br><span class="line"><span class="comment"># plot</span></span><br><span class="line">par(bg=<span class="string">"grey13"</span>, mar=c(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>))</span><br><span class="line">set.seed(<span class="number">4</span>)</span><br><span class="line">plot(network,</span><br><span class="line">    vertex.size=<span class="number">12</span>,</span><br><span class="line">    vertex.color=my_color,</span><br><span class="line">    vertex.label.cex=<span class="number">0.7</span>,</span><br><span class="line">    vertex.label.color=<span class="string">"white"</span>,</span><br><span class="line">    vertex.frame.color=<span class="string">"transparent"</span></span><br><span class="line">    )</span><br><span class="line">text(<span class="number">0</span>,<span class="number">0</span>,<span class="string">"The network chart of the mtcars dataset"</span>,col=<span class="string">"white"</span>)</span><br><span class="line">text(<span class="number">0.2</span>,-<span class="number">0.1</span>,<span class="string">" - by the R graph gallery"</span>,col=<span class="string">"white"</span>)</span><br><span class="line">legend(x=-<span class="number">0.6</span>, y=-<span class="number">0.12</span>, legend=paste( levels(as.factor(mtcars$cyl)), <span class="string">" cylinders"</span>, sep=<span class="string">""</span>), col = coul , bty = <span class="string">"n"</span>, pch=<span class="number">20</span> , pt.cex = <span class="number">2</span>, cex = <span class="number">1</span>, text.col=<span class="string">"white"</span> , horiz = <span class="literal">T</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NlbSU0" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlbSU0.png" alt="NlbSU0.png"></a></p><h1>NetworkD3</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(networkD3)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Load data</span></span><br><span class="line">data(MisLinks)</span><br><span class="line">data(MisNodes)</span><br><span class="line">forceNetwork(Links=MisLinks, <span class="comment">#读入基因之间的关系列表，基因以数字为编号，从0开始；value可用来设置基因间连线的宽度</span></span><br><span class="line">    Nodes=MisNodes, <span class="comment">#基因信息，以对应编号的大小排序</span></span><br><span class="line">    Source=<span class="string">"source"</span>, <span class="comment">#指定Links文件中的源节点</span></span><br><span class="line">    Target=<span class="string">"target"</span>, <span class="comment">#指定Links文件中的靶节点</span></span><br><span class="line">    Value=<span class="string">"value"</span>, <span class="comment">#设定基因间连线的宽度</span></span><br><span class="line">    NodeID=<span class="string">"name"</span>, <span class="comment">#指定节点显示的标签</span></span><br><span class="line">    fontSize=<span class="number">20</span>, <span class="comment">#设定节点标签的字号，单位为像素</span></span><br><span class="line">    Group=<span class="string">"group"</span>, <span class="comment">#对节点进行分组，这里可根据基因的功能进行分组，配置不同颜色</span></span><br><span class="line">    opacity=<span class="number">0.8</span>, <span class="comment">#指定图像的不透明度</span></span><br><span class="line">    zoom=<span class="literal">TRUE</span>, <span class="comment">#是否允许图像缩放</span></span><br><span class="line">    arrows=<span class="literal">TRUE</span>, <span class="comment">#连线是否添加箭头，显示方向</span></span><br><span class="line">    opacityNoHover=<span class="number">0.7</span>, <span class="comment">#鼠标悬停前，节点标签的不透明度</span></span><br><span class="line">    legend=<span class="literal">TRUE</span>, <span class="comment">#是否显示图例</span></span><br><span class="line">    height=<span class="number">600</span>, <span class="comment">#设置图像高度</span></span><br><span class="line">    width=<span class="number">600</span> <span class="comment">#设置图像宽度</span></span><br><span class="line">    <span class="comment">#Nodesize = "Freq_l"</span></span><br><span class="line">    <span class="comment">#radiusCalculation = "d.nodesize"          </span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dS6sCF.gif" alt="123"></p><p><a name="iGebE"></a><br>Those Code Doesn’t Works without the data set</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">forceNetwork(Links=genelinks, <span class="comment">#读入基因之间的关系列表，基因以数字为编号，从0开始；value可用来设置基因间连线的宽度</span></span><br><span class="line">    Nodes=genenodes, <span class="comment">#基因信息，以对应编号的大小排序</span></span><br><span class="line">    Source=<span class="string">"source"</span>, <span class="comment">#指定Links文件中的源节点</span></span><br><span class="line">    Target=<span class="string">"target"</span>, <span class="comment">#指定Links文件中的靶节点</span></span><br><span class="line">    linkColour=genelinks$col, <span class="comment">#指定连线的颜色，默认为单一颜色，这里用红、绿色分别表示某一基因对靶基因的正、负调控关系</span></span><br><span class="line">    Value=<span class="string">"value"</span>, <span class="comment">#设定基因间连线的宽度</span></span><br><span class="line">    NodeID=<span class="string">"name"</span>, <span class="comment">#指定节点显示的标签</span></span><br><span class="line">    fontSize=<span class="number">20</span>, <span class="comment">#设定节点标签的字号，单位为像素</span></span><br><span class="line">    Group=<span class="string">"group"</span>, <span class="comment">#对节点进行分组，这里可根据基因的功能进行分组，配置不同颜色</span></span><br><span class="line">    opacity=<span class="number">0.8</span>, <span class="comment">#指定图像的不透明度</span></span><br><span class="line">    zoom=<span class="literal">TRUE</span>, <span class="comment">#是否允许图像缩放</span></span><br><span class="line">    arrows=<span class="literal">TRUE</span>, <span class="comment">#连线是否添加箭头，显示方向</span></span><br><span class="line">    opacityNoHover=<span class="number">0.7</span>, <span class="comment">#鼠标悬停前，节点标签的不透明度</span></span><br><span class="line">    legend=<span class="literal">TRUE</span>, <span class="comment">#是否显示图例</span></span><br><span class="line">    height=<span class="number">600</span>, <span class="comment">#设置图像高度</span></span><br><span class="line">    width=<span class="number">600</span> <span class="comment">#设置图像宽度</span></span><br><span class="line">    <span class="comment">#Nodesize = "Freq_l"</span></span><br><span class="line">    <span class="comment">#radiusCalculation = "d.nodesize"</span></span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line">MyClickScript &lt;- <span class="string">'r = confirm(d.name+"\\n\\nIf you\'d like to know more about "+d.name+", Please Click \'OK\'");</span></span><br><span class="line"><span class="string">                  if (r == true)&#123;</span></span><br><span class="line"><span class="string">                    window.open("https://www.uniprot.org/uniprot/"+d.name+"_HUMAN");&#125;;'</span></span><br><span class="line"></span><br><span class="line">forceNetwork(</span><br><span class="line">  Links=GeneLinks,</span><br><span class="line">  Nodes=GeneNodes,</span><br><span class="line">  Source=<span class="string">"source"</span>,</span><br><span class="line">  Target=<span class="string">"target"</span>,</span><br><span class="line">  linkColour=<span class="string">"#99FFCC"</span>,</span><br><span class="line">  Value=<span class="string">"value"</span>,</span><br><span class="line">  NodeID=<span class="string">"name"</span>,</span><br><span class="line">  Nodesize = <span class="string">"Freq_l"</span>,</span><br><span class="line">  fontSize=<span class="number">20</span>,</span><br><span class="line">  Group=<span class="string">"group"</span>,</span><br><span class="line">  opacity=<span class="number">0.98</span>,</span><br><span class="line">  zoom=<span class="literal">TRUE</span>,</span><br><span class="line">  arrows=<span class="literal">F</span>,</span><br><span class="line">  opacityNoHover=<span class="number">0.7</span>,</span><br><span class="line">  legend=<span class="literal">TRUE</span>,</span><br><span class="line">  clickAction = MyClickScript)</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Other Tutories</title>
      <link href="/R/Other-Tutories.html"/>
      <url>/R/Other-Tutories.html</url>
      
        <content type="html"><![CDATA[<h1 id="Other-Tutories"><a href="#Other-Tutories" class="headerlink" title="Other Tutories"></a>Other Tutories</h1><h1 id="知乎"><a href="#知乎" class="headerlink" title="知乎"></a>知乎</h1><ol><li><a href="https://www.zhihu.com/people/raindu" target="_blank" rel="noopener">杜雨</a> 东北财经大学 经济学硕士:</li></ol><p><a href="https://zhuanlan.zhihu.com/p/28131878" target="_blank" rel="noopener">那些年倒腾的R语言学习笔记，全都在这里了~</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>PCA</title>
      <link href="/R/PCA.html"/>
      <url>/R/PCA.html</url>
      
        <content type="html"><![CDATA[<h1>PCA</h1><p><a name="Y4znF"></a></p><h1>PCA</h1><p><img src="https://s1.ax1x.com/2020/06/23/NtRu8S.png" alt="NtRu8S.png"></p><p><a name="x3hBT"></a></p><h2 id="1-prcomp"><a class="header-anchor" href="#1-prcomp"></a>1 prcomp</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># install ggbioplot</span></span><br><span class="line"><span class="comment">#install_github("vqv/ggbiplot")</span></span><br><span class="line"><span class="comment">#install.packages('plyr')</span></span><br><span class="line">data(wine)</span><br><span class="line">wine.pca &lt;- prcomp(wine, scale. = <span class="literal">TRUE</span>)</span><br><span class="line"><span class="comment"># bioplot</span></span><br><span class="line">ggbiplot(wine.pca, obs.scale = <span class="number">1</span>, var.scale = <span class="number">1</span>,</span><br><span class="line">         groups = wine.class, ellipse = <span class="literal">TRUE</span>, circle = <span class="literal">TRUE</span>) +</span><br><span class="line">  scale_color_discrete(name = <span class="string">''</span>) +</span><br><span class="line">  theme_light()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NlbAKJ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlbAKJ.png" alt="NlbAKJ.png"></a></p><p><a name="duhUV"></a></p><h3 id="1-1-Arguments"><a class="header-anchor" href="#1-1-Arguments"></a>1.1 Arguments</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">ggbiplot(pcobj, choices = <span class="number">1</span>:<span class="number">2</span>, scale = <span class="number">1</span>, pc.biplot =</span><br><span class="line"><span class="literal">TRUE</span>, obs.scale = <span class="number">1</span> - scale, var.scale = scale, groups =</span><br><span class="line"><span class="literal">NULL</span>, ellipse = <span class="literal">FALSE</span>, ellipse.prob = <span class="number">0.68</span>, labels =</span><br><span class="line"><span class="literal">NULL</span>, labels.size = <span class="number">3</span>, alpha = <span class="number">1</span>, var.axes = <span class="literal">TRUE</span>, circle</span><br><span class="line">= <span class="literal">FALSE</span>, circle.prob = <span class="number">0.69</span>, varname.size = <span class="number">3</span>,</span><br><span class="line">varname.adjust = <span class="number">1.5</span>, varname.abbrev = <span class="literal">FALSE</span>, <span class="keyword">...</span>)</span><br><span class="line">pcobj <span class="comment"># prcomp()或princomp()返回结果</span></span><br><span class="line">choices <span class="comment"># 选择轴，默认1：2</span></span><br><span class="line">scale <span class="comment"># covariance biplot (scale = 1), form biplot (scale = 0). When scale = 1, the inner product between the variables approximates the covariance and the distance between the points approximates the Mahalanobis distance.</span></span><br><span class="line">obs.scale <span class="comment"># 标准化观测值</span></span><br><span class="line">var.scale <span class="comment"># 标准化变异</span></span><br><span class="line">pc.biplot <span class="comment"># 兼容 biplot.princomp()</span></span><br><span class="line">groups <span class="comment"># 组信息，并按组上色</span></span><br><span class="line">ellipse <span class="comment"># 添加组椭圆</span></span><br><span class="line">ellipse.prob <span class="comment"># 置信区间</span></span><br><span class="line">labels <span class="comment">#向量名称</span></span><br><span class="line">labels.size <span class="comment">#名称大小</span></span><br><span class="line">alpha  <span class="comment">#点透明度 (0 = TRUEransparent, 1 = opaque)</span></span><br><span class="line">circle <span class="comment">#绘制相关环(only applies when prcomp was called with scale = TRUE and when var.scale = 1)</span></span><br><span class="line">var.axes  <span class="comment">#绘制变量线-菌相关</span></span><br><span class="line">varname.size  <span class="comment">#变量名大小</span></span><br><span class="line">varname.adjust <span class="comment">#标签与箭头距离 &gt;= 1 means farther from the arrow</span></span><br><span class="line">varname.abbrev <span class="comment"># 标签是否缩写</span></span><br></pre></td></tr></table></figure></div><p><a name="j8UB2"></a></p><h2 id="2-Psych"><a class="header-anchor" href="#2-Psych"></a>2 Psych</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(psych)</span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">PC &lt;- principal(wine, nfactors=<span class="number">2</span>, rotate =<span class="string">"none"</span>)</span><br><span class="line">pc &lt;- data.frame(PC$scores)</span><br><span class="line">p  &lt;- ggplot(pc, aes(x=PC1, y=PC2,color=wine.class )) +</span><br><span class="line">  geom_point(size=<span class="number">4</span>,alpha=<span class="number">0.5</span>)+</span><br><span class="line">  theme(axis.text= element_text(size=<span class="number">20</span>))+</span><br><span class="line">  theme(panel.grid.major =element_blank(),</span><br><span class="line">        panel.grid.minor = element_line(color=<span class="string">"steelblue"</span>),</span><br><span class="line">        panel.background = element_blank(),</span><br><span class="line">        axis.line = element_line(colour = <span class="string">"black"</span>))+</span><br><span class="line">  stat_ellipse(lwd=<span class="number">1</span>,level = <span class="number">0.8</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nlb7ZR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nlb7ZR.png" alt="Nlb7ZR.png"></a></p><p><a name="wsYAL"></a></p><h2 id="3-qplot"><a class="header-anchor" href="#3-qplot"></a>3 qplot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">qplot(x=PC1,y=PC2, data=pc,colour=factor(wine.class))+theme(legend.position=<span class="string">"none"</span>)+stat_ellipse(lwd=<span class="number">1</span>,level = <span class="number">0.8</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nlbp5V" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nlbp5V.png" alt="Nlbp5V.png"></a></p><h1>More</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggbiplot)</span><br><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">data(wine)</span><br><span class="line">wine.pca &lt;- prcomp(wine, scale. = <span class="literal">TRUE</span>)</span><br><span class="line"><span class="comment"># bioplot</span></span><br><span class="line">TB= data.frame(wine.pca$x)</span><br><span class="line">TB$class = wine.class</span><br><span class="line"></span><br><span class="line">p0 &lt;- ggbiplot(wine.pca, obs.scale = <span class="number">1</span>, var.scale = <span class="number">1</span>,</span><br><span class="line">        groups = wine.class, ellipse = <span class="literal">TRUE</span>, circle = <span class="literal">TRUE</span>) +</span><br><span class="line">        scale_color_discrete(name = <span class="string">''</span>) +</span><br><span class="line">        theme_light()+theme(legend.position = <span class="string">'none'</span>,</span><br><span class="line">        axis.title=element_blank())</span><br><span class="line"></span><br><span class="line">p1 &lt;- ggplot() +</span><br><span class="line">        geom_density(data=TB, aes(x=PC1,fill=class),alpha=<span class="number">0.5</span>) +</span><br><span class="line">        theme_map() +</span><br><span class="line">        theme(legend.position = <span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot() +</span><br><span class="line">        geom_density(data=TB, aes(x=PC2,fill=class),alpha=<span class="number">0.5</span>)  +</span><br><span class="line">        theme_map() +theme(legend.position = <span class="string">'none'</span>) +</span><br><span class="line">        coord_flip()  +  scale_y_reverse()</span><br><span class="line"></span><br><span class="line">p3 &lt;- ggplot(TB, aes(x=class,y=PC1)) +</span><br><span class="line">        geom_tufteboxplot(aes(color=class),median.type = <span class="string">"line"</span>,</span><br><span class="line">          hoffset = <span class="number">0</span>, width = <span class="number">3</span>) +</span><br><span class="line">        coord_flip()+ theme_map()+</span><br><span class="line">        theme(legend.position = <span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line">p4 &lt;- ggplot(TB, aes(x=class,y=PC2)) +</span><br><span class="line">        geom_tufteboxplot(aes(color=class),median.type = <span class="string">"line"</span>,</span><br><span class="line">          hoffset = <span class="number">0</span>, width = <span class="number">3</span>) +</span><br><span class="line">        theme_map()+</span><br><span class="line">        theme(legend.position = <span class="string">'none'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">TB= data.frame(wine.pca$x)</span><br><span class="line">TB$class = wine.class</span><br><span class="line"></span><br><span class="line">GGlay &lt;-</span><br><span class="line"><span class="string">"#BBBBBB#</span></span><br><span class="line"><span class="string">CAAAAAAE</span></span><br><span class="line"><span class="string">CAAAAAAE</span></span><br><span class="line"><span class="string">CAAAAAAE</span></span><br><span class="line"><span class="string">CAAAAAAE</span></span><br><span class="line"><span class="string">CAAAAAAE</span></span><br><span class="line"><span class="string">CAAAAAAE</span></span><br><span class="line"><span class="string">#DDDDDD#"</span></span><br><span class="line">p0+p1+p2+p3+p4  +plot_layout(design = GGlay)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/23/NtRu8S.png" alt="NtRu8S.png"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Ploty</title>
      <link href="/R/Ploty.html"/>
      <url>/R/Ploty.html</url>
      
        <content type="html"><![CDATA[<h1 id="Ploty"><a href="#Ploty" class="headerlink" title="Ploty"></a>Ploty</h1><p><a href="https://imgchr.com/i/NlqCdI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlqCdI.gif" alt="NlqCdI.gif"></a></p><p><a name="HvQTq"></a></p><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"plotly"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(plotly)</span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">p &lt;- ggplot(df) + geom_point(ase(x=X,y=Y))</span><br><span class="line">P &lt;- ggplotly(p)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NlbVbR" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlbVbR.gif" alt="NlbVbR.gif"></a><br><a name="JvQCa"></a></p><h1 id="Save"><a href="#Save" class="headerlink" title="Save"></a>Save</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(htmlwidgets)</span><br><span class="line">saveWidget(P,<span class="string">"1.html"</span>,selfcontained = <span class="literal">F</span>)</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>R-riverplot</title>
      <link href="/R/R-riverplot.html"/>
      <url>/R/R-riverplot.html</url>
      
        <content type="html"><![CDATA[<h1 id="R-riverplot"><a href="#R-riverplot" class="headerlink" title="R-riverplot"></a>R-riverplot</h1><p>brary(riverplot)</p><p>#1. 画一个6级能量流动图/桑基图</p><p><a name="e17be30c"></a></p><h1 id="构造连接节点-边-的数据框，采用runif生成模拟数据"><a href="#构造连接节点-边-的数据框，采用runif生成模拟数据" class="headerlink" title="构造连接节点(边)的数据框，采用runif生成模拟数据"></a>构造连接节点(边)的数据框，采用runif生成模拟数据</h1><p><a name="23d3dfda"></a></p><h1 id="实验中每个节点间的连续情况是己知的"><a href="#实验中每个节点间的连续情况是己知的" class="headerlink" title="实验中每个节点间的连续情况是己知的"></a>实验中每个节点间的连续情况是己知的</h1><p><a name="79043749"></a></p><h1 id="生成一个组1-5与组2-6对应的值数据框"><a href="#生成一个组1-5与组2-6对应的值数据框" class="headerlink" title="生成一个组1-5与组2-6对应的值数据框"></a>生成一个组1-5与组2-6对应的值数据框</h1><p>edges = data.frame(N1 = paste0(rep(LETTERS[1:4], each = 4), rep(1:5, each = 16)),<br /><br>N2 = paste0(rep(LETTERS[1:4], 4), rep(2:6, each = 16)),<br /><br>Value = runif(80, min = 2, max = 5) * rep(c(1, 0.8, 0.6, 0.4, 0.3), each = 16),<br /><br>stringsAsFactors = F)</p><p><a name="12cddf0c"></a></p><h1 id="筛选80-的记录，以免每个点都对应到4个点-可选"><a href="#筛选80-的记录，以免每个点都对应到4个点-可选" class="headerlink" title="筛选80%的记录，以免每个点都对应到4个点(可选)"></a>筛选80%的记录，以免每个点都对应到4个点(可选)</h1><p>edges = edges[sample(c(TRUE, FALSE), nrow(edges), replace = TRUE, prob = c(0.8, 0.2)),]<br /><br>head(edges)</p><p><a name="4ee9736e"></a></p><h1 id="获得非冗余结点nodes"><a href="#获得非冗余结点nodes" class="headerlink" title="获得非冗余结点nodes"></a>获得非冗余结点nodes</h1><p>nodes = data.frame(ID = unique(c(edges<img src="https://g.yuque.com/gr/latex?N1%2C%20edges#card=math&code=N1%2C%20edges&height=18&width=71" alt="">)N2)), stringsAsFactors = FALSE)</p><p><a name="2baacf63"></a></p><h1 id="添加x-X为组编号，即列位置"><a href="#添加x-X为组编号，即列位置" class="headerlink" title="添加x: X为组编号，即列位置"></a>添加x: X为组编号，即列位置</h1><p>nodes<img src="https://g.yuque.com/gr/latex?x%20%3D%20as.integer(substr(nodes#card=math&code=x%20%3D%20as.integer%28substr%28nodes&height=20&width=211" alt="">ID, 2, 2))</p><p><a name="2324ee62"></a></p><h1 id="Y为组类型字符，转换为ASCII编号，减65，即为A-B-C-D转换为0-1-2-3数值，即行位置"><a href="#Y为组类型字符，转换为ASCII编号，减65，即为A-B-C-D转换为0-1-2-3数值，即行位置" class="headerlink" title="Y为组类型字符，转换为ASCII编号，减65，即为A/B/C/D转换为0/1/2/3数值，即行位置"></a>Y为组类型字符，转换为ASCII编号，减65，即为A/B/C/D转换为0/1/2/3数值，即行位置</h1><p>nodes<img src="https://g.yuque.com/gr/latex?y%20%3D%20as.integer(sapply(substr(nodes#card=math&code=y%20%3D%20as.integer%28sapply%28substr%28nodes&height=20&width=264" alt="">ID, 1, 1), charToRaw)) - 65</p><p><a name="2faf48ca"></a></p><h1 id="添加行名"><a href="#添加行名" class="headerlink" title="添加行名"></a>添加行名</h1><p>rownames(nodes) = nodes$ID<br /><br>head(nodes)</p><p><a name="95e9696b"></a></p><h1 id="添加颜色"><a href="#添加颜色" class="headerlink" title="添加颜色"></a>添加颜色</h1><p>library(RColorBrewer)</p><p><a name="a3620cd2"></a></p><h1 id="brewer-pal生成柔合色，后面加调淡颜色"><a href="#brewer-pal生成柔合色，后面加调淡颜色" class="headerlink" title="brewer.pal生成柔合色，后面加调淡颜色"></a>brewer.pal生成柔合色，后面加调淡颜色</h1><p>palette = paste0(brewer.pal(4, “Set1”), “60”)</p><p><a name="db6266fa"></a></p><h1 id="对每个节点生成相应的列表格式，颜色col，线条类型lty，文字颜色textcol"><a href="#对每个节点生成相应的列表格式，颜色col，线条类型lty，文字颜色textcol" class="headerlink" title="对每个节点生成相应的列表格式，颜色col，线条类型lty，文字颜色textcol"></a>对每个节点生成相应的列表格式，颜色col，线条类型lty，文字颜色textcol</h1><p>styles = lapply(nodes<img src="https://g.yuque.com/gr/latex?y%2C%20function(n)%20%7B%20%20%0A%20%20list(col%20%3D%20palette%5Bn%2B1%5D%2C%20lty%20%3D%200%2C%20textcol%20%3D%20%22black%22)%20%20%0A%7D" alt="">)%20%20%0Anames(styles)%20%3D%20nodes#card=math&amp;code=y%2C%20function%28n%29%20%7B%20%20%0A%20%20list%28col%20%3D%20palette%5Bn%2B1%5D%2C%20lty%20%3D%200%2C%20textcol%20%3D%20%22black%22%29%20%20%0A%7D%29%20%20%0Anames%28styles%29%20%3D%20nodes&amp;height=20&amp;width=658)ID</p><p><a name="c93c874d"></a></p><h1 id="将点、单和样式合并为List，构建riverplot对象"><a href="#将点、单和样式合并为List，构建riverplot对象" class="headerlink" title="将点、单和样式合并为List，构建riverplot对象"></a>将点、单和样式合并为List，构建riverplot对象</h1><p>rp &lt;- list(nodes = nodes, edges = edges, styles = styles)</p><p><a name="ae03b881"></a></p><h1 id="添加对你属性包括riverplot"><a href="#添加对你属性包括riverplot" class="headerlink" title="添加对你属性包括riverplot"></a>添加对你属性包括riverplot</h1><p>class(rp) &lt;- c(class(rp), “riverplot”)</p><p><a name="09f44fc8"></a></p><h1 id="绘制桑基图，plot-area设置绘图面积，yscale设置Y轴方向缩放"><a href="#绘制桑基图，plot-area设置绘图面积，yscale设置Y轴方向缩放" class="headerlink" title="绘制桑基图，plot_area设置绘图面积，yscale设置Y轴方向缩放"></a>绘制桑基图，plot_area设置绘图面积，yscale设置Y轴方向缩放</h1><p>plot(rp, plot_area = 0.95, yscale=0.06)</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>R 语言报错集</title>
      <link href="/R/R_errors.html"/>
      <url>/R/R_errors.html</url>
      
        <content type="html"><![CDATA[<h1 id="R-语言报错集"><a href="#R-语言报错集" class="headerlink" title="R 语言报错集"></a>R 语言报错集</h1><p><a name="YqNpC"></a></p><h1 id="写R包"><a href="#写R包" class="headerlink" title="写R包"></a>写R包</h1><p><a name="ll1lF"></a></p><h2 id="打包错误"><a href="#打包错误" class="headerlink" title="打包错误"></a>打包错误</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">R CMD build  hello</span><br><span class="line"></span><br><span class="line">* checking <span class="keyword">for</span> file ‘hello/DESCRIPTION’ ... OK</span><br><span class="line">* preparing ‘hello’:</span><br><span class="line">* checking DESCRIPTION meta-information ... OK</span><br><span class="line">* installing the package to process <span class="built_in">help</span> pages</span><br><span class="line">      -----------------------------------</span><br><span class="line">* installing *<span class="built_in">source</span>* package ‘hello’ ...</span><br><span class="line">** using staged installation</span><br><span class="line">** R</span><br><span class="line">** byte-compile and prepare package <span class="keyword">for</span> lazy loading</span><br><span class="line">** <span class="built_in">help</span></span><br><span class="line">Warning: /tmp/Rtmp9IseJR/Rbuild799a14248b2f/hello/man/hello-package.Rd:26: All text must be <span class="keyword">in</span> a section</span><br><span class="line">*** installing <span class="built_in">help</span> indices</span><br><span class="line">Error <span class="keyword">in</span> Rd_info(db[[i]]) :</span><br><span class="line">  missing/empty \title field <span class="keyword">in</span> <span class="string">'/tmp/Rtmp9IseJR/Rbuild799a14248b2f/hello/man/hello.Rd'</span></span><br><span class="line">Rd files must have a non-empty \title.</span><br><span class="line">See chapter <span class="string">'Writing R documentation'</span> <span class="keyword">in</span> manual <span class="string">'Writing R Extensions'</span>.</span><br><span class="line">* removing ‘/tmp/Rtmp9IseJR/Rinst799a2d1feb80/hello’</span><br><span class="line">      -----------------------------------</span><br><span class="line">ERROR: package installation failed</span><br></pre></td></tr></table></figure></div><p>错原： “missing/empty \title fiel”， 没有改title<br />解决： sed -i ‘s/%%  <del>function to do … ~</del>/喵喵喵？/‘ hello/man/hello.Rd</p><p><a name="rGBi1"></a></p><h2 id="上传至github后安装报错"><a href="#上传至github后安装报错" class="headerlink" title="上传至github后安装报错"></a>上传至github后安装报错</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">devtools::install_github(<span class="string">"Karobben/Test"</span>)</span><br><span class="line"></span><br><span class="line">Downloading GitHub repo Karobben/Test@master</span><br><span class="line">✔  checking <span class="keyword">for</span> file ‘/tmp/Rtmp3HTrN3/remotes225241f0c918/Karobben-Test-252c791/DESCRIPTION’ <span class="keyword">...</span></span><br><span class="line">─  preparing ‘hello’:</span><br><span class="line">✔  checking DESCRIPTION meta-information</span><br><span class="line">─  installing the package to process help pages</span><br><span class="line">─  saving partial Rd database (688ms)</span><br><span class="line">─  checking <span class="keyword">for</span> LF line-endings <span class="keyword">in</span> <span class="keyword">source</span> and make files and shell scripts</span><br><span class="line">─  checking <span class="keyword">for</span> empty or unneeded directories</span><br><span class="line">─  building ‘hello_1.0.tar.gz’</span><br><span class="line"></span><br><span class="line">Installing package into ‘/home/ken/R/x86_64-pc-linux-gnu-<span class="keyword">library</span>/<span class="number">3.6</span>’</span><br><span class="line">(as ‘lib’ is unspecified)</span><br><span class="line">* installing *<span class="keyword">source</span>* package ‘hello’ <span class="keyword">...</span></span><br><span class="line">** using staged installation</span><br><span class="line">** R</span><br><span class="line">** byte-compile and prepare package <span class="keyword">for</span> lazy loading</span><br><span class="line">** help</span><br><span class="line">Error : (converted from <span class="keyword">warning</span>) /tmp/RtmpixBxlB/Rbuild2ccc35a25d23/hello/man/hello-package.Rd:<span class="number">26</span>: All text must be <span class="keyword">in</span> a section</span><br><span class="line">ERROR: installing Rd objects failed <span class="keyword">for</span> package ‘hello’</span><br><span class="line">* removing ‘/home/ken/R/x86_64-pc-linux-gnu-<span class="keyword">library</span>/<span class="number">3.6</span>/hello’</span><br></pre></td></tr></table></figure></div><p>错原：Error : (converted from warning) /tmp/RtmpixBxlB/Rbuild2ccc35a25d23/hello/man/hello-package.Rd:26: All text must be in a section<br />解决： 删除 man/hello-package.Rd 的 第 26 行</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>3分钟写一个R包</title>
      <link href="/R/Rin3min.html"/>
      <url>/R/Rin3min.html</url>
      
        <content type="html"><![CDATA[<h1 id="3分钟写一个R包"><a href="#3分钟写一个R包" class="headerlink" title="3分钟写一个R包"></a>3分钟写一个R包</h1><p>主要参考：<a href="https://blog.csdn.net/jiyang_1/article/details/53283504" target="_blank" rel="noopener">https://blog.csdn.net/jiyang_1/article/details/53283504</a></p><p><a name="VITLM"></a></p><h1 id="3分钟写个R包"><a href="#3分钟写个R包" class="headerlink" title="3分钟写个R包"></a>3分钟写个R包</h1><p><a name="CCkEd"></a></p><h2 id="1-新建目录，快速写一个函数"><a href="#1-新建目录，快速写一个函数" class="headerlink" title="1. 新建目录，快速写一个函数"></a>1. 新建目录，快速写一个函数</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mkdir R_package</span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">'</span></span><br><span class="line"><span class="string">hello &lt;- function() &#123;</span></span><br><span class="line"><span class="string">  print(paste("Hellow World"))</span></span><br><span class="line"><span class="string">&#125;'</span> &gt; hello.R</span><br><span class="line"><span class="comment">#这里的 hello.R 就是所有的需要放在包里面的函数了</span></span><br></pre></td></tr></table></figure></div><p><a name="b8zup"></a></p><h2 id="2-在R中创建骨架"><a href="#2-在R中创建骨架" class="headerlink" title="2. 在R中创建骨架"></a>2. 在R中创建骨架</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#该目录打开R</span></span><br><span class="line">package.skeleton(name=<span class="string">"hello"</span>,code_files=<span class="string">"hello.R"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="G7sG0"></a></p><h2 id="3-根据需要添加相关相关信息"><a href="#3-根据需要添加相关相关信息" class="headerlink" title="3. 根据需要添加相关相关信息"></a>3. 根据需要添加相关相关信息</h2><p>为了赶上3min，我只改了两个必须改的地方。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 在title 下面加一行，不然本地安装报错</span></span><br><span class="line">sed -i <span class="string">'s/%%  ~~function to do ... ~~/喵喵喵？/'</span> hello/man/hello.Rd</span><br><span class="line"></span><br><span class="line"><span class="comment">#删除此行，不然github远程安装的时候报错</span></span><br><span class="line">sed -i <span class="string">'/~~ Optionally other standard keywords, one per line, from file KEYWORDS in the R documentation directory ~~/d'</span> hello/man/hello-package.Rd</span><br><span class="line"></span><br><span class="line">R CMD build  hello</span><br><span class="line"><span class="comment">#R CMD check hello_1.0.tar.gz</span></span><br><span class="line"><span class="comment">#可以不check 应为有错误也能安装，一般只要能打包</span></span><br><span class="line"><span class="comment">#但是上Cran就一定要check了</span></span><br></pre></td></tr></table></figure></div><p>不run第3部分第二行代码的结果（改title）<br /><br><a href="https://imgchr.com/i/NJk8je" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NJk8je.png" alt="NJk8je.png"></a></p><p><a name="gJ2cL"></a></p><h2 id="4-开始安装"><a href="#4-开始安装" class="headerlink" title="4. 开始安装"></a>4. 开始安装</h2><p>进入R安装。注意<strong>路径</strong>。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"hello_1.0.tar.gz"</span>, type=<span class="string">"source"</span>, repos=<span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure></div><p>成果！ 撒花<br /><br><a href="https://imgchr.com/i/NJkYBd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NJkYBd.md.png" alt="NJkYBd.md.png"></a></p><p><a name="zPzeB"></a></p><h2 id="5-运行测试"><a href="#5-运行测试" class="headerlink" title="5. 运行测试"></a>5. 运行测试</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(hello)                                                                                                                </span><br><span class="line">hello()</span><br><span class="line"></span><br><span class="line"><span class="comment">#输出结果</span></span><br><span class="line"><span class="comment">#Hellow World</span></span><br><span class="line"></span><br><span class="line">?hello<span class="comment">#查看函数信息</span></span><br><span class="line">packageDescription(<span class="string">'hello'</span>) <span class="comment"># 查看信息和安装地址</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#最后删除我们的包</span></span><br><span class="line">remove.packages(<span class="string">'hello'</span> )</span><br></pre></td></tr></table></figure></div><p>Details:<br /></p><p>Indexofhelptopics:<br /><br><a href="https://imgchr.com/i/NJkJnH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NJkJnH.jpg" alt="NJkJnH.jpg"></a></p>  <br /><a name="3Q8gZ"></a>## 6. 完成！接下来可以认真的写一个自己的包啦！<br />可以和大众分享，也可以是储存几个自己习惯的函数<br />看看表，有没有超过3min！[![NJkUAI.md.png](https://s1.ax1x.com/2020/06/22/NJkUAI.md.png)](https://imgchr.com/i/NJkUAI)<p><a name="I7vyG"></a></p><h1 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h1><p>上传到github吧</p><p><a name="Wx9L4"></a></p><h2 id="Github"><a href="#Github" class="headerlink" title="Github"></a>Github</h2><p>新建目录后，直接吧hello下的文件，全部上传即可，安装</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devtools::install_github(<span class="string">"Karobben/Test"</span>)</span><br></pre></td></tr></table></figure></div><p>不进行第3部分第5航代码的结果：<br><a href="https://imgchr.com/i/NJktHA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NJktHA.md.jpg" alt="NJktHA.md.jpg"></a></p><p>统统上传～～<br /><br><a href="https://imgchr.com/i/NJkaNt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/22/NJkaNt.md.png" alt="NJkaNt.md.png"></a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>How to Started With R</title>
      <link href="/R/Start.html"/>
      <url>/R/Start.html</url>
      
        <content type="html"><![CDATA[<h1 id="How-to-Started-With-R"><a href="#How-to-Started-With-R" class="headerlink" title="How to Started With R"></a>How to Started With R</h1><p>R语言新手快速入门起步</p><h1 id="实验楼"><a href="#实验楼" class="headerlink" title="实验楼"></a>实验楼</h1><p>國內網站， 所以全是中文， 並且速度快。 新手超級友好！<br>缺點： 免費課程較少（5個，鏈接列在後面了）<br>不過， 免費的， 對與新手入門來說， 還是夠了。！（反正都是， 從入門，到放棄 23333）<br>並且基礎的， 機器學習入門，也有。所以還是蠻OK的，首推</p><h2 id="界面"><a href="#界面" class="headerlink" title="界面"></a>界面</h2><p>實驗樓界面比較簡潔。<br>左邊是介紹， 和練習用的代碼<br>右邊是一個完全的， linux 圖形虛擬桌面。<br>好處就是， 他是一個完全的linux圖形界面系統<br>壞處就是， 應爲是基於瀏覽器，所以是有些快捷鍵無法使用。<br>此外，就是比較浪費，網絡， 計算機的性能， 反應較慢。<br>並且無法檢測代碼對錯進行打分評價。<br>不過因此， 看見太簡單的教程也可以直接跳過，避免冗餘的重複練習。<br><a href="https://imgchr.com/i/taB2CV" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/03/taB2CV.png" alt="taB2CV.png"></a></p><p>免费课程列表：</p><ol><li><a href="https://www.shiyanlou.com/courses/855" target="_blank" rel="noopener">R 语言基础入门</a></li><li><a href="https://www.shiyanlou.com/courses/867" target="_blank" rel="noopener">R 语言高级数据管理</a></li><li><a href="https://www.shiyanlou.com/courses/882" target="_blank" rel="noopener">R 语言英国房屋价格建模预测</a></li><li><a href="https://www.shiyanlou.com/courses/887" target="_blank" rel="noopener">R 语言序列数据挖掘</a></li><li><a href="https://www.shiyanlou.com/courses/873" target="_blank" rel="noopener">R 语言进行商业问卷分析</a></li></ol><h1 id="DataCampe"><a href="#DataCampe" class="headerlink" title="DataCampe"></a>DataCampe</h1><p>虽然是英文界面， 国外服务器， 但是速度还是挺快的。 比之后测试的 CodaAcademy 要好很多。 而且输入界面，更像Rstudio</p><p><a href="https://campus.datacamp.com/" target="_blank" rel="noopener">首页</a><br><a href="https://imgchr.com/i/taYsKI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/03/taYsKI.md.png" alt="taYsKI.md.png"></a></p><h2 id="练习界面"><a href="#练习界面" class="headerlink" title="练习界面"></a>练习界面</h2><p>分区如下图所示， 输入代码后， 按输入区的submit 提交即可下一题<br><a href="https://imgchr.com/i/tat8Jg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/03/tat8Jg.png" alt="tat8Jg.png"></a></p><h2 id="下一题"><a href="#下一题" class="headerlink" title="下一题"></a>下一题</h2><p><a href="https://imgchr.com/i/taY6qP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/03/taY6qP.md.png" alt="taY6qP.md.png"></a></p><h1 id="code-academy"><a href="#code-academy" class="headerlink" title="code academy"></a>code academy</h1><p>Website: <a href="https://www.codecademy.com/courses/learn-r" target="_blank" rel="noopener">CodeAcademy</a></p><h2 id="主页"><a href="#主页" class="headerlink" title="主页"></a>主页</h2><p><img src="https://s1.ax1x.com/2020/06/03/ta3YtJ.png" alt="ta3YtJ.png"></p><h2 id="第一页"><a href="#第一页" class="headerlink" title="第一页"></a>第一页</h2><p><a href="https://imgchr.com/i/ta3th9" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/03/ta3th9.md.png" alt="ta3th9.md.png"></a></p><h2 id="学习界面"><a href="#学习界面" class="headerlink" title="学习界面"></a>学习界面</h2><p><img src="https://s1.ax1x.com/2020/06/03/ta3UpR.png" alt="ta3UpR.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">12</span>+<span class="number">3</span></span><br></pre></td></tr></table></figure></div><p>网速略慢。</p><h1 id="swirl"><a href="#swirl" class="headerlink" title="swirl"></a>swirl</h1><p>Learn R in R</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"swirl"</span>)</span><br><span class="line"><span class="keyword">library</span>(swirl)</span><br><span class="line">swirl()</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">| Welcome to swirl! Please sign in. If you&#39;ve been here before, use the same</span><br><span class="line">| name as you did then. If you are new, call yourself something unique.</span><br><span class="line"></span><br><span class="line">What shall I call you?</span><br></pre></td></tr></table></figure></div><p>我很皮的输入<code>papa</code> /滑稽</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">| Thanks, papa. Let&#39;s cover a couple of quick housekeeping items before we</span><br><span class="line">| begin our first lesson. First of all, you should know that when you see</span><br><span class="line">| &#39;...&#39;, that means you should press Enter when you are done reading and ready</span><br><span class="line">| to continue.</span><br><span class="line"></span><br><span class="line">...  &lt;-- That&#39;s your cue to press Enter to continue</span><br></pre></td></tr></table></figure></div><p>更具指引， 你將開始下一個課程， 然後選擇他：</p><h2 id="開始學習！"><a href="#開始學習！" class="headerlink" title="開始學習！"></a>開始學習！</h2><p>###　一大波文字說明即將到來， 2333</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">|                                                                      |   0%</span><br><span class="line"></span><br><span class="line">| The simplest and most common data structure in R is the vector.</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"> |&#x3D;&#x3D;                                                                    |   3%</span><br><span class="line">| Vectors come in two different flavors: atomic vectors and lists. An atomic</span><br><span class="line">| vector contains exactly one data type, whereas a list may contain multiple</span><br><span class="line">| data types. We&#39;ll explore atomic vectors further before we get to lists.</span><br><span class="line"></span><br><span class="line">...</span><br><span class="line"></span><br><span class="line"> |&#x3D;&#x3D;&#x3D;&#x3D;                                                                  |   5%</span><br><span class="line">| In previous lessons, we dealt entirely with numeric vectors, which are one</span><br><span class="line">| type of atomic vector. Other types of atomic vectors include logical,</span><br><span class="line">| character, integer, and complex. In this lesson, we&#39;ll take a closer look at</span><br><span class="line">| logical and character vectors.</span><br></pre></td></tr></table></figure></div><h3 id="終於開始了，2333"><a href="#終於開始了，2333" class="headerlink" title="終於開始了，2333"></a>終於開始了，2333</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">| First, create a numeric vector num_vect that contains the values <span class="number">0.5</span>, <span class="number">55</span>,</span><br><span class="line">| -<span class="number">10</span>, and <span class="number">6.</span></span><br></pre></td></tr></table></figure></div><p>輸入 <code>0.5</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[1] 0.5</span><br><span class="line"></span><br><span class="line">| You almost had it, but not quite. Try again. Or, type info() for more</span><br><span class="line">| options.</span><br><span class="line"></span><br><span class="line">| Recall that the c() function is used for creating a vector. If you forget how</span><br><span class="line">| to use it, use ?c to access the help file. Don&#39;t forget to assign the result</span><br><span class="line">| to a new variable called num_vect.</span><br><span class="line"></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure></div><p>ummm， 我覺得相對於來學R， 這個更適合用來學英語， 哈哈哈哈哈</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>UNIPROT_API</title>
      <link href="/R/UNIPROT_API.html"/>
      <url>/R/UNIPROT_API.html</url>
      
        <content type="html"><![CDATA[<h1>UNIPROT_API</h1><p>for more information, please visit: <a href="https://www.uniprot.org/help/api_idmapping" target="_blank" rel="noopener">uniprot expample</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(httr)</span><br><span class="line">my_protein_ids = c(<span class="string">"A5WWC6.1"</span>,<span class="string">"P16152.3"</span>,<span class="string">"Q15125.3"</span>,<span class="string">"Q6P5L8.1"</span>,<span class="string">"Q6PUF3.1"</span>,<span class="string">"Q8MI29.1"</span>,<span class="string">"Q9EQC1.1"</span>,<span class="string">"Q9MYP6.1"</span>)</span><br><span class="line"></span><br><span class="line">results &lt;- POST(url = <span class="string">"https://www.uniprot.org/uploadlists/"</span>,</span><br><span class="line">  body = list(from = <span class="string">'ID'</span>,</span><br><span class="line">  to = <span class="string">'GENENAME'</span>,</span><br><span class="line">  format = <span class="string">'tab'</span>,</span><br><span class="line">  query = paste(my_protein_ids, collapse = <span class="string">' '</span>)))</span><br><span class="line">print(results)</span><br></pre></td></tr></table></figure></div><p><span style="Background:salmon">backs to</span></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">From  To</span><br><span class="line">A5WWC6  hsdl1</span><br><span class="line">P16152  CBR1</span><br><span class="line">Q15125  EBP</span><br><span class="line">Q6P5L8  hsdl2</span><br><span class="line">Q6PUF3  hsd11b1l</span><br><span class="line">Q8MI29  CBR1</span><br><span class="line">Q9EQC1  Hsd3b7</span><br><span class="line">Q9MYP6  HSD17B14</span><br></pre></td></tr></table></figure></div><table><thead><tr><th>ID</th><th>GENENAME</th><th>CRC64</th></tr></thead><tbody><tr><td>A5WWC6</td><td>hsdl1</td><td>8C21E1A95DEB67B3</td></tr><tr><td>P16152</td><td>CBR1</td><td>8C21E1A95DEB67B3</td></tr><tr><td>Q15125</td><td>EBP</td><td>3931A9DE3DBAFA04</td></tr><tr><td>Q6P5L8</td><td>hsdl2</td><td>B8BAC424D4E7CC61</td></tr></tbody></table><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">uniprot_results &lt;- content(results, type = <span class="string">'text/tab-separated-values'</span>,</span><br><span class="line">  col_names = <span class="literal">TRUE</span>,</span><br><span class="line">  col_types = <span class="literal">NULL</span>,</span><br><span class="line">  encoding = <span class="string">"UTF-8"</span>)</span><br><span class="line"></span><br><span class="line">results &lt;- POST(url = <span class="string">"https://www.uniprot.org/uploadlists/"</span>,</span><br><span class="line">  body = list(from = <span class="string">'GENENAME'</span>,</span><br><span class="line">  to = <span class="string">'ID'</span>,</span><br><span class="line">  format = <span class="string">'tab'</span>,</span><br><span class="line">  query = paste(my_protein_ids, collapse = <span class="string">' '</span>)))</span><br></pre></td></tr></table></figure></div><h1>more</h1><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>WGCNA - 實戰</title>
      <link href="/R/WGCNA.html"/>
      <url>/R/WGCNA.html</url>
      
        <content type="html"><![CDATA[<h1 id="WGCNA-實戰"><a href="#WGCNA-實戰" class="headerlink" title="WGCNA - 實戰"></a>WGCNA - 實戰</h1><h1 id="0-數據結構"><a href="#0-數據結構" class="headerlink" title="0. 數據結構"></a>0. 數據結構</h1><h2 id="0-1-Expression-matrix"><a href="#0-1-Expression-matrix" class="headerlink" title="0.1 Expression matrix"></a>0.1 Expression matrix</h2><p>Trinity script TPM result</p><table><thead><tr><th align="center">ID1</th><th align="center">ID2</th><th align="center">Liver_CK</th><th align="center">Intest_CK</th><th align="center">Muscle_CK</th><th align="center">Liver_30</th><th align="center">Intest_30</th><th align="center">Muscle_30</th><th align="center">Liver_75</th><th align="center">Intest_75</th><th align="center">Muscle_75</th></tr></thead><tbody><tr><td align="center">TRINITY_DN100000_c1_g1</td><td align="center">TRINITY_DN100000_c1_g1_i1</td><td align="center">2.1</td><td align="center">4.3</td><td align="center">1.32</td><td align="center">1.04</td><td align="center">4.49</td><td align="center">2.85</td><td align="center">3.59</td><td align="center">4.27</td><td align="center">1.7</td></tr><tr><td align="center">TRINITY_DN100001_c0_g1</td><td align="center">TRINITY_DN100001_c0_g1_i1</td><td align="center">0.45</td><td align="center">21.0</td><td align="center">0.02</td><td align="center">0.15</td><td align="center">8.85</td><td align="center">4.33</td><td align="center">0.18</td><td align="center">14.76</td><td align="center">0.0</td></tr><tr><td align="center">TRINITY_DN100002_c0_g1</td><td align="center">TRINITY_DN100002_c0_g1_i1</td><td align="center">8.39</td><td align="center">2.01</td><td align="center">1.08</td><td align="center">11.32</td><td align="center">3.2</td><td align="center">1.1</td><td align="center">7.83</td><td align="center">6.23</td><td align="center">2.91</td></tr></tbody></table><h2 id="0-2-Traits"><a href="#0-2-Traits" class="headerlink" title="0.2 Traits"></a>0.2 Traits</h2><table><thead><tr><th align="center">ID</th><th align="center">Group</th><th align="center">Organ</th><th align="center">Weight</th></tr></thead><tbody><tr><td align="center">Liver_CK</td><td align="center">CK</td><td align="center">Liver</td><td align="center">33.32</td></tr><tr><td align="center">Intest_CK</td><td align="center">CK</td><td align="center">Intest</td><td align="center">33.32</td></tr><tr><td align="center">Muscle_CK</td><td align="center">CK</td><td align="center">Muscle</td><td align="center">33.32</td></tr><tr><td align="center">Liver_30</td><td align="center">SPC30</td><td align="center">Liver</td><td align="center">31.3</td></tr><tr><td align="center">Intest_30</td><td align="center">SPC30</td><td align="center">Intest</td><td align="center">31.3</td></tr><tr><td align="center">…</td><td align="center">…</td><td align="center">…</td><td align="center">…</td></tr></tbody></table><h1 id="1-Data-Clean"><a href="#1-Data-Clean" class="headerlink" title="1. Data Clean"></a>1. Data Clean</h1><h2 id="1-1-Load-and-Filter"><a href="#1-1-Load-and-Filter" class="headerlink" title="1.1 Load and Filter"></a>1.1 Load and Filter</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(WGCNA)</span><br><span class="line"></span><br><span class="line">A &lt;- read.csv(<span class="string">"All_isoform.TPM.matrix.anno.xls"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># rownames:sample; colnames: Transcripts</span></span><br><span class="line">row.names(A) = A[[<span class="number">2</span>]]</span><br><span class="line">A = A[-(<span class="number">1</span>:<span class="number">2</span>)]</span><br><span class="line">datExpr0 = t(A)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Data filter</span></span><br><span class="line">gsg = goodSamplesGenes(datExpr0, verbose = <span class="number">3</span>);</span><br><span class="line">gsg$allOK</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!gsg$allOK)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># Optionally, print the gene and sample names that were removed:</span></span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodGenes)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing genes:"</span>, paste(names(datExpr0)[!gsg$goodGenes], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodSamples)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing samples:"</span>, paste(rownames(datExpr0)[!gsg$goodSamples], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="comment"># Remove the offending genes and samples from the data:</span></span><br><span class="line">  datExpr0 = datExpr0[gsg$goodSamples, gsg$goodGenes]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="1-2-Clust"><a href="#1-2-Clust" class="headerlink" title="1.2 Clust"></a>1.2 Clust</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">sampleTree = hclust(dist(datExpr0), method = <span class="string">"average"</span>);</span><br><span class="line"><span class="comment">#png(file = "sampleClustering_T45.png",wi=300, he=300)</span></span><br><span class="line">par(cex = <span class="number">0.6</span>);</span><br><span class="line">par(mar = c(<span class="number">0</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">0</span>))</span><br><span class="line">plot(sampleTree, main = <span class="string">"Sample clustering to detect outliers"</span>, sub=<span class="string">""</span>, xlab=<span class="string">""</span>, cex.lab = <span class="number">1.5</span>,</span><br><span class="line">     cex.axis = <span class="number">1.5</span>, cex.main = <span class="number">2</span>)</span><br><span class="line"><span class="comment">#dev.off()</span></span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/PXY8AC1jcZiHlBQ.png" alt="sampleClustering"><br>相對來說， Liver30 異質性有點大， 不過， 根據實驗來說， 應該是正常現象，因此跳過刪除異質性項。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">datExpr =  datExpr0</span><br><span class="line">nGenes = ncol(datExpr)</span><br><span class="line">nSamples = nrow(datExpr)</span><br></pre></td></tr></table></figure></div><h2 id="1-3-Loading-Traits"><a href="#1-3-Loading-Traits" class="headerlink" title="1.3 Loading Traits"></a>1.3 Loading Traits</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">traitData = read.csv(<span class="string">"traits.csv"</span>)</span><br><span class="line"></span><br><span class="line">allTraits = traitData[-c(<span class="number">2</span>,<span class="number">3</span>)]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">Samples = rownames(datExpr);</span><br><span class="line">traitRows = match(Samples, allTraits$ID);</span><br><span class="line">datTraits = allTraits[traitRows, -<span class="number">1</span>];</span><br><span class="line">rownames(datTraits) = allTraits[traitRows, <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">collectGarbage()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Re-cluster samples</span></span><br><span class="line">sampleTree2 = hclust(dist(datExpr), method = <span class="string">"average"</span>)</span><br><span class="line"><span class="comment"># Convert traits to a color representation: white means low, red means high, grey means missing entry</span></span><br><span class="line">traitColors = numbers2colors(datTraits, signed = <span class="literal">FALSE</span>);</span><br><span class="line"><span class="comment"># Plot the sample dendrogram and the colors underneath.</span></span><br><span class="line"><span class="comment"># png("traits_heatmap.png")</span></span><br><span class="line">plotDendroAndColors(sampleTree2, traitColors,</span><br><span class="line">                    groupLabels = names(datTraits),</span><br><span class="line">                    main = <span class="string">"Sample dendrogram and trait heatmap"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/mwHBczOjh4TVFNp.png" alt="traits_heatmap"></p><p>ummm, 並不能看出什麼來。只是個普通的熱圖加樹衛而已</p><h1 id="2-Network-construction-and-module-detection"><a href="#2-Network-construction-and-module-detection" class="headerlink" title="2. Network construction and module detection"></a>2. Network construction and module detection</h1><h2 id="2-1-Pick-soft-thresdholding-power"><a href="#2-1-Pick-soft-thresdholding-power" class="headerlink" title="2.1 Pick soft-thresdholding power"></a>2.1 Pick soft-thresdholding power</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">powers = c(c(<span class="number">1</span>:<span class="number">10</span>), seq(from = <span class="number">12</span>, to=<span class="number">20</span>, by=<span class="number">2</span>))</span><br><span class="line"><span class="comment"># Call the network topology analysis function</span></span><br><span class="line">sft = pickSoftThreshold(datExpr, powerVector = powers, verbose = <span class="number">5</span>)</span><br><span class="line"><span class="comment"># Plot the results:</span></span><br><span class="line">sizeGrWindow(<span class="number">9</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment">#png("sorft_Thread.png",wi=630,he=350)</span></span><br><span class="line"><span class="comment"># Scale-free topology fit index as a function of the soft-thresholding power</span></span><br><span class="line"><span class="comment"># png("T45_Soft_th.png",width=500,height=300)</span></span><br><span class="line">cex1 = <span class="number">0.9</span>;</span><br><span class="line">par(mfrow = c(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line">plot(sft$fitIndices[,<span class="number">1</span>], -sign(sft$fitIndices[,<span class="number">3</span>])*sft$fitIndices[,<span class="number">2</span>],</span><br><span class="line">     xlab=<span class="string">"Soft Threshold (power)"</span>,ylab=<span class="string">"Scale Free Topology Model Fit,signed R^2"</span>,type=<span class="string">"n"</span>,</span><br><span class="line">     main = paste(<span class="string">"Scale independence"</span>));</span><br><span class="line">text(sft$fitIndices[,<span class="number">1</span>], -sign(sft$fitIndices[,<span class="number">3</span>])*sft$fitIndices[,<span class="number">2</span>],</span><br><span class="line">     labels=powers,cex=cex1,col=<span class="string">"red"</span>);</span><br><span class="line"><span class="comment"># this line corresponds to using an R^2 cut-off of h</span></span><br><span class="line">abline(h=<span class="number">0.90</span>,col=<span class="string">"red"</span>)</span><br><span class="line"><span class="comment"># Mean connectivity as a function of the soft-thresholding power</span></span><br><span class="line">plot(sft$fitIndices[,<span class="number">1</span>], sft$fitIndices[,<span class="number">5</span>],</span><br><span class="line">     xlab=<span class="string">"Soft Threshold (power)"</span>,ylab=<span class="string">"Mean Connectivity"</span>, type=<span class="string">"n"</span>,</span><br><span class="line">     main = paste(<span class="string">"Mean connectivity"</span>))</span><br><span class="line">text(sft$fitIndices[,<span class="number">1</span>], sft$fitIndices[,<span class="number">5</span>], labels=powers, cex=cex1,col=<span class="string">"red"</span>)</span><br><span class="line"><span class="comment">#dev.off()</span></span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/jh13CuI86y9Sfbg.png" alt="sorft_Thread"></p><p>ummm… 等了半天，就這。。。這種垃圾數據的話， 還是放棄把。</p><h1 id="3-刪除不必要reads，再來做一遍"><a href="#3-刪除不必要reads，再來做一遍" class="headerlink" title="3. 刪除不必要reads，再來做一遍"></a>3. 刪除不必要reads，再來做一遍</h1><p>想法： 刪除低hit的reads， 減少計算量，減少垃圾數據的污染</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Counts &lt;- read.csv(<span class="string">"/media/ken/Data/Yan/RNA-seq/report/4.exprs//All_isoform.COUNT.matrix.anno.xls"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line">Counts$Sum = rowSums(Counts[-c(<span class="number">1</span>:<span class="number">2</span>)])</span><br><span class="line">Counts_sub = Counts[which(Counts$Sum&gt;<span class="number">10</span>),]</span><br><span class="line">paste(round((nrow(Counts_sub)/nrow(Counts))*<span class="number">100</span>,<span class="number">2</span>),<span class="string">"%"</span>,sep=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">A_sub &lt;- A[match(Counts_sub[[<span class="number">2</span>]],rownames(A)),]</span><br></pre></td></tr></table></figure></div><p>然後， 重複上面步驟, 從1.1 <code>datExpr0 = t(A)</code>替換成<code>datExpr0 = t(A_sub)</code>開始<br><img src="https://i.loli.net/2020/06/10/uEx8fr32wglcOIK.png" alt="Soft_th2"><br>鐺鐺鐺鐺鐺! 這次結果就好看多了把！<br>雖然沒有 Tutorial 那樣標緻，但是，至少給了我繼續下去的勇氣。<br>數據不好，就調高閾值把， 更具這條線，大概是要選9了</p><h1 id="4-One-step-NetWork"><a href="#4-One-step-NetWork" class="headerlink" title="4. One-step NetWork"></a>4. One-step NetWork</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">net = blockwiseModules(datExpr, power = <span class="number">9</span>,</span><br><span class="line">                       TOMType = <span class="string">"unsigned"</span>, minModuleSize = <span class="number">30</span>,</span><br><span class="line">                       reassignThreshold = <span class="number">0</span>, mergeCutHeight = <span class="number">0.25</span>,</span><br><span class="line">                       numericLabels = <span class="literal">TRUE</span>, pamRespectsDendro = <span class="literal">FALSE</span>,</span><br><span class="line">                       saveTOMs = <span class="literal">TRUE</span>,</span><br><span class="line">                       saveTOMFileBase = <span class="string">"femaleMouseTOM"</span>,</span><br><span class="line">                       verbose = <span class="number">3</span>)</span><br></pre></td></tr></table></figure></div><p>這一步等待時間和你電腦計算能力，基因數量成正相關</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">moduleLabels = net$colors</span><br><span class="line">moduleColors = labels2colors(net$colors)</span><br><span class="line">MEs = net$MEs;</span><br><span class="line">geneTree = net$dendrograms[[<span class="number">1</span>]]</span><br><span class="line"><span class="comment"># open a graphics window</span></span><br><span class="line">sizeGrWindow(<span class="number">12</span>, <span class="number">9</span>)</span><br><span class="line"><span class="comment"># png('modules_tree.png',width=480, height=320)</span></span><br><span class="line"><span class="comment"># Convert labels to colors for plotting</span></span><br><span class="line">mergedColors = labels2colors(net$colors)</span><br><span class="line"><span class="comment"># Plot the dendrogram and the module colors underneath</span></span><br><span class="line">plotDendroAndColors(net$dendrograms[[<span class="number">1</span>]], mergedColors[net$blockGenes[[<span class="number">1</span>]]],</span><br><span class="line">                    <span class="string">"Module colors"</span>,</span><br><span class="line">                    dendroLabels = <span class="literal">FALSE</span>, hang = <span class="number">0.03</span>,</span><br><span class="line">                    addGuide = <span class="literal">TRUE</span>, guideHang = <span class="number">0.05</span>)</span><br><span class="line"><span class="comment">#dev.off()</span></span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/HYXmnS3acVgPOyU.png" alt="modules_tree"></p><p>ummmm… 模塊似乎有點寬， 分的不均勻- - 感覺很爛的樣子。 要不再， 篩一下？</p><p>Modules 統計</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line">Color_TB = melt(table(labels2colors(net$colors)))</span><br><span class="line">Color_TB$Var1 = factor(Color_TB$Var1, levels = Color_TB$Var1[order(Color_TB$value,decreasing = <span class="literal">T</span>)])</span><br><span class="line">ggplot(Color_TB) + geom_bar(aes(x=Var1,y=value), stat = <span class="string">'identity'</span>,fill=Color_TB$Var1)+</span><br><span class="line">  theme_light() +theme(axis.text.x = element_text(angle = <span class="number">90</span>,hjust=<span class="number">1</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/11/Ks396OUztmydnu2.png" alt="123"></p><h1 id="5-Traits"><a href="#5-Traits" class="headerlink" title="5. Traits"></a>5. Traits</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">nGenes = ncol(datExpr);</span><br><span class="line">nSamples = nrow(datExpr);</span><br><span class="line"><span class="comment"># Recalculate MEs with color labels</span></span><br><span class="line">MEs0 = moduleEigengenes(datExpr, moduleColors)$eigengenes</span><br><span class="line">MEs = orderMEs(MEs0)</span><br><span class="line">moduleTraitCor = cor(MEs, datTraits, use = <span class="string">"p"</span>);</span><br><span class="line">moduleTraitPvalue = corPvalueStudent(moduleTraitCor, nSamples);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sizeGrWindow(<span class="number">10</span>,<span class="number">6</span>)</span><br><span class="line"><span class="comment"># Will display correlations and their p-values</span></span><br><span class="line"><span class="comment"># png("T45_traits_heatmap.png",width=1000,height=600)</span></span><br><span class="line">textMatrix =  paste(signif(moduleTraitCor, <span class="number">2</span>), <span class="string">"\n("</span>,</span><br><span class="line">                           signif(moduleTraitPvalue, <span class="number">1</span>), <span class="string">")"</span>, sep = <span class="string">""</span>);</span><br><span class="line">dim(textMatrix) = dim(moduleTraitCor)</span><br><span class="line">par(mar = c(<span class="number">6</span>, <span class="number">8.5</span>, <span class="number">3</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment"># Display the correlation values within a heatmap plot</span></span><br><span class="line">labeledHeatmap(Matrix = moduleTraitCor,</span><br><span class="line">               xLabels = names(datTraits),</span><br><span class="line">               yLabels = names(MEs),</span><br><span class="line">               ySymbols = names(MEs),</span><br><span class="line">               colorLabels = <span class="literal">FALSE</span>,</span><br><span class="line">               colors = greenWhiteRed(<span class="number">50</span>),</span><br><span class="line">               textMatrix = textMatrix,</span><br><span class="line">               setStdMargins = <span class="literal">FALSE</span>,</span><br><span class="line">               cex.text = <span class="number">0.5</span>,</span><br><span class="line">               zlim = c(-<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">               main = paste(<span class="string">"Module-trait relationships"</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/6sAcpShBmkZXGyW.png" alt="traits_heatmap"><br>ummm, 能看個大概就好2333.還是有點意思的</p><h1 id="6-Focus-on-Weight"><a href="#6-Focus-on-Weight" class="headerlink" title="6. Focus on Weight"></a>6. Focus on Weight</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">weight = as.data.frame(datTraits$Weight)</span><br><span class="line">modNames = substring(names(MEs), <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">geneModuleMembership = as.data.frame(cor(datExpr, MEs, use = <span class="string">"p"</span>));</span><br><span class="line">MMPvalue = as.data.frame(corPvalueStudent(as.matrix(geneModuleMembership), nSamples));</span><br><span class="line"></span><br><span class="line">names(geneModuleMembership) = paste(<span class="string">"MM"</span>, modNames, sep=<span class="string">""</span>);</span><br><span class="line">names(MMPvalue) = paste(<span class="string">"p.MM"</span>, modNames, sep=<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">geneTraitSignificance = as.data.frame(cor(datExpr, weight, use = <span class="string">"p"</span>));</span><br><span class="line">GSPvalue = as.data.frame(corPvalueStudent(as.matrix(geneTraitSignificance), nSamples));</span><br><span class="line"></span><br><span class="line">names(geneTraitSignificance) = paste(<span class="string">"GS."</span>, names(weight), sep=<span class="string">""</span>);</span><br><span class="line">names(GSPvalue) = paste(<span class="string">"p.GS."</span>, names(weight), sep=<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module = <span class="string">"grey"</span></span><br><span class="line">column = match(module, modNames);</span><br><span class="line">moduleGenes = moduleColors==module;</span><br><span class="line"></span><br><span class="line">sizeGrWindow(<span class="number">7</span>, <span class="number">7</span>);</span><br><span class="line"><span class="comment"># png("grey_weight.png")</span></span><br><span class="line">par(mfrow = c(<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">verboseScatterplot(abs(geneModuleMembership[moduleGenes, column]),</span><br><span class="line">                   abs(geneTraitSignificance[moduleGenes, <span class="number">1</span>]),</span><br><span class="line">                   xlab = paste(<span class="string">"Module Membership in"</span>, module, <span class="string">"module"</span>),</span><br><span class="line">                   ylab = <span class="string">"Gene significance for body weight"</span>,</span><br><span class="line">                   main = paste(<span class="string">"Module membership vs. gene significance\n"</span>),</span><br><span class="line">                   cex.main = <span class="number">1.2</span>, cex.lab = <span class="number">1.2</span>, cex.axis = <span class="number">1.2</span>, col = module)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/jWYKMUZ1o4gqQu5.png" alt="grey_weight"><br>ummmm… 有點少， 哈哈哈， 才18個，數了一下。和tutorial 差好多呀</p><p>因爲是非模式物種，所以無法直接用tutorial給的方法做註釋。<br>直接調到後面的可視化把。</p><h1 id="7-NetWork-Visualizing"><a href="#7-NetWork-Visualizing" class="headerlink" title="7. NetWork  Visualizing"></a>7. NetWork  Visualizing</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">nGenes = ncol(datExpr)</span><br><span class="line">nSamples = nrow(datExpr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculate topological overlap anew: this could be done more efficiently by saving the TOM</span></span><br><span class="line"><span class="comment"># calculated during module detection, but let us do it again here.</span></span><br><span class="line">dissTOM = <span class="number">1</span>-TOMsimilarityFromExpr(datExpr, power = <span class="number">9</span>);</span><br><span class="line"><span class="comment"># Transform dissTOM with a power to make moderately strong connections more visible in the heatmap</span></span><br><span class="line">plotTOM = dissTOM^<span class="number">7</span>;</span><br><span class="line"><span class="comment"># Set diagonal to NA for a nicer plot</span></span><br><span class="line">diag(plotTOM) = <span class="literal">NA</span>;</span><br><span class="line"><span class="comment"># Call the plot function</span></span><br><span class="line">sizeGrWindow(<span class="number">9</span>,<span class="number">9</span>)</span><br><span class="line">TOMplot(plotTOM, geneTree, moduleColors, main = <span class="string">"Network heatmap plot, all genes"</span>)</span><br><span class="line"></span><br><span class="line">nSelect = <span class="number">400</span></span><br><span class="line"><span class="comment"># For reproducibility, we set the random seed</span></span><br><span class="line">set.seed(<span class="number">10</span>);</span><br><span class="line">select = sample(nGenes, size = nSelect);</span><br><span class="line">selectTOM = dissTOM[select, select];</span><br><span class="line"><span class="comment"># There's no simple way of restricting a clustering tree to a subset of genes, so we must re-cluster.</span></span><br><span class="line">selectTree = hclust(as.dist(selectTOM), method = <span class="string">"average"</span>)</span><br><span class="line">selectColors = moduleColors[select];</span><br><span class="line"><span class="comment"># Open a graphical window</span></span><br><span class="line">sizeGrWindow(<span class="number">9</span>,<span class="number">9</span>)</span><br><span class="line"><span class="comment"># Taking the dissimilarity to a power, say 10, makes the plot more informative by effectively changing</span></span><br><span class="line"><span class="comment"># the color palette; setting the diagonal to NA also improves the clarity of the plot</span></span><br><span class="line"><span class="comment">#png('123.png')</span></span><br><span class="line">plotDiss = selectTOM^<span class="number">7</span>;</span><br><span class="line">diag(plotDiss) = <span class="literal">NA</span>;</span><br><span class="line">TOMplot(plotDiss, selectTree, selectColors, main = <span class="string">"Network heatmap plot, selected genes"</span>)</span><br></pre></td></tr></table></figure></div><p>ummm… 好像是內存爆了，直接退出。 試試不用radian看看<br><span style="background:salmon">失敗了- -放棄， 跳過把</span><br>參考圖：<br><img src="https://i.loli.net/2020/06/08/wrpXGJj4qQOulim.png" alt="123"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MEs = moduleEigengenes(datExpr, moduleColors)$eigengenes</span><br><span class="line"><span class="comment"># Isolate weight from the clinical traits</span></span><br><span class="line">weight = as.data.frame(datTraits$Weight);</span><br><span class="line">names(weight) = <span class="string">"weight"</span></span><br><span class="line"><span class="comment"># Add the weight to existing module eigengenes</span></span><br><span class="line">MET = orderMEs(cbind(MEs, weight))</span><br><span class="line"><span class="comment"># Plot the relationships among the eigengenes and the trait</span></span><br><span class="line">sizeGrWindow(<span class="number">5</span>,<span class="number">7.5</span>);</span><br><span class="line"><span class="comment">#png('T45_Tree_weight_module.png',width=400,height=600)</span></span><br><span class="line">par(cex = <span class="number">0.9</span>)</span><br><span class="line">plotEigengeneNetworks(MET, <span class="string">""</span>, marDendro = c(<span class="number">0</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>), marHeatmap = c(<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>), cex.lab = <span class="number">0.8</span>, xLabelsAngle = <span class="number">90</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/tTvZu9" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/10/tTvZu9.png" alt="tTvZu9.png"></a></p><p>這個圖還是可以畫的</p><h1 id="8-數據導出"><a href="#8-數據導出" class="headerlink" title="8. 數據導出"></a>8. 數據導出</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">modules = c(<span class="string">"darkorange2"</span>, <span class="string">"grey"</span>,<span class="string">"lightcyan"</span>);</span><br><span class="line">inModule = is.finite(match(moduleColors, modules));</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(color <span class="keyword">in</span> modules)&#123;</span><br><span class="line">  write.table(colnames(t(net$colors[moduleColors==color])),paste(<span class="string">"module_"</span>,color,<span class="string">'.list'</span>,sep=<span class="string">""</span>) ,row.names=<span class="literal">F</span>,quote=<span class="literal">F</span>,col.names=<span class="literal">F</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">probes = names(datExpr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Recalculate topological overlap if needed</span></span><br><span class="line">TOM = TOMsimilarityFromExpr(datExpr, power = <span class="number">9</span>);</span><br><span class="line"><span class="comment"># Read in the annotation file</span></span><br><span class="line">annot = read.csv(file = <span class="string">"GeneAnnotation.csv"</span>);</span><br><span class="line"><span class="comment"># Select modules</span></span><br><span class="line"><span class="comment"># Select module probes</span></span><br><span class="line">modProbes = probes[inModule];</span><br><span class="line">modGenes = annot$gene_symbol[match(modProbes, annot$substanceBXH)];</span><br><span class="line"><span class="comment"># Select the corresponding Topological Overlap</span></span><br><span class="line">modTOM = TOM[inModule, inModule];</span><br><span class="line">dimnames(modTOM) = list(modProbes, modProbes)</span><br><span class="line"><span class="comment"># Export the network into edge and node list files Cytoscape can read</span></span><br><span class="line">cyt = exportNetworkToCytoscape(modTOM,</span><br><span class="line">  edgeFile = paste(<span class="string">"CytoscapeInput-edges-"</span>, paste(modules, collapse=<span class="string">"-"</span>), <span class="string">".txt"</span>, sep=<span class="string">""</span>),</span><br><span class="line">  nodeFile = paste(<span class="string">"CytoscapeInput-nodes-"</span>, paste(modules, collapse=<span class="string">"-"</span>), <span class="string">".txt"</span>, sep=<span class="string">""</span>),</span><br><span class="line">  weighted = <span class="literal">TRUE</span>,</span><br><span class="line">  threshold = <span class="number">0.02</span>,</span><br><span class="line">  nodeNames = modProbes,</span><br><span class="line">  altNodeNames = modGenes,</span><br><span class="line">  nodeAttr = moduleColors[inModule]);</span><br></pre></td></tr></table></figure></div><h1 id="9-如果-softThread-還是取6"><a href="#9-如果-softThread-還是取6" class="headerlink" title="9. 如果 softThread 還是取6"></a>9. 如果 softThread 還是取6</h1><h2 id="Modules-分佈"><a href="#Modules-分佈" class="headerlink" title="Modules 分佈"></a>Modules 分佈</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line">Color_TB = melt(table(labels2colors(net$colors)))</span><br><span class="line">Color_TB$Var1 = factor(Color_TB$Var1, levels = Color_TB$Var1[order(Color_TB$value,decreasing = <span class="literal">T</span>)])</span><br><span class="line">p&lt;- ggplot(Color_TB) + geom_bar(aes(x=Var1,y=value), stat = <span class="string">'identity'</span>,fill=Color_TB$Var1)+</span><br><span class="line">  theme_light() +theme(axis.text.x = element_text(angle = <span class="number">90</span>,hjust=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">SplitBar(p,<span class="number">8500</span>,<span class="number">10000</span>,<span class="number">27000</span>,<span class="number">0</span>,c(<span class="number">1</span>,<span class="number">4</span>))</span><br></pre></td></tr></table></figure></div><p><span style="background:salmon">畫圖函點擊</span><a href="https://www.yuque.com/liuwenkan/blog/ggplot_splitbar" target="_blank" rel="noopener">SplitBar</a><br><img src="https://i.loli.net/2020/06/11/pr5GuX3Z27dHkiz.png" alt="123"></p><p><img src="https://i.loli.net/2020/06/11/eLtsGyoIViqhdJ7.png" alt="S6_modules_tree"></p><h1 id="Optimal"><a href="#Optimal" class="headerlink" title="Optimal"></a>Optimal</h1><h2 id="A1-Reduce-Input-Transcripts"><a href="#A1-Reduce-Input-Transcripts" class="headerlink" title="A1. Reduce Input Transcripts"></a>A1. Reduce Input Transcripts</h2><p>這裏， 我們把閾值設定在 45(9*5)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(WGCNA)</span><br><span class="line"></span><br><span class="line">A &lt;- read.csv(<span class="string">"All_isoform.TPM.matrix.anno.xls"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line"><span class="comment"># rownames:sample; colnames: Transcripts</span></span><br><span class="line">row.names(A) = A[[<span class="number">2</span>]]</span><br><span class="line">A = A[-(<span class="number">1</span>:<span class="number">2</span>)]</span><br><span class="line"></span><br><span class="line">Counts &lt;- read.csv(<span class="string">"/media/ken/Data/Yan/RNA-seq/report/4.exprs//All_isoform.COUNT.matrix.anno.xls"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line">Counts$Sum = rowSums(Counts[-c(<span class="number">1</span>:<span class="number">2</span>)])</span><br><span class="line">Counts_sub = Counts[which(Counts$Sum&gt;<span class="number">45</span>),]</span><br><span class="line">paste(round((nrow(Counts_sub)/nrow(Counts))*<span class="number">100</span>,<span class="number">2</span>),<span class="string">"%"</span>,sep=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">A_sub &lt;- A[match(Counts_sub[[<span class="number">2</span>]],rownames(A)),]</span><br><span class="line"></span><br><span class="line">datExpr0 = t(A_sub)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Data filter</span></span><br><span class="line">gsg = goodSamplesGenes(datExpr0, verbose = <span class="number">3</span>);</span><br><span class="line">gsg$allOK</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!gsg$allOK)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># Optionally, print the gene and sample names that were removed:</span></span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodGenes)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing genes:"</span>, paste(names(datExpr0)[!gsg$goodGenes], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodSamples)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing samples:"</span>, paste(rownames(datExpr0)[!gsg$goodSamples], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="comment"># Remove the offending genes and samples from the data:</span></span><br><span class="line">  datExpr0 = datExpr0[gsg$goodSamples, gsg$goodGenes]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>剩下了<code>&quot;32.96%&quot;</code>的 Transcripts</p><p>接下來退回到1.2</p><p><img src="https://i.loli.net/2020/06/11/vSlio9atZdUREDe.png" alt="T45_Soft_th"><br>ummmm, 好像還沒之前的好看了- -，</p><p>還是取9把，soft</p><p>modules 29 個。<br>traits聚類：</p><table><thead><tr><th align="center">Cluster1</th><th align="center">Cluster2</th></tr></thead><tbody><tr><td align="center"><img src="https://i.loli.net/2020/06/11/2zYmxMo7ARr3y9L.png" alt="T45_traits_heatmap"></td><td align="center"><a href="https://imgchr.com/i/tHgxTs" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/11/tHgxTs.png" alt="tHgxTs.png"></a></td></tr></tbody></table><p>最亮的沒有上次那麼亮，= =相關係數有點低， 不高</p><p>modules 分佈情況:</p><p><img src="https://i.loli.net/2020/06/11/F95UNu6cLeAD8Jb.png" alt="tmp"></p><h1 id="B-Remove-low-hits-amp-Non-DEGs"><a href="#B-Remove-low-hits-amp-Non-DEGs" class="headerlink" title="B. Remove low-hits &amp; Non-DEGs"></a>B. Remove low-hits &amp; Non-DEGs</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(WGCNA)</span><br><span class="line"></span><br><span class="line">A &lt;- read.csv(<span class="string">"All_isoform.TPM.matrix.anno.xls"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line"><span class="comment"># rownames:sample; colnames: Transcripts</span></span><br><span class="line">row.names(A) = A[[<span class="number">2</span>]]</span><br><span class="line">A = A[-(<span class="number">1</span>:<span class="number">2</span>)]</span><br><span class="line"></span><br><span class="line">Counts &lt;- read.csv(<span class="string">"/media/ken/Data/Yan/RNA-seq/report/4.exprs//All_isoform.COUNT.matrix.anno.xls"</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line">Counts$Sum = rowSums(Counts[-c(<span class="number">1</span>:<span class="number">2</span>)])</span><br><span class="line">Counts_sub = Counts[which(Counts$Sum&gt;<span class="number">9</span>),]</span><br><span class="line">paste(round((nrow(Counts_sub)/nrow(Counts))*<span class="number">100</span>,<span class="number">2</span>),<span class="string">"%"</span>,sep=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">A_sub &lt;- A[match(Counts_sub[[<span class="number">2</span>]],rownames(A)),]</span><br><span class="line"></span><br><span class="line">DEG1 &lt;- read.table(<span class="string">"../edgeR_Intest/diffExpr.P1e-3_C2.matrix"</span>,head=<span class="literal">T</span>)</span><br><span class="line">DEG2 &lt;- read.table(<span class="string">"../edgeR_Liver/diffExpr.P1e-3_C2.matrix"</span>,head=<span class="literal">T</span>)</span><br><span class="line">DEG3 &lt;- read.table(<span class="string">"../edgeR_Muscle/diffExpr.P1e-3_C2.matrix"</span>,head=<span class="literal">T</span>)</span><br><span class="line"></span><br><span class="line">List = as.character(unique(DEG1[[<span class="number">1</span>]], DEG2[[<span class="number">1</span>]], DEG3[[<span class="number">1</span>]]))</span><br><span class="line"></span><br><span class="line">A_DEG = na.omit(A_sub[match(row.names(A_sub), List),])</span><br><span class="line"></span><br><span class="line">datExpr0 = t(A_DEG)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Data filter</span></span><br><span class="line">gsg = goodSamplesGenes(datExpr0, verbose = <span class="number">3</span>);</span><br><span class="line">gsg$allOK</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!gsg$allOK)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># Optionally, print the gene and sample names that were removed:</span></span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodGenes)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing genes:"</span>, paste(names(datExpr0)[!gsg$goodGenes], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodSamples)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing samples:"</span>, paste(rownames(datExpr0)[!gsg$goodSamples], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="comment"># Remove the offending genes and samples from the data:</span></span><br><span class="line">  datExpr0 = datExpr0[gsg$goodSamples, gsg$goodGenes]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><p>跳回 1.2<br>ummmm, 這麼篩完以後， 剩下了<code>1105</code>個Transcripts 。。。</p><table><thead><tr><th align="center">聚類</th><th align="center">Soft圖</th></tr></thead><tbody><tr><td align="center">這次聚類結果，就很不一樣了</td><td align="center">不過sortpower這個圖，基本還是和前文一樣沒怎麼變。取0.9以上的話， 又得取10了</td></tr><tr><td align="center"><a href="https://imgchr.com/i/tbo3UU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/11/tbo3UU.png" alt="tbo3UU.png"></a></td><td align="center"><a href="https://imgchr.com/i/tbo1ET" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/11/tbo1ET.png" alt="tbo1ET.png"></a></td></tr></tbody></table><p>還是去9吧。 1000個，秒算完。<br>先看看分組頻率 和樹圖<br>這個圖，我就覺得，看着舒服多了- -唉<br>|聚類|Soft圖|<br>|:—:|:—:|<br>|<img src="https://i.loli.net/2020/06/11/hUMPXSTErxqBI9n.png" alt="DEG_bar">)|<img src="https://i.loli.net/2020/06/11/hWnYQKlG1HpdqPU.png" alt="DEG_tree">|<br>|第一次畫出Tomplot，激動|這個聚類，相關性都不太高呀|<br>|<img src="https://i.loli.net/2020/06/11/PGng6FisKjfvJ48.png" alt="DEG_tomplot">)|<img src="https://i.loli.net/2020/06/11/IZJjsXWo2AmlHxU.png" alt="DEG_Tree_weight_module">|<br><img src="https://i.loli.net/2020/06/11/E3GxfJa8T2VNRlk.png" alt="DEG_traits_heatmap"></p><p>相關性確實是太低了。 我們看一下這1000基因的表達趨勢把。</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplotify)</span><br><span class="line"></span><br><span class="line">A_DEG$Module = labels2colors(net$colors)</span><br><span class="line">A_DEG$ID = row.names(A_DEG)</span><br><span class="line"></span><br><span class="line">TB = melt(A_DEG,id.vars = c(<span class="string">"ID"</span>,<span class="string">"Module"</span>))</span><br><span class="line">TB$variable = factor(TB$variable,levels=sort(as.character(unique((TB$variable)))))</span><br><span class="line"></span><br><span class="line">TB$ID = factor(TB$ID, levels = row.names(A_DEG)[order(A_DEG$Module)])</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot( TB, aes( variable, ID)) + theme(panel.grid.major = element_blank())+</span><br><span class="line">    theme(legend.key=element_blank(), axis.text.y = element_blank(),</span><br><span class="line">          axis.title=element_blank(),axis.ticks.y=element_blank(),</span><br><span class="line">          axis.text.x=element_text(angle=<span class="number">90</span>,hjust=<span class="number">1</span>))+</span><br><span class="line">    geom_tile(aes(fill=log(<span class="number">1</span>+value)))+</span><br><span class="line">    scale_fill_gradient2(low=<span class="string">"steelblue"</span>,mid=<span class="string">"white"</span>,high=<span class="string">"red"</span>,midpoint =<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">A_DEG$ID = factor(A_DEG$ID, levels = row.names(A_DEG)[order(A_DEG$Module)])</span><br><span class="line">p1 &lt;-ggplot(A_DEG[<span class="number">10</span>:<span class="number">11</span>], aes( x=<span class="string">"Module"</span>, y=ID)) + theme(panel.grid.major = element_blank())+</span><br><span class="line">    theme(axis.text.y = element_blank(), legend.position =  <span class="string">'left'</span>,</span><br><span class="line">        axis.title=element_blank(),axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.x=element_text(angle=<span class="number">90</span>,hjust=<span class="number">1</span>))+</span><br><span class="line">    geom_tile(fill=A_DEG$Module)</span><br><span class="line"></span><br><span class="line">p1+p2 +  plot_layout(design = <span class="string">'ABBBBBBBBBB'</span>)</span><br></pre></td></tr></table></figure></div><p>熱圖還是，可以的，就是配色有點麻煩- -<br><img src="https://i.loli.net/2020/06/11/awg2zCr6LpblocB.png" alt="co_heatmap"><br>只管來看， 聚類效果還是OK的把。不過correlation值太低了 = = 有什麼之後再去深究把。</p><p>添加樹<br>打包兩個函數</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">PLOT2 &lt;- <span class="keyword">function</span>(dendr)&#123;</span><br><span class="line">  ggplot() +</span><br><span class="line">  geom_segment(data=segment(dendr), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">  geom_text(data=label(dendr), aes(x, y, label=label, hjust=<span class="number">0</span>),</span><br><span class="line">           size=<span class="number">3</span>) +</span><br><span class="line">  coord_flip() + scale_y_reverse(expand=c(<span class="number">0.2</span>, <span class="number">0</span>)) +</span><br><span class="line">  theme(axis.line.y=element_blank(),</span><br><span class="line">        axis.ticks.y=element_blank(),</span><br><span class="line">        axis.text.y=element_blank(),</span><br><span class="line">        axis.title.y=element_blank(),</span><br><span class="line">        panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">        panel.grid=element_blank())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LS_judg&lt;- <span class="keyword">function</span>(TB)&#123;</span><br><span class="line">  <span class="keyword">if</span> (TB[<span class="string">'x'</span>] == TB[<span class="string">'xend'</span>])&#123;</span><br><span class="line">    R = <span class="string">'v'</span></span><br><span class="line">  &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">    R = <span class="string">'h'</span></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span>(R)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">TreePlot &lt;- <span class="keyword">function</span>(dendr, Width_tree)&#123;</span><br><span class="line">  dendr$labels$x = Width_tree[dendr$labels$x]</span><br><span class="line">  dendr$segments = dendr$segments[order(dendr$segments$x),]</span><br><span class="line">  <span class="comment"># 做個list</span></span><br><span class="line">  List = c()</span><br><span class="line">  <span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:length(Width_tree)))&#123;</span><br><span class="line">    List = c(List, which(dendr$segments$x==i))</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># 調整豎線</span></span><br><span class="line">  <span class="keyword">for</span>( i <span class="keyword">in</span> c(<span class="number">1</span>:length(dendr$labels$label)))&#123;</span><br><span class="line">  Dif_tmp = Width_tree[i]- dendr$segments$x[List[i]]</span><br><span class="line">  dendr$segments$x[List[i]:nrow(dendr$segments)] = dendr$segments$x[List[i]:nrow(dendr$segments)]+Dif_tmp</span><br><span class="line">  dendr$segments$xend[List[i]:nrow(dendr$segments)] = dendr$segments$xend[List[i]:nrow(dendr$segments)]+Dif_tmp</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># 刪除添加新的橫線</span></span><br><span class="line">  dendr$segments = dendr$segments[dendr$segments$x == dendr$segments$xend,]</span><br><span class="line">  Y_list = dendr$segments$y[duplicated(dendr$segments$y)]</span><br><span class="line">  <span class="keyword">for</span>(i <span class="keyword">in</span> Y_list)&#123;  </span><br><span class="line">  tmp = (dendr$segments$x[dendr$segments$y  == i])</span><br><span class="line">  dendr$segments = rbind(dendr$segments, data.frame(x=tmp[<span class="number">1</span>],y=i,xend=tmp[<span class="number">2</span>],yend=i))</span><br><span class="line">  &#125;</span><br><span class="line">  Seg = dendr$segments</span><br><span class="line">  <span class="keyword">for</span>( i <span class="keyword">in</span> c(nrow(dendr$segments):<span class="number">1</span>))&#123;</span><br><span class="line">    <span class="keyword">if</span>(LS_judg(dendr$segments[i,]) == <span class="string">'h'</span>)&#123;</span><br><span class="line">      tmpy = dendr$segments[i,]$y</span><br><span class="line">      tmpTB = Seg[Seg$yend== tmpy,]</span><br><span class="line">        <span class="keyword">for</span>( ii <span class="keyword">in</span> c(<span class="number">1</span>:nrow(tmpTB)))&#123;</span><br><span class="line">        <span class="keyword">if</span>(LS_judg(tmpTB[ii,]) == <span class="string">'v'</span>)&#123;</span><br><span class="line">          Num = rownames(tmpTB[<span class="number">1</span>,])</span><br><span class="line">          dendr$segments[match(Num, row.names(dendr$segments)),][c(<span class="number">1</span>,<span class="number">3</span>)] = sum(Seg[i,c(<span class="string">'x'</span>,<span class="string">'xend'</span>)])/<span class="number">2</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># 重画横线：</span></span><br><span class="line">  dendr$segments = dendr$segments[dendr$segments$x == dendr$segments$xend,]</span><br><span class="line">  Y_list = dendr$segments$y[duplicated(dendr$segments$y)]</span><br><span class="line">  <span class="keyword">for</span>(i <span class="keyword">in</span> Y_list)&#123;  </span><br><span class="line">  tmp = (dendr$segments$x[dendr$segments$y  == i])</span><br><span class="line">  dendr$segments = rbind(dendr$segments, data.frame(x=tmp[<span class="number">1</span>],y=i,xend=tmp[<span class="number">2</span>],yend=i))</span><br><span class="line">  &#125;</span><br><span class="line"> <span class="keyword">return</span>(dendr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h3 id="画图"><a href="#画图" class="headerlink" title="画图"></a>画图</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggdendro)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"><span class="keyword">library</span>(RColorBrewer)</span><br><span class="line"></span><br><span class="line">colorRampPalette(rev(brewer.pal(n = <span class="number">7</span>,name = <span class="string">"RdYlBu"</span>))) -&gt; cc</span><br><span class="line"></span><br><span class="line">TB_color = (data.frame(net$colors,color=labels2colors(net$colors)))</span><br><span class="line">A_DEG$ID = row.names(A_DEG)</span><br><span class="line">A_DEG$Module = TB_color$color[match(row.names(A_DEG), row.names(TB_color))]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Samples dendrogram</span></span><br><span class="line">hc &lt;- hclust(dist(t(A_DEG[<span class="number">1</span>:<span class="number">9</span>])))</span><br><span class="line">dendr_head &lt;- dendro_data(hc, type=<span class="string">"rectangle"</span>) <span class="comment"># convert for ggplot</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Module dendrogram</span></span><br><span class="line">hc &lt;- hclust(dist(t(MEs)))</span><br><span class="line">dendr &lt;- dendro_data(hc, type=<span class="string">"rectangle"</span>) <span class="comment"># convert for ggplot</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## 1. order and list</span></span><br><span class="line">Module_list = as.character(dendr$labels$label[order(dendr$labels$x)])</span><br><span class="line">Module_or = c()</span><br><span class="line"><span class="keyword">for</span>( i <span class="keyword">in</span> strsplit(Module_list,<span class="string">'ME'</span>))&#123;</span><br><span class="line">  Module_or = c(Module_or, i[<span class="number">2</span>])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## 2. Axis location</span></span><br><span class="line">TB_mbar = data.frame(table(A_DEG$Module))</span><br><span class="line">TB_mbar = TB_mbar = data.frame(table(A_DEG$Module))</span><br><span class="line">TB_mbar$hei = TB_mbar$Freq[<span class="number">1</span>]/<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">2</span>:nrow(TB_mbar)))&#123;</span><br><span class="line">  TB_mbar$hei[i] =sum(TB_mbar$Freq[<span class="number">1</span>:i-<span class="number">1</span>])+ (TB_mbar$Freq[i]/<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Width_tree = TB_mbar$hei</span><br><span class="line"></span><br><span class="line">AA &lt;- TreePlot(dendr, Width_tree)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Module Bar</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## acquiring module list</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># order module</span></span><br><span class="line">A_DEG$Module = factor(A_DEG$Module, levels = Module_or)</span><br><span class="line"><span class="comment"># order ID</span></span><br><span class="line">A_DEG$ID = factor(A_DEG$ID, levels = row.names(A_DEG)[order(A_DEG$Module)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># Transcripts Heatmap</span></span><br><span class="line"></span><br><span class="line">primary_data = as.matrix(A_DEG[<span class="number">1</span>:<span class="number">9</span>])</span><br><span class="line"><span class="comment">#transformations</span></span><br><span class="line">data = log2(primary_data+<span class="number">1</span>)</span><br><span class="line">data = as.matrix(data) <span class="comment"># convert to matrix</span></span><br><span class="line"><span class="comment"># Centering rows</span></span><br><span class="line">data = data.frame(t(scale(t(data), scale=<span class="literal">F</span>)))</span><br><span class="line"></span><br><span class="line">TB = melt(cbind(data,A_DEG[c(<span class="string">"ID"</span>,<span class="string">"Module"</span>)]),id.vars = c(<span class="string">"ID"</span>,<span class="string">"Module"</span>))</span><br><span class="line">TB$ID = factor(TB$ID, levels = row.names(A_DEG)[order(A_DEG$Module)])</span><br><span class="line">TB$variable = factor(TB$variable, levels =levels(dendr_head$labels$label))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p0 &lt;- ggplot() +</span><br><span class="line">      geom_segment(data=segment(AA), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">      geom_text(data=label(AA), aes(x, y, label=label, hjust=<span class="number">0</span>),</span><br><span class="line">               size=<span class="number">3</span>) +</span><br><span class="line">      coord_flip() + scale_y_reverse(expand=c(<span class="number">0.7</span>, <span class="number">0</span>)) +</span><br><span class="line">      theme(axis.line.y=element_blank(),</span><br><span class="line">            axis.ticks.y=element_blank(),</span><br><span class="line">            axis.text.y=element_blank(),</span><br><span class="line">            axis.title =element_blank(),</span><br><span class="line">            panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">            panel.grid=element_blank())</span><br><span class="line"></span><br><span class="line">p1 &lt;-ggplot(A_DEG[<span class="number">10</span>:<span class="number">11</span>], aes( x=<span class="string">"Module"</span>, y=ID)) +</span><br><span class="line">    theme(panel.grid.major = element_blank())+</span><br><span class="line">    theme(axis.text.y = element_blank(), legend.position =  <span class="string">'left'</span>,</span><br><span class="line">        axis.title=element_blank(),</span><br><span class="line">        axis.ticks=element_blank(),</span><br><span class="line">        panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">        axis.text.x=element_text(angle=<span class="number">90</span>,hjust=<span class="number">1</span>))+</span><br><span class="line">    geom_tile(fill=A_DEG$Module)</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot( TB, aes( variable, ID)) +</span><br><span class="line">    theme(panel.grid.major = element_blank())+</span><br><span class="line">    theme(legend.key=element_blank(), axis.text.y = element_blank(),</span><br><span class="line">    axis.title=element_blank(),axis.ticks.y=element_blank(),</span><br><span class="line">    axis.text.x=element_text(angle=<span class="number">90</span>,hjust=<span class="number">1</span>))+</span><br><span class="line">    geom_tile(aes(fill=value))+</span><br><span class="line">    scale_fill_gradientn(colors=cc(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">p4 &lt;- ggplot() +</span><br><span class="line">          geom_segment(data=segment(dendr_head), aes(x=x, y=y, xend=xend, yend=yend)) +</span><br><span class="line">          scale_y_reverse(expand=c(<span class="number">0</span>, <span class="number">0</span>)) +</span><br><span class="line">          theme(axis.line.y=element_blank(),</span><br><span class="line">                axis.ticks.x=element_blank(),</span><br><span class="line">                axis.text.x=element_blank(),</span><br><span class="line">                axis.title=element_blank(),</span><br><span class="line">                panel.background=element_rect(fill=<span class="string">"white"</span>),</span><br><span class="line">                panel.grid=element_blank())</span><br><span class="line"></span><br><span class="line">layout_P &lt;- <span class="string">"</span></span><br><span class="line"><span class="string">    AAAABCCCCCC</span></span><br><span class="line"><span class="string">    AAAABCCCCCC</span></span><br><span class="line"><span class="string">    AAAABCCCCCC</span></span><br><span class="line"><span class="string">    AAAABCCCCCC</span></span><br><span class="line"><span class="string">    AAAABCCCCCC</span></span><br><span class="line"><span class="string">    AAAABCCCCCC</span></span><br><span class="line"><span class="string">    #####DDDDDD</span></span><br><span class="line"><span class="string">    "</span></span><br><span class="line"></span><br><span class="line">p0 + p1 + p2 + p4 +  plot_layout(design = layout_P)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/13/1COSfoY6KJGTFil.png" alt="DEG_heatmap"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>WGCNA Tutorial 1</title>
      <link href="/R/WGCNA_1.html"/>
      <url>/R/WGCNA_1.html</url>
      
        <content type="html"><![CDATA[<h1 id="WGCNA-Tutorial-1"><a href="#WGCNA-Tutorial-1" class="headerlink" title="WGCNA Tutorial 1"></a>WGCNA Tutorial 1</h1><p>raw tutorial: <a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/index.html" target="_blank" rel="noopener">Peter</a></p><p>Data:</p><ul><li><a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/FemaleLiver-Data.zip" target="_blank" rel="noopener">Female data</a></li><li><a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/MaleLiver-Data.zip" target="_blank" rel="noopener">Male data</a></li></ul><h1 id="1-Data-Cleaning"><a href="#1-Data-Cleaning" class="headerlink" title="1. Data Cleaning"></a>1. Data Cleaning</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Load the WGCNA package</span></span><br><span class="line"><span class="keyword">library</span>(WGCNA);</span><br><span class="line"><span class="comment"># The following setting is important, do not omit.</span></span><br><span class="line">options(stringsAsFactors = <span class="literal">FALSE</span>);</span><br><span class="line"><span class="comment">#Read in the female liver data set</span></span><br><span class="line">femData = read.csv(<span class="string">"LiverFemale3600.csv"</span>);</span><br><span class="line"></span><br><span class="line">datExpr0 = as.data.frame(t(femData[, -c(<span class="number">1</span>:<span class="number">8</span>)]));</span><br><span class="line">names(datExpr0) = femData$substanceBXH;</span><br><span class="line">rownames(datExpr0) = names(femData)[-c(<span class="number">1</span>:<span class="number">8</span>)];</span><br></pre></td></tr></table></figure></div><h2 id="1-1-Checking-data"><a href="#1-1-Checking-data" class="headerlink" title="1.1 Checking data"></a>1.1 Checking data</h2><p>Checking data for excessive missing values and identification of outlier microarray samples</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">gsg = goodSamplesGenes(datExpr0, verbose = <span class="number">3</span>);</span><br><span class="line">gsg$allOK</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!gsg$allOK)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># Optionally, print the gene and sample names that were removed:</span></span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodGenes)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing genes:"</span>, paste(names(datExpr0)[!gsg$goodGenes], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodSamples)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing samples:"</span>, paste(rownames(datExpr0)[!gsg$goodSamples], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="comment"># Remove the offending genes and samples from the data:</span></span><br><span class="line">  datExpr0 = datExpr0[gsg$goodSamples, gsg$goodGenes]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="1-2-Cluster-the-samples"><a href="#1-2-Cluster-the-samples" class="headerlink" title="1.2 Cluster the samples"></a>1.2 Cluster the samples</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">sampleTree = hclust(dist(datExpr0), method = <span class="string">"average"</span>);</span><br><span class="line"><span class="comment"># Plot the sample tree: Open a graphic output window of size 12 by 9 inches</span></span><br><span class="line"><span class="comment"># The user should change the dimensions if the window is too large or too small.</span></span><br><span class="line">sizeGrWindow(<span class="number">12</span>,<span class="number">9</span>)</span><br><span class="line"><span class="comment">#png(file = "sampleClustering.png")</span></span><br><span class="line">par(cex = <span class="number">0.6</span>);</span><br><span class="line">par(mar = c(<span class="number">0</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">0</span>))</span><br><span class="line">plot(sampleTree, main = <span class="string">"Sample clustering to detect outliers"</span>, sub=<span class="string">""</span>, xlab=<span class="string">""</span>, cex.lab = <span class="number">1.5</span>,</span><br><span class="line">     cex.axis = <span class="number">1.5</span>, cex.main = <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot a line to show the cut</span></span><br><span class="line">abline(h = <span class="number">15</span>, col = <span class="string">"red"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/IowWAKgDSJP6lTC.png" alt="sampleClustering"></p><p>It appears there is one outlier (sample F2_221, see Fig. 1). One can remove it by hand, or use an automatic approach. Choose a height cut that will remove the offending sample, say 15 (the red line in the plot), and use a branch cut at that height.</p><h2 id="1-3-Remove-the-abnormal-sample"><a href="#1-3-Remove-the-abnormal-sample" class="headerlink" title="1.3 Remove the abnormal sample"></a>1.3 Remove the abnormal sample</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Determine cluster under the line</span></span><br><span class="line">clust = cutreeStatic(sampleTree, cutHeight = <span class="number">15</span>, minSize = <span class="number">10</span>)</span><br><span class="line">table(clust)</span><br><span class="line"><span class="comment"># clust 1 contains the samples we want to keep.</span></span><br><span class="line">keepSamples = (clust==<span class="number">1</span>)</span><br><span class="line">datExpr = datExpr0[keepSamples, ]</span><br><span class="line">nGenes = ncol(datExpr)</span><br><span class="line">nSamples = nrow(datExpr)</span><br></pre></td></tr></table></figure></div><h2 id="1-4-Loading-Clinical-Data"><a href="#1-4-Loading-Clinical-Data" class="headerlink" title="1.4 Loading Clinical Data"></a>1.4 Loading Clinical Data</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">traitData = read.csv(<span class="string">"ClinicalTraits.csv"</span>);</span><br><span class="line">dim(traitData)</span><br><span class="line">names(traitData)</span><br><span class="line"></span><br><span class="line"><span class="comment"># remove columns that hold information we do not need.</span></span><br><span class="line">allTraits = traitData[, -c(<span class="number">31</span>, <span class="number">16</span>)];</span><br><span class="line">allTraits = allTraits[, c(<span class="number">2</span>, <span class="number">11</span>:<span class="number">36</span>) ];</span><br><span class="line">dim(allTraits)</span><br><span class="line">names(allTraits)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Form a data frame analogous to expression data that will hold the clinical traits.</span></span><br><span class="line"></span><br><span class="line">femaleSamples = rownames(datExpr);</span><br><span class="line">traitRows = match(femaleSamples, allTraits$Mice);</span><br><span class="line">datTraits = allTraits[traitRows, -<span class="number">1</span>];</span><br><span class="line">rownames(datTraits) = allTraits[traitRows, <span class="number">1</span>];</span><br><span class="line"></span><br><span class="line">collectGarbage()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Re-cluster samples</span></span><br><span class="line">sampleTree2 = hclust(dist(datExpr), method = <span class="string">"average"</span>)</span><br><span class="line"><span class="comment"># Convert traits to a color representation: white means low, red means high, grey means missing entry</span></span><br><span class="line">traitColors = numbers2colors(datTraits, signed = <span class="literal">FALSE</span>);</span><br><span class="line"><span class="comment"># Plot the sample dendrogram and the colors underneath.</span></span><br><span class="line"><span class="comment"># png("traits_heatmap.png")</span></span><br><span class="line">plotDendroAndColors(sampleTree2, traitColors,</span><br><span class="line">                    groupLabels = names(datTraits),</span><br><span class="line">                    main = <span class="string">"Sample dendrogram and trait heatmap"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/QqfwD9e8AroGBLO.png" alt="traits_heatmap"></p><h1 id="2-Network-construction-and-module-detection"><a href="#2-Network-construction-and-module-detection" class="headerlink" title="2. Network construction and module detection"></a>2. Network construction and module detection</h1><p><strong>Automatic one-step detection</strong></p><h2 id="2-1-Pick-soft-thresdholding-power"><a href="#2-1-Pick-soft-thresdholding-power" class="headerlink" title="2.1 Pick soft-thresdholding power"></a>2.1 Pick soft-thresdholding power</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Choose a set of soft-thresholding powers</span></span><br><span class="line">powers = c(c(<span class="number">1</span>:<span class="number">10</span>), seq(from = <span class="number">12</span>, to=<span class="number">20</span>, by=<span class="number">2</span>))</span><br><span class="line"><span class="comment"># Call the network topology analysis function</span></span><br><span class="line">sft = pickSoftThreshold(datExpr, powerVector = powers, verbose = <span class="number">5</span>)</span><br><span class="line"><span class="comment"># Plot the results:</span></span><br><span class="line">sizeGrWindow(<span class="number">9</span>, <span class="number">5</span>)</span><br><span class="line"><span class="comment"># Scale-free topology fit index as a function of the soft-thresholding power</span></span><br><span class="line"><span class="comment"># png("Soft_th.png",width=500,height=300)</span></span><br><span class="line">cex1 = <span class="number">0.9</span>;</span><br><span class="line">par(mfrow = c(<span class="number">1</span>,<span class="number">2</span>));</span><br><span class="line">plot(sft$fitIndices[,<span class="number">1</span>], -sign(sft$fitIndices[,<span class="number">3</span>])*sft$fitIndices[,<span class="number">2</span>],</span><br><span class="line">     xlab=<span class="string">"Soft Threshold (power)"</span>,ylab=<span class="string">"Scale Free Topology Model Fit,signed R^2"</span>,type=<span class="string">"n"</span>,</span><br><span class="line">     main = paste(<span class="string">"Scale independence"</span>));</span><br><span class="line">text(sft$fitIndices[,<span class="number">1</span>], -sign(sft$fitIndices[,<span class="number">3</span>])*sft$fitIndices[,<span class="number">2</span>],</span><br><span class="line">     labels=powers,cex=cex1,col=<span class="string">"red"</span>);</span><br><span class="line"><span class="comment"># this line corresponds to using an R^2 cut-off of h</span></span><br><span class="line">abline(h=<span class="number">0.90</span>,col=<span class="string">"red"</span>)</span><br><span class="line"><span class="comment"># Mean connectivity as a function of the soft-thresholding power</span></span><br><span class="line">plot(sft$fitIndices[,<span class="number">1</span>], sft$fitIndices[,<span class="number">5</span>],</span><br><span class="line">     xlab=<span class="string">"Soft Threshold (power)"</span>,ylab=<span class="string">"Mean Connectivity"</span>, type=<span class="string">"n"</span>,</span><br><span class="line">     main = paste(<span class="string">"Mean connectivity"</span>))</span><br><span class="line">text(sft$fitIndices[,<span class="number">1</span>], sft$fitIndices[,<span class="number">5</span>], labels=powers, cex=cex1,col=<span class="string">"red"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/1xQfcvesAq2nCR5.png" alt="Soft_th"></p><h2 id="2-2-One-step-network-construction-and-module-detection"><a href="#2-2-One-step-network-construction-and-module-detection" class="headerlink" title="2.2 One-step network construction and module detection"></a>2.2 One-step network construction and module detection</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">net = blockwiseModules(datExpr, power = <span class="number">6</span>,</span><br><span class="line">                       TOMType = <span class="string">"unsigned"</span>, minModuleSize = <span class="number">30</span>,</span><br><span class="line">                       reassignThreshold = <span class="number">0</span>, mergeCutHeight = <span class="number">0.25</span>,</span><br><span class="line">                       numericLabels = <span class="literal">TRUE</span>, pamRespectsDendro = <span class="literal">FALSE</span>,</span><br><span class="line">                       saveTOMs = <span class="literal">TRUE</span>,</span><br><span class="line">                       saveTOMFileBase = <span class="string">"femaleMouseTOM"</span>,</span><br><span class="line">                       verbose = <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># View modules</span></span><br><span class="line"><span class="comment"># table(net$colors)</span></span><br><span class="line">moduleLabels = net$colors</span><br><span class="line">moduleColors = labels2colors(net$colors)</span><br><span class="line">MEs = net$MEs;</span><br><span class="line">geneTree = net$dendrograms[[<span class="number">1</span>]]</span><br><span class="line"><span class="comment"># open a graphics window</span></span><br><span class="line">sizeGrWindow(<span class="number">12</span>, <span class="number">9</span>)</span><br><span class="line"><span class="comment"># png('123.png',width=480, height=320)</span></span><br><span class="line"><span class="comment"># Convert labels to colors for plotting</span></span><br><span class="line">mergedColors = labels2colors(net$colors)</span><br><span class="line"><span class="comment"># Plot the dendrogram and the module colors underneath</span></span><br><span class="line">plotDendroAndColors(net$dendrograms[[<span class="number">1</span>]], mergedColors[net$blockGenes[[<span class="number">1</span>]]],</span><br><span class="line">                    <span class="string">"Module colors"</span>,</span><br><span class="line">                    dendroLabels = <span class="literal">FALSE</span>, hang = <span class="number">0.03</span>,</span><br><span class="line">                    addGuide = <span class="literal">TRUE</span>, guideHang = <span class="number">0.05</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/TKXgiWr3vBIP4j2.png" alt="123"></p><h1 id="3-Relating-modules-to-external-information-and-identifying-important-genes"><a href="#3-Relating-modules-to-external-information-and-identifying-important-genes" class="headerlink" title="3. Relating modules to external information and identifying important genes"></a>3. Relating modules to external information and identifying important genes</h1><h2 id="3-1-Clinical-Traits"><a href="#3-1-Clinical-Traits" class="headerlink" title="3.1 Clinical Traits"></a>3.1 Clinical Traits</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define numbers of genes and samples</span></span><br><span class="line">nGenes = ncol(datExpr);</span><br><span class="line">nSamples = nrow(datExpr);</span><br><span class="line"><span class="comment"># Recalculate MEs with color labels</span></span><br><span class="line">MEs0 = moduleEigengenes(datExpr, moduleColors)$eigengenes</span><br><span class="line">MEs = orderMEs(MEs0)</span><br><span class="line">moduleTraitCor = cor(MEs, datTraits, use = <span class="string">"p"</span>);</span><br><span class="line">moduleTraitPvalue = corPvalueStudent(moduleTraitCor, nSamples);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sizeGrWindow(<span class="number">10</span>,<span class="number">6</span>)</span><br><span class="line"><span class="comment"># Will display correlations and their p-values</span></span><br><span class="line"><span class="comment"># png("1234.png",width=1000,height=600)</span></span><br><span class="line">textMatrix =  paste(signif(moduleTraitCor, <span class="number">2</span>), <span class="string">"\n("</span>,</span><br><span class="line">                           signif(moduleTraitPvalue, <span class="number">1</span>), <span class="string">")"</span>, sep = <span class="string">""</span>);</span><br><span class="line">dim(textMatrix) = dim(moduleTraitCor)</span><br><span class="line">par(mar = c(<span class="number">6</span>, <span class="number">8.5</span>, <span class="number">3</span>, <span class="number">3</span>));</span><br><span class="line"><span class="comment"># Display the correlation values within a heatmap plot</span></span><br><span class="line">labeledHeatmap(Matrix = moduleTraitCor,</span><br><span class="line">               xLabels = names(datTraits),</span><br><span class="line">               yLabels = names(MEs),</span><br><span class="line">               ySymbols = names(MEs),</span><br><span class="line">               colorLabels = <span class="literal">FALSE</span>,</span><br><span class="line">               colors = greenWhiteRed(<span class="number">50</span>),</span><br><span class="line">               textMatrix = textMatrix,</span><br><span class="line">               setStdMargins = <span class="literal">FALSE</span>,</span><br><span class="line">               cex.text = <span class="number">0.5</span>,</span><br><span class="line">               zlim = c(-<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">               main = paste(<span class="string">"Module-trait relationships"</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/VehZjcb2F5GM6vR.png" alt="1234"></p><h2 id="3-2-Genes-and-Trait"><a href="#3-2-Genes-and-Trait" class="headerlink" title="3.2 Genes and Trait"></a>3.2 Genes and Trait</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Define variable weight containing the weight column of datTrait</span></span><br><span class="line">weight = as.data.frame(datTraits$weight_g);</span><br><span class="line">names(weight) = <span class="string">"weight"</span></span><br><span class="line"><span class="comment"># names (colors) of the modules</span></span><br><span class="line">modNames = substring(names(MEs), <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line">geneModuleMembership = as.data.frame(cor(datExpr, MEs, use = <span class="string">"p"</span>));</span><br><span class="line">MMPvalue = as.data.frame(corPvalueStudent(as.matrix(geneModuleMembership), nSamples));</span><br><span class="line"></span><br><span class="line">names(geneModuleMembership) = paste(<span class="string">"MM"</span>, modNames, sep=<span class="string">""</span>);</span><br><span class="line">names(MMPvalue) = paste(<span class="string">"p.MM"</span>, modNames, sep=<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">geneTraitSignificance = as.data.frame(cor(datExpr, weight, use = <span class="string">"p"</span>));</span><br><span class="line">GSPvalue = as.data.frame(corPvalueStudent(as.matrix(geneTraitSignificance), nSamples));</span><br><span class="line"></span><br><span class="line">names(geneTraitSignificance) = paste(<span class="string">"GS."</span>, names(weight), sep=<span class="string">""</span>);</span><br><span class="line">names(GSPvalue) = paste(<span class="string">"p.GS."</span>, names(weight), sep=<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">module = <span class="string">"brown"</span></span><br><span class="line">column = match(module, modNames);</span><br><span class="line">moduleGenes = moduleColors==module;</span><br><span class="line"></span><br><span class="line">sizeGrWindow(<span class="number">7</span>, <span class="number">7</span>);</span><br><span class="line"><span class="comment"># png("1234.png")</span></span><br><span class="line">par(mfrow = c(<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">verboseScatterplot(abs(geneModuleMembership[moduleGenes, column]),</span><br><span class="line">                   abs(geneTraitSignificance[moduleGenes, <span class="number">1</span>]),</span><br><span class="line">                   xlab = paste(<span class="string">"Module Membership in"</span>, module, <span class="string">"module"</span>),</span><br><span class="line">                   ylab = <span class="string">"Gene significance for body weight"</span>,</span><br><span class="line">                   main = paste(<span class="string">"Module membership vs. gene significance\n"</span>),</span><br><span class="line">                   cex.main = <span class="number">1.2</span>, cex.lab = <span class="number">1.2</span>, cex.axis = <span class="number">1.2</span>, col = module)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/iWERCpGZ2Nhse7X.png" alt="1234"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">annot = read.csv(file = <span class="string">"GeneAnnotation.csv"</span>);</span><br><span class="line">dim(annot)</span><br><span class="line">names(annot)</span><br><span class="line">probes = names(datExpr)</span><br><span class="line">probes2annot = match(probes, annot$substanceBXH)</span><br><span class="line"><span class="comment"># The following is the number or probes without annotation:</span></span><br><span class="line">sum(is.na(probes2annot))</span><br><span class="line"><span class="comment"># Should return 0.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create the starting data frame</span></span><br><span class="line">geneInfo0 = data.frame(substanceBXH = probes,</span><br><span class="line">                      geneSymbol = annot$gene_symbol[probes2annot],</span><br><span class="line">                      LocusLinkID = annot$LocusLinkID[probes2annot],</span><br><span class="line">                      moduleColor = moduleColors,</span><br><span class="line">                      geneTraitSignificance,</span><br><span class="line">                      GSPvalue)</span><br><span class="line"><span class="comment"># Order modules by their significance for weight</span></span><br><span class="line">modOrder = order(-abs(cor(MEs, weight, use = <span class="string">"p"</span>)));</span><br><span class="line"><span class="comment"># Add module membership information in the chosen order</span></span><br><span class="line"><span class="keyword">for</span> (mod <span class="keyword">in</span> <span class="number">1</span>:ncol(geneModuleMembership))</span><br><span class="line">&#123;</span><br><span class="line">  oldNames = names(geneInfo0)</span><br><span class="line">  geneInfo0 = data.frame(geneInfo0, geneModuleMembership[, modOrder[mod]],</span><br><span class="line">                         MMPvalue[, modOrder[mod]]);</span><br><span class="line">  names(geneInfo0) = c(oldNames, paste(<span class="string">"MM."</span>, modNames[modOrder[mod]], sep=<span class="string">""</span>),</span><br><span class="line">                       paste(<span class="string">"p.MM."</span>, modNames[modOrder[mod]], sep=<span class="string">""</span>))</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># Order the genes in the geneInfo variable first by module color, then by geneTraitSignificance</span></span><br><span class="line">geneOrder = order(geneInfo0$moduleColor, -abs(geneInfo0$GS.weight));</span><br><span class="line">geneInfo = geneInfo0[geneOrder, ]</span><br></pre></td></tr></table></figure></div><h1 id="4-GO-Enrichment-of-Modules"><a href="#4-GO-Enrichment-of-Modules" class="headerlink" title="4. GO Enrichment of Modules"></a>4. GO Enrichment of Modules</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Read in the probe annotation</span></span><br><span class="line">annot = read.csv(file = <span class="string">"GeneAnnotation.csv"</span>);</span><br><span class="line"><span class="comment"># Match probes in the data set to the probe IDs in the annotation file</span></span><br><span class="line">probes = names(datExpr)</span><br><span class="line">probes2annot = match(probes, annot$substanceBXH)</span><br><span class="line"><span class="comment"># Get the corresponding Locuis Link IDs</span></span><br><span class="line">allLLIDs = annot$LocusLinkID[probes2annot];</span><br><span class="line"><span class="comment"># $ Choose interesting modules</span></span><br><span class="line">intModules = c(<span class="string">"brown"</span>, <span class="string">"red"</span>, <span class="string">"salmon"</span>)</span><br><span class="line"><span class="keyword">for</span> (module <span class="keyword">in</span> intModules)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># Select module probes</span></span><br><span class="line">  modGenes = (moduleColors==module)</span><br><span class="line">  <span class="comment"># Get their entrez ID codes</span></span><br><span class="line">  modLLIDs = allLLIDs[modGenes];</span><br><span class="line">  <span class="comment"># Write them into a file</span></span><br><span class="line">  fileName = paste(<span class="string">"LocusLinkIDs-"</span>, module, <span class="string">".txt"</span>, sep=<span class="string">""</span>);</span><br><span class="line">  write.table(as.data.frame(modLLIDs), file = fileName,</span><br><span class="line">              row.names = <span class="literal">FALSE</span>, col.names = <span class="literal">FALSE</span>)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># As background in the enrichment analysis, we will use all probes in the analysis.</span></span><br><span class="line">fileName = paste(<span class="string">"LocusLinkIDs-all.txt"</span>, sep=<span class="string">""</span>);</span><br><span class="line">write.table(as.data.frame(allLLIDs), file = fileName,</span><br><span class="line">            row.names = <span class="literal">FALSE</span>, col.names = <span class="literal">FALSE</span>)</span><br><span class="line"></span><br><span class="line">GOenr = GOenrichmentAnalysis(moduleColors, allLLIDs, organism = <span class="string">"mouse"</span>, nBestP = <span class="number">10</span>);</span><br><span class="line"></span><br><span class="line">tab = GOenr$bestPTerms[[<span class="number">4</span>]]$enrichment</span><br><span class="line"></span><br><span class="line">write.table(tab, file = <span class="string">"GOEnrichmentTable.csv"</span>, sep = <span class="string">","</span>, quote = <span class="literal">TRUE</span>, row.names = <span class="literal">FALSE</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">keepCols = c(<span class="number">1</span>, <span class="number">2</span>, <span class="number">5</span>, <span class="number">6</span>, <span class="number">7</span>, <span class="number">12</span>, <span class="number">13</span>);</span><br><span class="line">screenTab = tab[, keepCols];</span><br><span class="line"><span class="comment"># Round the numeric columns to 2 decimal places:</span></span><br><span class="line">numCols = c(<span class="number">3</span>, <span class="number">4</span>);</span><br><span class="line">screenTab[, numCols] = signif(apply(screenTab[, numCols], <span class="number">2</span>, as.numeric), <span class="number">2</span>)</span><br><span class="line"><span class="comment"># Truncate the the term name to at most 40 characters</span></span><br><span class="line">screenTab[, <span class="number">7</span>] = substring(screenTab[, <span class="number">7</span>], <span class="number">1</span>, <span class="number">40</span>)</span><br><span class="line"><span class="comment"># Shorten the column names:</span></span><br><span class="line">colnames(screenTab) = c(<span class="string">"module"</span>, <span class="string">"size"</span>, <span class="string">"p-val"</span>, <span class="string">"Bonf"</span>, <span class="string">"nInTerm"</span>, <span class="string">"ont"</span>, <span class="string">"term name"</span>);</span><br><span class="line">rownames(screenTab) = <span class="literal">NULL</span>;</span><br><span class="line"><span class="comment"># Set the width of R's output. The reader should play with this number to obtain satisfactory output.</span></span><br><span class="line">options(width=<span class="number">95</span>)</span><br><span class="line"><span class="comment"># Finally, display the enrichment table:</span></span><br><span class="line">screenTab</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">module  size  p-val Bonf  nInTerm ont term name</span><br><span class="line">1 black  166 3.9e-04 1.0e+00  4   BP  dopamine transport</span><br><span class="line">2 black  166 6.5e-04 1.0e+00  5   BP  mRNA transport</span><br><span class="line">3 black  166 8.0e-04 1.0e+00  6   BP  RNA transport</span><br><span class="line">4 black  166 8.0e-04 1.0e+00  13  MF  receptor ligand activity</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><h1 id="5-Visualization"><a href="#5-Visualization" class="headerlink" title="5. Visualization"></a>5. Visualization</h1><h2 id="5-1-NetWork-Visualization"><a href="#5-1-NetWork-Visualization" class="headerlink" title="5.1 NetWork Visualization"></a>5.1 NetWork Visualization</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">nGenes = ncol(datExpr)</span><br><span class="line">nSamples = nrow(datExpr)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Calculate topological overlap anew: this could be done more efficiently by saving the TOM</span></span><br><span class="line"><span class="comment"># calculated during module detection, but let us do it again here.</span></span><br><span class="line">dissTOM = <span class="number">1</span>-TOMsimilarityFromExpr(datExpr, power = <span class="number">6</span>);</span><br><span class="line"><span class="comment"># Transform dissTOM with a power to make moderately strong connections more visible in the heatmap</span></span><br><span class="line">plotTOM = dissTOM^<span class="number">7</span>;</span><br><span class="line"><span class="comment"># Set diagonal to NA for a nicer plot</span></span><br><span class="line">diag(plotTOM) = <span class="literal">NA</span>;</span><br><span class="line"><span class="comment"># Call the plot function</span></span><br><span class="line">sizeGrWindow(<span class="number">9</span>,<span class="number">9</span>)</span><br><span class="line">TOMplot(plotTOM, geneTree, moduleColors, main = <span class="string">"Network heatmap plot, all genes"</span>)</span><br><span class="line"></span><br><span class="line">nSelect = <span class="number">400</span></span><br><span class="line"><span class="comment"># For reproducibility, we set the random seed</span></span><br><span class="line">set.seed(<span class="number">10</span>);</span><br><span class="line">select = sample(nGenes, size = nSelect);</span><br><span class="line">selectTOM = dissTOM[select, select];</span><br><span class="line"><span class="comment"># There's no simple way of restricting a clustering tree to a subset of genes, so we must re-cluster.</span></span><br><span class="line">selectTree = hclust(as.dist(selectTOM), method = <span class="string">"average"</span>)</span><br><span class="line">selectColors = moduleColors[select];</span><br><span class="line"><span class="comment"># Open a graphical window</span></span><br><span class="line">sizeGrWindow(<span class="number">9</span>,<span class="number">9</span>)</span><br><span class="line"><span class="comment"># Taking the dissimilarity to a power, say 10, makes the plot more informative by effectively changing</span></span><br><span class="line"><span class="comment"># the color palette; setting the diagonal to NA also improves the clarity of the plot</span></span><br><span class="line"><span class="comment">#png('123.png')</span></span><br><span class="line">plotDiss = selectTOM^<span class="number">7</span>;</span><br><span class="line">diag(plotDiss) = <span class="literal">NA</span>;</span><br><span class="line">TOMplot(plotDiss, selectTree, selectColors, main = <span class="string">"Network heatmap plot, selected genes"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/wrpXGJj4qQOulim.png" alt="123"></p><h2 id="5-2-Visualizing-the-network-of-eigengenes"><a href="#5-2-Visualizing-the-network-of-eigengenes" class="headerlink" title="5.2  Visualizing the network of eigengenes"></a>5.2  Visualizing the network of eigengenes</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Recalculate module eigengenes</span></span><br><span class="line">MEs = moduleEigengenes(datExpr, moduleColors)$eigengenes</span><br><span class="line"><span class="comment"># Isolate weight from the clinical traits</span></span><br><span class="line">weight = as.data.frame(datTraits$weight_g);</span><br><span class="line">names(weight) = <span class="string">"weight"</span></span><br><span class="line"><span class="comment"># Add the weight to existing module eigengenes</span></span><br><span class="line">MET = orderMEs(cbind(MEs, weight))</span><br><span class="line"><span class="comment"># Plot the relationships among the eigengenes and the trait</span></span><br><span class="line">sizeGrWindow(<span class="number">5</span>,<span class="number">7.5</span>);</span><br><span class="line"><span class="comment">#png('123.png',width=400,height=600)</span></span><br><span class="line">par(cex = <span class="number">0.9</span>)</span><br><span class="line">plotEigengeneNetworks(MET, <span class="string">""</span>, marDendro = c(<span class="number">0</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>), marHeatmap = c(<span class="number">3</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">2</span>), cex.lab = <span class="number">0.8</span>, xLabelsAngle</span><br><span class="line">= <span class="number">90</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Plot the dendrogram</span></span><br><span class="line"><span class="comment">#sizeGrWindow(6,6);</span></span><br><span class="line"><span class="comment">#par(cex = 1.0)</span></span><br><span class="line"><span class="comment">#plotEigengeneNetworks(MET, "Eigengene dendrogram", marDendro = c(0,4,2,0),</span></span><br><span class="line"><span class="comment">#                      plotHeatmaps = FALSE)</span></span><br><span class="line"><span class="comment"># Plot the heatmap matrix (note: this plot will overwrite the dendrogram plot)</span></span><br><span class="line"><span class="comment">#par(cex = 1.0)</span></span><br><span class="line"><span class="comment">#plotEigengeneNetworks(MET, "Eigengene adjacency heatmap", marHeatmap = c(3,4,2,2),</span></span><br><span class="line"><span class="comment">#                      plotDendrograms = FALSE, xLabelsAngle = 90)</span></span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/08/KcFi5AvfCBhYDJd.png" alt="123"></p><h1 id="6-Export-of-networks"><a href="#6-Export-of-networks" class="headerlink" title="6. Export of networks"></a>6. Export of networks</h1><h2 id="6-1-Exporting-to-VisANT"><a href="#6-1-Exporting-to-VisANT" class="headerlink" title="6.1  Exporting to VisANT"></a>6.1  Exporting to VisANT</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Recalculate topological overlap</span></span><br><span class="line">TOM = TOMsimilarityFromExpr(datExpr, power = <span class="number">6</span>);</span><br><span class="line"><span class="comment"># Read in the annotation file</span></span><br><span class="line">annot = read.csv(file = <span class="string">"GeneAnnotation.csv"</span>);</span><br><span class="line"><span class="comment"># Select module</span></span><br><span class="line">module = <span class="string">"brown"</span>;</span><br><span class="line"><span class="comment"># Select module probes</span></span><br><span class="line">probes = names(datExpr)</span><br><span class="line">inModule = (moduleColors==module);</span><br><span class="line">modProbes = probes[inModule];</span><br><span class="line"><span class="comment"># Select the corresponding Topological Overlap</span></span><br><span class="line">modTOM = TOM[inModule, inModule];</span><br><span class="line">dimnames(modTOM) = list(modProbes, modProbes)</span><br><span class="line"><span class="comment"># Export the network into an edge list file VisANT can read</span></span><br><span class="line">vis = exportNetworkToVisANT(modTOM,</span><br><span class="line">  file = paste(<span class="string">"VisANTInput-"</span>, module, <span class="string">".txt"</span>, sep=<span class="string">""</span>),</span><br><span class="line">  weighted = <span class="literal">TRUE</span>,</span><br><span class="line">  threshold = <span class="number">0</span>,</span><br><span class="line">  probeToGene = data.frame(annot$substanceBXH, annot$gene_symbol) )</span><br><span class="line"></span><br><span class="line">nTop = <span class="number">30</span>;</span><br><span class="line">IMConn = softConnectivity(datExpr[, modProbes]);</span><br><span class="line">top = (rank(-IMConn) &lt;= nTop)</span><br><span class="line">vis = exportNetworkToVisANT(modTOM[top, top],</span><br><span class="line">  file = paste(<span class="string">"VisANTInput-"</span>, module, <span class="string">"-top30.txt"</span>, sep=<span class="string">""</span>),</span><br><span class="line">  weighted = <span class="literal">TRUE</span>,</span><br><span class="line">  threshold = <span class="number">0</span>,</span><br><span class="line">  probeToGene = data.frame(annot$substanceBXH, annot$gene_symbol) )</span><br></pre></td></tr></table></figure></div><h2 id="6-2-Exporting-to-Cytoscape"><a href="#6-2-Exporting-to-Cytoscape" class="headerlink" title="6.2 Exporting to Cytoscape"></a>6.2 Exporting to Cytoscape</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Recalculate topological overlap if needed</span></span><br><span class="line">TOM = TOMsimilarityFromExpr(datExpr, power = <span class="number">6</span>);</span><br><span class="line"><span class="comment"># Read in the annotation file</span></span><br><span class="line">annot = read.csv(file = <span class="string">"GeneAnnotation.csv"</span>);</span><br><span class="line"><span class="comment"># Select modules</span></span><br><span class="line">modules = c(<span class="string">"brown"</span>, <span class="string">"red"</span>);</span><br><span class="line"><span class="comment"># Select module probes</span></span><br><span class="line">probes = names(datExpr)</span><br><span class="line">inModule = is.finite(match(moduleColors, modules));</span><br><span class="line">modProbes = probes[inModule];</span><br><span class="line">modGenes = annot$gene_symbol[match(modProbes, annot$substanceBXH)];</span><br><span class="line"><span class="comment"># Select the corresponding Topological Overlap</span></span><br><span class="line">modTOM = TOM[inModule, inModule];</span><br><span class="line">dimnames(modTOM) = list(modProbes, modProbes)</span><br><span class="line"><span class="comment"># Export the network into edge and node list files Cytoscape can read</span></span><br><span class="line">cyt = exportNetworkToCytoscape(modTOM,</span><br><span class="line">  edgeFile = paste(<span class="string">"CytoscapeInput-edges-"</span>, paste(modules, collapse=<span class="string">"-"</span>), <span class="string">".txt"</span>, sep=<span class="string">""</span>),</span><br><span class="line">  nodeFile = paste(<span class="string">"CytoscapeInput-nodes-"</span>, paste(modules, collapse=<span class="string">"-"</span>), <span class="string">".txt"</span>, sep=<span class="string">""</span>),</span><br><span class="line">  weighted = <span class="literal">TRUE</span>,</span><br><span class="line">  threshold = <span class="number">0.02</span>,</span><br><span class="line">  nodeNames = modProbes,</span><br><span class="line">  altNodeNames = modGenes,</span><br><span class="line">  nodeAttr = moduleColors[inModule]);</span><br></pre></td></tr></table></figure></div><h2 id="6-3-Network3d"><a href="#6-3-Network3d" class="headerlink" title="6.3 Network3d"></a>6.3 Network3d</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">edges &lt;- read.table(<span class="string">"CytoscapeInput-edges-brown-red.txt"</span>,header=<span class="literal">T</span>)</span><br><span class="line">nodes &lt;- read.table(<span class="string">"CytoscapeInput-nodes-brown-red.txt"</span>,header=<span class="literal">T</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line"></span><br><span class="line">colnames(nodes)= c(<span class="string">"nodeName"</span>, <span class="string">"altName"</span>, <span class="string">"Group"</span>)</span><br><span class="line"></span><br><span class="line">edges$fromNode = match(edges$fromNode,nodes$nodeName)</span><br><span class="line">edges$toNode = match(edges$toNode,nodes$nodeName)</span><br><span class="line"></span><br><span class="line">Index &lt;- read.table(text = paste(unique(edges$fromNode),<span class="number">0</span>,<span class="number">0</span>,<span class="string">"undirected"</span>,<span class="string">"A"</span>,<span class="string">"B"</span>,sep=<span class="string">'\t'</span>),sep=<span class="string">'\t'</span>)</span><br><span class="line"></span><br><span class="line">colnames(Index) = colnames(edges)</span><br><span class="line">edges  = rbind(Index,edges)</span><br><span class="line"></span><br><span class="line">forceNetwork(Links=edges,</span><br><span class="line">        Nodes=nodes,</span><br><span class="line">        NodeID=<span class="string">"nodeName"</span>, <span class="comment">#指定节点显示的标签</span></span><br><span class="line">        Source=<span class="string">"fromNode"</span>, <span class="comment">#指定Links文件中的源节点</span></span><br><span class="line">        Target=<span class="string">"toNode"</span>, <span class="comment">#指定Links文件中的靶节点</span></span><br><span class="line">        Value=<span class="string">"weight"</span>, <span class="comment">#设定基因间连线的宽度</span></span><br><span class="line">        fontSize=<span class="number">20</span>, <span class="comment">#设定节点标签的字号，单位为像素</span></span><br><span class="line">        Group=<span class="string">"Group"</span>, <span class="comment">#对节点进行分组，这里可根据基因的功能进行分组，配置不同颜色</span></span><br><span class="line">        opacity=<span class="number">0.8</span>, <span class="comment">#指定图像的不透明度</span></span><br><span class="line">        zoom=<span class="literal">TRUE</span>, <span class="comment">#是否允许图像缩放</span></span><br><span class="line">        arrows=<span class="literal">TRUE</span>, <span class="comment">#连线是否添加箭头，显示方向</span></span><br><span class="line">        opacityNoHover=<span class="number">0.7</span>, <span class="comment">#鼠标悬停前，节点标签的不透明度</span></span><br><span class="line">        legend=<span class="literal">TRUE</span>, <span class="comment">#是否显示图例</span></span><br><span class="line">        height=<span class="number">600</span>, <span class="comment">#设置图像高度</span></span><br><span class="line">        width=<span class="number">600</span> <span class="comment">#设置图像宽度</span></span><br><span class="line">        <span class="comment">#Nodesize = "Freq_l"</span></span><br><span class="line">        <span class="comment">#radiusCalculation = "d.nodesize"</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>WGCNA Tutorial 2</title>
      <link href="/R/WGCNA_2.html"/>
      <url>/R/WGCNA_2.html</url>
      
        <content type="html"><![CDATA[<h1 id="WGCNA-Tutorial-2"><a href="#WGCNA-Tutorial-2" class="headerlink" title="WGCNA Tutorial 2"></a>WGCNA Tutorial 2</h1><p><a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/" target="_blank" rel="noopener">Official Website</a><br>Paper: <a href="https://bmcbioinformatics.biomedcentral.com/articles/10.1186/1471-2105-9-559" target="_blank" rel="noopener">Peter Langfelder, 2008</a></p><p>Weighted correlation network analysis (WGCNA) can be used for finding clusters (modules) of highly correlated genes, for summarizing such clusters using the module eigengene or an intramodular hub gene, for relating modules to one another and to external sample traits (using eigengene network methodology), and for calculating module membership measures.</p><p><a href="https://www.youtube.com/playlist?list=PLAv3hOAKTXH1zpvHiXUbxTmzUi-ZL0AR5" target="_blank" rel="noopener">Play list</a> for Network Analysis</p><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Mirrors</span></span><br><span class="line"><span class="comment"># options("repos" = c(CRAN="https://mirrors.tuna.tsinghua.edu.cn/CRAN/"))</span></span><br><span class="line"><span class="comment"># options(BioC_mirror="https://mirrors.tuna.tsinghua.edu.cn/bioconductor")</span></span><br><span class="line">install.packages(<span class="string">"BiocManager"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"WGCNA"</span>)</span><br></pre></td></tr></table></figure></div><p>Data:</p><ul><li><a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/FemaleLiver-Data.zip" target="_blank" rel="noopener">Female data</a></li><li><a href="https://horvath.genetics.ucla.edu/html/CoexpressionNetwork/Rpackages/WGCNA/Tutorials/MaleLiver-Data.zip" target="_blank" rel="noopener">Male data</a></li></ul><h1 id="1-Data-Preparation"><a href="#1-Data-Preparation" class="headerlink" title="1. Data Preparation"></a>1. Data Preparation</h1><h2 id="1-1-Loading-DataSet"><a href="#1-1-Loading-DataSet" class="headerlink" title="1.1 Loading DataSet"></a>1.1 Loading DataSet</h2><p>The data sets contain roughly 130 samples each. Note that each row corresponds to a gene and column to a<br>sample or auxiliary information.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(WGCNA)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Reading Data</span></span><br><span class="line">options(stringsAsFactors = <span class="literal">FALSE</span>)</span><br><span class="line"><span class="comment">#Read in the female liver data set</span></span><br><span class="line">femData = read.csv(<span class="string">"LiverFemale3600.csv"</span>)</span><br><span class="line"><span class="comment"># Read in the male liver data set</span></span><br><span class="line">maleData = read.csv(<span class="string">"LiverMale3600.csv"</span>)</span><br></pre></td></tr></table></figure></div><h2 id="1-2-Groups-in-List"><a href="#1-2-Groups-in-List" class="headerlink" title="1.2 Groups in List"></a>1.2 Groups in List</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># We work with two sets:</span></span><br><span class="line">nSets = <span class="number">2</span>;</span><br><span class="line"><span class="comment"># For easier labeling of plots, create a vector holding descriptive names of the two sets.</span></span><br><span class="line">setLabels = c(<span class="string">"Female liver"</span>, <span class="string">"Male liver"</span>)</span><br><span class="line">shortLabels = c(<span class="string">"Female"</span>, <span class="string">"Male"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Form multi-set expression data: columns starting from 9 contain actual expression data.</span></span><br><span class="line">multiExpr = vector(mode = <span class="string">"list"</span>, length = nSets)</span><br><span class="line"></span><br><span class="line">multiExpr[[<span class="number">1</span>]] = list(data = as.data.frame(t(femData[-c(<span class="number">1</span>:<span class="number">8</span>)])));</span><br><span class="line">names(multiExpr[[<span class="number">1</span>]]$data) = femData$substanceBXH;</span><br><span class="line">rownames(multiExpr[[<span class="number">1</span>]]$data) = names(femData)[-c(<span class="number">1</span>:<span class="number">8</span>)];</span><br><span class="line">multiExpr[[<span class="number">2</span>]] = list(data = as.data.frame(t(maleData[-c(<span class="number">1</span>:<span class="number">8</span>)])));</span><br><span class="line">names(multiExpr[[<span class="number">2</span>]]$data) = maleData$substanceBXH;</span><br><span class="line">rownames(multiExpr[[<span class="number">2</span>]]$data) = names(maleData)[-c(<span class="number">1</span>:<span class="number">8</span>)];</span><br><span class="line"><span class="comment"># Check that the data has the correct format for many functions operating on multiple sets:</span></span><br><span class="line">exprSize = checkSets(multiExpr)</span><br></pre></td></tr></table></figure></div><h2 id="1-3-Rudimentary-data-cleaning-and-outlier-removal"><a href="#1-3-Rudimentary-data-cleaning-and-outlier-removal" class="headerlink" title="1.3 Rudimentary data cleaning and outlier removal"></a>1.3 Rudimentary data cleaning and outlier removal</h2><p>Check that all genes and samples have sufficiently low numbers of missing values.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">gsg = goodSamplesGenesMS(multiExpr, verbose = <span class="number">3</span>);</span><br><span class="line">gsg$allOK</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (!gsg$allOK)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># Print information about the removed genes:</span></span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodGenes) &gt; <span class="number">0</span>)</span><br><span class="line">    printFlush(paste(<span class="string">"Removing genes:"</span>, paste(names(multiExpr[[<span class="number">1</span>]]$data)[!gsg$goodGenes],</span><br><span class="line">                                              collapse = <span class="string">", "</span>)))</span><br><span class="line">  <span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:exprSize$nSets)</span><br><span class="line">  &#123;</span><br><span class="line">    <span class="keyword">if</span> (sum(!gsg$goodSamples[[set]]))</span><br><span class="line">      printFlush(paste(<span class="string">"In set"</span>, setLabels[set], <span class="string">"removing samples"</span>,</span><br><span class="line">                       paste(rownames(multiExpr[[set]]$data)[!gsg$goodSamples[[set]]], collapse = <span class="string">", "</span>)))</span><br><span class="line">    <span class="comment"># Remove the offending genes and samples</span></span><br><span class="line">    multiExpr[[set]]$data = multiExpr[[set]]$data[gsg$goodSamples[[set]], gsg$goodGenes];</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment"># Update exprSize</span></span><br><span class="line">  exprSize = checkSets(multiExpr)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="1-4-Cluster"><a href="#1-4-Cluster" class="headerlink" title="1.4 Cluster"></a>1.4 Cluster</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sampleTrees = list()</span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  sampleTrees[[set]] = hclust(dist(multiExpr[[set]]$data), method = <span class="string">"average"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">par(mfrow=c(<span class="number">2</span>,<span class="number">1</span>))</span><br><span class="line">par(mar = c(<span class="number">0</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>))</span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">  plot(sampleTrees[[set]], main = paste(<span class="string">"Sample clustering on all genes in"</span>, setLabels[set]),</span><br><span class="line">       xlab=<span class="string">""</span>, sub=<span class="string">""</span>, cex = <span class="number">0.7</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/t2ocjA" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/07/t2ocjA.png" alt="t2ocjA.png"></a></p><p>By inspection, there seems to be <span style="background:salmon"><strong>one outlier</strong></span> in the female data set, and no obvious outliers in the male set. We<br>now <span style="background:salmon"><strong>remove the female outlier</strong></span> using a semi-automatic code that only requires a choice of a height cut</p><h2 id="1-5-Remove-Outlier"><a href="#1-5-Remove-Outlier" class="headerlink" title="1.5 Remove Outlier"></a>1.5 Remove Outlier</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Choose the "base" cut height for the female data set</span></span><br><span class="line">baseHeight = <span class="number">16</span></span><br><span class="line"><span class="comment"># Adjust the cut height for the male data set for the number of samples</span></span><br><span class="line">cutHeights = c(<span class="number">16</span>, <span class="number">16</span>*exprSize$nSamples[<span class="number">2</span>]/exprSize$nSamples[<span class="number">1</span>]);</span><br><span class="line"><span class="comment"># Re-plot the dendrograms including the cut lines</span></span><br><span class="line">png(file = <span class="string">"SampleClustering.png"</span>);</span><br><span class="line">par(mfrow=c(<span class="number">2</span>,<span class="number">1</span>))</span><br><span class="line">par(mar = c(<span class="number">0</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">0</span>))</span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  plot(sampleTrees[[set]], main = paste(<span class="string">"Sample clustering on all genes in"</span>, setLabels[set]),</span><br><span class="line">       xlab=<span class="string">""</span>, sub=<span class="string">""</span>, cex = <span class="number">0.7</span>);</span><br><span class="line">  abline(h=cutHeights[set], col = <span class="string">"red"</span>);</span><br><span class="line">&#125;</span><br><span class="line">dev.off();</span><br><span class="line"></span><br><span class="line"><span class="comment"># Removing outlier</span></span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="comment"># Find clusters cut by the line</span></span><br><span class="line">  labels = cutreeStatic(sampleTrees[[set]], cutHeight = cutHeights[set])</span><br><span class="line">  <span class="comment"># Keep the largest one (labeled by the number 1)</span></span><br><span class="line">  keep = (labels==<span class="number">1</span>)</span><br><span class="line">  multiExpr[[set]]$data = multiExpr[[set]]$data[keep, ]</span><br><span class="line">&#125;</span><br><span class="line">collectGarbage();</span><br><span class="line"><span class="comment"># Check the size of the leftover data</span></span><br><span class="line">exprSize = checkSets(multiExpr)</span><br><span class="line">exprSize</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/07/RSMCdKeDpl9YqQj.png" alt="SampleClustering"></p><h2 id="1-6-Loading-Clinical-Trait-Data"><a href="#1-6-Loading-Clinical-Trait-Data" class="headerlink" title="1.6 Loading Clinical Trait Data"></a>1.6 Loading Clinical Trait Data</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">traitData = read.csv(<span class="string">"ClinicalTraits.csv"</span>);</span><br><span class="line"><span class="comment"># remove columns that hold information we do not need.</span></span><br><span class="line">allTraits = traitData[, -c(<span class="number">31</span>, <span class="number">16</span>)];</span><br><span class="line">allTraits = allTraits[, c(<span class="number">2</span>, <span class="number">11</span>:<span class="number">36</span>) ];</span><br><span class="line"><span class="comment"># See how big the traits are and what are the trait and sample names</span></span><br><span class="line">dim(allTraits)</span><br><span class="line">names(allTraits)</span><br><span class="line">allTraits$Mice</span><br><span class="line"><span class="comment"># Form a multi-set structure that will hold the clinical traits.</span></span><br><span class="line">Traits = vector(mode=<span class="string">"list"</span>, length = nSets);</span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  setSamples = rownames(multiExpr[[set]]$data);</span><br><span class="line">  traitRows = match(setSamples, allTraits$Mice);</span><br><span class="line">  Traits[[set]] = list(data = allTraits[traitRows, -<span class="number">1</span>]);</span><br><span class="line">  rownames(Traits[[set]]$data) = allTraits[traitRows, <span class="number">1</span>];</span><br><span class="line">&#125;</span><br><span class="line">collectGarbage();</span><br><span class="line"><span class="comment"># Define data set dimensions</span></span><br><span class="line">nGenes = exprSize$nGenes;</span><br><span class="line">nSamples = exprSize$nSamples;</span><br></pre></td></tr></table></figure></div><h1 id="2-Network-Construction-and-Module-Detection"><a href="#2-Network-Construction-and-Module-Detection" class="headerlink" title="2. Network Construction and Module Detection"></a>2. Network Construction and Module Detection</h1><pre class="mermaid">graph LR;   START(Network construction)   Net1(one-step network construction)   Net2(Step-by-step network construction)   Net3(automatic block-wise network construction)   START-->|Minimum Effort|Net1;   START-->|Customized/Alternate Methods|Net2;   START-->|Large Data Set|Net3;</pre><h2 id="2-1-One-Step-Network-Construction-and-Module-Detection"><a href="#2-1-One-Step-Network-Construction-and-Module-Detection" class="headerlink" title="2.1 One-Step Network Construction and Module Detection"></a>2.1 One-Step Network Construction and Module Detection</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Choose a set of soft-thresholding powers</span></span><br><span class="line">powers = c(seq(<span class="number">4</span>,<span class="number">10</span>,by=<span class="number">1</span>), seq(<span class="number">12</span>,<span class="number">20</span>, by=<span class="number">2</span>));</span><br><span class="line"><span class="comment"># Initialize a list to hold the results of scale-free analysis</span></span><br><span class="line">powerTables = vector(mode = <span class="string">"list"</span>, length = nSets);</span><br><span class="line"><span class="comment"># Call the network topology analysis function for each set in turn</span></span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">  powerTables[[set]] = list(data = pickSoftThreshold(multiExpr[[set]]$data, powerVector=powers,</span><br><span class="line">                                                     verbose = <span class="number">2</span>)[[<span class="number">2</span>]]);</span><br><span class="line">collectGarbage();</span><br><span class="line"><span class="comment"># Plot the results:</span></span><br><span class="line">colors = c(<span class="string">"black"</span>, <span class="string">"red"</span>)</span><br><span class="line"><span class="comment"># Will plot these columns of the returned scale free analysis tables</span></span><br><span class="line">plotCols = c(<span class="number">2</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>)</span><br><span class="line">colNames = c(<span class="string">"Scale Free Topology Model Fit"</span>, <span class="string">"Mean connectivity"</span>, <span class="string">"Median connectivity"</span>,</span><br><span class="line"><span class="string">"Max connectivity"</span>);</span><br><span class="line"><span class="comment"># Get the minima and maxima of the plotted points</span></span><br><span class="line">ylim = matrix(<span class="literal">NA</span>, nrow = <span class="number">2</span>, ncol = <span class="number">4</span>);</span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">for</span> (col <span class="keyword">in</span> <span class="number">1</span>:length(plotCols))</span><br><span class="line">  &#123;</span><br><span class="line">    ylim[<span class="number">1</span>, col] = min(ylim[<span class="number">1</span>, col], powerTables[[set]]$data[, plotCols[col]], na.rm = <span class="literal">TRUE</span>);</span><br><span class="line">    ylim[<span class="number">2</span>, col] = max(ylim[<span class="number">2</span>, col], powerTables[[set]]$data[, plotCols[col]], na.rm = <span class="literal">TRUE</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># Plot the quantities in the chosen columns vs. the soft thresholding power</span></span><br><span class="line">sizeGrWindow(<span class="number">8</span>, <span class="number">6</span>)</span><br><span class="line">png(file = <span class="string">"scaleFreeAnalysis.png"</span>)</span><br><span class="line">par(mfcol = c(<span class="number">2</span>,<span class="number">2</span>));</span><br><span class="line">par(mar = c(<span class="number">4.2</span>, <span class="number">4.2</span> , <span class="number">2.2</span>, <span class="number">0.5</span>))</span><br><span class="line">cex1 = <span class="number">0.7</span>;</span><br><span class="line"><span class="keyword">for</span> (col <span class="keyword">in</span> <span class="number">1</span>:length(plotCols)) <span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (set==<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    plot(powerTables[[set]]$data[,<span class="number">1</span>], -sign(powerTables[[set]]$data[,<span class="number">3</span>])*powerTables[[set]]$data[,<span class="number">2</span>],</span><br><span class="line">         xlab=<span class="string">"Soft Threshold (power)"</span>,ylab=colNames[col],type=<span class="string">"n"</span>, ylim = ylim[, col],</span><br><span class="line">         main = colNames[col]);</span><br><span class="line">    addGrid();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">if</span> (col==<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    text(powerTables[[set]]$data[,<span class="number">1</span>], -sign(powerTables[[set]]$data[,<span class="number">3</span>])*powerTables[[set]]$data[,<span class="number">2</span>],</span><br><span class="line">         labels=powers,cex=cex1,col=colors[set]);</span><br><span class="line">  &#125; <span class="keyword">else</span></span><br><span class="line">    text(powerTables[[set]]$data[,<span class="number">1</span>], powerTables[[set]]$data[,plotCols[col]],</span><br><span class="line">         labels=powers,cex=cex1,col=colors[set]);</span><br><span class="line">  <span class="keyword">if</span> (col==<span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    legend(<span class="string">"bottomright"</span>, legend = setLabels, col = colors, pch = <span class="number">20</span>) ;</span><br><span class="line">  &#125; <span class="keyword">else</span></span><br><span class="line">    legend(<span class="string">"topright"</span>, legend = setLabels, col = colors, pch = <span class="number">20</span>) ;</span><br><span class="line">&#125;</span><br><span class="line">dev.off();</span><br></pre></td></tr></table></figure></div><p> <img src="https://i.loli.net/2020/06/07/MhcuA8aRYj9yCWg.png" alt="scaleFreeAnalysis"></p><h2 id="2-2-Network-construction-and-consensus-module-detection"><a href="#2-2-Network-construction-and-consensus-module-detection" class="headerlink" title="2.2  Network construction and consensus module detection"></a>2.2  Network construction and consensus module detection</h2><p><span style="background:salmon">Attention</span>: We have chosen the soft thresholding power <span style="background:salmon">6</span>, minimum module size <span style="background:salmon">30</span>, the module detection sensitivity deepSplit <span style="background:salmon">2</span>, cut height for merging of modules 0.20 (implying that modules whose eigengenes are correlated above 1 − 0.2 = 0.8 will be merged), we requested that the function return numeric module labels rather than color labels, we have effectively turned off reassigning genes based on their module eigengene-based connectivity KME, and we have instructed the code to save the calculated consensus topological overlap.</p><p>In this example most of them are left at their default value. We encourage the user to read the help file provided within the package in the R environment and experiment with tweaking the network construction and module detection parameters. The potential reward is, of course, better (biologically more relevant) results of the analysis.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">net = blockwiseConsensusModules(</span><br><span class="line">        multiExpr, power = <span class="number">6</span>, minModuleSize = <span class="number">30</span>, deepSplit = <span class="number">2</span>,</span><br><span class="line">        pamRespectsDendro = <span class="literal">FALSE</span>,</span><br><span class="line">        mergeCutHeight = <span class="number">0.25</span>, numericLabels = <span class="literal">TRUE</span>,</span><br><span class="line">        minKMEtoStay = <span class="number">0</span>,</span><br><span class="line">        saveTOMs = <span class="literal">TRUE</span>, verbose = <span class="number">5</span>)</span><br></pre></td></tr></table></figure></div><h2 id="2-3-Model-Extract"><a href="#2-3-Model-Extract" class="headerlink" title="2.3 Model Extract"></a>2.3 Model Extract</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">consMEs = net$multiMEs;</span><br><span class="line">moduleLabels = net$colors;</span><br><span class="line"><span class="comment"># Convert the numeric labels to color labels</span></span><br><span class="line">moduleColors = labels2colors(moduleLabels)</span><br><span class="line">consTree = net$dendrograms[[<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line">sizeGrWindow(<span class="number">8</span>,<span class="number">6</span>);</span><br><span class="line">png(file = <span class="string">"ConsensusDendrogram-auto.png"</span>, wi = <span class="number">600</span>, he = <span class="number">340</span>)</span><br><span class="line">plotDendroAndColors(consTree, moduleColors,</span><br><span class="line">                    <span class="string">"Module colors"</span>,</span><br><span class="line">                    dendroLabels = <span class="literal">FALSE</span>, hang = <span class="number">0.03</span>,</span><br><span class="line">                    addGuide = <span class="literal">TRUE</span>, guideHang = <span class="number">0.05</span>,</span><br><span class="line">                    main = <span class="string">"Consensus gene dendrogram and module colors"</span>)</span><br><span class="line"></span><br><span class="line">dev.off()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/07/4Mm8FXaLduRPiQ1.png" alt="ConsensusDendrogram-auto"></p><h1 id="3-Relating-the-consensus-modules-to-female-set-specific-modules"><a href="#3-Relating-the-consensus-modules-to-female-set-specific-modules" class="headerlink" title="3. Relating the consensus modules to female set-specific modules"></a>3. Relating the consensus modules to female set-specific modules</h1><h2 id="3-1-datExpr"><a href="#3-1-datExpr" class="headerlink" title="3.1 datExpr"></a>3.1 datExpr</h2><p>(WGCNA Tutorial 1, 1-2)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">femData = read.csv(<span class="string">"LiverFemale3600.csv"</span>);</span><br><span class="line">datExpr0 = as.data.frame(t(femData[, -c(<span class="number">1</span>:<span class="number">8</span>)]));</span><br><span class="line">names(datExpr0) = femData$substanceBXH;</span><br><span class="line">rownames(datExpr0) = names(femData)[-c(<span class="number">1</span>:<span class="number">8</span>)];</span><br><span class="line">gsg = goodSamplesGenes(datExpr0, verbose = <span class="number">3</span>);</span><br><span class="line">gsg$allOK</span><br><span class="line"><span class="keyword">if</span> (!gsg$allOK)</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodGenes)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing genes:"</span>, paste(names(datExpr0)[!gsg$goodGenes], collapse = <span class="string">", "</span>)));</span><br><span class="line">  <span class="keyword">if</span> (sum(!gsg$goodSamples)&gt;<span class="number">0</span>)</span><br><span class="line">     printFlush(paste(<span class="string">"Removing samples:"</span>, paste(rownames(datExpr0)[!gsg$goodSamples], collapse = <span class="string">", "</span>)));</span><br><span class="line">  datExpr0 = datExpr0[gsg$goodSamples, gsg$goodGenes]</span><br><span class="line">&#125;</span><br><span class="line">sampleTree = hclust(dist(datExpr0), method = <span class="string">"average"</span>);</span><br><span class="line">clust = cutreeStatic(sampleTree, cutHeight = <span class="number">15</span>, minSize = <span class="number">10</span>)</span><br><span class="line">keepSamples = (clust==<span class="number">1</span>)</span><br><span class="line">datExpr = datExpr0[keepSamples, ]</span><br><span class="line">nGenes = ncol(datExpr)</span><br><span class="line">nSamples = nrow(datExpr)</span><br><span class="line">traitData = read.csv(<span class="string">"ClinicalTraits.csv"</span>);</span><br><span class="line">dim(traitData)</span><br><span class="line">names(traitData)</span><br><span class="line">allTraits = traitData[, -c(<span class="number">31</span>, <span class="number">16</span>)];</span><br><span class="line">allTraits = allTraits[, c(<span class="number">2</span>, <span class="number">11</span>:<span class="number">36</span>) ];</span><br><span class="line">dim(allTraits)</span><br><span class="line">names(allTraits)</span><br><span class="line">femaleSamples = rownames(datExpr);</span><br><span class="line">traitRows = match(femaleSamples, allTraits$Mice);</span><br><span class="line">datTraits = allTraits[traitRows, -<span class="number">1</span>];</span><br><span class="line">rownames(datTraits) = allTraits[traitRows, <span class="number">1</span>];</span><br><span class="line">collectGarbage()</span><br><span class="line">sampleTree2 = hclust(dist(datExpr), method = <span class="string">"average"</span>)</span><br><span class="line">traitColors = numbers2colors(datTraits, signed = <span class="literal">FALSE</span>);</span><br><span class="line">powers = c(c(<span class="number">1</span>:<span class="number">10</span>), seq(from = <span class="number">12</span>, to=<span class="number">20</span>, by=<span class="number">2</span>))</span><br><span class="line">sft = pickSoftThreshold(datExpr, powerVector = powers, verbose = <span class="number">5</span>)</span><br><span class="line">net = blockwiseModules(datExpr, power = <span class="number">6</span>,</span><br><span class="line">                       TOMType = <span class="string">"unsigned"</span>, minModuleSize = <span class="number">30</span>,</span><br><span class="line">                       reassignThreshold = <span class="number">0</span>, mergeCutHeight = <span class="number">0.25</span>,</span><br><span class="line">                       numericLabels = <span class="literal">TRUE</span>, pamRespectsDendro = <span class="literal">FALSE</span>,</span><br><span class="line">                       saveTOMs = <span class="literal">TRUE</span>,</span><br><span class="line">                       saveTOMFileBase = <span class="string">"femaleMouseTOM"</span>,</span><br><span class="line">                       verbose = <span class="number">3</span>)</span><br><span class="line">moduleLabels = net$colors</span><br><span class="line">moduleColors = labels2colors(net$colors)</span><br><span class="line">MEs = net$MEs;</span><br><span class="line">geneTree = net$dendrograms[[<span class="number">1</span>]]</span><br></pre></td></tr></table></figure></div><h2 id="3-2-Relating-consensus-modules-to-female-set-specific-modules"><a href="#3-2-Relating-consensus-modules-to-female-set-specific-modules" class="headerlink" title="3.2 Relating consensus modules to female set-specific modules"></a>3.2 Relating consensus modules to female set-specific modules</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><span class="line">femaleLabels = moduleLabels;</span><br><span class="line">femaleColors = moduleColors;</span><br><span class="line">femaleTree = geneTree;</span><br><span class="line">femaleMEs = orderMEs(MEs, greyName = <span class="string">"ME0"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Isolate the module labels in the order they appear in ordered module eigengenes</span></span><br><span class="line">femModuleLabels = substring(names(femaleMEs), <span class="number">3</span>)</span><br><span class="line">consModuleLabels = substring(names(consMEs[[<span class="number">1</span>]]$data), <span class="number">3</span>)</span><br><span class="line"><span class="comment"># Convert the numeric module labels to color labels</span></span><br><span class="line">femModules = labels2colors(as.numeric(femModuleLabels))</span><br><span class="line">consModules = labels2colors(as.numeric(consModuleLabels))</span><br><span class="line"><span class="comment"># Numbers of female and consensus modules</span></span><br><span class="line">nFemMods = length(femModules)</span><br><span class="line">nConsMods = length(consModules)</span><br><span class="line"><span class="comment"># Initialize tables of p-values and of the corresponding counts</span></span><br><span class="line">pTable = matrix(<span class="number">0</span>, nrow = nFemMods, ncol = nConsMods);</span><br><span class="line">CountTbl = matrix(<span class="number">0</span>, nrow = nFemMods, ncol = nConsMods);</span><br><span class="line"><span class="comment"># Execute all pairwaise comparisons</span></span><br><span class="line"><span class="keyword">for</span> (fmod <span class="keyword">in</span> <span class="number">1</span>:nFemMods)</span><br><span class="line">  <span class="keyword">for</span> (cmod <span class="keyword">in</span> <span class="number">1</span>:nConsMods)</span><br><span class="line">  &#123;</span><br><span class="line">    femMembers = (femaleColors == femModules[fmod]);</span><br><span class="line">    consMembers = (moduleColors == consModules[cmod]);</span><br><span class="line">    pTable[fmod, cmod] = -log10(fisher.test(femMembers, consMembers, alternative = <span class="string">"greater"</span>)$p.value);</span><br><span class="line">    CountTbl[fmod, cmod] = sum(femaleColors == femModules[fmod] &amp; moduleColors ==</span><br><span class="line">                      consModules[cmod])</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Truncate p values smaller than 10^&#123;-50&#125; to 10^&#123;-50&#125;</span></span><br><span class="line">pTable[is.infinite(pTable)] = <span class="number">1.3</span>*max(pTable[is.finite(pTable)]);</span><br><span class="line">pTable[pTable&gt;<span class="number">50</span> ] = <span class="number">50</span> ;</span><br><span class="line"><span class="comment"># Marginal counts (really module sizes)</span></span><br><span class="line">femModTotals = apply(CountTbl, <span class="number">1</span>, sum)</span><br><span class="line">consModTotals = apply(CountTbl, <span class="number">2</span>, sum)</span><br><span class="line"><span class="comment"># Actual plotting</span></span><br><span class="line">sizeGrWindow(<span class="number">10</span>,<span class="number">7</span> );</span><br><span class="line"><span class="comment">#png(file = "ConsensusVsFemaleModules.png", wi = 500, he = 400);</span></span><br><span class="line">par(mfrow=c(<span class="number">1</span>,<span class="number">1</span>));</span><br><span class="line">par(cex = <span class="number">1.0</span>);</span><br><span class="line">par(mar=c(<span class="number">8</span>, <span class="number">10.4</span>, <span class="number">2.7</span>, <span class="number">1</span>)+<span class="number">0.3</span>);</span><br><span class="line"><span class="comment"># Use function labeledHeatmap to produce the color-coded table with all the trimmings</span></span><br><span class="line">labeledHeatmap(Matrix = pTable,</span><br><span class="line">               xLabels = paste(<span class="string">" "</span>, consModules),</span><br><span class="line">               yLabels = paste(<span class="string">" "</span>, femModules),</span><br><span class="line">               colorLabels = <span class="literal">TRUE</span>,</span><br><span class="line">               xSymbols = paste(<span class="string">"Cons "</span>, consModules, <span class="string">": "</span>, consModTotals, sep=<span class="string">""</span>),</span><br><span class="line">               ySymbols = paste(<span class="string">"Fem "</span>, femModules, <span class="string">": "</span>, femModTotals, sep=<span class="string">""</span>),</span><br><span class="line">               textMatrix = CountTbl,</span><br><span class="line">               colors = greenWhiteRed(<span class="number">100</span>)[<span class="number">50</span>:<span class="number">100</span>],</span><br><span class="line">               main = <span class="string">"Correspondence of Female set-specific and Female-Male consensus modules"</span>,</span><br><span class="line">               cex.text = <span class="number">1.0</span>, cex.lab = <span class="number">1.0</span>, setStdMargins = <span class="literal">FALSE</span>);</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/9Rw23KCBXcIOMNz.png" alt="ConsensusVsFemaleModules"></p><h1 id="4-Consensus-module-to-traits"><a href="#4-Consensus-module-to-traits" class="headerlink" title="4. Consensus module to traits"></a>4. Consensus module to traits</h1><h2 id="4-1-Correlation"><a href="#4-1-Correlation" class="headerlink" title="4.1 Correlation"></a>4.1 Correlation</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">moduleTraitCor = list();</span><br><span class="line">moduleTraitPvalue = list();</span><br><span class="line"><span class="comment"># Calculate the correlations</span></span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  moduleTraitCor[[set]] = cor(consMEs[[set]]$data, Traits[[set]]$data, use = <span class="string">"p"</span>);</span><br><span class="line">  moduleTraitPvalue[[set]] = corPvalueFisher(moduleTraitCor[[set]], exprSize$nSamples[set]);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Convert numerical lables to colors for labeling of modules in the plot</span></span><br><span class="line">MEColors = labels2colors(as.numeric(substring(names(consMEs[[<span class="number">1</span>]]$data), <span class="number">3</span>)));</span><br><span class="line">MEColorNames = paste(<span class="string">"ME"</span>, MEColors, sep=<span class="string">""</span>);</span><br><span class="line"><span class="comment"># Open a suitably sized window (the user should change the window size if necessary)</span></span><br><span class="line">sizeGrWindow(<span class="number">10</span>,<span class="number">7</span>)</span><br><span class="line"><span class="comment">#png(file = "ModuleTraitRelationships-female.png", wi = 800, he = 560);</span></span><br><span class="line"><span class="comment"># Plot the module-trait relationship table for set number 1</span></span><br><span class="line">set = <span class="number">1</span></span><br><span class="line">textMatrix =  paste(signif(moduleTraitCor[[set]], <span class="number">2</span>), <span class="string">"\n("</span>,</span><br><span class="line">                           signif(moduleTraitPvalue[[set]], <span class="number">1</span>), <span class="string">")"</span>, sep = <span class="string">""</span>);</span><br><span class="line">dim(textMatrix) = dim(moduleTraitCor[[set]])</span><br><span class="line">par(mar = c(<span class="number">6</span>, <span class="number">8.8</span>, <span class="number">3</span>, <span class="number">2.2</span>));</span><br><span class="line">labeledHeatmap(Matrix = moduleTraitCor[[set]],</span><br><span class="line">               xLabels = names(Traits[[set]]$data),</span><br><span class="line">               yLabels = MEColorNames,</span><br><span class="line">               ySymbols = MEColorNames,</span><br><span class="line">               colorLabels = <span class="literal">FALSE</span>,</span><br><span class="line">               colors = greenWhiteRed(<span class="number">50</span>),</span><br><span class="line">               textMatrix = textMatrix,</span><br><span class="line">               setStdMargins = <span class="literal">FALSE</span>,</span><br><span class="line">               cex.text = <span class="number">0.5</span>,</span><br><span class="line">               zlim = c(-<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">               main = paste(<span class="string">"Module--trait relationships in"</span>, setLabels[set]))</span><br><span class="line"><span class="comment">#dev.off();</span></span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/pMdjGFZnW8sbK9y.png" alt="ModuleTraitRelationships-female"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Plot the module-trait relationship table for set number 2</span></span><br><span class="line">set = <span class="number">2</span></span><br><span class="line">textMatrix =  paste(signif(moduleTraitCor[[set]], <span class="number">2</span>), <span class="string">"\n("</span>,</span><br><span class="line">                           signif(moduleTraitPvalue[[set]], <span class="number">1</span>), <span class="string">")"</span>, sep = <span class="string">""</span>);</span><br><span class="line">dim(textMatrix) = dim(moduleTraitCor[[set]])</span><br><span class="line">sizeGrWindow(<span class="number">10</span>,<span class="number">7</span>)</span><br><span class="line"><span class="comment">#png(file = "ModuleTraitRelationships-male.png", wi = 800, he = 560);</span></span><br><span class="line">par(mar = c(<span class="number">6</span>, <span class="number">8.8</span>, <span class="number">3</span>, <span class="number">2.2</span>));</span><br><span class="line">labeledHeatmap(Matrix = moduleTraitCor[[set]],</span><br><span class="line">               xLabels = names(Traits[[set]]$data),</span><br><span class="line">               yLabels = MEColorNames,</span><br><span class="line">               ySymbols = MEColorNames,</span><br><span class="line">               colorLabels = <span class="literal">FALSE</span>,</span><br><span class="line">               colors = greenWhiteRed(<span class="number">50</span>),</span><br><span class="line">               textMatrix = textMatrix,</span><br><span class="line">               setStdMargins = <span class="literal">FALSE</span>,</span><br><span class="line">               cex.text = <span class="number">0.5</span>,</span><br><span class="line">               zlim = c(-<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">               main = paste(<span class="string">"Module--trait relationships in"</span>, setLabels[set]))</span><br><span class="line">dev.off();</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/WgDs7yQpBbe4CIu.png" alt="ModuleTraitRelationships-male"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Initialize matrices to hold the consensus correlation and p-value</span></span><br><span class="line">consensusCor = matrix(<span class="literal">NA</span>, nrow(moduleTraitCor[[<span class="number">1</span>]]), ncol(moduleTraitCor[[<span class="number">1</span>]]));</span><br><span class="line">consensusPvalue = matrix(<span class="literal">NA</span>, nrow(moduleTraitCor[[<span class="number">1</span>]]), ncol(moduleTraitCor[[<span class="number">1</span>]]));</span><br><span class="line"><span class="comment"># Find consensus negative correlations</span></span><br><span class="line">negative = moduleTraitCor[[<span class="number">1</span>]] &lt; <span class="number">0</span> &amp; moduleTraitCor[[<span class="number">2</span>]] &lt; <span class="number">0</span>;</span><br><span class="line">consensusCor[negative] = pmax(moduleTraitCor[[<span class="number">1</span>]][negative], moduleTraitCor[[<span class="number">2</span>]][negative]);</span><br><span class="line">consensusPvalue[negative] = pmax(moduleTraitPvalue[[<span class="number">1</span>]][negative], moduleTraitPvalue[[<span class="number">2</span>]][negative]);</span><br><span class="line"><span class="comment"># Find consensus positive correlations</span></span><br><span class="line">positive = moduleTraitCor[[<span class="number">1</span>]] &gt; <span class="number">0</span> &amp; moduleTraitCor[[<span class="number">2</span>]] &gt; <span class="number">0</span>;</span><br><span class="line">consensusCor[positive] = pmin(moduleTraitCor[[<span class="number">1</span>]][positive], moduleTraitCor[[<span class="number">2</span>]][positive]);</span><br><span class="line">consensusPvalue[positive] = pmax(moduleTraitPvalue[[<span class="number">1</span>]][positive], moduleTraitPvalue[[<span class="number">2</span>]][positive]);</span><br><span class="line"></span><br><span class="line">textMatrix =  paste(signif(consensusCor, <span class="number">2</span>), <span class="string">"\n("</span>,</span><br><span class="line">                           signif(consensusPvalue, <span class="number">1</span>), <span class="string">")"</span>, sep = <span class="string">""</span>);</span><br><span class="line">dim(textMatrix) = dim(moduleTraitCor[[set]])</span><br><span class="line">sizeGrWindow(<span class="number">10</span>,<span class="number">7</span>)</span><br><span class="line">png(file = <span class="string">"ModuleTraitRelationships-consensus.png"</span>, wi = <span class="number">800</span>, he = <span class="number">560</span>);</span><br><span class="line">par(mar = c(<span class="number">6</span>, <span class="number">8.8</span>, <span class="number">3</span>, <span class="number">2.2</span>));</span><br><span class="line">labeledHeatmap(Matrix = consensusCor,</span><br><span class="line">               xLabels = names(Traits[[set]]$data),</span><br><span class="line">               yLabels = MEColorNames,</span><br><span class="line">               ySymbols = MEColorNames,</span><br><span class="line">               colorLabels = <span class="literal">FALSE</span>,</span><br><span class="line">               colors = greenWhiteRed(<span class="number">50</span>),</span><br><span class="line">               textMatrix = textMatrix,</span><br><span class="line">               setStdMargins = <span class="literal">FALSE</span>,</span><br><span class="line">               cex.text = <span class="number">0.5</span>,</span><br><span class="line">               zlim = c(-<span class="number">1</span>,<span class="number">1</span>),</span><br><span class="line">               main = paste(<span class="string">"Consensus module--trait relationships across\n"</span>,</span><br><span class="line">                            paste(setLabels, collapse = <span class="string">" and "</span>)))</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/AYwn9aqMlbrsgST.png" alt="ModuleTraitRelationships-consensus"></p><h2 id="4-2-Exporting-results-of-the-network-analysis"><a href="#4-2-Exporting-results-of-the-network-analysis" class="headerlink" title="4.2 Exporting results of the network analysis"></a>4.2 Exporting results of the network analysis</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">file = gzfile(description = <span class="string">"GeneAnnotation.csv.gz"</span>);</span><br><span class="line">annot = read.csv(file = file);</span><br><span class="line"><span class="comment"># Match probes in the data set to the probe IDs in the annotation file</span></span><br><span class="line">probes = names(multiExpr[[<span class="number">1</span>]]$data)</span><br><span class="line">probes2annot = match(probes, annot$substanceBXH)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">consMEs.unord = multiSetMEs(multiExpr, universalColors = moduleLabels, excludeGrey = <span class="literal">TRUE</span>)</span><br><span class="line">GS = list();</span><br><span class="line">kME = list();</span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  GS[[set]] = corAndPvalue(multiExpr[[set]]$data, Traits[[set]]$data);</span><br><span class="line">  kME[[set]] = corAndPvalue(multiExpr[[set]]$data, consMEs.unord[[set]]$data);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">GS.metaZ = (GS[[<span class="number">1</span>]]$Z + GS[[<span class="number">2</span>]]$Z)/sqrt(<span class="number">2</span>);</span><br><span class="line">kME.metaZ = (kME[[<span class="number">1</span>]]$Z + kME[[<span class="number">2</span>]]$Z)/sqrt(<span class="number">2</span>);</span><br><span class="line">GS.metaP = <span class="number">2</span>*pnorm(abs(GS.metaZ), lower.tail = <span class="literal">FALSE</span>);</span><br><span class="line">kME.metaP = <span class="number">2</span>*pnorm(abs(kME.metaZ), lower.tail = <span class="literal">FALSE</span>);</span><br><span class="line"></span><br><span class="line">GSmat = rbind(GS[[<span class="number">1</span>]]$cor, GS[[<span class="number">2</span>]]$cor, GS[[<span class="number">1</span>]]$p, GS[[<span class="number">2</span>]]$p, GS.metaZ, GS.metaP);</span><br><span class="line">nTraits = checkSets(Traits)$nGenes</span><br><span class="line">traitNames = colnames(Traits[[<span class="number">1</span>]]$data)</span><br><span class="line">dim(GSmat) = c(nGenes, <span class="number">6</span>*nTraits)</span><br><span class="line">rownames(GSmat) = probes;</span><br><span class="line">colnames(GSmat) = spaste(</span><br><span class="line">    c(<span class="string">"GS.set1."</span>, <span class="string">"GS.set2."</span>, <span class="string">"p.GS.set1."</span>, <span class="string">"p.GS.set2."</span>, <span class="string">"Z.GS.meta."</span>, <span class="string">"p.GS.meta"</span>),</span><br><span class="line">    rep(traitNames, rep(<span class="number">6</span>, nTraits)))</span><br><span class="line"><span class="comment"># Same code for kME:</span></span><br><span class="line">kMEmat = rbind(kME[[<span class="number">1</span>]]$cor, kME[[<span class="number">2</span>]]$cor, kME[[<span class="number">1</span>]]$p, kME[[<span class="number">2</span>]]$p, kME.metaZ, kME.metaP);</span><br><span class="line">MEnames = colnames(consMEs.unord[[<span class="number">1</span>]]$data);</span><br><span class="line">nMEs = checkSets(consMEs.unord)$nGenes</span><br><span class="line">dim(kMEmat) = c(nGenes, <span class="number">6</span>*nMEs)</span><br><span class="line">rownames(kMEmat) = probes;</span><br><span class="line">colnames(kMEmat) = spaste(</span><br><span class="line">    c(<span class="string">"kME.set1."</span>, <span class="string">"kME.set2."</span>, <span class="string">"p.kME.set1."</span>, <span class="string">"p.kME.set2."</span>, <span class="string">"Z.kME.meta."</span>, <span class="string">"p.kME.meta"</span>),</span><br><span class="line">    rep(MEnames, rep(<span class="number">6</span>, nMEs)))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">info = data.frame(Probe = probes, GeneSymbol = annot$gene_symbol[probes2annot],</span><br><span class="line">             EntrezID = annot$LocusLinkID[probes2annot],</span><br><span class="line">             ModuleLabel = moduleLabels,</span><br><span class="line">             ModuleColor = labels2colors(moduleLabels),</span><br><span class="line">             GSmat,</span><br><span class="line">             kMEmat);</span><br><span class="line">write.csv(info, file = <span class="string">"consensusAnalysis-CombinedNetworkResults.csv"</span>,</span><br><span class="line">          row.names = <span class="literal">FALSE</span>, quote = <span class="literal">FALSE</span>);</span><br></pre></td></tr></table></figure></div><h1 id="5-Relationships-among-modules-and-traits"><a href="#5-Relationships-among-modules-and-traits" class="headerlink" title="5. Relationships among modules and traits"></a>5. Relationships among modules and traits</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment"># Create a variable weight that will hold just the body weight of mice in both sets</span></span><br><span class="line">weight = vector(mode = <span class="string">"list"</span>, length = nSets);</span><br><span class="line"><span class="keyword">for</span> (set <span class="keyword">in</span> <span class="number">1</span>:nSets)</span><br><span class="line">&#123;</span><br><span class="line">  weight[[set]] = list(data = as.data.frame(Traits[[set]]$data$weight_g));</span><br><span class="line">  names(weight[[set]]$data) = <span class="string">"weight"</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment"># Recalculate consMEs to give them color names</span></span><br><span class="line">consMEsC = multiSetMEs(multiExpr, universalColors = moduleColors);</span><br><span class="line"><span class="comment"># We add the weight trait to the eigengenes and order them by consesus hierarchical clustering:</span></span><br><span class="line">MET = consensusOrderMEs(addTraitToMEs(consMEsC, weight));</span><br><span class="line"></span><br><span class="line">sizeGrWindow(<span class="number">8</span>,<span class="number">10</span>);</span><br><span class="line"><span class="comment">#png(file = "EigengeneNetworks.png", width= 480, height = 600);</span></span><br><span class="line">par(cex = <span class="number">0.9</span>)</span><br><span class="line">plotEigengeneNetworks(MET, setLabels, marDendro = c(<span class="number">0</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">1</span>), marHeatmap = c(<span class="number">3</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">1</span>),</span><br><span class="line">                      zlimPreservation = c(<span class="number">0.5</span>, <span class="number">1</span>), xLabelsAngle = <span class="number">90</span>)</span><br><span class="line"><span class="comment"># dev.off();</span></span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/10/dwvPIZEYDp19SJm.png" alt="EigengeneNetworks"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>circlize</title>
      <link href="/R/circlize.html"/>
      <url>/R/circlize.html</url>
      
        <content type="html"><![CDATA[<h1 id="circlize"><a href="#circlize" class="headerlink" title="circlize"></a>circlize</h1><p><img src="https://i.loli.net/2020/06/18/TApFqY1GyInERLO.png" alt="head"></p><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">'circlize'</span>)</span><br><span class="line"><span class="keyword">library</span>(circlize)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Create data</span></span><br><span class="line">data = data.frame(</span><br><span class="line">    factor = sample(letters[<span class="number">1</span>:<span class="number">8</span>], <span class="number">1000</span>, replace = <span class="literal">TRUE</span>),</span><br><span class="line">    x = rnorm(<span class="number">1000</span>),</span><br><span class="line">    y = runif(<span class="number">1000</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step1: Initialise the chart giving factor and x-axis.</span></span><br><span class="line">circos.initialize( factors=data$factor, x=data$x )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 2: Build the regions.</span></span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y = data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis()</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 3: Add points</span></span><br><span class="line">circos.trackPoints(data$factor, data$x, data$y, col = <span class="string">"blue"</span>, pch = <span class="number">16</span>, cex = <span class="number">0.5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Step 4: Add points</span></span><br><span class="line">circos.trackPoints(data$factor, data$x, data$y, col = rgb(<span class="number">0.1</span>,<span class="number">0.5</span>,<span class="number">0.8</span>,<span class="number">0.3</span>), pch = <span class="number">20</span>, cex = <span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/19/2pKBlVr7hAeaniP.png" alt="123"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">library</span>(circlize)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Create data</span></span><br><span class="line">data = data.frame(</span><br><span class="line">    factor = sample(letters[<span class="number">1</span>:<span class="number">8</span>], <span class="number">1000</span>, replace = <span class="literal">TRUE</span>),</span><br><span class="line">    x = rnorm(<span class="number">1000</span>),</span><br><span class="line">    y = runif(<span class="number">1000</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment"># General parameters</span></span><br><span class="line">circos.par(<span class="string">"track.height"</span> = <span class="number">0.4</span>)</span><br></pre></td></tr></table></figure></div><p><a name="zhv19"></a></p><h2 id="1-scatter-plot"><a href="#1-scatter-plot" class="headerlink" title="1: scatter plot"></a>1: scatter plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize chart</span></span><br><span class="line">circos.initialize(factors = data$factor, x = data$x )</span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y=data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels.cex=<span class="number">0.5</span>, labels.font=<span class="number">1</span>, lwd=<span class="number">0.8</span>, h=<span class="string">"bottom"</span>, direction=<span class="string">"inside"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">circos.trackPoints(data$factor, data$x, data$y, col = rgb(<span class="number">0.1</span>,<span class="number">0.5</span>,<span class="number">0.8</span>,<span class="number">0.3</span>), pch=<span class="number">20</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/19/re6NUwtIHqlPguS.png" alt="132"><br><img src="https://i.loli.net/2020/06/19/r9HuFjaQ8X7mKcx.png" alt="123"></p><p><a name="hSSiS"></a></p><h2 id="2-lines"><a href="#2-lines" class="headerlink" title="2: lines"></a>2: lines</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize chart</span></span><br><span class="line">circos.initialize(factors = data$factor, x = data$x )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the regions.</span></span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y=data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels.cex=<span class="number">0.5</span>, labels.font=<span class="number">1</span>, lwd=<span class="number">0.8</span>, h=<span class="string">"bottom"</span>, direction=<span class="string">"inside"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">circos.trackLines(data$factor, data$x[order(data$x)], data$y[order(data$x)], col = rgb(<span class="number">0.1</span>,<span class="number">0.5</span>,<span class="number">0.8</span>,<span class="number">0.3</span>), lwd=<span class="number">2</span>)</span><br></pre></td></tr></table></figure></div><p><a name="HUdip"></a></p><h2 id="3-abline-vertical-lines"><a href="#3-abline-vertical-lines" class="headerlink" title="3: abline (vertical lines)"></a>3: abline (vertical lines)</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize chart</span></span><br><span class="line">circos.initialize(factors = data$factor, x = data$x )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the regions.</span></span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y=data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels.cex=<span class="number">0.5</span>, labels.font=<span class="number">1</span>, lwd=<span class="number">0.8</span>, h=<span class="string">"bottom"</span>, direction=<span class="string">"inside"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">circos.trackLines(data$factor, data$x[order(data$x)], data$y[order(data$x)], col = rgb(<span class="number">0.1</span>,<span class="number">0.5</span>,<span class="number">0.8</span>,<span class="number">0.3</span>), lwd=<span class="number">2</span>, type=<span class="string">"h"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/19/pi4xgUPZ1LElBtR.png" alt="cir"></p><p><img src="https://i.loli.net/2020/06/19/j6aQVDPm8tdgFeE.png" alt="cir"></p><p><a name="9jhF8"></a></p><h2 id="4-text"><a href="#4-text" class="headerlink" title="4: text"></a>4: text</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Initialize chart</span></span><br><span class="line">circos.initialize(factors = data$factor, x = data$x )</span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the regions.</span></span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y=data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels.cex=<span class="number">0.5</span>, labels.font=<span class="number">1</span>, lwd=<span class="number">0.8</span>, h=<span class="string">"bottom"</span>, direction=<span class="string">"inside"</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">circos.trackText(data$factor, data$x[order(data$x)], data$y[order(data$x)], labels=data$factor, col = rgb(<span class="number">0.9</span>,<span class="number">0.2</span>,<span class="number">0.8</span>,<span class="number">0.3</span>), cex=<span class="number">1</span>)</span><br></pre></td></tr></table></figure></div><p><a name="FTGhd"></a></p><h2 id="5-histogram"><a href="#5-histogram" class="headerlink" title="5: histogram"></a>5: histogram</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">circos.initialize(factors = data$factor, x = data$x )</span><br><span class="line">circos.trackPlotRegion(factors = data$factor, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels.cex=<span class="number">0.5</span>, labels.font=<span class="number">1</span>, lwd=<span class="number">4</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">circos.trackHist(data$factor, data$x, bg.col = <span class="string">"grey78"</span>, col = rgb(<span class="number">0.1</span>,<span class="number">0.5</span>,<span class="number">0.8</span>,<span class="number">0.3</span>))</span><br></pre></td></tr></table></figure></div><p><a name="5ab91e24"></a><br>#</p><p><a name="7B2cF"></a></p><h2 id="Layer-by-layer"><a href="#Layer-by-layer" class="headerlink" title="Layer by layer"></a>Layer by layer</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">library</span>(circlize)</span><br><span class="line"></span><br><span class="line"><span class="comment">#Create data</span></span><br><span class="line">data = data.frame(</span><br><span class="line">    factor = sample(letters[<span class="number">1</span>:<span class="number">8</span>], <span class="number">1000</span>, replace = <span class="literal">TRUE</span>),</span><br><span class="line">    x = rnorm(<span class="number">1000</span>),</span><br><span class="line">    y = runif(<span class="number">1000</span>)</span><br><span class="line">    )</span><br><span class="line"></span><br><span class="line"><span class="comment">#Initialize the plot.</span></span><br><span class="line">par(mar = c(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>) )</span><br><span class="line">circos.initialize(factors = data$factor, x = data$x )</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the regions of track #1</span></span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y=data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels.cex=<span class="number">0.5</span>, labels.font=<span class="number">1</span>, lwd=<span class="number">0.8</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="comment"># --&gt; Add a scatterplot on it:</span></span><br><span class="line">circos.trackPoints(data$factor, data$x, data$y, col = rgb(<span class="number">0.1</span>,<span class="number">0.5</span>,<span class="number">0.8</span>,<span class="number">0.3</span>), pch=<span class="number">20</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Build the regions of track #2:</span></span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y=data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels=<span class="literal">FALSE</span>, major.tick=<span class="literal">FALSE</span>)</span><br><span class="line">    &#125;)</span><br><span class="line"><span class="comment"># --&gt; Add a scatterplot on it</span></span><br><span class="line">circos.trackPoints(data$factor, data$x, data$y, col = rgb(<span class="number">0.9</span>,<span class="number">0.5</span>,<span class="number">0.8</span>,<span class="number">0.3</span>), pch=<span class="number">20</span>, cex=<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Add the couche #3 --&gt; don't forget you can custom the height of tracks!</span></span><br><span class="line">circos.par(<span class="string">"track.height"</span> = <span class="number">0.4</span>)</span><br><span class="line">circos.trackPlotRegion(factors = data$factor, y=data$y, panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">    circos.axis(labels=<span class="literal">FALSE</span>, major.tick=<span class="literal">FALSE</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">circos.trackLines(data$factor, data$x, data$y, col = rgb(<span class="number">0.9</span>,<span class="number">0.5</span>,<span class="number">0.1</span>,<span class="number">0.3</span>), pch=<span class="number">20</span>, cex=<span class="number">2</span>, type=<span class="string">"h"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/19/2XjtBxR1kPEcN8w.png" alt="11"></p><p><a name="ai2vy"></a></p><h2 id="Example-2"><a href="#Example-2" class="headerlink" title="Example 2"></a>Example 2</h2><p>Source: <a href="https://www.jianshu.com/p/a87bcc1cb67b" target="_blank" rel="noopener">https://www.jianshu.com/p/a87bcc1cb67b</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(circlize)</span><br><span class="line"><span class="comment"># 简单创建一个数据集</span></span><br><span class="line">set.seed(<span class="number">999</span>)</span><br><span class="line">n &lt;- <span class="number">1000</span></span><br><span class="line">a &lt;- data.frame(factors = sample(letters[<span class="number">1</span>:<span class="number">8</span>], n, replace = <span class="literal">TRUE</span>), x = rnorm(n), y = runif(n))</span><br><span class="line"></span><br><span class="line"><span class="comment">#Layer 1</span></span><br><span class="line">par(mar = c(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), lwd = <span class="number">0.1</span>, cex = <span class="number">0.6</span>)</span><br><span class="line">circos.par(track.height = <span class="number">0.1</span>)</span><br><span class="line">circos.initialize(factors = a$factors, x = a$x) <span class="comment">#初始化，factors来控制track数目，初始化里只有x， 没有y。这一步相当于ggplot()</span></span><br><span class="line">circos.trackPlotRegion(factors = a$factors, y = a$y,</span><br><span class="line">panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">circos.axis()&#125;)</span><br><span class="line">col &lt;- rep(c(<span class="string">"#FF0000"</span>, <span class="string">"#00FF00"</span>), <span class="number">4</span>) <span class="comment">#自定义一下颜色# 这里先解释一下，一个track有好几个cell，具体数目由factors决定的，向本数据集中factors有八个，因此绘制一个track，其包含八个cell。含有前缀circos.track的函数会在所有的cel里添加基本元素，而只有前缀circos.的函数可以在特定的track、cell里添加基本元素。具体看下演示。</span></span><br><span class="line">circos.trackPoints(a$factors, a$x, a$y, col = col, pch = <span class="number">16</span>, cex = <span class="number">0.5</span>) <span class="comment">#所有的cell里都绘制点图</span></span><br><span class="line">circos.text(-<span class="number">1</span>, <span class="number">0.5</span>, <span class="string">"left"</span>, sector.index = <span class="string">"a"</span>, track.index = <span class="number">1</span>) <span class="comment">#在track 1中的标记为a的cell里添加</span></span><br><span class="line">circos.clear()</span><br><span class="line"><span class="comment">#Layer 2</span></span><br><span class="line">par(mar = c(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), lwd = <span class="number">0.1</span>, cex = <span class="number">0.6</span>)</span><br><span class="line">circos.par(track.height = <span class="number">0.1</span>)</span><br><span class="line">circos.initialize(factors = a$factors, x = a$x)</span><br><span class="line">circos.trackPlotRegion(factors = a$factors, y = a$y,</span><br><span class="line">panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">circos.axis()&#125;)</span><br><span class="line">col &lt;- rep(c(<span class="string">"#FF0000"</span>, <span class="string">"#00FF00"</span>), <span class="number">4</span>)</span><br><span class="line">circos.trackPoints(a$factors, a$x, a$y, col = col, pch = <span class="number">16</span>, cex = <span class="number">0.5</span>)</span><br><span class="line">circos.text(-<span class="number">1</span>, <span class="number">0.5</span>, <span class="string">"left"</span>, sector.index = <span class="string">"a"</span>, track.index = <span class="number">1</span>)</span><br><span class="line">circos.text(<span class="number">1</span>, <span class="number">0.5</span>, <span class="string">"right"</span>, sector.index = <span class="string">"a"</span>)</span><br><span class="line">bg.col &lt;- rep(c(<span class="string">"#EFEFEF"</span>, <span class="string">"#CCCCCC"</span>), <span class="number">4</span>)</span><br><span class="line">circos.trackHist(a$factors, a$x, bg.col = bg.col, col = <span class="literal">NA</span>)</span><br><span class="line">circos.clear()</span><br><span class="line"><span class="comment">#Layer 3</span></span><br><span class="line">par(mar = c(<span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">1</span>), lwd = <span class="number">0.1</span>, cex = <span class="number">0.6</span>)</span><br><span class="line">circos.par(track.height = <span class="number">0.1</span>)</span><br><span class="line">circos.initialize(factors = a$factors, x = a$x)</span><br><span class="line">circos.trackPlotRegion(factors = a$factors, y = a$y,</span><br><span class="line"> panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">circos.axis()&#125;)</span><br><span class="line">col &lt;- rep(c(<span class="string">"#FF0000"</span>, <span class="string">"#00FF00"</span>), <span class="number">4</span>)</span><br><span class="line">circos.trackPoints(a$factors, a$x, a$y, col = col, pch = <span class="number">16</span>, cex = <span class="number">0.5</span>)</span><br><span class="line">circos.text(-<span class="number">1</span>, <span class="number">0.5</span>, <span class="string">"left"</span>, sector.index = <span class="string">"a"</span>, track.index = <span class="number">1</span>)</span><br><span class="line">circos.text(<span class="number">1</span>, <span class="number">0.5</span>, <span class="string">"right"</span>, sector.index = <span class="string">"a"</span>)</span><br><span class="line">bg.col &lt;- rep(c(<span class="string">"#EFEFEF"</span>, <span class="string">"#CCCCCC"</span>), <span class="number">4</span>)</span><br><span class="line">circos.trackHist(a$factors, a$x, bg.col = bg.col, col = <span class="literal">NA</span>)</span><br><span class="line">circos.trackPlotRegion(factors = a$factors, x = a$x, y = a$y,</span><br><span class="line">panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line"> grey = c(<span class="string">"#FFFFFF"</span>, <span class="string">"#CCCCCC"</span>, <span class="string">"#999999"</span>)</span><br><span class="line">sector.index = get.cell.meta.data(<span class="string">"sector.index"</span>) <span class="comment">#这个是第三个track，因为我们刚刚创建，这里这一步不用也可。</span></span><br><span class="line"> xlim = get.cell.meta.data(<span class="string">"xlim"</span>)</span><br><span class="line"> ylim = get.cell.meta.data(<span class="string">"ylim"</span>)</span><br><span class="line">circos.text(mean(xlim), mean(ylim), sector.index)</span><br><span class="line">circos.points(x[<span class="number">1</span>:<span class="number">10</span>], y[<span class="number">1</span>:<span class="number">10</span>], col = <span class="string">"red"</span>, pch = <span class="number">16</span>, cex = <span class="number">0.6</span>)</span><br><span class="line">circos.points(x[<span class="number">11</span>:<span class="number">20</span>], y[<span class="number">11</span>:<span class="number">20</span>], col = <span class="string">"blue"</span>, cex = <span class="number">0.6</span>)&#125;)</span><br><span class="line">circos.clear()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NuKCvj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/19/NuKCvj.png" alt="NuKCvj.png"></a></p><h2 id="Connection"><a href="#Connection" class="headerlink" title="Connection"></a>Connection</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">set.seed(<span class="number">999</span>)</span><br><span class="line">mat = matrix(sample(<span class="number">18</span>, <span class="number">18</span>), <span class="number">3</span>, <span class="number">6</span>)</span><br><span class="line">rownames(mat) = paste0(<span class="string">"S"</span>, <span class="number">1</span>:<span class="number">3</span>)</span><br><span class="line">colnames(mat) = paste0(<span class="string">"E"</span>, <span class="number">1</span>:<span class="number">6</span>)</span><br><span class="line">df=melt(mat)</span><br><span class="line">df$X1=as.character(df$Var1)</span><br><span class="line">df$X2=as.character(df$Var2)</span><br><span class="line"></span><br><span class="line"><span class="comment">#作图</span></span><br><span class="line">chordDiagram(mat)</span><br><span class="line">chordDiagram(df)</span><br><span class="line">circos.clear()</span><br><span class="line"></span><br><span class="line"><span class="comment">#图形的精修和参数介绍</span></span><br><span class="line">chordDiagram(df,</span><br><span class="line">  reduce = -<span class="number">1</span>, <span class="comment">#如果单个扇叶/整个环 &lt; reduce,则这个扇叶不展示</span></span><br><span class="line">  grid.col=sample(colors(),length(union(df$X1,df$X2)),replace = <span class="literal">F</span>),  <span class="comment">#扇叶的颜色，顺序和union(df[[1]],df[[2]])一样</span></span><br><span class="line">  col=colorRamp2(breaks=c(<span class="number">1</span>,<span class="number">18</span>),colors=c(<span class="string">"blue"</span>,<span class="string">"red"</span>)),  <span class="comment">#连线的颜色，也可以设置展示df中数值的大小</span></span><br><span class="line">  order = union(df$X2,df$X1),  <span class="comment">#扇叶展示的顺序</span></span><br><span class="line">  directional = <span class="number">1</span>, <span class="comment">#连线的方向，1=第一列到第二列，2=双方向，-1=第二列到第一列，0=无方向</span></span><br><span class="line">  direction.type = <span class="string">"arrows"</span>, <span class="comment">#可以为“diffHeight”，也可以为“arrows”</span></span><br><span class="line">  diffHeight = rep(convert_height(<span class="number">1</span>,<span class="string">"mm"</span>),length(union(df$X1,df$X2))), <span class="comment">#正值代表出处比末尾凸出，负值代表出处比末尾凹进去</span></span><br><span class="line"> self.link = <span class="number">1</span>, <span class="comment">#自己和自己相连的线，1=形似山 宽度代变数值大小，2=出和入的宽度相同并代表数值的大小</span></span><br><span class="line">  preAllocateTracks = <span class="number">1</span>, <span class="comment">#预留出多少空的轨道</span></span><br><span class="line">  link.border = rep(<span class="string">'grey'</span>,nrow(df)), <span class="comment">#连线边界的颜色</span></span><br><span class="line">  link.lwd = rep(<span class="number">1</span>,nrow(df)), <span class="comment">#连线边界的宽度</span></span><br><span class="line">  link.lty = rep(<span class="number">3</span>,nrow(df)), <span class="comment">#设置连线边界的线型</span></span><br><span class="line">  link.sort = <span class="literal">T</span>, <span class="comment"># 对连线依据大小排序</span></span><br><span class="line">  link.decreasing = <span class="literal">T</span>, <span class="comment">#连线降序排序</span></span><br><span class="line">  link.arr.width = rep(<span class="number">0.1</span>,nrow(df)), <span class="comment">#连线方向用箭头表示时，箭头的宽度</span></span><br><span class="line">  link.arr.type = <span class="string">"triangle"</span>, <span class="comment">#箭头类型</span></span><br><span class="line">  link.arr.col = rep(<span class="string">'grey'</span>,nrow(df)), <span class="comment">#箭头的颜色</span></span><br><span class="line">  link.arr.lwd = rep(<span class="number">1</span>,nrow(df)), <span class="comment">#箭头的尾线宽度</span></span><br><span class="line">  link.arr.lty = rep(<span class="number">3</span>,nrow(df)), <span class="comment">#箭头尾线的线型</span></span><br><span class="line">  link.visible = c(rep(<span class="literal">T</span>,<span class="number">9</span>),rep(<span class="literal">F</span>,<span class="number">9</span>)) <span class="comment">#连线是否画出</span></span><br><span class="line">  )</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/19/ATP3qN6USzFky4l.png" alt="img"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">layout(matrix(<span class="number">1</span>:<span class="number">9</span>, <span class="number">3</span>, <span class="number">3</span>))</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">9</span>) &#123;</span><br><span class="line"> factors = letters[<span class="number">1</span>:<span class="number">8</span>]</span><br><span class="line">par(mar = c(<span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>, <span class="number">0.5</span>))</span><br><span class="line">circos.par(cell.padding = c(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">circos.initialize(factors = factors, xlim = c(<span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">circos.trackPlotRegion(ylim = c(<span class="number">0</span>, <span class="number">1</span>), track.height = <span class="number">0.05</span>,</span><br><span class="line">bg.col = rand_color(<span class="number">8</span>), bg.border = <span class="literal">NA</span>)</span><br><span class="line"><span class="comment"># 绘制links</span></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:<span class="number">20</span>) &#123;</span><br><span class="line">se = sample(letters[<span class="number">1</span>:<span class="number">8</span>], <span class="number">2</span>)</span><br><span class="line">circos.link(se[<span class="number">1</span>], runif(<span class="number">2</span>), se[<span class="number">2</span>], runif(<span class="number">2</span>),</span><br><span class="line">col = rand_color(<span class="number">1</span>, transparency = <span class="number">0.4</span>), border = <span class="literal">NA</span>)</span><br><span class="line">&#125;&#125;</span><br><span class="line">circos.clear()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/TApFqY1GyInERLO.png" alt="head"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">set.seed(<span class="number">1234</span>)</span><br><span class="line">data &lt;- matrix(rnorm(<span class="number">100</span> * <span class="number">10</span>), nrow = <span class="number">10</span>, ncol = <span class="number">100</span>)</span><br><span class="line">col &lt;- colorRamp2(c(-<span class="number">2</span>, <span class="number">0</span>, <span class="number">2</span>), c(<span class="string">"green"</span>, <span class="string">"black"</span>, <span class="string">"red"</span>))</span><br><span class="line">factors &lt;- rep(letters[<span class="number">1</span>:<span class="number">2</span>], times = c(<span class="number">30</span>, <span class="number">70</span>))</span><br><span class="line">data_list &lt;- list(a = data[, factors == <span class="string">"a"</span>], b = data[, factors == <span class="string">"b"</span>])</span><br><span class="line">dend_list &lt;- list(a = as.dendrogram(hclust(dist(t(data_list[[<span class="string">"a"</span>]])))),</span><br><span class="line">                  b = as.dendrogram(hclust(dist(t(data_list[[<span class="string">"b"</span>]])))))</span><br><span class="line">circos.par(cell.padding = c(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>), gap.degree = <span class="number">5</span>)</span><br><span class="line">circos.initialize(factors = factors, xlim = cbind(c(<span class="number">0</span>, <span class="number">0</span>), table(factors)))</span><br><span class="line">circos.track(ylim = c(<span class="number">0</span>, <span class="number">10</span>), bg.border = <span class="literal">NA</span>,</span><br><span class="line">panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line"> sector.index = get.cell.meta.data(<span class="string">"sector.index"</span>)</span><br><span class="line">d = data_list[[sector.index]]</span><br><span class="line">dend = dend_list[[sector.index]]</span><br><span class="line">d2 = d[, order.dendrogram(dend)]</span><br><span class="line">col_data = col(d2)</span><br><span class="line">nr = nrow(d2)</span><br><span class="line">nc = ncol(d2)</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:nr) &#123;</span><br><span class="line">circos.rect(<span class="number">1</span>:nc - <span class="number">1</span>, rep(nr - i, nc), <span class="number">1</span>:nc, rep(nr - i + <span class="number">1</span>, nc),</span><br><span class="line">border = col_data[i, ], col = col_data[i, ]) &#125;&#125;)</span><br><span class="line">max_height &lt;- max(sapply(dend_list, <span class="keyword">function</span>(x) attr(x, <span class="string">"height"</span>)))</span><br><span class="line">circos.track(ylim = c(<span class="number">0</span>, max_height),</span><br><span class="line">bg.border = <span class="literal">NA</span>, track.height = <span class="number">0.3</span>,</span><br><span class="line">panel.fun = <span class="keyword">function</span>(x, y) &#123;</span><br><span class="line">sector.index = get.cell.meta.data(<span class="string">"sector.index"</span>)</span><br><span class="line">dend = dend_list[[sector.index]]</span><br><span class="line">circos.dendrogram(dend, max_height = max_height)&#125;)</span><br><span class="line">circos.clear()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/19/5Rp6Sd98olOks7Q.png" alt="123"></p><p><img src="https://i.loli.net/2020/06/19/ATP3qN6USzFky4l.png" alt="img"></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>clusterProfiler</title>
      <link href="/R/clusterProfiler.html"/>
      <url>/R/clusterProfiler.html</url>
      
        <content type="html"><![CDATA[<h1 id="clusterProfiler-out-of-date"><a href="#clusterProfiler-out-of-date" class="headerlink" title="clusterProfiler (out of date)"></a>clusterProfiler (out of date)</h1><p>Tutorial: <a href="https://yulab-smu.github.io/clusterProfiler-book/" target="_blank" rel="noopener">yulab</a></p><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BiocManager::install(<span class="string">"clusterProfiler"</span>)</span><br></pre></td></tr></table></figure></div><h1 id="Go-ontology"><a href="#Go-ontology" class="headerlink" title="Go ontology"></a>Go ontology</h1><h2 id="GO-1-Supported-Organism"><a href="#GO-1-Supported-Organism" class="headerlink" title="GO_1. Supported Organism"></a>GO_1. Supported Organism</h2><p>For module species which added in <code>OrgDb</code>, we can turn the ID to GO_id;</p><p>For other species, you can build your own <code>OrgDb</code> database by following <a href="https://bioconductor.org/packages/devel/bioc/vignettes/GOSemSim/inst/doc/GOSemSim.html#supported-organisms" target="_blank" rel="noopener">GOSemSim</a>.</p><p>If genes are already annotated (in <code>data.frame</code> witch gene ID column followed by GO ID), we can use <code>enricher()</code> and <code>geosGO()</code> function to perform over-representation test.  </p><h2 id="GO-2-Example-for-OrgDb-species"><a href="#GO-2-Example-for-OrgDb-species" class="headerlink" title="GO_2. Example for OrgDb species"></a>GO_2. Example for <code>OrgDb</code> species</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(clusterProfiler)</span><br><span class="line"><span class="keyword">library</span>(org.Hs.eg.db)</span><br><span class="line"></span><br><span class="line">data(geneList, package=<span class="string">"DOSE"</span>)</span><br><span class="line">gene &lt;- names(geneList)[abs(geneList) &gt; <span class="number">2</span>]</span><br><span class="line">gene.df &lt;- bitr(gene, fromType = <span class="string">"ENTREZID"</span>,</span><br><span class="line">        toType = c(<span class="string">"ENSEMBL"</span>, <span class="string">"SYMBOL"</span>),</span><br><span class="line">        OrgDb = org.Hs.eg.db)</span><br><span class="line">head(gene.df)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ENTREZID         ENSEMBL SYMBOL</span><br><span class="line">1     4312 ENSG00000196611   MMP1</span><br><span class="line">2     8318 ENSG00000093009  CDC45</span><br><span class="line">3    10874 ENSG00000109255    NMU</span><br><span class="line">4    55143 ENSG00000134690  CDCA8</span><br><span class="line">5    55388 ENSG00000065328  MCM10</span><br><span class="line">6      991 ENSG00000117399  CDC20</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ggo &lt;- groupGO(gene     = gene,</span><br><span class="line">               OrgDb    = org.Hs.eg.db,</span><br><span class="line">               ont      = <span class="string">"CC"</span>,</span><br><span class="line">               level    = <span class="number">3</span>,</span><br><span class="line">               readable = <span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line">head(ggo)</span><br><span class="line">barplot(ggo, showCategory = <span class="number">20</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ID                    Description Count GeneRatio</span><br><span class="line">GO:0005886 GO:0005886                plasma membrane    55    55&#x2F;207</span><br><span class="line">GO:0005628 GO:0005628              prospore membrane     0     0&#x2F;207</span><br><span class="line">GO:0005789 GO:0005789 endoplasmic reticulum membrane     8     8&#x2F;207</span><br><span class="line">...</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/14/kLpExyf9lHI4FJc.png" alt="132"></p><h2 id="GO-3-Over-Representation-Test"><a href="#GO-3-Over-Representation-Test" class="headerlink" title="GO_3. Over-Representation Test"></a>GO_3. Over-Representation Test</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ego &lt;- enrichGO(gene          = gene,</span><br><span class="line">                universe      = names(geneList),</span><br><span class="line">                OrgDb         = org.Hs.eg.db,</span><br><span class="line">                ont           = <span class="string">"CC"</span>,</span><br><span class="line">                pAdjustMethod = <span class="string">"BH"</span>,</span><br><span class="line">                pvalueCutoff  = <span class="number">0.01</span>,</span><br><span class="line">                qvalueCutoff  = <span class="number">0.05</span>,</span><br><span class="line">        readable      = <span class="literal">TRUE</span>)</span><br><span class="line">head(ego)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ego2 &lt;- enrichGO(gene         = gene.df$ENSEMBL,</span><br><span class="line">                OrgDb         = org.Hs.eg.db,</span><br><span class="line">                keyType       = <span class="string">'ENSEMBL'</span>,</span><br><span class="line">                ont           = <span class="string">"CC"</span>,</span><br><span class="line">                pAdjustMethod = <span class="string">"BH"</span>,</span><br><span class="line">                pvalueCutoff  = <span class="number">0.01</span>,</span><br><span class="line">                qvalueCutoff  = <span class="number">0.05</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># turn ENSEMBL ID to Samble</span></span><br><span class="line">ego2_r &lt;- setReadable(ego2, OrgDb = org.Hs.eg.db)</span><br></pre></td></tr></table></figure></div><table><thead><tr><th>ego</th><th>ego2</th></tr></thead><tbody><tr><td><a href="https://imgchr.com/i/tzt3RK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/14/tzt3RK.md.png" alt="tzt3RK.md.png"></a></td><td><a href="https://imgchr.com/i/tztDRf" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/14/tztDRf.png" alt="tztDRf.png"></a></td></tr></tbody></table><h2 id="GO-4-GO-Gene-Set-Enrichment-Analysis"><a href="#GO-4-GO-Gene-Set-Enrichment-Analysis" class="headerlink" title="GO_4 GO Gene Set Enrichment Analysis"></a>GO_4 GO Gene Set Enrichment Analysis</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ego3 &lt;- gseGO(geneList     = geneList,</span><br><span class="line">              OrgDb        = org.Hs.eg.db,</span><br><span class="line">              ont          = <span class="string">"CC"</span>,</span><br><span class="line">              nPerm        = <span class="number">1000</span>,</span><br><span class="line">              minGSSize    = <span class="number">100</span>,</span><br><span class="line">              maxGSSize    = <span class="number">500</span>,</span><br><span class="line">              pvalueCutoff = <span class="number">0.05</span>,</span><br><span class="line">              verbose      = <span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ID                              Description setSize enrichmentScore       NES      pvalue   p.adjust    qvalues rank                   leading_edge</span><br><span class="line">GO:0031012 GO:0031012                     extracellular matrix     427      -0.4868578 -2.138854 0.001231527 0.03095063 0.02171974 1797 tags&#x3D;37%, list&#x3D;14%, signal&#x3D;33%</span><br><span class="line">GO:0099568 GO:0099568                       cytoplasmic region     368      -0.3426037 -1.488559 0.001259446 0.03095063 0.02171974 2613 tags&#x3D;28%, list&#x3D;21%, signal&#x3D;23%</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NSMQfg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/14/NSMQfg.png" alt="NSMQfg.png"></a></p><h1 id="GO-ontology-for-Non-module-Species"><a href="#GO-ontology-for-Non-module-Species" class="headerlink" title="GO ontology for Non-module Species"></a>GO ontology for Non-module Species</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure></div><h1 id="KEGG-Enrichment"><a href="#KEGG-Enrichment" class="headerlink" title="KEGG Enrichment"></a>KEGG Enrichment</h1><h2 id="KE-1-Over-Representation-Test"><a href="#KE-1-Over-Representation-Test" class="headerlink" title="KE_1. Over-Representation Test"></a>KE_1. Over-Representation Test</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(clusterProfiler)</span><br><span class="line">search_kegg_organism(<span class="string">'ece'</span>, by=<span class="string">'kegg_code'</span>)</span><br><span class="line"></span><br><span class="line">ecoli &lt;- search_kegg_organism(<span class="string">'Escherichia coli'</span>, by=<span class="string">'scientific_name'</span>)</span><br><span class="line">dim(ecoli)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">data(geneList, package=<span class="string">"DOSE"</span>)</span><br><span class="line">gene &lt;- names(geneList)[abs(geneList) &gt; <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">kk &lt;- enrichKEGG(gene         = gene,</span><br><span class="line">                 organism     = <span class="string">'hsa'</span>,</span><br><span class="line">                 pvalueCutoff = <span class="number">0.05</span>)</span><br><span class="line">head(kk)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ID                                                   Description GeneRatio  BgRatio       pvalue     p.adjust       qvalue                                             geneID Count</span><br><span class="line">hsa04110 hsa04110                                                    Cell cycle     11&#x2F;93 124&#x2F;8031 1.590786e-07 3.213388e-05 3.148083e-05 8318&#x2F;991&#x2F;9133&#x2F;890&#x2F;983&#x2F;4085&#x2F;7272&#x2F;1111&#x2F;891&#x2F;4174&#x2F;9232    11</span><br><span class="line">hsa04114 hsa04114                                                Oocyte meiosis     10&#x2F;93 128&#x2F;8031 1.960649e-06 1.980256e-04 1.940011e-04    991&#x2F;9133&#x2F;983&#x2F;4085&#x2F;51806&#x2F;6790&#x2F;891&#x2F;9232&#x2F;3708&#x2F;5241    10</span><br><span class="line">hsa04218 hsa04218                                           Cellular senescence     10&#x2F;93 160&#x2F;8031 1.450991e-05 9.375595e-04 9.185054e-04     2305&#x2F;4605&#x2F;9133&#x2F;890&#x2F;983&#x2F;51806&#x2F;1111&#x2F;891&#x2F;776&#x2F;3708    10</span><br><span class="line">hsa04061 hsa04061 Viral protein interaction with cytokine and cytokine receptor      8&#x2F;93 100&#x2F;8031 1.856553e-05 9.375595e-04 9.185054e-04           3627&#x2F;10563&#x2F;6373&#x2F;4283&#x2F;6362&#x2F;6355&#x2F;9547&#x2F;1524     8</span><br><span class="line">hsa03320 hsa03320                                        PPAR signaling pathway      7&#x2F;93  77&#x2F;8031 2.765640e-05 1.117319e-03 1.094611e-03                 4312&#x2F;9415&#x2F;9370&#x2F;5105&#x2F;2167&#x2F;3158&#x2F;5346     7</span><br><span class="line">hsa04914 hsa04914                       Progesterone-mediated oocyte maturation      7&#x2F;93  99&#x2F;8031 1.392778e-04 4.689019e-03 4.593724e-03                    9133&#x2F;890&#x2F;983&#x2F;4085&#x2F;6790&#x2F;891&#x2F;5241     7</span><br></pre></td></tr></table></figure></div><h2 id="KE-2-Gene-Set-Enrichment-Analysis"><a href="#KE-2-Gene-Set-Enrichment-Analysis" class="headerlink" title="KE_2. Gene Set Enrichment Analysis"></a>KE_2. Gene Set Enrichment Analysis</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">kk2 &lt;- gseKEGG(geneList     = geneList,</span><br><span class="line">               organism     = <span class="string">'hsa'</span>,</span><br><span class="line">               nPerm        = <span class="number">1000</span>,</span><br><span class="line">               minGSSize    = <span class="number">120</span>,</span><br><span class="line">               pvalueCutoff = <span class="number">0.05</span>,</span><br><span class="line">               verbose      = <span class="literal">FALSE</span>)</span><br><span class="line">head(kk2)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">ID                 Description setSize enrichmentScore       NES      pvalue  p.adjust    qvalues rank                   leading_edge</span><br><span class="line">hsa04510 hsa04510              Focal adhesion     190      -0.4169068 -1.697372 0.001418440 0.0241065 0.01552815 2183 tags&#x3D;27%, list&#x3D;17%, signal&#x3D;22%</span><br><span class="line">hsa03013 hsa03013               RNA transport     131       0.4116488  1.742019 0.003067485 0.0241065 0.01552815 3383 tags&#x3D;40%, list&#x3D;27%, signal&#x3D;29%</span><br><span class="line">hsa05152 hsa05152                Tuberculosis     162       0.3745153  1.628558 0.003164557 0.0241065 0.01552815 2823 tags&#x3D;34%, list&#x3D;23%, signal&#x3D;27%</span><br><span class="line">hsa04218 hsa04218         Cellular senescence     143       0.4153718  1.761689 0.003225806 0.0241065 0.01552815 1155  tags&#x3D;17%, list&#x3D;9%, signal&#x3D;16%</span><br><span class="line">hsa05203 hsa05203        Viral carcinogenesis     164       0.3523856  1.535177 0.003246753 0.0241065 0.01552815 3112 tags&#x3D;35%, list&#x3D;25%, signal&#x3D;26%</span><br><span class="line">hsa04062 hsa04062 Chemokine signaling pathway     165       0.3754101  1.632867 0.003300330 0.0241065 0.01552815 1298 tags&#x3D;21%, list&#x3D;10%, signal&#x3D;19%</span><br></pre></td></tr></table></figure></div><table><thead><tr><th align="center">kk</th><th align="center">kk2</th></tr></thead><tbody><tr><td align="center"><a href="https://imgchr.com/i/NSY9Rf" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/14/NSY9Rf.md.png" alt="NSY9Rf.md.png"></a></td><td align="center"><a href="https://imgchr.com/i/NSYpJP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/14/NSYpJP.md.png" alt="NSYpJP.md.png"></a></td></tr><tr><td align="center">## KE_3. KEGG Module over-representation test</td><td align="center"></td></tr></tbody></table><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkk &lt;- enrichMKEGG(gene = gene,</span><br><span class="line">                   organism = <span class="string">'hsa'</span>)</span><br></pre></td></tr></table></figure></div><h2 id="KE-4-KEGG-Module-Gene-Set-Enrichment-Analysis"><a href="#KE-4-KEGG-Module-Gene-Set-Enrichment-Analysis" class="headerlink" title="KE_4. KEGG Module Gene Set Enrichment Analysis"></a>KE_4. KEGG Module Gene Set Enrichment Analysis</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkk2 &lt;- gseMKEGG(geneList = geneList,</span><br><span class="line">                 organism = <span class="string">'hsa'</span>)</span><br></pre></td></tr></table></figure></div><hr><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#############</span></span><br><span class="line"><span class="comment">###eg</span></span><br><span class="line"><span class="comment">############</span></span><br><span class="line"></span><br><span class="line">eg = bitr(x, fromType=<span class="string">"SYMBOL"</span>, toType=<span class="string">"ENTREZID"</span>, OrgDb=<span class="string">"org.Hs.eg.db"</span>)</span><br><span class="line">eg = bitr(x, fromType=<span class="string">"ENTREZID"</span>, toType=<span class="string">"SYMBOL"</span>, OrgDb=<span class="string">"org.Hs.eg.db"</span>)</span><br><span class="line">head(eg)</span><br><span class="line"></span><br><span class="line">gene &lt;- eg[[<span class="number">2</span>]]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">barplot(ggio, drop=<span class="literal">TRUE</span>, showCategory=<span class="number">122</span>)</span><br><span class="line"><span class="comment">####################################################################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">##bitr_kegg: converting biological IDs using KEGG API</span></span><br><span class="line"></span><br><span class="line">data(x)</span><br><span class="line">hg &lt;- x[[<span class="number">1</span>]]</span><br><span class="line">head(hg)</span><br><span class="line">eg2np &lt;- bitr_kegg(hg, fromType=<span class="string">'kegg'</span>, toType=<span class="string">'ncbi-proteinid'</span>, organism=<span class="string">'hsa'</span>)</span><br><span class="line">head(eg2np)</span><br><span class="line">bitr_kegg(<span class="string">"Z5100"</span>, fromType=<span class="string">"kegg"</span>, toType=<span class="string">'ncbi-geneid'</span>, organism=<span class="string">'ece'</span>)</span><br><span class="line">bitr_kegg(<span class="string">"Z5100"</span>, fromType=<span class="string">"kegg"</span>, toType=<span class="string">'ncbi-proteinid'</span>, organism=<span class="string">'ece'</span>)</span><br><span class="line">bitr_kegg(<span class="string">"Z5100"</span>, fromType=<span class="string">"kegg"</span>, toType=<span class="string">'uniprot'</span>, organism=<span class="string">'ece'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line"><span class="comment">########### GO classification</span></span><br><span class="line"><span class="comment">###############################################################################</span></span><br><span class="line">gene &lt;- names(geneList)[abs(geneList) &gt; <span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">gobp &lt;- groupGO(gene     = gene,</span><br><span class="line">               OrgDb    = org.Hs.eg.db,</span><br><span class="line">               ont      = <span class="string">"BP"</span>,</span><br><span class="line">               level    = <span class="number">2</span>,</span><br><span class="line">               readable = <span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line">head(ggo)</span><br><span class="line"></span><br><span class="line">go &lt;- groupGO(gene = gene, OrgDb = org.Hs.eg.db, ont = <span class="string">"BP"</span>, level = <span class="number">2</span>, readable = <span class="literal">TRUE</span>)</span><br><span class="line">barplot(go, drop=<span class="literal">TRUE</span>, showCategory=<span class="number">122</span>)</span><br><span class="line"><span class="comment">#############################</span></span><br><span class="line">GO over-representation test</span><br><span class="line"><span class="comment">##############################</span></span><br><span class="line">ego1 &lt;- enrichGO(gene =gene, universe= names(geneList), ont = <span class="string">"CC"</span>,pAdjustMethod = <span class="string">"BH"</span>,pvalueCutoff  = <span class="number">0.01</span>,qvalueCutoff = <span class="number">0.05</span>,readable = <span class="literal">TRUE</span>)</span><br><span class="line">ego2 &lt;- enrichGO(gene =gene, universe= names(geneList), ont = <span class="string">"BP"</span>,pAdjustMethod = <span class="string">"BH"</span>,pvalueCutoff  = <span class="number">0.01</span>,qvalueCutoff = <span class="number">0.05</span>,readable = <span class="literal">TRUE</span>)</span><br><span class="line">ego3 &lt;- enrichGO(gene =gene, universe= names(geneList), ont = <span class="string">"MF"</span>,pAdjustMethod = <span class="string">"BH"</span>,pvalueCutoff  = <span class="number">0.01</span>,qvalueCutoff = <span class="number">0.05</span>,readable = <span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line">head(ego)</span><br><span class="line"><span class="comment">##################################</span></span><br><span class="line"><span class="comment">#################################</span></span><br><span class="line"><span class="comment">#################################</span></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(clusterProfiler)</span><br><span class="line"><span class="keyword">library</span>(org.Hs.eg.db)</span><br><span class="line">keytypes(org.Hs.eg.db)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">KEGG</span><br><span class="line">kk &lt;- enrichKEGG(gene = gene, organism = <span class="string">'human'</span>, pvalueCutoff = <span class="number">0.05</span>)</span><br><span class="line"></span><br><span class="line">head(kk)</span><br><span class="line">barplot(kk, drop=<span class="literal">TRUE</span>, showCategory=<span class="number">122</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">kk2 &lt;- gseKEGG(geneList = geneList, organism = <span class="string">'hsa'</span>, nPerm = <span class="number">1000</span>, minGSSize = <span class="number">120</span>, pvalueCutoff = <span class="number">100</span>,verbose = <span class="literal">FALSE</span>)</span><br><span class="line">ead(kk2)</span><br><span class="line"></span><br><span class="line"><span class="comment">###</span></span><br><span class="line">kk2 &lt;- gseKEGG(geneList = geneList, organism = <span class="string">'hsa'</span>, nPerm = <span class="number">10</span>, minGSSize = <span class="number">10</span>, pvalueCutoff = <span class="number">100</span>,verbose = <span class="literal">FALSE</span>)</span><br><span class="line"></span><br><span class="line">gseaplot(kk2, geneSetID = <span class="string">"hsa05200"</span>)</span><br><span class="line"></span><br><span class="line">hsa05205</span><br><span class="line">hsa05165</span><br><span class="line"><span class="comment">#################################################################</span></span><br><span class="line"><span class="comment">############pathview</span></span><br><span class="line"><span class="comment">#################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(clusterProfiler)</span><br><span class="line"><span class="keyword">library</span>(org.Hs.eg.db)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"pathview"</span>)</span><br><span class="line"></span><br><span class="line">hsa05418</span><br><span class="line"> p  &lt;- pathview(gene.data  = geneList,</span><br><span class="line">                     pathway.id = <span class="string">"hsa04976"</span>,</span><br><span class="line">                     species    = <span class="string">"hsa"</span>,</span><br><span class="line">                     limit      = list(gene=max(abs(geneList)), cpd=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">pathview(gene.data  = geneList, pathway.id = <span class="string">"hsa04976"</span>, species = <span class="string">"hsa"</span>, limit = list(gene=max(<span class="number">5</span>), cpd=<span class="number">1</span>))</span><br><span class="line">pathview(gene.data  = geneList, pathway.id = i, species = <span class="string">"hsa"</span>, limit = list(gene=max(<span class="number">5</span>), cpd=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###################################################################</span></span><br><span class="line"><span class="comment">###geneList</span></span><br><span class="line"><span class="comment">###################################################################</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">d = read.csv(your_csv_file)</span><br><span class="line"></span><br><span class="line">d = read.table(<span class="string">"geneList"</span>)</span><br><span class="line"><span class="comment">## assume 1st column is ID</span></span><br><span class="line"><span class="comment">## 2nd column is FC</span></span><br><span class="line"><span class="comment">## feature 1: numeric vector</span></span><br><span class="line"></span><br><span class="line">geneList = d[,<span class="number">2</span>]</span><br><span class="line">names(geneList) = as.character(d[,<span class="number">1</span>])  <span class="comment">## feature 2: named vector</span></span><br><span class="line">geneList = sort(geneList, decreasing = <span class="literal">TRUE</span>)   <span class="comment">## feature 3: decreasing order</span></span><br><span class="line">head(geneList)</span><br><span class="line"></span><br><span class="line">eg = bitr(x, fromType=<span class="string">"ENTREZID"</span>, toType=<span class="string">"SYMBOL"</span>, annoDb=<span class="string">"org.Hs.eg.db"</span>)</span><br><span class="line"></span><br><span class="line"> p  &lt;- pathview(gene.data  = geneList, pathway.id = <span class="string">"hsa04668"</span>, species    = <span class="string">"hsa"</span>, limit      = list(gene=max(abs(geneList)), cpd=<span class="number">1</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">gene &lt;- names(geneList)[abs(geneList) &gt; <span class="number">2</span>]</span><br><span class="line">gene.df &lt;- bitr(gene, fromType = <span class="string">"ENTREZID"</span>,</span><br><span class="line">        toType = c(<span class="string">"ENSEMBL"</span>, <span class="string">"SYMBOL"</span>),</span><br><span class="line">        OrgDb = org.Hs.eg.db)</span><br><span class="line">head(gene.df)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">ego2 &lt;- enrichGO(gene         = gene.df$ENSEMBL,</span><br><span class="line">                OrgDb         = org.Hs.eg.db,</span><br><span class="line">        keytype       = <span class="string">'ENSEMBL'</span>,</span><br><span class="line">                ont           = <span class="string">"CC"</span>,</span><br><span class="line">                pAdjustMethod = <span class="string">"BH"</span>,</span><br><span class="line">                pvalueCutoff  = <span class="number">0.01</span>,</span><br><span class="line">                qvalueCutoff  = <span class="number">0.05</span>)</span><br><span class="line">ego2 &lt;- setReadable(ego2, OrgDb = org.Hs.eg.db)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">biocLite(<span class="string">"topGO"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">barplot(ggo, drop=<span class="literal">TRUE</span>, showCategory=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">##############################################################</span></span><br><span class="line"><span class="comment">#</span></span><br><span class="line"><span class="comment">##############################################################</span></span><br><span class="line">geneList = d[,<span class="number">2</span>]</span><br><span class="line">names(geneList) = as.character(d[,<span class="number">1</span>])  <span class="comment">## feature 2: named vector</span></span><br><span class="line">geneList = sort(geneList, decreasing = <span class="literal">TRUE</span>)   <span class="comment">## feature 3: decreasing order</span></span><br><span class="line">head(geneList)</span><br><span class="line"></span><br><span class="line">kk2 &lt;- gseKEGG(geneList     = geneList,</span><br><span class="line">               organism     = <span class="string">'hsa'</span>,</span><br><span class="line">               nPerm        = <span class="number">1000</span>,</span><br><span class="line">               minGSSize    = <span class="number">120</span>,</span><br><span class="line">               pvalueCutoff = <span class="number">0</span>,</span><br><span class="line">               verbose      = <span class="literal">FALSE</span>)</span><br><span class="line">gseaplot(kk2, geneSetID = <span class="string">"hsa04668"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">######################</span></span><br><span class="line"><span class="comment">###write the results</span></span><br><span class="line"><span class="comment">######################</span></span><br><span class="line"></span><br><span class="line">write.csv(fortify(kk,showCategory=<span class="number">120</span>),file=<span class="string">"kk.matrix"</span>,quote=<span class="literal">F</span>,sep=<span class="string">'\t'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#################################</span></span><br><span class="line"></span><br><span class="line">a &lt;- c(<span class="string">"3"</span>,<span class="string">"7"</span>,<span class="string">"14"</span>,<span class="string">"21"</span>)</span><br><span class="line">b &lt;- read.table(<span class="string">"single_symol.matrix"</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> a)</span><br><span class="line"> &#123;</span><br><span class="line"> x &lt;- read.table(<span class="string">"3"</span>)</span><br><span class="line"> probes= x$V1</span><br><span class="line"> probes1=match(probes,x$V1)</span><br><span class="line"> probes2=match(probes,b$V1)</span><br><span class="line"> sum(is.na(probes1))</span><br><span class="line"> sum(is.na(probes1))</span><br><span class="line"> List=data.frame(FC=(x$V4[probes1]* -<span class="number">1</span>),S=b$V2[probes2],Co=b$V1[probes2])</span><br><span class="line"> List=data.frame(Symbol=List$S, FC=List$FC )</span><br><span class="line"> A&lt;- List[order(List[,<span class="number">2</span>],decreasing=<span class="literal">F</span>),]</span><br><span class="line"> write.table(A,file=paste(i,<span class="string">"-tesst.txt"</span>,sep=<span class="string">''</span>),sep=<span class="string">'\t'</span>,quote=<span class="literal">F</span>,row.names=<span class="literal">F</span>)</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> b[[<span class="number">1</span>]])</span><br><span class="line"> &#123;</span><br><span class="line">  probes= i</span><br><span class="line"> probes1= match(probes,b$V1)</span><br><span class="line">  c=b$V2[probes1]</span><br><span class="line"> png(file=paste(i,<span class="string">"-"</span>,c,<span class="string">"-GSEA.png"</span>,sep=<span class="string">''</span>),wi=<span class="number">400</span>,he=<span class="number">400</span>)</span><br><span class="line"> gseaplot(kk2, geneSetID = i,title=paste(c,<span class="string">"0dpeVs7dpe"</span>))</span><br><span class="line"> dev.off()</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="keyword">for</span> (i <span class="keyword">in</span> b[[<span class="number">1</span>]])</span><br><span class="line"> &#123;</span><br><span class="line"> p  &lt;- pathview(gene.data  = geneList,</span><br><span class="line"> pathway.id = i,</span><br><span class="line">  species    = <span class="string">"hsa"</span>,</span><br><span class="line">                   limit      = list(gene=max(abs(geneList)), cpd=<span class="number">1</span>))</span><br><span class="line"> &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">geneList=data.frame(List=List$Symbol,FC=List$FC* -<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> png(file=paste(i,<span class="string">"-"</span>,title,<span class="string">".png"</span>,sep=<span class="string">''</span>),wi=<span class="number">900</span>,he=<span class="number">900</span>)</span><br><span class="line"> gseaplot(kk2, geneSetID = i,title= <span class="literal">T</span>)</span><br><span class="line"> dev.off()&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a &lt;- read.table(<span class="string">"list"</span>)</span><br><span class="line"> x &lt;- a[[<span class="number">1</span>]]</span><br><span class="line">eg = bitr(x, fromType=<span class="string">"ENTREZID"</span>, toType=<span class="string">"SYMBOL"</span>, annoDb=<span class="string">"org.Hs.eg.db"</span>)</span><br><span class="line">dim(eg)</span><br><span class="line">write.table(eg,file=<span class="string">""</span>,row.names=<span class="literal">F</span>,quote=<span class="literal">F</span>,sep=<span class="string">'\t'</span>)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom Extra Lines</title>
      <link href="/R/geom-Extra-Lines.html"/>
      <url>/R/geom-Extra-Lines.html</url>
      
        <content type="html"><![CDATA[<h1>geom Extra Lines</h1><p>geom_vline()<br />geom_hline()<br />geom_abline()</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">P1 &lt;- ggplot(mtcars)+ geom_point(aes(mpg, cyl)) +</span><br><span class="line">  geom_vline( xintercept = <span class="number">20</span>) + ggtitle(<span class="string">'vline'</span>) +theme_light()</span><br><span class="line">P2 &lt;- ggplot(mtcars)+ geom_point(aes(mpg, cyl)) +</span><br><span class="line">geom_hline( yintercept = <span class="number">7</span>) + ggtitle(<span class="string">'hline'</span>) +theme_light()</span><br><span class="line">P3 &lt;- ggplot(mtcars, aes(wt, mpg)) + geom_point() + geom_abline(intercept = <span class="number">25</span>, slope = -<span class="number">1</span>) +</span><br><span class="line">  ggtitle(<span class="string">"abline"</span>)+theme_light()</span><br><span class="line"></span><br><span class="line">P3|(P1/P2)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/Nu06nx.png" alt="Nu06nx.png"></p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_bar</title>
      <link href="/R/geom_bar.html"/>
      <url>/R/geom_bar.html</url>
      
        <content type="html"><![CDATA[<h1 id="geom-bar"><a href="#geom-bar" class="headerlink" title="geom_bar"></a>geom_bar</h1><p>Here, we use <code>mtcars</code> as an example</p><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">p1 &lt;- ggplot(mtcars) + ggtitle(<span class="string">"Stat = identity"</span>) +  <span class="comment"># Adding Title</span></span><br><span class="line">  <span class="comment"># Main function for bar plot</span></span><br><span class="line">  geom_bar(aes(cyl,disp, fill=drat), stat=<span class="string">'identity'</span>) +</span><br><span class="line">  <span class="comment"># Adding a Theme</span></span><br><span class="line">  theme_light()+</span><br><span class="line">  <span class="comment"># Adjust the Position Title</span></span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot(mtcars) + ggtitle(<span class="string">"Stat = Summary"</span>) +</span><br><span class="line">  geom_bar(aes(cyl, disp,fill=drat), stat=<span class="string">'summary'</span>) +</span><br><span class="line">  theme_light()+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p1|p2</span><br><span class="line"><span class="comment"># Saving the plot</span></span><br><span class="line">ggsave(<span class="string">"bar.png"</span>,w=<span class="number">5.95</span>, h=<span class="number">2.68</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aQea6O" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/31/aQea6O.md.png" alt="aQea6O.md.png"></a></p><h1 id="State-identity"><a href="#State-identity" class="headerlink" title="State = identity"></a>State = identity</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">p1 &lt;- ggplot(mtcars) +</span><br><span class="line">  geom_bar(aes(cyl, disp,fill=drat), stat=<span class="string">'identity'</span>, position = <span class="string">'fill'</span>) +</span><br><span class="line">  theme_light() + ggtitle(<span class="string">"position = fill"</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot(mtcars) +</span><br><span class="line">  geom_bar(aes(cyl, disp,fill=drat), stat=<span class="string">'identity'</span>, position = <span class="string">'identity'</span>) +</span><br><span class="line">  theme_light() + ggtitle(<span class="string">"position = identity"</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p3 &lt;- ggplot(mtcars) +</span><br><span class="line">  geom_bar(aes(cyl, disp,fill=drat), stat=<span class="string">'identity'</span>, position = <span class="string">'stack'</span>) +</span><br><span class="line">  theme_light() + ggtitle(<span class="string">"position = stack"</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p4&lt;- ggplot(mtcars) +</span><br><span class="line">  geom_bar(aes(cyl, disp,fill=drat), stat=<span class="string">'identity'</span>, position = <span class="string">'dodge'</span>) +</span><br><span class="line">  theme_light() + ggtitle(<span class="string">"position = dodge"</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">(p1|p2)/(p3|p4)</span><br><span class="line">ggsave(<span class="string">"bar2.png"</span>,w=<span class="number">7.46</span>, h=<span class="number">5.68</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aQnfoj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/31/aQnfoj.md.png" alt="aQnfoj.md.png"></a></p><h1 id="State-count"><a href="#State-count" class="headerlink" title="State = count"></a>State = count</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">ggplot(mtcars) +</span><br><span class="line">  geom_bar(aes(cyl, fill=<span class="string">'salmon'</span>)) +</span><br><span class="line">  theme_light()</span><br><span class="line"></span><br><span class="line"><span class="comment"># The same as:</span></span><br><span class="line">ggplot(mtcars) +</span><br><span class="line">  geom_bar(aes(cyl, fill=<span class="string">'salmon'</span>), stat=<span class="string">'count'</span>) +</span><br><span class="line">  theme_light()</span><br><span class="line"></span><br><span class="line">ggsave(<span class="string">"bar3.png"</span>,w=<span class="number">3.45</span>, h=<span class="number">2.76</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aQKh2q" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/31/aQKh2q.md.png" alt="aQKh2q.md.png"></a></p><h1 id="position"><a href="#position" class="headerlink" title="position"></a>position</h1><p>Reference: <a href="https://zhuanlan.zhihu.com/p/27093478" target="_blank" rel="noopener">Dwzb</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line">p1 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">      geom_bar(aes(fill=factor(cyl)),position=<span class="string">"stack"</span>)+</span><br><span class="line">      ggtitle(label=<span class="string">'Stack'</span>)+ <span class="comment"># position = stack (default)</span></span><br><span class="line">      theme_light()</span><br><span class="line">p2 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">      geom_bar(aes(fill=factor(cyl)),position=<span class="string">"stack"</span>)+</span><br><span class="line">      ggtitle(label=<span class="string">'Stack + coord_flip()'</span>) + coord_flip()+ <span class="comment"># Switch axis</span></span><br><span class="line">      theme_light()</span><br><span class="line">p3 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">      geom_bar(aes(fill=factor(cyl)),position=<span class="string">"dodge"</span>)+</span><br><span class="line">      ggtitle(label=<span class="string">'Dodge'</span>)+ <span class="comment"># 并排放置</span></span><br><span class="line">      theme_light()</span><br><span class="line">p4 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">      geom_bar(aes(fill=factor(cyl)),position=<span class="string">"fill"</span>)+</span><br><span class="line">      ggtitle(label=<span class="string">'Fill'</span>)+ <span class="comment"># 填充显示比例</span></span><br><span class="line">      theme_light()</span><br><span class="line"></span><br><span class="line">(p1|p2)/(p3|p4)</span><br><span class="line">ggsave(<span class="string">"bar4.png"</span>, w=<span class="number">6.56</span>, h=<span class="number">4.8</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aQQ10O" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/31/aQQ10O.md.png" alt="aQQ10O.md.png"></a></p><h1 id="polar-axis"><a href="#polar-axis" class="headerlink" title="polar axis"></a>polar axis</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"></span><br><span class="line">p1 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">    geom_bar(aes(fill=factor(cyl)),position=<span class="string">"stack"</span>)+</span><br><span class="line">    ggtitle(label=<span class="string">'X_Stack'</span>) + coord_polar(<span class="string">'x'</span>) + theme_map()+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p2 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">    geom_bar(aes(fill=factor(cyl)),position=<span class="string">"dodge"</span>)+</span><br><span class="line">    ggtitle(label=<span class="string">'X_Dodge'</span>) + coord_polar(<span class="string">'x'</span>) + theme_map()+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p3 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">    geom_bar(aes(fill=factor(cyl)),position=<span class="string">"fill"</span>)+</span><br><span class="line">    ggtitle(label=<span class="string">'X_Fill'</span>) + coord_polar(<span class="string">'x'</span>) + theme_map()+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p11 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">    geom_bar(aes(fill=factor(cyl)),position=<span class="string">"stack"</span>)+</span><br><span class="line">    ggtitle(label=<span class="string">'Y_Stack'</span>) + coord_polar(<span class="string">'y'</span>) + theme_map()+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p22 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">    geom_bar(aes(fill=factor(cyl)),position=<span class="string">"dodge"</span>)+</span><br><span class="line">    ggtitle(label=<span class="string">'Y_Dodge'</span>) + coord_polar(<span class="string">'y'</span>) + theme_map()+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">p33 &lt;- ggplot(mpg,aes(x=class)) +</span><br><span class="line">    geom_bar(aes(fill=factor(cyl)),position=<span class="string">"fill"</span>)+</span><br><span class="line">    ggtitle(label=<span class="string">'Y_Fill'</span>) + coord_polar(<span class="string">'y'</span>) + theme_map()+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">(p1|p11)/(p2|p22)/(p3|p33)</span><br><span class="line">ggsave(<span class="string">"bar_fan.png"</span>, w=<span class="number">7.51</span>, h=<span class="number">9.42</span> )</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aQQvDK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/31/aQQvDK.md.png" alt="aQQvDK.md.png"></a></p><h1 id="Pie-plot"><a href="#Pie-plot" class="headerlink" title="Pie plot"></a>Pie plot</h1><p><strong>Codes</strong>: <a href="https://karobben.github.io/R/geom_pie.html">GitIO</a>/<a href="https://www.yuque.com/liuwenkan/rr/geom_pie" target="_blank" rel="noopener">语雀</a></p><p><a href="https://imgchr.com/i/aQ18Wd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/31/aQ18Wd.md.png" alt="aQ18Wd.png" width=450 /></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Edger</title>
      <link href="/R/edgeR.html"/>
      <url>/R/edgeR.html</url>
      
        <content type="html"><![CDATA[<h1>Edger</h1><h1>Example form Trinity</h1><h2 id="Expression-Differential"><a class="header-anchor" href="#Expression-Differential"></a>Expression Differential</h2><p>Attention:</p><ul><li>Make sure Trinity is installed because this scripts needs few functions from re-packaged scripts.</li><li>If you didn’t install the Trinity, please download <em>heatmap.3.R</em> <em>misc_rnaseq_funcs</em> <em>pairs3.R</em> <em>vioplot2.R</em> from <a href="https://github.com/trinityrnaseq/trinityrnaseq/tree/master/Analysis/DifferentialExpression/R" target="_blank" rel="noopener">Github</a>, or paste them to your codes instead of source them. (I paste this three codes at the end of the page)</li><li>This script is running the differential expression <strong>counts</strong>. So, make sure you are handling an appropriate matrix.</li></ul><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(cluster)</span><br><span class="line"><span class="keyword">library</span>(Biobase)</span><br><span class="line"><span class="keyword">library</span>(qvalue)</span><br><span class="line"><span class="keyword">library</span>(fastcluster)</span><br><span class="line">options(stringsAsFactors = <span class="literal">FALSE</span>)</span><br><span class="line">NO_REUSE = <span class="literal">F</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># try to reuse earlier-loaded data if possible</span></span><br><span class="line"><span class="keyword">if</span> (file.exists(<span class="string">"diffExpr.P1e-5_C2.matrix.RData"</span>) &amp;&amp; ! NO_REUSE) &#123;</span><br><span class="line">    print(<span class="string">'RESTORING DATA FROM EARLIER ANALYSIS'</span>)</span><br><span class="line">    load(<span class="string">"diffExpr.P1e-5_C2.matrix.RData"</span>)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  <span class="comment"># loading Count matrix</span></span><br><span class="line">    print(<span class="string">'Reading matrix file.'</span>)</span><br><span class="line">    primary_data = read.table(<span class="string">"diffExpr.P1e-5_C2.matrix"</span>, header=<span class="literal">T</span>, com=<span class="string">''</span>, row.names=<span class="number">1</span>, check.names=<span class="literal">F</span>, sep=<span class="string">'\t'</span>)</span><br><span class="line">    primary_data = as.matrix(primary_data)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># reading repackaged R function from scripts</span></span><br><span class="line"><span class="comment"># similar like import File/lib.py in python</span></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"/home/ken/Biosoft/trinityrnaseq-Trinity-v2.8.4/Analysis/DifferentialExpression/R/heatmap.3.R"</span>)</span><br><span class="line"><span class="keyword">source</span>(<span class="string">"/home/ken/Biosoft/trinityrnaseq-Trinity-v2.8.4/Analysis/DifferentialExpression/R/misc_rnaseq_funcs.R"</span>)</span><br><span class="line"><span class="keyword">source</span>(<span class="string">"/home/ken/Biosoft/trinityrnaseq-Trinity-v2.8.4/Analysis/DifferentialExpression/R/pairs3.R"</span>)</span><br><span class="line"><span class="keyword">source</span>(<span class="string">"/home/ken/Biosoft/trinityrnaseq-Trinity-v2.8.4/Analysis/DifferentialExpression/R/vioplot2.R"</span>)</span><br><span class="line"></span><br><span class="line">data = primary_data</span><br><span class="line">myheatcol = colorpanel(<span class="number">75</span>, <span class="string">'purple'</span>,<span class="string">'black'</span>,<span class="string">'yellow'</span>)</span><br><span class="line">sample_types = colnames(data)</span><br><span class="line">nsamples = length(sample_types)</span><br><span class="line">sample_colors = rainbow(nsamples)</span><br><span class="line">sample_type_list = list()</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:nsamples) &#123;</span><br><span class="line">    sample_type_list[[sample_types[i]]] = sample_types[i]</span><br><span class="line">&#125;</span><br><span class="line">sample_factoring = colnames(data)</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:nsamples) &#123;</span><br><span class="line">    sample_type = sample_types[i]</span><br><span class="line">    replicates_want = sample_type_list[[sample_type]]</span><br><span class="line">    sample_factoring[ colnames(data) %<span class="keyword">in</span>% replicates_want ] = sample_type</span><br><span class="line">&#125;</span><br><span class="line">initial_matrix = data <span class="comment"># store before doing various data transformations</span></span><br><span class="line">data = log2(data+<span class="number">1</span>)</span><br><span class="line">sample_factoring = colnames(data)</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:nsamples) &#123;</span><br><span class="line">    sample_type = sample_types[i]</span><br><span class="line">    replicates_want = sample_type_list[[sample_type]]</span><br><span class="line">    sample_factoring[ colnames(data) %<span class="keyword">in</span>% replicates_want ] = sample_type</span><br><span class="line">&#125;</span><br><span class="line">sampleAnnotations = matrix(ncol=ncol(data),nrow=nsamples)</span><br><span class="line"><span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:nsamples) &#123;</span><br><span class="line">  sampleAnnotations[i,] = colnames(data) %<span class="keyword">in</span>% sample_type_list[[sample_types[i]]]</span><br><span class="line">&#125;</span><br><span class="line">sampleAnnotations = apply(sampleAnnotations, <span class="number">1</span>:<span class="number">2</span>, <span class="keyword">function</span>(x) as.logical(x))</span><br><span class="line">sampleAnnotations = sample_matrix_to_color_assignments(sampleAnnotations, col=sample_colors)</span><br><span class="line">rownames(sampleAnnotations) = as.vector(sample_types)</span><br><span class="line">colnames(sampleAnnotations) = colnames(data)</span><br><span class="line">data = as.matrix(data) <span class="comment"># convert to matrix</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Centering rows</span></span><br><span class="line">data = t(scale(t(data), scale=<span class="literal">F</span>))</span><br><span class="line"></span><br><span class="line">write.table(data, file=<span class="string">"diffExpr.P1e-5_C2.matrix.log2.centered.dat"</span>, quote=<span class="literal">F</span>, sep=<span class="string">'  '</span>);</span><br><span class="line"><span class="keyword">if</span> (nrow(data) &lt; <span class="number">2</span>) &#123; <span class="keyword">stop</span>(<span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**** Sorry, at least two rows are required for this matrix.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span>);&#125;</span><br><span class="line"><span class="keyword">if</span> (ncol(data) &lt; <span class="number">2</span>) &#123; <span class="keyword">stop</span>(<span class="string">"</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">**** Sorry, at least two columns are required for this matrix.</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">"</span>);&#125;</span><br><span class="line">sample_cor = cor(data, method=<span class="string">'pearson'</span>, use=<span class="string">'pairwise.complete.obs'</span>)</span><br><span class="line">write.table(sample_cor, file=<span class="string">"diffExpr.P1e-5_C2.matrix.log2.centered.sample_cor.dat"</span>, quote=<span class="literal">F</span>, sep=<span class="string">'  '</span>)</span><br><span class="line">sample_dist = dist(t(data), method=<span class="string">'euclidean'</span>)</span><br><span class="line">hc_samples = hclust(sample_dist, method=<span class="string">'complete'</span>)</span><br><span class="line">pdf(<span class="string">"diffExpr.P1e-5_C2.matrix.log2.centered.sample_cor_matrix.pdf"</span>)</span><br><span class="line">sample_cor_for_plot = sample_cor</span><br><span class="line">heatmap.3(sample_cor_for_plot, dendrogram=<span class="string">'both'</span>, Rowv=as.dendrogram(hc_samples), Colv=as.dendrogram(hc_samples), col = myheatcol, scale=<span class="string">'none'</span>, symm=<span class="literal">TRUE</span>, key=<span class="literal">TRUE</span>,density.info=<span class="string">'none'</span>, trace=<span class="string">'none'</span>, symkey=<span class="literal">FALSE</span>, symbreaks=<span class="literal">F</span>, margins=c(<span class="number">10</span>,<span class="number">10</span>), cexCol=<span class="number">1</span>, cexRow=<span class="number">1</span>, cex.main=<span class="number">0.75</span>, main=paste(<span class="string">"sample correlation matrix</span></span><br><span class="line"><span class="string">"</span>, <span class="string">"diffExpr.P1e-5_C2.matrix.log2.centered"</span>) )</span><br><span class="line">dev.off()</span><br><span class="line">gene_cor = <span class="literal">NULL</span></span><br><span class="line">gene_dist = dist(data, method=<span class="string">'euclidean'</span>)</span><br><span class="line"><span class="keyword">if</span> (nrow(data) &lt;= <span class="number">1</span>) &#123; message(<span class="string">'Too few genes to generate heatmap'</span>); quit(status=<span class="number">0</span>); &#125;</span><br><span class="line">hc_genes = hclust(gene_dist, method=<span class="string">'complete'</span>)</span><br><span class="line">heatmap_data = data</span><br><span class="line">pdf(<span class="string">"diffExpr.P1e-5_C2.matrix.log2.centered.genes_vs_samples_heatmap.pdf"</span>)</span><br><span class="line">heatmap.3(heatmap_data, dendrogram=<span class="string">'both'</span>, Rowv=as.dendrogram(hc_genes), Colv=as.dendrogram(hc_samples), col=myheatcol, scale=<span class="string">"none"</span>, density.info=<span class="string">"none"</span>, trace=<span class="string">"none"</span>, key=<span class="literal">TRUE</span>, keysize=<span class="number">1.2</span>, cexCol=<span class="number">1</span>, margins=c(<span class="number">10</span>,<span class="number">10</span>), cex.main=<span class="number">0.75</span>, main=paste(<span class="string">"samples vs. features</span></span><br><span class="line"><span class="string">"</span>, <span class="string">"diffExpr.P1e-5_C2.matrix.log2.centered"</span> ) )</span><br><span class="line">dev.off()</span><br><span class="line"><span class="comment">#save(list=ls(all=TRUE), file="diffExpr.P1e-5_C2.matrix.RData")</span></span><br></pre></td></tr></table></figure></div><h2 id="Test"><a class="header-anchor" href="#Test"></a>Test</h2><h1>edgeR(out of date)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">~/Biosoft/trinityrnaseq-Trinity-v2.8.4/Analysis/DifferentialExpression/run_DE_analysis.pl  --matrix Intest.table  --method edgeR --dispersion <span class="number">0.1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">x &lt;- read.delim(<span class="string">"3.isoforms.results"</span>)</span><br><span class="line">y &lt;- estimateCommonDisp(y)</span><br><span class="line">y &lt;- DGEList(counts=<span class="number">5</span>,group=<span class="number">1</span>)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">y &lt;- estimateTagwiseDisp(y)</span><br><span class="line">y &lt;- estimateCommonDisp(y)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line">rawdata &lt;- read.delim(<span class="string">"3.isoforms.results"</span>, check.names=<span class="literal">FALSE</span>, stringsAsFactors=<span class="literal">FALSE</span>)</span><br><span class="line">y &lt;- DGEList(counts=rawdata[,<span class="number">3</span>:<span class="number">8</span>], genes=rawdata[,<span class="number">1</span>:<span class="number">2</span>])</span><br><span class="line">y$samples$lib.size &lt;- colSums(y$counts)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">Patient &lt;- factor(c(<span class="number">8</span>,<span class="number">8</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">51</span>,<span class="number">51</span>))</span><br><span class="line">Tissue &lt;- factor(c(<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>))</span><br><span class="line">data.frame(Sample=colnames(y),Patient,Tissue)</span><br><span class="line">design &lt;- model.matrix(~Patient+Tissue)</span><br><span class="line">rownames(design) &lt;- colnames(y)</span><br><span class="line">y &lt;- estimateGLMCommonDisp(y, design, verbose=<span class="literal">TRUE</span>)</span><br><span class="line">y &lt;- estimateGLMTrendedDisp(y, design)</span><br><span class="line">y &lt;- estimateGLMTagwiseDisp(y, design)</span><br><span class="line">fit &lt;- glmFit(y, design)</span><br><span class="line">lrt &lt;- glmLRT(fit); topTags(lrt)</span><br><span class="line">topTags(lrt)</span><br><span class="line">write.csv(topTags(lrt)$table, file=<span class="string">"qqq"</span>)</span><br><span class="line"><span class="comment">#############################################</span></span><br><span class="line">��Դ����������ģ�� edgeR�������裺https://www.tanboyu.com/edger-users-guide.html</span><br><span class="line"><span class="comment">#####################################################################################</span></span><br><span class="line"></span><br><span class="line"><span class="comment">####################################################################################</span></span><br><span class="line">��׼��</span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line"></span><br><span class="line">rawdata &lt;- read.delim(<span class="string">"3.isoforms.results"</span>, check.names=<span class="literal">FALSE</span>, stringsAsFactors=<span class="literal">FALSE</span>)</span><br><span class="line">y &lt;- DGEList(counts=rawdata[,<span class="number">2</span>:<span class="number">6</span>], genes=rawdata[,<span class="number">1</span>])</span><br><span class="line">y$samples$lib.size &lt;- colSums(y$counts)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">Patient &lt;- factor(c(<span class="number">8</span>,<span class="number">8</span>,<span class="number">51</span>,<span class="number">51</span>))</span><br><span class="line">Tissue &lt;- factor(c(<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>))</span><br><span class="line">data.frame(Sample=colnames(y),Patient,Tissue)</span><br><span class="line">design &lt;- model.matrix(~Patient+Tissue)</span><br><span class="line">rownames(design) &lt;- colnames(y)</span><br><span class="line">y &lt;- estimateGLMCommonDisp(y, design, verbose=<span class="literal">TRUE</span>)</span><br><span class="line">y &lt;- estimateGLMTrendedDisp(y, design)</span><br><span class="line">y &lt;- estimateGLMTagwiseDisp(y, design)</span><br><span class="line">fit &lt;- glmFit(y, design)</span><br><span class="line">lrt &lt;- glmLRT(fit); topTags(lrt)</span><br><span class="line">topTags(lrt)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#########################################################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line"></span><br><span class="line">rawdata &lt;- read.delim(<span class="string">"3.isoforms.results"</span>, check.names=<span class="literal">FALSE</span>, stringsAsFactors=<span class="literal">FALSE</span>)</span><br><span class="line">y &lt;- DGEList(counts=rawdata[,<span class="number">5</span>:<span class="number">8</span>], genes=rawdata[,<span class="number">1</span>])</span><br><span class="line">y$samples$lib.size &lt;- colSums(y$counts)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">Patient &lt;- factor(c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">51</span>,<span class="number">51</span>))</span><br><span class="line">Tissue &lt;- factor(c(<span class="string">"T"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>))</span><br><span class="line">data.frame(Sample=colnames(y),Patient,Tissue)</span><br><span class="line">design &lt;- model.matrix(~Patient+Tissue)</span><br><span class="line">rownames(design) &lt;- colnames(y)</span><br><span class="line">y &lt;- estimateGLMCommonDisp(y, design, verbose=<span class="literal">TRUE</span>)</span><br><span class="line">y &lt;- estimateGLMTrendedDisp(y, design)</span><br><span class="line">y &lt;- estimateGLMTagwiseDisp(y, design)</span><br><span class="line">fit &lt;- glmFit(y, design)</span><br><span class="line">lrt &lt;- glmLRT(fit); topTags(lrt)</span><br><span class="line">topTags(lrt)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###########################################################</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line"></span><br><span class="line">rawdata &lt;- read.delim(<span class="string">"3.isoforms.results"</span>, check.names=<span class="literal">FALSE</span>, stringsAsFactors=<span class="literal">FALSE</span>)</span><br><span class="line">y &lt;- DGEList(counts=rawdata[,<span class="number">5</span>], genes=rawdata[,<span class="number">1</span>])</span><br><span class="line">y$samples$lib.size &lt;- colSums(y$counts)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">Patient &lt;- factor(c(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">Tissue &lt;- factor(c(<span class="string">"T"</span>,<span class="string">"T"</span>))</span><br><span class="line">data.frame(Sample=colnames(y),Patient,Tissue)</span><br><span class="line">design &lt;- model.matrix(~Patient+Tissue)</span><br><span class="line">rownames(design) &lt;- colnames(y)</span><br><span class="line">y &lt;- estimateGLMCommonDisp(y, design, verbose=<span class="literal">TRUE</span>)</span><br><span class="line">y &lt;- estimateGLMTrendedDisp(y, design)</span><br><span class="line">y &lt;- estimateGLMTagwiseDisp(y, design)</span><br><span class="line">fit &lt;- glmFit(y, design)</span><br><span class="line">lrt &lt;- glmLRT(fit); topTags(lrt)</span><br><span class="line">topTags(lrt)</span><br><span class="line"></span><br><span class="line">------------------</span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line">rawdata &lt;- read.delim(<span class="string">"6.matrix"</span>, check.names=<span class="literal">FALSE</span>, stringsAsFactors=<span class="literal">FALSE</span>)</span><br><span class="line">y &lt;- DGEList(counts=rawdata[,<span class="number">2</span>:<span class="number">7</span>], genes=rawdata[,<span class="number">1</span>])</span><br><span class="line">head(rawdata)</span><br><span class="line">y$samples$lib.size &lt;- colSums(y$counts)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">Patient &lt;- factor(c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>))</span><br><span class="line">Tissue &lt;- factor(c(<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>))</span><br><span class="line">data.frame(Sample=colnames(y),Patient,Tissue)</span><br><span class="line">design &lt;- model.matrix(~Patient+Tissue)</span><br><span class="line">rownames(design) &lt;- colnames(y)</span><br><span class="line">y &lt;- estimateGLMCommonDisp(y, design, verbose=<span class="literal">TRUE</span>)</span><br><span class="line">y &lt;- estimateGLMTrendedDisp(y, design)</span><br><span class="line">y &lt;- estimateGLMTagwiseDisp(y, design)</span><br><span class="line">fit &lt;- glmFit(y, design)</span><br><span class="line">lrt &lt;- glmLRT(fit); topTags(lrt)</span><br><span class="line">topTags(lrt)</span><br><span class="line">write.table(topTags(lrt), file = <span class="string">"6.txt"</span>,append =<span class="literal">FALSE</span>, quote = <span class="literal">TRUE</span>, sep = <span class="string">" "</span>,eol = <span class="string">"\n"</span>, na = <span class="string">"NA"</span>, dec = <span class="string">"."</span>,row.names = <span class="literal">TRUE</span>,col.names = <span class="literal">TRUE</span>, qmethod = c(<span class="string">"escape"</span>, <span class="string">"double"</span>),fileEncoding = <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">-------------------------------</span><br><span class="line">10matrix</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line">rawdata &lt;- read.delim(<span class="string">"Intest.table"</span>, check.names=<span class="literal">FALSE</span>, stringsAsFactors=<span class="literal">FALSE</span>)</span><br><span class="line">y &lt;- DGEList(counts=rawdata[,<span class="number">2</span>:<span class="number">101</span>], genes=rawdata[,<span class="number">1</span>])</span><br><span class="line">head(rawdata)</span><br><span class="line">y$samples$lib.size &lt;- colSums(y$counts)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">Patient &lt;- factor(c(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">8</span>,<span class="number">9</span>,<span class="number">9</span>,<span class="number">10</span>,<span class="number">10</span>,<span class="number">11</span>,<span class="number">11</span>,<span class="number">12</span>,<span class="number">12</span>,<span class="number">13</span>,<span class="number">13</span>,<span class="number">14</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="number">16</span>,<span class="number">16</span>,<span class="number">17</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">18</span>,<span class="number">19</span>,<span class="number">19</span>,<span class="number">20</span>,<span class="number">20</span>,<span class="number">21</span>,<span class="number">21</span>,<span class="number">22</span>,<span class="number">22</span>,<span class="number">23</span>,<span class="number">23</span>,<span class="number">24</span>,<span class="number">24</span>,<span class="number">25</span>,<span class="number">25</span>,<span class="number">26</span>,<span class="number">26</span>,<span class="number">27</span>,<span class="number">27</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">29</span>,<span class="number">30</span>,<span class="number">30</span>,<span class="number">31</span>,<span class="number">31</span>,<span class="number">32</span>,<span class="number">32</span>,<span class="number">33</span>,<span class="number">33</span>,<span class="number">34</span>,<span class="number">34</span>,<span class="number">35</span>,<span class="number">35</span>,<span class="number">36</span>,<span class="number">36</span>,<span class="number">37</span>,<span class="number">37</span>,<span class="number">38</span>,<span class="number">38</span>,<span class="number">39</span>,<span class="number">39</span>,<span class="number">40</span>,<span class="number">40</span>,<span class="number">41</span>,<span class="number">41</span>,<span class="number">42</span>,<span class="number">42</span>,<span class="number">43</span>,<span class="number">43</span>,<span class="number">44</span>,<span class="number">44</span>,<span class="number">45</span>,<span class="number">45</span>,<span class="number">46</span>,<span class="number">46</span>,<span class="number">47</span>,<span class="number">47</span>,<span class="number">48</span>,<span class="number">48</span>,<span class="number">49</span>,<span class="number">49</span>,<span class="number">50</span>,<span class="number">50</span>))</span><br><span class="line">Tissue &lt;- factor(c(<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"N"</span>,<span class="string">"T"</span>))</span><br><span class="line">data.frame(Sample=colnames(y),Patient,Tissue)</span><br><span class="line">design &lt;- model.matrix(~Patient+Tissue)</span><br><span class="line">rownames(design) &lt;- colnames(y)</span><br><span class="line">y &lt;- estimateGLMCommonDisp(y, design, verbose=<span class="literal">TRUE</span>)</span><br><span class="line">y &lt;- estimateGLMTrendedDisp(y, design)</span><br><span class="line">y &lt;- estimateGLMTagwiseDisp(y, design)</span><br><span class="line">fit &lt;- glmFit(y, design)</span><br><span class="line">lrt &lt;- glmLRT(fit); topTags(lrt)</span><br><span class="line">topTags(lrt)</span><br><span class="line">write.table(topTags(lrt), file = <span class="string">"a40.txt"</span>,append =<span class="literal">FALSE</span>, quote = <span class="literal">TRUE</span>, sep = <span class="string">" "</span>,eol = <span class="string">"\n"</span>, na = <span class="string">"NA"</span>, dec = <span class="string">"."</span>,row.names = <span class="literal">TRUE</span>,col.names = <span class="literal">TRUE</span>, qmethod = c(<span class="string">"escape"</span>, <span class="string">"double"</span>),fileEncoding = <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">################################</span></span><br><span class="line">3line</span><br><span class="line"><span class="keyword">source</span>(<span class="string">"http://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"limma"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"edgeR"</span>)</span><br><span class="line">rawdata &lt;- read.delim(<span class="string">"Intest.table"</span>, check.names=<span class="literal">FALSE</span>, stringsAsFactors=<span class="literal">FALSE</span>)</span><br><span class="line">y &lt;- DGEList(counts=rawdata[,<span class="number">2</span>:<span class="number">4</span>], genes=rawdata[,<span class="number">1</span>])</span><br><span class="line">head(rawdata)</span><br><span class="line">y$samples$lib.size &lt;- colSums(y$counts)</span><br><span class="line">y &lt;- calcNormFactors(y)</span><br><span class="line">Patient &lt;- factor(c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>))</span><br><span class="line">Tissue &lt;- factor(c(<span class="string">"N"</span>,<span class="string">"T"</span>,<span class="string">"T2"</span>))</span><br><span class="line">data.frame(Sample=colnames(y),Patient,Tissue)</span><br><span class="line">design &lt;- model.matrix(~Patient+Tissue)</span><br><span class="line">rownames(design) &lt;- colnames(y)</span><br><span class="line">y &lt;- estimateGLMCommonDisp(y, design, verbose=<span class="literal">TRUE</span>)</span><br><span class="line">y &lt;- estimateGLMTrendedDisp(y, design)</span><br><span class="line">y &lt;- estimateGLMTagwiseDisp(y, design)</span><br><span class="line">fit &lt;- glmFit(y, design)</span><br><span class="line">lrt &lt;- glmLRT(fit); topTags(lrt)</span><br><span class="line">topTags(lrt)</span><br><span class="line">write.table(topTags(lrt), file = <span class="string">"a40.txt"</span>,append =<span class="literal">FALSE</span>, quote = <span class="literal">TRUE</span>, sep = <span class="string">" "</span>,eol = <span class="string">"\n"</span>, na = <span class="string">"NA"</span>, dec = <span class="string">"."</span>,row.names = <span class="literal">TRUE</span>,col.names = <span class="literal">TRUE</span>, qmethod = c(<span class="string">"escape"</span>, <span class="string">"double"</span>),fileEncoding = <span class="string">""</span>)</span><br></pre></td></tr></table></figure></div><hr><h1>Attachment</h1><h2 id="heatmap-3-R"><a class="header-anchor" href="#heatmap-3-R"></a>heatmap.3.R</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># From: https://github.com/trinityrnaseq/trinityrnaseq/blob/master/Analysis/DifferentialExpression/R/heatmap.3.R</span></span><br><span class="line"><span class="comment">## pulled from here, and then tweaked slightly: http://www.biostars.org/p/18211/</span></span><br><span class="line"><span class="comment"># CODE</span></span><br><span class="line">heatmap.3 &lt;- <span class="keyword">function</span>(x,</span><br><span class="line">                      Rowv = <span class="literal">TRUE</span>, Colv = <span class="keyword">if</span> (symm) <span class="string">"Rowv"</span> <span class="keyword">else</span> <span class="literal">TRUE</span>,</span><br><span class="line">                      distfun = dist,</span><br><span class="line">                      hclustfun = hclust,</span><br><span class="line">                      dendrogram = c(<span class="string">"both"</span>,<span class="string">"row"</span>, <span class="string">"column"</span>, <span class="string">"none"</span>),</span><br><span class="line">                      symm = <span class="literal">FALSE</span>,</span><br><span class="line">                      scale = c(<span class="string">"none"</span>,<span class="string">"row"</span>, <span class="string">"column"</span>),</span><br><span class="line">                      na.rm = <span class="literal">TRUE</span>,</span><br><span class="line">                      revC = identical(Colv,<span class="string">"Rowv"</span>),</span><br><span class="line">                      add.expr,</span><br><span class="line">                      breaks,</span><br><span class="line">                      symbreaks = max(x &lt; <span class="number">0</span>, na.rm = <span class="literal">TRUE</span>) || scale != <span class="string">"none"</span>,</span><br><span class="line">                      col = <span class="string">"heat.colors"</span>,</span><br><span class="line">                      colsep,</span><br><span class="line">                      rowsep,</span><br><span class="line">                      sepcolor = <span class="string">"white"</span>,</span><br><span class="line">                      sepwidth = c(<span class="number">0.05</span>, <span class="number">0.05</span>),</span><br><span class="line">                      cellnote,</span><br><span class="line">                      notecex = <span class="number">1</span>,</span><br><span class="line">                      notecol = <span class="string">"cyan"</span>,</span><br><span class="line">                      na.color = par(<span class="string">"bg"</span>),</span><br><span class="line">                      trace = c(<span class="string">"none"</span>, <span class="string">"column"</span>,<span class="string">"row"</span>, <span class="string">"both"</span>),</span><br><span class="line">                      tracecol = <span class="string">"cyan"</span>,</span><br><span class="line">                      hline = median(breaks),</span><br><span class="line">                      vline = median(breaks),</span><br><span class="line">                      linecol = tracecol,</span><br><span class="line">                      margins = c(<span class="number">5</span>,<span class="number">5</span>),</span><br><span class="line">                      ColSideColors,</span><br><span class="line">                      RowSideColors,</span><br><span class="line">                      side.height.fraction=<span class="number">0.1</span>,</span><br><span class="line">                      <span class="comment">#cexRow = 0.2 + 1/log10(max(nr,2)),</span></span><br><span class="line">                      <span class="comment">#cexCol = 0.2 + 1/log10(max(nc,2)),</span></span><br><span class="line">        cexRow = <span class="number">0.2</span>,</span><br><span class="line">        cexCol = <span class="number">0.2</span>,                  </span><br><span class="line"></span><br><span class="line">        scaleRangeMin,</span><br><span class="line">        scaleRangeMax,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    cex.main = <span class="number">1</span>,</span><br><span class="line">                      labRow = <span class="literal">NULL</span>,</span><br><span class="line">                      labCol = <span class="literal">NULL</span>,</span><br><span class="line">                      key = <span class="literal">TRUE</span>,</span><br><span class="line">                      keysize = <span class="number">1.5</span>,</span><br><span class="line">                      density.info = c(<span class="string">"none"</span>, <span class="string">"histogram"</span>, <span class="string">"density"</span>),</span><br><span class="line">                      denscol = tracecol,</span><br><span class="line">                      symkey = max(x &lt; <span class="number">0</span>, na.rm = <span class="literal">TRUE</span>) || symbreaks,</span><br><span class="line">                      densadj = <span class="number">0.25</span>,</span><br><span class="line">                      main = <span class="literal">NULL</span>,</span><br><span class="line">                      xlab = <span class="literal">NULL</span>,</span><br><span class="line">                      ylab = <span class="literal">NULL</span>,</span><br><span class="line">                      lmat = <span class="literal">NULL</span>,</span><br><span class="line">                      lhei = <span class="literal">NULL</span>,</span><br><span class="line">                      lwid = <span class="literal">NULL</span>,</span><br><span class="line">                      NumColSideColors = <span class="number">1</span>,</span><br><span class="line">                      NumRowSideColors = <span class="number">1</span>,</span><br><span class="line">                      KeyValueName=<span class="string">"Value"</span>,<span class="keyword">...</span>)&#123;</span><br><span class="line"></span><br><span class="line">    invalid &lt;- <span class="keyword">function</span> (x) &#123;</span><br><span class="line">      <span class="keyword">if</span> (missing(x) || is.null(x) || length(x) == <span class="number">0</span>)</span><br><span class="line">          <span class="keyword">return</span>(<span class="literal">TRUE</span>)</span><br><span class="line">      <span class="keyword">if</span> (is.list(x))</span><br><span class="line">          <span class="keyword">return</span>(all(sapply(x, invalid)))</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">if</span> (is.vector(x))</span><br><span class="line">          <span class="keyword">return</span>(all(is.na(x)))</span><br><span class="line">      <span class="keyword">else</span> <span class="keyword">return</span>(<span class="literal">FALSE</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    x &lt;- as.matrix(x)</span><br><span class="line">    scale01 &lt;- <span class="keyword">function</span>(x, low = min(x), high = max(x)) &#123;</span><br><span class="line">        x &lt;- (x - low)/(high - low)</span><br><span class="line">        x</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    retval &lt;- list()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    scale &lt;- <span class="keyword">if</span> (symm &amp;&amp; missing(scale))</span><br><span class="line">        <span class="string">"none"</span></span><br><span class="line">    <span class="keyword">else</span> match.arg(scale)</span><br><span class="line"></span><br><span class="line">    dendrogram &lt;- match.arg(dendrogram)</span><br><span class="line"></span><br><span class="line">    trace &lt;- match.arg(trace)</span><br><span class="line"></span><br><span class="line">    density.info &lt;- match.arg(density.info)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (length(col) == <span class="number">1</span> &amp;&amp; is.character(col))</span><br><span class="line">        col &lt;- get(col, mode = <span class="string">"function"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!missing(breaks) &amp;&amp; (scale != <span class="string">"none"</span>))</span><br><span class="line">        <span class="keyword">warning</span>(<span class="string">"Using scale=\"row\" or scale=\"column\" when breaks are"</span>,</span><br><span class="line">            <span class="string">"specified can produce unpredictable results."</span>, <span class="string">"Please consider using only one or the other."</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (is.null(Rowv) || is.na(Rowv))</span><br><span class="line">        Rowv &lt;- <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (is.null(Colv) || is.na(Colv))</span><br><span class="line">        Colv &lt;- <span class="literal">FALSE</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (Colv == <span class="string">"Rowv"</span> &amp;&amp; !isTRUE(Rowv))</span><br><span class="line">        Colv &lt;- <span class="literal">FALSE</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (length(di &lt;- dim(x)) != <span class="number">2</span> || !is.numeric(x))</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"`x' must be a numeric matrix"</span>)</span><br><span class="line"></span><br><span class="line">    nr &lt;- di[<span class="number">1</span>]</span><br><span class="line">    nc &lt;- di[<span class="number">2</span>]</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (nr &lt;= <span class="number">1</span> || nc &lt;= <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"`x' must have at least 2 rows and 2 columns"</span>)</span><br><span class="line">    <span class="comment">#print(paste("nr:", nr, "nc:", nc, "cexCol:", cexCol, "cexRow:", cexRow))</span></span><br><span class="line">    <span class="comment">#stop("debug")</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!is.numeric(margins) || length(margins) != <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"`margins' must be a numeric vector of length 2"</span>)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (missing(cellnote))</span><br><span class="line">        cellnote &lt;- matrix(<span class="string">""</span>, ncol = ncol(x), nrow = nrow(x))</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!inherits(Rowv, <span class="string">"dendrogram"</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (((!isTRUE(Rowv)) || (is.null(Rowv))) &amp;&amp; (dendrogram %<span class="keyword">in</span>% c(<span class="string">"both"</span>, <span class="string">"row"</span>))) &#123;</span><br><span class="line">            <span class="keyword">if</span> (is.logical(Colv) &amp;&amp; (Colv))</span><br><span class="line">                dendrogram &lt;- <span class="string">"column"</span></span><br><span class="line">            <span class="keyword">else</span> dedrogram &lt;- <span class="string">"none"</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">warning</span>(<span class="string">"Discrepancy: Rowv is FALSE, while dendrogram is `"</span>,</span><br><span class="line">                dendrogram, <span class="string">"'. Omitting row dendogram."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!inherits(Colv, <span class="string">"dendrogram"</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (((!isTRUE(Colv)) || (is.null(Colv))) &amp;&amp; (dendrogram %<span class="keyword">in</span>% c(<span class="string">"both"</span>, <span class="string">"column"</span>))) &#123;</span><br><span class="line">            <span class="keyword">if</span> (is.logical(Rowv) &amp;&amp; (Rowv))</span><br><span class="line">                dendrogram &lt;- <span class="string">"row"</span></span><br><span class="line">            <span class="keyword">else</span> dendrogram &lt;- <span class="string">"none"</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">warning</span>(<span class="string">"Discrepancy: Colv is FALSE, while dendrogram is `"</span>,</span><br><span class="line">                dendrogram, <span class="string">"'. Omitting column dendogram."</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (inherits(Rowv, <span class="string">"dendrogram"</span>)) &#123;</span><br><span class="line">        ddr &lt;- Rowv</span><br><span class="line">        rowInd &lt;- order.dendrogram(ddr)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (is.integer(Rowv)) &#123;</span><br><span class="line">        hcr &lt;- hclustfun(distfun(x))</span><br><span class="line">        ddr &lt;- as.dendrogram(hcr)</span><br><span class="line">        ddr &lt;- reorder(ddr, Rowv)</span><br><span class="line">        rowInd &lt;- order.dendrogram(ddr)</span><br><span class="line">        <span class="keyword">if</span> (nr != length(rowInd))</span><br><span class="line">            <span class="keyword">stop</span>(<span class="string">"row dendrogram ordering gave index of wrong length"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (isTRUE(Rowv)) &#123;</span><br><span class="line">        Rowv &lt;- rowMeans(x, na.rm = na.rm)</span><br><span class="line">        hcr &lt;- hclustfun(distfun(x))</span><br><span class="line">        ddr &lt;- as.dendrogram(hcr)</span><br><span class="line">        ddr &lt;- reorder(ddr, Rowv)</span><br><span class="line">        rowInd &lt;- order.dendrogram(ddr)</span><br><span class="line">        <span class="keyword">if</span> (nr != length(rowInd))</span><br><span class="line">            <span class="keyword">stop</span>(<span class="string">"row dendrogram ordering gave index of wrong length"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        rowInd &lt;- nr:<span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">   <span class="keyword">if</span> (inherits(Colv, <span class="string">"dendrogram"</span>)) &#123;</span><br><span class="line">        ddc &lt;- Colv</span><br><span class="line">        colInd &lt;- order.dendrogram(ddc)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (identical(Colv, <span class="string">"Rowv"</span>)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (nr != nc)</span><br><span class="line">            <span class="keyword">stop</span>(<span class="string">"Colv = \"Rowv\" but nrow(x) != ncol(x)"</span>)</span><br><span class="line">        <span class="keyword">if</span> (exists(<span class="string">"ddr"</span>)) &#123;</span><br><span class="line">            ddc &lt;- ddr</span><br><span class="line">            colInd &lt;- order.dendrogram(ddc)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> colInd &lt;- rowInd</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (is.integer(Colv)) &#123;</span><br><span class="line">        hcc &lt;- hclustfun(distfun(<span class="keyword">if</span> (symm)</span><br><span class="line">            x</span><br><span class="line">        <span class="keyword">else</span> t(x)))</span><br><span class="line">        ddc &lt;- as.dendrogram(hcc)</span><br><span class="line">        ddc &lt;- reorder(ddc, Colv)</span><br><span class="line">        colInd &lt;- order.dendrogram(ddc)</span><br><span class="line">        <span class="keyword">if</span> (nc != length(colInd))</span><br><span class="line">            <span class="keyword">stop</span>(<span class="string">"column dendrogram ordering gave index of wrong length"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (isTRUE(Colv)) &#123;</span><br><span class="line">        Colv &lt;- colMeans(x, na.rm = na.rm)</span><br><span class="line">        hcc &lt;- hclustfun(distfun(<span class="keyword">if</span> (symm)</span><br><span class="line">            x</span><br><span class="line">        <span class="keyword">else</span> t(x)))</span><br><span class="line">        ddc &lt;- as.dendrogram(hcc)</span><br><span class="line">        ddc &lt;- reorder(ddc, Colv)</span><br><span class="line">        colInd &lt;- order.dendrogram(ddc)</span><br><span class="line">        <span class="keyword">if</span> (nc != length(colInd))</span><br><span class="line">            <span class="keyword">stop</span>(<span class="string">"column dendrogram ordering gave index of wrong length"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        colInd &lt;- <span class="number">1</span>:nc</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    retval$rowInd &lt;- rowInd</span><br><span class="line">    retval$colInd &lt;- colInd</span><br><span class="line">    retval$call &lt;- match.call()</span><br><span class="line"></span><br><span class="line">    x &lt;- x[rowInd, colInd]  <span class="comment"># rearrange matrix according to dendrograms</span></span><br><span class="line">    x.unscaled &lt;- x</span><br><span class="line"></span><br><span class="line">    cellnote &lt;- cellnote[rowInd, colInd]  <span class="comment"># also rearrange the cellnotes</span></span><br><span class="line"></span><br><span class="line">    <span class="comment"># get labels</span></span><br><span class="line">    <span class="keyword">if</span> (is.null(labRow))</span><br><span class="line">        labRow &lt;- <span class="keyword">if</span> (is.null(rownames(x)))</span><br><span class="line">            (<span class="number">1</span>:nr)[rowInd]</span><br><span class="line">        <span class="keyword">else</span> rownames(x)</span><br><span class="line">    <span class="keyword">else</span> labRow &lt;- labRow[rowInd]</span><br><span class="line">    <span class="keyword">if</span> (is.null(labCol))</span><br><span class="line">        labCol &lt;- <span class="keyword">if</span> (is.null(colnames(x)))</span><br><span class="line">            (<span class="number">1</span>:nc)[colInd]</span><br><span class="line">        <span class="keyword">else</span> colnames(x)</span><br><span class="line">    <span class="keyword">else</span> labCol &lt;- labCol[colInd]</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">## do scaling of matrix according to Z-scores</span></span><br><span class="line">    <span class="keyword">if</span> (scale == <span class="string">"row"</span>) &#123;</span><br><span class="line">        retval$rowMeans &lt;- rm &lt;- rowMeans(x, na.rm = na.rm)</span><br><span class="line">        x &lt;- sweep(x, <span class="number">1</span>, rm)</span><br><span class="line">        retval$rowSDs &lt;- sx &lt;- apply(x, <span class="number">1</span>, sd, na.rm = na.rm)</span><br><span class="line">        x &lt;- sweep(x, <span class="number">1</span>, sx, <span class="string">"/"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (scale == <span class="string">"column"</span>) &#123;</span><br><span class="line">        retval$colMeans &lt;- rm &lt;- colMeans(x, na.rm = na.rm)</span><br><span class="line">        x &lt;- sweep(x, <span class="number">2</span>, rm)</span><br><span class="line">        retval$colSDs &lt;- sx &lt;- apply(x, <span class="number">2</span>, sd, na.rm = na.rm)</span><br><span class="line">        x &lt;- sweep(x, <span class="number">2</span>, sx, <span class="string">"/"</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># number of breaks</span></span><br><span class="line">    <span class="keyword">if</span> (missing(breaks) || is.null(breaks) || length(breaks) &lt; <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (missing(col) || is.function(col))</span><br><span class="line">            breaks &lt;- <span class="number">16</span></span><br><span class="line">        <span class="keyword">else</span> breaks &lt;- length(col) + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># set breakpoints</span></span><br><span class="line">    <span class="keyword">if</span> (length(breaks) == <span class="number">1</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (missing(scaleRangeMin))</span><br><span class="line">            scaleRangeMin = min(x, na.rm=na.rm)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (missing(scaleRangeMax))</span><br><span class="line">            scaleRangeMax = max(x, na.rm=na.rm)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!symbreaks) &#123;</span><br><span class="line">            breaks &lt;- seq(scaleRangeMin, scaleRangeMax, length=breaks);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">#extreme &lt;- max(abs(x), na.rm = TRUE)</span></span><br><span class="line">            extreme = max(abs(c(scaleRangeMin,scaleRangeMax)), na.rm=na.rm)</span><br><span class="line">            breaks &lt;- seq(-extreme, extreme, length = breaks)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    nbr &lt;- length(breaks)</span><br><span class="line">    ncol &lt;- length(breaks) - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (class(col) == <span class="string">"function"</span>)</span><br><span class="line">        col &lt;- col(ncol)</span><br><span class="line"></span><br><span class="line">    min.breaks &lt;- min(breaks)</span><br><span class="line">    max.breaks &lt;- max(breaks)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># adjust for out-of-range given break settings</span></span><br><span class="line">    x[x &lt; min.breaks] &lt;- min.breaks</span><br><span class="line">    x[x &gt; max.breaks] &lt;- max.breaks</span><br><span class="line"></span><br><span class="line">    <span class="comment"># layout height</span></span><br><span class="line">    <span class="keyword">if</span> (missing(lhei) || is.null(lhei))</span><br><span class="line">        lhei &lt;- c(keysize, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># layout width</span></span><br><span class="line">    <span class="keyword">if</span> (missing(lwid) || is.null(lwid))</span><br><span class="line">        lwid &lt;- c(keysize, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">    <span class="comment"># define the layout</span></span><br><span class="line">    <span class="keyword">if</span> (missing(lmat) || is.null(lmat)) &#123;</span><br><span class="line">        lmat &lt;- rbind(<span class="number">4</span>:<span class="number">3</span>, <span class="number">2</span>:<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!missing(ColSideColors)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!is.character(ColSideColors) || ncol(ColSideColors) != nc)</span><br><span class="line">                <span class="keyword">stop</span>(<span class="string">"'ColSideColors' must be a matrix of ncol(x) "</span>, nc, <span class="string">" columns"</span>)</span><br><span class="line">            lmat &lt;- rbind(lmat[<span class="number">1</span>, ] + <span class="number">1</span>, c(<span class="literal">NA</span>, <span class="number">1</span>), lmat[<span class="number">2</span>, ] + <span class="number">1</span>)</span><br><span class="line">            <span class="comment">#lhei=c(lhei[1], side.height.fraction*NumColSideColors, lhei[2])</span></span><br><span class="line">            side_height = min(side.height.fraction*nrow(ColSideColors), <span class="number">1</span>);</span><br><span class="line">            lhei=c(lhei[<span class="number">1</span>], side_height, lhei[<span class="number">2</span>])</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!missing(RowSideColors)) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!is.character(RowSideColors) || nrow(RowSideColors) != nr)</span><br><span class="line">                <span class="keyword">stop</span>(<span class="string">"'RowSideColors' must be a matrix of nrow(x) "</span>, nr, <span class="string">" rows.  It currently has "</span>, nrow(RowSideColors), <span class="string">" rows."</span>)</span><br><span class="line">            lmat &lt;- cbind(lmat[, <span class="number">1</span>] + <span class="number">1</span>, c(rep(<span class="literal">NA</span>, nrow(lmat) - <span class="number">1</span>), <span class="number">1</span>), lmat[,<span class="number">2</span>] + <span class="number">1</span>)</span><br><span class="line">            <span class="comment">#lwid &lt;- c(lwid[1], side.height.fraction*NumRowSideColors, lwid[2])</span></span><br><span class="line">            side_width = min(side.height.fraction*ncol(RowSideColors), <span class="number">1</span>);</span><br><span class="line">      lwid &lt;- c(lwid[<span class="number">1</span>], side_width, lwid[<span class="number">2</span>])</span><br><span class="line">        &#125;</span><br><span class="line">        lmat[is.na(lmat)] &lt;- <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (length(lhei) != nrow(lmat))</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"lhei must have length = nrow(lmat) = "</span>, nrow(lmat))</span><br><span class="line">    <span class="keyword">if</span> (length(lwid) != ncol(lmat))</span><br><span class="line">        <span class="keyword">stop</span>(<span class="string">"lwid must have length = ncol(lmat) ="</span>, ncol(lmat))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  op &lt;- par(no.readonly = <span class="literal">TRUE</span>)</span><br><span class="line">    on.exit(par(op))</span><br><span class="line"></span><br><span class="line">    layout(lmat, widths = lwid, heights = lhei, respect = <span class="literal">FALSE</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">###########################################</span></span><br><span class="line">  <span class="comment">## Draw the colorbars for the annotations:</span></span><br><span class="line">  <span class="comment">###########################################</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!missing(RowSideColors)) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!is.matrix(RowSideColors))&#123;</span><br><span class="line">                par(mar = c(margins[<span class="number">1</span>], <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>))</span><br><span class="line">                image(rbind(<span class="number">1</span>:nr), col = RowSideColors[rowInd], axes = <span class="literal">FALSE</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            par(mar = c(margins[<span class="number">1</span>], <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.5</span>))</span><br><span class="line">            rsc = t(RowSideColors[rowInd, , drop=<span class="literal">F</span>])</span><br><span class="line">            rsc.colors = matrix()</span><br><span class="line">            rsc.names = names(table(rsc))</span><br><span class="line">            rsc.i = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> (rsc.name <span class="keyword">in</span> rsc.names) &#123;</span><br><span class="line">                rsc.colors[rsc.i] = rsc.name</span><br><span class="line">                rsc[rsc == rsc.name] = rsc.i</span><br><span class="line">                rsc.i = rsc.i + <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment"># print(rsc)</span></span><br><span class="line">            rsc = matrix(as.numeric(rsc), nrow = dim(rsc)[<span class="number">1</span>])</span><br><span class="line">            <span class="comment">#print("RSC: ", rsc)</span></span><br><span class="line">            <span class="comment">#print(rsc.colors)    </span></span><br><span class="line">            image(<span class="number">1</span>:nrow(rsc), <span class="number">1</span>:ncol(rsc), rsc, col = as.vector(rsc.colors), axes = <span class="literal">FALSE</span>, xlab=<span class="string">""</span>, ylab=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment"># add labels</span></span><br><span class="line">            <span class="keyword">if</span> (length(colnames(RowSideColors)) &gt; <span class="number">0</span>) &#123;  </span><br><span class="line">                <span class="comment">#axis(1, 0:(dim(rsc)[2] - 1)/(dim(rsc)[2] - 1), rownames(RowSideColors), las = 2, tick = FALSE)</span></span><br><span class="line">        <span class="comment">#axis(1, 0:(nrow(rsc)-1), colnames(RowSideColors), las = 2, tick = T) # ncol because transposed</span></span><br><span class="line">              axis(<span class="number">1</span>, <span class="number">1</span>:ncol(RowSideColors), labels=colnames(RowSideColors), las=<span class="number">2</span>, cex.axis=<span class="number">0.5</span>, tick=<span class="literal">F</span>, xlab=<span class="string">""</span>, ylab=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">      &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!missing(ColSideColors)) &#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!is.matrix(ColSideColors))&#123;</span><br><span class="line">            par(mar = c(<span class="number">0.5</span>, <span class="number">0</span>, <span class="number">0</span>, margins[<span class="number">2</span>]))</span><br><span class="line">            image(cbind(<span class="number">1</span>:nc), col = ColSideColors[colInd], axes = <span class="literal">FALSE</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            par(mar = c(<span class="number">0.5</span>, <span class="number">0</span>, <span class="number">0</span>, margins[<span class="number">2</span>]))</span><br><span class="line">            csc = ColSideColors[, colInd, drop=<span class="literal">F</span>]</span><br><span class="line">            csc.colors = matrix()</span><br><span class="line">            csc.names = names(table(csc))</span><br><span class="line">            csc.i = <span class="number">1</span></span><br><span class="line">            <span class="keyword">for</span> (csc.name <span class="keyword">in</span> csc.names) &#123;</span><br><span class="line">                csc.colors[csc.i] = csc.name</span><br><span class="line">                csc[csc == csc.name] = csc.i</span><br><span class="line">                csc.i = csc.i + <span class="number">1</span></span><br><span class="line">            &#125;</span><br><span class="line">            csc = matrix(as.numeric(csc), nrow = dim(csc)[<span class="number">1</span>])</span><br><span class="line">            <span class="comment">#print(csc)</span></span><br><span class="line">            image(<span class="number">1</span>:nrow(t(csc)), <span class="number">1</span>:ncol(t(csc)), t(csc), col = as.vector(csc.colors), axes = <span class="literal">FALSE</span>, xlab=<span class="string">""</span>, ylab=<span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">      <span class="comment"># add labels</span></span><br><span class="line">            <span class="keyword">if</span> (length(rownames(ColSideColors)) &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="comment">#axis(2, 0:(dim(csc)[2] - 1)/max(1,(dim(csc)[2] - 1)), colnames(ColSideColors), las = 2, tick = FALSE)</span></span><br><span class="line">        axis(<span class="number">2</span>, <span class="number">1</span>:(nrow(ColSideColors)), labels=rownames(ColSideColors), las = <span class="number">2</span>, tick = <span class="literal">FALSE</span>, cex.axis=<span class="number">0.5</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    par(mar = c(margins[<span class="number">1</span>], <span class="number">0</span>, <span class="number">0</span>, margins[<span class="number">2</span>]))</span><br><span class="line">    x &lt;- t(x)</span><br><span class="line">    cellnote &lt;- t(cellnote)</span><br><span class="line">    <span class="keyword">if</span> (revC) &#123;</span><br><span class="line">        iy &lt;- nr:<span class="number">1</span></span><br><span class="line">        <span class="keyword">if</span> (exists(<span class="string">"ddr"</span>))</span><br><span class="line">            ddr &lt;- rev(ddr)</span><br><span class="line">        x &lt;- x[, iy]</span><br><span class="line">        cellnote &lt;- cellnote[, iy]</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> iy &lt;- <span class="number">1</span>:nr</span><br><span class="line"></span><br><span class="line">  <span class="comment"># draw the central heatmap</span></span><br><span class="line">  image(<span class="number">1</span>:nc, <span class="number">1</span>:nr, x, xlim = <span class="number">0.5</span> + c(<span class="number">0</span>, nc), ylim = <span class="number">0.5</span> + c(<span class="number">0</span>, nr), axes = <span class="literal">FALSE</span>, xlab = <span class="string">""</span>, ylab = <span class="string">""</span>, col = col, breaks = breaks, <span class="keyword">...</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># store the matrix drawn</span></span><br><span class="line">  retval$carpet &lt;- x</span><br><span class="line"></span><br><span class="line">  <span class="comment"># store the dendrograms</span></span><br><span class="line">  <span class="keyword">if</span> (exists(<span class="string">"ddr"</span>))</span><br><span class="line">        retval$rowDendrogram &lt;- ddr</span><br><span class="line">    <span class="keyword">if</span> (exists(<span class="string">"ddc"</span>))</span><br><span class="line">        retval$colDendrogram &lt;- ddc</span><br><span class="line"></span><br><span class="line">  <span class="comment"># store the breaks</span></span><br><span class="line">  retval$breaks &lt;- breaks</span><br><span class="line"></span><br><span class="line">  <span class="comment"># store the colormap used</span></span><br><span class="line">  retval$col &lt;- col</span><br><span class="line"></span><br><span class="line">  <span class="comment"># specially color in the na values</span></span><br><span class="line">    <span class="keyword">if</span> (!invalid(na.color) &amp; any(is.na(x))) &#123; <span class="comment"># load library(gplots)</span></span><br><span class="line">        mmat &lt;- ifelse(is.na(x), <span class="number">1</span>, <span class="literal">NA</span>)</span><br><span class="line">        image(<span class="number">1</span>:nc, <span class="number">1</span>:nr, mmat, axes = <span class="literal">FALSE</span>, xlab = <span class="string">""</span>, ylab = <span class="string">""</span>, col = na.color, add = <span class="literal">TRUE</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># X-axis column labels</span></span><br><span class="line">    axis(<span class="number">1</span>, <span class="number">1</span>:nc, labels = labCol, las = <span class="number">2</span>, line = -<span class="number">0.5</span>, tick = <span class="number">0</span>, cex.axis = cexCol)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># X-axis title</span></span><br><span class="line">    <span class="keyword">if</span> (!is.null(xlab))</span><br><span class="line">        mtext(xlab, side = <span class="number">1</span>, line = margins[<span class="number">1</span>] - <span class="number">1.25</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Y-axis row labeling</span></span><br><span class="line">    axis(<span class="number">4</span>, iy, labels = labRow, las = <span class="number">2</span>, line = -<span class="number">0.5</span>, tick = <span class="number">0</span>,</span><br><span class="line">        cex.axis = cexRow)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># Y-axis title</span></span><br><span class="line">    <span class="keyword">if</span> (!is.null(ylab))</span><br><span class="line">        mtext(ylab, side = <span class="number">4</span>, line = margins[<span class="number">2</span>] - <span class="number">1.25</span>)</span><br><span class="line"></span><br><span class="line">     <span class="keyword">if</span> (!missing(add.expr))</span><br><span class="line">        eval(substitute(add.expr))</span><br><span class="line">    <span class="keyword">if</span> (!missing(colsep))</span><br><span class="line">        <span class="keyword">for</span> (csep <span class="keyword">in</span> colsep) rect(xleft = csep + <span class="number">0.5</span>, ybottom = rep(<span class="number">0</span>, length(csep)), xright = csep + <span class="number">0.5</span> + sepwidth[<span class="number">1</span>], ytop = rep(ncol(x) + <span class="number">1</span>, csep), lty = <span class="number">1</span>, lwd = <span class="number">1</span>, col = sepcolor, border = sepcolor)</span><br><span class="line">    <span class="keyword">if</span> (!missing(rowsep))</span><br><span class="line">        <span class="keyword">for</span> (rsep <span class="keyword">in</span> rowsep) rect(xleft = <span class="number">0</span>, ybottom = (ncol(x) + <span class="number">1</span> - rsep) - <span class="number">0.5</span>, xright = nrow(x) + <span class="number">1</span>, ytop = (ncol(x) + <span class="number">1</span> - rsep) - <span class="number">0.5</span> - sepwidth[<span class="number">2</span>], lty = <span class="number">1</span>, lwd = <span class="number">1</span>, col = sepcolor, border = sepcolor)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  min.scale &lt;- min(breaks)</span><br><span class="line">    max.scale &lt;- max(breaks)</span><br><span class="line">    x.scaled &lt;- scale01(t(x), min.scale, max.scale)</span><br><span class="line"></span><br><span class="line">  <span class="comment"># column trace</span></span><br><span class="line">  <span class="keyword">if</span> (trace %<span class="keyword">in</span>% c(<span class="string">"both"</span>, <span class="string">"column"</span>)) &#123;</span><br><span class="line">        retval$vline &lt;- vline</span><br><span class="line">        vline.vals &lt;- scale01(vline, min.scale, max.scale)</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> colInd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!is.null(vline)) &#123;</span><br><span class="line">                abline(v = i - <span class="number">0.5</span> + vline.vals, col = linecol, lty = <span class="number">2</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            xv &lt;- rep(i, nrow(x.scaled)) + x.scaled[, i] - <span class="number">0.5</span></span><br><span class="line">            xv &lt;- c(xv[<span class="number">1</span>], xv)</span><br><span class="line">            yv &lt;- <span class="number">1</span>:length(xv) - <span class="number">0.5</span></span><br><span class="line">            lines(x = xv, y = yv, lwd = <span class="number">1</span>, col = tracecol, type = <span class="string">"s"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># row trace</span></span><br><span class="line">    <span class="keyword">if</span> (trace %<span class="keyword">in</span>% c(<span class="string">"both"</span>, <span class="string">"row"</span>)) &#123;</span><br><span class="line">        retval$hline &lt;- hline</span><br><span class="line">        hline.vals &lt;- scale01(hline, min.scale, max.scale)</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> rowInd) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!is.null(hline)) &#123;</span><br><span class="line">                abline(h = i + hline, col = linecol, lty = <span class="number">2</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            yv &lt;- rep(i, ncol(x.scaled)) + x.scaled[i, ] - <span class="number">0.5</span></span><br><span class="line">            yv &lt;- rev(c(yv[<span class="number">1</span>], yv))</span><br><span class="line">            xv &lt;- length(yv):<span class="number">1</span> - <span class="number">0.5</span></span><br><span class="line">            lines(x = xv, y = yv, lwd = <span class="number">1</span>, col = tracecol, type = <span class="string">"s"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment"># add cell labels</span></span><br><span class="line">    <span class="keyword">if</span> (!missing(cellnote))</span><br><span class="line">        text(x = c(row(cellnote)), y = c(col(cellnote)), labels = c(cellnote), col = notecol, cex = notecex)</span><br><span class="line"></span><br><span class="line">  <span class="comment">###########################</span></span><br><span class="line">  <span class="comment">## Plot the row dendrogram</span></span><br><span class="line">  <span class="comment">###########################</span></span><br><span class="line"></span><br><span class="line">    par(mar = c(margins[<span class="number">1</span>], <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">    <span class="keyword">if</span> (dendrogram %<span class="keyword">in</span>% c(<span class="string">"both"</span>, <span class="string">"row"</span>)) &#123;</span><br><span class="line">        plot(ddr, horiz = <span class="literal">TRUE</span>, axes = <span class="literal">FALSE</span>, yaxs = <span class="string">"i"</span>, leaflab = <span class="string">"none"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> plot.new()</span><br><span class="line"></span><br><span class="line">  <span class="comment">#############################</span></span><br><span class="line">  <span class="comment">## Plot the column dendrogram</span></span><br><span class="line">  <span class="comment">#############################</span></span><br><span class="line"></span><br><span class="line">    par(mar = c(<span class="number">0</span>, <span class="number">0</span>, <span class="keyword">if</span> (!is.null(main)) <span class="number">5</span> <span class="keyword">else</span> <span class="number">0</span>, margins[<span class="number">2</span>]))</span><br><span class="line">    <span class="keyword">if</span> (dendrogram %<span class="keyword">in</span>% c(<span class="string">"both"</span>, <span class="string">"column"</span>)) &#123;</span><br><span class="line">        plot(ddc, axes = <span class="literal">FALSE</span>, xaxs = <span class="string">"i"</span>, leaflab = <span class="string">"none"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> plot.new()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (!is.null(main))</span><br><span class="line">        title(main, cex.main=cex.main) <span class="comment">#cex.main = 1.5 * op[["cex.main"]])</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  <span class="comment">############################</span></span><br><span class="line">  <span class="comment">## Add the Color Chart</span></span><br><span class="line">  <span class="comment">############################</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (key) &#123;</span><br><span class="line">        par(mar = c(<span class="number">5</span>, <span class="number">4</span>, <span class="number">2</span>, <span class="number">1</span>), cex = <span class="number">0.75</span>)</span><br><span class="line">        tmpbreaks &lt;- breaks</span><br><span class="line">        <span class="keyword">if</span> (symkey) &#123;</span><br><span class="line">            max.raw &lt;- max(abs(c(x, breaks)), na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">            min.raw &lt;- -max.raw</span><br><span class="line">            tmpbreaks[<span class="number">1</span>] &lt;- -max(abs(x), na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">            tmpbreaks[length(tmpbreaks)] &lt;- max(abs(x), na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> &#123;</span><br><span class="line">            min.raw &lt;- min(c(x,breaks), na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">            max.raw &lt;- max(c(x,breaks), na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        message(<span class="string">'for plotting:: min.raw: '</span>, min.raw, <span class="string">' max.raw: '</span>, max.raw);</span><br><span class="line"></span><br><span class="line">        z &lt;- seq(min.raw, max.raw, length = length(col))</span><br><span class="line">        image(z = matrix(z, ncol = <span class="number">1</span>), col = col, breaks = tmpbreaks,</span><br><span class="line">            xaxt = <span class="string">"n"</span>, yaxt = <span class="string">"n"</span>)</span><br><span class="line">        par(usr = c(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">        lv &lt;- pretty(breaks)</span><br><span class="line">        xv &lt;- scale01(as.numeric(lv), min.raw, max.raw)</span><br><span class="line">        axis(<span class="number">1</span>, at = xv, labels = lv)</span><br><span class="line">        <span class="keyword">if</span> (scale == <span class="string">"row"</span>)</span><br><span class="line">            mtext(side = <span class="number">1</span>, <span class="string">"Row Z-Score"</span>, line = <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (scale == <span class="string">"column"</span>)</span><br><span class="line">            mtext(side = <span class="number">1</span>, <span class="string">"Column Z-Score"</span>, line = <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">else</span> mtext(side = <span class="number">1</span>, KeyValueName, line = <span class="number">2</span>)</span><br><span class="line">        <span class="keyword">if</span> (density.info == <span class="string">"density"</span>) &#123;</span><br><span class="line">            dens &lt;- density(x, adjust = densadj, na.rm = <span class="literal">TRUE</span>)</span><br><span class="line">            omit &lt;- dens$x &lt; min(breaks) | dens$x &gt; max(breaks)</span><br><span class="line">            dens$x &lt;- dens$x[-omit]</span><br><span class="line">            dens$y &lt;- dens$y[-omit]</span><br><span class="line">            dens$x &lt;- scale01(dens$x, min.raw, max.raw)</span><br><span class="line">            lines(dens$x, dens$y/max(dens$y) * <span class="number">0.95</span>, col = denscol,</span><br><span class="line">                lwd = <span class="number">1</span>)</span><br><span class="line">            axis(<span class="number">2</span>, at = pretty(dens$y)/max(dens$y) * <span class="number">0.95</span>, pretty(dens$y))</span><br><span class="line">            title(<span class="string">"Color Key\nand Density Plot"</span>)</span><br><span class="line">            par(cex = <span class="number">0.5</span>)</span><br><span class="line">            mtext(side = <span class="number">2</span>, <span class="string">"Density"</span>, line = <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (density.info == <span class="string">"histogram"</span>) &#123;</span><br><span class="line">            h &lt;- hist(x, plot = <span class="literal">FALSE</span>, breaks = breaks)</span><br><span class="line">            hx &lt;- scale01(breaks, min.raw, max.raw)</span><br><span class="line">            hy &lt;- c(h$counts, h$counts[length(h$counts)])</span><br><span class="line">            lines(hx, hy/max(hy) * <span class="number">0.95</span>, lwd = <span class="number">1</span>, type = <span class="string">"s"</span>,</span><br><span class="line">                col = denscol)</span><br><span class="line">            axis(<span class="number">2</span>, at = pretty(hy)/max(hy) * <span class="number">0.95</span>, pretty(hy))</span><br><span class="line">            title(<span class="string">"Color Key\nand Histogram"</span>)</span><br><span class="line">            par(cex = <span class="number">0.5</span>)</span><br><span class="line">            mtext(side = <span class="number">2</span>, <span class="string">"Count"</span>, line = <span class="number">2</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> title(<span class="string">"Color Key"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> plot.new()</span><br><span class="line"></span><br><span class="line">    retval$colorTable &lt;- data.frame(low = retval$breaks[-length(retval$breaks)], high = retval$breaks[-<span class="number">1</span>], color = retval$col)</span><br><span class="line"></span><br><span class="line">    invisible(retval)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># EXAMPLE USAGE</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># example of colsidecolors rowsidecolors (single column, single row)</span></span><br><span class="line"><span class="comment">#mat &lt;- matrix(1:100, byrow=T, nrow=10)</span></span><br><span class="line"><span class="comment">#column_annotation &lt;- sample(c("red", "blue", "green"), 10, replace=T)</span></span><br><span class="line"><span class="comment">#column_annotation &lt;- as.matrix(column_annotation)</span></span><br><span class="line"><span class="comment">#colnames(column_annotation) &lt;- c("Variable X")</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#row_annotation &lt;- sample(c("red", "blue", "green"), 10, replace=T)</span></span><br><span class="line"><span class="comment">#row_annotation &lt;- as.matrix(t(row_annotation))</span></span><br><span class="line"><span class="comment">#rownames(row_annotation) &lt;- c("Variable Y")</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#heatmap.3(mat, RowSideColors=row_annotation, ColSideColors=column_annotation)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># multiple column and row</span></span><br><span class="line"><span class="comment">#mat &lt;- matrix(1:100, byrow=T, nrow=10)</span></span><br><span class="line"><span class="comment">#column_annotation &lt;- matrix(sample(c("red", "blue", "green"), 20, replace=T), ncol=2)</span></span><br><span class="line"><span class="comment">#colnames(column_annotation) &lt;- c("Variable X1", "Variable X2")</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#row_annotation &lt;- matrix(sample(c("red", "blue", "green"), 20, replace=T), nrow=2)</span></span><br><span class="line"><span class="comment">#rownames(row_annotation) &lt;- c("Variable Y1", "Variable Y2")</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#heatmap.3(mat, RowSideColors=row_annotation, ColSideColors=column_annotation)</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#---------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#---------------------------------------------------------------------------------</span></span><br><span class="line"><span class="comment">#---------------------------------------------------------------------------------</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Borrowing the following from gplots  (gplots isn't compatible with R 3.0 (yet), and so bypassing it for now).</span></span><br><span class="line"></span><br><span class="line">colorpanel = <span class="keyword">function</span> (n, low, mid, high)</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (missing(mid) || missing(high)) &#123;</span><br><span class="line">        low &lt;- col2rgb(low)</span><br><span class="line">        <span class="keyword">if</span> (missing(high))</span><br><span class="line">            high &lt;- col2rgb(mid)</span><br><span class="line">        <span class="keyword">else</span> high &lt;- col2rgb(high)</span><br><span class="line">        red &lt;- seq(low[<span class="number">1</span>, <span class="number">1</span>], high[<span class="number">1</span>, <span class="number">1</span>], length = n)/<span class="number">255</span></span><br><span class="line">        green &lt;- seq(low[<span class="number">3</span>, <span class="number">1</span>], high[<span class="number">3</span>, <span class="number">1</span>], length = n)/<span class="number">255</span></span><br><span class="line">        blue &lt;- seq(low[<span class="number">2</span>, <span class="number">1</span>], high[<span class="number">2</span>, <span class="number">1</span>], length = n)/<span class="number">255</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        isodd &lt;- odd(n)</span><br><span class="line">        <span class="keyword">if</span> (isodd) &#123;</span><br><span class="line">            n &lt;- n + <span class="number">1</span></span><br><span class="line">        &#125;</span><br><span class="line">        low &lt;- col2rgb(low)</span><br><span class="line">        mid &lt;- col2rgb(mid)</span><br><span class="line">        high &lt;- col2rgb(high)</span><br><span class="line">        lower &lt;- floor(n/<span class="number">2</span>)</span><br><span class="line">        upper &lt;- n - lower</span><br><span class="line">        red &lt;- c(seq(low[<span class="number">1</span>, <span class="number">1</span>], mid[<span class="number">1</span>, <span class="number">1</span>], length = lower), seq(mid[<span class="number">1</span>,</span><br><span class="line">            <span class="number">1</span>], high[<span class="number">1</span>, <span class="number">1</span>], length = upper))/<span class="number">255</span></span><br><span class="line">        green &lt;- c(seq(low[<span class="number">3</span>, <span class="number">1</span>], mid[<span class="number">3</span>, <span class="number">1</span>], length = lower),</span><br><span class="line">            seq(mid[<span class="number">3</span>, <span class="number">1</span>], high[<span class="number">3</span>, <span class="number">1</span>], length = upper))/<span class="number">255</span></span><br><span class="line">        blue &lt;- c(seq(low[<span class="number">2</span>, <span class="number">1</span>], mid[<span class="number">2</span>, <span class="number">1</span>], length = lower),</span><br><span class="line">            seq(mid[<span class="number">2</span>, <span class="number">1</span>], high[<span class="number">2</span>, <span class="number">1</span>], length = upper))/<span class="number">255</span></span><br><span class="line">        <span class="keyword">if</span> (isodd) &#123;</span><br><span class="line">            red &lt;- red[-(lower + <span class="number">1</span>)]</span><br><span class="line">            green &lt;- green[-(lower + <span class="number">1</span>)]</span><br><span class="line">            blue &lt;- blue[-(lower + <span class="number">1</span>)]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    rgb(red, blue, green)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">greenred = <span class="keyword">function</span> (n)  &#123;</span><br><span class="line">    colorpanel(n, <span class="string">"green"</span>, <span class="string">"black"</span>, <span class="string">"red"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">odd = <span class="keyword">function</span> (x) &#123;</span><br><span class="line">    x%%<span class="number">2</span> == <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">even = <span class="keyword">function</span> (x) &#123;</span><br><span class="line">    x%%<span class="number">2</span> == <span class="number">0</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="misc-rnaseq-funcs-R"><a class="header-anchor" href="#misc-rnaseq-funcs-R"></a>misc_rnaseq_funcs.R</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from https://github.com/trinityrnaseq/trinityrnaseq/blob/master/Analysis/DifferentialExpression/R/misc_rnaseq_funcs.R</span></span><br><span class="line"></span><br><span class="line">plot_counts_matrix_log2_dist = <span class="keyword">function</span>(matrix_file) &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  data = read.table(file=matrix_file, com=<span class="string">''</span>, row.names=<span class="number">1</span>, header=<span class="literal">T</span>)</span><br><span class="line"></span><br><span class="line">  conditions = colnames(data)</span><br><span class="line">  colors = rainbow(length(conditions))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  plot(density(log2(data[,<span class="number">1</span>])), col=colors[<span class="number">1</span>], main=matrix_file, xlab=<span class="string">'log2(frag_counts)'</span>, ylab=<span class="string">'density'</span>)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">2</span>:length(data[<span class="number">1</span>,])) &#123;</span><br><span class="line"></span><br><span class="line">    points(density(log2(data[,i])), type=<span class="string">'l'</span>, col=colors[i])</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  legend(<span class="string">'topright'</span>, conditions, col=colors, pch=<span class="number">15</span>)</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">matrix_to_color_assignments = <span class="keyword">function</span>(matrix_m, col=<span class="literal">NULL</span>, by=c(<span class="string">"matrix"</span>, <span class="string">"row"</span>, <span class="string">"col"</span>)) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (! is.matrix(matrix_m))</span><br><span class="line">    <span class="keyword">stop</span>(<span class="string">"Error, matrix_to_color_assignments() requires a matrix as parameter."</span>)</span><br><span class="line">  num_colors = <span class="number">0</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (is.null(col)) &#123;</span><br><span class="line">        num_colors = min(nrow(matrix_m), ncol(matrix_m))</span><br><span class="line">        col = rainbow(num_colors)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        num_colors = length(col)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    by = match.arg(by)</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (by == <span class="string">"matrix"</span>) &#123;</span><br><span class="line"></span><br><span class="line">        min_val = min(matrix_m, na.rm=<span class="literal">T</span>)</span><br><span class="line">      matrix_m = matrix_m - min_val</span><br><span class="line">      max_val = max(matrix_m, na.rm=<span class="literal">T</span>)</span><br><span class="line">      matrix_m = matrix_m / max_val * num_colors</span><br><span class="line">        <span class="comment">#print(matrix_m)</span></span><br><span class="line">         matrix_m = apply(matrix_m, <span class="number">1</span>:<span class="number">2</span>, <span class="keyword">function</span>(x) ifelse (x&lt;<span class="number">1</span>, as.character(col[<span class="number">1</span>]), as.character(col[x])));</span><br><span class="line"></span><br><span class="line">        matrix_m = matrix(as.character(matrix_m), nrow=dim(matrix_m)[<span class="number">1</span>])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line"></span><br><span class="line">    row_or_col_only_color_selector_func = <span class="keyword">function</span>(x) &#123;</span><br><span class="line">        a = min(x, na.rm=<span class="literal">T</span>);</span><br><span class="line">        b = max(x, na.rm=<span class="literal">T</span>);</span><br><span class="line">        c = (x-a)/(b-a) * num_colors;</span><br><span class="line">                c = round(c);</span><br><span class="line">        c = ifelse (c&lt;<span class="number">1</span>, <span class="number">1</span>, c);</span><br><span class="line">                <span class="comment">#print(paste(c("color selection: (a)", a, " (b)", b, " (c)", paste(c, sep=','))));</span></span><br><span class="line">                colors = as.character(col[c]);</span><br><span class="line">                <span class="keyword">return</span>(colors);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (by == <span class="string">"row"</span>) &#123;</span><br><span class="line">            matrix_m = apply(matrix_m, <span class="number">1</span>, row_or_col_only_color_selector_func);</span><br><span class="line">            print(matrix_m)</span><br><span class="line">            print(<span class="string">"dim matrix_m after apply"</span>); print(dim(matrix_m))</span><br><span class="line">            matrix_m = t(matrix_m);</span><br><span class="line">            print(<span class="string">"dim matrix_m after transpose: "</span>); print(dim(matrix_m))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment"># by column</span></span><br><span class="line">      matrix_m = apply(matrix_m, <span class="number">2</span>, row_or_col_only_color_selector_func);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">#print(matrix_m)</span></span><br><span class="line">  <span class="keyword">return</span>(matrix_m)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">sample_matrix_to_color_assignments = <span class="keyword">function</span>(sampleAnnotationsMatrix, colors) &#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (missing(colors))</span><br><span class="line">    colors = rainbow(nrow(sampleAnnotationsMatrix))</span><br><span class="line"></span><br><span class="line">  nsamples = nrow(sampleAnnotationsMatrix);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (length(colors) &lt; nrow(sampleAnnotationsMatrix))</span><br><span class="line">    <span class="keyword">stop</span>(<span class="string">"Error, only "</span>, length(colors), <span class="string">" colors specified, but have "</span>, nsamples, <span class="string">" samples"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:nrow(sampleAnnotationsMatrix)) &#123;</span><br><span class="line">    c = colors[i]</span><br><span class="line">    sampleAnnotationsMatrix[i,] = sapply(sampleAnnotationsMatrix[i,], <span class="keyword">function</span>(x) ifelse( x, as.character(c), <span class="string">'white'</span>))</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span>(sampleAnnotationsMatrix);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="pairs3-R"><a class="header-anchor" href="#pairs3-R"></a>pairs3.R</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from: https://github.com/trinityrnaseq/trinityrnaseq/blob/master/Analysis/DifferentialExpression/R/pairs3.R</span></span><br><span class="line"><span class="comment">## snagged from: http://stackoverflow.com/questions/9680783/how-can-i-change-the-axis-position-for-pairs</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># modified to include function for modifying X/Y values.</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">pairs3 &lt;-</span><br><span class="line">  <span class="keyword">function</span> (x, labels, XY_convert_fun = <span class="literal">NULL</span>, CustomColorFun = <span class="literal">NULL</span>, panel = points, <span class="keyword">...</span>, lower.panel = panel,</span><br><span class="line">            upper.panel = panel, diag.panel = <span class="literal">NULL</span>, text.panel = textPanel,</span><br><span class="line">            label.pos = <span class="number">0.5</span> + has.diag/<span class="number">3</span>, cex.labels = <span class="literal">NULL</span>, font.labels = <span class="number">1</span>,</span><br><span class="line">            row1attop = <span class="literal">TRUE</span>, gap = <span class="number">1</span>)</span><br><span class="line">  &#123;</span><br><span class="line">    textPanel &lt;- <span class="keyword">function</span>(x = <span class="number">0.5</span>, y = <span class="number">0.5</span>, txt, cex, font) text(x,</span><br><span class="line">                                                                 y, txt, cex = cex, font = font)</span><br><span class="line">    localAxis &lt;- <span class="keyword">function</span>(side, x, y, xpd, bg, col = <span class="literal">NULL</span>, main,</span><br><span class="line">                          oma, <span class="keyword">...</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (side%%<span class="number">2</span> == <span class="number">1</span>)</span><br><span class="line">        Axis(x, side = side, xpd = <span class="literal">NA</span>, <span class="keyword">...</span>)</span><br><span class="line">      <span class="keyword">else</span> Axis(y, side = side, xpd = <span class="literal">NA</span>, <span class="keyword">...</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    localPlot &lt;- <span class="keyword">function</span>(<span class="keyword">...</span>, main, oma, font.main, cex.main) &#123;</span><br><span class="line">        plot(<span class="keyword">...</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    localLowerPanel &lt;- <span class="keyword">function</span>(<span class="keyword">...</span>, main, oma, font.main, cex.main) lower.panel(<span class="keyword">...</span>)</span><br><span class="line">    localUpperPanel &lt;- <span class="keyword">function</span>(<span class="keyword">...</span>, main, oma, font.main, cex.main) upper.panel(<span class="keyword">...</span>)</span><br><span class="line">    localDiagPanel &lt;- <span class="keyword">function</span>(<span class="keyword">...</span>, main, oma, font.main, cex.main) diag.panel(<span class="keyword">...</span>)</span><br><span class="line">    dots &lt;- list(<span class="keyword">...</span>)</span><br><span class="line">    nmdots &lt;- names(dots)</span><br><span class="line">    <span class="keyword">if</span> (!is.matrix(x)) &#123;</span><br><span class="line">      x &lt;- as.data.frame(x)</span><br><span class="line">      <span class="keyword">for</span> (i <span class="keyword">in</span> seq_along(names(x))) &#123;</span><br><span class="line">        <span class="keyword">if</span> (is.factor(x[[i]]) || is.logical(x[[i]]))</span><br><span class="line">          x[[i]] &lt;- as.numeric(x[[i]])</span><br><span class="line">        <span class="keyword">if</span> (!is.numeric(unclass(x[[i]])))</span><br><span class="line">          <span class="keyword">stop</span>(<span class="string">"non-numeric argument to 'pairs'"</span>)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (!is.numeric(x))</span><br><span class="line">      <span class="keyword">stop</span>(<span class="string">"non-numeric argument to 'pairs'"</span>)</span><br><span class="line">    panel &lt;- match.fun(panel)</span><br><span class="line">    <span class="keyword">if</span> ((has.lower &lt;- !is.null(lower.panel)) &amp;&amp; !missing(lower.panel))</span><br><span class="line">      lower.panel &lt;- match.fun(lower.panel)</span><br><span class="line">    <span class="keyword">if</span> ((has.upper &lt;- !is.null(upper.panel)) &amp;&amp; !missing(upper.panel))</span><br><span class="line">      upper.panel &lt;- match.fun(upper.panel)</span><br><span class="line">    <span class="keyword">if</span> ((has.diag &lt;- !is.null(diag.panel)) &amp;&amp; !missing(diag.panel))</span><br><span class="line">      diag.panel &lt;- match.fun(diag.panel)</span><br><span class="line">    <span class="keyword">if</span> (row1attop) &#123;</span><br><span class="line">      tmp &lt;- lower.panel</span><br><span class="line">      lower.panel &lt;- upper.panel</span><br><span class="line">      upper.panel &lt;- tmp</span><br><span class="line">      tmp &lt;- has.lower</span><br><span class="line">      has.lower &lt;- has.upper</span><br><span class="line">      has.upper &lt;- tmp</span><br><span class="line">    &#125;</span><br><span class="line">    nc &lt;- ncol(x)</span><br><span class="line">    <span class="keyword">if</span> (nc &lt; <span class="number">2</span>)</span><br><span class="line">      <span class="keyword">stop</span>(<span class="string">"only one column in the argument to 'pairs'"</span>)</span><br><span class="line">    has.labs &lt;- <span class="literal">TRUE</span></span><br><span class="line">    <span class="keyword">if</span> (missing(labels)) &#123;</span><br><span class="line">      labels &lt;- colnames(x)</span><br><span class="line">      <span class="keyword">if</span> (is.null(labels))</span><br><span class="line">        labels &lt;- paste(<span class="string">"var"</span>, <span class="number">1L</span>:nc)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span> (is.null(labels))</span><br><span class="line">      has.labs &lt;- <span class="literal">FALSE</span></span><br><span class="line">    oma &lt;- <span class="keyword">if</span> (<span class="string">"oma"</span> %<span class="keyword">in</span>% nmdots)</span><br><span class="line">      dots$oma</span><br><span class="line">    <span class="keyword">else</span> <span class="literal">NULL</span></span><br><span class="line">    main &lt;- <span class="keyword">if</span> (<span class="string">"main"</span> %<span class="keyword">in</span>% nmdots)</span><br><span class="line">      dots$main</span><br><span class="line">    <span class="keyword">else</span> <span class="literal">NULL</span></span><br><span class="line">    <span class="keyword">if</span> (is.null(oma)) &#123;</span><br><span class="line">      oma &lt;- c(<span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>, <span class="number">4</span>)</span><br><span class="line">      <span class="keyword">if</span> (!is.null(main))</span><br><span class="line">        oma[<span class="number">3L</span>] &lt;- <span class="number">6</span></span><br><span class="line">    &#125;</span><br><span class="line">    opar &lt;- par(mfrow = c(nc, nc), mar = rep.int(gap/<span class="number">2</span>, <span class="number">4</span>), oma = oma)</span><br><span class="line">    on.exit(par(opar))</span><br><span class="line">    dev.hold()</span><br><span class="line">    on.exit(dev.flush(), add = <span class="literal">TRUE</span>)</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="keyword">if</span> (row1attop)</span><br><span class="line">      <span class="number">1L</span>:nc</span><br><span class="line">         <span class="keyword">else</span> nc:<span class="number">1L</span>) <span class="keyword">for</span> (j <span class="keyword">in</span> <span class="number">1L</span>:nc) &#123;</span><br><span class="line"></span><br><span class="line">      <span class="comment">#print(paste(i,"vs", j));</span></span><br><span class="line">      xvals = x[,j]</span><br><span class="line">      yvals = x[,i]      </span><br><span class="line"></span><br><span class="line">      <span class="keyword">if</span> ( (i != j) &amp;&amp; ! is.null(XY_convert_fun)) &#123;</span><br><span class="line"></span><br><span class="line">        res = XY_convert_fun(xvals, yvals);</span><br><span class="line">        xvals = res[[<span class="string">'x'</span>]]</span><br><span class="line">        yvals = res[[<span class="string">'y'</span>]]</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">            col=<span class="string">'black'</span> <span class="comment"># default</span></span><br><span class="line">            <span class="keyword">if</span> (! is.null(CustomColorFun))</span><br><span class="line">                col=CustomColorFun(xvals,yvals)</span><br><span class="line"></span><br><span class="line">       <span class="comment">#     get_list_from_ellipsis2 &lt;- function(...) as.list(substitute(list(...)))[-1L]</span></span><br><span class="line">       <span class="comment"># print(get_list_from_ellipsis2(...));stop();</span></span><br><span class="line"></span><br><span class="line">           localPlot(xvals, yvals, xlab = <span class="string">""</span>, ylab = <span class="string">""</span>,axes = <span class="literal">F</span>, <span class="comment">#col=ifelse(abs(xvals-yvals)&gt;2, 'red', 'black'),</span></span><br><span class="line">                     type = <span class="string">"n"</span>, <span class="keyword">...</span>)</span><br><span class="line">           <span class="keyword">if</span> (i == j || (i &lt; j &amp;&amp; has.lower) || (i &gt; j &amp;&amp; has.upper)) &#123;</span><br><span class="line">             box()</span><br><span class="line">             <span class="comment"># edited here...</span></span><br><span class="line">             <span class="comment">#           if (i == 1 &amp;&amp; (!(j%%2) || !has.upper || !has.lower))</span></span><br><span class="line">             <span class="comment">#           localAxis(1 + 2 * row1attop, x[, j], x[, i],</span></span><br><span class="line">             <span class="comment">#                       ...)</span></span><br><span class="line">             <span class="comment"># draw x-axis</span></span><br><span class="line">             <span class="keyword">if</span> (i != j) <span class="comment">#(i == nc &amp; j != nc)</span></span><br><span class="line">               localAxis(<span class="number">1</span>, xvals, yvals,</span><br><span class="line">                         <span class="keyword">...</span>)</span><br><span class="line">             <span class="comment"># draw y-axis</span></span><br><span class="line">             <span class="keyword">if</span> (j != i) <span class="comment">#(j == 1 &amp; i != 1)</span></span><br><span class="line">               localAxis(<span class="number">2</span>, xvals, yvals, <span class="keyword">...</span>)</span><br><span class="line">             <span class="comment">#           if (j == nc &amp;&amp; (i%%2 || !has.upper || !has.lower))</span></span><br><span class="line">             <span class="comment">#             localAxis(4, x[, j], x[, i], ...)</span></span><br><span class="line">             mfg &lt;- par(<span class="string">"mfg"</span>)</span><br><span class="line">             <span class="keyword">if</span> (i == j) &#123;</span><br><span class="line">               <span class="keyword">if</span> (has.diag)</span><br><span class="line">                 localDiagPanel(as.vector(yvals), <span class="keyword">...</span>)</span><br><span class="line">               <span class="keyword">if</span> (has.labs) &#123;</span><br><span class="line">                 par(usr = c(<span class="number">0</span>, <span class="number">1</span>, <span class="number">0</span>, <span class="number">1</span>))</span><br><span class="line">                 <span class="keyword">if</span> (is.null(cex.labels)) &#123;</span><br><span class="line">                   l.wid &lt;- strwidth(labels, <span class="string">"user"</span>)</span><br><span class="line">                   cex.labels &lt;- max(<span class="number">0.8</span>, min(<span class="number">2</span>, <span class="number">0.9</span>/max(l.wid)))</span><br><span class="line">                 &#125;</span><br><span class="line">                 text.panel(<span class="number">0.5</span>, label.pos, labels[i], cex = cex.labels,</span><br><span class="line">                            font = font.labels)</span><br><span class="line">               &#125;</span><br><span class="line">             &#125;</span><br><span class="line">             <span class="keyword">else</span> <span class="keyword">if</span> (i &lt; j)</span><br><span class="line">               localLowerPanel(as.vector(xvals), as.vector(yvals), col=col, <span class="keyword">...</span>)</span><br><span class="line">             <span class="keyword">else</span> localUpperPanel(as.vector(xvals), as.vector(yvals), col=col, <span class="keyword">...</span>)</span><br><span class="line">             <span class="keyword">if</span> (any(par(<span class="string">"mfg"</span>) != mfg))</span><br><span class="line">               <span class="keyword">stop</span>(<span class="string">"the 'panel' function made a new plot"</span>)</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="keyword">else</span> par(new = <span class="literal">FALSE</span>)</span><br><span class="line">         &#125;</span><br><span class="line">    <span class="keyword">if</span> (!is.null(main)) &#123;</span><br><span class="line">      font.main &lt;- <span class="keyword">if</span> (<span class="string">"font.main"</span> %<span class="keyword">in</span>% nmdots)</span><br><span class="line">        dots$font.main</span><br><span class="line">      <span class="keyword">else</span> par(<span class="string">"font.main"</span>)</span><br><span class="line">      cex.main &lt;- <span class="keyword">if</span> (<span class="string">"cex.main"</span> %<span class="keyword">in</span>% nmdots)</span><br><span class="line">        dots$cex.main</span><br><span class="line">      <span class="keyword">else</span> par(<span class="string">"cex.main"</span>)</span><br><span class="line">      mtext(main, <span class="number">3</span>, <span class="number">3</span>, <span class="literal">TRUE</span>, <span class="number">0.5</span>, cex = cex.main, font = font.main)</span><br><span class="line">    &#125;</span><br><span class="line">    invisible(<span class="literal">NULL</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">## Demo it:</span></span><br><span class="line">demo_pairs3 = <span class="keyword">function</span> (custom_fun=<span class="literal">F</span>) &#123;</span><br><span class="line">    data(iris)</span><br><span class="line"></span><br><span class="line">  xy_conv = <span class="keyword">function</span>(x,y) &#123;</span><br><span class="line"></span><br><span class="line">    res = list();</span><br><span class="line">    res[[<span class="string">'x'</span>]] = (x+y)/<span class="number">2</span>;</span><br><span class="line">    res[[<span class="string">'y'</span>]] = x - y;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span>(res);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (custom_fun) &#123;</span><br><span class="line">    pairs3(iris[<span class="number">1</span>:<span class="number">4</span>], XY_convert_fun = xy_conv, main = <span class="string">"Anderson's Iris Data -- 3 species"</span>,pch = <span class="number">21</span>, bg = c(<span class="string">"red"</span>, <span class="string">"green3"</span>, <span class="string">"blue"</span>)[unclass(iris$Species)])</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> &#123;</span><br><span class="line">    pairs3(iris[<span class="number">1</span>:<span class="number">4</span>], main = <span class="string">"Anderson's Iris Data -- 3 species"</span>,pch = <span class="number">21</span>, bg = c(<span class="string">"red"</span>, <span class="string">"green3"</span>, <span class="string">"blue"</span>)[unclass(iris$Species)])</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h2 id="vioplot2-R"><a class="header-anchor" href="#vioplot2-R"></a>vioplot2.R</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># from: https://github.com/trinityrnaseq/trinityrnaseq/blob/master/Analysis/DifferentialExpression/R/vioplot2.R</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##################################################################################</span></span><br><span class="line"><span class="comment">## From:  https://stackoverflow.com/questions/22410606/violin-plot-with-list-input</span></span><br><span class="line"><span class="comment">## and slightly modified to my liking here.</span></span><br><span class="line"></span><br><span class="line">vioplot2&lt;-<span class="keyword">function</span> (x, <span class="keyword">...</span>, range = <span class="number">1.5</span>, h = <span class="literal">NULL</span>, ylim = <span class="literal">NULL</span>, names = <span class="literal">NULL</span>,</span><br><span class="line">                    horizontal = <span class="literal">FALSE</span>, col = c(<span class="string">"magenta"</span>), border = <span class="string">"black"</span>, lty = <span class="number">1</span>,</span><br><span class="line">                    lwd = <span class="number">1</span>, rectCol = <span class="string">"black"</span>, colMed = <span class="string">"white"</span>, pchMed = <span class="number">19</span>,</span><br><span class="line">                    at, add = <span class="literal">FALSE</span>, wex = <span class="number">1</span>, drawRect = <span class="literal">TRUE</span>)</span><br><span class="line">&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">library</span>(sm)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!is.list(x))&#123;</span><br><span class="line">        datas &lt;- list(x, <span class="keyword">...</span>)</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">        datas&lt;-x</span><br><span class="line">    &#125;</span><br><span class="line">    n &lt;- length(datas)</span><br><span class="line">    <span class="keyword">if</span> (missing(at))</span><br><span class="line">        at &lt;- <span class="number">1</span>:n</span><br><span class="line">    upper &lt;- vector(mode = <span class="string">"numeric"</span>, length = n)</span><br><span class="line">    lower &lt;- vector(mode = <span class="string">"numeric"</span>, length = n)</span><br><span class="line">    q1 &lt;- vector(mode = <span class="string">"numeric"</span>, length = n)</span><br><span class="line">    q3 &lt;- vector(mode = <span class="string">"numeric"</span>, length = n)</span><br><span class="line">    med &lt;- vector(mode = <span class="string">"numeric"</span>, length = n)</span><br><span class="line">    base &lt;- vector(mode = <span class="string">"list"</span>, length = n)</span><br><span class="line">    height &lt;- vector(mode = <span class="string">"list"</span>, length = n)</span><br><span class="line">    baserange &lt;- c(<span class="literal">Inf</span>, -<span class="literal">Inf</span>)</span><br><span class="line">    args &lt;- list(display = <span class="string">"none"</span>)</span><br><span class="line">    <span class="keyword">if</span> (!(is.null(h)))</span><br><span class="line">        args &lt;- c(args, h = h)</span><br><span class="line">    <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:n) &#123;</span><br><span class="line">        data &lt;- datas[[i]]</span><br><span class="line">        data.min &lt;- min(data)</span><br><span class="line">        data.max &lt;- max(data)</span><br><span class="line">        q1[i] &lt;- quantile(data, <span class="number">0.25</span>)</span><br><span class="line">        q3[i] &lt;- quantile(data, <span class="number">0.75</span>)</span><br><span class="line">        med[i] &lt;- median(data)</span><br><span class="line">        iqd &lt;- q3[i] - q1[i]</span><br><span class="line">        upper[i] &lt;- min(q3[i] + range * iqd, data.max)</span><br><span class="line">        lower[i] &lt;- max(q1[i] - range * iqd, data.min)</span><br><span class="line">        est.xlim &lt;- c(min(lower[i], data.min), max(upper[i],</span><br><span class="line">                                                   data.max))</span><br><span class="line">        smout &lt;- do.call(<span class="string">"sm.density"</span>, c(list(data, xlim = est.xlim),</span><br><span class="line">                                         args))</span><br><span class="line">        hscale &lt;- <span class="number">0.4</span>/max(smout$estimate) * wex</span><br><span class="line">        base[[i]] &lt;- smout$eval.points</span><br><span class="line">        height[[i]] &lt;- smout$estimate * hscale</span><br><span class="line">        t &lt;- range(base[[i]])</span><br><span class="line">        baserange[<span class="number">1</span>] &lt;- min(baserange[<span class="number">1</span>], t[<span class="number">1</span>])</span><br><span class="line">        baserange[<span class="number">2</span>] &lt;- max(baserange[<span class="number">2</span>], t[<span class="number">2</span>])</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (!add) &#123;</span><br><span class="line">        xlim &lt;- <span class="keyword">if</span> (n == <span class="number">1</span>)</span><br><span class="line">                    at + c(-<span class="number">0.5</span>, <span class="number">0.5</span>)</span><br><span class="line">                <span class="keyword">else</span> range(at) + min(diff(at))/<span class="number">2</span> * c(-<span class="number">1</span>, <span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span> (is.null(ylim)) &#123;</span><br><span class="line">            ylim &lt;- baserange</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (is.null(names)) &#123;</span><br><span class="line">        label &lt;- <span class="number">1</span>:n</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        label &lt;- names</span><br><span class="line">    &#125;</span><br><span class="line">    boxwidth &lt;- <span class="number">0.05</span> * wex</span><br><span class="line">    <span class="keyword">if</span> (!add)</span><br><span class="line">        plot.new()</span><br><span class="line">    <span class="keyword">if</span> (!horizontal) &#123;</span><br><span class="line">        <span class="keyword">if</span> (!add) &#123;</span><br><span class="line">            plot.window(xlim = xlim, ylim = ylim)</span><br><span class="line">            axis(<span class="number">2</span>)</span><br><span class="line">            axis(<span class="number">1</span>, at = at, label = label)</span><br><span class="line">        &#125;</span><br><span class="line">        box()</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:n) &#123;</span><br><span class="line">            polygon(c(at[i] - height[[i]], rev(at[i] + height[[i]])),</span><br><span class="line">                    c(base[[i]], rev(base[[i]])), col = col[i], border = border,</span><br><span class="line">                    lty = lty, lwd = lwd)</span><br><span class="line">            <span class="keyword">if</span> (drawRect) &#123;</span><br><span class="line">                lines(at[c(i, i)], c(lower[i], upper[i]), lwd = lwd,</span><br><span class="line">                      lty = lty)</span><br><span class="line">                rect(at[i] - boxwidth/<span class="number">2</span>, q1[i], at[i] + boxwidth/<span class="number">2</span>,</span><br><span class="line">                     q3[i], col = rectCol)</span><br><span class="line">                points(at[i], med[i], pch = pchMed, col = colMed)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (!add) &#123;</span><br><span class="line">            plot.window(xlim = ylim, ylim = xlim)</span><br><span class="line">            axis(<span class="number">1</span>)</span><br><span class="line">            axis(<span class="number">2</span>, at = at, label = label)</span><br><span class="line">        &#125;</span><br><span class="line">        box()</span><br><span class="line">        <span class="keyword">for</span> (i <span class="keyword">in</span> <span class="number">1</span>:n) &#123;</span><br><span class="line">            polygon(c(base[[i]], rev(base[[i]])), c(at[i] - height[[i]],</span><br><span class="line">                                                    rev(at[i] + height[[i]])), col = col[i], border = border,</span><br><span class="line">                    lty = lty, lwd = lwd)</span><br><span class="line">            <span class="keyword">if</span> (drawRect) &#123;</span><br><span class="line">                lines(c(lower[i], upper[i]), at[c(i, i)], lwd = lwd,</span><br><span class="line">                      lty = lty)</span><br><span class="line">                rect(q1[i], at[i] - boxwidth/<span class="number">2</span>, q3[i], at[i] +</span><br><span class="line">                                                       boxwidth/<span class="number">2</span>, col = rectCol)</span><br><span class="line">                points(med[i], at[i], pch = pchMed, col = colMed)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    invisible(list(upper = upper, lower = lower, median = med,</span><br><span class="line">                   q1 = q1, q3 = q3))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_bin2d</title>
      <link href="/R/geom_bin2d.html"/>
      <url>/R/geom_bin2d.html</url>
      
        <content type="html"><![CDATA[<h1>geom_bin2d</h1><p><img src="https://s1.ax1x.com/2020/08/13/dSRFrd.png" alt="bin1"></p><p><a name="4wGpq"></a></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"></span><br><span class="line">world &lt;- map_data(<span class="string">"world"</span>)</span><br><span class="line">ggplot(world, aes(long, lat)) + geom_bin2d() + theme_map()</span><br></pre></td></tr></table></figure></div><p><a name="vmNgc"></a></p><h1>Arguments</h1><p><a name="N6aE2"></a></p><h2 id="bins"><a class="header-anchor" href="#bins"></a>bins</h2><p>x=y=bins+1</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">P1 &lt;- ggplot(world, aes( long, lat)) +geom_bin2d(bins = <span class="number">10</span>)  + theme_map() +</span><br><span class="line">      ggtitle(<span class="string">'bins=10'</span>)+ theme(plot.title = element_text(hjust=<span class="number">0.5</span>,size=<span class="number">20</span>))</span><br><span class="line">P2 &lt;- ggplot(world, aes( long, lat)) +geom_bin2d(bins = <span class="number">100</span>)  + theme_map() +</span><br><span class="line">      ggtitle(<span class="string">'bins=100'</span>)+ theme(plot.title = element_text(hjust=<span class="number">0.5</span>,size=<span class="number">20</span>))</span><br><span class="line"></span><br><span class="line">P1/P2</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/Nu8yon.png" alt="Nu8yon.png"></p><p><a name="pMKRk"></a></p><h2 id="binwidth"><a class="header-anchor" href="#binwidth"></a>binwidth</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(RColorBrewer)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">colorRampPalette(rev(brewer.pal(n = <span class="number">7</span>,name = <span class="string">"RdYlBu"</span>))) -&gt; cc</span><br><span class="line"></span><br><span class="line">P1 &lt;- ggplot(world, aes( long, lat)) +geom_bin2d(binwidth = c(<span class="number">0.1</span>, <span class="number">0.1</span>))+</span><br><span class="line">    theme_map() +ggtitle(<span class="string">'0.1 0.1'</span>)+ theme(plot.title = element_text(hjust=<span class="number">0.5</span>,size=<span class="number">20</span>))+</span><br><span class="line">    scale_fill_gradientn(colors=cc(<span class="number">100</span>))</span><br><span class="line">P2 &lt;- ggplot(world, aes( long, lat)) +geom_bin2d(binwidth = c(<span class="number">0.1</span>, <span class="number">10</span>))+</span><br><span class="line">    theme_map() +ggtitle(<span class="string">'0.1 10'</span>)+ theme(plot.title = element_text(hjust=<span class="number">0.5</span>,size=<span class="number">20</span>))+</span><br><span class="line">    scale_fill_gradientn(colors=cc(<span class="number">100</span>))</span><br><span class="line">P3 &lt;- ggplot(world, aes( long, lat)) +geom_bin2d(binwidth = c(<span class="number">10</span>, <span class="number">0.1</span>))+</span><br><span class="line">    theme_map() +ggtitle(<span class="string">'10 0.1'</span>)+ theme(plot.title = element_text(hjust=<span class="number">0.5</span>,size=<span class="number">20</span>))+</span><br><span class="line">    scale_fill_gradientn(colors=cc(<span class="number">100</span>))</span><br><span class="line">P4 &lt;- ggplot(world, aes( long, lat)) +geom_bin2d(binwidth = c(<span class="number">10</span>, <span class="number">10</span>))+</span><br><span class="line">    theme_map() +ggtitle(<span class="string">'10 10'</span>)+ theme(plot.title = element_text(hjust=<span class="number">0.5</span>,size=<span class="number">20</span>))+</span><br><span class="line">    scale_fill_gradientn(colors=cc(<span class="number">100</span>))</span><br><span class="line"></span><br><span class="line">(P1|P2)/(P4|P3)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dSRkqA.png" alt="bin2"></p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ggplot boxplot</title>
      <link href="/R/geom_boxplot.html"/>
      <url>/R/geom_boxplot.html</url>
      
        <content type="html"><![CDATA[<h1 id="geom-boxplot"><a href="#geom-boxplot" class="headerlink" title="geom_boxplot"></a>geom_boxplot</h1><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">p1&lt;- ggplot(ChickWeight,aes(x=Time,y=weight)) +</span><br><span class="line">    geom_boxplot()+</span><br><span class="line">    theme_light() + ggtitle(<span class="string">"P1"</span>)</span><br><span class="line"></span><br><span class="line">ChickWeight$Time &lt;- factor(ChickWeight$Time)</span><br><span class="line">p2&lt;- ggplot(ChickWeight,aes(x=Time,y=weight)) +</span><br><span class="line">    geom_boxplot()+</span><br><span class="line">    theme_light() + ggtitle(<span class="string">"P2"</span>)</span><br><span class="line"></span><br><span class="line">ChickWeight$Diet &lt;- factor(ChickWeight$Diet)</span><br><span class="line"></span><br><span class="line">p3&lt;- ggplot(ChickWeight,aes(x=Time,y=weight)) +</span><br><span class="line">    geom_boxplot(aes(fill=Diet))+</span><br><span class="line">    theme_light() + ggtitle(<span class="string">"P3"</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">p4&lt;- ggplot(ChickWeight,aes(x=Time,y=weight)) +</span><br><span class="line">    geom_boxplot(aes(group=Diet, fill=Diet))+</span><br><span class="line">    theme_light() + ggtitle(<span class="string">"P4"</span>)</span><br><span class="line"></span><br><span class="line">GGlay = <span class="string">'ABBBB</span></span><br><span class="line"><span class="string">CCCCD'</span></span><br><span class="line"></span><br><span class="line">p1+p2+p3+p4 + plot_layout(design = GGlay)</span><br><span class="line"><span class="comment">#ggsave('box1.png')</span></span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NgVfWn" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/28/NgVfWn.md.png" alt="NgVfWn.md.png"></a></p><p>As you can see, we can separate the box by call the axis.x <code>Time</code> as factors (p2).</p><h1 id="Add-smooth-line"><a href="#Add-smooth-line" class="headerlink" title="Add smooth line"></a>Add smooth line</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ggplot(ChickWeight,aes(x=Time,y=weight)) +</span><br><span class="line">        geom_boxplot(aes(fill=Diet),alpha=<span class="number">0.4</span>)+</span><br><span class="line">        theme_light() + ggtitle(<span class="string">"P3"</span>)+ geom_smooth(aes(group=Diet),color=<span class="string">'red'</span>)+</span><br><span class="line">        facet_wrap(~Diet)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/NgesUg" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/28/NgesUg.md.png" alt="NgesUg.md.png"></a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_curve</title>
      <link href="/R/geom_curve.html"/>
      <url>/R/geom_curve.html</url>
      
        <content type="html"><![CDATA[<h1>geom_curve</h1><p><a name="EsYEd"></a></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot() + geom_curve( aes(x = <span class="number">1</span>, y = <span class="number">1</span>, xend= <span class="number">6</span>, yend = <span class="number">6</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuGc0H.png" alt="NuGc0H.png"></p><p><code>geom_segment</code> draws a straight line between points (x, y) and (xend, yend).<br><code>geom_curve</code> draws a curved line.</p><p><a name="Mqwv9"></a></p><h1>Arguments</h1><p><a name="fneug"></a></p><h2 id="ncp"><a class="header-anchor" href="#ncp"></a>ncp</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p &lt;- ggplot()</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:<span class="number">10</span>))&#123;</span><br><span class="line">  p &lt;- p+ geom_curve( aes(x = <span class="number">1</span>, y = <span class="number">1</span>, xend= <span class="number">6</span>, yend = <span class="number">6</span>),ncp = i)</span><br><span class="line">&#125;</span><br><span class="line">p+ theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuGg7d.png" alt="NuGg7d.png"></p><p><a name="NaZpK"></a></p><h2 id="curvature"><a class="header-anchor" href="#curvature"></a>curvature</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p &lt;- ggplot()</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(-<span class="number">10</span>:<span class="number">10</span>))&#123;</span><br><span class="line">    p &lt;- p+ geom_curve( aes(x = <span class="number">1</span>, y = <span class="number">1</span>, xend= <span class="number">6</span>, yend = <span class="number">6</span>), curvature = i*<span class="number">0.1</span>)</span><br><span class="line">&#125;</span><br><span class="line">p+ theme_light()+ expand_limits(x=c(<span class="number">0</span>,<span class="number">10</span>),y=c(<span class="number">0</span>,<span class="number">6</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuGRAA.png" alt="NuGRAA.png"></p><p><a name="WHHOW"></a></p><h2 id="angle"><a class="header-anchor" href="#angle"></a>angle</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">p &lt;- ggplot()</span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:<span class="number">9</span>))&#123;</span><br><span class="line">    p &lt;- p+ geom_curve( aes(x = <span class="number">1</span>, y = <span class="number">1</span>, xend= <span class="number">6</span>, yend = <span class="number">6</span>), angle = i*<span class="number">10</span>)</span><br><span class="line">&#125;</span><br><span class="line">p+ theme_light()+ expand_limits(x=c(<span class="number">0</span>,<span class="number">10</span>),y=c(<span class="number">0</span>,<span class="number">6</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuGWtI.png" alt="NuGWtI.png"></p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_hex</title>
      <link href="/R/geom_hex.html"/>
      <url>/R/geom_hex.html</url>
      
        <content type="html"><![CDATA[<h1 id="geom-hex"><a href="#geom-hex" class="headerlink" title="geom_hex"></a>geom_hex</h1><p><img src="https://s1.ax1x.com/2020/06/19/NuJMHH.png" alt="NuJMHH.png"><br><a name="mLOtK"></a></p><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line">world &lt;- map_data(<span class="string">"world"</span>)</span><br><span class="line"></span><br><span class="line">ggplot(world, aes(long, lat)) + geom_hex() + theme_map()</span><br></pre></td></tr></table></figure></div><p><a name="RkQ0F"></a></p><h1 id="Arguments"><a href="#Arguments" class="headerlink" title="Arguments"></a>Arguments</h1><p><a name="OnBpv"></a></p><h2 id="bins"><a href="#bins" class="headerlink" title="bins"></a>bins</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ggplot(world, aes(long, lat)) + geom_hex(bins = <span class="number">40</span>) + theme_map()</span><br><span class="line">P1 &lt;-ggplot(world, aes(long, lat)) + geom_hex(bins = <span class="number">20</span>) + theme_map() + ggtitle(<span class="string">'bins=20'</span>)          </span><br><span class="line">P2 &lt;-ggplot(world, aes(long, lat)) + geom_hex(bins = <span class="number">80</span>) + theme_map() + ggtitle(<span class="string">'bins=80'</span>)          </span><br><span class="line"></span><br><span class="line">P1|P2</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuJ1UA.png" alt="NuJ1UA.png"></p><p><a name="DivLR"></a></p><h2 id="binwidth"><a href="#binwidth" class="headerlink" title="binwidth"></a>binwidth</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(world, aes(long, lat)) + geom_hex(binwidth = c(<span class="number">1</span>, <span class="number">10</span>)) + theme_map()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuJlEd.png" alt="NuJlEd.png"></p><p><a name="FG8Ad"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_pie</title>
      <link href="/R/geom_pie.html"/>
      <url>/R/geom_pie.html</url>
      
        <content type="html"><![CDATA[<h1 id="geom-pie"><a href="#geom-pie" class="headerlink" title="geom_pie"></a>geom_pie</h1><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#install.packages("ggfan") # or</span></span><br><span class="line"><span class="comment">#devtools::install_github("jasonhilton/ggfan")</span></span><br></pre></td></tr></table></figure></div><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><p>Reference: <a href=""></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"></span><br><span class="line">df &lt;- data.frame(</span><br><span class="line">  group = c(<span class="string">"Male"</span>, <span class="string">"Female"</span>, <span class="string">"Child"</span>),</span><br><span class="line">  value = c(<span class="number">25</span>, <span class="number">25</span>, <span class="number">50</span>)</span><br><span class="line">  )</span><br><span class="line">head(df)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">group value</span><br><span class="line">1   Male    25</span><br><span class="line">2 Female    25</span><br><span class="line">3  Child    50</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"></span><br><span class="line">pie &lt;- ggplot(df, aes(x=<span class="string">""</span>, y=value, fill=group))+</span><br><span class="line">    geom_bar(width = <span class="number">1</span>, stat = <span class="string">"identity"</span>) + coord_polar(<span class="string">"y"</span>, start=<span class="number">0</span>) + theme_map()</span><br><span class="line">pie</span><br><span class="line">ggsave(<span class="string">"pie.png"</span>, w=<span class="number">3.17</span>, h=<span class="number">2.92</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aQ18Wd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/31/aQ18Wd.md.png" alt="aQ18Wd.md.png"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pie +  scale_fill_manual(values=c(<span class="string">"#999999"</span>, <span class="string">"#E69F00"</span>, <span class="string">"#56B4E9"</span>))</span><br><span class="line">ggsave(<span class="string">'pie2.png'</span>, wi=<span class="number">4.6</span>, hei=<span class="number">3.76</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/DaeIctdAkl1rhxg.png" alt="pie2"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">pie +  scale_fill_manual(values=c(<span class="string">"#999999"</span>, <span class="string">"#E69F00"</span>, <span class="string">"#56B4E9"</span>)) +  geom_text(aes(y = value/<span class="number">3</span> + c(<span class="number">0</span>, cumsum(value)[-length(value)]),  </span><br><span class="line">                label = paste(value*<span class="number">100</span>/sum(value),<span class="string">"%"</span>, sep=<span class="string">''</span>)))</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/AP2zfYt5qwcLxk1.png" alt="pie3"></p><h1 id="Ring-pie"><a href="#Ring-pie" class="headerlink" title="Ring pie"></a>Ring pie</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">pie +  scale_fill_manual(values=c(<span class="string">"#999999"</span>, <span class="string">"#E69F00"</span>, <span class="string">"#56B4E9"</span>)) +</span><br><span class="line">  geom_text(aes(y = value/<span class="number">3</span> + c(<span class="number">0</span>, cumsum(value)[-length(value)]),  </span><br><span class="line">                label = paste(value*<span class="number">100</span>/sum(value),<span class="string">"%"</span>, sep=<span class="string">''</span>)))+</span><br><span class="line">  expand_limits(x=c(-<span class="number">1</span>,<span class="number">1</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/HE9qSbdfLWV4hK5.png" alt="pie4"></p><h1 id="Multi-layer"><a href="#Multi-layer" class="headerlink" title="Multi-layer"></a>Multi-layer</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">TB = rbind(df,df)</span><br><span class="line">TB$Sub = c(<span class="number">10</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="number">15</span>,<span class="number">10</span>,<span class="number">35</span>)</span><br><span class="line">TB$Group = c(rep(<span class="string">"A"</span>,<span class="number">3</span>),rep(<span class="string">"B"</span>,<span class="number">3</span>))</span><br><span class="line"></span><br><span class="line">ggplot(TB) + geom_bar(data=TB[<span class="number">1</span>:<span class="number">3</span>,],aes(x=<span class="string">"A"</span>,y=value[<span class="number">1</span>:<span class="number">3</span>], fill=group),stat = <span class="string">'identity'</span>) +</span><br><span class="line">    geom_bar(aes(x=<span class="string">"B"</span>,y =Sub, fill=Group),stat=<span class="string">'identity'</span>)+</span><br><span class="line">    coord_polar(<span class="string">'y'</span>)</span><br></pre></td></tr></table></figure></div><h1 id="Rose-Plot"><a href="#Rose-Plot" class="headerlink" title="Rose Plot"></a>Rose Plot</h1><p>Reference: <a href="https://blog.csdn.net/bone_ace/article/details/47624987" target="_blank" rel="noopener">九茶</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">dt = data.frame(A = c(<span class="number">2</span>, <span class="number">7</span>, <span class="number">4</span>, <span class="number">10</span>, <span class="number">1</span>), B = c(<span class="string">'B'</span>,<span class="string">'A'</span>,<span class="string">'C'</span>,<span class="string">'D'</span>,<span class="string">'E'</span>))</span><br><span class="line">ggplot(dt, aes(x = B, y = log(<span class="number">1</span>+A), fill = B)) +  </span><br><span class="line">      geom_bar(stat = <span class="string">"identity"</span>, alpha = <span class="number">0.7</span>) +  </span><br><span class="line">      coord_polar() + theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/MfdJyE93WvchHmK.png" alt="rose"></p><h1 id="pie-3D"><a href="#pie-3D" class="headerlink" title="pie 3D"></a>pie 3D</h1><p>For pie3D, you’d like to install <code>plotrix</code> first.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"plotrix"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"plotrix"</span>)</span><br><span class="line"></span><br><span class="line">x &lt;-c(<span class="number">10</span>,<span class="number">20</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">50</span>)</span><br><span class="line">label &lt;-c(<span class="string">"Alabama"</span>, <span class="string">"Alaska"</span>, <span class="string">"Arizona"</span>,<span class="string">"Arkansas"</span>, <span class="string">"California"</span>)</span><br><span class="line">pie3D(x,labels=label,explode=<span class="number">0.1</span>,main=<span class="string">"PieChart of Countries "</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/JyXs8UnQzFV4Np1.png" alt="pie5"></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><h2 id="pie"><a href="#pie" class="headerlink" title="pie"></a>pie</h2><p>author: <a href="http://blog.sciencenet.cn/blog-1468811-939783.html" target="_blank" rel="noopener">陈娜</a></p><table><thead><tr><th>Pie</th><th>Pie3D</th><th>Fan</th></tr></thead><tbody><tr><td><img src="http://image.sciencenet.cn/album/201511/30/095516j5dqx2de2q19bbqh.png" alt="pie"></td><td><img src="http://image.sciencenet.cn/album/201511/30/095608alcdhac773j7l3au.png" alt="pie3D"></td><td><img src="http://image.sciencenet.cn/album/201511/30/095650yu52524f7zf2rb7u.png" alt="plotrix"></td></tr><tr><td><a href="http://blog.sciencenet.cn/blog-1468811-939783.html" target="_blank" rel="noopener">© 陈娜 2015</a></td><td></td><td></td></tr></tbody></table><h2 id="SALVAGING-THE-PIE"><a href="#SALVAGING-THE-PIE" class="headerlink" title="SALVAGING THE PIE"></a><a href="https://www.darkhorseanalytics.com/blog/salvaging-the-pie" target="_blank" rel="noopener">SALVAGING THE PIE</a></h2><p><img src="https://images.squarespace-cdn.com/content/v1/56713bf4dc5cb41142f28d1f/1450306657208-N3NFCZECC1X5Y7LKZXNS/ke17ZwdGBToddI8pDm48kPmLlvCIXgndBxNq9fzeZb1Zw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZamWLI2zvYWH8K3-s_4yszcp2ryTI0HqTOaaUohrI8PI1ywBQVkPxlWdHWNwmTPkOtpL7dAXKpzabxT18Uiubqc/devourThePie3.gif?format=750w" alt="img"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_qq</title>
      <link href="/R/geom_qq.html"/>
      <url>/R/geom_qq.html</url>
      
        <content type="html"><![CDATA[<h1>geom_qq</h1><p><a name="aydhZ"></a></p><h2 id="QQ-plot"><a class="header-anchor" href="#QQ-plot"></a>QQ plot</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ggplot(mtcars,aes(sample=mpg)) + geom_qq(aes(color=<span class="string">'qq'</span>)) + geom_point(aes(mpg,cyl,color=<span class="string">'point'</span>))+</span><br><span class="line">  geom_qq_line(aes(color=<span class="string">'qqline'</span>))+ theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/18/QXvEDCrNh7cmza8.png" alt="qqplot"><br>我也没有搞懂是啥意思- -线马上,下次再来看</p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_quantile</title>
      <link href="/R/geom_quantile.html"/>
      <url>/R/geom_quantile.html</url>
      
        <content type="html"><![CDATA[<h1 id="geom-quantile"><a href="#geom-quantile" class="headerlink" title="geom_quantile"></a>geom_quantile</h1><p>source:<a href="https://ggplot2.tidyverse.org/reference/geom_quantile.html" target="_blank" rel="noopener">https://ggplot2.tidyverse.org/reference/geom_quantile.html</a></p><p><a name="xsBW1"></a></p><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ggplot(mpg, aes(displ, hwy)) + geom_point()+ geom_quantile(quantiles=<span class="number">0.5</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuYURx.png" alt="NuYURx.png"><br>回归直线吧</p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_rangeframe</title>
      <link href="/R/geom_rangeframe.html"/>
      <url>/R/geom_rangeframe.html</url>
      
        <content type="html"><![CDATA[<h1 id="geom-rangeframe"><a href="#geom-rangeframe" class="headerlink" title="geom_rangeframe"></a>geom_rangeframe</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggthemes)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"></span><br><span class="line">P1 &lt;- ggplot(mtcars,aes(wt,mpg))+ ggtitle(<span class="string">'Has rangeframe'</span>)+</span><br><span class="line">      geom_point()+geom_rangeframe()+theme_tufte()+ theme(plot.title=element_text(hjust=<span class="number">0.5</span>))</span><br><span class="line">P2 &lt;- ggplot(mtcars,aes(wt,mpg))+ ggtitle(<span class="string">'No rangeframe'</span>)+</span><br><span class="line">      geom_point()+theme_tufte()+ theme(plot.title=element_text(hjust=<span class="number">0.5</span>))</span><br><span class="line">P1|P2</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuYfQf.png" alt="NuYfQf.png"></p><p><a name="FG8Ad"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_rect</title>
      <link href="/R/geom_rect.html"/>
      <url>/R/geom_rect.html</url>
      
        <content type="html"><![CDATA[<h1>geom_rect</h1><p><img src="https://s1.ax1x.com/2020/06/19/Nutif1.png" alt="Nutif1.png"></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">mydata &lt;- data.frame(</span><br><span class="line">  Lebal  = c(<span class="string">"Point1"</span>,<span class="string">"Point2"</span>,<span class="string">"Point3"</span>,<span class="string">"Point4"</span>,<span class="string">"Point5"</span>),</span><br><span class="line">  xstart = c(<span class="number">5.5</span>,<span class="number">15.7</span>,<span class="number">19.5</span>,<span class="number">37.2</span>,<span class="number">36.9</span>),</span><br><span class="line">  xend   = c(<span class="number">9.7</span>,<span class="number">28.1</span>,<span class="number">24.6</span>,<span class="number">44.6</span>,<span class="number">47.1</span>),</span><br><span class="line">  ystart = c(<span class="number">9.6</span>,<span class="number">23.1</span>,<span class="number">2.3</span>,<span class="number">33.2</span>,<span class="number">9.2</span>),</span><br><span class="line">  yend   = c(<span class="number">16.1</span>,<span class="number">36.2</span>,<span class="number">11.7</span>,<span class="number">38.5</span>,<span class="number">15.3</span>),</span><br><span class="line">  size   = c(<span class="number">12</span>,<span class="number">48</span>,<span class="number">30</span>,<span class="number">11.5</span>,<span class="number">28</span>),</span><br><span class="line">  class  = c(<span class="string">"A"</span>,<span class="string">"A"</span>,<span class="string">"A"</span>,<span class="string">"C"</span>,<span class="string">"C"</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ggplot(mydata)+ geom_rect(aes(xmin = xstart,xmax = xend ,ymin = ystart ,</span><br><span class="line">  ymax = yend , fill = class)) + scale_fill_wsj() + theme_map()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NutPYR.png" alt="NutPYR.png"></p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_rug</title>
      <link href="/R/geom_rug.html"/>
      <url>/R/geom_rug.html</url>
      
        <content type="html"><![CDATA[<h1>geom_rug</h1><p><img src="https://s1.ax1x.com/2020/06/19/Nut491.png" alt="Nut491.png"></p><h1>Quick Inst</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchworks)</span><br><span class="line"></span><br><span class="line">ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) +</span><br><span class="line">  geom_rug() + theme_light()</span><br></pre></td></tr></table></figure></div><p><a name="njg2Q"></a></p><h1>arguments</h1><p><a name="wBLEt"></a></p><h2 id="outside"><a class="header-anchor" href="#outside"></a>outside</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"> ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">geom_rug( outside = <span class="literal">TRUE</span>)+ coord_cartesian(clip = <span class="string">"off"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NutfhR.png" alt="NutfhR.png"><br><img src="https://s1.ax1x.com/2020/06/19/NuUnJA.png" alt="NuUnJA.png"></p><p><a name="eA81n"></a></p><h2 id="side"><a class="header-anchor" href="#side"></a>side</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line">P1 &lt;- ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">    geom_rug( sides=<span class="string">'t'</span>, color=<span class="string">'red'</span>) + ggtitle(<span class="string">'t'</span>) +theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line">P2 &lt;- ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">    geom_rug( sides=<span class="string">'r'</span>, color=<span class="string">'red'</span>) + ggtitle(<span class="string">'r'</span>) +theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line">P3 &lt;- ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">    geom_rug( sides=<span class="string">'b'</span>, color=<span class="string">'red'</span>) + ggtitle(<span class="string">'b'</span>) +theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line">P4 &lt;- ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">    geom_rug( sides=<span class="string">'l'</span>, color=<span class="string">'red'</span>) + ggtitle(<span class="string">'l'</span>) +theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">(P1|P2)/(P3|P4)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NutWN9.png" alt="NutWN9.png"></p><p><a name="154js"></a></p><h2 id="length"><a class="header-anchor" href="#length"></a>length</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">P1&lt;- ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">    geom_rug()+ ggtitle(<span class="string">'NA'</span>) + theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line">P2&lt;- ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">    geom_rug( length = unit(<span class="number">0.5</span>, <span class="string">"npc"</span>))+ ggtitle(<span class="string">'0.5'</span>) + theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line">P3&lt;- ggplot(mtcars,aes(wt,mpg))+ geom_point( color=<span class="string">"grey50"</span>) + theme_light()+</span><br><span class="line">    geom_rug( length = unit(<span class="number">1</span>, <span class="string">"npc"</span>))+ ggtitle(<span class="string">'1'</span>) + theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">P1/(P2|P3)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/Nut51x.png" alt="Nut51x.png"><br><img src="https://s1.ax1x.com/2020/06/19/NuUuRI.png" alt="NuUuRI.png"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_segment</title>
      <link href="/R/geom_segment.html"/>
      <url>/R/geom_segment.html</url>
      
        <content type="html"><![CDATA[<h1>geom_segment</h1><p><img src="https://s1.ax1x.com/2020/06/19/NuUOSI.png" alt="NuUOSI.png"></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(ggtheme)</span><br><span class="line"></span><br><span class="line">ggplot(seals, aes(long, lat)) + theme_map()</span><br><span class="line">    geom_segment(aes(xend = long + delta_long, yend = lat + delta_lat),</span><br><span class="line">    arrow = arrow(length = unit(<span class="number">0.1</span>,<span class="string">"cm"</span>)))</span><br></pre></td></tr></table></figure></div><p><a name="L96t9"></a></p><h1>length</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">P1 &lt;- ggplot(seals, aes(long, lat)) + theme_map()+ ggtitle(<span class="string">'0.1'</span>)+</span><br><span class="line">    geom_segment(aes(xend = long + delta_long, yend = lat + delta_lat),</span><br><span class="line">    arrow = arrow(length = unit(<span class="number">0.1</span>,<span class="string">"cm"</span>)))+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">P2 &lt;- ggplot(seals, aes(long, lat)) + theme_map()+ ggtitle(<span class="string">'0.3'</span>)+</span><br><span class="line">    geom_segment(aes(xend = long + delta_long, yend = lat + delta_lat),</span><br><span class="line">    arrow = arrow(length = unit(<span class="number">0.3</span>,<span class="string">"cm"</span>)))+</span><br><span class="line">    theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">P1|P2</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuUXlt.png" alt="NuUXlt.png"></p><p><a name="odojW"></a></p><h1>Bar</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">counts &lt;- as.data.frame(table(x = rpois(<span class="number">100</span>,<span class="number">5</span>)))</span><br><span class="line">counts$x &lt;- as.numeric(as.character(counts$x))</span><br><span class="line"></span><br><span class="line">ggplot(counts, aes(x, Freq)) + theme_light()</span><br><span class="line">  geom_segment(aes(xend = x, yend = <span class="number">0</span>), size = <span class="number">10</span>, lineend = <span class="string">"butt"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuUbYd.png" alt="NuUbYd.png"></p><p><a name="jVgvF"></a></p><h1>geom_spoke</h1><br /><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">df &lt;- expand.grid(x = <span class="number">1</span>:<span class="number">10</span>, y=<span class="number">1</span>:<span class="number">10</span>)</span><br><span class="line">df$angle &lt;- runif(<span class="number">100</span>, <span class="number">0</span>, <span class="number">2</span>*pi)</span><br><span class="line">df$speed &lt;- runif(<span class="number">100</span>, <span class="number">0</span>, sqrt(<span class="number">0.1</span> * df$x))</span><br><span class="line"></span><br><span class="line">ggplot(df, aes(x, y)) + geom_point() + theme_light()+</span><br><span class="line">  geom_spoke(aes(angle = angle), radius = <span class="number">0.5</span>)</span><br></pre></td></tr></table></figure></div>![NuUqfA.png](https://s1.ax1x.com/2020/06/19/NuUqfA.png)<p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_sf</title>
      <link href="/R/geom_sf.html"/>
      <url>/R/geom_sf.html</url>
      
        <content type="html"><![CDATA[<h1>geom_sf</h1><p><img src="https://s1.ax1x.com/2020/06/19/NuadtH.png" alt="NuadtH.png"></p><p><a name="CHCOR"></a></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">nc &lt;- sf::st_read(system.file(<span class="string">"shape/nc.shp"</span>, package = <span class="string">"sf"</span>), quiet = <span class="literal">TRUE</span>)</span><br><span class="line">ggplot(nc) + geom_sf(aes(fill = AREA))+ theme_light()</span><br></pre></td></tr></table></figure></div><p>This function needs “shp” data set. Coordinate information was in geometry column<br><img src="https://s1.ax1x.com/2020/06/19/Nuawhd.png" alt="Nuawhd.png"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ggplot()</span><br><span class="line">nc &lt;- sf::st_read(system.file(<span class="string">"shape/nc.shp"</span>, package = <span class="string">"sf"</span>), quiet = <span class="literal">TRUE</span>)</span><br><span class="line">ggplot(nc) +</span><br><span class="line">  geom_sf(aes(fill = AREA))</span><br><span class="line"></span><br><span class="line">world2 &lt;- sf::st_transform(world1,</span><br><span class="line">  <span class="string">"+proj=laea +y_0=0 +lon_0=155 +lat_0=-90 +ellps=WGS84 +no_defs"</span>)</span><br><span class="line"> ggplot() + geom_sf(data = world2)+  theme_map()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuaD1I.png" alt="NuaD1I.png"></p><h1>Arguments list</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">coord_sf(xlim = <span class="literal">NULL</span>, ylim = <span class="literal">NULL</span>, expand = <span class="literal">TRUE</span>, crs = <span class="literal">NULL</span>,</span><br><span class="line">  datum = sf::st_crs(<span class="number">4326</span>), label_graticule = waiver(),</span><br><span class="line">  label_axes = waiver(), ndiscr = <span class="number">100</span>, default = <span class="literal">FALSE</span>,</span><br><span class="line">  clip = <span class="string">"on"</span>)</span><br><span class="line"></span><br><span class="line">geom_sf(mapping = aes(), data = <span class="literal">NULL</span>, stat = <span class="string">"sf"</span>,</span><br><span class="line">  position = <span class="string">"identity"</span>, na.rm = <span class="literal">FALSE</span>, show.legend = <span class="literal">NA</span>,</span><br><span class="line">  inherit.aes = <span class="literal">TRUE</span>, <span class="keyword">...</span>)</span><br><span class="line"></span><br><span class="line">geom_sf_label(mapping = aes(), data = <span class="literal">NULL</span>, stat = <span class="string">"sf_coordinates"</span>,</span><br><span class="line">  position = <span class="string">"identity"</span>, <span class="keyword">...</span>, parse = <span class="literal">FALSE</span>, nudge_x = <span class="number">0</span>,</span><br><span class="line">  nudge_y = <span class="number">0</span>, label.padding = unit(<span class="number">0.25</span>, <span class="string">"lines"</span>),</span><br><span class="line">  label.r = unit(<span class="number">0.15</span>, <span class="string">"lines"</span>), label.size = <span class="number">0.25</span>, na.rm = <span class="literal">FALSE</span>,</span><br><span class="line">  show.legend = <span class="literal">NA</span>, inherit.aes = <span class="literal">TRUE</span>, fun.geometry = <span class="literal">NULL</span>)</span><br><span class="line"></span><br><span class="line">geom_sf_text(mapping = aes(), data = <span class="literal">NULL</span>, stat = <span class="string">"sf_coordinates"</span>,</span><br><span class="line">  position = <span class="string">"identity"</span>, <span class="keyword">...</span>, parse = <span class="literal">FALSE</span>, nudge_x = <span class="number">0</span>,</span><br><span class="line">  nudge_y = <span class="number">0</span>, check_overlap = <span class="literal">FALSE</span>, na.rm = <span class="literal">FALSE</span>,</span><br><span class="line">  show.legend = <span class="literal">NA</span>, inherit.aes = <span class="literal">TRUE</span>, fun.geometry = <span class="literal">NULL</span>)</span><br><span class="line"></span><br><span class="line">stat_sf(mapping = <span class="literal">NULL</span>, data = <span class="literal">NULL</span>, geom = <span class="string">"rect"</span>,</span><br><span class="line">  position = <span class="string">"identity"</span>, na.rm = <span class="literal">FALSE</span>, show.legend = <span class="literal">NA</span>,</span><br><span class="line">  inherit.aes = <span class="literal">TRUE</span>, <span class="keyword">...</span>)</span><br></pre></td></tr></table></figure></div><p><a name="2SOp0"></a></p><h1>China City</h1><p>Specific Date is comming from <a href="https://guangchuangyu.github.io" target="_blank" rel="noopener">GuangchuangYu</a><br />location: <a href="https://github.com/GuangchuangYu/map_data" target="_blank" rel="noopener">https://github.com/GuangchuangYu/map_data</a><br />But as you know, downloading Data from Github is preaty slow.</p><p><a name="xaf8Z"></a></p><h2 id="Quick-Start"><a class="header-anchor" href="#Quick-Start"></a>Quick Start</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">data &lt;- readRDS(<span class="string">"cn_city_map.rds"</span>)</span><br><span class="line">ggplot(data) + geom_sf(aes(fill = OBJECTID))+ theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuaN7D.jpg" alt="NuaN7D.jpg"></p><p>Location for main City (Data is from <a href="https://www.cnblogs.com/skyme/p/5182149.html" target="_blank" rel="noopener">skyme</a>)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">City_loc = read.csv(text = <span class="string">"城市,jd,wd</span></span><br><span class="line"><span class="string">北京,116.4666667,39.9</span></span><br><span class="line"><span class="string">上海,121.4833333,31.23333333</span></span><br><span class="line"><span class="string">天津,117.1833333,39.15</span></span><br><span class="line"><span class="string">重庆,106.5333333,29.53333333</span></span><br><span class="line"><span class="string">哈尔滨,126.6833333,45.75</span></span><br><span class="line"><span class="string">长春,125.3166667,43.86666667</span></span><br><span class="line"><span class="string">沈阳,123.4,41.83333333</span></span><br><span class="line"><span class="string">呼和浩特,111.8,40.81666667</span></span><br><span class="line"><span class="string">石家庄,114.4666667,38.03333333</span></span><br><span class="line"><span class="string">太原,112.5666667,37.86666667</span></span><br><span class="line"><span class="string">济南,117,36.63333333</span></span><br><span class="line"><span class="string">郑州,113.7,34.8</span></span><br><span class="line"><span class="string">西安,108.9,34.26666667</span></span><br><span class="line"><span class="string">兰州,103.8166667,36.05</span></span><br><span class="line"><span class="string">银川,106.2666667,38.33333333</span></span><br><span class="line"><span class="string">西宁,101.75,36.63333333</span></span><br><span class="line"><span class="string">乌鲁木齐,87.6,43.8</span></span><br><span class="line"><span class="string">合肥,117.3,31.85</span></span><br><span class="line"><span class="string">南京,118.8333333,32.03333333</span></span><br><span class="line"><span class="string">杭州,120.15,30.23333333</span></span><br><span class="line"><span class="string">长沙,113,28.18333333</span></span><br><span class="line"><span class="string">南昌,115.8666667,28.68333333</span></span><br><span class="line"><span class="string">武汉,114.35,30.61666667</span></span><br><span class="line"><span class="string">成都,104.0833333,30.65</span></span><br><span class="line"><span class="string">贵阳,106.7,26.58333333</span></span><br><span class="line"><span class="string">福州,119.3,26.08333333</span></span><br><span class="line"><span class="string">台北,121.5166667,25.05</span></span><br><span class="line"><span class="string">广州,113.25,23.13333333</span></span><br><span class="line"><span class="string">海口,110.3333333,20.03333333</span></span><br><span class="line"><span class="string">南宁,108.3333333,22.8</span></span><br><span class="line"><span class="string">昆明,102.6833333,25</span></span><br><span class="line"><span class="string">拉萨,91.16666667,29.66666667</span></span><br><span class="line"><span class="string">香港,114.1666667,22.3</span></span><br><span class="line"><span class="string">澳门,113.5,22.2"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="b2SLf"></a></p><h2 id="Pinning-the-cities"><a class="header-anchor" href="#Pinning-the-cities"></a>Pinning the cities</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggrepel)</span><br><span class="line"></span><br><span class="line">ggplot(data) + geom_sf(aes(fill = OBJECTID))+</span><br><span class="line">    geom_point(data=City_loc,aes(x=jd,y=wd))+</span><br><span class="line">    geom_text_repel(data=City_loc,aes(x=jd,y=wd,label=城市))+</span><br><span class="line">    theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/NuaB9A.png" alt="NuaB9A.png"></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_step</title>
      <link href="/R/geom_step.html"/>
      <url>/R/geom_step.html</url>
      
        <content type="html"><![CDATA[<h1 id="geom-step"><a href="#geom-step" class="headerlink" title="geom_step"></a>geom_step</h1><p><a name="HSJHQ"></a></p><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"></span><br><span class="line">d=data.frame(x=c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">9</span>), y=c(<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">6</span>,<span class="number">7</span>,<span class="number">9</span>))</span><br><span class="line"></span><br><span class="line">ggplot() + theme_light()+ geom_step(data=d, mapping=aes(x=x, y=y)) +</span><br><span class="line">geom_step(data=d, mapping=aes(x=x, y=y), direction=<span class="string">"vh"</span>, linetype=<span class="number">3</span>) +</span><br><span class="line">geom_point(data=d, mapping=aes(x=x, y=y), color=<span class="string">"red"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/19/Nuwmi4.png" alt="Nuwmi4.png"></p><p><a name="FG8Ad"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_tile</title>
      <link href="/R/geom_tile.html"/>
      <url>/R/geom_tile.html</url>
      
        <content type="html"><![CDATA[<h1>geom_tile</h1><p><a href="https://imgchr.com/i/aXYd76" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/11/aXYd76.md.png" alt="aXYd76.md.png"></a></p><p><a name="6qOmi"></a></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">df &lt;- data.frame(</span><br><span class="line">  x = rep(c(<span class="number">2</span>, <span class="number">5</span>, <span class="number">7</span>, <span class="number">9</span>, <span class="number">12</span>), <span class="number">2</span>),</span><br><span class="line">  y = rep(c(<span class="number">1</span>, <span class="number">2</span>), each = <span class="number">5</span>),</span><br><span class="line">  z = factor(rep(<span class="number">1</span>:<span class="number">5</span>, each = <span class="number">2</span>)),</span><br><span class="line">  w = rep(diff(c(<span class="number">0</span>, <span class="number">4</span>, <span class="number">6</span>, <span class="number">8</span>, <span class="number">10</span>, <span class="number">14</span>)), <span class="number">2</span>)</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line">ggplot(df, aes(x, y)) + theme_light()+</span><br><span class="line">  geom_tile(aes(fill = z), colour = <span class="string">"grey50"</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line"></span><br><span class="line">P1 &lt;- ggplot(df, aes(x, y)) + theme_light()+ ggtitle(<span class="string">'P1'</span>)+</span><br><span class="line">  geom_tile(aes(fill = z), colour = <span class="string">"grey50"</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">P2 &lt;- ggplot(df, aes(x, y, width = w)) + theme_light()+ ggtitle(<span class="string">'P2'</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))+</span><br><span class="line">  geom_tile(aes(fill = z), colour = <span class="string">"grey50"</span>)</span><br><span class="line"></span><br><span class="line">P3 &lt;- ggplot(df, aes(x, y))+ geom_bar(aes(fill=z),stat=<span class="string">'identity'</span>)+ theme_light()+</span><br><span class="line">  ggtitle(<span class="string">'bar plot'</span>)+ theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">(P1|P2)/P3</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aXY0AK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/11/aXY0AK.md.png" alt="aXY0AK.md.png"></a></p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_tufteboxplot</title>
      <link href="/R/geom_tufteboxplot.html"/>
      <url>/R/geom_tufteboxplot.html</url>
      
        <content type="html"><![CDATA[<h1>geom_tufteboxplot</h1><p><img src="https://s1.ax1x.com/2020/08/13/dSWoX4.png" alt="123"></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(patchwork)</span><br><span class="line">p &lt;- ggplot(mtcars, aes(factor(cyl), mpg))</span><br><span class="line"><span class="comment">## with a point for the median and lines for whiskers</span></span><br><span class="line">P1 &lt;- p + geom_tufteboxplot() + theme_light()+ ggtitle(<span class="string">'P1'</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"><span class="comment">## with a line for the interquartile range and points for whiskers</span></span><br><span class="line">P2 &lt;- p + geom_tufteboxplot(median.type = <span class="string">"line"</span>, whisker.type = <span class="string">"point"</span>, hoffset = <span class="number">0</span>)+</span><br><span class="line">  theme_light()+ ggtitle(<span class="string">'P2'</span>)+theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"><span class="comment">## with a wide line for the interquartile range and lines for whiskers</span></span><br><span class="line">P3 &lt;- p + geom_tufteboxplot(median.type = <span class="string">"line"</span>, hoffset = <span class="number">0</span>, width = <span class="number">3</span>) +</span><br><span class="line">  theme_light()+ ggtitle(<span class="string">'P3'</span>)+theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"><span class="comment">## with an offset line for the interquartile range and lines for whiskers</span></span><br><span class="line">P4 &lt;- p + geom_tufteboxplot(median.type = <span class="string">"line"</span>) + theme_light()+ ggtitle(<span class="string">'P4'</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line">P5 &lt;- p + geom_point() + theme_light() + ggtitle(<span class="string">'Scatter'</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line">P6 &lt;- p + geom_boxplot()+ theme_light()+ ggtitle(<span class="string">'Boxplot'</span>)+</span><br><span class="line">  theme(plot.title = element_text(hjust = <span class="number">0.5</span>))</span><br><span class="line"></span><br><span class="line">(P1|P2|P3)/(P5|P4|P6)</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>geom_violin</title>
      <link href="/R/geom_violin.html"/>
      <url>/R/geom_violin.html</url>
      
        <content type="html"><![CDATA[<h1>geom_violin</h1><p><img src="https://s1.ax1x.com/2020/08/13/dShnG6.png" alt="img"><a name="wGube"></a></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"></span><br><span class="line">p &lt;- ggplot(mtcars, aes(factor(cyl), mpg))</span><br><span class="line">p + geom_violin()+ geom_point() + theme_light()</span><br></pre></td></tr></table></figure></div><p><a name="dw7gw"></a></p><h2 id="scale"><a class="header-anchor" href="#scale"></a>scale</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p + geom_violin(scale = <span class="string">"width"</span>)+ theme_light()</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dShmPx.png" alt="img"></p><p><a name="0p83A"></a></p><h2 id="draw-quantiles"><a class="header-anchor" href="#draw-quantiles"></a>draw_quantiles</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p + geom_violin(aes(fill = factor(cyl)),draw_quantiles = c(<span class="number">0.25</span>, <span class="number">0.5</span>, <span class="number">0.75</span>))</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dShZI1.png" alt="img.png"></p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ggalluvial (Picture needed)</title>
      <link href="/R/ggalluvial.html"/>
      <url>/R/ggalluvial.html</url>
      
        <content type="html"><![CDATA[<h1 id="ggalluvial-Picture-needed"><a href="#ggalluvial-Picture-needed" class="headerlink" title="ggalluvial (Picture needed)"></a>ggalluvial (Picture needed)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">vignette(topic = <span class="string">"ggalluvial"</span>, package = <span class="string">"ggalluvial"</span>)</span><br><span class="line"><span class="keyword">library</span>(ggalluvial)</span><br><span class="line">titanic_wide &lt;- data.frame(Titanic)</span><br><span class="line">ggplot(data = titanic_wide,</span><br><span class="line">aes(axis1 = Class, axis2 = Sex, axis3 = Age,</span><br><span class="line">weight = Freq)) +</span><br><span class="line">scale_x_discrete(limits = c(<span class="string">"Class"</span>, <span class="string">"Sex"</span>, <span class="string">"Age"</span>), expand = c(<span class="number">.1</span>, <span class="number">.05</span>)) +</span><br><span class="line">geom_alluvium(aes(fill = Survived)) +</span><br><span class="line">geom_stratum() + geom_text(stat = <span class="string">"stratum"</span>, label.strata = <span class="literal">TRUE</span>) +</span><br><span class="line">theme_minimal() +</span><br><span class="line">ggtitle(<span class="string">"passengers on the maiden voyage of the Titanic"</span>,</span><br><span class="line"><span class="string">"stratified by demographics and survival"</span>)</span><br><span class="line">ggplot(as.data.frame(UCBAdmissions),</span><br><span class="line">aes(weight = Freq, axis1 = Gender, axis2 = Dept)) +</span><br><span class="line">geom_alluvium(aes(fill = Admit), width = <span class="number">1</span>/<span class="number">12</span>) +</span><br><span class="line">geom_stratum(width = <span class="number">1</span>/<span class="number">12</span>, fill = <span class="string">"black"</span>, color = <span class="string">"grey"</span>) +</span><br><span class="line">geom_label(stat = <span class="string">"stratum"</span>, label.strata = <span class="literal">TRUE</span>) +</span><br><span class="line">scale_x_continuous(breaks = <span class="number">1</span>:<span class="number">2</span>, labels = c(<span class="string">"Gender"</span>, <span class="string">"Dept"</span>)) +</span><br><span class="line">scale_fill_brewer(type = <span class="string">"qual"</span>, palette = <span class="string">"Set1"</span>) +</span><br><span class="line">ggtitle(<span class="string">"UC Berkeley admissions and rejections, by sex and department"</span>)</span><br><span class="line">ggplot(as.data.frame(Titanic),</span><br><span class="line">aes(weight = Freq,</span><br><span class="line">axis1 = Survived, axis2 = Sex, axis3 = Class)) +</span><br><span class="line">geom_alluvium(aes(fill = Class),</span><br><span class="line">width = <span class="number">0</span>, knot.pos = <span class="number">0</span>, reverse = <span class="literal">FALSE</span>) +</span><br><span class="line">guides(fill = <span class="literal">FALSE</span>) +</span><br><span class="line">geom_stratum(width = <span class="number">1</span>/<span class="number">8</span>, reverse = <span class="literal">FALSE</span>) +</span><br><span class="line">geom_text(stat = <span class="string">"stratum"</span>, label.strata = <span class="literal">TRUE</span>, reverse = <span class="literal">FALSE</span>) +</span><br><span class="line">scale_x_continuous(breaks = <span class="number">1</span>:<span class="number">3</span>, labels = c(<span class="string">"Survived"</span>, <span class="string">"Sex"</span>, <span class="string">"Class"</span>)) +</span><br><span class="line">coord_flip() +</span><br><span class="line">ggtitle(<span class="string">"Titanic survival by class and sex"</span>)</span><br><span class="line"><span class="number">5.</span> 绘制非等高冲击图</span><br><span class="line"><span class="keyword">library</span>(<span class="string">'alluvial'</span>)</span><br><span class="line">data(Refugees, package = <span class="string">"alluvial"</span>)</span><br><span class="line">country_regions &lt;- c(</span><br><span class="line">Afghanistan = <span class="string">"Middle East"</span>,</span><br><span class="line">Burundi = <span class="string">"Central Africa"</span>,</span><br><span class="line">Congo DRC = <span class="string">"Central Africa"</span>,</span><br><span class="line">Iraq = <span class="string">"Middle East"</span>,</span><br><span class="line">Myanmar = <span class="string">"Southeast Asia"</span>,</span><br><span class="line">Palestine = <span class="string">"Middle East"</span>,</span><br><span class="line">Somalia = <span class="string">"Horn of Africa"</span>,</span><br><span class="line">Sudan = <span class="string">"Central Africa"</span>,</span><br><span class="line">Syria = <span class="string">"Middle East"</span>,</span><br><span class="line">Vietnam = <span class="string">"Southeast Asia"</span>)</span><br><span class="line">Refugeescountry]</span><br><span class="line">ggplot(data = Refugees,</span><br><span class="line">aes(x = year, weight = refugees, alluvium = country)) +</span><br><span class="line">geom_alluvium(aes(fill = country, colour = country),</span><br><span class="line">alpha = <span class="number">.75</span>, decreasing = <span class="literal">FALSE</span>) +</span><br><span class="line">scale_x_continuous(breaks = seq(<span class="number">2003</span>, <span class="number">2013</span>, <span class="number">2</span>)) +</span><br><span class="line">theme(axis.text.x = element_text(angle = -<span class="number">30</span>, hjust = <span class="number">0</span>)) +</span><br><span class="line">scale_fill_brewer(type = <span class="string">"qual"</span>, palette = <span class="string">"Set3"</span>) +</span><br><span class="line">scale_color_brewer(type = <span class="string">"qual"</span>, palette = <span class="string">"Set3"</span>) +</span><br><span class="line">facet_wrap(~ region, scales = <span class="string">"fixed"</span>) +</span><br><span class="line">ggtitle(<span class="string">"refugee volume by country and region of origin"</span>)</span><br><span class="line"><span class="comment">##6. 等高非等量关系</span></span><br><span class="line">data(majors)</span><br><span class="line">majorscurriculum)</span><br><span class="line">ggplot(majors,</span><br><span class="line">aes(x = semester, stratum = curriculum, alluvium = student,</span><br><span class="line">fill = curriculum, label = curriculum)) +</span><br><span class="line">scale_fill_brewer(type = <span class="string">"qual"</span>, palette = <span class="string">"Set2"</span>) +</span><br><span class="line">geom_flow(stat = <span class="string">"alluvium"</span>, lode.guidance = <span class="string">"rightleft"</span>,</span><br><span class="line">color = <span class="string">"darkgray"</span>) +</span><br><span class="line">geom_stratum() +</span><br><span class="line">theme(legend.position = <span class="string">"bottom"</span>) +</span><br><span class="line">ggtitle(<span class="string">"student curricula across several semesters"</span>)</span><br><span class="line"><span class="number">7.</span> 工作状态时间变化图</span><br><span class="line">data(vaccinations)</span><br><span class="line">levels(vaccinationsresponse))</span><br><span class="line">ggplot(vaccinations,</span><br><span class="line">aes(x = survey, stratum = response, alluvium = subject,</span><br><span class="line">weight = freq,</span><br><span class="line">fill = response, label = response)) +</span><br><span class="line">geom_flow() +</span><br><span class="line">geom_stratum(alpha = <span class="number">.5</span>) +</span><br><span class="line">geom_text(stat = <span class="string">"stratum"</span>, size = <span class="number">3</span>) +</span><br><span class="line">theme(legend.position = <span class="string">"none"</span>) +</span><br><span class="line">ggtitle(<span class="string">"vaccination survey responses at three points in time"</span>)</span><br><span class="line"><span class="number">8.</span> 分类学门水平相对丰度实战</span><br><span class="line">df=data.frame(</span><br><span class="line">Phylum=c(<span class="string">"Ruminococcaceae"</span>,<span class="string">"Bacteroidaceae"</span>,<span class="string">"Eubacteriaceae"</span>,<span class="string">"Lachnospiraceae"</span>,<span class="string">"Porphyromonadaceae"</span>),</span><br><span class="line">GroupA=c(<span class="number">37.7397</span>,<span class="number">31.34317</span>,<span class="number">222.08827</span>,<span class="number">5.08956</span>,<span class="number">3.7393</span>),</span><br><span class="line">GroupB=c(<span class="number">113.2191</span>,<span class="number">94.02951</span>,<span class="number">66.26481</span>,<span class="number">15.26868</span>,<span class="number">11.2179</span>),</span><br><span class="line">GroupC=c(<span class="number">123.2191</span>,<span class="number">94.02951</span>,<span class="number">46.26481</span>,<span class="number">35.26868</span>,<span class="number">1.2179</span>),</span><br><span class="line">GroupD=c(<span class="number">37.7397</span>,<span class="number">31.34317</span>,<span class="number">222.08827</span>,<span class="number">5.08956</span>,<span class="number">3.7393</span>)</span><br><span class="line">)</span><br><span class="line">数据转换长表格</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line">melt_df = melt(df)</span><br><span class="line">绘制分组对应的分类学，有点像circos</span><br><span class="line">ggplot(data = melt_df,</span><br><span class="line">aes(axis1 = Phylum, axis2 = variable,</span><br><span class="line">weight = value)) +</span><br><span class="line">scale_x_discrete(limits = c(<span class="string">"Phylum"</span>, <span class="string">"variable"</span>), expand = c(<span class="number">.1</span>, <span class="number">.05</span>)) +</span><br><span class="line">geom_alluvium(aes(fill = Phylum)) +</span><br><span class="line">geom_stratum() + geom_text(stat = <span class="string">"stratum"</span>, label.strata = <span class="literal">TRUE</span>) +</span><br><span class="line">theme_minimal() +</span><br><span class="line">ggtitle(<span class="string">"Phlyum abundance in each group"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>R-gganimate</title>
      <link href="/R/gganimate.html"/>
      <url>/R/gganimate.html</url>
      
        <content type="html"><![CDATA[<h1>R-gganimate</h1><p>library(ggplot2)<br /><br>library(gganimate)</p><p>ggplot(mtcars, aes(factor(cyl), mpg)) +<br /><br>geom_boxplot() +</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">TB= data.frame(Shrink(world,<span class="number">40</span>),Group=<span class="number">1</span>)</span><br><span class="line">Num=<span class="number">1</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> c(<span class="number">1</span>:<span class="number">36</span>))&#123;</span><br><span class="line">  tmp = data.frame(Shrink(world,<span class="number">40</span>),Group=<span class="number">1</span>)</span><br><span class="line">  Num= Num+<span class="number">1</span></span><br><span class="line">  tmp$lat = tmp$lat +rnorm(nrow(tmp),<span class="number">0</span>,<span class="number">1</span>)</span><br><span class="line">  tmp$Group=Num</span><br><span class="line">  TB = rbind(TB,tmp)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">ggplot()+ geom_point(data=TB,aes(x=long, y=lat),size=<span class="number">0.3</span>, color=<span class="string">"#00518E"</span>) +</span><br><span class="line">  theme_map() + coord_map(<span class="string">"ortho"</span>, orientation = c(<span class="number">30</span>, <span class="number">100</span>, <span class="number">0</span>)) +</span><br><span class="line">  transition_time(Group)</span><br><span class="line"></span><br><span class="line">anim_save(<span class="string">"map.gif"</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/19/XLQgcEmJGlsOhC6.gif" alt="Earth"></p><h1>Here comes the gganimate code</h1><p>transition_states(<br /><br>gear,<br /><br>transition_length = 2,<br /><br>state_length = 1<br /><br>) +<br /><br>enter_fade() +<br /><br>exit_shrink() +<br /><br>ease_aes(‘sine-in-out’)</p><p><a name="4edfa2d3"></a></p><h1>Animate bar</h1><p><a href="https://gganimate.com/" target="_blank" rel="noopener">https://gganimate.com/</a></p><p>library(gapminder)</p><p>ggplot(gapminder, aes(gdpPercap, lifeExp, size = pop, colour = country)) +<br /><br>geom_point(alpha = 0.7, show.legend = FALSE) +<br /><br>scale_colour_manual(values = country_colors) +<br /><br>scale_size(range = c(2, 12)) +<br /><br>scale_x_log10() +<br /><br>facet_wrap(~continent) +</p><p><a name="67cf702a"></a></p><h1>Here comes the gganimate specific bits</h1><p>labs(title = ‘Year: {frame_time}’, x = ‘GDP per capita’, y = ‘life expectancy’) +<br /><br>transition_time(year) +<br /><br>ease_aes(‘linear’)</p><p><a name="save"></a></p><h1>save</h1><p>anim_save(“test.gif”)</p><p>d &lt;- trans_3d_2d(Ball[1:3])<br /><br>d<img src="https://g.yuque.com/gr/latex?Group%20%3D%20Ball#card=math&amp;code=Group%20%3D%20Ball&amp;height=18&amp;width=101" alt="wqe">X4</p><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>ggtree</title>
      <link href="/R/ggtree.html"/>
      <url>/R/ggtree.html</url>
      
        <content type="html"><![CDATA[<h1 id="ggtree"><a href="#ggtree" class="headerlink" title="ggtree"></a>ggtree</h1><p>author’s post:<a href="https://cosx.org/2015/11/to-achieve-the-visualization-and-annotation-of-evolutionary-tree-using-ggtree" target="_blank" rel="noopener">https://cosx.org/2015/11/to-achieve-the-visualization-and-annotation-of-evolutionary-tree-using-ggtree</a></p><p><a name="byfQw"></a></p><h1 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"ggtree"</span>)</span><br><span class="line">tree &lt;- read.tree(<span class="string">"file"</span>)</span><br><span class="line">ggplot(tree, aes(x, y)) + geom_tree() + theme_tree() + geom_tiplab(size=<span class="number">5</span>, color=<span class="string">"purple"</span>) +xlim(<span class="literal">NA</span>, <span class="number">0.04</span>)</span><br></pre></td></tr></table></figure></div><p><a name="PuN8f"></a></p><h1 id="Installation"><a href="#Installation" class="headerlink" title="Installation"></a>Installation</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">source</span>(<span class="string">"https://bioconductor.org/biocLite.R"</span>)</span><br><span class="line"><span class="comment"># biocLite("BiocUpgrade") # you may need this</span></span><br><span class="line">BiocManager::install(<span class="string">'ggree'</span>)</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1 id="More"><a href="#More" class="headerlink" title="More"></a>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>jpeg: reading color from img</title>
      <link href="/R/jpg_reading_c.html"/>
      <url>/R/jpg_reading_c.html</url>
      
        <content type="html"><![CDATA[<h1 id="jpeg-reading-color-from-img"><a href="#jpeg-reading-color-from-img" class="headerlink" title="jpeg: reading color from img"></a>jpeg: reading color from img</h1><p><a name="bYAmA"></a></p><h1 id="配色难题"><a href="#配色难题" class="headerlink" title="配色难题"></a>配色难题</h1><p>#Reading color from the image</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(jpeg);<span class="keyword">library</span>(reshape2)</span><br><span class="line">picture &lt;- readJPEG(<span class="string">"~/Pictures/test.jpg"</span>)</span><br><span class="line">longImage &lt;- melt(picture)</span><br><span class="line">rgbImage &lt;- reshape(longImage, timevar=<span class="string">'Var3'</span>,idvar=c(<span class="string">'Var1'</span>,<span class="string">'Var2'</span>), direction=<span class="string">'wide'</span>)</span><br><span class="line">colorColumns&lt;- rgbImage[, substr(colnames(rgbImage), <span class="number">1</span>, <span class="number">5</span>)== <span class="string">"value"</span>]</span><br><span class="line">Color_B  = data.frame(sort(table(rgb(colorColumns)),decreasing=<span class="literal">T</span>))[[<span class="number">1</span>]]</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Common Library for R</title>
      <link href="/R/library.html"/>
      <url>/R/library.html</url>
      
        <content type="html"><![CDATA[<h1>Common Library for R</h1><h1>Packages from Cran</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"ggplot2"</span>)</span><br><span class="line">install.packages(<span class="string">"ggalluvial"</span>)</span><br><span class="line">install.packages(<span class="string">'circlize'</span>)</span><br><span class="line">install.packages(<span class="string">'cowplot'</span>)</span><br><span class="line">install.packages(<span class="string">'dplyr'</span>)</span><br><span class="line">install.packages(<span class="string">'ellipse'</span>)</span><br><span class="line">install.packages(<span class="string">'fastcluster'</span>)</span><br><span class="line">install.packages(<span class="string">'ggplotify'</span>)</span><br><span class="line">install.packages(<span class="string">"ggthemes"</span>)</span><br><span class="line">install.packages(<span class="string">"reshape2"</span>)</span><br><span class="line">install.packages(<span class="string">"htmlwidgets"</span>)</span><br><span class="line">install.packages(<span class="string">"pheatmap"</span>)</span><br><span class="line">install.packages(<span class="string">"gapminder"</span>)</span><br><span class="line">install.packages(<span class="string">"GGally"</span>)</span><br><span class="line">install.packages(<span class="string">"ggdendro"</span>)</span><br><span class="line">install.packages(<span class="string">"ggrepel"</span>)</span><br><span class="line">install.packages(<span class="string">"httr"</span>)</span><br><span class="line">install.packages(<span class="string">"igraph"</span>)</span><br><span class="line">install.packages(<span class="string">"jiebaR"</span>)</span><br><span class="line">install.packages(<span class="string">"jpeg"</span>)</span><br><span class="line">install.packages(<span class="string">"htmlwidgets"</span>)</span><br><span class="line">install.packages(<span class="string">"jsonlite"</span>)</span><br><span class="line">install.packages(<span class="string">"magick"</span>)</span><br><span class="line">install.packages(<span class="string">"maps"</span>)</span><br><span class="line">install.packages(<span class="string">"modelr"</span>)</span><br><span class="line">install.packages(<span class="string">"networkD3"</span>)</span><br><span class="line">install.packages(<span class="string">"pacman"</span>)</span><br><span class="line">install.packages(<span class="string">"patchwork"</span>)</span><br><span class="line">install.packages(<span class="string">"plotly"</span>)</span><br><span class="line">install.packages(<span class="string">"plotrix"</span>)</span><br><span class="line">install.packages(<span class="string">"psych"</span>)</span><br><span class="line">install.packages(<span class="string">"randomForest"</span>)</span><br><span class="line">install.packages(<span class="string">"rayrender"</span>)</span><br><span class="line">install.packages(<span class="string">"readxl"</span>)</span><br><span class="line">install.packages(<span class="string">"rpart"</span>)</span><br><span class="line">install.packages(<span class="string">"Rwordseg"</span>)</span><br><span class="line">install.packages(<span class="string">"SnowballC"</span>)</span><br><span class="line">install.packages(<span class="string">"swirl"</span>)</span><br><span class="line">install.packages(<span class="string">"tidyr"</span>)</span><br><span class="line">install.packages(<span class="string">"tidyverse"</span>)</span><br><span class="line">install.packages(<span class="string">"tm"</span>)</span><br><span class="line">install.packages(<span class="string">"WGCNA"</span>)</span><br><span class="line">install.packages(<span class="string">"wordcloud2"</span>)</span><br><span class="line">install.packages(<span class="string">"xgboost"</span>)</span><br><span class="line">install.packages(<span class="string">"fmsb"</span>)</span><br><span class="line">install.packages(<span class="string">'rcmdcheck'</span>)</span><br><span class="line">install.packages(<span class="string">'devtools'</span>)</span><br><span class="line">install.packages(<span class="string">"rgl"</span>)</span><br><span class="line">install.packages(<span class="string">'ggalt'</span>) <span class="comment"># Map data</span></span><br></pre></td></tr></table></figure></div><h1>Packages for Biology</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (!requireNamespace(<span class="string">"BiocManager"</span>, quietly = <span class="literal">TRUE</span>))</span><br><span class="line">    install.packages(<span class="string">"BiocManager"</span>)</span><br><span class="line"></span><br><span class="line">BiocManager::install(<span class="string">"Biobase"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"edgeR"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"Biostrings"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"clusterProfiler"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"ggtree"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"org.Hs.eg.db"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"pathview"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"limma"</span>)</span><br><span class="line">BiocManager::install(<span class="string">"qvalue"</span>)</span><br></pre></td></tr></table></figure></div><h1>Packages from github</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">'remotes'</span>)</span><br><span class="line">remotes::install_github(<span class="string">"AckerDWM/gg3D"</span>)</span><br><span class="line">remotes::install_github(<span class="string">"tylermorganwall/coronaobj"</span>)</span><br><span class="line">remotes::install_github(<span class="string">"hrbrmstr/ggalt"</span>)</span><br><span class="line">remotes::install_github(<span class="string">"jennybc/gapminder"</span>)</span><br><span class="line">remotes::install_github(<span class="string">"jayjacobs/ggcal"</span>)</span><br><span class="line">remotes::install_github(<span class="string">'pzhaonet/ncovr'</span>)</span><br><span class="line">remotes::install_github(<span class="string">'ricardo-bion/ggradar'</span>)</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>magick (Picture needed)</title>
      <link href="/R/magick_png.html"/>
      <url>/R/magick_png.html</url>
      
        <content type="html"><![CDATA[<h1 id="magick-Picture-needed"><a href="#magick-Picture-needed" class="headerlink" title="magick (Picture needed)"></a>magick (Picture needed)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"magick"</span>)</span><br><span class="line">tiger &lt;- image_read_svg(<span class="string">'http://jeroen.github.io/images/tiger.svg'</span>, width = <span class="number">400</span>)</span><br><span class="line">print(tiger)</span><br><span class="line"><span class="comment">#rewrite</span></span><br><span class="line">image_write(tiger, path = <span class="string">"tiger.png"</span>, format = <span class="string">"png"</span>)</span><br><span class="line"><span class="comment">#inf</span></span><br><span class="line">image_info(tiger_png)</span><br><span class="line"><span class="comment">#Edit</span></span><br><span class="line">image_crop(image, <span class="string">"100x150+50"</span>): crop out width:100px and height:150px starting +50px from the left</span><br><span class="line">image_scale(image, <span class="string">"200"</span>): resize proportionally to width: 200px</span><br><span class="line">image_scale(image, <span class="string">"x200"</span>): resize proportionally to height: 200px</span><br><span class="line">image_fill(image, <span class="string">"blue"</span>, <span class="string">"+100+200"</span>): flood fill with blue starting at the point at x:<span class="number">100</span>, y:<span class="number">200</span></span><br><span class="line">image_border(frink, <span class="string">"red"</span>, <span class="string">"20x10"</span>): adds a border of 20px left+right and 10px top+bottom</span><br><span class="line">img &lt;- image_resize(logo, <span class="string">"300x300"</span>)</span><br><span class="line">img_blurred &lt;- image_convolve(img, kern)</span><br><span class="line">image_append(c(img, img_blurred))</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>nCov visualization</title>
      <link href="/R/nCov-visualization.html"/>
      <url>/R/nCov-visualization.html</url>
      
        <content type="html"><![CDATA[<h1 id="nCov-visualization"><a href="#nCov-visualization" class="headerlink" title="nCov visualization"></a>nCov visualization</h1><p><br />Github project: <a href="https://github.com/tylermorganwall" target="_blank" rel="noopener">tylermorganwall</a>/<strong><a href="https://github.com/tylermorganwall/coronaobj" target="_blank" rel="noopener">coronaobj</a></strong><br /></p><p><a name="2WjTv"></a></p><h1 id="Packages-Install"><a href="#Packages-Install" class="headerlink" title="Packages Install"></a>Packages Install</h1><p><a name="ZEugX"></a></p><h2 id="Install-through-remotes"><a href="#Install-through-remotes" class="headerlink" title="Install through remotes"></a>Install through remotes</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">remotes::install_github(<span class="string">"tylermorganwall/rayrender"</span>)</span><br><span class="line">remotes::install_github(<span class="string">"tylermorganwall/coronaobj"</span>)</span><br></pre></td></tr></table></figure></div><p>(An extral data with  91.2MB is in <a href="https://github.com/tylermorganwall/coronaobj/tree/master/inst/extdata" target="_blank" rel="noopener">inst/extdata</a>. So, it may take a while to installing it)<br /></p><p><a name="94An8"></a></p><h2 id="Install-from-local"><a href="#Install-from-local" class="headerlink" title="Install from local"></a>Install from local</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/tylermorganwall/rayrender.git</span><br><span class="line">git <span class="built_in">clone</span> https://github.com/tylermorganwall/coronaobj.git</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">"/home/ken/test/rayrender/"</span>,repos = <span class="literal">NULL</span>)</span><br><span class="line">install.packages(<span class="string">"/home/ken/test/coronaobj/"</span>,repos = <span class="literal">NULL</span>)</span><br></pre></td></tr></table></figure></div><p><a name="oDJ9Y"></a></p><h1 id="Start-with-coronaobj"><a href="#Start-with-coronaobj" class="headerlink" title="Start with coronaobj"></a>Start with coronaobj</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(coronaobj)</span><br><span class="line"><span class="keyword">library</span>(rayrender)</span><br><span class="line"></span><br><span class="line">write_corona_obj(<span class="string">"defaults.obj"</span>) <span class="comment"># write the obj file to local</span></span><br><span class="line"></span><br><span class="line">obj_model(<span class="string">"defaults.obj"</span>, vertex_colors = <span class="literal">TRUE</span>) %&gt;%</span><br><span class="line">  add_object(sphere(y=<span class="number">10</span>,z=<span class="number">10</span>,x=<span class="number">10</span>, material=light(intensity=<span class="number">100</span>))) %&gt;%</span><br><span class="line">  add_object(sphere(y=<span class="number">10</span>,z=<span class="number">10</span>,x=-<span class="number">10</span>, material=light(intensity=<span class="number">100</span>))) %&gt;%</span><br><span class="line">  render_scene(parallel=<span class="literal">TRUE</span>, samples = <span class="number">1000</span>, fov = <span class="number">7</span>, min_variance=<span class="number">0</span>, focal_distance = <span class="number">9.6</span>,</span><br><span class="line">               width=<span class="number">800</span>,height=<span class="number">800</span>)</span><br></pre></td></tr></table></figure></div><p>It takes me about 30min…<br /><br><img src="https://i.loli.net/2020/06/20/LwcMThRQurxa23f.jpg" alt="1586932705100-52454ad9-bdec-498e-bb87-8bb61554de89"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># above right</span></span><br><span class="line">obj_model(<span class="string">"defaults.obj"</span>, vertex_colors = <span class="literal">TRUE</span>) %&gt;%</span><br><span class="line">  add_object(sphere(y=<span class="number">10</span>,z=<span class="number">10</span>,x=<span class="number">10</span>, material=light(color=<span class="string">"lightblue"</span>,intensity=<span class="number">160</span>))) %&gt;%</span><br><span class="line">  add_object(sphere(y=<span class="number">10</span>,z=<span class="number">10</span>,x=-<span class="number">10</span>, material=light(color=<span class="string">"orange"</span>,intensity=<span class="number">160</span>))) %&gt;%</span><br><span class="line">  add_object(sphere(y=-<span class="number">10</span>,z=-<span class="number">5</span>,material=light(color=<span class="string">"purple"</span>, intensity = <span class="number">160</span>))) %&gt;%</span><br><span class="line">  render_scene(parallel=<span class="literal">TRUE</span>, samples = <span class="number">1000</span>, fov = <span class="number">7</span>, min_variance=<span class="number">0</span>, focal_distance = <span class="number">9.6</span>,</span><br><span class="line">               aperture=<span class="number">0.5</span>, width=<span class="number">800</span>,height=<span class="number">800</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://i.loli.net/2020/06/20/LBFDxuv3UniCAo2.jpg" alt="1586932810859-46f7ae3b-37b7-4161-8373-c6c0a16d1c9e"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>nCov(新冠状病毒数据获取与可视化)</title>
      <link href="/R/nCov.html"/>
      <url>/R/nCov.html</url>
      
        <content type="html"><![CDATA[<h1>nCov(新冠状病毒数据获取与可视化)</h1><p><a name="sYvc9"></a></p><h1>1 Loading Packages</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"httr"</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"jsonlite"</span>)</span><br></pre></td></tr></table></figure></div><p><a name="54cF1"></a></p><h1>2 Data acquiring</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">base &lt;- <span class="string">'https://lab.isaaclin.cn/nCoV/api/'</span> <span class="comment"># api 网址</span></span><br><span class="line">port &lt;- <span class="string">'area'</span> <span class="comment">#接口</span></span><br><span class="line">get_raw &lt;- GET(paste0(base, port)) <span class="comment"># 获取链接</span></span><br><span class="line">get_text &lt;- content(get_raw, <span class="string">"text"</span>) <span class="comment"># 获取数据</span></span><br><span class="line">ncov_area &lt;- fromJSON(get_text) <span class="comment">#提取数据</span></span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl73WD" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl73WD.png" alt="Nl73WD.png"></a></p><h1>3 Data</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">remotes::install_github(<span class="string">'pzhaonet/ncovr'</span>)</span><br><span class="line"><span class="keyword">library</span>(<span class="string">"ncovr"</span>)</span><br><span class="line">ncov &lt;- get_ncov()         <span class="comment"># Downloading the Date... It takes me about 10min</span></span><br></pre></td></tr></table></figure></div><p>這一步可能會因爲網絡問題而下載數據失敗. 可以直接用瀏覽器下載RDS, 然後本地讀取<br />下載地址: <a href="https://github.com/pzhaonet/ncov/raw/master/static/data-download/ncov.RDS" target="_blank" rel="noopener">https://github.com/pzhaonet/ncov/raw/master/static/data-download/ncov.RDS</a><br />讀取方式:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ncov &lt;- readRDS(<span class="string">"ncov.RDS"</span>)</span><br></pre></td></tr></table></figure></div><p>讀取數據了, 就是喜聞樂見的, 清洗和可視化了</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># area data</span></span><br><span class="line">TB = ncov$area</span><br><span class="line"><span class="comment"># China</span></span><br><span class="line">中国  = TB[TB$countryName == <span class="string">"中国"</span>,]</span><br><span class="line">中国$日期 = as.Date.POSIXct(中国$updateTime/<span class="number">1000</span>)</span><br><span class="line">湖北 =中国[中国$provinceShortName==<span class="string">'湖北'</span>,]</span><br></pre></td></tr></table></figure></div><p>这里的时间困惑了我很久. 表格里的时间, 举例: 1583295001876, 通过as.Date.POSIXct 转化以后,成了&quot;52142-08-15&quot;. 通过删除后面3位数, 876, 及可获得正确时间&quot;2020-03-04&quot;. 我也不知道为什么</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line">ggplot(湖北)+</span><br><span class="line">  geom_point(aes(x=日期,y=confirmedCount)) + <span class="comment">#Dot plot</span></span><br><span class="line">  geom_smooth(aes(x=日期,y=confirmedCount,color = continentName)) + <span class="comment"># Smooth line</span></span><br><span class="line">  theme_light()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl7awt" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl7awt.png" alt="Nl7awt.png"></a><br><br />加上几个别的数据</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ggplot(湖北)+  </span><br><span class="line">        geom_smooth(aes(x=日期,y=confirmedCount))+</span><br><span class="line">        geom_smooth(aes(x=日期,y=deadCount))+</span><br><span class="line">        geom_smooth(aes(x=日期,y=curedCount))+</span><br><span class="line">        geom_point(aes(x=日期, y=confirmedCount, color=<span class="string">'confirmed'</span>))+  </span><br><span class="line">        geom_point(aes(x=日期, y=deadCount, color=<span class="string">'dead'</span>))+  </span><br><span class="line">        geom_point(aes(x=日期, y=curedCount,color= <span class="string">'cured'</span>))+</span><br><span class="line">        theme_light()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl7dTP" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl7dTP.png" alt="Nl7dTP.png"></a><br><br />同样的方法看看别的省:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ggplot(中国[中国$provinceShortName==<span class="string">'湖南'</span>,])+  </span><br><span class="line">        geom_smooth(aes(x=日期,y=confirmedCount))+</span><br><span class="line">        geom_smooth(aes(x=日期,y=deadCount))+</span><br><span class="line">        geom_smooth(aes(x=日期,y=curedCount))+</span><br><span class="line">        geom_point(aes(x=日期, y=confirmedCount, color=<span class="string">'confirmed'</span>))+  </span><br><span class="line">        geom_point(aes(x=日期, y=deadCount, color=<span class="string">'dead'</span>))+  </span><br><span class="line">        geom_point(aes(x=日期, y=curedCount,color= <span class="string">'cured'</span>))+</span><br><span class="line">        theme_light()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl7BY8" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl7BY8.png" alt="Nl7BY8.png"></a><br>All Provinces</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ggplot(中国)+   </span><br><span class="line">    geom_smooth(aes(x=日期,y=confirmedCount))+  </span><br><span class="line">    geom_smooth(aes(x=日期,y=deadCount))+  </span><br><span class="line">    geom_smooth(aes(x=日期,y=curedCount))+  </span><br><span class="line">    geom_point(aes(x=日期, y=confirmedCount, color=<span class="string">'confirmed'</span>))+   </span><br><span class="line">    geom_point(aes(x=日期, y=deadCount, color=<span class="string">'dead'</span>))+   </span><br><span class="line">    geom_point(aes(x=日期, y=curedCount,color= <span class="string">'cured'</span>))+  </span><br><span class="line">    theme_light() +facet_wrap(provinceShortName ~., scales =  <span class="string">'free'</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl7JQH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl7JQH.jpg" alt="Nl7JQH.jpg"></a></p><p><a name="Up7pb"></a></p><h1>4 map</h1><p><a name="SK6ny"></a></p><h2 id="China-city"><a class="header-anchor" href="#China-city"></a>China city</h2><p>cn_city_map.rds is required:<br />Specific Date is comming from <a href="https://guangchuangyu.github.io" target="_blank" rel="noopener">GuangchuangYu</a><br />location: <a href="https://github.com/GuangchuangYu/map_data" target="_blank" rel="noopener">https://github.com/GuangchuangYu/map_data</a><br />But as you know, downloading Data from Github is preaty slow.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data &lt;- readRDS(<span class="string">"cn_city_map.rds"</span>)</span><br></pre></td></tr></table></figure></div><p>Take 湖北 as an example:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">湖北地图 &lt;- data[ data$ADMINCODE  %<span class="keyword">in</span>% 湖北$cities[[<span class="number">1</span>]]$locationId,]</span><br><span class="line">ggplot(湖北地图) + geom_sf(aes(fill = OBJECTID))+ theme_light()</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl7UeI" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl7UeI.png" alt="Nl7UeI.png"></a></p><p>Adding nCov information</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># sort</span></span><br><span class="line">湖北地图 = 湖北地图[match(湖北$cities[[<span class="number">1</span>]]$locationId,湖北地图$ADMINCODE),]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Graph Left</span></span><br><span class="line">ggplot(湖北地图) +</span><br><span class="line">       geom_sf(aes(fill = 湖北$cities[[<span class="number">1</span>]]$currentConfirmedCount))+</span><br><span class="line">       theme_light()</span><br><span class="line"></span><br><span class="line"><span class="comment"># Log the count before fill</span></span><br><span class="line">ggplot(湖北地图) +</span><br><span class="line">       geom_sf(aes(fill = log(湖北$cities[[<span class="number">1</span>]]$currentConfirmedCount)))+</span><br><span class="line">       theme_light()</span><br></pre></td></tr></table></figure></div><table><thead><tr><th><a href="https://imgchr.com/i/Nl70Ff" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl70Ff.png" alt="Nl70Ff.png"></a></th><th><a href="https://imgchr.com/i/NlHt9U" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlHt9U.png" alt="NlHt9U.png"></a></th></tr></thead><tbody></tbody></table><p><a name="qcz6i"></a></p><h2 id="China-Province"><a class="header-anchor" href="#China-Province"></a>China Province</h2><p>Data is shared by : <a href="https://www.cnblogs.com/skyme/p/5182149.html" target="_blank" rel="noopener">skyme</a><br />Download locaktion: <a href="http://cos.name/wp-content/uploads/2009/07/chinaprovinceborderdata_tar_gz.zip" target="_blank" rel="noopener">Click Here!</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">China &lt;-  sf::st_read(<span class="string">'bou2_4p.shp'</span>)</span><br></pre></td></tr></table></figure></div><p>Location for main City (Data is from <a href="https://www.cnblogs.com/skyme/p/5182149.html" target="_blank" rel="noopener">skyme</a>)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">City_loc = read.csv(text = <span class="string">"城市,jd,wd</span></span><br><span class="line"><span class="string">北京,116.4666667,39.9</span></span><br><span class="line"><span class="string">上海,121.4833333,31.23333333</span></span><br><span class="line"><span class="string">天津,117.1833333,39.15</span></span><br><span class="line"><span class="string">重庆,106.5333333,29.53333333</span></span><br><span class="line"><span class="string">哈尔滨,126.6833333,45.75</span></span><br><span class="line"><span class="string">长春,125.3166667,43.86666667</span></span><br><span class="line"><span class="string">沈阳,123.4,41.83333333</span></span><br><span class="line"><span class="string">呼和浩特,111.8,40.81666667</span></span><br><span class="line"><span class="string">石家庄,114.4666667,38.03333333</span></span><br><span class="line"><span class="string">太原,112.5666667,37.86666667</span></span><br><span class="line"><span class="string">济南,117,36.63333333</span></span><br><span class="line"><span class="string">郑州,113.7,34.8</span></span><br><span class="line"><span class="string">西安,108.9,34.26666667</span></span><br><span class="line"><span class="string">兰州,103.8166667,36.05</span></span><br><span class="line"><span class="string">银川,106.2666667,38.33333333</span></span><br><span class="line"><span class="string">西宁,101.75,36.63333333</span></span><br><span class="line"><span class="string">乌鲁木齐,87.6,43.8</span></span><br><span class="line"><span class="string">合肥,117.3,31.85</span></span><br><span class="line"><span class="string">南京,118.8333333,32.03333333</span></span><br><span class="line"><span class="string">杭州,120.15,30.23333333</span></span><br><span class="line"><span class="string">长沙,113,28.18333333</span></span><br><span class="line"><span class="string">南昌,115.8666667,28.68333333</span></span><br><span class="line"><span class="string">武汉,114.35,30.61666667</span></span><br><span class="line"><span class="string">成都,104.0833333,30.65</span></span><br><span class="line"><span class="string">贵阳,106.7,26.58333333</span></span><br><span class="line"><span class="string">福州,119.3,26.08333333</span></span><br><span class="line"><span class="string">台北,121.5166667,25.05</span></span><br><span class="line"><span class="string">广州,113.25,23.13333333</span></span><br><span class="line"><span class="string">海口,110.3333333,20.03333333</span></span><br><span class="line"><span class="string">南宁,108.3333333,22.8</span></span><br><span class="line"><span class="string">昆明,102.6833333,25</span></span><br><span class="line"><span class="string">拉萨,91.16666667,29.66666667</span></span><br><span class="line"><span class="string">香港,114.1666667,22.3</span></span><br><span class="line"><span class="string">澳门,113.5,22.2"</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggrepel)</span><br><span class="line">Today = 中国[中国$日期==<span class="string">"2020-03-04"</span>,]</span><br><span class="line">Cities = data.frame()</span><br><span class="line"><span class="keyword">for</span>( i <span class="keyword">in</span> Today$cities)&#123;</span><br><span class="line">  Cities = rbind(Cities,i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">AAA = Cities[Cities$cityName %<span class="keyword">in</span>% City_loc$城市,]                                                        </span><br><span class="line">AAA2 = City_loc[match(AAA$cityName, City_loc$城市),]     </span><br><span class="line"><span class="comment"># now, Map data is in AAA, location of cites are in AAA2</span></span><br><span class="line"></span><br><span class="line">ggplot(China) + geom_sf(color=<span class="string">'white'</span>)+</span><br><span class="line">       geom_text_repel(data=AAA2,aes(x=jd,y=wd,label=城市))+</span><br><span class="line">       geom_point(data=AAA2,aes(x=jd,y=wd,</span><br><span class="line">       color=log(AAA$confirmedCount),</span><br><span class="line">       size=AAA$confirmedCount),alpha=<span class="number">0.8</span>)+</span><br><span class="line">       theme_light()+scale_color_gradient(low = <span class="string">"white"</span>,high = <span class="string">"red"</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl7Yyd" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl7Yyd.png" alt="Nl7Yyd.png"></a></p><p><a name="QLhCR"></a></p><h1>5 世界</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">TB$日期 = as.Date.POSIXct(TB$updateTime/<span class="number">1000</span>)</span><br><span class="line">ggplot(TB)+</span><br><span class="line">    geom_smooth(aes(x=日期,y=confirmedCount))+   </span><br><span class="line">    geom_smooth(aes(x=日期,y=deadCount))+   </span><br><span class="line">    geom_smooth(aes(x=日期,y=curedCount))+   </span><br><span class="line">    geom_point(aes(x=日期, y=confirmedCount, color=<span class="string">'confirmed'</span>))+    </span><br><span class="line">    geom_point(aes(x=日期, y=deadCount, color=<span class="string">'dead'</span>))+    </span><br><span class="line">    geom_point(aes(x=日期, y=curedCount,color= <span class="string">'cured'</span>))+   </span><br><span class="line">    theme_light() +facet_wrap(countryName ~., scales =  <span class="string">'free'</span>)</span><br></pre></td></tr></table></figure></div><p>Keep the countries which aboves 1000 confiremed cases.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">TB2 &lt;- TB[TB$countryName %<span class="keyword">in</span>% unique(TB$countryName[which(TB$confirmedCount&gt;<span class="number">1000</span>)]),]</span><br><span class="line"></span><br><span class="line">ggplot(TB2)+</span><br><span class="line">    geom_smooth(aes(x=日期,y=confirmedCount))+   </span><br><span class="line">    geom_smooth(aes(x=日期,y=deadCount))+   </span><br><span class="line">    geom_smooth(aes(x=日期,y=curedCount))+   </span><br><span class="line">    geom_point(aes(x=日期, y=confirmedCount, color=<span class="string">'confirmed'</span>))+    </span><br><span class="line">    geom_point(aes(x=日期, y=deadCount, color=<span class="string">'dead'</span>))+    </span><br><span class="line">    geom_point(aes(x=日期, y=curedCount,color= <span class="string">'cured'</span>))+   </span><br><span class="line">    theme_light() +facet_wrap(countryName ~., scales =  <span class="string">'free'</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Nl7GSe" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/Nl7GSe.jpg" alt="Nl7GSe.jpg"></a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Pathview</title>
      <link href="/R/pathview.html"/>
      <url>/R/pathview.html</url>
      
        <content type="html"><![CDATA[<h1>Pathview</h1><p>An R package for mapping your genes and compounds to the KEGG pathways.</p><p><a href="http://bioconductor.org/packages/release/bioc/vignettes/pathview/inst/doc/pathview.pdf" target="_blank" rel="noopener">Documentation</a></p><h1>Install &amp; Quick start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#切换至国内镜像</span></span><br><span class="line">options(BioC_mirror=<span class="string">"https://mirrors.tuna.tsinghua.edu.cn/bioconductor"</span>)</span><br><span class="line">BiocManager::install(<span class="string">'pathview'</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(pathview)</span><br><span class="line"><span class="comment"># Gene map</span></span><br><span class="line">data(gse16873.d)</span><br><span class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = <span class="string">"04110"</span>,</span><br><span class="line">  species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873"</span>)</span><br><span class="line"></span><br><span class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], pathway.id = demo.paths$sel.paths[i],</span><br><span class="line">  species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.2layer"</span>, kegg.native = <span class="literal">T</span>,</span><br><span class="line">  same.layer = <span class="literal">F</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># compound map</span></span><br><span class="line">data(demo.paths)</span><br><span class="line">data(cpd.simtypes)</span><br><span class="line">sim.cpd.data=sim.mol.data(mol.type=<span class="string">"cpd"</span>, nmol=<span class="number">3000</span>)</span><br><span class="line">i &lt;- <span class="number">3</span></span><br><span class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>], cpd.data = sim.cpd.data,</span><br><span class="line">  pathway.id = demo.paths$sel.paths[i], species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.cpd"</span>,</span><br><span class="line">  keys.align = <span class="string">"y"</span>, kegg.native = <span class="literal">T</span>, key.pos = demo.paths$kpos1[i])</span><br></pre></td></tr></table></figure></div><table><thead><tr><th>Gene map</th><th>Compound map</th></tr></thead><tbody><tr><td><a href="https://imgchr.com/i/tiZzjS" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/26/tiZzjS.md.png" alt="tiZzjS.md.png"></a></td><td><a href="https://imgchr.com/i/tieZcT" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/26/tieZcT.md.png" alt="tieZcT.md.png"></a></td></tr></tbody></table><h2 id="Multi-group-Date"><a class="header-anchor" href="#Multi-group-Date"></a>Multi group Date</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">require</span>(org.Hs.eg.db)</span><br><span class="line"><span class="keyword">library</span>(pathview)</span><br><span class="line"></span><br><span class="line">data(gse16873.d)</span><br><span class="line">data(demo.paths)</span><br><span class="line">sim.cpd.data=sim.mol.data(mol.type=<span class="string">"cpd"</span>, nmol=<span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line">gse16873.t &lt;- apply(gse16873.d, <span class="number">1</span>, <span class="keyword">function</span>(x) t.test(x,</span><br><span class="line">  alternative = <span class="string">"two.sided"</span>)$p.value)</span><br><span class="line"></span><br><span class="line">i &lt;- <span class="number">3</span></span><br><span class="line">sim.cpd.data2 = matrix(sample(sim.cpd.data, <span class="number">18000</span>, replace = <span class="literal">T</span>), ncol = <span class="number">6</span>)</span><br><span class="line">rownames(sim.cpd.data2) = names(sim.cpd.data)</span><br><span class="line">colnames(sim.cpd.data2) = paste(<span class="string">"exp"</span>, <span class="number">1</span>:<span class="number">6</span>, sep = <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line">pv.out &lt;- pathview(gene.data = gse16873.d[, <span class="number">1</span>:<span class="number">3</span>],</span><br><span class="line">  cpd.data = sim.cpd.data2[, <span class="number">1</span>:<span class="number">2</span>], pathway.id = demo.paths$sel.paths[i],</span><br><span class="line">  species = <span class="string">"hsa"</span>, out.suffix = <span class="string">"gse16873.cpd.3-2s.2layer"</span>,</span><br><span class="line">  keys.align = <span class="string">"y"</span>, kegg.native = <span class="literal">T</span>, match.data = <span class="literal">F</span>, multi.state = <span class="literal">T</span>,</span><br><span class="line">  same.layer = <span class="literal">F</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/tiZBlT" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/26/tiZBlT.md.png" alt="tiZBlT.md.png"></a></p><h1>Start with your data</h1><h2 id="Genelist"><a class="header-anchor" href="#Genelist"></a>Genelist</h2><ol><li>Make your gene list</li></ol><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">"ID F</span></span><br><span class="line"><span class="string">K18606 2</span></span><br><span class="line"><span class="string">K00457 -1</span></span><br><span class="line"><span class="string">K00815 -2"</span>&gt; gene.list</span><br></pre></td></tr></table></figure></div><ol start="2"><li>run in R</li></ol><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(pathview)</span><br><span class="line">gene &lt;- read.table(<span class="string">'gene.list'</span>,header=<span class="literal">T</span>)</span><br><span class="line">TB = matrix(gene[,<span class="number">2</span>])</span><br><span class="line">rownames(TB)= gene[,<span class="number">1</span>]</span><br><span class="line">pathview(gene.data = TB[, <span class="number">1</span>], pathway.id = <span class="string">"00130"</span>,</span><br><span class="line">  species = <span class="string">"ko"</span>, out.suffix = <span class="string">"test"</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/tP9h8J" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/05/26/tP9h8J.md.png" alt="tP9h8J.md.png"></a></p><pre><code class="language-R"></code></pre><h2 id="Genes-Compound"><a class="header-anchor" href="#Genes-Compound"></a>Genes &amp; Compound</h2><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/R/summary.html"/>
      <url>/R/summary.html</url>
      
        <content type="html"><![CDATA[<ul><li><a href="start_r">R 從入門，到放棄</a></li><li><a href="rpackage2">3分钟写一个R包</a></li><li><a href="library">librarys</a></li><li><a href="rtricks2">Base and tricks (maintain needed)</a></li><li><a href="ehgl6o">Other Tutories</a></li><li><a href="graphics">Statistic Graphics</a><ul><li><a href="#">GGPLOT</a><ul><li><a href="ggplot2">GGplot</a></li><li><a href="geom_bar">geom_bar</a></li><li><a href="geom_boxplot">geom_boxplot</a></li><li><a href="geom_bin2d2">geom_bin2d</a></li><li><a href="geom_curve2">geom_curve</a></li><li><a href="geom_hex">geom_hex</a></li><li><a href="geom_map2">GGmap: geom_map</a></li><li><a href="geom_polygon2">GGmap: geom_polygon</a></li><li><a href="geom_pie">geom_pie</a></li><li><a href="geom_qq2">geom_qq</a></li><li><a href="geom_quantile2">geom_quantile</a></li><li><a href="geom_rangeframe2">geom_rangeframe</a></li><li><a href="geom_rect2">geom_rect</a></li><li><a href="geom_segment2">geom_segment</a></li><li><a href="geom_sf">geom_sf</a></li><li><a href="geom_step2">geom_step</a></li><li><a href="geom_tile2">geom_tile</a></li><li><a href="geom_tufteboxplot2">geom_tufteboxplot</a></li><li><a href="geom_violin2">geom_violin</a></li><li><a href="geom_rug">geom_rug</a></li><li><a href="density_plot2">Density plot</a></li><li><a href="gg3d2">GG3D</a></li><li><a href="ggplot_tricks2">GGplot 杂耍</a></li><li><a href="extra_lines2">geom Extra Lines</a></li><li><a href="ggcal2">GGcal</a></li><li><a href="ggradar2">GGradar</a></li><li><a href="gggit2">GGplot in Github</a></li><li><a href="ggtree2">ggtree</a></li><li><a href="gg_go">gg GO plot</a></li><li><a href="ggalluvial2">ggalluvial (Con)</a></li><li><a href="gganimate2">R-gganimate</a></li><li><a href="riverplot2">R-riverplot</a></li></ul></li><li><a href="ploty2">Ploty</a></li><li><a href="pheatmap2">pheatmap</a></li><li><a href="correlation2">Correlation</a></li><li><a href="networkplot2">NetWorkPlot</a></li><li><a href="circlize2">circlize</a></li><li><a href="pathview">pathview (KEGGmap)</a></li></ul></li><li><a href="uisx36">Data Science</a><ul><li><a href="dataclean">Data cleaning</a></li><li><a href="normalization">Data normalization</a></li><li><a href="pca2">PCA</a></li><li><a href="rsm">rsm (Response Surface Methodology)</a></li><li><a href="worldcloud2">worldcloud</a></li><li><a href="xgboost">XGBoost (Con)</a></li><li><a href="ml">Machine Learning (Con)</a></li></ul></li><li><a href="wmtcd5">Bioinformatics</a><ul><li><a href="edger">edgeR</a></li><li><a href="clusterprofiler2">clusterProfiler (Con)</a></li><li><a href="uniprot_api2">UNIPROT_API</a></li><li><a href="#">WGCNA</a><ul><li><a href="wgcna2">WGCNA 實戰</a></li><li><a href="wgcna_1">WGCNA Tutorial 1</a></li><li><a href="wgcna_2">WGCNA Tutorial 2</a></li></ul></li><li><a href="biostrings2">Biostrings</a></li></ul></li><li><a href="#">Blogs</a><ul><li><a href="vxunsh2">nCov visualization</a></li><li><a href="ncov2">nCov(新冠状病毒数据获取与可视化)</a></li><li><a href="magick2">magick (Picture needed)</a></li><li><a href="jpeg2">jpeg: reading color from img</a></li></ul></li><li><a href="error_codes2">R 语言报错集</a></li></ul>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>worldcloud</title>
      <link href="/R/worldcloud.html"/>
      <url>/R/worldcloud.html</url>
      
        <content type="html"><![CDATA[<h1 id="worldcloud"><a href="#worldcloud" class="headerlink" title="worldcloud"></a>worldcloud</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(SnowballC)</span><br><span class="line"><span class="keyword">library</span>(Rwordseg)</span><br><span class="line"><span class="keyword">library</span>(wordcloud2)</span><br><span class="line"><span class="keyword">library</span>(tm)</span><br><span class="line"></span><br><span class="line">A &lt;- c(<span class="string">"Large scale gene expression profiling during intestine and body wall regeneration in</span></span><br><span class="line"><span class="string">the sea cucumber Apostichopus japonicus"</span>)  <span class="comment"># past whatever you want in here</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#读入分词文件</span></span><br><span class="line">word = lapply(X = A, FUN = strsplit, <span class="string">"\\s"</span>)</span><br><span class="line">word &lt;- wordStem(word)</span><br><span class="line">word1=unlist(word)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#'''统计词频'''</span></span><br><span class="line">df=table(word1)</span><br><span class="line">df=sort(df,decreasing = <span class="literal">T</span>)</span><br><span class="line"></span><br><span class="line">df1 = data.frame(word = names(df), freq = df)</span><br><span class="line"></span><br><span class="line">  df1[-which(df1$word == <span class="string">"al.,"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"#"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"was"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"a"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"The"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"et"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"were"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"that"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"is"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"on"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"are"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"this"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"as"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"in"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"been"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"have"</span>),] -&gt; df2</span><br><span class="line">  df2[-which(df2$word == <span class="string">"has"</span>),] -&gt; df2</span><br><span class="line">   df2[-which(df2$word == <span class="string">"the"</span>),] -&gt; df2</span><br><span class="line">   df2[-which(df2$word == <span class="string">"and"</span>),] -&gt; df2</span><br><span class="line">   df2[-which(df2$word == <span class="string">"of"</span>),] -&gt; df2</span><br><span class="line">   df2[-which(df2$word == <span class="string">"to"</span>),] -&gt; df2</span><br><span class="line">   df2[-which(df2$word == <span class="string">"for"</span>),] -&gt; df2</span><br><span class="line">   df2[-which(df2$word == <span class="string">"with"</span>),] -&gt; df2</span><br><span class="line">wordcloud2(df2,color=<span class="string">"random-light"</span>,backgroundColor = <span class="string">'black'</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###For multy English files</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(wordcloud2)</span><br><span class="line"><span class="keyword">library</span>(tm)</span><br><span class="line"></span><br><span class="line"><span class="comment">#packageDescription('tm')</span></span><br><span class="line">txt &lt;- system.file(<span class="string">"texts/txt"</span>,package=<span class="string">"tm"</span>)</span><br><span class="line"><span class="comment">#导入动态coporus</span></span><br><span class="line">myData &lt;- Corpus(DirSource(txt),readerControl=list(language=<span class="string">"en"</span>))</span><br><span class="line">myData &lt;- tm_map(myData,removePunctuation)</span><br><span class="line">myData &lt;- tm_map(myData,<span class="keyword">function</span>(x)removeWords(x,stopwords()))</span><br><span class="line">tdm &lt;- TermDocumentMatrix(myData)</span><br><span class="line">m &lt;- as.matrix(tdm)</span><br><span class="line">v &lt;- sort(rowSums(m),decreasing=<span class="literal">TRUE</span>)</span><br><span class="line">d &lt;- data.frame(word=names(v),freq=v)</span><br><span class="line">wordcloud(d$word,d$freq,random.order=<span class="literal">FALSE</span>,color=brewer.pal(<span class="number">8</span>,<span class="string">"Dark2"</span>))</span><br><span class="line">wordcloud2(d,color=<span class="string">"random-light"</span>,backgroundColor = <span class="string">'black'</span>,size=<span class="number">0.7</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">###For Chinese files</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(jiebaR)</span><br><span class="line">f &lt;- scan(<span class="string">'test'</span> ,sep=<span class="string">'\n'</span>,what=<span class="string">''</span>,encoding=<span class="string">"GBK"</span>)</span><br><span class="line">seg &lt;- qseg[f] <span class="comment">#使用qseg类型分词，并把结果保存到对象seg中</span></span><br><span class="line">seg &lt;- seg[nchar(seg)&gt;<span class="number">1</span>] <span class="comment">#去除字符长度小于2的词语</span></span><br><span class="line">seg &lt;- table(seg) <span class="comment">#统计词频</span></span><br><span class="line">seg &lt;- seg[!grepl(<span class="string">'[0-9]+'</span>,names(seg))] <span class="comment">#去除数字</span></span><br><span class="line">seg &lt;- seg[!grepl(<span class="string">'a-zA-Z'</span>,names(seg))] <span class="comment">#去除字母</span></span><br><span class="line">length(seg) <span class="comment">#查看处理完后剩余的词数</span></span><br><span class="line">seg &lt;- sort(seg, decreasing = <span class="literal">TRUE</span>)[<span class="number">1</span>:<span class="number">100</span>] <span class="comment">#降序排序，并提取出现次数最多的前100个词语</span></span><br><span class="line">seg <span class="comment">#查看100个词频最高的</span></span><br><span class="line">View(seg)</span><br><span class="line">data=data.frame(seg)</span><br><span class="line">data</span><br><span class="line">wordcloud(data$seg , data$Freq, colors = rainbow(<span class="number">100</span>), random.order=<span class="literal">F</span>)</span><br><span class="line">x11()</span><br><span class="line">dev.off()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># save as Html</span></span><br><span class="line"><span class="keyword">library</span>(htmlwidgets)</span><br><span class="line">saveWidget(WC,<span class="string">"1.html"</span>,selfcontained = <span class="literal">F</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">A &lt;- readLines(<span class="string">'test.txt'</span>)</span><br><span class="line"></span><br><span class="line">Result = <span class="string">""</span></span><br><span class="line"><span class="keyword">for</span>(i <span class="keyword">in</span> A)&#123;</span><br><span class="line">        Result = paste(Result,i,sep=<span class="string">" "</span>)&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment"># Remove punctuations＆Numbers 去标点&amp;数字</span></span><br><span class="line">Result = gsub(<span class="string">"[[:punct:]]|[[:digit:]]|^http:\\/\\/.*|^https:\\/\\/.*"</span>,<span class="string">" "</span>,Result)</span><br><span class="line"></span><br><span class="line">word = lapply(X = Result, FUN = strsplit, <span class="string">"\\s"</span>)</span><br><span class="line">word1=word[[<span class="number">1</span>]][[<span class="number">1</span>]]</span><br><span class="line"></span><br><span class="line">df=table(word1)</span><br><span class="line">df=sort(df,decreasing = <span class="literal">T</span>)</span><br><span class="line"></span><br><span class="line">TB = data.frame(t(t(df)))[c(<span class="number">1</span>,<span class="number">3</span>)]</span><br><span class="line">head(TB)                                                                                                  </span><br><span class="line"><span class="comment">#  word1 Freq</span></span><br><span class="line"><span class="comment">#1        243</span></span><br><span class="line"><span class="comment">#2   the   67</span></span><br><span class="line"><span class="comment">#3     I   51</span></span><br><span class="line"><span class="comment">#4    to   42</span></span><br><span class="line"><span class="comment">#5   and   38</span></span><br><span class="line"><span class="comment">#6    my   32</span></span><br><span class="line"></span><br><span class="line">wordcloud2(TB,color=<span class="string">"random-light"</span>,backgroundColor = <span class="string">'black'</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://cdn.nlark.com/yuque/0/2020/png/691897/1582556564473-629627e2-e9e8-4985-802a-655a302a9713.png#align=left&display=inline&height=309&name=image.png&originHeight=309&originWidth=470&size=73870&status=done&style=none&width=470" alt="image.png"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/R/yuque.json"/>
      <url>/R/yuque.json</url>
      
        <content type="html"><![CDATA[{"repo":"liuwenkan/rr","pattern":"**/*.md"}]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Heatmap</title>
      <link href="/R/pheatmap.html"/>
      <url>/R/pheatmap.html</url>
      
        <content type="html"><![CDATA[<h1>Heatmap</h1><h1>pheatmap</h1><p><a href="https://imgchr.com/i/NlbOJK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/20/NlbOJK.png" alt="NlbOJK.png"></a><br><a name="KbDPP"></a></p><h1>Quick Start</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(pheatmap )</span><br><span class="line"></span><br><span class="line">test = matrix(rnorm(<span class="number">200</span>), <span class="number">20</span>, <span class="number">10</span>)</span><br><span class="line">test[<span class="number">1</span>:<span class="number">10</span>, seq(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>)] = test[<span class="number">1</span>:<span class="number">10</span>, seq(<span class="number">1</span>, <span class="number">10</span>, <span class="number">2</span>)] + <span class="number">3</span></span><br><span class="line">test[<span class="number">11</span>:<span class="number">20</span>, seq(<span class="number">2</span>, <span class="number">10</span>, <span class="number">2</span>)] = test[<span class="number">11</span>:<span class="number">20</span>, seq(<span class="number">2</span>, <span class="number">10</span>, <span class="number">2</span>)] + <span class="number">2</span></span><br><span class="line">test[<span class="number">15</span>:<span class="number">20</span>, seq(<span class="number">2</span>, <span class="number">10</span>, <span class="number">2</span>)] = test[<span class="number">15</span>:<span class="number">20</span>, seq(<span class="number">2</span>, <span class="number">10</span>, <span class="number">2</span>)] + <span class="number">4</span></span><br><span class="line">colnames(test) = paste(<span class="string">"Test"</span>, <span class="number">1</span>:<span class="number">10</span>, sep = <span class="string">""</span>)</span><br><span class="line">rownames(test) = paste(<span class="string">"Gene"</span>, <span class="number">1</span>:<span class="number">20</span>, sep = <span class="string">""</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Draw heatmaps</span></span><br><span class="line">pheatmap(t(test))</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/06/20/NlbFv4.png" alt="NlbFv4.png"></p><p><a name="nU3ns"></a></p><h1>Arguments</h1><p>Quick View:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">pheatmap(mat, color = colorRampPalette(rev(brewer.pal(n = <span class="number">7</span>, name =</span><br><span class="line">       <span class="string">"RdYlBu"</span>)))(<span class="number">100</span>), kmeans_k = <span class="literal">NA</span>, breaks = <span class="literal">NA</span>, border_color = <span class="string">"grey60"</span>,</span><br><span class="line">       cellwidth = <span class="literal">NA</span>, cellheight = <span class="literal">NA</span>, scale = <span class="string">"none"</span>, cluster_rows = <span class="literal">TRUE</span>,</span><br><span class="line">       cluster_cols = <span class="literal">TRUE</span>, clustering_distance_rows = <span class="string">"euclidean"</span>,</span><br><span class="line">       clustering_distance_cols = <span class="string">"euclidean"</span>, clustering_method = <span class="string">"complete"</span>,</span><br><span class="line">       clustering_callback = identity2, cutree_rows = <span class="literal">NA</span>, cutree_cols = <span class="literal">NA</span>,</span><br><span class="line">       treeheight_row = ifelse((class(cluster_rows) == <span class="string">"hclust"</span>) || cluster_rows,</span><br><span class="line">       <span class="number">50</span>, <span class="number">0</span>), treeheight_col = ifelse((class(cluster_cols) == <span class="string">"hclust"</span>) ||</span><br><span class="line">       cluster_cols, <span class="number">50</span>, <span class="number">0</span>), legend = <span class="literal">TRUE</span>, legend_breaks = <span class="literal">NA</span>,</span><br><span class="line">       legend_labels = <span class="literal">NA</span>, annotation_row = <span class="literal">NA</span>, annotation_col = <span class="literal">NA</span>,</span><br><span class="line">       annotation = <span class="literal">NA</span>, annotation_colors = <span class="literal">NA</span>, annotation_legend = <span class="literal">TRUE</span>,</span><br><span class="line">       annotation_names_row = <span class="literal">TRUE</span>, annotation_names_col = <span class="literal">TRUE</span>,</span><br><span class="line">       drop_levels = <span class="literal">TRUE</span>, show_rownames = <span class="literal">T</span>, show_colnames = <span class="literal">T</span>, main = <span class="literal">NA</span>,</span><br><span class="line">       fontsize = <span class="number">10</span>, fontsize_row = fontsize, fontsize_col = fontsize,</span><br><span class="line">       angle_col = c(<span class="string">"270"</span>, <span class="string">"0"</span>, <span class="string">"45"</span>, <span class="string">"90"</span>, <span class="string">"315"</span>), display_numbers = <span class="literal">F</span>,</span><br><span class="line">       number_format = <span class="string">"%.2f"</span>, number_color = <span class="string">"grey30"</span>, fontsize_number = <span class="number">0.8</span></span><br><span class="line">       * fontsize, gaps_row = <span class="literal">NULL</span>, gaps_col = <span class="literal">NULL</span>, labels_row = <span class="literal">NULL</span>,</span><br><span class="line">       labels_col = <span class="literal">NULL</span>, filename = <span class="literal">NA</span>, width = <span class="literal">NA</span>, height = <span class="literal">NA</span>,</span><br><span class="line">       silent = <span class="literal">FALSE</span>, na_col = <span class="string">"#DDDDDD"</span>, <span class="keyword">...</span>)</span><br></pre></td></tr></table></figure></div><h2 id="Dendrogram"><a class="header-anchor" href="#Dendrogram"></a>Dendrogram</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">cluster_rows = <span class="literal">TRUE</span>,</span><br><span class="line">cluster_cols = <span class="literal">TRUE</span>,</span><br><span class="line">clustering_distance_rows = <span class="string">"euclidean"</span>,</span><br><span class="line">clustering_distance_cols = <span class="string">"euclidean"</span>,</span><br><span class="line">clustering_method = <span class="string">"complete"</span>,</span><br><span class="line">clustering_callback = identity2,</span><br><span class="line">cutree_rows = <span class="literal">NA</span>,</span><br><span class="line">cutree_cols = <span class="literal">NA</span>,</span><br><span class="line">treeheight_row = ifelse((class(cluster_rows) == <span class="string">"hclust"</span>) || cluster_rows,<span class="number">50</span>, <span class="number">0</span>),</span><br><span class="line">treeheight_col = ifelse((class(cluster_cols) == <span class="string">"hclust"</span>) || cluster_cols, <span class="number">50</span>, <span class="number">0</span>),</span><br></pre></td></tr></table></figure></div><h3 id="Disable-dendrogram"><a class="header-anchor" href="#Disable-dendrogram"></a>Disable dendrogram</h3><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pheatmap(test, cluster_rows = <span class="literal">F</span>, cluster_cols = <span class="literal">F</span>)</span><br></pre></td></tr></table></figure></div><p><img src="https://s1.ax1x.com/2020/08/13/dp4GrD.png" alt="No Dendrogram"></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">pheatmap(data, scale = <span class="string">"row"</span>, clustering_distance_row = <span class="string">"correlation"</span>, fontsize=<span class="number">9</span>, fontsize_row=<span class="number">6</span>) <span class="comment">#改变排序算法</span></span><br><span class="line"></span><br><span class="line">annotation&lt;-data.frame(Var1=factor(patientcolors,labels=c(<span class="string">"class1"</span>,<span class="string">"class2"</span>)),Var2=groups)</span><br><span class="line"></span><br><span class="line">pheatmap(data, annotation=annotation, fontsize=<span class="number">9</span>, fontsize_row=<span class="number">6</span>)</span><br><span class="line"></span><br><span class="line">geom_texttmap(data, cluster_row=<span class="literal">FALSE</span>, fontsize=<span class="number">9</span>, fontsize_row=<span class="number">6</span>) <span class="comment">#关闭按行排序(aes(label = B, vjust = 1.1, hjust = -0.5, angle = 45), show_guide = FALSE)</span></span><br></pre></td></tr></table></figure></div><h1>Turn to ggplot</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">'ggplotify'</span>)</span><br><span class="line"><span class="keyword">library</span>(ggplotify)</span><br><span class="line"></span><br><span class="line">d &lt;- matrix(rnorm(<span class="number">100</span>), ncol=<span class="number">10</span>)</span><br><span class="line"><span class="keyword">library</span>(pheatmap)</span><br><span class="line">p &lt;- pheatmap(d)</span><br><span class="line">g = as.ggplot(p)</span><br></pre></td></tr></table></figure></div><p><a name="FG8Ad"></a></p><h1>Heatmap for DEGs matrix</h1><p>reference: Trinity</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">primary_data = read.table(<span class="string">"diffExpr.P1e-5_C2.matrix"</span>, header=<span class="literal">T</span>, com=<span class="string">''</span>, row.names=<span class="number">1</span>, check.names=<span class="literal">F</span>, sep=<span class="string">'\t'</span>)</span><br><span class="line"></span><br><span class="line">primary_data = as.matrix(primary_data)</span><br><span class="line"></span><br><span class="line"><span class="comment">#transformations</span></span><br><span class="line">data = log2(primary_data+<span class="number">1</span>)</span><br><span class="line">data = as.matrix(data) <span class="comment"># convert to matrix</span></span><br><span class="line"><span class="comment"># Centering rows</span></span><br><span class="line">data = data.frame(t(scale(t(data), scale=<span class="literal">F</span>)))</span><br></pre></td></tr></table></figure></div><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>test</title>
      <link href="/test/index.html"/>
      <url>/test/index.html</url>
      
        <content type="html"><![CDATA[<p>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123<br>123</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin 15.11 Bug 汇集</title>
      <link href="/Linux/Deepin15_Bugs.html"/>
      <url>/Linux/Deepin15_Bugs.html</url>
      
        <content type="html"><![CDATA[<h1 id="Deepin-15-11-Bug-汇集"><a href="#Deepin-15-11-Bug-汇集" class="headerlink" title="Deepin 15.11 Bug 汇集"></a>Deepin 15.11 Bug 汇集</h1><p><strong>system</strong>:<br><img src="https://s1.ax1x.com/2020/06/26/NrTT7n.png" alt="NrTT7n.png"></p><p><a name="UWHUJ"></a></p><h1 id="任务栏消失"><a href="#任务栏消失" class="headerlink" title="任务栏消失"></a>任务栏消失</h1><p><img src="https://s1.ax1x.com/2020/06/26/NsZ1wd.png" alt="NsZ1wd.png"></p><h1 id="录屏bug"><a href="#录屏bug" class="headerlink" title="录屏bug"></a>录屏bug</h1><p><strong>deepin screen recorder</strong>:<br><img src="https://s1.ax1x.com/2020/06/26/NrTtFx.png" alt="NrTtFx.png"></p><p><a name="rwhNt"></a></p><h1 id="窗口冻结在原处"><a href="#窗口冻结在原处" class="headerlink" title="窗口冻结在原处"></a>窗口冻结在原处</h1><p><img src="https://s1.ax1x.com/2020/06/26/NrTJT1.jpg" alt="NrTJT1.jpg"></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>用Python下载高中教材</title>
      <link href="/Blog/Python_cw_book.html"/>
      <url>/Blog/Python_cw_book.html</url>
      
        <content type="html"><![CDATA[<h1 id="如何用python爬蟲獲取高中教材"><a href="#如何用python爬蟲獲取高中教材" class="headerlink" title="如何用python爬蟲獲取高中教材"></a>如何用python爬蟲獲取高中教材</h1><p>目標網頁: <a href="http://www.100.com/article/309299.html?&display=w&fd=wap" target="_blank" rel="noopener">http://www.100.com/article/309299.html?&amp;display=w&amp;fd=wap</a><br><a href="https://imgchr.com/i/Uy4W4g" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/17/Uy4W4g.png" alt="Uy4W4g.png"></a></p><p>點擊網頁， 可知， 目標圖片的結構爲:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="HTML"><figure class="iseeu highlight /html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">p</span> <span class="attr">style</span>=<span class="string">"text-align:center"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">"99770"</span> <span class="attr">src</span>=<span class="string">"http://edu_img.bs2.100.com/b31c5369425c1c5203b2437.jpg"</span> <span class="attr">alt</span>=<span class="string">"bb09f673355c1c4ff92c54c.jpg"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> bs4 <span class="keyword">import</span> BeautifulSoup</span><br><span class="line"><span class="keyword">from</span> urllib.request <span class="keyword">import</span> urlopen</span><br><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"></span><br><span class="line"><span class="comment"># Function for downloading</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">page_download</span><span class="params">(image_name,r)</span>:</span></span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    <span class="keyword">with</span> open(<span class="string">'./img/%s'</span> % image_name, <span class="string">'wb'</span>) <span class="keyword">as</span> f:</span><br><span class="line">        <span class="keyword">for</span> chunk <span class="keyword">in</span> r.iter_content(chunk_size=<span class="number">128</span>):</span><br><span class="line">            f.write(chunk)  </span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">"missing"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Starting resuqest</span></span><br><span class="line">ulr = <span class="string">"http://www.100.com/article/309299.html?&amp;display=w&amp;fd=wap"</span></span><br><span class="line"></span><br><span class="line">html = urlopen(ulr).read().decode(<span class="string">'utf-8'</span>)</span><br><span class="line">soup = BeautifulSoup(html, features=<span class="string">'lxml'</span>)</span><br><span class="line"></span><br><span class="line">Book_list = soup.findAll(<span class="string">'p'</span>,&#123;<span class="string">"style"</span>:<span class="string">"text-align:center"</span>&#125;)</span><br><span class="line"></span><br><span class="line">Num = <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> link <span class="keyword">in</span> Book_list:</span><br><span class="line">  <span class="keyword">try</span>:</span><br><span class="line">    Num += <span class="number">1</span></span><br><span class="line">    url = link.find(<span class="string">'img'</span>)[<span class="string">'src'</span>]</span><br><span class="line">    r = requests.get(url, stream=<span class="literal">True</span>)</span><br><span class="line">    image_name = str(Num)+<span class="string">'.jpg'</span></span><br><span class="line">    page_download(image_name,r)</span><br><span class="line">    print(<span class="string">'Saved %s'</span> % image_name)</span><br><span class="line">  <span class="keyword">except</span>:</span><br><span class="line">    print(<span class="string">"Missing"</span>)</span><br></pre></td></tr></table></figure></div><h1 id="壓縮成單個pdf"><a href="#壓縮成單個pdf" class="headerlink" title="壓縮成單個pdf"></a>壓縮成單個pdf</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo pip3.7  install -i https://pypi.tuna.tsinghua.edu.cn/simple img2pdf</span><br><span class="line"></span><br><span class="line">img2pdf $(ls | sort -n) -o ../Biology1.pdf</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/Uy4B3d" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/17/Uy4B3d.md.jpg" alt="Uy4B3d.md.jpg"></a></p><p>完成～</p><p>注: 有的網頁， 可能不一樣。 比如生物必修二就在匹配的時候， 多了一個分號， 因此， 要改成：<code>Book_list = soup.findAll(&#39;p&#39;,{&quot;style&quot;:&quot;text-align:center;&quot;})</code></p><p>enjoy~</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Fasta Sequences Align| Karobben</title>
      <link href="/Bioinfor/faAlign.html"/>
      <url>/Bioinfor/faAlign.html</url>
      
        <content type="html"><![CDATA[<h1>Fasta Sequences Align</h1><h2 id="Quick-look-about-the-data"><a class="header-anchor" href="#Quick-look-about-the-data"></a>Quick look about the data</h2><p>suppose there are fasta file name as <code>LYSV-NCBI.fasta</code></p><p><strong>Have a quick look</strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep  <span class="string">"&gt;"</span> LYSV-NCBI.fasta |wc</span><br><span class="line">wc LYSV-NCBI.fasta</span><br><span class="line"><span class="built_in">echo</span> $(wc LYSV-NCBI.fasta| awk <span class="string">'&#123;print $2&#125;'</span>)-$(grep  <span class="string">"&gt;"</span> LYSV-NCBI.fasta |wc |awk <span class="string">'&#123;print $2&#125;'</span>)|bc</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">124    1114    8363</span><br><span class="line">18250   19116 1282572 LYSV-NCBI.fasta</span><br><span class="line">18002</span><br></pre></td></tr></table></figure></div><p>As we can see, there are 124 sequences and <strong>roughly</strong> about 18002 bases</p><p><strong>Have a quick look about the sequences by <a href="https://github.com/Karobben/Seq-view" target="_blank" rel="noopener">Seq-view</a></strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Seq-view1.3 -i LYSV-NCBI.fasta</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aFEKqH" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/27/aFEKqH.png" alt="aFEKqH.png"></a></p><h1>ClustelW2</h1><h2 id="Install"><a class="header-anchor" href="#Install"></a>Install</h2><p>url: <a href="http://www.clustal.org/download/current/" target="_blank" rel="noopener">click me</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">wget http://www.clustal.org/download/current/clustalw-2.1.tar.gz</span><br><span class="line">tar -zxvf clustalw-2.1.tar.gz</span><br><span class="line"><span class="built_in">cd</span> clustalw-2.1/</span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make install</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">clustalw2 -QUICKTREE -OUTPUT=FASTA  -INFILE=LYSV-NCBI.fasta</span><br></pre></td></tr></table></figure></div><p>It takes less than 20 mins<br><img src="https://s1.ax1x.com/2020/07/27/aFEQZd.gif" alt="aFEQZd.gif"></p><p><strong>Quick look</strong></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Seq-view1.3  -i LYSV-NCBI.fasta -a 90</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aFekIs" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/27/aFekIs.md.png" alt="aFekIs.md.png"></a></p><h1>Muscle</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt install muscle</span><br><span class="line">time muscle -<span class="keyword">in</span> LYSV-NCBI.fasta -out 123.fa</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aFnKUJ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/27/aFnKUJ.png" alt="aFnKUJ.png"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">real  17m59.470s</span><br><span class="line">user  17m59.034s</span><br><span class="line">sys  0m0.256s</span><br></pre></td></tr></table></figure></div><p>It takes about 18min as well as <em>ClustelW2</em></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>BatMeth2</title>
      <link href="/Bioinfor/BatMeth2.html"/>
      <url>/Bioinfor/BatMeth2.html</url>
      
        <content type="html"><![CDATA[<h1 id="BatMeth2"><a href="#BatMeth2" class="headerlink" title="BatMeth2"></a>BatMeth2</h1><p>Citation: Zhou Q, Lim J-Q, Sung W-K, Li G: An integrated package for bisulfite DNA methylation data analysis with Indel-sensitive mapping. BMC Bioinformatics 2019, 20:47.</p><p>More information is in <a href="https://github.com/GuoliangLi-HZAU/BatMeth2" target="_blank" rel="noopener">Github</a>, <a href="https://www.dna-asmdb.com/tools/batmeth2-tutorial/batmeth2.html" target="_blank" rel="noopener">中文</a></p><p><span style='background:salmon'>I just tried the pipeline but I didn’t know exactly how those all work. So, I’ll update this later</span></p><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><p><strong>Requirement</strong></p><ol><li>gcc (v4.8) , gsl library, zlib</li><li>R (ggplot2, pheatmap, xtable)</li><li>samtools (suggest: v1.3.1)</li><li>fastp, raw reads as input need</li></ol><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># gsl install: sudo apt-get install libgsl0ldbl libgsl0-dev</span></span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line">make copy</span><br></pre></td></tr></table></figure></div><h2 id="Example-Data"><a href="#Example-Data" class="headerlink" title="Example Data"></a>Example Data</h2><p>You can download the test data on <a href="https://drive.google.com/open?id=1SEpvJbkjwndYcpkd39T11lrBytEq_MaC" target="_blank" rel="noopener">here</a></p><p>It contain files:</p><ul><li>input fastq.gz (paired end)</li><li>genome file</li><li>usage code and details</li><li>gene annotation file</li></ul><h1 id="BUILDING-INDEX"><a href="#BUILDING-INDEX" class="headerlink" title="BUILDING INDEX"></a>BUILDING INDEX</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir batmeth2index</span><br><span class="line"><span class="built_in">cd</span> batmeth2index</span><br><span class="line">BatMeth2 build_index GENOME.fa <span class="comment"># WGBS Data set</span></span><br><span class="line">BatMeth2 build_index rrbs GENOME.fa <span class="comment"># RRBS Data set</span></span><br><span class="line"><span class="built_in">cd</span> ../</span><br></pre></td></tr></table></figure></div><h1 id="Pipline"><a href="#Pipline" class="headerlink" title="Pipline"></a>Pipline</h1><hr><h2 id="Quick-pipeline"><a href="#Quick-pipeline" class="headerlink" title="Quick pipeline"></a>Quick pipeline</h2><p><code>BatMeth2 pipel --aligner=no -1 R1.fq.gz -2 R2.fq.gz -g ./batmeth2index/genome.fa -o meth -p 6 --gff ./gene.gff -f 1</code></p><h2 id="Step-by-Step"><a href="#Step-by-Step" class="headerlink" title="Step by Step"></a>Step by Step</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">mkdir batmeth2index</span><br><span class="line"><span class="built_in">cd</span> batmeth2index</span><br><span class="line">BatMeth2 build_index genome.fa <span class="comment"># WGBS Data set</span></span><br><span class="line"><span class="built_in">cd</span> ../</span><br><span class="line"></span><br><span class="line">BatMeth2 align -g ./batmeth2index/genome.fa -i R1.fq.gz -i R2.fq.gz -p 6 -o meth.sam</span><br><span class="line"></span><br><span class="line"><span class="comment"># Caculate DNA methylation level</span></span><br><span class="line">BatMeth2 calmeth -g ./batmeth2index/genome.fa -i meth.sam -m meth</span><br><span class="line"></span><br><span class="line"><span class="comment"># DNA methylation level distribution on gene/TE etc</span></span><br><span class="line">BatMeth2 annoation -o meth -G ./batmeth2index/genome.fa -gff ./gene.gff -m meth.methratio.txt -B -P --TSS --TTS --GENE</span><br><span class="line"></span><br><span class="line"><span class="comment"># DNA methylation differential analysis example</span></span><br><span class="line">BatMeth2 batDMR -g ./batmeth2index/genome.fa -o_dm DM.txt -1 meth_loci.CG.txt -2 mutant_loci.CG.txt -L</span><br></pre></td></tr></table></figure></div><h2 id="Visualization"><a href="#Visualization" class="headerlink" title="Visualization"></a>Visualization</h2><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">BatMeth2 methyPlot meth.methBins.txt meth.Methygenome.pdf 0.025 meth.Methylevel.1.txt meth.function.pdf TSS TTS meth.AverMethylevel.1.txt meth.Methenrich.pdf meth.annoDensity.1.txt meth.density.pdf meth meth.mCdensity.txt meth.mCdensity.pdf  meth.mCcatero.txt jcmeth.mCcatero.pdf 0.6 0.1 0.1</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>fastp</title>
      <link href="/Bioinfor/fastp.html"/>
      <url>/Bioinfor/fastp.html</url>
      
        <content type="html"><![CDATA[<h1 id="Fastp"><a href="#Fastp" class="headerlink" title="Fastp"></a>Fastp</h1><p>Location: <a href="https://github.com/OpenGene/fastp" target="_blank" rel="noopener">Github</a></p><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># get source (you can also use browser to download from master or releases)</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/OpenGene/fastp.git</span><br><span class="line"><span class="comment"># build</span></span><br><span class="line"><span class="built_in">cd</span> fastp</span><br><span class="line">make</span><br><span class="line"><span class="comment"># Install</span></span><br><span class="line">sudo make install</span><br></pre></td></tr></table></figure></div><h1 id="Usage"><a href="#Usage" class="headerlink" title="Usage"></a>Usage</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fastp -i in.fq -o out.fq</span><br><span class="line"><span class="comment"># for paired end data (gzip compressed)</span></span><br><span class="line">fastp -i in.R1.fq.gz -I in.R2.fq.gz -o out.R1.fq.gz -O out.R2.fq.gz</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>DNA is Not Destiny</title>
      <link href="/LearnNotes/DNA_Is_NotDestiny.html"/>
      <url>/LearnNotes/DNA_Is_NotDestiny.html</url>
      
        <content type="html"><![CDATA[<h1 id="DNA-is-Not-Destiny"><a href="#DNA-is-Not-Destiny" class="headerlink" title="DNA is Not Destiny"></a>DNA is Not Destiny</h1><p><strong>Why it started with Chapter 6</strong><br>I started to write these notes until I read half of the book. I can’t exactly remember the contents but it left a good impression for me. So, I decided to finish it and make some notes now.</p><h1 id="Chapter-6-Race-and-Ancestry"><a href="#Chapter-6-Race-and-Ancestry" class="headerlink" title="Chapter 6: Race and Ancestry"></a>Chapter 6: Race and Ancestry</h1><p>It is interesting to know about our biological race from DNA testing. It may look cool if the biological identity feat your social identity and could have a positive effect on you, like the girl known that she has Native American DNA and made a closer relationship with other native Americans. The problem is that when the biological identity collided with your social identity, Wayne Joseph for instance, who was identified as African American and advocating for this group but actually has no DNA comes from Africa. It just like you are been told that your father is not your biological father or your son/daughter is not yours.</p><p>It is hard to imaging for us cause we humans have and need a strong sense of belonging. </p><ul><li>Japanese believe that their intestine is longer for Westerners for fitting the rice diet rather than bread. As a result, they suggested that ban American beef since it is not suitable for the Japanese intestine.</li></ul><p><strong>Biological identity &amp; Social identify, why is it matters?</strong><br>Statistics show:</p><ul><li>people who read about races is the product of the social culture rather than gene are more willing to <strong>make friends with Blacks</strong>.</li><li>Asian Americans read about race is the product of the social culture rather than gene are more confident to <strong>blend in American culture and community</strong>.</li></ul><p><em>Author has divided the topics of social &amp; biological effects. For me, I prefer to take them as a whole. One should be the product of the interaction between natural and nurture. But it is too complicated to talk about the knowledge we have at present. And maybe this is why the author prefers to talking with them respectively in this book o.</em></p><h1 id="Chapter-7-Essences-and-the-Seductive-Allure-of-Eugenics"><a href="#Chapter-7-Essences-and-the-Seductive-Allure-of-Eugenics" class="headerlink" title="Chapter 7: Essences and the Seductive Allure of Eugenics"></a>Chapter 7: Essences and the Seductive Allure of Eugenics</h1><p>In the western world, eugenic is a contemptuous idea since it connected the Nazis. But it is much temper in Asian areas.</p><h2 id="Intelligence-and-Essences"><a href="#Intelligence-and-Essences" class="headerlink" title="Intelligence and Essences"></a>Intelligence and Essences</h2><p>The <strong>experiment</strong> about comprising or disorganizing students made different consequences on American students and Japanese students. American students preferred to gain confidence from the comprises and try to practice the same project because they believe they are good at it. But people who were criticized prefer to picking up other works and give up what they don’t good at. But the controversial results present at Japanese students who prefer to practice more with the project which had negative feedback. </p><p><em>This is interesting. Because though teachers and parents are debated about this topic for many years but almost none of them are holding the view from students. If they are restricted to their personal experience and may cause problems on their students, like prevent their students to make progress or give up the project too early.</em></p><h2 id="How-Heritable-is-IQ"><a href="#How-Heritable-is-IQ" class="headerlink" title="How Heritable is IQ?"></a>How Heritable is IQ?</h2><p>The author mentioned about the difference in heritability of IQ among wealthier and poor populations. The index is as high as 80% in wealthier communities but as low as 10% in poor groups. It is interesting to see that those two groups have such disparity. And this is the reason why I’m always taking care of all kinds of statistic reports or results weather are they significantly or not. </p><p><em>As I always said, I strongly believe that humans are the product of the interaction of DNA and environment. For the first sight, I thought that one possibility is that the most of wealthier parents were well educated and so, they have touched their limits of IQ. As a result, their offspring are closing to them. For poor communities, some of them are not well educated, or may even have poor health.  Both of these can affect the results of the IQ test. On the other hand, education is easy to get compared with the old days and so, developed (educated) kids were easy to show smarter than their parents who are far from to touch their IQ limits.</em></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo: Personalize Code Block</title>
      <link href="/Blog/Hexo_code.html"/>
      <url>/Blog/Hexo_code.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-Personalize-Code-Block"><a href="#Hexo-Personalize-Code-Block" class="headerlink" title="Hexo: Personalize Code Block"></a>Hexo: Personalize Code Block</h1><p>Date: 1 July 2020</p><h1 id="Find-the-source-code"><a href="#Find-the-source-code" class="headerlink" title="Find the source code"></a>Find the source code</h1><p>css for code block is in <code>themes/landscape/source/css/_partial/highlight.styl</code><br>So, you can personalize your code block by rewrite it.</p><p>For me, I want to create <strong>deepin-terminal</strong> style <strong>cold block</strong></p><p><img src="https://s1.ax1x.com/2020/06/26/Nrvy7D.png" alt="Nrvy7D.png"></p><p>By checking the source code, we can know that the code block is in a <code>&lt;table&gt;</code><br><img src="https://s1.ax1x.com/2020/07/01/N7YVxg.png" alt="N7YVxg.png"></p><p>So, if I want to add a guider bar as picture above, I need add an element before the tag <code>figure</code>.</p><p>Here is my example:<br><a href="https://karobben.github.io/Blog/Html.html">source</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">$code-block</span><br><span class="line">  <span class="selector-tag">background</span>: <span class="selector-tag">rgb</span>(65, 65, 65)</span><br><span class="line">  <span class="selector-tag">margin</span>: 0 <span class="selector-tag">article-padding</span> * <span class="selector-tag">-1</span></span><br><span class="line">  <span class="selector-tag">padding</span>: 15<span class="selector-tag">px</span> <span class="selector-tag">article-padding</span></span><br><span class="line">  <span class="selector-tag">border-style</span>: <span class="selector-tag">solid</span></span><br><span class="line">  <span class="selector-tag">border-color</span>: <span class="selector-tag">color-border</span></span><br><span class="line">  <span class="selector-tag">border-width</span>: 1<span class="selector-tag">px</span> 0</span><br><span class="line">  <span class="selector-tag">overflow</span>: <span class="selector-tag">auto</span></span><br><span class="line">  <span class="selector-tag">color</span>: <span class="selector-tag">highlight-foreground</span></span><br><span class="line">  <span class="selector-tag">line-height</span>: <span class="selector-tag">font-size</span> * <span class="selector-tag">line-height</span></span><br><span class="line">  <span class="selector-tag">font-family</span>: <span class="selector-tag">monospace</span>;</span><br><span class="line">  <span class="selector-tag">font-size</span>: 18<span class="selector-tag">px</span>;</span><br><span class="line">  <span class="selector-tag">border-radius</span>: 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span> 0<span class="selector-tag">px</span>;</span><br></pre></td></tr></table></figure></div><p>ummmm… I cant remember exactly what am I done, but I made it… Cheers!!!</p><h1 id="Mac-style-Code-Block"><a href="#Mac-style-Code-Block" class="headerlink" title="Mac style Code Block"></a>Mac style Code Block</h1><p>Reference: <a href="https://violetwsh.com/2020/05/01/MacPanel/" target="_blank" rel="noopener">马猴小站</a></p><p>I tried to following with this tutorial from the link above and found it didn’t work. So, I gave it up to recording the changes I made.</p><p>But soon, I found that it works only on the new pages I created.</p><p>So, I deleted all <code>md</code> posts after bake up and copied them to the <code>source</code> directory. After I ran <code>hexo g</code>, it worked, all pages got new style cold-blocks. But the problem is I totally forgot which changes I made. = =</p><p>This is the part of change I can remember:</p><p><strong>CSS file</strong>:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="CSS"><figure class="iseeu highlight /css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span> &#123;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span><br><span class="line"><span class="comment">/*box-shadow: 0 10px 30px 0px rgba(0, 0, 0, 0.4);*/</span></span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">18px</span> <span class="number">18px</span> <span class="number">15px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.4</span>);</span><br><span class="line">  <span class="comment">/*Shadow of the code block*/</span></span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">5px</span> <span class="number">5px</span> <span class="number">15px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.4</span>);</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">35px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">margin-bottom</span>: <span class="number">25px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span> <span class="selector-pseudo">::-webkit-scrollbar</span> &#123;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span> <span class="selector-pseudo">::-webkit-scrollbar-track</span> &#123;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.3</span>);</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span> <span class="selector-pseudo">::-webkit-scrollbar-thumb</span> &#123;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: inset <span class="number">0</span> <span class="number">0</span> <span class="number">6px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.5</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span><span class="selector-pseudo">::before</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="built_in">attr</span>(data-rel);</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">38px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">38px</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#21252b</span>;</span><br><span class="line"><span class="comment">/*background: #108414de;*/</span></span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">16px</span>;</span><br><span class="line"><span class="comment">/*position: absolute;*/</span></span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="comment">/*font-family: 'Source Sans Pro', sans-serif;*/</span></span><br><span class="line">  <span class="attribute">font-weight</span>: bold;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0px</span> <span class="number">80px</span>;</span><br><span class="line">  <span class="attribute">text-indent</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.highlight-wrap</span><span class="selector-attr">[data-rel]</span><span class="selector-pseudo">::after</span> &#123;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">' '</span>;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">-webkit-border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">50%</span>;</span><br><span class="line">  <span class="attribute">background</span>: <span class="number">#fc625d</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">left</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">margin-top</span>: <span class="number">13px</span>;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">20px</span> <span class="number">0px</span> <span class="number">#fdbc40</span>, <span class="number">40px</span> <span class="number">0px</span> <span class="number">#35cd4b</span>;</span><br><span class="line">  <span class="attribute">-webkit-box-shadow</span>: <span class="number">20px</span> <span class="number">0px</span> <span class="number">#fdbc40</span>, <span class="number">40px</span> <span class="number">0px</span> <span class="number">#35cd4b</span>;</span><br><span class="line">  <span class="attribute">box-shadow</span>: <span class="number">20px</span> <span class="number">0px</span> <span class="number">#fdbc40</span>, <span class="number">40px</span> <span class="number">0px</span> <span class="number">#35cd4b</span>;</span><br><span class="line">  <span class="attribute">z-index</span>: <span class="number">3</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>XGBoost (out of date)</title>
      <link href="/R/XGBoost.html"/>
      <url>/R/XGBoost.html</url>
      
        <content type="html"><![CDATA[<h1 id="XGBoost-out-of-date"><a href="#XGBoost-out-of-date" class="headerlink" title="XGBoost (out of date)"></a>XGBoost (out of date)</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(xgboost)</span><br><span class="line"><span class="keyword">library</span>(tidyverse)</span><br><span class="line"><span class="keyword">library</span>(modelr)</span><br><span class="line"></span><br><span class="line"> a &lt;- read_csv(<span class="string">"melb_data.csv"</span>)</span><br><span class="line"> a &lt;- na.omit(a)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Data</span></span><br><span class="line"></span><br><span class="line">a &lt;- select(TR,-starts_with(<span class="string">"Address"</span>))</span><br><span class="line">Suburb &lt;- model.matrix(~Suburb-<span class="number">1</span>,a)</span><br><span class="line">Type &lt;- model.matrix(~Type-<span class="number">1</span>,a)</span><br><span class="line">Method &lt;- model.matrix(~Method-<span class="number">1</span>,a)</span><br><span class="line">SellerG &lt;- model.matrix(~SellerG-<span class="number">1</span>,a)</span><br><span class="line">CouncilArea &lt;- model.matrix(~CouncilArea-<span class="number">1</span>,a)</span><br><span class="line">Regionname &lt;- model.matrix(~Regionname-<span class="number">1</span>,a)</span><br><span class="line">aa &lt;- data.frame(a,Suburb=Suburb, Type=Type,Method=Method,SellerG=SellerG, CouncilArea=CouncilArea,Regionname=Regionname)</span><br><span class="line"></span><br><span class="line"><span class="comment">## Split data to tow groups</span></span><br><span class="line">splitData &lt;- resample_partition(aa, c(test = <span class="number">0.3</span>, train = <span class="number">0.7</span>))</span><br><span class="line"> TR &lt;- data.frame(splitData$train)</span><br><span class="line"> TT &lt;- data.frame(splitData$test)</span><br><span class="line"><span class="comment">#or</span></span><br><span class="line">set.seed(<span class="number">1234</span>)</span><br><span class="line">diseaseInfo &lt;- diseaseInfo[sample(<span class="number">1</span>:nrow(diseaseInfo)), ]</span><br><span class="line"><span class="comment">#random arrage the data and grep apart of it to different groups</span></span><br><span class="line"></span><br><span class="line"><span class="comment">## RM predict target and build target list</span></span><br><span class="line"> TR_Labels &lt;- TR$Price</span><br><span class="line"> TT_Labels &lt;- TT$Price</span><br><span class="line"> TR &lt;-  select(TR,-starts_with(<span class="string">"Price"</span>))</span><br><span class="line"> TT &lt;-  select(TT,-starts_with(<span class="string">"Price"</span>))</span><br><span class="line"> TR &lt;- data.matrix(TR)</span><br><span class="line"> TT &lt;- data.matrix(TT)</span><br><span class="line"></span><br><span class="line">dtrain &lt;- xgb.DMatrix(data = TR, label= TR_Labels)</span><br><span class="line">dtest &lt;- xgb.DMatrix(data = TT, label= TT_Labels)</span><br><span class="line"></span><br><span class="line">TB &lt;- data.frame( mean=m)</span><br><span class="line"></span><br><span class="line">model &lt;- xgboost(data = dtrain,nround = <span class="number">3000</span>)</span><br><span class="line"></span><br><span class="line"> pred &lt;- predict(model, dtest)</span><br><span class="line"> mean &lt;- (pred-TT_Labels)/TT_Labels</span><br><span class="line"> mean[which(mean&lt;<span class="number">0</span>)] &lt;- mean[which(mean&lt;<span class="number">0</span>)]*(-<span class="number">1</span>)</span><br><span class="line"> m &lt;- mean(mean)</span><br><span class="line"></span><br><span class="line">mean(as.numeric(pred &gt; <span class="number">0.5</span>) != TT_Labels)</span><br><span class="line"></span><br><span class="line">predict(model,dtest)</span><br><span class="line"></span><br><span class="line"><span class="comment">#for(i in 1)&#123;</span></span><br><span class="line"><span class="comment">#  model &lt;- xgboost(data = dtrain,nround = i)</span></span><br><span class="line"><span class="comment">#  pred &lt;- predict(model, dtest)</span></span><br><span class="line"><span class="comment">#  mean &lt;- (pred-TT_Labels)/TT_Labels</span></span><br><span class="line"><span class="comment">#  mean[which(mean&lt;0)] &lt;- mean[which(mean&lt;0)]*(-1)</span></span><br><span class="line"><span class="comment">#  m &lt;- mean(mean)</span></span><br><span class="line"><span class="comment"># TB &lt;- rbind(TB,m)</span></span><br><span class="line"><span class="comment"># &#125;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">library</span>(xgboost)</span><br><span class="line"><span class="keyword">library</span>(tidyverse)</span><br><span class="line"></span><br><span class="line">diseaseInfo &lt;- read_csv(<span class="string">"Outbreak_240817.csv"</span>)</span><br><span class="line">set.seed(<span class="number">1234</span>)</span><br><span class="line">diseaseInfo &lt;- diseaseInfo[sample(<span class="number">1</span>:nrow(diseaseInfo)), ]</span><br><span class="line">head(diseaseInfo)</span><br><span class="line">diseaseInfo_humansRemoved &lt;- diseaseInfo %&gt;%</span><br><span class="line">    select(-starts_with(<span class="string">"human"</span>))</span><br><span class="line">diseaseLabels &lt;- diseaseInfo %&gt;%</span><br><span class="line">    select(humansAffected) %&gt;% <span class="comment"># get the column with the # of humans affected</span></span><br><span class="line">    is.na() %&gt;% <span class="comment"># is it NA?</span></span><br><span class="line">    magrittr::not() <span class="comment"># switch TRUE and FALSE (using function from the magrittr package)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># check out the first few lines</span></span><br><span class="line">head(diseaseLabels) <span class="comment"># of our target variable</span></span><br><span class="line">head(diseaseInfo$humansAffected) <span class="comment"># of the original column</span></span><br><span class="line">diseaseInfo_numeric &lt;- diseaseInfo_humansRemoved %&gt;%</span><br><span class="line">    select(-Id) %&gt;% <span class="comment"># the case id shouldn't contain useful information</span></span><br><span class="line">    select(-c(longitude, latitude)) %&gt;% <span class="comment"># location data is also in country data</span></span><br><span class="line">    select_if(is.numeric) <span class="comment"># select remaining numeric columns</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># make sure that our dataframe is all numeric</span></span><br><span class="line">str(diseaseInfo_numeric)</span><br><span class="line">model.matrix(~country-<span class="number">1</span>,head(diseaseInfo))</span><br><span class="line">region &lt;- model.matrix(~country-<span class="number">1</span>,diseaseInfo)</span><br><span class="line">head(diseaseInfo$speciesDescription)</span><br><span class="line">diseaseInfo_numeric$is_domestic &lt;- str_detect(diseaseInfo$speciesDescription, <span class="string">"domestic"</span>)</span><br><span class="line"></span><br><span class="line">speciesList &lt;- diseaseInfo$speciesDescription %&gt;%</span><br><span class="line">    str_replace(<span class="string">"[[:punct:]]"</span>, <span class="string">""</span>) %&gt;% <span class="comment"># remove punctuation (some rows have parentheses)</span></span><br><span class="line">    str_extract(<span class="string">"[a-z]*$"</span>) <span class="comment"># extract the least word in each row</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># convert our list into a dataframe...</span></span><br><span class="line">speciesList &lt;- tibble(species = speciesList)</span><br><span class="line"></span><br><span class="line"><span class="comment"># and convert to a matrix using 1 hot encoding</span></span><br><span class="line">options(na.action=<span class="string">'na.pass'</span>) <span class="comment"># don't drop NA values!</span></span><br><span class="line">species &lt;- model.matrix(~species-<span class="number">1</span>,speciesList)</span><br><span class="line"></span><br><span class="line">diseaseInfo_numeric &lt;- cbind(diseaseInfo_numeric, region, species)</span><br><span class="line">diseaseInfo_matrix &lt;- data.matrix(diseaseInfo_numeric)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get the numb 70/30 training test split</span></span><br><span class="line">numberOfTrainingSamples &lt;- round(length(diseaseLabels) * <span class="number">.7</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># training data</span></span><br><span class="line">train_data &lt;- diseaseInfo_matrix[<span class="number">1</span>:numberOfTrainingSamples,]</span><br><span class="line">train_labels &lt;- diseaseLabels[<span class="number">1</span>:numberOfTrainingSamples]</span><br><span class="line"></span><br><span class="line"><span class="comment"># testing data</span></span><br><span class="line">test_data &lt;- diseaseInfo_matrix[-(<span class="number">1</span>:numberOfTrainingSamples),]</span><br><span class="line">test_labels &lt;- diseaseLabels[-(<span class="number">1</span>:numberOfTrainingSamples)]</span><br><span class="line"></span><br><span class="line">dtrain &lt;- xgb.DMatrix(data = train_data, label= train_labels)</span><br><span class="line">dtest &lt;- xgb.DMatrix(data = test_data, label= test_labels)</span><br><span class="line"></span><br><span class="line">model &lt;- xgboost(data = dtrain, <span class="comment"># the data   </span></span><br><span class="line">                 nround = <span class="number">2</span>, <span class="comment"># max number of boosting iterations</span></span><br><span class="line">                 objective = <span class="string">"binary:logistic"</span>)  <span class="comment"># the objective function</span></span><br><span class="line"></span><br><span class="line">pred &lt;- predict(model, dtest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get &amp; print the classification error</span></span><br><span class="line">err &lt;- mean(as.numeric(pred &gt; <span class="number">0.5</span>) != test_labels)</span><br><span class="line">print(paste(<span class="string">"test-error="</span>, err))</span><br><span class="line"></span><br><span class="line">model_tuned &lt;- xgboost(data = dtrain, <span class="comment"># the data           </span></span><br><span class="line">                 max.depth = <span class="number">3</span>, <span class="comment"># the maximum depth of each decision tree</span></span><br><span class="line">                 nround = <span class="number">2</span>, <span class="comment"># max number of boosting iterations</span></span><br><span class="line">                 objective = <span class="string">"binary:logistic"</span>) <span class="comment"># the objective function</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># generate predictions for our held-out testing data</span></span><br><span class="line">pred &lt;- predict(model_tuned, dtest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get &amp; print the classification error</span></span><br><span class="line">err &lt;- mean(as.numeric(pred &gt; <span class="number">0.5</span>) != test_labels)</span><br><span class="line">print(paste(<span class="string">"test-error="</span>, err))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># get the number of negative &amp; positive cases in our data</span></span><br><span class="line">negative_cases &lt;- sum(train_labels == <span class="literal">FALSE</span>)</span><br><span class="line">postive_cases &lt;- sum(train_labels == <span class="literal">TRUE</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># train a model using our training data</span></span><br><span class="line">model_tuned &lt;- xgboost(data = dtrain, <span class="comment"># the data           </span></span><br><span class="line">                 max.depth = <span class="number">3</span>, <span class="comment"># the maximum depth of each decision tree</span></span><br><span class="line">                 nround = <span class="number">10</span>, <span class="comment"># number of boosting rounds</span></span><br><span class="line">                 early_stopping_rounds = <span class="number">3</span>, <span class="comment"># if we dont see an improvement in this many rounds, stop</span></span><br><span class="line">                 objective = <span class="string">"binary:logistic"</span>, <span class="comment"># the objective function</span></span><br><span class="line">                 scale_pos_weight = negative_cases/postive_cases) <span class="comment"># control for imbalanced classes</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># generate predictions for our held-out testing data</span></span><br><span class="line">pred &lt;- predict(model_tuned, dtest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get &amp; print the classification error</span></span><br><span class="line">err &lt;- mean(as.numeric(pred &gt; <span class="number">0.5</span>) != test_labels)</span><br><span class="line">print(paste(<span class="string">"test-error="</span>, err))</span><br><span class="line"></span><br><span class="line"><span class="comment"># train a model using our training data</span></span><br><span class="line">model_tuned &lt;- xgboost(data = dtrain, <span class="comment"># the data           </span></span><br><span class="line">                 max.depth = <span class="number">3</span>, <span class="comment"># the maximum depth of each decision tree</span></span><br><span class="line">                 nround = <span class="number">10</span>, <span class="comment"># number of boosting rounds</span></span><br><span class="line">                 early_stopping_rounds = <span class="number">3</span>, <span class="comment"># if we dont see an improvement in this many rounds, stop</span></span><br><span class="line">                 objective = <span class="string">"binary:logistic"</span>, <span class="comment"># the objective function</span></span><br><span class="line">                 scale_pos_weight = negative_cases/postive_cases, <span class="comment"># control for imbalanced classes</span></span><br><span class="line">                 gamma = <span class="number">1</span>) <span class="comment"># add a regularization term</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># generate predictions for our held-out testing data</span></span><br><span class="line">pred &lt;- predict(model_tuned, dtest)</span><br><span class="line"></span><br><span class="line"><span class="comment"># get &amp; print the classification error</span></span><br><span class="line">err &lt;- mean(as.numeric(pred &gt; <span class="number">0.5</span>) != test_labels)</span><br><span class="line">print(paste(<span class="string">"test-error="</span>, err))</span><br><span class="line"></span><br><span class="line">xgb.plot.multi.trees(feature_names = names(diseaseInfo_matrix),</span><br><span class="line">                     model = model)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo: live2d</title>
      <link href="/Blog/Hexo_live2d.html"/>
      <url>/Blog/Hexo_live2d.html</url>
      
        <content type="html"><![CDATA[<h1 id="Hexo-live2d"><a href="#Hexo-live2d" class="headerlink" title="Hexo: live2d"></a>Hexo: live2d</h1><table><thead><tr><th><a href="https://imgchr.com/i/amxSmQ" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/30/amxSmQ.png" alt="amxSmQ.png"></a></th><th>Project: <a href="https://github.com/EYHN/hexo-helper-live2d" target="_blank" rel="noopener">github EEEEEEYHN</a><br>Models Display: <a href="https://huaji8.top/post/live2d-plugin-2.0/" target="_blank" rel="noopener">Blog</a><br>Models downloads: <a href="https://github.com/summerscar/live2dDemo" target="_blank" rel="noopener">github summerscar</a></th></tr></thead></table><h1 id="Install"><a href="#Install" class="headerlink" title="Install"></a>Install</h1><p>install the widget at the hexo’s directory of your blog</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save hexo-helper-live2d</span><br></pre></td></tr></table></figure></div><h1 id="Models"><a href="#Models" class="headerlink" title="Models"></a>Models</h1><p>Make a directory for storing the models at your hexo’s directory</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir live2d_models</span><br><span class="line"><span class="comment"># Downloads</span></span><br><span class="line">git <span class="built_in">clone</span> https://github.com/summerscar/live2dDemo</span><br><span class="line"><span class="comment"># Models</span></span><br><span class="line">mv live2dDemo/assets/shizuku live2d_models/</span><br></pre></td></tr></table></figure></div><p>Moving the models you like from <code>live2dDemo/assets/</code> (from git clone) to <code>live2d_models</code> (in your hexo’s directory)</p><h1 id="Config"><a href="#Config" class="headerlink" title="Config"></a>Config</h1><p>Add configuration in hexo’s <code>_config.yml</code> file or theme’s <code>_config.yml</code>.<br>(PS: I tried to add configuration at theme’s <code>_config.yml</code> file first and it <strong>didn’t work</strong> for me)</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">live2d:</span><br><span class="line">  <span class="built_in">enable</span>: <span class="literal">true</span></span><br><span class="line">  scriptFrom: <span class="built_in">local</span></span><br><span class="line">  pluginRootPath: live2dw/</span><br><span class="line">  pluginJsPath: lib/</span><br><span class="line">  pluginModelPath: assets/</span><br><span class="line">  tagMode: <span class="literal">false</span></span><br><span class="line">  <span class="built_in">log</span>: <span class="literal">false</span></span><br><span class="line">  model:</span><br><span class="line">    use: shizuku</span><br><span class="line">  display:</span><br><span class="line">    position: right <span class="comment">#left</span></span><br><span class="line">    width: 150</span><br><span class="line">    height: 300</span><br><span class="line">  mobile:</span><br><span class="line">    show: <span class="literal">true</span></span><br><span class="line">  react:</span><br><span class="line">    opacity: 0.7</span><br></pre></td></tr></table></figure></div><h1 id="Final-Result"><a href="#Final-Result" class="headerlink" title="Final Result"></a>Final Result</h1><p><a href="https://imgchr.com/i/amxpwj" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/07/30/amxpwj.gif" alt="amxpwj.gif"></a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Nutrition Data Sheet Visualization</title>
      <link href="/Blog/ggplot_NRPlot.html"/>
      <url>/Blog/ggplot_NRPlot.html</url>
      
        <content type="html"><![CDATA[<h1 id="Complicate-Nutrition-Data-Sheet-Visualization"><a href="#Complicate-Nutrition-Data-Sheet-Visualization" class="headerlink" title="Complicate Nutrition Data Sheet Visualization"></a>Complicate Nutrition Data Sheet Visualization</h1><p><strong>Example Data</strong><br><code>A &lt;- read.table(&quot;Digestive_Enzymes.csv&quot;,sep=&#39;,&#39;,header=T)</code><br>In this matrix, we have unique <code>colname</code> and <code>rowname</code>.<br>There are <code>±</code> and <code>abc</code> followed with the numbers.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Gastric_Pepsin Gastric_Amylase Gastric_Lipase Intestinal_Pepsin</span><br><span class="line">G1    17.23±0.03f       0.68±0.00    18.08±0.12f        1.54±0.01d</span><br><span class="line">G2    18.48±0.02e       0.71±0.00    19.11±0.11e        1.62±0.01c</span><br><span class="line">G3    20.67±0.04d       0.77±0.00    20.0±0.14ad       1.68±0.01bc</span><br><span class="line">G4    22.32±0.10c       0.80±0.00   20.71±0.21ab       1.76±0.02ab</span><br><span class="line">G5   24.21±0.04ab       0.84±0.00    21.18±0.25a       1.78±0.01ab</span><br><span class="line">G6   17.38±0.02de       0.70±0.00    17.63±0.15f       1.57±0.02cd</span><br></pre></td></tr></table></figure></div><h1 id="Data-Clean"><a href="#Data-Clean" class="headerlink" title="Data Clean"></a>Data Clean</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">NutriSplit &lt;- <span class="keyword">function</span>(A)&#123;</span><br><span class="line">  A1 &lt;- c()</span><br><span class="line">  A2 &lt;- c()</span><br><span class="line">  <span class="comment"># Split the Avr and Disparity</span></span><br><span class="line">  <span class="keyword">for</span>(i <span class="keyword">in</span> A)&#123;</span><br><span class="line">    tmp1 = sapply(strsplit(as.character(i),<span class="string">'±'</span>),<span class="string">"["</span>,<span class="number">1</span>)</span><br><span class="line">    tmp2 = sapply(strsplit(as.character(i),<span class="string">'±'</span>),<span class="string">"["</span>,<span class="number">2</span>)</span><br><span class="line">    A1 &lt;- c(A1,tmp1)</span><br><span class="line">    A2 &lt;- c(A2,tmp2)</span><br><span class="line">  &#125;</span><br><span class="line">  A1 &lt;- as.numeric(A1)</span><br><span class="line">  <span class="comment"># split the Dist and Significant</span></span><br><span class="line">  A2_1 &lt;- gsub(<span class="string">"[^0-9.]"</span>, <span class="string">""</span>, A2)</span><br><span class="line">  A2_2 &lt;- gsub(<span class="string">"[^a-z]"</span>, <span class="string">""</span>, A2)</span><br><span class="line">  <span class="comment"># Matrix</span></span><br><span class="line">  A1 &lt;- matrix(A1,nrow = nrow(A))</span><br><span class="line">  A2_1 &lt;- matrix(as.numeric(A2_1),nrow = nrow(A))</span><br><span class="line">  A2_2 &lt;- matrix(A2_2,nrow = nrow(A))</span><br><span class="line">  colnames(A1) = colnames(A2_1) = colnames(A2_2) = colnames(A)</span><br><span class="line">  rownames(A1) = rownames(A2_1) = rownames(A2_2) = rownames(A)</span><br><span class="line">  A1 &lt;- data.frame(A1)</span><br><span class="line">  A2_1 &lt;- data.frame(A2_1)</span><br><span class="line">  A2_2 &lt;- data.frame(A2_2)</span><br><span class="line">  Result = c()</span><br><span class="line">  Result$Avr &lt;- A1</span><br><span class="line">  Result$Dit &lt;- A2_1</span><br><span class="line">  Result$Sig &lt;- A2_2</span><br><span class="line">  <span class="keyword">return</span>(Result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><h1 id="Plot"><a href="#Plot" class="headerlink" title="Plot"></a>Plot</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(ggplot2)</span><br><span class="line"><span class="keyword">library</span>(reshape2)</span><br><span class="line"><span class="keyword">library</span>(ggrepel)</span><br><span class="line"></span><br><span class="line">TB &lt;- NutriSplit(A)</span><br><span class="line"></span><br><span class="line">ggplot(melt(as.matrix(TB$Avr)),aes(x=Var2,y=value)) +</span><br><span class="line">  geom_point(aes(color=melt(as.matrix(TB$Sig))$value)) +</span><br><span class="line">  geom_line(aes(group=Var1,color=Var1)) +</span><br><span class="line">  geom_errorbar(aes(ymin=value-melt(as.matrix(TB$Dit))$value, ymax=value+melt(as.matrix(TB$Dit))$value))+</span><br><span class="line">  geom_text_repel(aes(x=Var2,y=value,label=Var1, color=melt(as.matrix(TB$Sig))$value))</span><br></pre></td></tr></table></figure></div>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Duang~</title>
      <link href="/Blog/SSW.html"/>
      <url>/Blog/SSW.html</url>
      
        <content type="html"><![CDATA[<table><thead><tr><th>Date</th><th>S</th></tr></thead><tbody><tr><td>2020/07/30</td><td>79.18</td></tr><tr><td>2020/07/31</td><td>83.98</td></tr><tr><td>2020/08/01</td><td>83.22</td></tr><tr><td>2020/08/02</td><td>82.38</td></tr><tr><td>2020/08/03</td><td>82.70</td></tr></tbody></table>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Response Surface Methodology Notes</title>
      <link href="/LearnNotes/rsm.html"/>
      <url>/LearnNotes/rsm.html</url>
      
        <content type="html"><![CDATA[<h1 id="Response-Surface-Methodology"><a href="#Response-Surface-Methodology" class="headerlink" title="Response Surface Methodology"></a>Response Surface Methodology</h1><p>Video tutorial: <a href="https://www.youtube.com/watch?v=LBVPxeqirpE&t=91s" target="_blank" rel="noopener">Paul Allen</a>, <a href="https://www.youtube.com/watch?v=uEGBB2pCJbM" target="_blank" rel="noopener">Erik Vanhatalo</a><br>DOA in response surface</p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Python|OpenCV| Video Speedup</title>
      <link href="/Blog/Py_openCV_speed.html"/>
      <url>/Blog/Py_openCV_speed.html</url>
      
        <content type="html"><![CDATA[<h1 id="Python-OpenCV-Video-Speed-up"><a href="#Python-OpenCV-Video-Speed-up" class="headerlink" title="Python| OpenCV: Video Speed up"></a>Python| OpenCV: Video Speed up</h1><p>Before starting:<br>You can find some fundamental codes of Opencv at: <a href="https://karobben.github.io/Python/OpenCV.html">My Blog</a><br>You can find the latest release at: <a href="https://github.com/Karobben/Karobben-Work-Station/blob/master/Video_speed.py" target="_blank" rel="noopener">GitHub: Karobben</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 2020/08/03</span></span><br><span class="line"><span class="comment"># @Author  : Karobben</span></span><br><span class="line"><span class="comment"># @Site    : China</span></span><br><span class="line"><span class="comment"># @File    : VideoSlice.py</span></span><br><span class="line"><span class="comment"># @Software: Atom</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>,<span class="string">'-I'</span>,<span class="string">'--input'</span>,</span><br><span class="line">                    help=<span class="string">'Input Video file'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-o'</span>,<span class="string">'-U'</span>,<span class="string">'--output'</span>, default = <span class="string">"out_test.avi"</span>,</span><br><span class="line">                    help=<span class="string">'Output Video file, default as "out_test.avi"'</span>)     <span class="comment">#输出文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-r'</span>,<span class="string">'-R'</span>,<span class="string">'--ratio'</span>, default = <span class="number">2</span>,</span><br><span class="line">                    type = int,</span><br><span class="line">                    help=<span class="string">'Speed up by ratio, "default = 2"'</span>)     <span class="comment">#加速比率</span></span><br><span class="line">parser.add_argument(<span class="string">'-f'</span>,<span class="string">'-F'</span>,<span class="string">'--fps'</span>, default = <span class="number">0</span>,</span><br><span class="line">                    type = int,</span><br><span class="line">                    help=<span class="string">'Speed up by ratio, "default = 2"'</span>)     <span class="comment">#帧率</span></span><br><span class="line">parser.add_argument(<span class="string">'-inf'</span>, nargs=<span class="string">'?'</span>,default=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#获取参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">INPUT = args.input</span><br><span class="line">OUTPUT = args.output</span><br><span class="line">Ratio = args.ratio</span><br><span class="line">fps_o = args.fps</span><br><span class="line">inf = args.inf</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2</span><br><span class="line"></span><br><span class="line"><span class="comment">#INPUT = 'bug.avi'</span></span><br><span class="line">cap = cv2.VideoCapture(INPUT)</span><br><span class="line">fps_c = cap.get(cv2.CAP_PROP_FPS)</span><br><span class="line">Video_h = cap.get(cv2.CAP_PROP_FRAME_HEIGHT)</span><br><span class="line">Video_w = cap.get(cv2.CAP_PROP_FRAME_WIDTH)</span><br><span class="line">print(<span class="string">"Current fps:"</span>,fps_c)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">#OUTPUT = "out_test.avi"</span></span><br><span class="line"><span class="keyword">if</span> fps_o == <span class="number">0</span>:</span><br><span class="line">    fps_o = fps_c</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">Video_speed</span><span class="params">(cap, OUTPUT)</span>:</span></span><br><span class="line">    Out_size = (int(Video_w),int(Video_h))</span><br><span class="line">    fourcc = cv2.VideoWriter_fourcc(<span class="string">'M'</span>,<span class="string">'J'</span>,<span class="string">'P'</span>,<span class="string">'G'</span>)</span><br><span class="line">    videowriter = cv2.VideoWriter(OUTPUT,fourcc,fps_o,Out_size)</span><br><span class="line"></span><br><span class="line">    i = <span class="number">0</span></span><br><span class="line">    ret = <span class="literal">True</span></span><br><span class="line">    <span class="keyword">while</span> ret == <span class="literal">True</span>:</span><br><span class="line">        i +=<span class="number">1</span></span><br><span class="line">        ret,frame=cap.read()</span><br><span class="line">        <span class="keyword">if</span> i % Ratio == <span class="number">0</span>:</span><br><span class="line">            videowriter.write(frame)</span><br><span class="line"></span><br><span class="line">    videowriter.release()</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> inf == <span class="literal">True</span>:</span><br><span class="line">    Video_speed(cap, OUTPUT)</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili：<a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title></title>
      <link href="/LearnNotes/Paper_RNASeq_Fish1.html"/>
      <url>/LearnNotes/Paper_RNASeq_Fish1.html</url>
      
        <content type="html"><![CDATA[<!DOCTYPE html><html><head>      <title>Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</title>      <meta charset="utf-8">      <meta name="viewport" content="width=device-width, initial-scale=1.0">            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css">                        <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mermaid@8.5.0/dist/mermaid.min.js"></script>                                    <style>      /** * prism.js Github theme based on GitHub's theme. * @author Sam Clarke */code[class*="language-"],pre[class*="language-"] {  color: #333;  background: none;  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;  text-align: left;  white-space: pre;  word-spacing: normal;  word-break: normal;  word-wrap: normal;  line-height: 1.4;  -moz-tab-size: 8;  -o-tab-size: 8;  tab-size: 8;  -webkit-hyphens: none;  -moz-hyphens: none;  -ms-hyphens: none;  hyphens: none;}/* Code blocks */pre[class*="language-"] {  padding: .8em;  overflow: auto;  /* border: 1px solid #ddd; */  border-radius: 3px;  /* background: #fff; */  background: #f5f5f5;}/* Inline code */:not(pre) > code[class*="language-"] {  padding: .1em;  border-radius: .3em;  white-space: normal;  background: #f5f5f5;}.token.comment,.token.blockquote {  color: #969896;}.token.cdata {  color: #183691;}.token.doctype,.token.punctuation,.token.variable,.token.macro.property {  color: #333;}.token.operator,.token.important,.token.keyword,.token.rule,.token.builtin {  color: #a71d5d;}.token.string,.token.url,.token.regex,.token.attr-value {  color: #183691;}.token.property,.token.number,.token.boolean,.token.entity,.token.atrule,.token.constant,.token.symbol,.token.command,.token.code {  color: #0086b3;}.token.tag,.token.selector,.token.prolog {  color: #63a35c;}.token.function,.token.namespace,.token.pseudo-element,.token.class,.token.class-name,.token.pseudo-class,.token.id,.token.url-reference .token.variable,.token.attr-name {  color: #795da3;}.token.entity {  cursor: help;}.token.title,.token.title .token.punctuation {  font-weight: bold;  color: #1d3e81;}.token.list {  color: #ed6a43;}.token.inserted {  background-color: #eaffea;  color: #55a532;}.token.deleted {  background-color: #ffecec;  color: #bd2c00;}.token.bold {  font-weight: bold;}.token.italic {  font-style: italic;}/* JSON */.language-json .token.property {  color: #183691;}.language-markup .token.tag .token.punctuation {  color: #333;}/* CSS */code.language-css,.language-css .token.function {  color: #0086b3;}/* YAML */.language-yaml .token.atrule {  color: #63a35c;}code.language-yaml {  color: #183691;}/* Ruby */.language-ruby .token.function {  color: #333;}/* Markdown */.language-markdown .token.url {  color: #795da3;}/* Makefile */.language-makefile .token.symbol {  color: #795da3;}.language-makefile .token.variable {  color: #183691;}.language-makefile .token.builtin {  color: #0086b3;}/* Bash */.language-bash .token.keyword {  color: #0086b3;}/* highlight */pre[data-line] {  position: relative;  padding: 1em 0 1em 3em;}pre[data-line] .line-highlight-wrapper {  position: absolute;  top: 0;  left: 0;  background-color: transparent;  display: block;  width: 100%;}pre[data-line] .line-highlight {  position: absolute;  left: 0;  right: 0;  padding: inherit 0;  margin-top: 1em;  background: hsla(24, 20%, 50%,.08);  background: linear-gradient(to right, hsla(24, 20%, 50%,.1) 70%, hsla(24, 20%, 50%,0));  pointer-events: none;  line-height: inherit;  white-space: pre;}pre[data-line] .line-highlight:before, pre[data-line] .line-highlight[data-end]:after {  content: attr(data-start);  position: absolute;  top: .4em;  left: .6em;  min-width: 1em;  padding: 0 .5em;  background-color: hsla(24, 20%, 50%,.4);  color: hsl(24, 20%, 95%);  font: bold 65%/1.5 sans-serif;  text-align: center;  vertical-align: .3em;  border-radius: 999px;  text-shadow: none;  box-shadow: 0 1px white;}pre[data-line] .line-highlight[data-end]:after {  content: attr(data-end);  top: auto;  bottom: .4em;}html body{font-family:"Helvetica Neue",Helvetica,"Segoe UI",Arial,freesans,sans-serif;font-size:16px;line-height:1.6;color:#333;background-color:#fff;overflow:initial;box-sizing:border-box;word-wrap:break-word}html body>:first-child{margin-top:0}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{line-height:1.2;margin-top:1em;margin-bottom:16px;color:#000}html body h1{font-size:2.25em;font-weight:300;padding-bottom:.3em}html body h2{font-size:1.75em;font-weight:400;padding-bottom:.3em}html body h3{font-size:1.5em;font-weight:500}html body h4{font-size:1.25em;font-weight:600}html body h5{font-size:1.1em;font-weight:600}html body h6{font-size:1em;font-weight:600}html body h1,html body h2,html body h3,html body h4,html body h5{font-weight:600}html body h5{font-size:1em}html body h6{color:#5c5c5c}html body strong{color:#000}html body del{color:#5c5c5c}html body a:not([href]){color:inherit;text-decoration:none}html body a{color:#08c;text-decoration:none}html body a:hover{color:#00a3f5;text-decoration:none}html body img{max-width:100%}html body>p{margin-top:0;margin-bottom:16px;word-wrap:break-word}html body>ul,html body>ol{margin-bottom:16px}html body ul,html body ol{padding-left:2em}html body ul.no-list,html body ol.no-list{padding:0;list-style-type:none}html body ul ul,html body ul ol,html body ol ol,html body ol ul{margin-top:0;margin-bottom:0}html body li{margin-bottom:0}html body li.task-list-item{list-style:none}html body li>p{margin-top:0;margin-bottom:0}html body .task-list-item-checkbox{margin:0 .2em .25em -1.8em;vertical-align:middle}html body .task-list-item-checkbox:hover{cursor:pointer}html body blockquote{margin:16px 0;font-size:inherit;padding:0 15px;color:#5c5c5c;border-left:4px solid #d6d6d6}html body blockquote>:first-child{margin-top:0}html body blockquote>:last-child{margin-bottom:0}html body hr{height:4px;margin:32px 0;background-color:#d6d6d6;border:0 none}html body table{margin:10px 0 15px 0;border-collapse:collapse;border-spacing:0;display:block;width:100%;overflow:auto;word-break:normal;word-break:keep-all}html body table th{font-weight:bold;color:#000}html body table td,html body table th{border:1px solid #d6d6d6;padding:6px 13px}html body dl{padding:0}html body dl dt{padding:0;margin-top:16px;font-size:1em;font-style:italic;font-weight:bold}html body dl dd{padding:0 16px;margin-bottom:16px}html body code{font-family:Menlo,Monaco,Consolas,'Courier New',monospace;font-size:.85em !important;color:#000;background-color:#f0f0f0;border-radius:3px;padding:.2em 0}html body code::before,html body code::after{letter-spacing:-0.2em;content:"\00a0"}html body pre>code{padding:0;margin:0;font-size:.85em !important;word-break:normal;white-space:pre;background:transparent;border:0}html body .highlight{margin-bottom:16px}html body .highlight pre,html body pre{padding:1em;overflow:auto;font-size:.85em !important;line-height:1.45;border:#d6d6d6;border-radius:3px}html body .highlight pre{margin-bottom:0;word-break:normal}html body pre code,html body pre tt{display:inline;max-width:initial;padding:0;margin:0;overflow:initial;line-height:inherit;word-wrap:normal;background-color:transparent;border:0}html body pre code:before,html body pre tt:before,html body pre code:after,html body pre tt:after{content:normal}html body p,html body blockquote,html body ul,html body ol,html body dl,html body pre{margin-top:0;margin-bottom:16px}html body kbd{color:#000;border:1px solid #d6d6d6;border-bottom:2px solid #c7c7c7;padding:2px 4px;background-color:#f0f0f0;border-radius:3px}@media print{html body{background-color:#fff}html body h1,html body h2,html body h3,html body h4,html body h5,html body h6{color:#000;page-break-after:avoid}html body blockquote{color:#5c5c5c}html body pre{page-break-inside:avoid}html body table{display:table}html body img{display:block;max-width:100%;max-height:100%}html body pre,html body code{word-wrap:break-word;white-space:pre}}.markdown-preview{width:100%;height:100%;box-sizing:border-box}.markdown-preview .pagebreak,.markdown-preview .newpage{page-break-before:always}.markdown-preview pre.line-numbers{position:relative;padding-left:3.8em;counter-reset:linenumber}.markdown-preview pre.line-numbers>code{position:relative}.markdown-preview pre.line-numbers .line-numbers-rows{position:absolute;pointer-events:none;top:1em;font-size:100%;left:0;width:3em;letter-spacing:-1px;border-right:1px solid #999;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.markdown-preview pre.line-numbers .line-numbers-rows>span{pointer-events:none;display:block;counter-increment:linenumber}.markdown-preview pre.line-numbers .line-numbers-rows>span:before{content:counter(linenumber);color:#999;display:block;padding-right:.8em;text-align:right}.markdown-preview .mathjax-exps .MathJax_Display{text-align:center !important}.markdown-preview:not([for="preview"]) .code-chunk .btn-group{display:none}.markdown-preview:not([for="preview"]) .code-chunk .status{display:none}.markdown-preview:not([for="preview"]) .code-chunk .output-div{margin-bottom:16px}.scrollbar-style::-webkit-scrollbar{width:8px}.scrollbar-style::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}.scrollbar-style::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode]){position:relative;width:100%;height:100%;top:0;left:0;margin:0;padding:0;overflow:auto}html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{position:relative;top:0}@media screen and (min-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em calc(50% - 457px + 2em)}}@media screen and (max-width:914px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode]) .markdown-preview{font-size:14px !important;padding:1em}}@media print{html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{display:none}}html body[for="html-export"]:not([data-presentation-mode]) #sidebar-toc-btn{position:fixed;bottom:8px;left:8px;font-size:28px;cursor:pointer;color:inherit;z-index:99;width:32px;text-align:center;opacity:.4}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] #sidebar-toc-btn{opacity:1}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc{position:fixed;top:0;left:0;width:300px;height:100%;padding:32px 0 48px 0;font-size:14px;box-shadow:0 0 4px rgba(150,150,150,0.33);box-sizing:border-box;overflow:auto;background-color:inherit}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar{width:8px}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-track{border-radius:10px;background-color:transparent}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc::-webkit-scrollbar-thumb{border-radius:5px;background-color:rgba(150,150,150,0.66);border:4px solid rgba(150,150,150,0.66);background-clip:content-box}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc a{text-decoration:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{padding:0 1.6em;margin-top:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc li{margin-bottom:.8em}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .md-sidebar-toc ul{list-style-type:none}html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{left:300px;width:calc(100% -  300px);padding:2em calc(50% - 457px -  150px);margin:0;box-sizing:border-box}@media screen and (max-width:1274px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{padding:2em}}@media screen and (max-width:450px){html body[for="html-export"]:not([data-presentation-mode])[html-show-sidebar-toc] .markdown-preview{width:100%}}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .markdown-preview{left:50%;transform:translateX(-50%)}html body[for="html-export"]:not([data-presentation-mode]):not([html-show-sidebar-toc]) .md-sidebar-toc{display:none}/* Please visit the URL below for more information: *//*   https://shd101wyy.github.io/markdown-preview-enhanced/#/customize-css */      </style>    <meta name="generator" content="Hexo 4.2.1"><link rel="alternate" href="/atom.xml" title="Karobben" type="application/atom+xml"></head>    <body for="html-export">      <div class="mume markdown-preview  ">      <h1 class="mume-header" id="transcriptomic-analysis-of-juvenile-chinese-sea-bass-lateolabrax-maculatus-anesthetized-by-ms-222-tricaine-methanesulfonate-and-eugenol">Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol</h1><p>Cite: Dong, H., Wang, W., Duan, Y. et al. Transcriptomic analysis of juvenile Chinese sea bass (Lateolabrax maculatus) anesthetized by MS-222 (tricaine methanesulfonate) and eugenol. Fish Physiol Biochem (2020). <a href="https://doi.org/10.1007/s10695-019-00755-x" target="_blank" rel="noopener">https://doi.org/10.1007/s10695-019-00755-x</a></p><h1 class="mume-header" id="general-information">General Information</h1><h2 class="mume-header" id="statistic-information">Statistic information</h2><table><thead><tr><th style="text-align:center">Content</th><th style="text-align:center">Words</th><th style="text-align:center">Ratio</th></tr></thead><tbody><tr><td style="text-align:center">Total Words</td><td style="text-align:center">3624</td><td style="text-align:center">100%</td></tr><tr><td style="text-align:center">Abstract</td><td style="text-align:center">306</td><td style="text-align:center">8.43%</td></tr><tr><td style="text-align:center">Introduction</td><td style="text-align:center">512</td><td style="text-align:center">14.11%</td></tr><tr><td style="text-align:center">M&amp;M</td><td style="text-align:center">685</td><td style="text-align:center">18.88%</td></tr><tr><td style="text-align:center">Results</td><td style="text-align:center">821</td><td style="text-align:center">22.63%</td></tr><tr><td style="text-align:center"><strong>Discussion</strong></td><td style="text-align:center">1300</td><td style="text-align:center">35.83%</td></tr></tbody></table><h2 class="mume-header" id="background">Background</h2><p><a href="https://baike.baidu.com/item/%E8%8A%B1%E9%B2%88/901118?fromtitle=%E4%B8%AD%E5%9B%BD%E8%8A%B1%E9%B2%88&amp;fromid=9645483" target="_blank" rel="noopener"><em>Lateolabrax maculatus</em></a>:</p><p><img src="http://m.qpic.cn/psc?/V12yEYVQ115d6d/PH*WNmm91dtUAbGDTrti4QL8R.ktu3X7BJDL02jmjA*XIDyh7*.gFdYmEl7FFvTGBwaPM.fYmAF83sghSqkqug!!/b&amp;bo=gALqAAAAAAARB1g!&amp;rf=viewer_4" alt="avatar"><br>(copyright: <a href="http://pic.cas.cn" target="_blank" rel="noopener">http://pic.cas.cn</a>)</p><p>MS-222 &amp; eugenol: Fish anesthetics.</p><h1 class="mume-header" id="abstract">Abstract</h1><ol><li>M &amp; E are two widely used fish anesthetics.</li><li>This experiment reveals the transcriptomic changing during the recovering from fish anesthetics (6h after treated).</li><li>RNA from gills and livers were extracted and compared.</li><li>Non essential data filled here.</li><li>Some DEGs participated in human disease and metabolism.(ps: ummmm...WHAT? = =)</li><li>Two treatment interested different pathways.</li><li>MS-222 may affect metabolism and immunity and more harmful than eugenol.</li></ol><p>PS: <em>Abstract</em> briefly introduced the purpose &amp; results of the experiment. First, it revealed the toxicity of two anesthetics, and second, it can improve our understanding on some human diseases(maybe??) and the detoxification of the fish in the transcription level.</p><h1 class="mume-header" id="introduction">Introduction</h1><p>P1: What is anesthetics; The contribution of anesthetics; Which anesthetics are available; How do them work;</p><p>P2: Wide geography-distribution(It&apos;s an important commercial species). Anesthetic could reduce the mortality during transportation.</p><p>P3: Some related experiments had done but not on the same page. So, with the evidences of this experiment, people can make a better choice between MS-222 and eugenol.</p><h1 class="mume-header" id="mm">M&amp;M</h1><p>Skip (^ ^ )</p><ul><li>Animal</li><li>Sample extraction</li><li>RNA extraction, library preparation, and Illumina Hiseq<br>sequencing</li><li>De novo assembly and annotation</li><li>Differentially expressed genes</li><li>Single nucleotide polymorphism and simple sequence<br>repeat detection</li></ul><h1 class="mume-header" id="result">Result</h1><ul><li>Transcriptome sequence assembly</li><li>Annotation and function analysis</li><li>Differentially expressed genes</li><li>SNP and SSR detection</li></ul><blockquote><h2>Transcriptome sequence assembly</h2><ul><li>Raw reads</li><li>Clean reads</li><li>Unigenes</li><li>Annotated Genes</li></ul><h2>Annotation and function analysis</h2><ul><li>COG (p1)</li><li>GO (p2)</li><li>KEGG (p3)</li></ul><p>Table (sample, Raw reads)</p><h2>Differentially expressed genes</h2><ul><li>Unigenes</li><li>DEGs count(unique genes, annotated genes)</li><li>(Charts &amp; tables)</li><li>GO</li><li>Unique/interested  Go-Terms</li><li>Charts</li><li>KEGG</li><li>Unique/interested pathways</li></ul><h2>SNP and SSR detection</h2></blockquote><p>Skip</p><h1 class="mume-header" id="discussion">Discussion</h1><h2 class="mume-header" id="p1-general-result-from-degs">P1-General result from DEGs</h2><ol><li><strong>Less DEGs</strong> found in eugenol-treated livers sample</li><li>Pathways associated with human diseases and metabolism were found in <strong>both samples</strong>.</li><li>E group is intrested in <strong>detoxification</strong> and <strong>xenobiotics</strong>; M group is interested in <strong>organismal system</strong></li></ol><h2 class="mume-header" id="p2-comparative">P2-Comparative</h2><ol><li><strong>Stress</strong></li></ol><div class="mermaid">graph LR;Stress--&gt;|Stress Related|Diseases;Diseases--&gt;|Change|Oxidants;Diseases--&gt;|Change|Anesthetic;Diseases--&gt;|Change|Antioxidants;Antioxidants-.-&gt;|Reduce|Stress;</div><ol start="2"><li><strong>Eugenol is less harmful than MS-222</strong></li></ol><ul><li>Eugenol group: 22 DEGs involved in 30 different pathways related xenobiotics biodegradation and metabolism, which means <span style="color:salmon;"><b>detoxification activities of the livers</b></span>.</li><li>MS-222 group: higher levels of AST, ALT, AKP, which reveals MS-222 cause <span style="color:salmon;"><b>more damages to livers</b></span>.(explain: can not be metabolized)</li></ul><ol start="3"><li><strong>GST</strong> (Glutathione-S-transferase)</li></ol><ul><li>BG: low activity of GST means low detoxification ability.</li><li>Different responses of facing MS-222 in different species from previous research.</li><li>Our result: <em>L. maculatus</em> is more vulnerable.</li></ul><ol start="4"><li><strong>A smaller number of DEGs</strong> may reveals lees intervention of E  compared with M. (PS: = = smaller...)</li><li>Additionally, eugenol is <strong>natural</strong> and may easier to metabolized.<br>(PS: ... Good, I just learned another skill to fill more words on discussion section)</li></ol><h2 class="mume-header" id="p3-stress-metabolism">P3 Stress &amp; Metabolism</h2><ol><li>BG: liver glucose oxidation is enhanced. Amino acid evolved in gluconeogenesis during the stress responses.</li><li>Those pathways are <strong>enriched in both groups</strong>.</li><li>Recent start verified <em>point 1</em>.</li></ol><h2 class="mume-header" id="p4-pathways-involved-in-environmental-information-processing">P4 Pathways involved in environmental information processing</h2><ul><li>Jak-STAT signaling, PI3KAkt signaling, TNF signaling, and cytokine-cytokine receptor interaction.</li><li>BG: HPI-&gt;Cotisol; stress can inhibit inflammatory cytokine production and induce apoptosis, proliferation, and phagocytosis of immune cells.<br>Here: More DEGs related immune-related pathways are found in E group.</li><li>BG: stress affects HPG and may affect reprodctive performance;<br>Here: Some DEGs involved in productive activities are found in M group.</li><li>BG: Lethimonier observed that stress-induced cortisol inhibited vitellogenesis,<br>Here: We found it here, too.</li><li>Conclusion: MS-222 is more harmful than eugenol.</li></ul><h2 class="mume-header" id="p5-gill-livers">P5 Gill &amp; Livers</h2><p>Result:  not change the original functions of the organs</p><h2 class="mume-header" id="p6-conclusion">P6 Conclusion</h2><p>MS-222 revealed that all these anesthetics regulate the metabolic and immune pathways in the fish, and MS-222 may trigger more damages on the fish liver and reproduction.</p><hr><h1 class="mume-header" id="related-papers">Related papers:</h1><p>Morais S, Pratoomyot J, Taggart JB, Bron JE, Guy DR, Bell JG, Tocher DR (2011b) Genotype-specific responses in Atlantic salmon (Salmo salar) subject to dietary fish oil replacement by vegetable oil: a liver transcriptomic analysis. BMC Genomics 12:255</p><p>Morais S, Edvardsen RB, Tocher DR, Bell JG (2012a) Transcriptomic analyses of intestinal gene expression of juvenile Atlantic cod (Gadus morhua) fed diets with Camelina oil as replacement for fish oil. Comp Biochem Physiol B Biochem Mol Biol 161:283&#x2013;293.</p><p>Tacchi L, Secombes CJ, Bickerdike R, Adler MA, Venegas C, Takle H, Martin SA (2012)  Transcriptomic and physiological responses to fishmeal substitution with plant proteins in formulated feed in farmed Atlantic salmon (Salmo salar). BMC Genomics 13:363</p><hr><h1 class="mume-header" id="related-notes">Related Notes:</h1><p><a href="paperrnaseqfish2">De novo characterization of the liver transcriptome of javelin goby Synechogobius hasta and analysis of its transcriptomic profile following waterborne copper exposure</a></p><p><a href="paperrnaseqfish3">Physiological and transcriptomic responses to fishmeal-based diet and rapeseed meal-based diet in two strains of gibel carp (Carassius gibelio)</a></p><p><a href="paperrnaseqfish4">Transcriptomic response to soybean meal-based diets as the frst formulated feed in juvenile yellow perch (Perca favescens)</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R &#x8BED;&#x8A00;&#x753B;&#x56FE;&#x7D22;&#x5F15;: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>      </div>                        <script>// config mermaid init call// http://knsv.github.io/mermaid/#configuration//// You can edit the 'MERMAID_CONFIG' variable below.MERMAID_CONFIG = {  startOnLoad: false}if (window['MERMAID_CONFIG']) {  window['MERMAID_CONFIG'].startOnLoad = false  window['MERMAID_CONFIG'].cloneCssStyles = false  window['MERMAID_CONFIG'].theme = "default"}mermaid.initialize(window['MERMAID_CONFIG'] || {})if (typeof(window['Reveal']) !== 'undefined') {  function mermaidRevealHelper(event) {    var currentSlide = event.currentSlide    var diagrams = currentSlide.querySelectorAll('.mermaid')    for (var i = 0; i < diagrams.length; i++) {      var diagram = diagrams[i]      if (!diagram.hasAttribute('data-processed')) {        mermaid.init(null, diagram, ()=> {          Reveal.slide(event.indexh, event.indexv)        })      }    }  }  Reveal.addEventListener('slidechanged', mermaidRevealHelper)  Reveal.addEventListener('ready', mermaidRevealHelper)} else {  mermaid.init(null, document.getElementsByClassName('mermaid'))}</script>                          <script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body></html>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo: Footnotes</title>
      <link href="/Blog/Hexo_footnotes.html"/>
      <url>/Blog/Hexo_footnotes.html</url>
      
        <content type="html"><![CDATA[<h1>Hexo: Footnotes</h1><p>Reference: <a href="https://zhanghuimeng.github.io/post/add-footnote-plugin-for-hexo-blog/" target="_blank" rel="noopener">张慕晖 2018</a></p><p>We can using <code>hexo-renderer-markdown-it</code> to achieve this.<br>But before we install it, we need to remove the default widget <code>hexo-renderer-marked</code>.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it --save</span><br></pre></td></tr></table></figure></div><p>Codes for <code>_config.yml</code></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="BASH"><figure class="iseeu highlight /bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Markdown-it config</span></span><br><span class="line"><span class="comment">## Docs: https://github.com/celsomiranda/hexo-renderer-markdown-it/wiki</span></span><br><span class="line">markdown:</span><br><span class="line">  <span class="comment"># 渲染设置</span></span><br><span class="line">  render:</span><br><span class="line">    <span class="comment"># 置为true时，html内容保持不变；置为false时，html内容将被转义成普通字符串</span></span><br><span class="line">    html: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 是否生成与XHTML完全兼容的标签（虽然我不懂是什么意思）</span></span><br><span class="line">    xhtmlOut: <span class="literal">false</span></span><br><span class="line">    <span class="comment"># 置为true时，每个换行符都被渲染成一个&lt;br&gt;（即Hexo的默认表现）；置为false时，只有空行才会被渲染为&lt;br&gt;（GFM的默认表现）</span></span><br><span class="line">    breaks: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 是否自动识别链接并把它渲染成链接</span></span><br><span class="line">    linkify: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 是否自动识别印刷格式（意思是把(c)渲染为©这样的）</span></span><br><span class="line">    typographer: <span class="literal">true</span></span><br><span class="line">    <span class="comment"># 如果typographer被设置为true，则该选项用于设置将dumb quotes（""）自动替换为smart quotes</span></span><br><span class="line">    quotes: <span class="string">'“”‘’'</span></span><br><span class="line">  <span class="comment"># 设置所需插件</span></span><br><span class="line">  plugins:</span><br><span class="line">    - markdown-it-abbr</span><br><span class="line">    - markdown-it-footnote</span><br><span class="line">    - markdown-it-ins</span><br><span class="line">    - markdown-it-sub</span><br><span class="line">    - markdown-it-sup</span><br><span class="line">  <span class="comment"># 锚点设置（因为我没有尝试相关内容，所以就不翻译相关说明了）</span></span><br><span class="line">  anchors:</span><br><span class="line">    level: 2</span><br><span class="line">    collisionSuffix: <span class="string">'v'</span></span><br><span class="line">    permalink: <span class="literal">true</span></span><br><span class="line">    permalinkClass: header-anchor</span><br><span class="line">    permalinkSymbol: ¶</span><br></pre></td></tr></table></figure></div><h1>Grammar for Footnotes</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="MD"><figure class="iseeu highlight /md"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">As you can see[^2], the order of the footnotes is doesn't matter[^1].</span><br><span class="line"></span><br><span class="line">[<span class="symbol">^2</span>]: <span class="link">Word: see</span></span><br><span class="line">[<span class="symbol">^1</span>]: <span class="link">Word: matter</span></span><br></pre></td></tr></table></figure></div><h1>Result</h1><h2 id="Before"><a class="header-anchor" href="#Before"></a>Before:</h2><p><a href="https://imgchr.com/i/aBejnU" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/04/aBejnU.md.png" alt="aBejnU.md.png"></a></p><h2 id="Now"><a class="header-anchor" href="#Now"></a>Now:</h2><p>( You can see the codes at above)<br>As you can see<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>, the order of the footnotes is doesn’t matter<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>.</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Word: see <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>Word: matter <a href="#fnref2" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Python|OpenCV| Images to Video</title>
      <link href="/Blog/Py_img2video.html"/>
      <url>/Blog/Py_img2video.html</url>
      
        <content type="html"><![CDATA[<h1>Python| OpenCV: Video Speed up</h1><p>Before starting:<br>You can find some fundamental codes of Opencv at: <a href="https://karobben.github.io/Python/OpenCV.html">My Blog</a><br>You can find the latest release at: <a href="https://github.com/Karobben/Karobben-Work-Station/blob/master/img2video.py" target="_blank" rel="noopener">GitHub: Karobben</a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python3</span></span><br><span class="line"><span class="comment"># -*- coding: utf-8 -*-</span></span><br><span class="line"><span class="comment"># @Time    : 2020/08/03</span></span><br><span class="line"><span class="comment"># @Author  : Karobben</span></span><br><span class="line"><span class="comment"># @Site    : China</span></span><br><span class="line"><span class="comment"># @File    : VideoSlice.py</span></span><br><span class="line"><span class="comment"># @Software: Atom</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> argparse</span><br><span class="line"></span><br><span class="line">parser = argparse.ArgumentParser()</span><br><span class="line">parser.add_argument(<span class="string">'-i'</span>, <span class="string">'-I'</span>, <span class="string">'--input'</span>, nargs=<span class="string">'+'</span>,</span><br><span class="line">                    help=<span class="string">'Input Video file'</span>)     <span class="comment">#输入文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-o'</span>, <span class="string">'-U'</span>, <span class="string">'--output'</span>,</span><br><span class="line">                    default = <span class="string">"out_test.avi"</span>,</span><br><span class="line">                    help=<span class="string">'Output Video file, default as "out_test.avi"'</span>)     <span class="comment">#输出文件</span></span><br><span class="line">parser.add_argument(<span class="string">'-f'</span>,<span class="string">'-F'</span>,<span class="string">'--fps'</span>, default = <span class="number">0</span>,</span><br><span class="line">                    type = int,</span><br><span class="line">                    help=<span class="string">'Speed up by ratio, "default = 24"'</span>)     <span class="comment">#帧率</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#获取参数</span></span><br><span class="line">args = parser.parse_args()</span><br><span class="line">File = args.input</span><br><span class="line">OUTPUT = args.output</span><br><span class="line">fps = args.fps</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cv2, os</span><br><span class="line"></span><br><span class="line">List = os.popen(<span class="string">'ls '</span>+File).read().split(<span class="string">'\n'</span>)[:<span class="number">-1</span>]</span><br><span class="line">img = cv2.imread(File +<span class="string">"/"</span>+List[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">size = (len(img[<span class="number">0</span>]),len(img))</span><br><span class="line">fourcc = cv2.VideoWriter_fourcc(<span class="string">'M'</span>,<span class="string">'J'</span>,<span class="string">'P'</span>,<span class="string">'G'</span>)</span><br><span class="line">videowriter = cv2.VideoWriter(OUTPUT,fourcc,fps,size)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> List:</span><br><span class="line">    img = cv2.imread(File +<span class="string">"/"</span>+i)</span><br><span class="line">    videowriter.write(img)</span><br><span class="line"></span><br><span class="line">videowriter.release()</span><br></pre></td></tr></table></figure></div><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili：<a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Response Surface Methodology in R</title>
      <link href="/R/R-rsm.html"/>
      <url>/R/R-rsm.html</url>
      
        <content type="html"><![CDATA[<h1>Response Surface Methodology in R (rsm)</h1><div id="flowchart-0" class="flow-chart"></div><h1>Introduction of RSM and rsm pacakge</h1><p>Response-surface methodology comprises a body of methods for exploring for <strong>optimum operating conditions</strong> through experimental methods.</p><p>The rsm package for R (R Development Core Team 2009<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>) provides several functions to facilitate classical response-surface methods.</p><p>Commercial Software for rsm:</p><ul><li>Design-Expert</li><li>JMP</li><li>Statgraphics</li></ul><p><em><strong>rsm</strong></em> <span style="color:salmon">covers only</span> the most standard <strong>first-and second order designs</strong> and methods for <strong>one response variable</strong>.</p><p><strong>desirability</strong> package (Kuhn 2009) may be used in conjunction with predictions obtained using the <strong>rsm</strong> package</p><h1>Install</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">install.packages(<span class="string">'rsm'</span>)</span><br></pre></td></tr></table></figure></div><h1>Started With</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(<span class="string">"rsm"</span>)</span><br><span class="line">ChemReact</span><br></pre></td></tr></table></figure></div><p>Table ChemReact:</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Time   Temp Block Yield</span><br><span class="line">1  80.00 170.00    B1  80.5</span><br><span class="line">2  80.00 180.00    B1  81.5</span><br><span class="line">3  90.00 170.00    B1  82.0</span><br><span class="line">4  90.00 180.00    B1  83.5</span><br><span class="line">5  85.00 175.00    B1  83.9</span><br><span class="line">6  85.00 175.00    B1  84.3</span><br><span class="line">7  85.00 175.00    B1  84.0</span><br><span class="line">8  85.00 175.00    B2  79.7</span><br><span class="line">9  85.00 175.00    B2  79.8</span><br><span class="line">10 85.00 175.00    B2  79.5</span><br><span class="line">11 92.07 175.00    B2  78.4</span><br><span class="line">12 77.93 175.00    B2  75.6</span><br><span class="line">13 85.00 182.07    B2  78.5</span><br><span class="line">14 85.00 167.93    B2  77.0</span><br></pre></td></tr></table></figure></div><h2 id="div-id-step1-coded-date-div"><a class="header-anchor" href="#div-id-step1-coded-date-div"></a><div id="step1">coded.date</div></h2><p>The first block, ChemReact1, uses factor settings of <code>Time = 85 ± 5</code> and <code>Temp = 175 ± 5</code>, with three center points. Thus, the coded variables are <code>x1 = (Time − 85)=5</code> and <code>x1 = (Temp − 175)=5</code>.</p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CR1 &lt;- coded.data(ChemReact1, x1 ~ (Time - <span class="number">85</span>)/<span class="number">5</span>, x2 ~ (Temp - <span class="number">175</span>)/<span class="number">5</span>)</span><br><span class="line">CR1</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Time Temp Yield</span><br><span class="line">1   80  170  80.5</span><br><span class="line">2   80  180  81.5</span><br><span class="line">3   90  170  82.0</span><br><span class="line">4   90  180  83.5</span><br><span class="line">5   85  175  83.9</span><br><span class="line">6   85  175  84.3</span><br><span class="line">7   85  175  84.0</span><br><span class="line"></span><br><span class="line">Data are stored in coded form using these coding formulas ...</span><br><span class="line">x1 ~ (Time - 85)&#x2F;5</span><br><span class="line">x2 ~ (Temp - 175)&#x2F;5</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># data frame was used to plot</span></span><br><span class="line">as.data.frame(CR1)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">des1 &lt;- ccd (y1 + y2 ~ A + B + C + D,</span><br><span class="line">  generators = E ~ - A * B * C * D, n0 = c(<span class="number">6</span>, <span class="number">1</span>))</span><br><span class="line"></span><br><span class="line">des10 &lt;- ccd( ~ A + B + C + D + E,</span><br><span class="line">  blocks = Blk ~ c(A * B * C, C * D * E), n0 = c(<span class="number">2</span>, <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line">par(mfrow=c(<span class="number">1</span>,<span class="number">2</span>))</span><br><span class="line">varfcn(des10, ~ Blk + SO(A,B,C,D,E), dist = seq(<span class="number">0</span>, <span class="number">3</span>, by=<span class="number">.1</span>))</span><br><span class="line">varfcn(des10, ~ Blk + SO(A,B,C,D,E), dist = seq(<span class="number">0</span>, <span class="number">3</span>, by=<span class="number">.1</span>), contour = <span class="literal">TRUE</span>)</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/aYEgeK" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/02/aYEgeK.md.png" alt="aYEgeK.md.png"></a></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ccd(<span class="number">2</span>, n0 = c(<span class="number">1</span>,<span class="number">1</span>), inscribed=<span class="literal">TRUE</span>, randomize=<span class="literal">FALSE</span>)</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PLAIN"><figure class="iseeu highlight /plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">run.order std.order   x1.as.is   x2.as.is Block</span><br><span class="line">1          1         1 -0.7071068 -0.7071068     1</span><br><span class="line">2          2         2  0.7071068 -0.7071068     1</span><br><span class="line">3          3         3 -0.7071068  0.7071068     1</span><br><span class="line">4          4         4  0.7071068  0.7071068     1</span><br><span class="line">5          5         5  0.0000000  0.0000000     1</span><br><span class="line">6          1         1 -1.0000000  0.0000000     2</span><br><span class="line">7          2         2  1.0000000  0.0000000     2</span><br><span class="line">8          3         3  0.0000000 -1.0000000     2</span><br><span class="line">9          4         4  0.0000000  1.0000000     2</span><br><span class="line">10         5         5  0.0000000  0.0000000     2</span><br><span class="line"></span><br><span class="line">Data are stored in coded form using these coding formulas ...</span><br><span class="line">x1 ~ x1.as.is</span><br><span class="line">x2 ~ x2.as.is</span><br></pre></td></tr></table></figure></div><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">CR1.rsm &lt;- rsm(Yield ~ FO(x1, x2), data = CR1)</span><br><span class="line">summary(CR1.rsm)</span><br></pre></td></tr></table></figure></div><h1>CCD (Central-Composite Design)</h1><p>One of the most popular response-surface designs is the central-composite design (CCD), due to Box and Wilson (1951)<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>.</p><p><span style='background:salmon;font-size:30px'> it works as the codes show below, but I didn’t figure out how exactly why = =</span></p><h1>Fitting a Response-Surface Model</h1><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">library</span>(rsm)</span><br><span class="line"></span><br><span class="line">CR1 &lt;- coded.data(ChemReact1, x1 ~ (Time - <span class="number">85</span>)/<span class="number">5</span>, x2 ~ (Temp - <span class="number">175</span>)/<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">CR1.rsm &lt;- rsm(Yield ~ FO(x1, x2), data = CR1)</span><br><span class="line">CR1.rsmi &lt;- update(CR1.rsm, . ~ . + TWI(x1, x2))</span><br><span class="line">CR2 &lt;- djoin(CR1, ChemReact2)</span><br><span class="line">CR2.rsm &lt;- rsm(Yield ~ Block + SO(x1, x2), data = CR2)</span><br><span class="line"></span><br><span class="line">png(<span class="string">'image.png'</span>,w=<span class="number">450</span>, h= <span class="number">1000</span>)</span><br><span class="line">par(mfrow=c(<span class="number">3</span>,<span class="number">1</span>))</span><br><span class="line">image(CR1.rsm, x1~ x2)</span><br><span class="line">image(CR1.rsmi, x1~ x2)</span><br><span class="line">image(CR2.rsm, x1~ x2)</span><br><span class="line">dev.off()</span><br><span class="line"></span><br><span class="line">png(<span class="string">'persp.png'</span>,w=<span class="number">450</span>, h= <span class="number">1000</span>)</span><br><span class="line">par(mfrow=c(<span class="number">3</span>,<span class="number">1</span>))</span><br><span class="line">persp(CR1.rsm, x1~ x2, col=<span class="string">'blue'</span>, contours = list(z=<span class="string">'top'</span>,col=<span class="string">'orange'</span>))</span><br><span class="line">persp(CR1.rsmi, x1~ x2, col=<span class="string">'blue'</span>, contours = list(z=<span class="string">'top'</span>,col=<span class="string">'orange'</span>))</span><br><span class="line">persp(CR2.rsm, x1~ x2, col=<span class="string">'blue'</span>, contours = list(z=<span class="string">'top'</span>,col=<span class="string">'orange'</span>))  </span><br><span class="line">dev.off()</span><br></pre></td></tr></table></figure></div><p>Images:</p><table><thead><tr><th><img src="https://s1.ax1x.com/2020/08/05/asnO5F.png" alt="asnO5F.png"></th><th><img src="https://s1.ax1x.com/2020/08/05/asnjC4.png" alt="asnjC4.png"></th></tr></thead><tbody><tr><td>image(CR1.rsm, x1~ x2)<br>image(CR1.rsmi, x1~ x2)<br>image(CR2.rsm, x1~ x2)</td><td>persp(CR1.rsm, x1~ x2, col=‘blue’, contours = list(z=‘top’,col=‘orange’))<br>persp(CR1.rsmi, x1~ x2, col=‘blue’, contours = list(z=‘top’,col=‘orange’))<br>persp(CR2.rsm, x1~ x2, col=‘blue’, contours = list(z=‘top’,col=‘orange’))</td></tr></tbody></table><br><p><span style="font-size:20px"><strong>More about this codes</strong>:</span><br>Video tutorial: <a href="https://www.youtube.com/watch?v=s5QWxvLsgLA&amp;t=193s" target="_blank" rel="noopener">Chris Mack 2016</a><br>Codes: <a href="http://www.lithoguru.com/scientist/statistics/DOE%20Response%20Surface.R" target="_blank" rel="noopener">Chris Mack 2016</a></p><details>  <summary><span style="background:salmon;font-size:20px"> Click to see the explanation of codes</span> </summary>  <div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#--------------------------------------#</span></span><br><span class="line"><span class="comment">#--- Response Surface Modeling in R ---#</span></span><br><span class="line"><span class="comment">#--------------------------------------#</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#First, install and load the "rsm" package</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># install.packages("rsm")</span></span><br><span class="line"><span class="keyword">library</span>(rsm)</span><br><span class="line"></span><br><span class="line"><span class="comment"># Example generating a Box-Behnken design with three factors and two center points (no)</span></span><br><span class="line">bbd(<span class="number">3</span>, n0 = <span class="number">2</span>, coding = list(x1 ~ (Force - <span class="number">20</span>)/<span class="number">3</span>, x2 ~ (Rate - <span class="number">50</span>)/<span class="number">10</span>, x3 ~ Polish - <span class="number">4</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># Example data set</span></span><br><span class="line">data = ChemReact</span><br><span class="line">plot(data)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># The data set was collected in two blocks.</span></span><br><span class="line"><span class="comment"># Block1 is a 2-level, two-factor factorial design with three repeated center points.</span></span><br><span class="line"><span class="comment"># Block 2 is the Central Composite Design (circomscribed) with 3 center points.</span></span><br><span class="line"><span class="comment"># The variables are Time = 85 +/- 5 and Temp = 175 +/- 5,</span></span><br><span class="line"><span class="comment"># Thus, the coded variables are  x1 = (Time-85)/5 and x2 = (Temp-175)/5</span></span><br><span class="line">CR &lt;- coded.data(ChemReact, x1 ~ (Time - <span class="number">85</span>)/<span class="number">5</span>, x2 ~ (Temp - <span class="number">175</span>)/<span class="number">5</span>)</span><br><span class="line">CR[<span class="number">1</span>:<span class="number">7</span>,]</span><br><span class="line"></span><br><span class="line"><span class="comment"># Note: If the data are already coded, use as.coded.data() to convert to the proper coded data object</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Let's work as though the first block (full factorial) has been finished,</span></span><br><span class="line"><span class="comment"># and we'll fit a linear model, first order (FO), to it (Yield is the response)</span></span><br><span class="line">CR.rsm1 &lt;- rsm(Yield ~ FO(x1, x2), data = CR, subset = (Block == <span class="string">"B1"</span>))</span><br><span class="line">summary(CR.rsm1)</span><br><span class="line"></span><br><span class="line"><span class="comment">#The fit is not very good.  Let's include the interaction term (TWI) and update the model, or start over with a new model (these two lines do the same thing)</span></span><br><span class="line">CR.rsm1.5 &lt;- update(CR.rsm1, . ~ . + TWI(x1, x2))</span><br><span class="line">CR.rsm1.5 &lt;- rsm(Yield ~ FO(x1, x2)+TWI(x1, x2), data = CR, subset = (Block == <span class="string">"B1"</span>))</span><br><span class="line">summary(CR.rsm1.5)</span><br><span class="line"><span class="comment">#This is no better!  The reason is the strong quadratic response, with the peak near the center.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Now let's assume the second block has been collected.  We use the SO (second order) function, which includes FO and TWI</span></span><br><span class="line">CR.rsm2 &lt;- rsm(Yield ~ Block + SO(x1, x2), data = CR)</span><br><span class="line">summary(CR.rsm2)</span><br><span class="line"></span><br><span class="line"><span class="comment"># The secondary point is a maximum (both eigenvalues are negative) and within the experimental design range (no extrapolation)</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Also note that the block is significant, meaning that the processes shifted between the first set of data and the second.  This is not good.  The coefficient is -4.5, meaning the yield shifted down by 4.5% between the two blocks - a more significant effect than either temperatue or time!  This is most easily seen by looking at the repeat center points.</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># We can plot the fitted response as a contour plot.</span></span><br><span class="line">contour(CR.rsm2, ~ x1 + x2, at = summary(CR.rsm2)$canonical$xs)</span><br></pre></td></tr></table></figure></div></details><h1>On the other hand:</h1><p>An other algorithm to plot the surface by <code>lm</code> which explained by Resseel V. Lenth 2010<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup></p><div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="R"><figure class="iseeu highlight /r"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">A.lm &lt;- lm( Yield ~ poly(Time, Temp, degree =<span class="number">2</span>),data=ChemReact1)</span><br><span class="line">image(A.lm, Time~ Temp)</span><br><span class="line">contour(A.lm, Time~ Temp)</span><br><span class="line">persp(A.lm, Time~ Temp, col=<span class="string">'blue'</span>, contours = list(z=<span class="string">'top'</span>,col=<span class="string">'orange'</span>))</span><br></pre></td></tr></table></figure></div><p><a href="https://imgchr.com/i/as1M4K" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/08/05/as1M4K.png" alt="as1M4K.png"></a><br>It’s clearly different from the result above.</p><script src="https://cdnjs.cloudflare.com/ajax/libs/raphael/2.2.7/raphael.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/flowchart/1.6.5/flowchart.min.js"></script><textarea id="flowchart-0-code" style="display: none">st=>start: Tablesp1=>operation: coded.date:>#step1e=>end: End:>http://www.google.comop1=>operation: My Operation|pastop2=>operation: Stuff|currentsub1=>subroutine: 这啥啊|invalidcond=>condition: Yes or No?|approved:>http://www.google.comc2=>condition: Good idea|rejectedio=>inputoutput: catch something...|requestst->sp1(right)cond(yes, right)->c2cond(no)->sub1(left)->op1c2(yes)->io->ec2(no)->op2(right)->op1</textarea><textarea id="flowchart-0-options" style="display: none">{"theme":"simple","scale":1,"line-width":2,"line-length":50,"text-margin":10,"font-size":12}</textarea><script>  var code = document.getElementById("flowchart-0-code").value;  var options = JSON.parse(decodeURIComponent(document.getElementById("flowchart-0-options").value));  var diagram = flowchart.parse(code);  diagram.drawSVG("flowchart-0", options);</script><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>R Development Core Team (2009). R: A Language and Environment for Statistical Computing. R Foundation for Statistical Computing, Vienna, Austria. ISBN 3-900051-07-0, URL <a href="http://www.R-project.org/" target="_blank" rel="noopener">http://www.R-project.org/</a>. <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>Box GEP, Wilson KB (1951). “On the Experimental Attainment of Optimum Conditions.” Journal of the Royal Statistical Society B, 13, 1-45. <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p><a href="http://www2.uaem.mx/r-mirror/web/packages/rsm/vignettes/rsm-plots.pdf" target="_blank" rel="noopener">Surface Plots in the rsm Package</a> <a href="#fnref3" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>English Vocabularies and Sentences about fish tank</title>
      <link href="/LearnNotes/Eng_fish.html"/>
      <url>/LearnNotes/Eng_fish.html</url>
      
        <content type="html"><![CDATA[<h1>English Vocabularies and Sentences about fish tank</h1><p>欢迎评论，或者补充～<br>评论不了可以B站私信我: <a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p><p>Source: <a href="https://www.youtube.com/watch?v=FS1Me36Tg5g" target="_blank" rel="noopener">AQUAPROS 2019</a><sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></p><table><thead><tr><th>English</th><th>Chinese</th></tr></thead><tbody><tr><td>string algae</td><td>丝藻</td></tr><tr><td>Moss</td><td>莫斯</td></tr><tr><td>Prune (Pruning)</td><td>修剪</td></tr><tr><td>garden aquarium</td><td>草缸</td></tr><tr><td>cory fish</td><td>鼠鱼</td></tr><tr><td>farm</td><td>渔场</td></tr><tr><td>quarantine</td><td>隔离</td></tr><tr><td>a school of fish</td><td>鱼群</td></tr><tr><td>nano fish</td><td>小鱼</td></tr><tr><td>cyano(bacteria)</td><td>蓝藻(蓝细菌)</td></tr><tr><td>scraper</td><td>刮刀</td></tr><tr><td>dwarf hair grass</td><td></td></tr><tr><td>plecos</td><td>清道夫</td></tr><tr><td>snails</td><td>螺</td></tr></tbody></table><p>A big pile of Moss</p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a><br>BiliBili: <a href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">史上最不正經的生物狗</a></p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>AQUAPROS 2019; Adding 300 FISH! To Ancient Gardens Planted Aquarium; Youtube <a href="#fnref1" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Effects of culture density and feeding frequency on the growth performance, digestive enzyme activity and tissues histology in hybrid grouper (Epinephelusfuscoguttatus♀×E. lanceolatus♂)</title>
      <link href="/LearnNotes/Paper_fish_dencity.html"/>
      <url>/LearnNotes/Paper_fish_dencity.html</url>
      
        <content type="html"><![CDATA[<h1>Effects of culture density and feeding frequency on the growth performance, digestive enzyme activity and tissues histology in hybrid grouper (Epinephelusfuscoguttatus♀×E. lanceolatus♂)</h1><h1>Abstract</h1><ul><li>A 6 week 5×2 two factorial experiment<ul><li>5 culture densities<ul><li>1.1 kg m−3(0.55 kg fish per tanks, CD1.1)</li><li>2.2 kg m-3(1.1 kg fish per tank, CD2.2)</li><li>3.3 kg m−3(1.65 kg fish per tank, CD3.3)</li><li>4.4 kg m−3(2.2 kg fish per tank, CD4.4)</li><li>5.5 kg m−3(2.75 kg fish per tank, <abbr title="culture density">CD</abbr> 5.5)</li></ul></li><li>2 feeding frequencies(<abbr title="culture frequency">FF</abbr>)<ul><li>2 meals a day (FF2)</li><li>3 meals a day (FF3)</li></ul></li></ul></li><li>growth performance</li><li>body composition</li><li>digestive enzyme activity</li><li>tissues histology</li></ul><table><thead><tr><th style="text-align:center">ID</th><th style="text-align:center">Density</th><th style="text-align:center">Feeding Frequency</th></tr></thead><tbody><tr><td style="text-align:center">G1</td><td style="text-align:center">CD1.1</td><td style="text-align:center">FF3</td></tr><tr><td style="text-align:center">G2</td><td style="text-align:center">CD2.2</td><td style="text-align:center">FF3</td></tr><tr><td style="text-align:center">G3</td><td style="text-align:center">CD3.3</td><td style="text-align:center">FF3</td></tr><tr><td style="text-align:center">G4</td><td style="text-align:center">CD4.4</td><td style="text-align:center">FF3</td></tr><tr><td style="text-align:center">G5</td><td style="text-align:center">CD5.5</td><td style="text-align:center">FF3</td></tr><tr><td style="text-align:center">G6</td><td style="text-align:center">CD1.1</td><td style="text-align:center">FF2</td></tr><tr><td style="text-align:center">G7</td><td style="text-align:center">CD2.2</td><td style="text-align:center">FF2</td></tr><tr><td style="text-align:center">G8</td><td style="text-align:center">CD3.3</td><td style="text-align:center">FF2</td></tr><tr><td style="text-align:center">G9</td><td style="text-align:center">CD4.4</td><td style="text-align:center">FF2</td></tr><tr><td style="text-align:center">G10</td><td style="text-align:center">CD5.5</td><td style="text-align:center">FF2</td></tr></tbody></table><h2 id="Result"><a class="header-anchor" href="#Result"></a>Result</h2><table><thead><tr><th style="text-align:left"></th><th style="text-align:left"></th></tr></thead><tbody><tr><td style="text-align:left">Weight Gain</td><td style="text-align:left">- High: <strong>G7; G1</strong>;<br>- Lowest: <strong>G3</strong>;<br>- FF2 &gt; FF3</td></tr><tr><td style="text-align:left">Muscle</td><td style="text-align:left">- <strong>G8</strong> &gt; <strong>G2-G6</strong><br>- No significantly different between G8 and other groups</td></tr><tr><td style="text-align:left">Protein Content</td><td style="text-align:left">similar like the muscle</td></tr><tr><td style="text-align:left">Serum</td><td style="text-align:left">- glutamic oxaloacetic aminotransferase (AST), alanine aminotransferase (ALT), triglyceride (TG) and cholesterol (CHO)<br>- Immune function: albumin (ALB), serum lysozyme (LZY), superoxide dismutase (SOD) and alkaline phosphatase (AKP) were significantly affected</td></tr><tr><td style="text-align:left">Density</td><td style="text-align:left">- pepsin and lipase in stomach, intestine and liver were significantly affected</td></tr><tr><td style="text-align:left">Histological Structure</td><td style="text-align:left">- Normal: G1, G2, G7 and G8<br>- Other groups were damaged to varying degrees</td></tr></tbody></table><h1>Introduction</h1><pre class="mermaid">graph LR;    FF(daily feeding patterns);    CD(intensive fish-farming);    FC(growth performance);    NC(nutritional conditions);    SL(stress levels);    MP(management procedures);    WQ(water quality);    FF-->FC;    rhythms-->FC;    CD-->FC;    WQ-->SL;    FF-->SL;    rhythms-->SL;    CD-->SL;    NC-->SL;    MP-->SL;</pre><h2 id="Feeding-frequency"><a class="header-anchor" href="#Feeding-frequency"></a>Feeding frequency</h2><ul><li>regulating the feed intake</li><li>growth and chemical composition</li><li>reduction of aquaculture production <strong>cost</strong></li><li>preventing <strong>water quality</strong> deterioration</li></ul><p><span style="background:salmon"><strong>Challenge</strong></span>:</p><p><strong>Overfeed</strong>:</p><ul><li>Canoverload: decreasing <strong>digestive efficiency</strong> and <strong>reductions</strong></li></ul><p><strong>Insufficient <abbr title="culture frequency">FF</abbr></strong>:<br>poor growth; high mortality;</p><ul><li>sporadic feeding and low feeding rates may contribute to reduced growth as well as increased hunger, intraspecific aggression, and increased rate of cannibalism<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li></ul><h2 id="Intensive"><a class="header-anchor" href="#Intensive"></a>Intensive</h2><p>Intensive fish-farming practices often cause <strong>stress and poor health</strong> in fish.</p><ul><li>welfare</li><li>aquaculture profitability</li></ul><p><strong>High Density</strong></p><ul><li>stunts fish survival</li><li>percentage weight gain</li><li>specific growth rate</li><li>physical</li><li>injuries</li><li>stress</li><li>susceptibility to disease</li><li>swimming behaviour</li><li>intensify aggression</li></ul><p>The results are attributed to social interactions competition for food and/or space<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>, leading to the establishment of hierarchies<sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup>.</p><h1>Materials and Methods</h1><p>Skip</p><h1>Result</h1><h1>Discussion</h1><ul><li><p><strong>Weight</strong></p></li><li><p><strong>Blood</strong></p></li><li><p><strong>Muscle</strong><br><strong>moisture</strong> in the muscle gradually decreased with the increase of <abbr title="culture density">CD</abbr><br><strong>Protein</strong>, <strong>fat</strong> and <strong>ash</strong> showed a gradual decline</p></li><li><p><strong>enzyme activities</strong></p><ul><li><strong>pepsin activity</strong> and <strong>amylase<br>activity</strong> FF2 &gt; FF3</li><li>activity increased as the increase of <abbr title="culture density">CD</abbr> except <strong>intestinal amylase</strong></li></ul></li></ul><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>Folkvord A, Ottera H (1993).Effects of initial size distribution, day length, and feeding frequency on growth, survival, and cannibalism in juvenile Atlantic cod (Gadusmorhua L.). Aquaculture 114: 243-260 <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>Lloyd M J , Bates A E . Influence of density-dependent food consumption, foraging and stacking behaviour on the growth rate of the Northern abalone, Haliotis kamtschatkana[J]. Aquaculture, 2008, 277(1-2):24-29. <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p>Cristina E. Trenzado and Manuel de la Higuera and Amalia E. Morales. Influence of dietary vitamins E and C and HUFA on rainbow trout (Oncorhynchus mykiss) performance under crowding conditions[J]. Aquaculture, 2007. <a href="#fnref3" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>鱼缸除藻生物工具</title>
      <link href="/Blog/tank_notes.html"/>
      <url>/Blog/tank_notes.html</url>
      
        <content type="html"><![CDATA[<h1>鱼缸除藻生物工具</h1><h2 id="螺"><a class="header-anchor" href="#螺"></a>螺</h2><ol><li>黑金刚<br><img src="https://inews.gtimg.com/newsapp_bt/0/11590591635/1000" alt="摄影丨帅不过我haha"><br>© 帅不过我haha</li></ol><p>缺点:</p><ul><li>难看<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup></li><li>黑金刚翻泥，刚种下的前景草飘起来了</li><li>喜欢产卵，多数是产在水草叶背面</li><li>趴在缸壁上发呆，半天懒得动一下</li></ul><ol start="2"><li>苹果螺<sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup><br><img src="https://pic3.zhimg.com/80/v2-4c8821ce1ffbf6eb068d41b06d243a14_720w.jpg" alt="苹果螺"></li></ol><ul><li>食性：绿斑藻、褐藻、饲料、细小水草（慕斯）</li><li><strong>爆缸警告</strong></li></ul><ol start="3"><li>马来螺<sup class="footnote-ref"><a href="#fn2" id="fnref2:1">[2:1]</a></sup><br><img src="https://picb.zhimg.com/80/v2-fe677645cadbc484ae9a37f2ee381861_720w.jpg" alt="马来螺"></li></ol><ul><li>推荐度：★★☆☆☆（除藻能力弱）</li><li>食性：绿斑藻、褐藻、饲料</li></ul><ol start="4"><li>斑马螺<sup class="footnote-ref"><a href="#fn2" id="fnref2:2">[2:2]</a></sup></li></ol><ul><li>推荐度：★★★☆☆（除藻能力一般）</li><li>食性：绿斑藻、褐藻、饲料</li><li><strong>汽水螺</strong></li></ul><h2 id="鱼类"><a class="header-anchor" href="#鱼类"></a>鱼类</h2><ol><li>青苔鼠<sup class="footnote-ref"><a href="#fn1" id="fnref1:1">[1:1]</a></sup></li></ol><ul><li>它不但拔草</li><li>抢鱼粮跟吸病鱼</li><li>不容易捕捞</li></ul><ol start="2"><li>小猴飞狐； 黑线飞狐<sup class="footnote-ref"><a href="#fn2" id="fnref2:3">[2:3]</a></sup></li></ol><table><thead><tr><th><img src="https://pic4.zhimg.com/80/v2-65bef75c5f2902f2bf0e359a525a0bd4_720w.jpg" alt="小猴飞狐"></th><th><img src="https://pic4.zhimg.com/80/v2-91139150b478147064a2a14a10b18fc7_720w.jpg" alt="黑线飞狐"></th></tr></thead><tbody></tbody></table><ul><li>食性：褐藻、绿斑藻、丝藻、饲料</li><li>成鱼大小：10-15CM (过大)</li></ul><ol start="3"><li>小精灵，学名筛耳鲶<sup class="footnote-ref"><a href="#fn2" id="fnref2:4">[2:4]</a></sup><br><img src="https://pic4.zhimg.com/80/v2-d86cc41f0de87ed7cc413f3240fe580b_720w.jpg" alt="img"></li></ol><ul><li>成鱼大小：4-6CM</li><li>食性：褐藻、绿斑藻、蜗牛卵、饲料</li><li>习性：性格温和胆小，可与灯鱼一起混养</li><li><strong>水质不好会暴毙</strong></li></ul><ol start="4"><li>黄金大胡子<sup class="footnote-ref"><a href="#fn2" id="fnref2:5">[2:5]</a></sup><br><img src="https://pic4.zhimg.com/80/v2-7ff51ae43c4c584d99fd9f4ff329e01e_720w.jpg" alt="黄金大胡子"></li></ol><ul><li>成鱼大小：10-12CM</li><li>食性：褐藻、绿斑藻、烫熟青瓜、烫熟菠菜</li><li>习性：性格温和胆小，大了会翻底泥</li></ul><ol start="5"><li>龙须灯鱼<sup class="footnote-ref"><a href="#fn2" id="fnref2:6">[2:6]</a></sup><br><img src="https://pic1.zhimg.com/80/v2-6bbe88ac3f37cb863e8c5a449370e5a1_720w.jpg" alt="龙须灯鱼"></li></ol><ul><li>成鱼大小：6-7CM</li><li>食性：缸面油膜、饲料</li><li>习性：性格温和，生活在上层</li></ul><ol start="6"><li>巧克力娃娃鱼<sup class="footnote-ref"><a href="#fn2" id="fnref2:7">[2:7]</a></sup><br><img src="https://pic4.zhimg.com/80/v2-a87eecd695356114a330bc1511a7abf5_720w.jpg" alt="巧克力娃娃鱼"></li></ol><ul><li>成鱼大小：3-4CM</li><li>食性：缸内淡水螺、虾、鱼苗、饲料</li><li>习性：肉食性鱼、主要吃杂螺，会攻击鱼虾</li><li><span style="background:salmon">超级凶！！超级凶！！！</span></li></ul><ol start="7"><li>鼠鱼（一类），甲鲶亚科<sup class="footnote-ref"><a href="#fn2" id="fnref2:8">[2:8]</a></sup><br><img src="https://pic2.zhimg.com/80/v2-28d10032a7a52193cee9d4bb5e3a27e8_720w.jpg" alt="鼠鱼"></li></ol><ul><li>成鱼大小：5-6CM</li><li>食性：褐藻、绿斑藻、饲料</li><li>习性：会翻底泥，前景草杀手</li></ul><h2 id="虾"><a class="header-anchor" href="#虾"></a>虾</h2><ol><li>黑壳虾<sup class="footnote-ref"><a href="#fn2" id="fnref2:9">[2:9]</a></sup><br><img src="https://pic1.zhimg.com/80/v2-b2593521f79d057281201224f65996c9_720w.jpg" alt="黑壳虾"></li></ol><ul><li>除藻满星</li><li>成虾大小：2-3CM</li><li>食性：几乎所有藻类、菌膜</li></ul><ol start="2"><li>大河藻虾<sup class="footnote-ref"><a href="#fn2" id="fnref2:10">[2:10]</a></sup><br><img src="https://picb.zhimg.com/80/v2-d6a0baa884647eca185538a07e1f4b18_720w.jpg" alt="大河藻虾"></li></ol><ul><li>除藻满星</li><li>成虾大小：4-5CM</li><li>食性：几乎所有藻类、菌膜</li></ul><ol start="3"><li>极火，琉璃虾<sup class="footnote-ref"><a href="#fn2" id="fnref2:11">[2:11]</a></sup></li></ol><ul><li>除藻能力：一般。。。但是漂亮呀！</li><li>成虾大小：2-3CM</li><li>食性：几乎所有藻类、菌膜</li></ul><p>个人经验：</p><p>筛耳鲶<br>黑壳虾<br>苹果螺<br>青鳉</p><hr class="footnotes-sep"><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p>萌宠随想录; 鱼缸里除藻强力的工具螺，都这么多坏毛病吗; 企鹅号; 2020-04-15. <a href="https://new.qq.com/omn/20200415/20200415A0FUC800.html" target="_blank" rel="noopener">链接</a> <a href="#fnref1" class="footnote-backref">↩︎</a> <a href="#fnref1:1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>案锦水草； 如何选择草缸的工具鱼、虾、螺； 知乎; 2018-05-28; <a href="https://zhuanlan.zhihu.com/p/37369154" target="_blank" rel="noopener">链接</a> <a href="#fnref2" class="footnote-backref">↩︎</a> <a href="#fnref2:1" class="footnote-backref">↩︎</a> <a href="#fnref2:2" class="footnote-backref">↩︎</a> <a href="#fnref2:3" class="footnote-backref">↩︎</a> <a href="#fnref2:4" class="footnote-backref">↩︎</a> <a href="#fnref2:5" class="footnote-backref">↩︎</a> <a href="#fnref2:6" class="footnote-backref">↩︎</a> <a href="#fnref2:7" class="footnote-backref">↩︎</a> <a href="#fnref2:8" class="footnote-backref">↩︎</a> <a href="#fnref2:9" class="footnote-backref">↩︎</a> <a href="#fnref2:10" class="footnote-backref">↩︎</a> <a href="#fnref2:11" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>Heatmaps</title>
      <link href="/Blog/heatmap.html"/>
      <url>/Blog/heatmap.html</url>
      
        <content type="html"><![CDATA[<h1>Heatmaps</h1><h1>pheatmap</h1><p><img src="https://s1.ax1x.com/2020/06/20/NlbOJK.png" alt="pheatmap"><br>see codes: <a href="https://karobben.github.io/R/pheatmap.html">pheatmap</a></p><ul><li>easy to use</li><li>can be converted to ggplot</li><li>adding the dendrograms automatically</li></ul><h1>ggplot</h1><p><img src="" alt=""></p>]]></content>
      
    </entry>
    
    
    
    <entry>
      <title>GGplot in Github</title>
      <link href="/R/R-gitgg.html"/>
      <url>/R/R-gitgg.html</url>
      
        <content type="html"><![CDATA[<h1>GGplot in Github</h1><p>Update by: 2020/1/20<br />Sort by stars</p><ol><li><a href="https://github.com/tidyverse/ggplot2" target="_blank" rel="noopener">tidyverse/ggplot2</a>                        4.2k(stars)</li><li><a href="https://github.com/thomasp85/gganimate" target="_blank" rel="noopener">thomasp85/gganimate</a>                 1.4k</li><li><a href="https://github.com/jrnold/ggthemes" target="_blank" rel="noopener">jrnold/ggthemes</a>                          1k</li><li><a href="https://github.com/thomasp85/ggraph" target="_blank" rel="noopener">thomasp85/ggraph</a>                      694</li><li><a href="https://github.com/slowkow/ggrepel" target="_blank" rel="noopener">slowkow/ggrepel</a>                         694</li><li><a href="https://github.com/rstudio/ggvis" target="_blank" rel="noopener">rstudio/ggvis</a>                               661</li><li><a href="https://github.com/cttobin/ggthemr" target="_blank" rel="noopener">cttobin/ggthemr</a>                           597</li><li><a href="https://github.com/dkahle/ggmap" target="_blank" rel="noopener">dkahle/ggmap</a>                             564</li><li><a href="https://github.com/kassambara/ggpubr" target="_blank" rel="noopener">kassambara/ggpubr</a>                     532</li><li><a href="https://github.com/thomasp85/ggforce" target="_blank" rel="noopener">thomasp85/ggforce</a>                     493</li><li><a href="https://github.com/hrbrmstr/ggalt" target="_blank" rel="noopener">hrbrmstr/ggalt</a>                             483</li><li><a href="https://github.com/sinhrks/ggfortify" target="_blank" rel="noopener">sinhrks/ggfortify</a>                          415</li><li><a href="https://github.com/YuLab-SMU/ggtree" target="_blank" rel="noopener">YuLab-SMU/ggtree</a>                     381</li><li><a href="https://github.com/davidgohel/ggiraph" target="_blank" rel="noopener">davidgohel/ggiraph</a>                     360</li><li><a href="https://github.com/ggobi/ggally" target="_blank" rel="noopener">ggobi/ggally</a>                               320</li><li><a href="https://github.com/calligross/ggthemeassist" target="_blank" rel="noopener">calligross/ggthemeassist</a>             316</li><li><a href="https://github.com/yutannihilation/gghighlight" target="_blank" rel="noopener">yutannihilation/gghighlight</a>          313</li><li><a href="https://github.com/nanxstats/ggsci" target="_blank" rel="noopener">nanxstats/ggsci</a>                          310</li><li><a href="https://github.com/eclarke/ggbeeswarm" target="_blank" rel="noopener">eclarke/ggbeeswarm</a>                   301</li><li><a href="https://github.com/clauswilke/ggjoy" target="_blank" rel="noopener">clauswilke/ggjoy</a>                         299</li><li><a href="https://github.com/EmilHvitfeldt/ggpage" target="_blank" rel="noopener">EmilHvitfeldt/ggpage</a>                  290</li><li><a href="https://github.com/wilkelab/ggridges" target="_blank" rel="noopener">wilkelab/ggridges</a>                       288</li><li><a href="https://github.com/daattali/ggExtra" target="_blank" rel="noopener">daattali/ggExtra</a>                         255</li><li><a href="https://github.com/gadenbuie/ggpomological" target="_blank" rel="noopener">gadenbuie/ggpomological</a>          252</li><li><a href="https://github.com/malcolmbarrett/ggdag" target="_blank" rel="noopener">malcolmbarrett/ggdag</a>                237</li><li><a href="https://github.com/echen/ggplot2-tutorial" target="_blank" rel="noopener">echen/ggplot2-tutorial</a>               236</li><li><a href="https://github.com/ricardo-bion/ggtech" target="_blank" rel="noopener">ricardo-bion/ggtech</a>                   236</li><li><a href="https://github.com/vqv/ggbiplot" target="_blank" rel="noopener">vqv/ggbiplot</a>                              229</li><li><a href="https://github.com/strengejacke/ggeffects" target="_blank" rel="noopener">strengejacke/ggeffects</a>              220</li><li><a href="https://github.com/jespermaag/gganatogram" target="_blank" rel="noopener">jespermaag/gganatogram</a>          213</li><li><a href="https://github.com/const-ae/ggsignif" target="_blank" rel="noopener">const-ae/ggsignif</a>                      210</li><li><a href="https://github.com/paleolimbot/ggspatial" target="_blank" rel="noopener">paleolimbot/ggspatial</a>                202</li><li><a href="https://github.com/corybrunson/ggalluvial" target="_blank" rel="noopener">corybrunson/ggalluvial</a>              199</li><li><a href="https://github.com/jennybc/ggplot2-tutorial" target="_blank" rel="noopener">jennybc/ggplot2-tutorial</a>             198</li><li><a href="https://github.com/LKremer/ggpointdensity" target="_blank" rel="noopener">LKremer/ggpointdensity</a>            187</li><li><a href="https://github.com/AtherEnergy/ggTimeSeries" target="_blank" rel="noopener">AtherEnergy/ggTimeSeries</a>       183</li><li><a href="https://github.com/lionel-/ggstance" target="_blank" rel="noopener">lionel-/ggstance</a>                        182</li><li><a href="https://github.com/ricardo-bion/ggradar" target="_blank" rel="noopener">ricardo-bion/ggradar</a>                  180</li><li><a href="https://github.com/dill/emoGG" target="_blank" rel="noopener">dill/emoGG</a>                               170</li><li><a href="https://github.com/wilkox/ggfittext" target="_blank" rel="noopener">wilkox/ggfittext</a>                         169</li><li><a href="https://github.com/briatte/ggnet" target="_blank" rel="noopener">briatte/ggnet</a>                             167</li><li><a href="https://github.com/AliciaSchep/gglabeller" target="_blank" rel="noopener">AliciaSchep/gglabeller</a>               150</li><li><a href="https://github.com/oswaldosantos/ggsn" target="_blank" rel="noopener">oswaldosantos/ggsn</a>                 133</li><li><a href="https://github.com/wilkox/gggenes" target="_blank" rel="noopener">wilkox/gggenes</a>                         124</li><li><a href="https://github.com/eliocamp/ggnewscale" target="_blank" rel="noopener">eliocamp/ggnewscale</a>                124</li><li><a href="https://github.com/erocoar/gghalves" target="_blank" rel="noopener">erocoar/gghalves</a>                      122</li><li><a href="https://github.com/lepennec/ggwordcloud" target="_blank" rel="noopener">lepennec/ggwordcloud</a>              118</li><li><a href="https://github.com/omarwagih/ggseqlogo" target="_blank" rel="noopener">omarwagih/ggseqlogo</a>               116</li><li><a href="https://github.com/RobWHickman/ggparliament" target="_blank" rel="noopener">RobWHickman/ggparliament</a>     116</li><li><a href="https://github.com/clauswilke/ggtextures" target="_blank" rel="noopener">clauswilke/ggtextures</a>               112</li><li><a href="https://github.com/ehrlinger/ggRandomForests" target="_blank" rel="noopener">ehrlinger/ggRandomForests</a>      108</li><li><a href="https://github.com/martin-borkovec/ggparty" target="_blank" rel="noopener">martin-borkovec/ggparty</a>           105</li><li><a href="https://github.com/const-ae/ggupset" target="_blank" rel="noopener">const-ae/ggupset</a>                      104</li><li><a href="https://github.com/VPetukhov/ggrastr" target="_blank" rel="noopener">VPetukhov/ggrastr</a>                    102</li><li><a href="https://github.com/gertstulp/ggplotgui" target="_blank" rel="noopener">gertstulp/ggplotgui</a>                    99</li><li><a href="https://github.com/GuangchuangYu/ggimage" target="_blank" rel="noopener">GuangchuangYu/ggimage</a>          95</li><li><a href="https://github.com/cosname/ggplot2-translation" target="_blank" rel="noopener">cosname/ggplot2-translation</a>      92</li><li><a href="https://github.com/kassambara/ggcorrplot" target="_blank" rel="noopener">kassambara/ggcorrplot</a>              89</li><li><a href="https://github.com/briatte/ggnetwork" target="_blank" rel="noopener">briatte/ggnetwork</a>                      88</li><li><a href="https://github.com/xfim/ggmcmc" target="_blank" rel="noopener">xfim/ggmcmc</a>                            82</li></ol><p><a name="FG8Ad"></a></p><h1>More</h1><p>图片索引:<a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p><hr><p>github: <a href="https://github.com/Karobben" target="_blank" rel="noopener">https://github.com/Karobben</a><br>blog: <a href="http://Karobben.github.io">Karobben.github.io</a><br>R 语言画图索引: <a href="https://karobben.github.io/R/R-index.html">https://karobben.github.io/R/R-index.html</a></p>]]></content>
      
    </entry>
    
    
  
</search>
