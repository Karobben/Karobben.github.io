<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>urwid | Karobben</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="urwid">
<meta property="og:type" content="website">
<meta property="og:title" content="urwid">
<meta property="og:url" content="https://karobben.github.io/Python/urwid.html">
<meta property="og:site_name" content="Karobben">
<meta property="og:description" content="urwid">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://i.loli.net/2020/06/23/VcMDORFeLwnCHIf.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMrWQ.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMszj.png">
<meta property="og:image" content="https://i.loli.net/2020/06/23/kseKCIQEHyLBPl9.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMMdK.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMnqx.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMQIO.gif">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMeMR.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMGzd.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMgLq.png">
<meta property="og:image" content="https://i.loli.net/2020/06/23/k6TZ9csjKrmExPB.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtM6Qs.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMcyn.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMRe0.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMKZ6.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtM3Je.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtM1iD.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtM8RH.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMYQA.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMDJg.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtM5YF.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMIW4.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMbO1.md.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMTSJ.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtM7l9.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMtsI.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMNLt.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMaeP.jpg">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMBFS.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMddf.jpg">
<meta property="og:image" content="https://i.loli.net/2020/06/23/tk3gvZMIBqoPfmH.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMWwV.png">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtM4FU.gif">
<meta property="og:image" content="https://s1.ax1x.com/2020/06/23/NtMfoT.png">
<meta property="article:published_time" content="2020-08-13T09:30:13.812Z">
<meta property="article:modified_time" content="2020-08-13T09:30:13.812Z">
<meta property="article:author" content="Karobben">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://i.loli.net/2020/06/23/VcMDORFeLwnCHIf.png">
  
    <link rel="alternate" href="/atom.xml" title="Karobben" type="application/atom+xml">
  
  
    <link rel="icon" href="img/tag.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

  
<link rel="stylesheet" href="/css/search.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<script>
  var _hmt = _hmt || [];
  (function() {
    var hm = document.createElement("script");
    hm.src = "https://hm.baidu.com/hm.js?8442e6ecc87d878298ba7d3bd0a5484c";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
  })();
</script>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header"; style="background:#1B414B;height:150px">
  <!--div id="banner"></div>-->
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Karobben</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">Karobben Blog</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
          <a id="main-nav-toggle" class="nav-icon"></a>
          <!-- Header Section Start -->
  <header id="slider-area">
    <nav class="navbar navbar-expand-md fixed-top scrolling-navbar bg-white">
      <div class="container">
        <div class="collapse navbar-collapse" id="navbarCollapse">
          <ul class="navbar-nav mr-auto w-100 justify-content-end">
              <a class="main-nav-link" href="../index.html">Home</a>
              <a class="main-nav-link" href="../R/R-index.html">R</a>
              <a class="main-nav-link" href="../Python/index.html">Python</a>
              <a class="main-nav-link" href="../Linux/index.html">Linux</a>
              <a class="main-nav-link" href="../Bioinfor/index.html">Bio-Protocal</a>
              <a class="main-nav-link" href="../LearnNotes/index.html">Notes</a>
              <a class="main-nav-link" href="../Blog/index.html">Others</a>
          </ul>
        </div>
      </div>
    </nav>
  </header>
  <!-- Header Section End -->

      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Looking for Something?"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://karobben.github.io"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><div align='right', style='padding-right:160px;padding-top:1px'>
  
  <span class="local-search local-search-google local-search-plugin" style=";position:absolute;z-index:2;">
      <input type="search" placeholder="Looking for Something?" id="local-search-input" class="local-search-input-cls" style="">
      <div id="local-search-result" class="local-search-result-cls"></div>
  </span>


</div>

<article  id="page-" class="article article-type-page" itemscope itemprop="blogPost">
<div id="tipue_search_content" style="display: none"></div>
  <div class="article-meta">
    <a href="/Python/urwid.html" class="article-date">
  <time datetime="2020-08-13T09:30:13.812Z" itemprop="datePublished">2020-08-13</time>
</a>
    
  </div>
  <div  class="article-inner">
    
    
      <header class="article-header">
        <!--
  
    <h1 class="article-title" itemprop="name">
      urwid
    </h1>
  
 -->
      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <!-- Go To Top Link -->
        <div title="Back to Top" class="back-to-top" style="background:salmon">
  <a href="#"  >
    <i >Top</i>
  </a>
</div>
<div class="title_index">
  <ul id="nav">
   <li>
     Titles
     <ul>
       <!-- Table of Contents -->

  <div id="toc" class="toc-article">
    <strong class="toc-title">Titles</strong>
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">1.</span> <span class="toc-text">urwid</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">2.</span> <span class="toc-text">Quick Start:</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">3.</span> <span class="toc-text">Global Input</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">4.</span> <span class="toc-text">Display Attributes</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#解释："><span class="toc-number">4.1.</span> <span class="toc-text">解释：</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">5.</span> <span class="toc-text">Question and Answer</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">6.</span> <span class="toc-text">Signal Handlers</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">7.</span> <span class="toc-text">Simple Menu</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">8.</span> <span class="toc-text">Pop-up Menu</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">9.</span> <span class="toc-text">Horizontal Menu</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">10.</span> <span class="toc-text">Frames</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#urwid-Text"><span class="toc-number">10.1.</span> <span class="toc-text">urwid.Text</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Frame"><span class="toc-number">10.2.</span> <span class="toc-text">Frame</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ListBox"><span class="toc-number">10.3.</span> <span class="toc-text">ListBox</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">11.</span> <span class="toc-text">Exampels</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#pop-up-py"><span class="toc-number">11.1.</span> <span class="toc-text">pop_up.py</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Button-位置等属性"><span class="toc-number">11.1.1.</span> <span class="toc-text">Button 位置等属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#urwid-Columns"><span class="toc-number">11.1.2.</span> <span class="toc-text">urwid.Columns</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#pop-window-size"><span class="toc-number">11.1.3.</span> <span class="toc-text">pop window size</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#魔改"><span class="toc-number">11.1.4.</span> <span class="toc-text">魔改</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#bigtext-py"><span class="toc-number">11.2.</span> <span class="toc-text">bigtext.py</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Refresh"><span class="toc-number">11.3.</span> <span class="toc-text">Refresh</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#"><span class="toc-number">12.</span> <span class="toc-text">實戰</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Todolist"><span class="toc-number">12.1.</span> <span class="toc-text">Todolist</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Bilibili-信息板"><span class="toc-number">12.2.</span> <span class="toc-text">Bilibili 信息板</span></a></li></ol></li></ol>
  </div>

<!-- Table of Contents Down-->

     </ul>
    </li>
   </ul>
</div>


        <h1>urwid</h1>
<p>Reference：<a href="http://urwid.org/tutorial/index.html" target="_blank" rel="noopener">http://urwid.org/tutorial/index.html</a></p>
<p><a href="http://urwid.org/tutorial/index.html#" target="_blank" rel="noopener">Urwid Tutorial</a><br /> <a href="http://urwid.org/tutorial/index.html#minimal-application" target="_blank" rel="noopener">Minimal Application</a><br /> <a href="http://urwid.org/tutorial/index.html#global-input" target="_blank" rel="noopener">Global Input</a><br /> <a href="http://urwid.org/tutorial/index.html#display-attributes" target="_blank" rel="noopener">Display Attributes</a><br /><a href="http://urwid.org/tutorial/index.html#high-color-modes" target="_blank" rel="noopener"> High Color Modes</a><br /><a href="http://urwid.org/tutorial/index.html#question-and-answer" target="_blank" rel="noopener"> Question and Answer</a><br /><a href="http://urwid.org/tutorial/index.html#signal-handlers" target="_blank" rel="noopener"> Signal Handlers</a><br /><a href="http://urwid.org/tutorial/index.html#multiple-questions" target="_blank" rel="noopener"> Multiple Questions</a><br /> <a href="http://urwid.org/tutorial/index.html#simple-menu" target="_blank" rel="noopener">Simple Menu</a><br /><a href=""> Cascading Menu</a><br /> <a href="http://urwid.org/tutorial/index.html#horizontal-menu">Horizontal Menu</a><br /><a href="http://urwid.org/tutorial/index.html#adventure-game" target="_blank" rel="noopener"> Adventure Game</a></p>
<p>Main tutorial: <a href="http://urwid.org/manual/index.html" target="_blank" rel="noopener">http://urwid.org/manual/index.html</a></p>
<ul>
<li><a href="http://urwid.org/manual/overview.html" target="_blank" rel="noopener">Library Overview</a></li>
<li><a href="http://urwid.org/manual/mainloop.html" target="_blank" rel="noopener">Main Loop</a>
<ul>
<li><a href="http://urwid.org/manual/mainloop.html#widgets-displayed" target="_blank" rel="noopener">Widgets Displayed</a></li>
<li><a href="http://urwid.org/manual/mainloop.html#event-loops" target="_blank" rel="noopener">Event Loops</a></li>
</ul>
</li>
<li><a href="http://urwid.org/manual/displaymodules.html" target="_blank" rel="noopener">Display Modules</a>
<ul>
<li><a href="http://urwid.org/manual/displaymodules.html#raw-and-curses-display-modules" target="_blank" rel="noopener">Raw and Curses Display Modules</a></li>
<li><a href="http://urwid.org/manual/displaymodules.html#other-display-modules" target="_blank" rel="noopener">Other Display Modules</a></li>
<li><a href="http://urwid.org/manual/displaymodules.html#setting-a-palette" target="_blank" rel="noopener">Setting a Palette</a></li>
</ul>
</li>
<li><a href="http://urwid.org/manual/widgets.html" target="_blank" rel="noopener">Widgets</a>
<ul>
<li><a href="http://urwid.org/manual/widgets.html#widget-layout" target="_blank" rel="noopener">Widget Layout</a></li>
<li><a href="http://urwid.org/manual/widgets.html#box-flow-and-fixed-widgets" target="_blank" rel="noopener">Box, Flow and Fixed Widgets</a></li>
<li><a href="http://urwid.org/manual/widgets.html#included-widgets" target="_blank" rel="noopener">Included Widgets</a></li>
<li><a href="http://urwid.org/manual/widgets.html#decoration-widgets" target="_blank" rel="noopener">Decoration Widgets</a></li>
<li><a href="http://urwid.org/manual/widgets.html#container-widgets" target="_blank" rel="noopener">Container Widgets</a></li>
<li><a href="http://urwid.org/manual/widgets.html#listbox-contents" target="_blank" rel="noopener">ListBox Contents</a></li>
<li><a href="http://urwid.org/manual/widgets.html#custom-widgets" target="_blank" rel="noopener">Custom Widgets</a></li>
<li><a href="http://urwid.org/manual/widgets.html#widget-metaclass" target="_blank" rel="noopener">Widget Metaclass</a></li>
</ul>
</li>
<li><a href="http://urwid.org/manual/userinput.html" target="_blank" rel="noopener">User Input</a>
<ul>
<li><a href="http://urwid.org/manual/userinput.html#keyboard-input" target="_blank" rel="noopener">Keyboard Input</a></li>
<li><a href="http://urwid.org/manual/userinput.html#mouse-input" target="_blank" rel="noopener">Mouse Input</a></li>
</ul>
</li>
<li><a href="http://urwid.org/manual/textlayout.html" target="_blank" rel="noopener">Text Layout</a>
<ul>
<li><a href="http://urwid.org/manual/textlayout.html#custom-text-layouts" target="_blank" rel="noopener">Custom Text Layouts</a></li>
<li><a href="http://urwid.org/manual/textlayout.html#text-layout-structures" target="_blank" rel="noopener">Text Layout Structures</a></li>
</ul>
</li>
<li><a href="http://urwid.org/manual/encodings.html" target="_blank" rel="noopener">Encodings Supported</a>
<ul>
<li><a href="http://urwid.org/manual/encodings.html#unicode-support" target="_blank" rel="noopener">Unicode Support</a></li>
<li><a href="http://urwid.org/manual/encodings.html#pass-through-support" target="_blank" rel="noopener">Pass-through Support</a></li>
<li><a href="http://urwid.org/manual/encodings.html#future-work" target="_blank" rel="noopener">Future Work</a></li>
</ul>
</li>
<li><a href="http://urwid.org/manual/displayattributes.html" target="_blank" rel="noopener">Display Attributes</a>
<ul>
<li><a href="http://urwid.org/manual/displayattributes.html#using-display-attributes" target="_blank" rel="noopener">Using Display Attributes</a></li>
<li><a href="http://urwid.org/manual/displayattributes.html#foreground-and-background-settings" target="_blank" rel="noopener">Foreground and Background Settings</a></li>
<li><a href="http://urwid.org/manual/displayattributes.html#recommended-combinations" target="_blank" rel="noopener">Recommended Combinations</a></li>
</ul>
</li>
<li><a href="http://urwid.org/manual/canvascache.html" target="_blank" rel="noopener">Canvas Cache</a>
<ul>
<li><a href="http://urwid.org/manual/canvascache.html#composite-canvases" target="_blank" rel="noopener">Composite Canvases</a></li>
<li><a href="http://urwid.org/manual/canvascache.html#cache-lifetime" target="_blank" rel="noopener">Cache Lifetime</a></li>
<li><a href="http://urwid.org/manual/canvascache.html#future-work" target="_blank" rel="noopener">Future Work</a></li>
</ul>
</li>
</ul>
<p><a name="zxt1G"></a></p>
<h1>Quick Start:</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line">txt = urwid.Text(<span class="string">u"Hello World"</span>)</span><br><span class="line">fill = urwid.Filler(txt, <span class="string">'top'</span>) <span class="comment">#'top', 'middle', 'bottom'</span></span><br><span class="line">loop = urwid.MainLoop(fill)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://i.loli.net/2020/06/23/VcMDORFeLwnCHIf.png" alt="123.png"></p>
<p><a name="byFqh"></a></p>
<h1>Global Input</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">show_or_exit</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line">    txt.set_text(repr(key))</span><br><span class="line"></span><br><span class="line">txt = urwid.Text(<span class="string">u"Hello World"</span>)</span><br><span class="line">fill = urwid.Filler(txt, <span class="string">'top'</span>)</span><br><span class="line">loop = urwid.MainLoop(fill, unhandled_input=show_or_exit)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMrWQ.png" alt="NtMrWQ.png"><br /></p>
<p><a name="XKE08"></a></p>
<h1>Display Attributes</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="string">'banner'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'streak'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'bg'</span>, <span class="string">'black'</span>, <span class="string">'dark blue'</span>),]</span><br><span class="line"></span><br><span class="line">txt = urwid.Text((<span class="string">'banner'</span>, <span class="string">u" Hello World "</span>), align=<span class="string">'center'</span>)</span><br><span class="line">map1 = urwid.AttrMap(txt, <span class="string">'streak'</span>)</span><br><span class="line">fill = urwid.Filler(map1)</span><br><span class="line">map2 = urwid.AttrMap(fill, <span class="string">'bg'</span>)</span><br><span class="line">loop = urwid.MainLoop(map2, palette, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMszj.png" alt="NtMszj.png"><br>
原图<br>
<img src="https://i.loli.net/2020/06/23/kseKCIQEHyLBPl9.png" alt="123.png"><br>
去掉‘bg’<br>
<img src="https://s1.ax1x.com/2020/06/23/NtMMdK.png" alt="NtMMdK.png"><br>
去掉‘streak’</p>
<p><a name="pManZ"></a></p>
<h2 id="解释："><a class="header-anchor" href="#解释："></a>解释：</h2>
<p>txt， 最顶层，标签是‘banner’，获取palette中‘banner’的设置<br />map1， 和txt 一个道理。<br />txt 丢到map1， map1丢到 fill， fill丢到map2， 一层盖一层。<br>
<a name="tc2tt"></a></p>
<h1>Question and Answer</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_on_q</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">        <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuestionBox</span><span class="params">(urwid.Filler)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keypress</span><span class="params">(self, size, key)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key != <span class="string">'enter'</span>:</span><br><span class="line">            <span class="keyword">return</span> super(QuestionBox, self).keypress(size, key)</span><br><span class="line">        self.original_widget = urwid.Text(</span><br><span class="line">            <span class="string">u"Nice to meet you,\n%s.\n\nPress Q to exit."</span> %</span><br><span class="line">            edit.edit_text)</span><br><span class="line"></span><br><span class="line">edit = urwid.Edit(<span class="string">u"What is your name?\n"</span>)</span><br><span class="line">fill = QuestionBox(edit)</span><br><span class="line">loop = urwid.MainLoop(fill, unhandled_input=exit_on_q)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMnqx.png" alt="NtMnqx.png"></p>
<p><a name="S8n5a"></a></p>
<h1>Signal Handlers</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line">palette = [(<span class="string">'I say'</span>, <span class="string">'default,bold'</span>, <span class="string">'default'</span>, <span class="string">'bold'</span>),]</span><br><span class="line">ask = urwid.Edit((<span class="string">'I say'</span>, <span class="string">u"What is your name?\n"</span>))</span><br><span class="line">reply = urwid.Text(<span class="string">u""</span>)</span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">div = urwid.Divider()</span><br><span class="line">pile = urwid.Pile([ask, div, reply, div, button])</span><br><span class="line">top = urwid.Filler(pile, valign=<span class="string">'top'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_ask_change</span><span class="params">(edit, new_edit_text)</span>:</span></span><br><span class="line">    reply.set_text((<span class="string">'I say'</span>, <span class="string">u"Nice to meet you, %s"</span> % new_edit_text))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">urwid.connect_signal(ask, <span class="string">'change'</span>, on_ask_change)</span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line">urwid.MainLoop(top, palette).run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMQIO.gif" alt="NtMQIO.gif"></p>
<p><a name="eFB75"></a></p>
<h1>Simple Menu</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line">choices = <span class="string">u'Chapman Cleese Gilliam Idle Jones Palin'</span>.split()</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">menu</span><span class="params">(title, choices)</span>:</span></span><br><span class="line">    body = [urwid.Text(title), urwid.Divider()]</span><br><span class="line">    <span class="keyword">for</span> c <span class="keyword">in</span> choices:</span><br><span class="line">        button = urwid.Button(c)</span><br><span class="line">        urwid.connect_signal(button, <span class="string">'click'</span>, item_chosen, c)</span><br><span class="line">        body.append(urwid.AttrMap(button, <span class="literal">None</span>, focus_map=<span class="string">'reversed'</span>))</span><br><span class="line">    <span class="keyword">return</span> urwid.ListBox(urwid.SimpleFocusListWalker(body))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">item_chosen</span><span class="params">(button, choice)</span>:</span></span><br><span class="line">    response = urwid.Text([<span class="string">u'You chose '</span>, choice, <span class="string">u'\n'</span>])</span><br><span class="line">    done = urwid.Button(<span class="string">u'Ok'</span>)</span><br><span class="line">    urwid.connect_signal(done, <span class="string">'click'</span>, exit_program)</span><br><span class="line">    main.original_widget = urwid.Filler(urwid.Pile([response,</span><br><span class="line">        urwid.AttrMap(done, <span class="literal">None</span>, focus_map=<span class="string">'reversed'</span>)]))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_program</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">main = urwid.Padding(menu(<span class="string">u'Pythons'</span>, choices), left=<span class="number">2</span>, right=<span class="number">2</span>)</span><br><span class="line">top = urwid.Overlay(main, urwid.SolidFill(<span class="string">u'\N&#123;MEDIUM SHADE&#125;'</span>),</span><br><span class="line">    align=<span class="string">'center'</span>, width=(<span class="string">'relative'</span>, <span class="number">60</span>),</span><br><span class="line">    valign=<span class="string">'middle'</span>, height=(<span class="string">'relative'</span>, <span class="number">60</span>),</span><br><span class="line">    min_width=<span class="number">20</span>, min_height=<span class="number">9</span>)</span><br><span class="line">urwid.MainLoop(top, palette=[(<span class="string">'reversed'</span>, <span class="string">'standout'</span>, <span class="string">''</span>)]).run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMeMR.png" alt="NtMeMR.png"></p>
<p><a name="kT6yB"></a></p>
<h1>Pop-up Menu</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">menu_button</span><span class="params">(caption, callback)</span>:</span></span><br><span class="line">    button = urwid.Button(caption)</span><br><span class="line">    urwid.connect_signal(button, <span class="string">'click'</span>, callback)</span><br><span class="line">    <span class="keyword">return</span> urwid.AttrMap(button, <span class="literal">None</span>, focus_map=<span class="string">'reversed'</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">sub_menu</span><span class="params">(caption, choices)</span>:</span></span><br><span class="line">    contents = menu(caption, choices)</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_menu</span><span class="params">(button)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> top.open_box(contents)</span><br><span class="line">    <span class="keyword">return</span> menu_button([caption, <span class="string">u'...'</span>], open_menu)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">menu</span><span class="params">(title, choices)</span>:</span></span><br><span class="line">    body = [urwid.Text(title), urwid.Divider()]</span><br><span class="line">    body.extend(choices)</span><br><span class="line">    <span class="keyword">return</span> urwid.ListBox(urwid.SimpleFocusListWalker(body))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">item_chosen</span><span class="params">(button)</span>:</span></span><br><span class="line">    response = urwid.Text([<span class="string">u'You chose '</span>, button.label, <span class="string">u'\n'</span>])</span><br><span class="line">    done = menu_button(<span class="string">u'Ok'</span>, exit_program)</span><br><span class="line">    top.open_box(urwid.Filler(urwid.Pile([response, done])))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_program</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">menu_top = menu(<span class="string">u'Main Menu'</span>, [</span><br><span class="line">    sub_menu(<span class="string">u'Applications'</span>, [</span><br><span class="line">        sub_menu(<span class="string">u'Accessories'</span>, [</span><br><span class="line">            menu_button(<span class="string">u'Text Editor'</span>, item_chosen),</span><br><span class="line">            menu_button(<span class="string">u'Terminal'</span>, item_chosen),</span><br><span class="line">        ]),</span><br><span class="line">    ]),</span><br><span class="line">    sub_menu(<span class="string">u'System'</span>, [</span><br><span class="line">        sub_menu(<span class="string">u'Preferences'</span>, [</span><br><span class="line">            menu_button(<span class="string">u'Appearance'</span>, item_chosen),</span><br><span class="line">        ]),</span><br><span class="line">        menu_button(<span class="string">u'Lock Screen'</span>, item_chosen),</span><br><span class="line">    ]),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CascadingBoxes</span><span class="params">(urwid.WidgetPlaceholder)</span>:</span></span><br><span class="line">    max_box_levels = <span class="number">4</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, box)</span>:</span></span><br><span class="line">        super(CascadingBoxes, self).__init__(urwid.SolidFill(<span class="string">u'/'</span>))</span><br><span class="line">        self.box_level = <span class="number">0</span></span><br><span class="line">        self.open_box(box)</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_box</span><span class="params">(self, box)</span>:</span></span><br><span class="line">        self.original_widget = urwid.Overlay(urwid.LineBox(box),</span><br><span class="line">            self.original_widget,</span><br><span class="line">            align=<span class="string">'center'</span>, width=(<span class="string">'relative'</span>, <span class="number">80</span>),</span><br><span class="line">            valign=<span class="string">'middle'</span>, height=(<span class="string">'relative'</span>, <span class="number">80</span>),</span><br><span class="line">            min_width=<span class="number">24</span>, min_height=<span class="number">8</span>,</span><br><span class="line">            left=self.box_level * <span class="number">3</span>,</span><br><span class="line">            right=(self.max_box_levels - self.box_level - <span class="number">1</span>) * <span class="number">3</span>,</span><br><span class="line">            top=self.box_level * <span class="number">2</span>,</span><br><span class="line">            bottom=(self.max_box_levels - self.box_level - <span class="number">1</span>) * <span class="number">2</span>)</span><br><span class="line">        self.box_level += <span class="number">1</span></span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keypress</span><span class="params">(self, size, key)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key == <span class="string">'esc'</span> <span class="keyword">and</span> self.box_level &gt; <span class="number">1</span>:</span><br><span class="line">            self.original_widget = self.original_widget[<span class="number">0</span>]</span><br><span class="line">            self.box_level -= <span class="number">1</span></span><br><span class="line">        <span class="keyword">else</span>:</span><br><span class="line">            <span class="keyword">return</span> super(CascadingBoxes, self).keypress(size, key)</span><br><span class="line"></span><br><span class="line">top = CascadingBoxes(menu_top)</span><br><span class="line">urwid.MainLoop(top, palette=[(<span class="string">'reversed'</span>, <span class="string">'standout'</span>, <span class="string">''</span>)]).run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMGzd.png" alt="NtMGzd.png"></p>
<p><a name="xc41N"></a></p>
<h1>Horizontal Menu</h1>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MenuButton</span><span class="params">(urwid.Button)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, caption, callback)</span>:</span></span><br><span class="line">        super(MenuButton, self).__init__(<span class="string">""</span>)</span><br><span class="line">        urwid.connect_signal(self, <span class="string">'click'</span>, callback)</span><br><span class="line">        self._w = urwid.AttrMap(urwid.SelectableIcon(</span><br><span class="line">            [<span class="string">u'  \N&#123;BULLET&#125; '</span>, caption], <span class="number">2</span>), <span class="literal">None</span>, <span class="string">'selected'</span>)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubMenu</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, caption, choices)</span>:</span></span><br><span class="line">        super(SubMenu, self).__init__(MenuButton(</span><br><span class="line">            [caption, <span class="string">u"\N&#123;HORIZONTAL ELLIPSIS&#125;"</span>], self.open_menu))</span><br><span class="line">        line = urwid.Divider(<span class="string">u'\N&#123;LOWER ONE QUARTER BLOCK&#125;'</span>)</span><br><span class="line">        listbox = urwid.ListBox(urwid.SimpleFocusListWalker([</span><br><span class="line">            urwid.AttrMap(urwid.Text([<span class="string">u"\n  "</span>, caption]), <span class="string">'heading'</span>),</span><br><span class="line">            urwid.AttrMap(line, <span class="string">'line'</span>),</span><br><span class="line">            urwid.Divider()] + choices + [urwid.Divider()]))</span><br><span class="line">        self.menu = urwid.AttrMap(listbox, <span class="string">'options'</span>)</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_menu</span><span class="params">(self, button)</span>:</span></span><br><span class="line">        top.open_box(self.menu)</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Choice</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self, caption)</span>:</span></span><br><span class="line">        super(Choice, self).__init__(</span><br><span class="line">            MenuButton(caption, self.item_chosen))</span><br><span class="line">        self.caption = caption</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">item_chosen</span><span class="params">(self, button)</span>:</span></span><br><span class="line">        response = urwid.Text([<span class="string">u'  You chose '</span>, self.caption, <span class="string">u'\n'</span>])</span><br><span class="line">        done = MenuButton(<span class="string">u'Ok'</span>, exit_program)</span><br><span class="line">        response_box = urwid.Filler(urwid.Pile([response, done]))</span><br><span class="line">        top.open_box(urwid.AttrMap(response_box, <span class="string">'options'</span>))</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exit_program</span><span class="params">(key)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">menu_top = SubMenu(<span class="string">u'Main Menu'</span>, [</span><br><span class="line">    SubMenu(<span class="string">u'Applications'</span>, [</span><br><span class="line">        SubMenu(<span class="string">u'Accessories'</span>, [</span><br><span class="line">            Choice(<span class="string">u'Text Editor'</span>),</span><br><span class="line">            Choice(<span class="string">u'Terminal'</span>),</span><br><span class="line">        ]),</span><br><span class="line">    ]),</span><br><span class="line">    SubMenu(<span class="string">u'System'</span>, [</span><br><span class="line">        SubMenu(<span class="string">u'Preferences'</span>, [</span><br><span class="line">            Choice(<span class="string">u'Appearance'</span>),</span><br><span class="line">        ]),</span><br><span class="line">        Choice(<span class="string">u'Lock Screen'</span>),</span><br><span class="line">    ]),</span><br><span class="line">])</span><br><span class="line"></span><br><span class="line">palette = [</span><br><span class="line">    (<span class="literal">None</span>,  <span class="string">'light gray'</span>, <span class="string">'black'</span>),</span><br><span class="line">    (<span class="string">'heading'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'line'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'options'</span>, <span class="string">'dark gray'</span>, <span class="string">'black'</span>),</span><br><span class="line">    (<span class="string">'focus heading'</span>, <span class="string">'white'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'focus line'</span>, <span class="string">'black'</span>, <span class="string">'dark red'</span>),</span><br><span class="line">    (<span class="string">'focus options'</span>, <span class="string">'black'</span>, <span class="string">'light gray'</span>),</span><br><span class="line">    (<span class="string">'selected'</span>, <span class="string">'white'</span>, <span class="string">'dark blue'</span>)]</span><br><span class="line">focus_map = &#123;</span><br><span class="line">    <span class="string">'heading'</span>: <span class="string">'focus heading'</span>,</span><br><span class="line">    <span class="string">'options'</span>: <span class="string">'focus options'</span>,</span><br><span class="line">    <span class="string">'line'</span>: <span class="string">'focus line'</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">HorizontalBoxes</span><span class="params">(urwid.Columns)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        super(HorizontalBoxes, self).__init__([], dividechars=<span class="number">1</span>)</span><br><span class="line">  <span class="comment">#</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">open_box</span><span class="params">(self, box)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> self.contents:</span><br><span class="line">            <span class="keyword">del</span> self.contents[self.focus_position + <span class="number">1</span>:]</span><br><span class="line">        self.contents.append((urwid.AttrMap(box, <span class="string">'options'</span>, focus_map),</span><br><span class="line">            self.options(<span class="string">'given'</span>, <span class="number">24</span>)))</span><br><span class="line">        self.focus_position = len(self.contents) - <span class="number">1</span></span><br><span class="line"></span><br><span class="line">top = HorizontalBoxes()</span><br><span class="line">top.open_box(menu_top.menu)</span><br><span class="line">urwid.MainLoop(urwid.Filler(top, <span class="string">'middle'</span>, <span class="number">10</span>), palette).run()</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMgLq.png" alt="NtMgLq.png"></p>
<p><a name="9vcI2"></a></p>
<h1>Frames</h1>
<p><a name="6G3ti"></a></p>
<h2 id="urwid-Text"><a class="header-anchor" href="#urwid-Text"></a>urwid.Text</h2>
<p><img src="https://i.loli.net/2020/06/23/k6TZ9csjKrmExPB.png" alt="123.png"><br>
不能:<br />{Column, AttrMap} --&gt; Mainloop</p>
<p>可:<br />{Filler, Frame } -&gt; Mainloop</p>
<p>Column -&gt; Filler  -&gt; Mainloop<br />Text -&gt; Filler  -&gt; Mainloop<br />Column -&gt; Filler -&gt; AttrMap -&gt; Mainloop<br />Text -&gt; Filler -&gt; AttrMap -&gt; Mainloop</p>
<p><a name="QCusj"></a></p>
<h2 id="Frame"><a class="header-anchor" href="#Frame"></a>Frame</h2>
<p>Frame(header=hdr, body=map2)<br>
Text -&gt; AttrWrap &gt; header<br>
Columns -&gt; Filler -&gt; AttrMap -&gt; body</p>
<p><a name="U3Yzd"></a></p>
<h2 id="ListBox"><a class="header-anchor" href="#ListBox"></a>ListBox</h2>
<p>Filler -&gt; ListBox<br>
Padding -&gt; SimpleListWalker -&gt; ListBox<br>
[Text, Pile, Columns] -&gt; SimpleListWalker -&gt; ListBox<br>
[Text, Pile, Columns]-&gt; SimpleListWalker -&gt; ListBox -&gt; AttrWrap -&gt; Frame</p>
<p><a name="7dOh6"></a></p>
<h1>Exampels</h1>
<p>Source: <a href="https://github.com/urwid/urwid/tree/master/examples" target="_blank" rel="noopener">https://github.com/urwid/urwid/tree/master/examples</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtM6Qs.png" alt="NtM6Qs.png"><br>
<a href="http://browse.py" target="_blank" rel="noopener">browse.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMcyn.png" alt="NtMcyn.png"><br>
<a href="http://bigtext.py" target="_blank" rel="noopener">bigtext.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMRe0.png" alt="NtMRe0.png"><br>
<a href="http://treesample.py" target="_blank" rel="noopener">treesample.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMKZ6.png" alt="NtMKZ6.png"><br>
<a href="http://calc.py" target="_blank" rel="noopener">calc.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtM3Je.png" alt="NtM3Je.png"><br>
<a href="http://tour.py" target="_blank" rel="noopener">tour.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtM1iD.png" alt="NtM1iD.png"><br>
<a href="http://edit.py" target="_blank" rel="noopener">edit.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtM8RH.png" alt="NtM8RH.png"><br>
<a href="http://fib.py" target="_blank" rel="noopener">fib.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMYQA.png" alt="NtMYQA.png"><br>
<a href="http://graph.py" target="_blank" rel="noopener">graph.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMDJg.png" alt="NtMDJg.png"><br>
<a href="http://terminal.py" target="_blank" rel="noopener">terminal.py</a></p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtM5YF.png" alt="NtM5YF.png"><br>
input_test.py</p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMIW4.png" alt="NtMIW4.png"><br>
pop_up.py</p>
<p><a href="https://imgchr.com/i/NtMbO1" target="_blank" rel="noopener"><img src="https://s1.ax1x.com/2020/06/23/NtMbO1.md.png" alt="NtMbO1.md.png"></a><br>
palette_test.py</p>
<p>more examples: <a href="https://www.programcreek.com/python/example/12128/urwid.MainLoop" target="_blank" rel="noopener">programcreek.com</a></p>
<p><a name="jee6m"></a></p>
<h2 id="pop-up-py"><a class="header-anchor" href="#pop-up-py"></a>pop_up.py</h2>
<p>P-raw</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PopUpDialog</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="string">"""A dialog that appears with nothing but a close button """</span></span><br><span class="line">    signals = [<span class="string">'close'</span>]</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        close_button = urwid.Button(<span class="string">"that's pretty cool"</span>)</span><br><span class="line">        urwid.connect_signal(close_button, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line">        pile = urwid.Pile([urwid.Text(</span><br><span class="line">            <span class="string">"^^  I'm attached to the widget that opened me. "</span></span><br><span class="line">            <span class="string">"Try resizing the window!\n"</span>), close_button])</span><br><span class="line">        fill = urwid.Filler(pile)</span><br><span class="line">        self.__super.__init__(urwid.AttrWrap(fill, <span class="string">'popbg'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThingWithAPopUp</span><span class="params">(urwid.PopUpLauncher)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__super.__init__(urwid.Button(<span class="string">"click-me"</span>))</span><br><span class="line">        urwid.connect_signal(self.original_widget, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.open_pop_up())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_pop_up</span><span class="params">(self)</span>:</span></span><br><span class="line">        pop_up = PopUpDialog()</span><br><span class="line">        urwid.connect_signal(pop_up, <span class="string">'close'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.close_pop_up())</span><br><span class="line">        <span class="keyword">return</span> pop_up</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_pop_up_parameters</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">'left'</span>:<span class="number">0</span>, <span class="string">'top'</span>:<span class="number">1</span>, <span class="string">'overlay_width'</span>:<span class="number">32</span>, <span class="string">'overlay_height'</span>:<span class="number">7</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">fill = urwid.Filler(urwid.Padding(ThingWithAPopUp(), <span class="string">'center'</span>, <span class="number">15</span>))</span><br><span class="line">loop = urwid.MainLoop(</span><br><span class="line">    fill,</span><br><span class="line">    [(<span class="string">'popbg'</span>, <span class="string">'white'</span>, <span class="string">'dark blue'</span>)],</span><br><span class="line">    pop_ups=<span class="literal">True</span>)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div>
<p>原来程序:<br>
<img src="https://s1.ax1x.com/2020/06/23/NtMTSJ.jpg" alt="NtMTSJ.jpg"><br>
在 pop up 的框里面加一个退出按钮<br />结构解析:<br /></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">close_button = urwid.Button(<span class="string">"that's pretty cool"</span>)      <span class="comment">#定义一个button 名称</span></span><br><span class="line">urwid.connect_signal(close_button, <span class="string">'click'</span>,          <span class="comment"># button 的作用</span></span><br><span class="line">                     <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line">pile = urwid.Pile([urwid.Text(                <span class="comment">#一段文字,加上前面的button</span></span><br><span class="line">    <span class="string">"^^  I'm attached to the widget that opened me. "</span>      <span class="comment">#pile 在一起</span></span><br><span class="line">    <span class="string">"Try resizing the window!\n"</span>), close_button])</span><br><span class="line">fill = urwid.Filler(pile)                  <span class="comment">#封装</span></span><br><span class="line">self.__super.__init__(urwid.AttrWrap(fill, <span class="string">'popbg'</span>))    <span class="comment">#完成</span></span><br></pre></td></tr></table></figure></div>
<p>可以看出基本结构为, Button -&gt; Pile + Button  -&gt;  Filler<br />因此, 除了加入button title和 signal 外, 还需要在 pile处, 一起打包.<br />测试:</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">esc_button = urwid.Button(<span class="string">"Esc"</span>)</span><br><span class="line">urwid.connect_signal(esc_button, <span class="string">'click'</span>,</span><br><span class="line">    <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line">pile = urwid.Pile([urwid.Text(</span><br><span class="line">    <span class="string">"^^  I'm attached to the widget that opened me. "</span></span><br><span class="line">    <span class="string">"Try resizing the window!\n"</span>), close_button,esc_button])</span><br></pre></td></tr></table></figure></div>
<p>直接加的话, 按键会依次排列:<br /><br>
<img src="https://s1.ax1x.com/2020/06/23/NtM7l9.png" alt="NtM7l9.png"></p>
<p><a name="mjICH"></a></p>
<h3 id="Button-位置等属性"><a class="header-anchor" href="#Button-位置等属性"></a>Button 位置等属性</h3>
<p>用 urwid.Padding(close_button, ‘left’, 18) 参数 调整button 位置, 结果一个上左, 一个右下<br />注: 18 为字符数<br /><br>
<img src="https://s1.ax1x.com/2020/06/23/NtMtsI.png" alt="NtMtsI.png"></p>
<p>这里用到一个新函数 ,参考来源:<a href="https://stackoverflow.com/questions/52252730/how-do-you-make-buttons-of-the-python-library-urwid-look-pretty" target="_blank" rel="noopener">stackoverflow</a></p>
<p><a name="TjLXz"></a></p>
<h3 id="urwid-Columns"><a class="header-anchor" href="#urwid-Columns"></a>urwid.Columns</h3>
<p>基本用法:  urwid.Columns([button1, button2])</p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMNLt.png" alt="NtMNLt.png"></p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="comment"># button, 加在上文 p-raw 的 9~11行之间</span></span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line"><span class="comment"># button的排序, 加载urwid.Pile() 里面</span></span><br><span class="line">urwid.Columns([</span><br><span class="line">    urwid.Padding(close_button, <span class="string">'left'</span>),</span><br><span class="line">    urwid.Padding(button, <span class="string">'right'</span>, <span class="number">8</span>),</span><br><span class="line">]),</span><br></pre></td></tr></table></figure></div>
<p>完整代码:<br />pop-2</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#!/usr/bin/env python</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">on_exit_clicked</span><span class="params">(button)</span>:</span></span><br><span class="line">    <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">PopUpDialog</span><span class="params">(urwid.WidgetWrap)</span>:</span></span><br><span class="line">    <span class="string">"""A dialog that appears with nothing but a close button """</span></span><br><span class="line">    signals = [<span class="string">'close'</span>]</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        close_button = urwid.Button(<span class="string">"that's NOT COOL"</span>)</span><br><span class="line">        urwid.connect_signal(close_button, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button:self._emit(<span class="string">"close"</span>))</span><br><span class="line"></span><br><span class="line">        button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">        urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line">        pile = urwid.Pile([urwid.Text(</span><br><span class="line">            <span class="string">"^^  I'm attached to the widget that opened me. "</span></span><br><span class="line">            <span class="string">"Try resizing the window!\n"</span>),</span><br><span class="line">            urwid.Columns([</span><br><span class="line">                urwid.Padding(close_button, <span class="string">'left'</span>),</span><br><span class="line">                urwid.Padding(button, <span class="string">'right'</span>, <span class="number">8</span>),</span><br><span class="line">            ]),</span><br><span class="line">            ])</span><br><span class="line">        fill = urwid.Filler(pile)</span><br><span class="line">        self.__super.__init__(urwid.AttrWrap(fill, <span class="string">'popbg'</span>))</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ThingWithAPopUp</span><span class="params">(urwid.PopUpLauncher)</span>:</span></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">__init__</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.__super.__init__(urwid.Button(<span class="string">"click-me"</span>))</span><br><span class="line">        urwid.connect_signal(self.original_widget, <span class="string">'click'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.open_pop_up())</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">create_pop_up</span><span class="params">(self)</span>:</span></span><br><span class="line">        pop_up = PopUpDialog()</span><br><span class="line">        urwid.connect_signal(pop_up, <span class="string">'close'</span>,</span><br><span class="line">            <span class="keyword">lambda</span> button: self.close_pop_up())</span><br><span class="line">        <span class="keyword">return</span> pop_up</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">get_pop_up_parameters</span><span class="params">(self)</span>:</span></span><br><span class="line">        <span class="keyword">return</span> &#123;<span class="string">'left'</span>:<span class="number">0</span>, <span class="string">'top'</span>:<span class="number">1</span>, <span class="string">'overlay_width'</span>:<span class="number">32</span>, <span class="string">'overlay_height'</span>:<span class="number">7</span>&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">button = urwid.Button(<span class="string">u'Exit'</span>)</span><br><span class="line">urwid.connect_signal(button, <span class="string">'click'</span>, on_exit_clicked)</span><br><span class="line"></span><br><span class="line">pile = urwid.Pile([urwid.Padding(ThingWithAPopUp(), <span class="string">'center'</span>, <span class="number">15</span>),button])</span><br><span class="line">fill = urwid.Filler(pile)</span><br><span class="line">loop = urwid.MainLoop(</span><br><span class="line">    fill,</span><br><span class="line">    [(<span class="string">'popbg'</span>, <span class="string">'white'</span>, <span class="string">'dark blue'</span>)],</span><br><span class="line">    pop_ups=<span class="literal">True</span>)</span><br><span class="line">loop.run()</span><br></pre></td></tr></table></figure></div>
<p><a name="Jbejz"></a></p>
<h3 id="pop-window-size"><a class="header-anchor" href="#pop-window-size"></a>pop window size</h3>
<p>修改这里就好了~</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_pop_up_parameters</span><span class="params">(self)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">'left'</span>:<span class="number">0</span>, <span class="string">'top'</span>:<span class="number">1</span>, <span class="string">'overlay_width'</span>:<span class="number">32</span>, <span class="string">'overlay_height'</span>:<span class="number">7</span>&#125;</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMaeP.jpg" alt="NtMaeP.jpg"><br>
<a name="cxS2V"></a></p>
<h3 id="魔改"><a class="header-anchor" href="#魔改"></a>魔改</h3>
<p>左右各一个list:<br />将pile 放入column中</p>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMBFS.png" alt="NtMBFS.png"></p>
<p>把pop-2 的 51,52行改成</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">pile = urwid.Pile(body_A)</span><br><span class="line">col = urwid.Columns([pile,urwid.Text(<span class="string">"│"</span>),(<span class="string">'fixed'</span>,<span class="number">14</span>,pile)])</span><br><span class="line">fill = urwid.Filler(col)</span><br></pre></td></tr></table></figure></div>
<p><a name="KcNTC"></a></p>
<h2 id="bigtext-py"><a class="header-anchor" href="#bigtext-py"></a><a href="http://bigtext.py" target="_blank" rel="noopener">bigtext.py</a></h2>
<p>非常靓的一个<br>
<img src="https://s1.ax1x.com/2020/06/23/NtMddf.jpg" alt="NtMddf.jpg"><br>
<br />排版区</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Create chars_avail</span></span><br><span class="line">cah = urwid.Text(<span class="string">"Characters Available:"</span>)</span><br><span class="line">self.chars_avail = urwid.Text(<span class="string">""</span>, wrap=<span class="string">'any'</span>)</span><br><span class="line">ca = urwid.AttrWrap(self.chars_avail, <span class="string">'chars'</span>)</span><br><span class="line"></span><br><span class="line">chosen_font_rb.set_state(<span class="literal">True</span>) <span class="comment"># causes set_font_event call</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Create Edit widget</span></span><br><span class="line">edit = self.create_edit(<span class="string">""</span>, <span class="string">"Urwid "</span>+urwid.__version__,</span><br><span class="line">    self.edit_change_event)</span><br><span class="line"></span><br><span class="line"><span class="comment"># ListBox</span></span><br><span class="line">chars = urwid.Pile([cah, ca])</span><br><span class="line">fonts = urwid.Pile([urwid.Text(<span class="string">"Fonts:"</span>)] + self.font_buttons,</span><br><span class="line">    focus_item=<span class="number">1</span>)</span><br><span class="line">col = urwid.Columns([fonts,(<span class="string">'fixed'</span>,<span class="number">16</span>,chars)], <span class="number">3</span>,</span><br><span class="line">    focus_column=<span class="number">1</span>)</span><br><span class="line">bt = urwid.Pile([bt, edit], focus_item=<span class="number">1</span>)</span><br><span class="line">l = [bt, urwid.Divider(), col]</span><br><span class="line">w = urwid.ListBox(urwid.SimpleListWalker(l))</span><br><span class="line"></span><br><span class="line"><span class="comment"># Frame</span></span><br><span class="line">w = urwid.AttrWrap(w, <span class="string">'body'</span>)</span><br><span class="line">hdr = urwid.Text(<span class="string">"Urwid BigText example program - F8 exits."</span>)</span><br><span class="line">hdr = urwid.AttrWrap(hdr, <span class="string">'header'</span>)</span><br><span class="line">w = urwid.Frame(header=hdr, body=w)</span><br></pre></td></tr></table></figure></div>
<p><br />Frame 排版结构<br>
<img src="https://i.loli.net/2020/06/23/tk3gvZMIBqoPfmH.png" alt="124.png"><br>
继续魔改. 首先发现一个bug, 虽然说按F8 退出, 但是按完以后, 只出来一个 pop window, 写着quit, 然后, 就没有然后了. 所以我们先来加一个Esc 按钮吧~ (以后再说)<br /><br>
<br /></p>
<p><a name="QvFMc"></a></p>
<h2 id="Refresh"><a class="header-anchor" href="#Refresh"></a>Refresh</h2>
<p>Eample</p>
<div class="highlight-wrap"autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" contenteditable="true"data-rel="PYTHON"><figure class="iseeu highlight /python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> urwid</span><br><span class="line"><span class="keyword">import</span> time</span><br><span class="line"><span class="keyword">import</span> sys</span><br><span class="line"></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="string">https://github.com/bavanduong/urwid-example/blob/master/clock.py</span></span><br><span class="line"><span class="string">'''</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Clock</span>:</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">keypress</span><span class="params">(self, key)</span>:</span></span><br><span class="line">        <span class="keyword">if</span> key <span class="keyword">in</span> (<span class="string">'q'</span>, <span class="string">'Q'</span>):</span><br><span class="line">            <span class="keyword">raise</span> urwid.ExitMainLoop()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">setup_view</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.clock_txt = urwid.BigText(</span><br><span class="line">            time.strftime(<span class="string">'%H:%M:%S'</span>), urwid.font.HalfBlock5x4Font())</span><br><span class="line">        self.view = urwid.Padding(self.clock_txt, <span class="string">'center'</span>, width=<span class="string">'clip'</span>)</span><br><span class="line">        self.view = urwid.AttrMap(self.view, <span class="string">'body'</span>)</span><br><span class="line">        self.view = urwid.Filler(self.view, <span class="string">'middle'</span>)</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(self)</span>:</span></span><br><span class="line">        self.setup_view()</span><br><span class="line">        loop = urwid.MainLoop(</span><br><span class="line">            self.view, palette=[(<span class="string">'body'</span>, <span class="string">'dark cyan'</span>, <span class="string">''</span>)],</span><br><span class="line">            unhandled_input=self.keypress)</span><br><span class="line">        loop.set_alarm_in(<span class="number">1</span>, self.refresh)</span><br><span class="line">        loop.run()</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">refresh</span><span class="params">(self, loop=None, data=None)</span>:</span></span><br><span class="line">        self.setup_view()</span><br><span class="line">        loop.widget = self.view</span><br><span class="line">        loop.set_alarm_in(<span class="number">1</span>, self.refresh)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">'__main__'</span>:</span><br><span class="line">    clock = Clock()</span><br><span class="line">    sys.exit(clock.main())</span><br></pre></td></tr></table></figure></div>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMWwV.png" alt="NtMWwV.png"></p>
<p><a name="e5hwH"></a></p>
<h1>實戰</h1>
<p><a name="lttQ1"></a></p>
<h2 id="Todolist"><a class="header-anchor" href="#Todolist"></a><a href="https://www.yuque.com/liuwenkan/blog/urwid_todolist" target="_blank" rel="noopener">Todolist</a></h2>
<p><img src="https://s1.ax1x.com/2020/06/23/NtM4FU.gif" alt="NtM4FU.gif"></p>
<p><a name="ATtSJ"></a></p>
<h2 id="Bilibili-信息板"><a class="header-anchor" href="#Bilibili-信息板"></a><a href="https://www.yuque.com/liuwenkan/blog/suxiv3" target="_blank" rel="noopener">Bilibili 信息板</a></h2>
<p><img src="https://s1.ax1x.com/2020/06/23/NtMfoT.png" alt="NtMfoT.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://karobben.github.io/Python/urwid.html" data-id="ckcogixmr00602bfcc1h8dhwt" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/06/">June 2020</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/06/30/tmp/">test</a>
          </li>
        
      </ul>
    </div>
  </div>

  
  <!-- Weather -->
<div id="weather-view-he" ></div>
<script>
WIDGET = {ID: 'HfP68rcshb'};
</script>
<script type="text/javascript" src="https://apip.weatherdt.com/view/static/js/r.js?v=1111"></script>

</aside>

          <!-- Weather Plug -->
        
        <!--git talk-->
        <section id="main">
          <div style='padding-top:10px'>
  <div style="background:white">
    <script src="https://utteranc.es/client.js"
            repo="Karobben/utterances"
            issue-term="pathname"
            theme="preferred-color-scheme"
            crossorigin="anonymous"
            async>
    </script>
  </div>
</div>
<!--git talk-->
  <!-- Link Gitalk 的支持文件  -->
  <!--
    <div>
      <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
      <script src="https://unpkg.com/gitalk@latest/dist/gitalk.min.js"></script>
      <div id="gitalk-container"></div>     <script type="text/javascript">
          var gitalk = new Gitalk({

          // gitalk的主要参数
              clientID: '96c208ade65e80e3aaac',
              clientSecret: '86e9240674a3815b0ddc31dababdb4998d5562f4',
              repo: 'OAuth-Application',
              owner: 'Karobben',
              admin: ['Karobben'],
              id:window.location.pathname,
          });
          gitalk.render('gitalk-container');
      </script>
    </div>
<!-- Gitalk end -->

        </section>
        <!-- Gitalk end -->

      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      <span style="float:right; list-style:none">
        <a style="padding: 10px" href="https://karobben.github.io/">Blog</a>
        <a style="padding: 10px" href="https://github.com/Karobben" target="_blank" rel="noopener">GitHub</a>
        <br>
        <a style="padding: 10px" href="https://space.bilibili.com/393056819" target="_blank" rel="noopener">BiliBili</a>
        <a href="mailto:a591465908@outlook.com">Mail me</a>
      </span>
      &copy; Karobben 2020<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
  <span>
    <p align = "center">
      <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
      <span id="busuanzi_container_site_pv">~<span id="busuanzi_value_site_pv"></span>~</span>
    </p>
  </span>
</footer>

    </div>
    <nav id="mobile-nav">
  <!--`
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  -->
  <a class="mobile-nav-link" href="../index.html">Home</a>
  <a class="mobile-nav-link" href="../R/R-index.html">R</a>
  <a class="mobile-nav-link" href="../Python/index.html">Python</a>
  <a class="mobile-nav-link" href="../Linux/index.html">Linux</a>
  <a class="mobile-nav-link" href="../Bioinfor/index.html">Bio-Protocal</a>
  <a class="mobile-nav-link" href="../LearnNotes/index.html">Notes</a>
  <a class="mobile-nav-link" href="../Blog/index.html">Others</a>
</nav>

    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




<!--mermaid module-->

  <script src='https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js'></script>
  <script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
  </script>



<!-- Searche Module-->
<script src="/js/search.js"></script>
<script src="/js/load.js"></script>
<!-- 这里可能有一些其他原来文件里的代码，也可以没有 -->

  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"log":false,"model":{"jsonPath":"/live2dw/assets/shizuku.model.json"},"display":{"position":"left","width":150,"height":300},"mobile":{"show":true},"react":{"opacity":0.7}});</script></body>
</html>
